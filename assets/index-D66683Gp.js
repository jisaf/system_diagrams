(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wf={exports:{}},Bi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function fS(){if(C0)return Bi;C0=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:e,type:s,key:u,ref:o!==void 0?o:null,props:c}}return Bi.Fragment=n,Bi.jsx=a,Bi.jsxs=a,Bi}var A0;function hS(){return A0||(A0=1,wf.exports=fS()),wf.exports}var x=hS(),xf={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function gS(){if(N0)return Ee;N0=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),y=Symbol.iterator;function b(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,T={};function S(R,k,G){this.props=R,this.context=k,this.refs=T,this.updater=G||C}S.prototype.isReactComponent={},S.prototype.setState=function(R,k){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,k,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function N(){}N.prototype=S.prototype;function _(R,k,G){this.props=R,this.context=k,this.refs=T,this.updater=G||C}var A=_.prototype=new N;A.constructor=_,E(A,S.prototype),A.isPureReactComponent=!0;var D=Array.isArray;function z(){}var $={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function K(R,k,G){var Z=G.ref;return{$$typeof:e,type:R,key:k,ref:Z!==void 0?Z:null,props:G}}function oe(R,k){return K(R.type,k,R.props)}function W(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function ee(R){var k={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(G){return k[G]})}var ne=/\/+/g;function j(R,k){return typeof R=="object"&&R!==null&&R.key!=null?ee(""+R.key):k.toString(36)}function P(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(z,z):(R.status="pending",R.then(function(k){R.status==="pending"&&(R.status="fulfilled",R.value=k)},function(k){R.status==="pending"&&(R.status="rejected",R.reason=k)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function M(R,k,G,Z,ie){var ue=typeof R;(ue==="undefined"||ue==="boolean")&&(R=null);var ce=!1;if(R===null)ce=!0;else switch(ue){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(R.$$typeof){case e:case n:ce=!0;break;case p:return ce=R._init,M(ce(R._payload),k,G,Z,ie)}}if(ce)return ie=ie(R),ce=Z===""?"."+j(R,0):Z,D(ie)?(G="",ce!=null&&(G=ce.replace(ne,"$&/")+"/"),M(ie,k,G,"",function(Te){return Te})):ie!=null&&(W(ie)&&(ie=oe(ie,G+(ie.key==null||R&&R.key===ie.key?"":(""+ie.key).replace(ne,"$&/")+"/")+ce)),k.push(ie)),1;ce=0;var le=Z===""?".":Z+":";if(D(R))for(var de=0;de<R.length;de++)Z=R[de],ue=le+j(Z,de),ce+=M(Z,k,G,ue,ie);else if(de=b(R),typeof de=="function")for(R=de.call(R),de=0;!(Z=R.next()).done;)Z=Z.value,ue=le+j(Z,de++),ce+=M(Z,k,G,ue,ie);else if(ue==="object"){if(typeof R.then=="function")return M(P(R),k,G,Z,ie);throw k=String(R),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return ce}function U(R,k,G){if(R==null)return R;var Z=[],ie=0;return M(R,Z,"","",function(ue){return k.call(G,ue,ie++)}),Z}function B(R){if(R._status===-1){var k=R._result;k=k(),k.then(function(G){(R._status===0||R._status===-1)&&(R._status=1,R._result=G)},function(G){(R._status===0||R._status===-1)&&(R._status=2,R._result=G)}),R._status===-1&&(R._status=0,R._result=k)}if(R._status===1)return R._result.default;throw R._result}var X=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},H={map:U,forEach:function(R,k,G){U(R,function(){k.apply(this,arguments)},G)},count:function(R){var k=0;return U(R,function(){k++}),k},toArray:function(R){return U(R,function(k){return k})||[]},only:function(R){if(!W(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Ee.Activity=v,Ee.Children=H,Ee.Component=S,Ee.Fragment=a,Ee.Profiler=o,Ee.PureComponent=_,Ee.StrictMode=s,Ee.Suspense=g,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(R){return $.H.useMemoCache(R)}},Ee.cache=function(R){return function(){return R.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(R,k,G){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var Z=E({},R.props),ie=R.key;if(k!=null)for(ue in k.key!==void 0&&(ie=""+k.key),k)!V.call(k,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&k.ref===void 0||(Z[ue]=k[ue]);var ue=arguments.length-2;if(ue===1)Z.children=G;else if(1<ue){for(var ce=Array(ue),le=0;le<ue;le++)ce[le]=arguments[le+2];Z.children=ce}return K(R.type,ie,Z)},Ee.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:c,_context:R},R},Ee.createElement=function(R,k,G){var Z,ie={},ue=null;if(k!=null)for(Z in k.key!==void 0&&(ue=""+k.key),k)V.call(k,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ie[Z]=k[Z]);var ce=arguments.length-2;if(ce===1)ie.children=G;else if(1<ce){for(var le=Array(ce),de=0;de<ce;de++)le[de]=arguments[de+2];ie.children=le}if(R&&R.defaultProps)for(Z in ce=R.defaultProps,ce)ie[Z]===void 0&&(ie[Z]=ce[Z]);return K(R,ue,ie)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(R){return{$$typeof:d,render:R}},Ee.isValidElement=W,Ee.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:B}},Ee.memo=function(R,k){return{$$typeof:h,type:R,compare:k===void 0?null:k}},Ee.startTransition=function(R){var k=$.T,G={};$.T=G;try{var Z=R(),ie=$.S;ie!==null&&ie(G,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(z,X)}catch(ue){X(ue)}finally{k!==null&&G.types!==null&&(k.types=G.types),$.T=k}},Ee.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Ee.use=function(R){return $.H.use(R)},Ee.useActionState=function(R,k,G){return $.H.useActionState(R,k,G)},Ee.useCallback=function(R,k){return $.H.useCallback(R,k)},Ee.useContext=function(R){return $.H.useContext(R)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(R,k){return $.H.useDeferredValue(R,k)},Ee.useEffect=function(R,k){return $.H.useEffect(R,k)},Ee.useEffectEvent=function(R){return $.H.useEffectEvent(R)},Ee.useId=function(){return $.H.useId()},Ee.useImperativeHandle=function(R,k,G){return $.H.useImperativeHandle(R,k,G)},Ee.useInsertionEffect=function(R,k){return $.H.useInsertionEffect(R,k)},Ee.useLayoutEffect=function(R,k){return $.H.useLayoutEffect(R,k)},Ee.useMemo=function(R,k){return $.H.useMemo(R,k)},Ee.useOptimistic=function(R,k){return $.H.useOptimistic(R,k)},Ee.useReducer=function(R,k,G){return $.H.useReducer(R,k,G)},Ee.useRef=function(R){return $.H.useRef(R)},Ee.useState=function(R){return $.H.useState(R)},Ee.useSyncExternalStore=function(R,k,G){return $.H.useSyncExternalStore(R,k,G)},Ee.useTransition=function(){return $.H.useTransition()},Ee.version="19.2.0",Ee}var O0;function po(){return O0||(O0=1,xf.exports=gS()),xf.exports}var q=po();const kv=Mv(q);var _f={exports:{}},Ii={},Sf={exports:{}},Ef={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function mS(){return R0||(R0=1,(function(e){function n(M,U){var B=M.length;M.push(U);e:for(;0<B;){var X=B-1>>>1,H=M[X];if(0<o(H,U))M[X]=U,M[B]=H,B=X;else break e}}function a(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var U=M[0],B=M.pop();if(B!==U){M[0]=B;e:for(var X=0,H=M.length,R=H>>>1;X<R;){var k=2*(X+1)-1,G=M[k],Z=k+1,ie=M[Z];if(0>o(G,B))Z<H&&0>o(ie,G)?(M[X]=ie,M[Z]=B,X=Z):(M[X]=G,M[k]=B,X=k);else if(Z<H&&0>o(ie,B))M[X]=ie,M[Z]=B,X=Z;else break e}}return U}function o(M,U){var B=M.sortIndex-U.sortIndex;return B!==0?B:M.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var g=[],h=[],p=1,v=null,y=3,b=!1,C=!1,E=!1,T=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function A(M){for(var U=a(h);U!==null;){if(U.callback===null)s(h);else if(U.startTime<=M)s(h),U.sortIndex=U.expirationTime,n(g,U);else break;U=a(h)}}function D(M){if(E=!1,A(M),!C)if(a(g)!==null)C=!0,z||(z=!0,ee());else{var U=a(h);U!==null&&P(D,U.startTime-M)}}var z=!1,$=-1,V=5,K=-1;function oe(){return T?!0:!(e.unstable_now()-K<V)}function W(){if(T=!1,z){var M=e.unstable_now();K=M;var U=!0;try{e:{C=!1,E&&(E=!1,N($),$=-1),b=!0;var B=y;try{t:{for(A(M),v=a(g);v!==null&&!(v.expirationTime>M&&oe());){var X=v.callback;if(typeof X=="function"){v.callback=null,y=v.priorityLevel;var H=X(v.expirationTime<=M);if(M=e.unstable_now(),typeof H=="function"){v.callback=H,A(M),U=!0;break t}v===a(g)&&s(g),A(M)}else s(g);v=a(g)}if(v!==null)U=!0;else{var R=a(h);R!==null&&P(D,R.startTime-M),U=!1}}break e}finally{v=null,y=B,b=!1}U=void 0}}finally{U?ee():z=!1}}}var ee;if(typeof _=="function")ee=function(){_(W)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,j=ne.port2;ne.port1.onmessage=W,ee=function(){j.postMessage(null)}}else ee=function(){S(W,0)};function P(M,U){$=S(function(){M(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(M){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var B=y;y=U;try{return M()}finally{y=B}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var B=y;y=M;try{return U()}finally{y=B}},e.unstable_scheduleCallback=function(M,U,B){var X=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,M){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,M={id:p++,callback:U,priorityLevel:M,startTime:B,expirationTime:H,sortIndex:-1},B>X?(M.sortIndex=B,n(h,M),a(g)===null&&M===a(h)&&(E?(N($),$=-1):E=!0,P(D,B-X))):(M.sortIndex=H,n(g,M),C||b||(C=!0,z||(z=!0,ee()))),M},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(M){var U=y;return function(){var B=y;y=U;try{return M.apply(this,arguments)}finally{y=B}}}})(Ef)),Ef}var M0;function pS(){return M0||(M0=1,Sf.exports=mS()),Sf.exports}var Tf={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function yS(){if(k0)return Ct;k0=1;var e=po();function n(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:h,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ct.createPortal=function(g,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(n(299));return c(g,h,null,p)},Ct.flushSync=function(g){var h=u.T,p=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=h,s.p=p,s.d.f()}},Ct.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(g,h))},Ct.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ct.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?s.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:b}):p==="script"&&s.d.X(g,{crossOrigin:v,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ct.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);s.d.M(g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(g)},Ct.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin);s.d.L(g,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ct.preloadModule=function(g,h){if(typeof g=="string")if(h){var p=d(h.as,h.crossOrigin);s.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(g)},Ct.requestFormReset=function(g){s.d.r(g)},Ct.unstable_batchedUpdates=function(g,h){return g(h)},Ct.useFormState=function(g,h,p){return u.H.useFormState(g,h,p)},Ct.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ct.version="19.2.0",Ct}var j0;function jv(){if(j0)return Tf.exports;j0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Tf.exports=yS(),Tf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function vS(){if(D0)return Ii;D0=1;var e=pS(),n=po(),a=jv();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function u(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function d(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function h(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(s(188));return r!==t?null:t}for(var i=t,l=r;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){i=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return g(f),t;if(m===l)return g(f),r;m=m.sibling}throw Error(s(188))}if(i.return!==l.return)i=f,l=m;else{for(var w=!1,O=f.child;O;){if(O===i){w=!0,i=f,l=m;break}if(O===l){w=!0,l=f,i=m;break}O=O.sibling}if(!w){for(O=m.child;O;){if(O===i){w=!0,i=m,l=f;break}if(O===l){w=!0,l=m,i=f;break}O=O.sibling}if(!w)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?t:r}function p(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=p(t),r!==null)return r;t=t.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),_=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ee(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Symbol.for("react.client.reference");function j(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ne?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case S:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case z:return"SuspenseList";case K:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case _:return t.displayName||"Context";case N:return(t._context.displayName||"Context")+".Consumer";case A:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return r=t.displayName||null,r!==null?r:j(t.type)||"Memo";case V:r=t._payload,t=t._init;try{return j(t(r))}catch{}}return null}var P=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},X=[],H=-1;function R(t){return{current:t}}function k(t){0>H||(t.current=X[H],X[H]=null,H--)}function G(t,r){H++,X[H]=t.current,t.current=r}var Z=R(null),ie=R(null),ue=R(null),ce=R(null);function le(t,r){switch(G(ue,r),G(ie,t),G(Z,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Zp(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Zp(r),t=Qp(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}k(Z),G(Z,t)}function de(){k(Z),k(ie),k(ue)}function Te(t){t.memoizedState!==null&&G(ce,t);var r=Z.current,i=Qp(r,t.type);r!==i&&(G(ie,t),G(Z,i))}function Se(t){ie.current===t&&(k(Z),k(ie)),ce.current===t&&(k(ce),$i._currentValue=B)}var ye,_e;function Ce(t){if(ye===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);ye=r&&r[1]||"",_e=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+t+_e}var Ie=!1;function Ge(t,r){if(!t||Ie)return"";Ie=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(te){var F=te}Reflect.construct(t,[],se)}else{try{se.call()}catch(te){F=te}t.call(se.prototype)}}else{try{throw Error()}catch(te){F=te}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(te){if(te&&F&&typeof te.stack=="string")return[te.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),w=m[0],O=m[1];if(w&&O){var L=w.split(`
`),J=O.split(`
`);for(f=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(l===L.length||f===J.length)for(l=L.length-1,f=J.length-1;1<=l&&0<=f&&L[l]!==J[f];)f--;for(;1<=l&&0<=f;l--,f--)if(L[l]!==J[f]){if(l!==1||f!==1)do if(l--,f--,0>f||L[l]!==J[f]){var re=`
`+L[l].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=l&&0<=f);break}}}finally{Ie=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Ce(i):""}function mt(t,r){switch(t.tag){case 26:case 27:case 5:return Ce(t.type);case 16:return Ce("Lazy");case 13:return t.child!==r&&r!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Ge(t.type,!1);case 11:return Ge(t.type.render,!1);case 1:return Ge(t.type,!0);case 31:return Ce("Activity");default:return""}}function Ft(t){try{var r="",i=null;do r+=mt(t,i),i=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ln=Object.prototype.hasOwnProperty,ar=e.unstable_scheduleCallback,sr=e.unstable_cancelCallback,Vr=e.unstable_shouldYield,Pr=e.unstable_requestPaint,yt=e.unstable_now,Na=e.unstable_getCurrentPriorityLevel,Mn=e.unstable_ImmediatePriority,ir=e.unstable_UserBlockingPriority,Gr=e.unstable_NormalPriority,nu=e.unstable_LowPriority,Oa=e.unstable_IdlePriority,ru=e.log,au=e.unstable_setDisableYieldValue,Yr=null,At=null;function xn(t){if(typeof ru=="function"&&au(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Yr,t)}catch{}}var Nt=Math.clz32?Math.clz32:ou,su=Math.log,iu=Math.LN2;function ou(t){return t>>>=0,t===0?32:31-(su(t)/iu|0)|0}var Ra=256,Ma=262144,ka=4194304;function kn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ja(t,r,i){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var O=l&134217727;return O!==0?(l=O&~m,l!==0?f=kn(l):(w&=O,w!==0?f=kn(w):i||(i=O&~t,i!==0&&(f=kn(i))))):(O=l&~m,O!==0?f=kn(O):w!==0?f=kn(w):i||(i=l&~t,i!==0&&(f=kn(i)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,i=r&-r,m>=i||m===32&&(i&4194048)!==0)?r:f}function Xr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function lu(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function No(){var t=ka;return ka<<=1,(ka&62914560)===0&&(ka=4194304),t}function Xs(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function Kr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function cu(t,r,i,l,f,m){var w=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var O=t.entanglements,L=t.expirationTimes,J=t.hiddenUpdates;for(i=w&~i;0<i;){var re=31-Nt(i),se=1<<re;O[re]=0,L[re]=-1;var F=J[re];if(F!==null)for(J[re]=null,re=0;re<F.length;re++){var te=F[re];te!==null&&(te.lane&=-536870913)}i&=~se}l!==0&&Oo(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(w&~r))}function Oo(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Nt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|i&261930}function Ro(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var l=31-Nt(i),f=1<<l;f&r|t[l]&r&&(t[l]|=r),i&=~f}}function Mo(t,r){var i=r&-r;return i=(i&42)!==0?1:Ks(i),(i&(t.suspendedLanes|r))!==0?0:i}function Ks(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Zs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ko(){var t=U.p;return t!==0?t:(t=window.event,t===void 0?32:b0(t.type))}function jo(t,r){var i=U.p;try{return U.p=t,r()}finally{U.p=i}}var _n=Math.random().toString(36).slice(2),dt="__reactFiber$"+_n,Et="__reactProps$"+_n,jn="__reactContainer$"+_n,Da="__reactEvents$"+_n,Do="__reactListeners$"+_n,uu="__reactHandles$"+_n,zo="__reactResources$"+_n,Zr="__reactMarker$"+_n;function Qs(t){delete t[dt],delete t[Et],delete t[Da],delete t[Do],delete t[uu]}function or(t){var r=t[dt];if(r)return r;for(var i=t.parentNode;i;){if(r=i[jn]||i[dt]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=r0(t);t!==null;){if(i=t[dt])return i;t=r0(t)}return r}t=i,i=t.parentNode}return null}function lr(t){if(t=t[dt]||t[jn]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function cr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function ur(t){var r=t[zo];return r||(r=t[zo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function at(t){t[Zr]=!0}var $o=new Set,Uo={};function Dn(t,r){dr(t,r),dr(t+"Capture",r)}function dr(t,r){for(Uo[t]=r,t=0;t<r.length;t++)$o.add(r[t])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Js={},Lo={};function fu(t){return ln.call(Lo,t)?!0:ln.call(Js,t)?!1:du.test(t)?Lo[t]=!0:(Js[t]=!0,!1)}function za(t,r,i){if(fu(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function $a(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function cn(t,r,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+l)}}function Rt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ho(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function hu(t,r,i){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(w){i=""+w,m.call(this,w)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ua(t){if(!t._valueTracker){var r=Ho(t)?"checked":"value";t._valueTracker=hu(t,r,""+t[r])}}function Bo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),l="";return t&&(l=Ho(t)?t.checked?"true":"false":t.value),t=l,t!==i?(r.setValue(t),!0):!1}function La(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gu=/[\n"\\]/g;function Tt(t){return t.replace(gu,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Fs(t,r,i,l,f,m,w,O){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),r!=null?w==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Rt(r)):t.value!==""+Rt(r)&&(t.value=""+Rt(r)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),r!=null?Ha(t,w,Rt(r)):i!=null?Ha(t,w,Rt(i)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?t.name=""+Rt(O):t.removeAttribute("name")}function Io(t,r,i,l,f,m,w,O){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ua(t);return}i=i!=null?""+Rt(i):"",r=r!=null?""+Rt(r):i,O||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=O?t.checked:!!l,t.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w),Ua(t)}function Ha(t,r,i){r==="number"&&La(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function Ba(t,r,i,l){if(t=t.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=r.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&l&&(t[i].defaultSelected=!0)}else{for(i=""+Rt(i),r=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Ph(t,r,i){if(r!=null&&(r=""+Rt(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+Rt(i):""}function Gh(t,r,i,l){if(r==null){if(l!=null){if(i!=null)throw Error(s(92));if(P(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),r=i}i=Rt(r),t.defaultValue=i,l=t.textContent,l===i&&l!==""&&l!==null&&(t.value=l),Ua(t)}function Ia(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var ox=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yh(t,r,i){var l=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,i):typeof i!="number"||i===0||ox.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function Xh(t,r,i){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&i[f]!==l&&Yh(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Yh(t,m,r[m])}function mu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qo(t){return cx.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function zn(){}var pu=null;function yu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qa=null,Va=null;function Kh(t){var r=lr(t);if(r&&(t=r.stateNode)){var i=t[Et]||null;e:switch(t=r.stateNode,r.type){case"input":if(Fs(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Tt(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var l=i[r];if(l!==t&&l.form===t.form){var f=l[Et]||null;if(!f)throw Error(s(90));Fs(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)l=i[r],l.form===t.form&&Bo(l)}break e;case"textarea":Ph(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&Ba(t,!!i.multiple,r,!1)}}}var vu=!1;function Zh(t,r,i){if(vu)return t(r,i);vu=!0;try{var l=t(r);return l}finally{if(vu=!1,(qa!==null||Va!==null)&&(Ol(),qa&&(r=qa,t=Va,Va=qa=null,Kh(r),t)))for(r=0;r<t.length;r++)Kh(t[r])}}function Ws(t,r){var i=t.stateNode;if(i===null)return null;var l=i[Et]||null;if(l===null)return null;i=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(s(231,r,typeof i));return i}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=!1;if($n)try{var ei={};Object.defineProperty(ei,"passive",{get:function(){bu=!0}}),window.addEventListener("test",ei,ei),window.removeEventListener("test",ei,ei)}catch{bu=!1}var fr=null,wu=null,Vo=null;function Qh(){if(Vo)return Vo;var t,r=wu,i=r.length,l,f="value"in fr?fr.value:fr.textContent,m=f.length;for(t=0;t<i&&r[t]===f[t];t++);var w=i-t;for(l=1;l<=w&&r[i-l]===f[m-l];l++);return Vo=f.slice(t,1<l?1-l:void 0)}function Po(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Go(){return!0}function Jh(){return!1}function Mt(t){function r(i,l,f,m,w){this._reactName=i,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var O in t)t.hasOwnProperty(O)&&(i=t[O],this[O]=i?i(m):m[O]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Go:Jh,this.isPropagationStopped=Jh,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),r}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=Mt(Qr),ti=v({},Qr,{view:0,detail:0}),ux=Mt(ti),xu,_u,ni,Xo=v({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ni&&(ni&&t.type==="mousemove"?(xu=t.screenX-ni.screenX,_u=t.screenY-ni.screenY):_u=xu=0,ni=t),xu)},movementY:function(t){return"movementY"in t?t.movementY:_u}}),Fh=Mt(Xo),dx=v({},Xo,{dataTransfer:0}),fx=Mt(dx),hx=v({},ti,{relatedTarget:0}),Su=Mt(hx),gx=v({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),mx=Mt(gx),px=v({},Qr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yx=Mt(px),vx=v({},Qr,{data:0}),Wh=Mt(vx),bx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _x(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=xx[t])?!!r[t]:!1}function Eu(){return _x}var Sx=v({},ti,{key:function(t){if(t.key){var r=bx[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Po(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(t){return t.type==="keypress"?Po(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Po(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ex=Mt(Sx),Tx=v({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eg=Mt(Tx),Cx=v({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),Ax=Mt(Cx),Nx=v({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ox=Mt(Nx),Rx=v({},Xo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mx=Mt(Rx),kx=v({},Qr,{newState:0,oldState:0}),jx=Mt(kx),Dx=[9,13,27,32],Tu=$n&&"CompositionEvent"in window,ri=null;$n&&"documentMode"in document&&(ri=document.documentMode);var zx=$n&&"TextEvent"in window&&!ri,tg=$n&&(!Tu||ri&&8<ri&&11>=ri),ng=" ",rg=!1;function ag(t,r){switch(t){case"keyup":return Dx.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pa=!1;function $x(t,r){switch(t){case"compositionend":return sg(r);case"keypress":return r.which!==32?null:(rg=!0,ng);case"textInput":return t=r.data,t===ng&&rg?null:t;default:return null}}function Ux(t,r){if(Pa)return t==="compositionend"||!Tu&&ag(t,r)?(t=Qh(),Vo=wu=fr=null,Pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return tg&&r.locale!=="ko"?null:r.data;default:return null}}var Lx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Lx[t.type]:r==="textarea"}function og(t,r,i,l){qa?Va?Va.push(l):Va=[l]:qa=l,r=$l(r,"onChange"),0<r.length&&(i=new Yo("onChange","change",null,i,l),t.push({event:i,listeners:r}))}var ai=null,si=null;function Hx(t){Vp(t,0)}function Ko(t){var r=cr(t);if(Bo(r))return t}function lg(t,r){if(t==="change")return r}var cg=!1;if($n){var Cu;if($n){var Au="oninput"in document;if(!Au){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),Au=typeof ug.oninput=="function"}Cu=Au}else Cu=!1;cg=Cu&&(!document.documentMode||9<document.documentMode)}function dg(){ai&&(ai.detachEvent("onpropertychange",fg),si=ai=null)}function fg(t){if(t.propertyName==="value"&&Ko(si)){var r=[];og(r,si,t,yu(t)),Zh(Hx,r)}}function Bx(t,r,i){t==="focusin"?(dg(),ai=r,si=i,ai.attachEvent("onpropertychange",fg)):t==="focusout"&&dg()}function Ix(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ko(si)}function qx(t,r){if(t==="click")return Ko(r)}function Vx(t,r){if(t==="input"||t==="change")return Ko(r)}function Px(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Bt=typeof Object.is=="function"?Object.is:Px;function ii(t,r){if(Bt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),l=Object.keys(r);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var f=i[l];if(!ln.call(r,f)||!Bt(t[f],r[f]))return!1}return!0}function hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,r){var i=hg(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=r&&l>=r)return{node:i,offset:r-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=hg(i)}}function mg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?mg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function pg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=La(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=La(t.document)}return r}function Nu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Gx=$n&&"documentMode"in document&&11>=document.documentMode,Ga=null,Ou=null,oi=null,Ru=!1;function yg(t,r,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ru||Ga==null||Ga!==La(l)||(l=Ga,"selectionStart"in l&&Nu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),oi&&ii(oi,l)||(oi=l,l=$l(Ou,"onSelect"),0<l.length&&(r=new Yo("onSelect","select",null,r,i),t.push({event:r,listeners:l}),r.target=Ga)))}function Jr(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var Ya={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Mu={},vg={};$n&&(vg=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Fr(t){if(Mu[t])return Mu[t];if(!Ya[t])return t;var r=Ya[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in vg)return Mu[t]=r[i];return t}var bg=Fr("animationend"),wg=Fr("animationiteration"),xg=Fr("animationstart"),Yx=Fr("transitionrun"),Xx=Fr("transitionstart"),Kx=Fr("transitioncancel"),_g=Fr("transitionend"),Sg=new Map,ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ku.push("scrollEnd");function un(t,r){Sg.set(t,r),Dn(r,[t])}var Zo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Wt=[],Xa=0,ju=0;function Qo(){for(var t=Xa,r=ju=Xa=0;r<t;){var i=Wt[r];Wt[r++]=null;var l=Wt[r];Wt[r++]=null;var f=Wt[r];Wt[r++]=null;var m=Wt[r];if(Wt[r++]=null,l!==null&&f!==null){var w=l.pending;w===null?f.next=f:(f.next=w.next,w.next=f),l.pending=f}m!==0&&Eg(i,f,m)}}function Jo(t,r,i,l){Wt[Xa++]=t,Wt[Xa++]=r,Wt[Xa++]=i,Wt[Xa++]=l,ju|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Du(t,r,i,l){return Jo(t,r,i,l),Fo(t)}function Wr(t,r){return Jo(t,null,null,r),Fo(t)}function Eg(t,r,i){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i);for(var f=!1,m=t.return;m!==null;)m.childLanes|=i,l=m.alternate,l!==null&&(l.childLanes|=i),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Nt(i),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=i|536870912),m):null}function Fo(t){if(50<Oi)throw Oi=0,Vd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ka={};function Zx(t,r,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,r,i,l){return new Zx(t,r,i,l)}function zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Un(t,r){var i=t.alternate;return i===null?(i=It(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function Tg(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Wo(t,r,i,l,f,m){var w=0;if(l=t,typeof t=="function")zu(t)&&(w=1);else if(typeof t=="string")w=eS(t,i,Z.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case K:return t=It(31,i,r,f),t.elementType=K,t.lanes=m,t;case E:return ea(i.children,f,m,r);case T:w=8,f|=24;break;case S:return t=It(12,i,r,f|2),t.elementType=S,t.lanes=m,t;case D:return t=It(13,i,r,f),t.elementType=D,t.lanes=m,t;case z:return t=It(19,i,r,f),t.elementType=z,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:w=10;break e;case N:w=9;break e;case A:w=11;break e;case $:w=14;break e;case V:w=16,l=null;break e}w=29,i=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=It(w,i,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function ea(t,r,i,l){return t=It(7,t,l,r),t.lanes=i,t}function $u(t,r,i){return t=It(6,t,null,r),t.lanes=i,t}function Cg(t){var r=It(18,null,null,0);return r.stateNode=t,r}function Uu(t,r,i){return r=It(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ag=new WeakMap;function en(t,r){if(typeof t=="object"&&t!==null){var i=Ag.get(t);return i!==void 0?i:(r={value:t,source:r,stack:Ft(r)},Ag.set(t,r),r)}return{value:t,source:r,stack:Ft(r)}}var Za=[],Qa=0,el=null,li=0,tn=[],nn=0,hr=null,Sn=1,En="";function Ln(t,r){Za[Qa++]=li,Za[Qa++]=el,el=t,li=r}function Ng(t,r,i){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hr,hr=t;var l=Sn;t=En;var f=32-Nt(l)-1;l&=~(1<<f),i+=1;var m=32-Nt(r)+f;if(30<m){var w=f-f%5;m=(l&(1<<w)-1).toString(32),l>>=w,f-=w,Sn=1<<32-Nt(r)+f|i<<f|l,En=m+t}else Sn=1<<m|i<<f|l,En=t}function Lu(t){t.return!==null&&(Ln(t,1),Ng(t,1,0))}function Hu(t){for(;t===el;)el=Za[--Qa],Za[Qa]=null,li=Za[--Qa],Za[Qa]=null;for(;t===hr;)hr=tn[--nn],tn[nn]=null,En=tn[--nn],tn[nn]=null,Sn=tn[--nn],tn[nn]=null}function Og(t,r){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hr,Sn=r.id,En=r.overflow,hr=t}var vt=null,Ke=null,je=!1,gr=null,rn=!1,Bu=Error(s(519));function mr(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ci(en(r,t)),Bu}function Rg(t){var r=t.stateNode,i=t.type,l=t.memoizedProps;switch(r[dt]=t,r[Et]=l,i){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<Mi.length;i++)Re(Mi[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Re("invalid",r),Io(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Re("invalid",r);break;case"textarea":Re("invalid",r),Gh(r,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||l.suppressHydrationWarning===!0||Xp(r.textContent,i)?(l.popover!=null&&(Re("beforetoggle",r),Re("toggle",r)),l.onScroll!=null&&Re("scroll",r),l.onScrollEnd!=null&&Re("scrollend",r),l.onClick!=null&&(r.onclick=zn),r=!0):r=!1,r||mr(t,!0)}function Mg(t){for(vt=t.return;vt;)switch(vt.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:vt=vt.return}}function Ja(t){if(t!==vt)return!1;if(!je)return Mg(t),je=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||af(t.type,t.memoizedProps)),i=!i),i&&Ke&&mr(t),Mg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ke=n0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ke=n0(t)}else r===27?(r=Ke,Or(t.type)?(t=uf,uf=null,Ke=t):Ke=r):Ke=vt?sn(t.stateNode.nextSibling):null;return!0}function ta(){Ke=vt=null,je=!1}function Iu(){var t=gr;return t!==null&&(zt===null?zt=t:zt.push.apply(zt,t),gr=null),t}function ci(t){gr===null?gr=[t]:gr.push(t)}var qu=R(null),na=null,Hn=null;function pr(t,r,i){G(qu,r._currentValue),r._currentValue=i}function Bn(t){t._currentValue=qu.current,k(qu)}function Vu(t,r,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===i)break;t=t.return}}function Pu(t,r,i,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var w=f.child;m=m.firstContext;e:for(;m!==null;){var O=m;m=f;for(var L=0;L<r.length;L++)if(O.context===r[L]){m.lanes|=i,O=m.alternate,O!==null&&(O.lanes|=i),Vu(m.return,i,t),l||(w=null);break e}m=O.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(s(341));w.lanes|=i,m=w.alternate,m!==null&&(m.lanes|=i),Vu(w,i,t),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===t){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Fa(t,r,i,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var O=f.type;Bt(f.pendingProps.value,w.value)||(t!==null?t.push(O):t=[O])}}else if(f===ce.current){if(w=f.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push($i):t=[$i])}f=f.return}t!==null&&Pu(r,t,i,l),r.flags|=262144}function tl(t){for(t=t.firstContext;t!==null;){if(!Bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ra(t){na=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return kg(na,t)}function nl(t,r){return na===null&&ra(t),kg(t,r)}function kg(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},Hn===null){if(t===null)throw Error(s(308));Hn=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Hn=Hn.next=r;return i}var Qx=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},Jx=e.unstable_scheduleCallback,Fx=e.unstable_NormalPriority,st={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gu(){return{controller:new Qx,data:new Map,refCount:0}}function ui(t){t.refCount--,t.refCount===0&&Jx(Fx,function(){t.controller.abort()})}var di=null,Yu=0,Wa=0,es=null;function Wx(t,r){if(di===null){var i=di=[];Yu=0,Wa=Zd(),es={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Yu++,r.then(jg,jg),r}function jg(){if(--Yu===0&&di!==null){es!==null&&(es.status="fulfilled");var t=di;di=null,Wa=0,es=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function e_(t,r){var i=[],l={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),l}var Dg=M.S;M.S=function(t,r){yp=yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Wx(t,r),Dg!==null&&Dg(t,r)};var aa=R(null);function Xu(){var t=aa.current;return t!==null?t:Ye.pooledCache}function rl(t,r){r===null?G(aa,aa.current):G(aa,r.pool)}function zg(){var t=Xu();return t===null?null:{parent:st._currentValue,pool:t}}var ts=Error(s(460)),Ku=Error(s(474)),al=Error(s(542)),sl={then:function(){}};function $g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ug(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(zn,zn),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Hg(t),t;default:if(typeof r.status=="string")r.then(zn,zn);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Hg(t),t}throw ia=r,ts}}function sa(t){try{var r=t._init;return r(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ia=i,ts):i}}var ia=null;function Lg(){if(ia===null)throw Error(s(459));var t=ia;return ia=null,t}function Hg(t){if(t===ts||t===al)throw Error(s(483))}var ns=null,fi=0;function il(t){var r=fi;return fi+=1,ns===null&&(ns=[]),Ug(ns,t,r)}function hi(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ol(t,r){throw r.$$typeof===y?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Bg(t){function r(Y,I){if(t){var Q=Y.deletions;Q===null?(Y.deletions=[I],Y.flags|=16):Q.push(I)}}function i(Y,I){if(!t)return null;for(;I!==null;)r(Y,I),I=I.sibling;return null}function l(Y){for(var I=new Map;Y!==null;)Y.key!==null?I.set(Y.key,Y):I.set(Y.index,Y),Y=Y.sibling;return I}function f(Y,I){return Y=Un(Y,I),Y.index=0,Y.sibling=null,Y}function m(Y,I,Q){return Y.index=Q,t?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<I?(Y.flags|=67108866,I):Q):(Y.flags|=67108866,I)):(Y.flags|=1048576,I)}function w(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function O(Y,I,Q,ae){return I===null||I.tag!==6?(I=$u(Q,Y.mode,ae),I.return=Y,I):(I=f(I,Q),I.return=Y,I)}function L(Y,I,Q,ae){var ve=Q.type;return ve===E?re(Y,I,Q.props.children,ae,Q.key):I!==null&&(I.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===V&&sa(ve)===I.type)?(I=f(I,Q.props),hi(I,Q),I.return=Y,I):(I=Wo(Q.type,Q.key,Q.props,null,Y.mode,ae),hi(I,Q),I.return=Y,I)}function J(Y,I,Q,ae){return I===null||I.tag!==4||I.stateNode.containerInfo!==Q.containerInfo||I.stateNode.implementation!==Q.implementation?(I=Uu(Q,Y.mode,ae),I.return=Y,I):(I=f(I,Q.children||[]),I.return=Y,I)}function re(Y,I,Q,ae,ve){return I===null||I.tag!==7?(I=ea(Q,Y.mode,ae,ve),I.return=Y,I):(I=f(I,Q),I.return=Y,I)}function se(Y,I,Q){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=$u(""+I,Y.mode,Q),I.return=Y,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return Q=Wo(I.type,I.key,I.props,null,Y.mode,Q),hi(Q,I),Q.return=Y,Q;case C:return I=Uu(I,Y.mode,Q),I.return=Y,I;case V:return I=sa(I),se(Y,I,Q)}if(P(I)||ee(I))return I=ea(I,Y.mode,Q,null),I.return=Y,I;if(typeof I.then=="function")return se(Y,il(I),Q);if(I.$$typeof===_)return se(Y,nl(Y,I),Q);ol(Y,I)}return null}function F(Y,I,Q,ae){var ve=I!==null?I.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return ve!==null?null:O(Y,I,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Q.key===ve?L(Y,I,Q,ae):null;case C:return Q.key===ve?J(Y,I,Q,ae):null;case V:return Q=sa(Q),F(Y,I,Q,ae)}if(P(Q)||ee(Q))return ve!==null?null:re(Y,I,Q,ae,null);if(typeof Q.then=="function")return F(Y,I,il(Q),ae);if(Q.$$typeof===_)return F(Y,I,nl(Y,Q),ae);ol(Y,Q)}return null}function te(Y,I,Q,ae,ve){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Y=Y.get(Q)||null,O(I,Y,""+ae,ve);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case b:return Y=Y.get(ae.key===null?Q:ae.key)||null,L(I,Y,ae,ve);case C:return Y=Y.get(ae.key===null?Q:ae.key)||null,J(I,Y,ae,ve);case V:return ae=sa(ae),te(Y,I,Q,ae,ve)}if(P(ae)||ee(ae))return Y=Y.get(Q)||null,re(I,Y,ae,ve,null);if(typeof ae.then=="function")return te(Y,I,Q,il(ae),ve);if(ae.$$typeof===_)return te(Y,I,Q,nl(I,ae),ve);ol(I,ae)}return null}function fe(Y,I,Q,ae){for(var ve=null,ze=null,ge=I,Ne=I=0,ke=null;ge!==null&&Ne<Q.length;Ne++){ge.index>Ne?(ke=ge,ge=null):ke=ge.sibling;var $e=F(Y,ge,Q[Ne],ae);if($e===null){ge===null&&(ge=ke);break}t&&ge&&$e.alternate===null&&r(Y,ge),I=m($e,I,Ne),ze===null?ve=$e:ze.sibling=$e,ze=$e,ge=ke}if(Ne===Q.length)return i(Y,ge),je&&Ln(Y,Ne),ve;if(ge===null){for(;Ne<Q.length;Ne++)ge=se(Y,Q[Ne],ae),ge!==null&&(I=m(ge,I,Ne),ze===null?ve=ge:ze.sibling=ge,ze=ge);return je&&Ln(Y,Ne),ve}for(ge=l(ge);Ne<Q.length;Ne++)ke=te(ge,Y,Ne,Q[Ne],ae),ke!==null&&(t&&ke.alternate!==null&&ge.delete(ke.key===null?Ne:ke.key),I=m(ke,I,Ne),ze===null?ve=ke:ze.sibling=ke,ze=ke);return t&&ge.forEach(function(Dr){return r(Y,Dr)}),je&&Ln(Y,Ne),ve}function be(Y,I,Q,ae){if(Q==null)throw Error(s(151));for(var ve=null,ze=null,ge=I,Ne=I=0,ke=null,$e=Q.next();ge!==null&&!$e.done;Ne++,$e=Q.next()){ge.index>Ne?(ke=ge,ge=null):ke=ge.sibling;var Dr=F(Y,ge,$e.value,ae);if(Dr===null){ge===null&&(ge=ke);break}t&&ge&&Dr.alternate===null&&r(Y,ge),I=m(Dr,I,Ne),ze===null?ve=Dr:ze.sibling=Dr,ze=Dr,ge=ke}if($e.done)return i(Y,ge),je&&Ln(Y,Ne),ve;if(ge===null){for(;!$e.done;Ne++,$e=Q.next())$e=se(Y,$e.value,ae),$e!==null&&(I=m($e,I,Ne),ze===null?ve=$e:ze.sibling=$e,ze=$e);return je&&Ln(Y,Ne),ve}for(ge=l(ge);!$e.done;Ne++,$e=Q.next())$e=te(ge,Y,Ne,$e.value,ae),$e!==null&&(t&&$e.alternate!==null&&ge.delete($e.key===null?Ne:$e.key),I=m($e,I,Ne),ze===null?ve=$e:ze.sibling=$e,ze=$e);return t&&ge.forEach(function(dS){return r(Y,dS)}),je&&Ln(Y,Ne),ve}function Pe(Y,I,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===E&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:e:{for(var ve=Q.key;I!==null;){if(I.key===ve){if(ve=Q.type,ve===E){if(I.tag===7){i(Y,I.sibling),ae=f(I,Q.props.children),ae.return=Y,Y=ae;break e}}else if(I.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===V&&sa(ve)===I.type){i(Y,I.sibling),ae=f(I,Q.props),hi(ae,Q),ae.return=Y,Y=ae;break e}i(Y,I);break}else r(Y,I);I=I.sibling}Q.type===E?(ae=ea(Q.props.children,Y.mode,ae,Q.key),ae.return=Y,Y=ae):(ae=Wo(Q.type,Q.key,Q.props,null,Y.mode,ae),hi(ae,Q),ae.return=Y,Y=ae)}return w(Y);case C:e:{for(ve=Q.key;I!==null;){if(I.key===ve)if(I.tag===4&&I.stateNode.containerInfo===Q.containerInfo&&I.stateNode.implementation===Q.implementation){i(Y,I.sibling),ae=f(I,Q.children||[]),ae.return=Y,Y=ae;break e}else{i(Y,I);break}else r(Y,I);I=I.sibling}ae=Uu(Q,Y.mode,ae),ae.return=Y,Y=ae}return w(Y);case V:return Q=sa(Q),Pe(Y,I,Q,ae)}if(P(Q))return fe(Y,I,Q,ae);if(ee(Q)){if(ve=ee(Q),typeof ve!="function")throw Error(s(150));return Q=ve.call(Q),be(Y,I,Q,ae)}if(typeof Q.then=="function")return Pe(Y,I,il(Q),ae);if(Q.$$typeof===_)return Pe(Y,I,nl(Y,Q),ae);ol(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,I!==null&&I.tag===6?(i(Y,I.sibling),ae=f(I,Q),ae.return=Y,Y=ae):(i(Y,I),ae=$u(Q,Y.mode,ae),ae.return=Y,Y=ae),w(Y)):i(Y,I)}return function(Y,I,Q,ae){try{fi=0;var ve=Pe(Y,I,Q,ae);return ns=null,ve}catch(ge){if(ge===ts||ge===al)throw ge;var ze=It(29,ge,null,Y.mode);return ze.lanes=ae,ze.return=Y,ze}finally{}}}var oa=Bg(!0),Ig=Bg(!1),yr=!1;function Zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qu(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function br(t,r,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Le&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Fo(t),Eg(t,null,i),r}return Jo(t,l,r,i),Fo(t)}function gi(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,i|=l,r.lanes=i,Ro(t,i)}}function Ju(t,r){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var w={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=w:m=m.next=w,i=i.next}while(i!==null);m===null?f=m=r:m=m.next=r}else f=m=r;i={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var Fu=!1;function mi(){if(Fu){var t=es;if(t!==null)throw t}}function pi(t,r,i,l){Fu=!1;var f=t.updateQueue;yr=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,O=f.shared.pending;if(O!==null){f.shared.pending=null;var L=O,J=L.next;L.next=null,w===null?m=J:w.next=J,w=L;var re=t.alternate;re!==null&&(re=re.updateQueue,O=re.lastBaseUpdate,O!==w&&(O===null?re.firstBaseUpdate=J:O.next=J,re.lastBaseUpdate=L))}if(m!==null){var se=f.baseState;w=0,re=J=L=null,O=m;do{var F=O.lane&-536870913,te=F!==O.lane;if(te?(Me&F)===F:(l&F)===F){F!==0&&F===Wa&&(Fu=!0),re!==null&&(re=re.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var fe=t,be=O;F=r;var Pe=i;switch(be.tag){case 1:if(fe=be.payload,typeof fe=="function"){se=fe.call(Pe,se,F);break e}se=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=be.payload,F=typeof fe=="function"?fe.call(Pe,se,F):fe,F==null)break e;se=v({},se,F);break e;case 2:yr=!0}}F=O.callback,F!==null&&(t.flags|=64,te&&(t.flags|=8192),te=f.callbacks,te===null?f.callbacks=[F]:te.push(F))}else te={lane:F,tag:O.tag,payload:O.payload,callback:O.callback,next:null},re===null?(J=re=te,L=se):re=re.next=te,w|=F;if(O=O.next,O===null){if(O=f.shared.pending,O===null)break;te=O,O=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);re===null&&(L=se),f.baseState=L,f.firstBaseUpdate=J,f.lastBaseUpdate=re,m===null&&(f.shared.lanes=0),Er|=w,t.lanes=w,t.memoizedState=se}}function qg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Vg(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)qg(i[t],r)}var rs=R(null),ll=R(0);function Pg(t,r){t=Zn,G(ll,t),G(rs,r),Zn=t|r.baseLanes}function Wu(){G(ll,Zn),G(rs,rs.current)}function ed(){Zn=ll.current,k(rs),k(ll)}var qt=R(null),an=null;function wr(t){var r=t.alternate;G(nt,nt.current&1),G(qt,t),an===null&&(r===null||rs.current!==null||r.memoizedState!==null)&&(an=t)}function td(t){G(nt,nt.current),G(qt,t),an===null&&(an=t)}function Gg(t){t.tag===22?(G(nt,nt.current),G(qt,t),an===null&&(an=t)):xr()}function xr(){G(nt,nt.current),G(qt,qt.current)}function Vt(t){k(qt),an===t&&(an=null),k(nt)}var nt=R(0);function cl(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||lf(i)||cf(i)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var In=0,Ae=null,qe=null,it=null,ul=!1,as=!1,la=!1,dl=0,yi=0,ss=null,t_=0;function We(){throw Error(s(321))}function nd(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!Bt(t[i],r[i]))return!1;return!0}function rd(t,r,i,l,f,m){return In=m,Ae=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,M.H=t===null||t.memoizedState===null?Nm:vd,la=!1,m=i(l,f),la=!1,as&&(m=Xg(r,i,l,f)),Yg(t),m}function Yg(t){M.H=wi;var r=qe!==null&&qe.next!==null;if(In=0,it=qe=Ae=null,ul=!1,yi=0,ss=null,r)throw Error(s(300));t===null||ot||(t=t.dependencies,t!==null&&tl(t)&&(ot=!0))}function Xg(t,r,i,l){Ae=t;var f=0;do{if(as&&(ss=null),yi=0,as=!1,25<=f)throw Error(s(301));if(f+=1,it=qe=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=Om,m=r(i,l)}while(as);return m}function n_(){var t=M.H,r=t.useState()[0];return r=typeof r.then=="function"?vi(r):r,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(Ae.flags|=1024),r}function ad(){var t=dl!==0;return dl=0,t}function sd(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function id(t){if(ul){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ul=!1}In=0,it=qe=Ae=null,as=!1,yi=dl=0,ss=null}function Ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ae.memoizedState=it=t:it=it.next=t,it}function rt(){if(qe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var r=it===null?Ae.memoizedState:it.next;if(r!==null)it=r,qe=t;else{if(t===null)throw Ae.alternate===null?Error(s(467)):Error(s(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},it===null?Ae.memoizedState=it=t:it=it.next=t}return it}function fl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vi(t){var r=yi;return yi+=1,ss===null&&(ss=[]),t=Ug(ss,t,r),r=Ae,(it===null?r.memoizedState:it.next)===null&&(r=r.alternate,M.H=r===null||r.memoizedState===null?Nm:vd),t}function hl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vi(t);if(t.$$typeof===_)return bt(t)}throw Error(s(438,String(t)))}function od(t){var r=null,i=Ae.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var l=Ae.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=fl(),Ae.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),l=0;l<t;l++)i[l]=oe;return r.index++,i}function qn(t,r){return typeof r=="function"?r(t):r}function gl(t){var r=rt();return ld(r,qe,t)}function ld(t,r,i){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var O=w=null,L=null,J=r,re=!1;do{var se=J.lane&-536870913;if(se!==J.lane?(Me&se)===se:(In&se)===se){var F=J.revertLane;if(F===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),se===Wa&&(re=!0);else if((In&F)===F){J=J.next,F===Wa&&(re=!0);continue}else se={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(O=L=se,w=m):L=L.next=se,Ae.lanes|=F,Er|=F;se=J.action,la&&i(m,se),m=J.hasEagerState?J.eagerState:i(m,se)}else F={lane:se,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},L===null?(O=L=F,w=m):L=L.next=F,Ae.lanes|=se,Er|=se;J=J.next}while(J!==null&&J!==r);if(L===null?w=m:L.next=O,!Bt(m,t.memoizedState)&&(ot=!0,re&&(i=es,i!==null)))throw i;t.memoizedState=m,t.baseState=w,t.baseQueue=L,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function cd(t){var r=rt(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=t;var l=i.dispatch,f=i.pending,m=r.memoizedState;if(f!==null){i.pending=null;var w=f=f.next;do m=t(m,w.action),w=w.next;while(w!==f);Bt(m,r.memoizedState)||(ot=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),i.lastRenderedState=m}return[m,l]}function Kg(t,r,i){var l=Ae,f=rt(),m=je;if(m){if(i===void 0)throw Error(s(407));i=i()}else i=r();var w=!Bt((qe||f).memoizedState,i);if(w&&(f.memoizedState=i,ot=!0),f=f.queue,fd(Jg.bind(null,l,f,t),[t]),f.getSnapshot!==r||w||it!==null&&it.memoizedState.tag&1){if(l.flags|=2048,is(9,{destroy:void 0},Qg.bind(null,l,f,i,r),null),Ye===null)throw Error(s(349));m||(In&127)!==0||Zg(l,r,i)}return i}function Zg(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=Ae.updateQueue,r===null?(r=fl(),Ae.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function Qg(t,r,i,l){r.value=i,r.getSnapshot=l,Fg(r)&&Wg(t)}function Jg(t,r,i){return i(function(){Fg(r)&&Wg(t)})}function Fg(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!Bt(t,i)}catch{return!0}}function Wg(t){var r=Wr(t,2);r!==null&&$t(r,t,2)}function ud(t){var r=Ot();if(typeof t=="function"){var i=t;if(t=i(),la){xn(!0);try{i()}finally{xn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:t},r}function em(t,r,i,l){return t.baseState=i,ld(t,qe,typeof l=="function"?l:qn)}function r_(t,r,i,l,f){if(yl(t))throw Error(s(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};M.T!==null?i(!0):m.isTransition=!1,l(m),i=r.pending,i===null?(m.next=r.pending=m,tm(r,m)):(m.next=i.next,r.pending=i.next=m)}}function tm(t,r){var i=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=M.T,w={};M.T=w;try{var O=i(f,l),L=M.S;L!==null&&L(w,O),nm(t,r,O)}catch(J){dd(t,r,J)}finally{m!==null&&w.types!==null&&(m.types=w.types),M.T=m}}else try{m=i(f,l),nm(t,r,m)}catch(J){dd(t,r,J)}}function nm(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){rm(t,r,l)},function(l){return dd(t,r,l)}):rm(t,r,i)}function rm(t,r,i){r.status="fulfilled",r.value=i,am(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,tm(t,i)))}function dd(t,r,i){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=i,am(r),r=r.next;while(r!==l)}t.action=null}function am(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function sm(t,r){return r}function im(t,r){if(je){var i=Ye.formState;if(i!==null){e:{var l=Ae;if(je){if(Ke){t:{for(var f=Ke,m=rn;f.nodeType!==8;){if(!m){f=null;break t}if(f=sn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ke=sn(f.nextSibling),l=f.data==="F!";break e}}mr(l)}l=!1}l&&(r=i[0])}}return i=Ot(),i.memoizedState=i.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sm,lastRenderedState:r},i.queue=l,i=Tm.bind(null,Ae,l),l.dispatch=i,l=ud(!1),m=yd.bind(null,Ae,!1,l.queue),l=Ot(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,i=r_.bind(null,Ae,f,m,i),f.dispatch=i,l.memoizedState=t,[r,i,!1]}function om(t){var r=rt();return lm(r,qe,t)}function lm(t,r,i){if(r=ld(t,r,sm)[0],t=gl(qn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=vi(r)}catch(w){throw w===ts?al:w}else l=r;r=rt();var f=r.queue,m=f.dispatch;return i!==r.memoizedState&&(Ae.flags|=2048,is(9,{destroy:void 0},a_.bind(null,f,i),null)),[l,m,t]}function a_(t,r){t.action=r}function cm(t){var r=rt(),i=qe;if(i!==null)return lm(r,i,t);rt(),r=r.memoizedState,i=rt();var l=i.queue.dispatch;return i.memoizedState=t,[r,l,!1]}function is(t,r,i,l){return t={tag:t,create:i,deps:l,inst:r,next:null},r=Ae.updateQueue,r===null&&(r=fl(),Ae.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,r.lastEffect=t),t}function um(){return rt().memoizedState}function ml(t,r,i,l){var f=Ot();Ae.flags|=t,f.memoizedState=is(1|r,{destroy:void 0},i,l===void 0?null:l)}function pl(t,r,i,l){var f=rt();l=l===void 0?null:l;var m=f.memoizedState.inst;qe!==null&&l!==null&&nd(l,qe.memoizedState.deps)?f.memoizedState=is(r,m,i,l):(Ae.flags|=t,f.memoizedState=is(1|r,m,i,l))}function dm(t,r){ml(8390656,8,t,r)}function fd(t,r){pl(2048,8,t,r)}function s_(t){Ae.flags|=4;var r=Ae.updateQueue;if(r===null)r=fl(),Ae.updateQueue=r,r.events=[t];else{var i=r.events;i===null?r.events=[t]:i.push(t)}}function fm(t){var r=rt().memoizedState;return s_({ref:r,nextImpl:t}),function(){if((Le&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function hm(t,r){return pl(4,2,t,r)}function gm(t,r){return pl(4,4,t,r)}function mm(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function pm(t,r,i){i=i!=null?i.concat([t]):null,pl(4,4,mm.bind(null,r,t),i)}function hd(){}function ym(t,r){var i=rt();r=r===void 0?null:r;var l=i.memoizedState;return r!==null&&nd(r,l[1])?l[0]:(i.memoizedState=[t,r],t)}function vm(t,r){var i=rt();r=r===void 0?null:r;var l=i.memoizedState;if(r!==null&&nd(r,l[1]))return l[0];if(l=t(),la){xn(!0);try{t()}finally{xn(!1)}}return i.memoizedState=[l,r],l}function gd(t,r,i){return i===void 0||(In&1073741824)!==0&&(Me&261930)===0?t.memoizedState=r:(t.memoizedState=i,t=bp(),Ae.lanes|=t,Er|=t,i)}function bm(t,r,i,l){return Bt(i,r)?i:rs.current!==null?(t=gd(t,i,l),Bt(t,r)||(ot=!0),t):(In&42)===0||(In&1073741824)!==0&&(Me&261930)===0?(ot=!0,t.memoizedState=i):(t=bp(),Ae.lanes|=t,Er|=t,r)}function wm(t,r,i,l,f){var m=U.p;U.p=m!==0&&8>m?m:8;var w=M.T,O={};M.T=O,yd(t,!1,r,i);try{var L=f(),J=M.S;if(J!==null&&J(O,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var re=e_(L,l);bi(t,r,re,Yt(t))}else bi(t,r,l,Yt(t))}catch(se){bi(t,r,{then:function(){},status:"rejected",reason:se},Yt())}finally{U.p=m,w!==null&&O.types!==null&&(w.types=O.types),M.T=w}}function i_(){}function md(t,r,i,l){if(t.tag!==5)throw Error(s(476));var f=xm(t).queue;wm(t,f,r,B,i===null?i_:function(){return _m(t),i(l)})}function xm(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:B},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function _m(t){var r=xm(t);r.next===null&&(r=t.alternate.memoizedState),bi(t,r.next.queue,{},Yt())}function pd(){return bt($i)}function Sm(){return rt().memoizedState}function Em(){return rt().memoizedState}function o_(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=Yt();t=vr(i);var l=br(r,t,i);l!==null&&($t(l,r,i),gi(l,r,i)),r={cache:Gu()},t.payload=r;return}r=r.return}}function l_(t,r,i){var l=Yt();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},yl(t)?Cm(r,i):(i=Du(t,r,i,l),i!==null&&($t(i,t,l),Am(i,r,l)))}function Tm(t,r,i){var l=Yt();bi(t,r,i,l)}function bi(t,r,i,l){var f={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(yl(t))Cm(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var w=r.lastRenderedState,O=m(w,i);if(f.hasEagerState=!0,f.eagerState=O,Bt(O,w))return Jo(t,r,f,0),Ye===null&&Qo(),!1}catch{}finally{}if(i=Du(t,r,f,l),i!==null)return $t(i,t,l),Am(i,r,l),!0}return!1}function yd(t,r,i,l){if(l={lane:2,revertLane:Zd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yl(t)){if(r)throw Error(s(479))}else r=Du(t,i,l,2),r!==null&&$t(r,t,2)}function yl(t){var r=t.alternate;return t===Ae||r!==null&&r===Ae}function Cm(t,r){as=ul=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function Am(t,r,i){if((i&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,i|=l,r.lanes=i,Ro(t,i)}}var wi={readContext:bt,use:hl,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};wi.useEffectEvent=We;var Nm={readContext:bt,use:hl,useCallback:function(t,r){return Ot().memoizedState=[t,r===void 0?null:r],t},useContext:bt,useEffect:dm,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,ml(4194308,4,mm.bind(null,r,t),i)},useLayoutEffect:function(t,r){return ml(4194308,4,t,r)},useInsertionEffect:function(t,r){ml(4,2,t,r)},useMemo:function(t,r){var i=Ot();r=r===void 0?null:r;var l=t();if(la){xn(!0);try{t()}finally{xn(!1)}}return i.memoizedState=[l,r],l},useReducer:function(t,r,i){var l=Ot();if(i!==void 0){var f=i(r);if(la){xn(!0);try{i(r)}finally{xn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=l_.bind(null,Ae,t),[l.memoizedState,t]},useRef:function(t){var r=Ot();return t={current:t},r.memoizedState=t},useState:function(t){t=ud(t);var r=t.queue,i=Tm.bind(null,Ae,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:hd,useDeferredValue:function(t,r){var i=Ot();return gd(i,t,r)},useTransition:function(){var t=ud(!1);return t=wm.bind(null,Ae,t.queue,!0,!1),Ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var l=Ae,f=Ot();if(je){if(i===void 0)throw Error(s(407));i=i()}else{if(i=r(),Ye===null)throw Error(s(349));(Me&127)!==0||Zg(l,r,i)}f.memoizedState=i;var m={value:i,getSnapshot:r};return f.queue=m,dm(Jg.bind(null,l,m,t),[t]),l.flags|=2048,is(9,{destroy:void 0},Qg.bind(null,l,m,i,r),null),i},useId:function(){var t=Ot(),r=Ye.identifierPrefix;if(je){var i=En,l=Sn;i=(l&~(1<<32-Nt(l)-1)).toString(32)+i,r="_"+r+"R_"+i,i=dl++,0<i&&(r+="H"+i.toString(32)),r+="_"}else i=t_++,r="_"+r+"r_"+i.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:pd,useFormState:im,useActionState:im,useOptimistic:function(t){var r=Ot();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=yd.bind(null,Ae,!0,i),i.dispatch=r,[t,r]},useMemoCache:od,useCacheRefresh:function(){return Ot().memoizedState=o_.bind(null,Ae)},useEffectEvent:function(t){var r=Ot(),i={impl:t};return r.memoizedState=i,function(){if((Le&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},vd={readContext:bt,use:hl,useCallback:ym,useContext:bt,useEffect:fd,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:gm,useMemo:vm,useReducer:gl,useRef:um,useState:function(){return gl(qn)},useDebugValue:hd,useDeferredValue:function(t,r){var i=rt();return bm(i,qe.memoizedState,t,r)},useTransition:function(){var t=gl(qn)[0],r=rt().memoizedState;return[typeof t=="boolean"?t:vi(t),r]},useSyncExternalStore:Kg,useId:Sm,useHostTransitionStatus:pd,useFormState:om,useActionState:om,useOptimistic:function(t,r){var i=rt();return em(i,qe,t,r)},useMemoCache:od,useCacheRefresh:Em};vd.useEffectEvent=fm;var Om={readContext:bt,use:hl,useCallback:ym,useContext:bt,useEffect:fd,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:gm,useMemo:vm,useReducer:cd,useRef:um,useState:function(){return cd(qn)},useDebugValue:hd,useDeferredValue:function(t,r){var i=rt();return qe===null?gd(i,t,r):bm(i,qe.memoizedState,t,r)},useTransition:function(){var t=cd(qn)[0],r=rt().memoizedState;return[typeof t=="boolean"?t:vi(t),r]},useSyncExternalStore:Kg,useId:Sm,useHostTransitionStatus:pd,useFormState:cm,useActionState:cm,useOptimistic:function(t,r){var i=rt();return qe!==null?em(i,qe,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:od,useCacheRefresh:Em};Om.useEffectEvent=fm;function bd(t,r,i,l){r=t.memoizedState,i=i(l,r),i=i==null?r:v({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var wd={enqueueSetState:function(t,r,i){t=t._reactInternals;var l=Yt(),f=vr(l);f.payload=r,i!=null&&(f.callback=i),r=br(t,f,l),r!==null&&($t(r,t,l),gi(r,t,l))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var l=Yt(),f=vr(l);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=br(t,f,l),r!==null&&($t(r,t,l),gi(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=Yt(),l=vr(i);l.tag=2,r!=null&&(l.callback=r),r=br(t,l,i),r!==null&&($t(r,t,i),gi(r,t,i))}};function Rm(t,r,i,l,f,m,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,w):r.prototype&&r.prototype.isPureReactComponent?!ii(i,l)||!ii(f,m):!0}function Mm(t,r,i,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,l),r.state!==t&&wd.enqueueReplaceState(r,r.state,null)}function ca(t,r){var i=r;if("ref"in r){i={};for(var l in r)l!=="ref"&&(i[l]=r[l])}if(t=t.defaultProps){i===r&&(i=v({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}function km(t){Zo(t)}function jm(t){console.error(t)}function Dm(t){Zo(t)}function vl(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function zm(t,r,i){try{var l=t.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xd(t,r,i){return i=vr(i),i.tag=3,i.payload={element:null},i.callback=function(){vl(t,r)},i}function $m(t){return t=vr(t),t.tag=3,t}function Um(t,r,i,l){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){zm(r,i,l)}}var w=i.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){zm(r,i,l),typeof f!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})})}function c_(t,r,i,l,f){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=i.alternate,r!==null&&Fa(r,i,f,!0),i=qt.current,i!==null){switch(i.tag){case 31:case 13:return an===null?Rl():i.alternate===null&&et===0&&(et=3),i.flags&=-257,i.flags|=65536,i.lanes=f,l===sl?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([l]):r.add(l),Yd(t,l,f)),!1;case 22:return i.flags|=65536,l===sl?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([l]):i.add(l)),Yd(t,l,f)),!1}throw Error(s(435,i.tag))}return Yd(t,l,f),Rl(),!1}if(je)return r=qt.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Bu&&(t=Error(s(422),{cause:l}),ci(en(t,i)))):(l!==Bu&&(r=Error(s(423),{cause:l}),ci(en(r,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=en(l,i),f=xd(t.stateNode,l,f),Ju(t,f),et!==4&&(et=2)),!1;var m=Error(s(520),{cause:l});if(m=en(m,i),Ni===null?Ni=[m]:Ni.push(m),et!==4&&(et=2),r===null)return!0;l=en(l,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=xd(i.stateNode,l,t),Ju(i,t),!1;case 1:if(r=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Tr===null||!Tr.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=$m(f),Um(f,t,i,l),Ju(i,f),!1}i=i.return}while(i!==null);return!1}var _d=Error(s(461)),ot=!1;function wt(t,r,i,l){r.child=t===null?Ig(r,null,i,l):oa(r,t.child,i,l)}function Lm(t,r,i,l,f){i=i.render;var m=r.ref;if("ref"in l){var w={};for(var O in l)O!=="ref"&&(w[O]=l[O])}else w=l;return ra(r),l=rd(t,r,i,w,m,f),O=ad(),t!==null&&!ot?(sd(t,r,f),Vn(t,r,f)):(je&&O&&Lu(r),r.flags|=1,wt(t,r,l,f),r.child)}function Hm(t,r,i,l,f){if(t===null){var m=i.type;return typeof m=="function"&&!zu(m)&&m.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=m,Bm(t,r,m,l,f)):(t=Wo(i.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Rd(t,f)){var w=m.memoizedProps;if(i=i.compare,i=i!==null?i:ii,i(w,l)&&t.ref===r.ref)return Vn(t,r,f)}return r.flags|=1,t=Un(m,l),t.ref=r.ref,t.return=r,r.child=t}function Bm(t,r,i,l,f){if(t!==null){var m=t.memoizedProps;if(ii(m,l)&&t.ref===r.ref)if(ot=!1,r.pendingProps=l=m,Rd(t,f))(t.flags&131072)!==0&&(ot=!0);else return r.lanes=t.lanes,Vn(t,r,f)}return Sd(t,r,i,l,f)}function Im(t,r,i,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,r.child=null;return qm(t,r,m,i,l)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&rl(r,m!==null?m.cachePool:null),m!==null?Pg(r,m):Wu(),Gg(r);else return l=r.lanes=536870912,qm(t,r,m!==null?m.baseLanes|i:i,i,l)}else m!==null?(rl(r,m.cachePool),Pg(r,m),xr(),r.memoizedState=null):(t!==null&&rl(r,null),Wu(),xr());return wt(t,r,f,i),r.child}function xi(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function qm(t,r,i,l,f){var m=Xu();return m=m===null?null:{parent:st._currentValue,pool:m},r.memoizedState={baseLanes:i,cachePool:m},t!==null&&rl(r,null),Wu(),Gg(r),t!==null&&Fa(t,r,l,!0),r.childLanes=f,null}function bl(t,r){return r=xl({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Vm(t,r,i){return oa(r,t.child,null,i),t=bl(r,r.pendingProps),t.flags|=2,Vt(r),r.memoizedState=null,t}function u_(t,r,i){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(je){if(l.mode==="hidden")return t=bl(r,l),r.lanes=536870912,xi(null,t);if(td(r),(t=Ke)?(t=t0(t,rn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:hr!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},i=Cg(t),i.return=r,r.child=i,vt=r,Ke=null)):t=null,t===null)throw mr(r);return r.lanes=536870912,null}return bl(r,l)}var m=t.memoizedState;if(m!==null){var w=m.dehydrated;if(td(r),f)if(r.flags&256)r.flags&=-257,r=Vm(t,r,i);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(ot||Fa(t,r,i,!1),f=(i&t.childLanes)!==0,ot||f){if(l=Ye,l!==null&&(w=Mo(l,i),w!==0&&w!==m.retryLane))throw m.retryLane=w,Wr(t,w),$t(l,t,w),_d;Rl(),r=Vm(t,r,i)}else t=m.treeContext,Ke=sn(w.nextSibling),vt=r,je=!0,gr=null,rn=!1,t!==null&&Og(r,t),r=bl(r,l),r.flags|=4096;return r}return t=Un(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function wl(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function Sd(t,r,i,l,f){return ra(r),i=rd(t,r,i,l,void 0,f),l=ad(),t!==null&&!ot?(sd(t,r,f),Vn(t,r,f)):(je&&l&&Lu(r),r.flags|=1,wt(t,r,i,f),r.child)}function Pm(t,r,i,l,f,m){return ra(r),r.updateQueue=null,i=Xg(r,l,i,f),Yg(t),l=ad(),t!==null&&!ot?(sd(t,r,m),Vn(t,r,m)):(je&&l&&Lu(r),r.flags|=1,wt(t,r,i,m),r.child)}function Gm(t,r,i,l,f){if(ra(r),r.stateNode===null){var m=Ka,w=i.contextType;typeof w=="object"&&w!==null&&(m=bt(w)),m=new i(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=wd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Zu(r),w=i.contextType,m.context=typeof w=="object"&&w!==null?bt(w):Ka,m.state=r.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(bd(r,i,w,l),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&wd.enqueueReplaceState(m,m.state,null),pi(r,l,m,f),mi(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var O=r.memoizedProps,L=ca(i,O);m.props=L;var J=m.context,re=i.contextType;w=Ka,typeof re=="object"&&re!==null&&(w=bt(re));var se=i.getDerivedStateFromProps;re=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",O=r.pendingProps!==O,re||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(O||J!==w)&&Mm(r,m,l,w),yr=!1;var F=r.memoizedState;m.state=F,pi(r,l,m,f),mi(),J=r.memoizedState,O||F!==J||yr?(typeof se=="function"&&(bd(r,i,se,l),J=r.memoizedState),(L=yr||Rm(r,i,L,l,F,J,w))?(re||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=J),m.props=l,m.state=J,m.context=w,l=L):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Qu(t,r),w=r.memoizedProps,re=ca(i,w),m.props=re,se=r.pendingProps,F=m.context,J=i.contextType,L=Ka,typeof J=="object"&&J!==null&&(L=bt(J)),O=i.getDerivedStateFromProps,(J=typeof O=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==se||F!==L)&&Mm(r,m,l,L),yr=!1,F=r.memoizedState,m.state=F,pi(r,l,m,f),mi();var te=r.memoizedState;w!==se||F!==te||yr||t!==null&&t.dependencies!==null&&tl(t.dependencies)?(typeof O=="function"&&(bd(r,i,O,l),te=r.memoizedState),(re=yr||Rm(r,i,re,l,F,te,L)||t!==null&&t.dependencies!==null&&tl(t.dependencies))?(J||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,te,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,te,L)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=te),m.props=l,m.state=te,m.context=L,l=re):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,wl(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=oa(r,t.child,null,f),r.child=oa(r,null,i,f)):wt(t,r,i,f),r.memoizedState=m.state,t=r.child):t=Vn(t,r,f),t}function Ym(t,r,i,l){return ta(),r.flags|=256,wt(t,r,i,l),r.child}var Ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Td(t){return{baseLanes:t,cachePool:zg()}}function Cd(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=Gt),t}function Xm(t,r,i){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,w;if((w=m)||(w=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),w&&(f=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,t===null){if(je){if(f?wr(r):xr(),(t=Ke)?(t=t0(t,rn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:hr!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},i=Cg(t),i.return=r,r.child=i,vt=r,Ke=null)):t=null,t===null)throw mr(r);return cf(t)?r.lanes=32:r.lanes=536870912,null}var O=l.children;return l=l.fallback,f?(xr(),f=r.mode,O=xl({mode:"hidden",children:O},f),l=ea(l,f,i,null),O.return=r,l.return=r,O.sibling=l,r.child=O,l=r.child,l.memoizedState=Td(i),l.childLanes=Cd(t,w,i),r.memoizedState=Ed,xi(null,l)):(wr(r),Ad(r,O))}var L=t.memoizedState;if(L!==null&&(O=L.dehydrated,O!==null)){if(m)r.flags&256?(wr(r),r.flags&=-257,r=Nd(t,r,i)):r.memoizedState!==null?(xr(),r.child=t.child,r.flags|=128,r=null):(xr(),O=l.fallback,f=r.mode,l=xl({mode:"visible",children:l.children},f),O=ea(O,f,i,null),O.flags|=2,l.return=r,O.return=r,l.sibling=O,r.child=l,oa(r,t.child,null,i),l=r.child,l.memoizedState=Td(i),l.childLanes=Cd(t,w,i),r.memoizedState=Ed,r=xi(null,l));else if(wr(r),cf(O)){if(w=O.nextSibling&&O.nextSibling.dataset,w)var J=w.dgst;w=J,l=Error(s(419)),l.stack="",l.digest=w,ci({value:l,source:null,stack:null}),r=Nd(t,r,i)}else if(ot||Fa(t,r,i,!1),w=(i&t.childLanes)!==0,ot||w){if(w=Ye,w!==null&&(l=Mo(w,i),l!==0&&l!==L.retryLane))throw L.retryLane=l,Wr(t,l),$t(w,t,l),_d;lf(O)||Rl(),r=Nd(t,r,i)}else lf(O)?(r.flags|=192,r.child=t.child,r=null):(t=L.treeContext,Ke=sn(O.nextSibling),vt=r,je=!0,gr=null,rn=!1,t!==null&&Og(r,t),r=Ad(r,l.children),r.flags|=4096);return r}return f?(xr(),O=l.fallback,f=r.mode,L=t.child,J=L.sibling,l=Un(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,J!==null?O=Un(J,O):(O=ea(O,f,i,null),O.flags|=2),O.return=r,l.return=r,l.sibling=O,r.child=l,xi(null,l),l=r.child,O=t.child.memoizedState,O===null?O=Td(i):(f=O.cachePool,f!==null?(L=st._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=zg(),O={baseLanes:O.baseLanes|i,cachePool:f}),l.memoizedState=O,l.childLanes=Cd(t,w,i),r.memoizedState=Ed,xi(t.child,l)):(wr(r),i=t.child,t=i.sibling,i=Un(i,{mode:"visible",children:l.children}),i.return=r,i.sibling=null,t!==null&&(w=r.deletions,w===null?(r.deletions=[t],r.flags|=16):w.push(t)),r.child=i,r.memoizedState=null,i)}function Ad(t,r){return r=xl({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function xl(t,r){return t=It(22,t,null,r),t.lanes=0,t}function Nd(t,r,i){return oa(r,t.child,null,i),t=Ad(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Km(t,r,i){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Vu(t.return,r,i)}function Od(t,r,i,l,f,m){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:f,treeForkCount:m}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=l,w.tail=i,w.tailMode=f,w.treeForkCount=m)}function Zm(t,r,i){var l=r.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var w=nt.current,O=(w&2)!==0;if(O?(w=w&1|2,r.flags|=128):w&=1,G(nt,w),wt(t,r,l,i),l=je?li:0,!O&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Km(t,i,r);else if(t.tag===19)Km(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(i=r.child,f=null;i!==null;)t=i.alternate,t!==null&&cl(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),Od(r,!1,f,i,m,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&cl(t)===null){r.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}Od(r,!0,i,null,m,l);break;case"together":Od(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Vn(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),Er|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(Fa(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,i=Un(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=Un(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Rd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&tl(t)))}function d_(t,r,i){switch(r.tag){case 3:le(r,r.stateNode.containerInfo),pr(r,st,t.memoizedState.cache),ta();break;case 27:case 5:Te(r);break;case 4:le(r,r.stateNode.containerInfo);break;case 10:pr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,td(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(wr(r),r.flags|=128,null):(i&r.child.childLanes)!==0?Xm(t,r,i):(wr(r),t=Vn(t,r,i),t!==null?t.sibling:null);wr(r);break;case 19:var f=(t.flags&128)!==0;if(l=(i&r.childLanes)!==0,l||(Fa(t,r,i,!1),l=(i&r.childLanes)!==0),f){if(l)return Zm(t,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),G(nt,nt.current),l)break;return null;case 22:return r.lanes=0,Im(t,r,i,r.pendingProps);case 24:pr(r,st,t.memoizedState.cache)}return Vn(t,r,i)}function Qm(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)ot=!0;else{if(!Rd(t,i)&&(r.flags&128)===0)return ot=!1,d_(t,r,i);ot=(t.flags&131072)!==0}else ot=!1,je&&(r.flags&1048576)!==0&&Ng(r,li,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=sa(r.elementType),r.type=t,typeof t=="function")zu(t)?(l=ca(t,l),r.tag=1,r=Gm(null,r,t,l,i)):(r.tag=0,r=Sd(null,r,t,l,i));else{if(t!=null){var f=t.$$typeof;if(f===A){r.tag=11,r=Lm(null,r,t,l,i);break e}else if(f===$){r.tag=14,r=Hm(null,r,t,l,i);break e}}throw r=j(t)||t,Error(s(306,r,""))}}return r;case 0:return Sd(t,r,r.type,r.pendingProps,i);case 1:return l=r.type,f=ca(l,r.pendingProps),Gm(t,r,l,f,i);case 3:e:{if(le(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,Qu(t,r),pi(r,l,null,i);var w=r.memoizedState;if(l=w.cache,pr(r,st,l),l!==m.cache&&Pu(r,[st],i,!0),mi(),l=w.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Ym(t,r,l,i);break e}else if(l!==f){f=en(Error(s(424)),r),ci(f),r=Ym(t,r,l,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ke=sn(t.firstChild),vt=r,je=!0,gr=null,rn=!0,i=Ig(r,null,l,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ta(),l===f){r=Vn(t,r,i);break e}wt(t,r,l,i)}r=r.child}return r;case 26:return wl(t,r),t===null?(i=o0(r.type,null,r.pendingProps,null))?r.memoizedState=i:je||(i=r.type,t=r.pendingProps,l=Ul(ue.current).createElement(i),l[dt]=r,l[Et]=t,xt(l,i,t),at(l),r.stateNode=l):r.memoizedState=o0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Te(r),t===null&&je&&(l=r.stateNode=a0(r.type,r.pendingProps,ue.current),vt=r,rn=!0,f=Ke,Or(r.type)?(uf=f,Ke=sn(l.firstChild)):Ke=f),wt(t,r,r.pendingProps.children,i),wl(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&je&&((f=l=Ke)&&(l=I_(l,r.type,r.pendingProps,rn),l!==null?(r.stateNode=l,vt=r,Ke=sn(l.firstChild),rn=!1,f=!0):f=!1),f||mr(r)),Te(r),f=r.type,m=r.pendingProps,w=t!==null?t.memoizedProps:null,l=m.children,af(f,m)?l=null:w!==null&&af(f,w)&&(r.flags|=32),r.memoizedState!==null&&(f=rd(t,r,n_,null,null,i),$i._currentValue=f),wl(t,r),wt(t,r,l,i),r.child;case 6:return t===null&&je&&((t=i=Ke)&&(i=q_(i,r.pendingProps,rn),i!==null?(r.stateNode=i,vt=r,Ke=null,t=!0):t=!1),t||mr(r)),null;case 13:return Xm(t,r,i);case 4:return le(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=oa(r,null,l,i):wt(t,r,l,i),r.child;case 11:return Lm(t,r,r.type,r.pendingProps,i);case 7:return wt(t,r,r.pendingProps,i),r.child;case 8:return wt(t,r,r.pendingProps.children,i),r.child;case 12:return wt(t,r,r.pendingProps.children,i),r.child;case 10:return l=r.pendingProps,pr(r,r.type,l.value),wt(t,r,l.children,i),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,ra(r),f=bt(f),l=l(f),r.flags|=1,wt(t,r,l,i),r.child;case 14:return Hm(t,r,r.type,r.pendingProps,i);case 15:return Bm(t,r,r.type,r.pendingProps,i);case 19:return Zm(t,r,i);case 31:return u_(t,r,i);case 22:return Im(t,r,i,r.pendingProps);case 24:return ra(r),l=bt(st),t===null?(f=Xu(),f===null&&(f=Ye,m=Gu(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),r.memoizedState={parent:l,cache:f},Zu(r),pr(r,st,f)):((t.lanes&i)!==0&&(Qu(t,r),pi(r,null,null,i),mi()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),pr(r,st,l)):(l=m.cache,pr(r,st,l),l!==f.cache&&Pu(r,[st],i,!0))),wt(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Pn(t){t.flags|=4}function Md(t,r,i,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Sp())t.flags|=8192;else throw ia=sl,Ku}else t.flags&=-16777217}function Jm(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!f0(r))if(Sp())t.flags|=8192;else throw ia=sl,Ku}function _l(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?No():536870912,t.lanes|=r,us|=r)}function _i(t,r){if(!je)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ze(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(r)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=i,r}function f_(t,r,i){var l=r.pendingProps;switch(Hu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(r),null;case 1:return Ze(r),null;case 3:return i=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Bn(st),de(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ja(r)?Pn(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Iu())),Ze(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Pn(r),m!==null?(Ze(r),Jm(r,m)):(Ze(r),Md(r,f,null,l,i))):m?m!==t.memoizedState?(Pn(r),Ze(r),Jm(r,m)):(Ze(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Pn(r),Ze(r),Md(r,f,t,l,i)),null;case 27:if(Se(r),i=ue.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Ze(r),null}t=Z.current,Ja(r)?Rg(r):(t=a0(f,l,i),r.stateNode=t,Pn(r))}return Ze(r),null;case 5:if(Se(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return Ze(r),null}if(m=Z.current,Ja(r))Rg(r);else{var w=Ul(ue.current);switch(m){case 1:m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=w.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?w.createElement("select",{is:l.is}):w.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?w.createElement(f,{is:l.is}):w.createElement(f)}}m[dt]=r,m[Et]=l;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=m;e:switch(xt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Pn(r)}}return Ze(r),Md(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,i),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=ue.current,Ja(r)){if(t=r.stateNode,i=r.memoizedProps,l=null,f=vt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=r,t=!!(t.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||Xp(t.nodeValue,i)),t||mr(r,!0)}else t=Ul(t).createTextNode(l),t[dt]=r,r.stateNode=t}return Ze(r),null;case 31:if(i=r.memoizedState,t===null||t.memoizedState!==null){if(l=Ja(r),i!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[dt]=r}else ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ze(r),t=!1}else i=Iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return r.flags&256?(Vt(r),r):(Vt(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Ze(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ja(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[dt]=r}else ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ze(r),f=!1}else f=Iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Vt(r),r):(Vt(r),null)}return Vt(r),(r.flags&128)!==0?(r.lanes=i,r):(i=l!==null,t=t!==null&&t.memoizedState!==null,i&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),i!==t&&i&&(r.child.flags|=8192),_l(r,r.updateQueue),Ze(r),null);case 4:return de(),t===null&&Wd(r.stateNode.containerInfo),Ze(r),null;case 10:return Bn(r.type),Ze(r),null;case 19:if(k(nt),l=r.memoizedState,l===null)return Ze(r),null;if(f=(r.flags&128)!==0,m=l.rendering,m===null)if(f)_i(l,!1);else{if(et!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=cl(t),m!==null){for(r.flags|=128,_i(l,!1),t=m.updateQueue,r.updateQueue=t,_l(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)Tg(i,t),i=i.sibling;return G(nt,nt.current&1|2),je&&Ln(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&yt()>Al&&(r.flags|=128,f=!0,_i(l,!1),r.lanes=4194304)}else{if(!f)if(t=cl(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,_l(r,t),_i(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!je)return Ze(r),null}else 2*yt()-l.renderingStartTime>Al&&i!==536870912&&(r.flags|=128,f=!0,_i(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=yt(),t.sibling=null,i=nt.current,G(nt,f?i&1|2:i&1),je&&Ln(r,l.treeForkCount),t):(Ze(r),null);case 22:case 23:return Vt(r),ed(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(i&536870912)!==0&&(r.flags&128)===0&&(Ze(r),r.subtreeFlags&6&&(r.flags|=8192)):Ze(r),i=r.updateQueue,i!==null&&_l(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==i&&(r.flags|=2048),t!==null&&k(aa),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),Bn(st),Ze(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function h_(t,r){switch(Hu(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Bn(st),de(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Se(r),null;case 31:if(r.memoizedState!==null){if(Vt(r),r.alternate===null)throw Error(s(340));ta()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Vt(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ta()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return k(nt),null;case 4:return de(),null;case 10:return Bn(r.type),null;case 22:case 23:return Vt(r),ed(),t!==null&&k(aa),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Bn(st),null;case 25:return null;default:return null}}function Fm(t,r){switch(Hu(r),r.tag){case 3:Bn(st),de();break;case 26:case 27:case 5:Se(r);break;case 4:de();break;case 31:r.memoizedState!==null&&Vt(r);break;case 13:Vt(r);break;case 19:k(nt);break;case 10:Bn(r.type);break;case 22:case 23:Vt(r),ed(),t!==null&&k(aa);break;case 24:Bn(st)}}function Si(t,r){try{var i=r.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var f=l.next;i=f;do{if((i.tag&t)===t){l=void 0;var m=i.create,w=i.inst;l=m(),w.destroy=l}i=i.next}while(i!==f)}}catch(O){Be(r,r.return,O)}}function _r(t,r,i){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var w=l.inst,O=w.destroy;if(O!==void 0){w.destroy=void 0,f=r;var L=i,J=O;try{J()}catch(re){Be(f,L,re)}}}l=l.next}while(l!==m)}}catch(re){Be(r,r.return,re)}}function Wm(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{Vg(r,i)}catch(l){Be(t,t.return,l)}}}function ep(t,r,i){i.props=ca(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(l){Be(t,r,l)}}function Ei(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof i=="function"?t.refCleanup=i(l):i.current=l}}catch(f){Be(t,r,f)}}function Tn(t,r){var i=t.ref,l=t.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(f){Be(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Be(t,r,f)}else i.current=null}function tp(t){var r=t.type,i=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(f){Be(t,t.return,f)}}function kd(t,r,i){try{var l=t.stateNode;z_(l,t.type,i,r),l[Et]=r}catch(f){Be(t,t.return,f)}}function np(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Or(t.type)||t.tag===4}function jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||np(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Or(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dd(t,r,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=zn));else if(l!==4&&(l===27&&Or(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for(Dd(t,r,i),t=t.sibling;t!==null;)Dd(t,r,i),t=t.sibling}function Sl(t,r,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(l!==4&&(l===27&&Or(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Sl(t,r,i),t=t.sibling;t!==null;)Sl(t,r,i),t=t.sibling}function rp(t){var r=t.stateNode,i=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);xt(r,l,i),r[dt]=t,r[Et]=i}catch(m){Be(t,t.return,m)}}var Gn=!1,lt=!1,zd=!1,ap=typeof WeakSet=="function"?WeakSet:Set,pt=null;function g_(t,r){if(t=t.containerInfo,nf=Pl,t=pg(t),Nu(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var w=0,O=-1,L=-1,J=0,re=0,se=t,F=null;t:for(;;){for(var te;se!==i||f!==0&&se.nodeType!==3||(O=w+f),se!==m||l!==0&&se.nodeType!==3||(L=w+l),se.nodeType===3&&(w+=se.nodeValue.length),(te=se.firstChild)!==null;)F=se,se=te;for(;;){if(se===t)break t;if(F===i&&++J===f&&(O=w),F===m&&++re===l&&(L=w),(te=se.nextSibling)!==null)break;se=F,F=se.parentNode}se=te}i=O===-1||L===-1?null:{start:O,end:L}}else i=null}i=i||{start:0,end:0}}else i=null;for(rf={focusedElem:t,selectionRange:i},Pl=!1,pt=r;pt!==null;)if(r=pt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,pt=t;else for(;pt!==null;){switch(r=pt,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)f=t[i],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,i=r,f=m.memoizedProps,m=m.memoizedState,l=i.stateNode;try{var fe=ca(i.type,f);t=l.getSnapshotBeforeUpdate(fe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){Be(i,i.return,be)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)of(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":of(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,pt=t;break}pt=r.return}}function sp(t,r,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:Xn(t,i),l&4&&Si(5,i);break;case 1:if(Xn(t,i),l&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(w){Be(i,i.return,w)}else{var f=ca(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(w){Be(i,i.return,w)}}l&64&&Wm(i),l&512&&Ei(i,i.return);break;case 3:if(Xn(t,i),l&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{Vg(t,r)}catch(w){Be(i,i.return,w)}}break;case 27:r===null&&l&4&&rp(i);case 26:case 5:Xn(t,i),r===null&&l&4&&tp(i),l&512&&Ei(i,i.return);break;case 12:Xn(t,i);break;case 31:Xn(t,i),l&4&&lp(t,i);break;case 13:Xn(t,i),l&4&&cp(t,i),l&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=S_.bind(null,i),V_(t,i))));break;case 22:if(l=i.memoizedState!==null||Gn,!l){r=r!==null&&r.memoizedState!==null||lt,f=Gn;var m=lt;Gn=l,(lt=r)&&!m?Kn(t,i,(i.subtreeFlags&8772)!==0):Xn(t,i),Gn=f,lt=m}break;case 30:break;default:Xn(t,i)}}function ip(t){var r=t.alternate;r!==null&&(t.alternate=null,ip(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Qs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,kt=!1;function Yn(t,r,i){for(i=i.child;i!==null;)op(t,r,i),i=i.sibling}function op(t,r,i){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Yr,i)}catch{}switch(i.tag){case 26:lt||Tn(i,r),Yn(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:lt||Tn(i,r);var l=Qe,f=kt;Or(i.type)&&(Qe=i.stateNode,kt=!1),Yn(t,r,i),ji(i.stateNode),Qe=l,kt=f;break;case 5:lt||Tn(i,r);case 6:if(l=Qe,f=kt,Qe=null,Yn(t,r,i),Qe=l,kt=f,Qe!==null)if(kt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(i.stateNode)}catch(m){Be(i,r,m)}else try{Qe.removeChild(i.stateNode)}catch(m){Be(i,r,m)}break;case 18:Qe!==null&&(kt?(t=Qe,Wp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),vs(t)):Wp(Qe,i.stateNode));break;case 4:l=Qe,f=kt,Qe=i.stateNode.containerInfo,kt=!0,Yn(t,r,i),Qe=l,kt=f;break;case 0:case 11:case 14:case 15:_r(2,i,r),lt||_r(4,i,r),Yn(t,r,i);break;case 1:lt||(Tn(i,r),l=i.stateNode,typeof l.componentWillUnmount=="function"&&ep(i,r,l)),Yn(t,r,i);break;case 21:Yn(t,r,i);break;case 22:lt=(l=lt)||i.memoizedState!==null,Yn(t,r,i),lt=l;break;default:Yn(t,r,i)}}function lp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{vs(t)}catch(i){Be(r,r.return,i)}}}function cp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{vs(t)}catch(i){Be(r,r.return,i)}}function m_(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ap),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ap),r;default:throw Error(s(435,t.tag))}}function El(t,r){var i=m_(t);r.forEach(function(l){if(!i.has(l)){i.add(l);var f=E_.bind(null,t,l);l.then(f,f)}})}function jt(t,r){var i=r.deletions;if(i!==null)for(var l=0;l<i.length;l++){var f=i[l],m=t,w=r,O=w;e:for(;O!==null;){switch(O.tag){case 27:if(Or(O.type)){Qe=O.stateNode,kt=!1;break e}break;case 5:Qe=O.stateNode,kt=!1;break e;case 3:case 4:Qe=O.stateNode.containerInfo,kt=!0;break e}O=O.return}if(Qe===null)throw Error(s(160));op(m,w,f),Qe=null,kt=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)up(r,t),r=r.sibling}var dn=null;function up(t,r){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jt(r,t),Dt(t),l&4&&(_r(3,t,t.return),Si(3,t),_r(5,t,t.return));break;case 1:jt(r,t),Dt(t),l&512&&(lt||i===null||Tn(i,i.return)),l&64&&Gn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var f=dn;if(jt(r,t),Dt(t),l&512&&(lt||i===null||Tn(i,i.return)),l&4){var m=i!==null?i.memoizedState:null;if(l=t.memoizedState,i===null)if(l===null)if(t.stateNode===null){e:{l=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Zr]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),xt(m,l,i),m[dt]=t,at(m),l=m;break e;case"link":var w=u0("link","href",f).get(l+(i.href||""));if(w){for(var O=0;O<w.length;O++)if(m=w[O],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){w.splice(O,1);break t}}m=f.createElement(l),xt(m,l,i),f.head.appendChild(m);break;case"meta":if(w=u0("meta","content",f).get(l+(i.content||""))){for(O=0;O<w.length;O++)if(m=w[O],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){w.splice(O,1);break t}}m=f.createElement(l),xt(m,l,i),f.head.appendChild(m);break;default:throw Error(s(468,l))}m[dt]=t,at(m),l=m}t.stateNode=l}else d0(f,t.type,t.stateNode);else t.stateNode=c0(f,l,t.memoizedProps);else m!==l?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,l===null?d0(f,t.type,t.stateNode):c0(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&kd(t,t.memoizedProps,i.memoizedProps)}break;case 27:jt(r,t),Dt(t),l&512&&(lt||i===null||Tn(i,i.return)),i!==null&&l&4&&kd(t,t.memoizedProps,i.memoizedProps);break;case 5:if(jt(r,t),Dt(t),l&512&&(lt||i===null||Tn(i,i.return)),t.flags&32){f=t.stateNode;try{Ia(f,"")}catch(fe){Be(t,t.return,fe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,kd(t,f,i!==null?i.memoizedProps:f)),l&1024&&(zd=!0);break;case 6:if(jt(r,t),Dt(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,i=t.stateNode;try{i.nodeValue=l}catch(fe){Be(t,t.return,fe)}}break;case 3:if(Bl=null,f=dn,dn=Ll(r.containerInfo),jt(r,t),dn=f,Dt(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{vs(r.containerInfo)}catch(fe){Be(t,t.return,fe)}zd&&(zd=!1,dp(t));break;case 4:l=dn,dn=Ll(t.stateNode.containerInfo),jt(r,t),Dt(t),dn=l;break;case 12:jt(r,t),Dt(t);break;case 31:jt(r,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,El(t,l)));break;case 13:jt(r,t),Dt(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Cl=yt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,El(t,l)));break;case 22:f=t.memoizedState!==null;var L=i!==null&&i.memoizedState!==null,J=Gn,re=lt;if(Gn=J||f,lt=re||L,jt(r,t),lt=re,Gn=J,Dt(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||L||Gn||lt||ua(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){L=i=r;try{if(m=L.stateNode,f)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{O=L.stateNode;var se=L.memoizedProps.style,F=se!=null&&se.hasOwnProperty("display")?se.display:null;O.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(fe){Be(L,L.return,fe)}}}else if(r.tag===6){if(i===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(fe){Be(L,L.return,fe)}}}else if(r.tag===18){if(i===null){L=r;try{var te=L.stateNode;f?e0(te,!0):e0(L.stateNode,!1)}catch(fe){Be(L,L.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,El(t,i))));break;case 19:jt(r,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,El(t,l)));break;case 30:break;case 21:break;default:jt(r,t),Dt(t)}}function Dt(t){var r=t.flags;if(r&2){try{for(var i,l=t.return;l!==null;){if(np(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,m=jd(t);Sl(t,m,f);break;case 5:var w=i.stateNode;i.flags&32&&(Ia(w,""),i.flags&=-33);var O=jd(t);Sl(t,O,w);break;case 3:case 4:var L=i.stateNode.containerInfo,J=jd(t);Dd(t,J,L);break;default:throw Error(s(161))}}catch(re){Be(t,t.return,re)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function dp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;dp(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Xn(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)sp(t,r.alternate,r),r=r.sibling}function ua(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:_r(4,r,r.return),ua(r);break;case 1:Tn(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&ep(r,r.return,i),ua(r);break;case 27:ji(r.stateNode);case 26:case 5:Tn(r,r.return),ua(r);break;case 22:r.memoizedState===null&&ua(r);break;case 30:ua(r);break;default:ua(r)}t=t.sibling}}function Kn(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,w=m.flags;switch(m.tag){case 0:case 11:case 15:Kn(f,m,i),Si(4,m);break;case 1:if(Kn(f,m,i),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){Be(l,l.return,J)}if(l=m,f=l.updateQueue,f!==null){var O=l.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)qg(L[f],O)}catch(J){Be(l,l.return,J)}}i&&w&64&&Wm(m),Ei(m,m.return);break;case 27:rp(m);case 26:case 5:Kn(f,m,i),i&&l===null&&w&4&&tp(m),Ei(m,m.return);break;case 12:Kn(f,m,i);break;case 31:Kn(f,m,i),i&&w&4&&lp(f,m);break;case 13:Kn(f,m,i),i&&w&4&&cp(f,m);break;case 22:m.memoizedState===null&&Kn(f,m,i),Ei(m,m.return);break;case 30:break;default:Kn(f,m,i)}r=r.sibling}}function $d(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&ui(i))}function Ud(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ui(t))}function fn(t,r,i,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)fp(t,r,i,l),r=r.sibling}function fp(t,r,i,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:fn(t,r,i,l),f&2048&&Si(9,r);break;case 1:fn(t,r,i,l);break;case 3:fn(t,r,i,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ui(t)));break;case 12:if(f&2048){fn(t,r,i,l),t=r.stateNode;try{var m=r.memoizedProps,w=m.id,O=m.onPostCommit;typeof O=="function"&&O(w,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){Be(r,r.return,L)}}else fn(t,r,i,l);break;case 31:fn(t,r,i,l);break;case 13:fn(t,r,i,l);break;case 23:break;case 22:m=r.stateNode,w=r.alternate,r.memoizedState!==null?m._visibility&2?fn(t,r,i,l):Ti(t,r):m._visibility&2?fn(t,r,i,l):(m._visibility|=2,os(t,r,i,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&$d(w,r);break;case 24:fn(t,r,i,l),f&2048&&Ud(r.alternate,r);break;default:fn(t,r,i,l)}}function os(t,r,i,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,w=r,O=i,L=l,J=w.flags;switch(w.tag){case 0:case 11:case 15:os(m,w,O,L,f),Si(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?os(m,w,O,L,f):Ti(m,w):(re._visibility|=2,os(m,w,O,L,f)),f&&J&2048&&$d(w.alternate,w);break;case 24:os(m,w,O,L,f),f&&J&2048&&Ud(w.alternate,w);break;default:os(m,w,O,L,f)}r=r.sibling}}function Ti(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,l=r,f=l.flags;switch(l.tag){case 22:Ti(i,l),f&2048&&$d(l.alternate,l);break;case 24:Ti(i,l),f&2048&&Ud(l.alternate,l);break;default:Ti(i,l)}r=r.sibling}}var Ci=8192;function ls(t,r,i){if(t.subtreeFlags&Ci)for(t=t.child;t!==null;)hp(t,r,i),t=t.sibling}function hp(t,r,i){switch(t.tag){case 26:ls(t,r,i),t.flags&Ci&&t.memoizedState!==null&&tS(i,dn,t.memoizedState,t.memoizedProps);break;case 5:ls(t,r,i);break;case 3:case 4:var l=dn;dn=Ll(t.stateNode.containerInfo),ls(t,r,i),dn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ci,Ci=16777216,ls(t,r,i),Ci=l):ls(t,r,i));break;default:ls(t,r,i)}}function gp(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ai(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var l=r[i];pt=l,pp(l,t)}gp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mp(t),t=t.sibling}function mp(t){switch(t.tag){case 0:case 11:case 15:Ai(t),t.flags&2048&&_r(9,t,t.return);break;case 3:Ai(t);break;case 12:Ai(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Tl(t)):Ai(t);break;default:Ai(t)}}function Tl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var l=r[i];pt=l,pp(l,t)}gp(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:_r(8,r,r.return),Tl(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Tl(r));break;default:Tl(r)}t=t.sibling}}function pp(t,r){for(;pt!==null;){var i=pt;switch(i.tag){case 0:case 11:case 15:_r(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ui(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,pt=l;else e:for(i=t;pt!==null;){l=pt;var f=l.sibling,m=l.return;if(ip(l),l===i){pt=null;break e}if(f!==null){f.return=m,pt=f;break e}pt=m}}}var p_={getCacheForType:function(t){var r=bt(st),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i},cacheSignal:function(){return bt(st).controller.signal}},y_=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ye=null,Oe=null,Me=0,He=0,Pt=null,Sr=!1,cs=!1,Ld=!1,Zn=0,et=0,Er=0,da=0,Hd=0,Gt=0,us=0,Ni=null,zt=null,Bd=!1,Cl=0,yp=0,Al=1/0,Nl=null,Tr=null,ft=0,Cr=null,ds=null,Qn=0,Id=0,qd=null,vp=null,Oi=0,Vd=null;function Yt(){return(Le&2)!==0&&Me!==0?Me&-Me:M.T!==null?Zd():ko()}function bp(){if(Gt===0)if((Me&536870912)===0||je){var t=Ma;Ma<<=1,(Ma&3932160)===0&&(Ma=262144),Gt=t}else Gt=536870912;return t=qt.current,t!==null&&(t.flags|=32),Gt}function $t(t,r,i){(t===Ye&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(fs(t,0),Ar(t,Me,Gt,!1)),Kr(t,i),((Le&2)===0||t!==Ye)&&(t===Ye&&((Le&2)===0&&(da|=i),et===4&&Ar(t,Me,Gt,!1)),Cn(t))}function wp(t,r,i){if((Le&6)!==0)throw Error(s(327));var l=!i&&(r&127)===0&&(r&t.expiredLanes)===0||Xr(t,r),f=l?w_(t,r):Gd(t,r,!0),m=l;do{if(f===0){cs&&!l&&Ar(t,r,0,!1);break}else{if(i=t.current.alternate,m&&!v_(i)){f=Gd(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var O=t;f=Ni;var L=O.current.memoizedState.isDehydrated;if(L&&(fs(O,w).flags|=256),w=Gd(O,w,!1),w!==2){if(Ld&&!L){O.errorRecoveryDisabledLanes|=m,da|=m,f=4;break e}m=zt,zt=f,m!==null&&(zt===null?zt=m:zt.push.apply(zt,m))}f=w}if(m=!1,f!==2)continue}}if(f===1){fs(t,0),Ar(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ar(l,r,Gt,!Sr);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Cl+300-yt(),10<f)){if(Ar(l,r,Gt,!Sr),ja(l,0,!0)!==0)break e;Qn=r,l.timeoutHandle=Jp(xp.bind(null,l,i,zt,Nl,Bd,r,Gt,da,us,Sr,m,"Throttled",-0,0),f);break e}xp(l,i,zt,Nl,Bd,r,Gt,da,us,Sr,m,null,-0,0)}}break}while(!0);Cn(t)}function xp(t,r,i,l,f,m,w,O,L,J,re,se,F,te){if(t.timeoutHandle=-1,se=r.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},hp(r,m,se);var fe=(m&62914560)===m?Cl-yt():(m&4194048)===m?yp-yt():0;if(fe=nS(se,fe),fe!==null){Qn=m,t.cancelPendingCommit=fe(Op.bind(null,t,r,m,i,l,f,w,O,L,re,se,null,F,te)),Ar(t,m,w,!J);return}}Op(t,r,m,i,l,f,w,O,L)}function v_(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var f=i[l],m=f.getSnapshot;f=f.value;try{if(!Bt(m(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ar(t,r,i,l){r&=~Hd,r&=~da,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-Nt(f),w=1<<m;l[m]=-1,f&=~w}i!==0&&Oo(t,i,r)}function Ol(){return(Le&6)===0?(Ri(0),!1):!0}function Pd(){if(Oe!==null){if(He===0)var t=Oe.return;else t=Oe,Hn=na=null,id(t),ns=null,fi=0,t=Oe;for(;t!==null;)Fm(t.alternate,t),t=t.return;Oe=null}}function fs(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,L_(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Qn=0,Pd(),Ye=t,Oe=i=Un(t.current,null),Me=r,He=0,Pt=null,Sr=!1,cs=Xr(t,r),Ld=!1,us=Gt=Hd=da=Er=et=0,zt=Ni=null,Bd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-Nt(l),m=1<<f;r|=t[f],l&=~m}return Zn=r,Qo(),i}function _p(t,r){Ae=null,M.H=wi,r===ts||r===al?(r=Lg(),He=3):r===Ku?(r=Lg(),He=4):He=r===_d?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Pt=r,Oe===null&&(et=1,vl(t,en(r,t.current)))}function Sp(){var t=qt.current;return t===null?!0:(Me&4194048)===Me?an===null:(Me&62914560)===Me||(Me&536870912)!==0?t===an:!1}function Ep(){var t=M.H;return M.H=wi,t===null?wi:t}function Tp(){var t=M.A;return M.A=p_,t}function Rl(){et=4,Sr||(Me&4194048)!==Me&&qt.current!==null||(cs=!0),(Er&134217727)===0&&(da&134217727)===0||Ye===null||Ar(Ye,Me,Gt,!1)}function Gd(t,r,i){var l=Le;Le|=2;var f=Ep(),m=Tp();(Ye!==t||Me!==r)&&(Nl=null,fs(t,r)),r=!1;var w=et;e:do try{if(He!==0&&Oe!==null){var O=Oe,L=Pt;switch(He){case 8:Pd(),w=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(r=!0);var J=He;if(He=0,Pt=null,hs(t,O,L,J),i&&cs){w=0;break e}break;default:J=He,He=0,Pt=null,hs(t,O,L,J)}}b_(),w=et;break}catch(re){_p(t,re)}while(!0);return r&&t.shellSuspendCounter++,Hn=na=null,Le=l,M.H=f,M.A=m,Oe===null&&(Ye=null,Me=0,Qo()),w}function b_(){for(;Oe!==null;)Cp(Oe)}function w_(t,r){var i=Le;Le|=2;var l=Ep(),f=Tp();Ye!==t||Me!==r?(Nl=null,Al=yt()+500,fs(t,r)):cs=Xr(t,r);e:do try{if(He!==0&&Oe!==null){r=Oe;var m=Pt;t:switch(He){case 1:He=0,Pt=null,hs(t,r,m,1);break;case 2:case 9:if($g(m)){He=0,Pt=null,Ap(r);break}r=function(){He!==2&&He!==9||Ye!==t||(He=7),Cn(t)},m.then(r,r);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:$g(m)?(He=0,Pt=null,Ap(r)):(He=0,Pt=null,hs(t,r,m,7));break;case 5:var w=null;switch(Oe.tag){case 26:w=Oe.memoizedState;case 5:case 27:var O=Oe;if(w?f0(w):O.stateNode.complete){He=0,Pt=null;var L=O.sibling;if(L!==null)Oe=L;else{var J=O.return;J!==null?(Oe=J,Ml(J)):Oe=null}break t}}He=0,Pt=null,hs(t,r,m,5);break;case 6:He=0,Pt=null,hs(t,r,m,6);break;case 8:Pd(),et=6;break e;default:throw Error(s(462))}}x_();break}catch(re){_p(t,re)}while(!0);return Hn=na=null,M.H=l,M.A=f,Le=i,Oe!==null?0:(Ye=null,Me=0,Qo(),et)}function x_(){for(;Oe!==null&&!Vr();)Cp(Oe)}function Cp(t){var r=Qm(t.alternate,t,Zn);t.memoizedProps=t.pendingProps,r===null?Ml(t):Oe=r}function Ap(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=Pm(i,r,r.pendingProps,r.type,void 0,Me);break;case 11:r=Pm(i,r,r.pendingProps,r.type.render,r.ref,Me);break;case 5:id(r);default:Fm(i,r),r=Oe=Tg(r,Zn),r=Qm(i,r,Zn)}t.memoizedProps=t.pendingProps,r===null?Ml(t):Oe=r}function hs(t,r,i,l){Hn=na=null,id(r),ns=null,fi=0;var f=r.return;try{if(c_(t,f,r,i,Me)){et=1,vl(t,en(i,t.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;et=1,vl(t,en(i,t.current)),Oe=null;return}r.flags&32768?(je||l===1?t=!0:cs||(Me&536870912)!==0?t=!1:(Sr=t=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Np(r,t)):Ml(r)}function Ml(t){var r=t;do{if((r.flags&32768)!==0){Np(r,Sr);return}t=r.return;var i=f_(r.alternate,r,Zn);if(i!==null){Oe=i;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);et===0&&(et=5)}function Np(t,r){do{var i=h_(t.alternate,t);if(i!==null){i.flags&=32767,Oe=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=i}while(t!==null);et=6,Oe=null}function Op(t,r,i,l,f,m,w,O,L){t.cancelPendingCommit=null;do kl();while(ft!==0);if((Le&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=ju,cu(t,i,m,w,O,L),t===Ye&&(Oe=Ye=null,Me=0),ds=r,Cr=t,Qn=i,Id=m,qd=f,vp=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,T_(Gr,function(){return Dp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,f=U.p,U.p=2,w=Le,Le|=4;try{g_(t,r,i)}finally{Le=w,U.p=f,M.T=l}}ft=1,Rp(),Mp(),kp()}}function Rp(){if(ft===1){ft=0;var t=Cr,r=ds,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=M.T,M.T=null;var l=U.p;U.p=2;var f=Le;Le|=4;try{up(r,t);var m=rf,w=pg(t.containerInfo),O=m.focusedElem,L=m.selectionRange;if(w!==O&&O&&O.ownerDocument&&mg(O.ownerDocument.documentElement,O)){if(L!==null&&Nu(O)){var J=L.start,re=L.end;if(re===void 0&&(re=J),"selectionStart"in O)O.selectionStart=J,O.selectionEnd=Math.min(re,O.value.length);else{var se=O.ownerDocument||document,F=se&&se.defaultView||window;if(F.getSelection){var te=F.getSelection(),fe=O.textContent.length,be=Math.min(L.start,fe),Pe=L.end===void 0?be:Math.min(L.end,fe);!te.extend&&be>Pe&&(w=Pe,Pe=be,be=w);var Y=gg(O,be),I=gg(O,Pe);if(Y&&I&&(te.rangeCount!==1||te.anchorNode!==Y.node||te.anchorOffset!==Y.offset||te.focusNode!==I.node||te.focusOffset!==I.offset)){var Q=se.createRange();Q.setStart(Y.node,Y.offset),te.removeAllRanges(),be>Pe?(te.addRange(Q),te.extend(I.node,I.offset)):(Q.setEnd(I.node,I.offset),te.addRange(Q))}}}}for(se=[],te=O;te=te.parentNode;)te.nodeType===1&&se.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<se.length;O++){var ae=se[O];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Pl=!!nf,rf=nf=null}finally{Le=f,U.p=l,M.T=i}}t.current=r,ft=2}}function Mp(){if(ft===2){ft=0;var t=Cr,r=ds,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=M.T,M.T=null;var l=U.p;U.p=2;var f=Le;Le|=4;try{sp(t,r.alternate,r)}finally{Le=f,U.p=l,M.T=i}}ft=3}}function kp(){if(ft===4||ft===3){ft=0,Pr();var t=Cr,r=ds,i=Qn,l=vp;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ft=5:(ft=0,ds=Cr=null,jp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Tr=null),Zs(i),r=r.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Yr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=M.T,f=U.p,U.p=2,M.T=null;try{for(var m=t.onRecoverableError,w=0;w<l.length;w++){var O=l[w];m(O.value,{componentStack:O.stack})}}finally{M.T=r,U.p=f}}(Qn&3)!==0&&kl(),Cn(t),f=t.pendingLanes,(i&261930)!==0&&(f&42)!==0?t===Vd?Oi++:(Oi=0,Vd=t):Oi=0,Ri(0)}}function jp(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ui(r)))}function kl(){return Rp(),Mp(),kp(),Dp()}function Dp(){if(ft!==5)return!1;var t=Cr,r=Id;Id=0;var i=Zs(Qn),l=M.T,f=U.p;try{U.p=32>i?32:i,M.T=null,i=qd,qd=null;var m=Cr,w=Qn;if(ft=0,ds=Cr=null,Qn=0,(Le&6)!==0)throw Error(s(331));var O=Le;if(Le|=4,mp(m.current),fp(m,m.current,w,i),Le=O,Ri(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Yr,m)}catch{}return!0}finally{U.p=f,M.T=l,jp(t,r)}}function zp(t,r,i){r=en(i,r),r=xd(t.stateNode,r,2),t=br(t,r,2),t!==null&&(Kr(t,2),Cn(t))}function Be(t,r,i){if(t.tag===3)zp(t,t,i);else for(;r!==null;){if(r.tag===3){zp(r,t,i);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Tr===null||!Tr.has(l))){t=en(i,t),i=$m(2),l=br(r,i,2),l!==null&&(Um(i,l,r,t),Kr(l,2),Cn(l));break}}r=r.return}}function Yd(t,r,i){var l=t.pingCache;if(l===null){l=t.pingCache=new y_;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(i)||(Ld=!0,f.add(i),t=__.bind(null,t,r,i),r.then(t,t))}function __(t,r,i){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,Ye===t&&(Me&i)===i&&(et===4||et===3&&(Me&62914560)===Me&&300>yt()-Cl?(Le&2)===0&&fs(t,0):Hd|=i,us===Me&&(us=0)),Cn(t)}function $p(t,r){r===0&&(r=No()),t=Wr(t,r),t!==null&&(Kr(t,r),Cn(t))}function S_(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),$p(t,i)}function E_(t,r){var i=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),$p(t,i)}function T_(t,r){return ar(t,r)}var jl=null,gs=null,Xd=!1,Dl=!1,Kd=!1,Nr=0;function Cn(t){t!==gs&&t.next===null&&(gs===null?jl=gs=t:gs=gs.next=t),Dl=!0,Xd||(Xd=!0,A_())}function Ri(t,r){if(!Kd&&Dl){Kd=!0;do for(var i=!1,l=jl;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var w=l.suspendedLanes,O=l.pingedLanes;m=(1<<31-Nt(42|t)+1)-1,m&=f&~(w&~O),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,Bp(l,m))}else m=Me,m=ja(l,l===Ye?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Xr(l,m)||(i=!0,Bp(l,m));l=l.next}while(i);Kd=!1}}function C_(){Up()}function Up(){Dl=Xd=!1;var t=0;Nr!==0&&U_()&&(t=Nr);for(var r=yt(),i=null,l=jl;l!==null;){var f=l.next,m=Lp(l,r);m===0?(l.next=null,i===null?jl=f:i.next=f,f===null&&(gs=i)):(i=l,(t!==0||(m&3)!==0)&&(Dl=!0)),l=f}ft!==0&&ft!==5||Ri(t),Nr!==0&&(Nr=0)}function Lp(t,r){for(var i=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var w=31-Nt(m),O=1<<w,L=f[w];L===-1?((O&i)===0||(O&l)!==0)&&(f[w]=lu(O,r)):L<=r&&(t.expiredLanes|=O),m&=~O}if(r=Ye,i=Me,i=ja(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,i===0||t===r&&(He===2||He===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&sr(l),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Xr(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(l!==null&&sr(l),Zs(i)){case 2:case 8:i=ir;break;case 32:i=Gr;break;case 268435456:i=Oa;break;default:i=Gr}return l=Hp.bind(null,t),i=ar(i,l),t.callbackPriority=r,t.callbackNode=i,r}return l!==null&&l!==null&&sr(l),t.callbackPriority=2,t.callbackNode=null,2}function Hp(t,r){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(kl()&&t.callbackNode!==i)return null;var l=Me;return l=ja(t,t===Ye?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(wp(t,l,r),Lp(t,yt()),t.callbackNode!=null&&t.callbackNode===i?Hp.bind(null,t):null)}function Bp(t,r){if(kl())return null;wp(t,r,!0)}function A_(){H_(function(){(Le&6)!==0?ar(Mn,C_):Up()})}function Zd(){if(Nr===0){var t=Wa;t===0&&(t=Ra,Ra<<=1,(Ra&261888)===0&&(Ra=256)),Nr=t}return Nr}function Ip(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:qo(""+t)}function qp(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function N_(t,r,i,l,f){if(r==="submit"&&i&&i.stateNode===f){var m=Ip((f[Et]||null).action),w=l.submitter;w&&(r=(r=w[Et]||null)?Ip(r.formAction):w.getAttribute("formAction"),r!==null&&(m=r,w=null));var O=new Yo("action","action",null,l,f);t.push({event:O,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Nr!==0){var L=w?qp(f,w):new FormData(f);md(i,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(O.preventDefault(),L=w?qp(f,w):new FormData(f),md(i,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var Qd=0;Qd<ku.length;Qd++){var Jd=ku[Qd],O_=Jd.toLowerCase(),R_=Jd[0].toUpperCase()+Jd.slice(1);un(O_,"on"+R_)}un(bg,"onAnimationEnd"),un(wg,"onAnimationIteration"),un(xg,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(Yx,"onTransitionRun"),un(Xx,"onTransitionStart"),un(Kx,"onTransitionCancel"),un(_g,"onTransitionEnd"),dr("onMouseEnter",["mouseout","mouseover"]),dr("onMouseLeave",["mouseout","mouseover"]),dr("onPointerEnter",["pointerout","pointerover"]),dr("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mi));function Vp(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var w=l.length-1;0<=w;w--){var O=l[w],L=O.instance,J=O.currentTarget;if(O=O.listener,L!==m&&f.isPropagationStopped())break e;m=O,f.currentTarget=J;try{m(f)}catch(re){Zo(re)}f.currentTarget=null,m=L}else for(w=0;w<l.length;w++){if(O=l[w],L=O.instance,J=O.currentTarget,O=O.listener,L!==m&&f.isPropagationStopped())break e;m=O,f.currentTarget=J;try{m(f)}catch(re){Zo(re)}f.currentTarget=null,m=L}}}}function Re(t,r){var i=r[Da];i===void 0&&(i=r[Da]=new Set);var l=t+"__bubble";i.has(l)||(Pp(r,t,2,!1),i.add(l))}function Fd(t,r,i){var l=0;r&&(l|=4),Pp(i,t,l,r)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Wd(t){if(!t[zl]){t[zl]=!0,$o.forEach(function(i){i!=="selectionchange"&&(M_.has(i)||Fd(i,!1,t),Fd(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[zl]||(r[zl]=!0,Fd("selectionchange",!1,r))}}function Pp(t,r,i,l){switch(b0(r)){case 2:var f=sS;break;case 8:f=iS;break;default:f=mf}i=f.bind(null,r,i,t),f=void 0,!bu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,i,{capture:!0,passive:f}):t.addEventListener(r,i,!0):f!==void 0?t.addEventListener(r,i,{passive:f}):t.addEventListener(r,i,!1)}function ef(t,r,i,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var O=l.stateNode.containerInfo;if(O===f)break;if(w===4)for(w=l.return;w!==null;){var L=w.tag;if((L===3||L===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;O!==null;){if(w=or(O),w===null)return;if(L=w.tag,L===5||L===6||L===26||L===27){l=m=w;continue e}O=O.parentNode}}l=l.return}Zh(function(){var J=m,re=yu(i),se=[];e:{var F=Sg.get(t);if(F!==void 0){var te=Yo,fe=t;switch(t){case"keypress":if(Po(i)===0)break e;case"keydown":case"keyup":te=Ex;break;case"focusin":fe="focus",te=Su;break;case"focusout":fe="blur",te=Su;break;case"beforeblur":case"afterblur":te=Su;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Ax;break;case bg:case wg:case xg:te=mx;break;case _g:te=Ox;break;case"scroll":case"scrollend":te=ux;break;case"wheel":te=Mx;break;case"copy":case"cut":case"paste":te=yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=eg;break;case"toggle":case"beforetoggle":te=jx}var be=(r&4)!==0,Pe=!be&&(t==="scroll"||t==="scrollend"),Y=be?F!==null?F+"Capture":null:F;be=[];for(var I=J,Q;I!==null;){var ae=I;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||Y===null||(ae=Ws(I,Y),ae!=null&&be.push(ki(I,ae,Q))),Pe)break;I=I.return}0<be.length&&(F=new te(F,fe,null,i,re),se.push({event:F,listeners:be}))}}if((r&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",F&&i!==pu&&(fe=i.relatedTarget||i.fromElement)&&(or(fe)||fe[jn]))break e;if((te||F)&&(F=re.window===re?re:(F=re.ownerDocument)?F.defaultView||F.parentWindow:window,te?(fe=i.relatedTarget||i.toElement,te=J,fe=fe?or(fe):null,fe!==null&&(Pe=c(fe),be=fe.tag,fe!==Pe||be!==5&&be!==27&&be!==6)&&(fe=null)):(te=null,fe=J),te!==fe)){if(be=Fh,ae="onMouseLeave",Y="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(be=eg,ae="onPointerLeave",Y="onPointerEnter",I="pointer"),Pe=te==null?F:cr(te),Q=fe==null?F:cr(fe),F=new be(ae,I+"leave",te,i,re),F.target=Pe,F.relatedTarget=Q,ae=null,or(re)===J&&(be=new be(Y,I+"enter",fe,i,re),be.target=Q,be.relatedTarget=Pe,ae=be),Pe=ae,te&&fe)t:{for(be=k_,Y=te,I=fe,Q=0,ae=Y;ae;ae=be(ae))Q++;ae=0;for(var ve=I;ve;ve=be(ve))ae++;for(;0<Q-ae;)Y=be(Y),Q--;for(;0<ae-Q;)I=be(I),ae--;for(;Q--;){if(Y===I||I!==null&&Y===I.alternate){be=Y;break t}Y=be(Y),I=be(I)}be=null}else be=null;te!==null&&Gp(se,F,te,be,!1),fe!==null&&Pe!==null&&Gp(se,Pe,fe,be,!0)}}e:{if(F=J?cr(J):window,te=F.nodeName&&F.nodeName.toLowerCase(),te==="select"||te==="input"&&F.type==="file")var ze=lg;else if(ig(F))if(cg)ze=Vx;else{ze=Ix;var ge=Bx}else te=F.nodeName,!te||te.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?J&&mu(J.elementType)&&(ze=lg):ze=qx;if(ze&&(ze=ze(t,J))){og(se,ze,i,re);break e}ge&&ge(t,F,J),t==="focusout"&&J&&F.type==="number"&&J.memoizedProps.value!=null&&Ha(F,"number",F.value)}switch(ge=J?cr(J):window,t){case"focusin":(ig(ge)||ge.contentEditable==="true")&&(Ga=ge,Ou=J,oi=null);break;case"focusout":oi=Ou=Ga=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,yg(se,i,re);break;case"selectionchange":if(Gx)break;case"keydown":case"keyup":yg(se,i,re)}var Ne;if(Tu)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Pa?ag(t,i)&&(ke="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(ke="onCompositionStart");ke&&(tg&&i.locale!=="ko"&&(Pa||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Pa&&(Ne=Qh()):(fr=re,wu="value"in fr?fr.value:fr.textContent,Pa=!0)),ge=$l(J,ke),0<ge.length&&(ke=new Wh(ke,t,null,i,re),se.push({event:ke,listeners:ge}),Ne?ke.data=Ne:(Ne=sg(i),Ne!==null&&(ke.data=Ne)))),(Ne=zx?$x(t,i):Ux(t,i))&&(ke=$l(J,"onBeforeInput"),0<ke.length&&(ge=new Wh("onBeforeInput","beforeinput",null,i,re),se.push({event:ge,listeners:ke}),ge.data=Ne)),N_(se,t,J,i,re)}Vp(se,r)})}function ki(t,r,i){return{instance:t,listener:r,currentTarget:i}}function $l(t,r){for(var i=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ws(t,i),f!=null&&l.unshift(ki(t,f,m)),f=Ws(t,r),f!=null&&l.push(ki(t,f,m))),t.tag===3)return l;t=t.return}return[]}function k_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gp(t,r,i,l,f){for(var m=r._reactName,w=[];i!==null&&i!==l;){var O=i,L=O.alternate,J=O.stateNode;if(O=O.tag,L!==null&&L===l)break;O!==5&&O!==26&&O!==27||J===null||(L=J,f?(J=Ws(i,m),J!=null&&w.unshift(ki(i,J,L))):f||(J=Ws(i,m),J!=null&&w.push(ki(i,J,L)))),i=i.return}w.length!==0&&t.push({event:r,listeners:w})}var j_=/\r\n?/g,D_=/\u0000|\uFFFD/g;function Yp(t){return(typeof t=="string"?t:""+t).replace(j_,`
`).replace(D_,"")}function Xp(t,r){return r=Yp(r),Yp(t)===r}function Ve(t,r,i,l,f,m){switch(i){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Ia(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Ia(t,""+l);break;case"className":$a(t,"class",l);break;case"tabIndex":$a(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$a(t,i,l);break;case"style":Xh(t,l,m);break;case"data":if(r!=="object"){$a(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=qo(""+l),t.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(r!=="input"&&Ve(t,r,"name",f.name,f,null),Ve(t,r,"formEncType",f.formEncType,f,null),Ve(t,r,"formMethod",f.formMethod,f,null),Ve(t,r,"formTarget",f.formTarget,f,null)):(Ve(t,r,"encType",f.encType,f,null),Ve(t,r,"method",f.method,f,null),Ve(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=qo(""+l),t.setAttribute(i,l);break;case"onClick":l!=null&&(t.onclick=zn);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=i}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}i=qo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""+l):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":l===!0?t.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,l):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(i,l):t.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(i):t.setAttribute(i,l);break;case"popover":Re("beforetoggle",t),Re("toggle",t),za(t,"popover",l);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":za(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=lx.get(i)||i,za(t,i,l))}}function tf(t,r,i,l,f,m){switch(i){case"style":Xh(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=i}}break;case"children":typeof l=="string"?Ia(t,l):(typeof l=="number"||typeof l=="bigint")&&Ia(t,""+l);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),m=t[Et]||null,m=m!=null?m[i]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,l,f);break e}i in t?t[i]=l:l===!0?t.setAttribute(i,""):za(t,i,l)}}}function xt(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",t),Re("load",t);var l=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var w=i[m];if(w!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ve(t,r,m,w,i,null)}}f&&Ve(t,r,"srcSet",i.srcSet,i,null),l&&Ve(t,r,"src",i.src,i,null);return;case"input":Re("invalid",t);var O=m=w=f=null,L=null,J=null;for(l in i)if(i.hasOwnProperty(l)){var re=i[l];if(re!=null)switch(l){case"name":f=re;break;case"type":w=re;break;case"checked":L=re;break;case"defaultChecked":J=re;break;case"value":m=re;break;case"defaultValue":O=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,r));break;default:Ve(t,r,l,re,i,null)}}Io(t,m,O,L,J,w,f,!1);return;case"select":Re("invalid",t),l=w=m=null;for(f in i)if(i.hasOwnProperty(f)&&(O=i[f],O!=null))switch(f){case"value":m=O;break;case"defaultValue":w=O;break;case"multiple":l=O;default:Ve(t,r,f,O,i,null)}r=m,i=w,t.multiple=!!l,r!=null?Ba(t,!!l,r,!1):i!=null&&Ba(t,!!l,i,!0);return;case"textarea":Re("invalid",t),m=f=l=null;for(w in i)if(i.hasOwnProperty(w)&&(O=i[w],O!=null))switch(w){case"value":l=O;break;case"defaultValue":f=O;break;case"children":m=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(91));break;default:Ve(t,r,w,O,i,null)}Gh(t,l,f,m);return;case"option":for(L in i)if(i.hasOwnProperty(L)&&(l=i[L],l!=null))switch(L){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ve(t,r,L,l,i,null)}return;case"dialog":Re("beforetoggle",t),Re("toggle",t),Re("cancel",t),Re("close",t);break;case"iframe":case"object":Re("load",t);break;case"video":case"audio":for(l=0;l<Mi.length;l++)Re(Mi[l],t);break;case"image":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"embed":case"source":case"link":Re("error",t),Re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in i)if(i.hasOwnProperty(J)&&(l=i[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ve(t,r,J,l,i,null)}return;default:if(mu(r)){for(re in i)i.hasOwnProperty(re)&&(l=i[re],l!==void 0&&tf(t,r,re,l,i,void 0));return}}for(O in i)i.hasOwnProperty(O)&&(l=i[O],l!=null&&Ve(t,r,O,l,i,null))}function z_(t,r,i,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,w=null,O=null,L=null,J=null,re=null;for(te in i){var se=i[te];if(i.hasOwnProperty(te)&&se!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":L=se;default:l.hasOwnProperty(te)||Ve(t,r,te,null,l,se)}}for(var F in l){var te=l[F];if(se=i[F],l.hasOwnProperty(F)&&(te!=null||se!=null))switch(F){case"type":m=te;break;case"name":f=te;break;case"checked":J=te;break;case"defaultChecked":re=te;break;case"value":w=te;break;case"defaultValue":O=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:te!==se&&Ve(t,r,F,te,l,se)}}Fs(t,w,O,L,J,re,m,f);return;case"select":te=w=O=F=null;for(m in i)if(L=i[m],i.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":te=L;default:l.hasOwnProperty(m)||Ve(t,r,m,null,l,L)}for(f in l)if(m=l[f],L=i[f],l.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":F=m;break;case"defaultValue":O=m;break;case"multiple":w=m;default:m!==L&&Ve(t,r,f,m,l,L)}r=O,i=w,l=te,F!=null?Ba(t,!!i,F,!1):!!l!=!!i&&(r!=null?Ba(t,!!i,r,!0):Ba(t,!!i,i?[]:"",!1));return;case"textarea":te=F=null;for(O in i)if(f=i[O],i.hasOwnProperty(O)&&f!=null&&!l.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Ve(t,r,O,null,l,f)}for(w in l)if(f=l[w],m=i[w],l.hasOwnProperty(w)&&(f!=null||m!=null))switch(w){case"value":F=f;break;case"defaultValue":te=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Ve(t,r,w,f,l,m)}Ph(t,F,te);return;case"option":for(var fe in i)if(F=i[fe],i.hasOwnProperty(fe)&&F!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ve(t,r,fe,null,l,F)}for(L in l)if(F=l[L],te=i[L],l.hasOwnProperty(L)&&F!==te&&(F!=null||te!=null))switch(L){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Ve(t,r,L,F,l,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in i)F=i[be],i.hasOwnProperty(be)&&F!=null&&!l.hasOwnProperty(be)&&Ve(t,r,be,null,l,F);for(J in l)if(F=l[J],te=i[J],l.hasOwnProperty(J)&&F!==te&&(F!=null||te!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,r));break;default:Ve(t,r,J,F,l,te)}return;default:if(mu(r)){for(var Pe in i)F=i[Pe],i.hasOwnProperty(Pe)&&F!==void 0&&!l.hasOwnProperty(Pe)&&tf(t,r,Pe,void 0,l,F);for(re in l)F=l[re],te=i[re],!l.hasOwnProperty(re)||F===te||F===void 0&&te===void 0||tf(t,r,re,F,l,te);return}}for(var Y in i)F=i[Y],i.hasOwnProperty(Y)&&F!=null&&!l.hasOwnProperty(Y)&&Ve(t,r,Y,null,l,F);for(se in l)F=l[se],te=i[se],!l.hasOwnProperty(se)||F===te||F==null&&te==null||Ve(t,r,se,F,l,te)}function Kp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var f=i[l],m=f.transferSize,w=f.initiatorType,O=f.duration;if(m&&O&&Kp(w)){for(w=0,O=f.responseEnd,l+=1;l<i.length;l++){var L=i[l],J=L.startTime;if(J>O)break;var re=L.transferSize,se=L.initiatorType;re&&Kp(se)&&(L=L.responseEnd,w+=re*(L<O?1:(O-J)/(L-J)))}if(--l,r+=8*(m+w)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var nf=null,rf=null;function Ul(t){return t.nodeType===9?t:t.ownerDocument}function Zp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qp(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function af(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var sf=null;function U_(){var t=window.event;return t&&t.type==="popstate"?t===sf?!1:(sf=t,!0):(sf=null,!1)}var Jp=typeof setTimeout=="function"?setTimeout:void 0,L_=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,H_=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(t){return Fp.resolve(null).then(t).catch(B_)}:Jp;function B_(t){setTimeout(function(){throw t})}function Or(t){return t==="head"}function Wp(t,r){var i=r,l=0;do{var f=i.nextSibling;if(t.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"||i==="/&"){if(l===0){t.removeChild(f),vs(r);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")ji(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,ji(i);for(var m=i.firstChild;m;){var w=m.nextSibling,O=m.nodeName;m[Zr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=w}}else i==="body"&&ji(t.ownerDocument.body);i=f}while(i);vs(r)}function e0(t,r){var i=t;t=0;do{var l=i.nextSibling;if(i.nodeType===1?r?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(r?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=l}while(i)}function of(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":of(i),Qs(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function I_(t,r,i,l){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Zr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=sn(t.nextSibling),t===null)break}return null}function q_(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=sn(t.nextSibling),t===null))return null;return t}function t0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=sn(t.nextSibling),t===null))return null;return t}function lf(t){return t.data==="$?"||t.data==="$~"}function cf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function V_(t,r){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||i.readyState!=="loading")r();else{var l=function(){r(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function sn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var uf=null;function n0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(r===0)return sn(t.nextSibling);r--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||r++}t=t.nextSibling}return null}function r0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(r===0)return t;r--}else i!=="/$"&&i!=="/&"||r++}t=t.previousSibling}return null}function a0(t,r,i){switch(r=Ul(i),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function ji(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Qs(t)}var on=new Map,s0=new Set;function Ll(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jn=U.d;U.d={f:P_,r:G_,D:Y_,C:X_,L:K_,m:Z_,X:J_,S:Q_,M:F_};function P_(){var t=Jn.f(),r=Ol();return t||r}function G_(t){var r=lr(t);r!==null&&r.tag===5&&r.type==="form"?_m(r):Jn.r(t)}var ms=typeof document>"u"?null:document;function i0(t,r,i){var l=ms;if(l&&typeof r=="string"&&r){var f=Tt(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),s0.has(f)||(s0.add(f),t={rel:t,crossOrigin:i,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),xt(r,"link",t),at(r),l.head.appendChild(r)))}}function Y_(t){Jn.D(t),i0("dns-prefetch",t,null)}function X_(t,r){Jn.C(t,r),i0("preconnect",t,r)}function K_(t,r,i){Jn.L(t,r,i);var l=ms;if(l&&t&&r){var f='link[rel="preload"][as="'+Tt(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Tt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Tt(i.imageSizes)+'"]')):f+='[href="'+Tt(t)+'"]';var m=f;switch(r){case"style":m=ps(t);break;case"script":m=ys(t)}on.has(m)||(t=v({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),on.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Di(m))||r==="script"&&l.querySelector(zi(m))||(r=l.createElement("link"),xt(r,"link",t),at(r),l.head.appendChild(r)))}}function Z_(t,r){Jn.m(t,r);var i=ms;if(i&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ys(t)}if(!on.has(m)&&(t=v({rel:"modulepreload",href:t},r),on.set(m,t),i.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(zi(m)))return}l=i.createElement("link"),xt(l,"link",t),at(l),i.head.appendChild(l)}}}function Q_(t,r,i){Jn.S(t,r,i);var l=ms;if(l&&t){var f=ur(l).hoistableStyles,m=ps(t);r=r||"default";var w=f.get(m);if(!w){var O={loading:0,preload:null};if(w=l.querySelector(Di(m)))O.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":r},i),(i=on.get(m))&&df(t,i);var L=w=l.createElement("link");at(L),xt(L,"link",t),L._p=new Promise(function(J,re){L.onload=J,L.onerror=re}),L.addEventListener("load",function(){O.loading|=1}),L.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Hl(w,r,l)}w={type:"stylesheet",instance:w,count:1,state:O},f.set(m,w)}}}function J_(t,r){Jn.X(t,r);var i=ms;if(i&&t){var l=ur(i).hoistableScripts,f=ys(t),m=l.get(f);m||(m=i.querySelector(zi(f)),m||(t=v({src:t,async:!0},r),(r=on.get(f))&&ff(t,r),m=i.createElement("script"),at(m),xt(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function F_(t,r){Jn.M(t,r);var i=ms;if(i&&t){var l=ur(i).hoistableScripts,f=ys(t),m=l.get(f);m||(m=i.querySelector(zi(f)),m||(t=v({src:t,async:!0,type:"module"},r),(r=on.get(f))&&ff(t,r),m=i.createElement("script"),at(m),xt(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function o0(t,r,i,l){var f=(f=ue.current)?Ll(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=ps(i.href),i=ur(f).hoistableStyles,l=i.get(r),l||(l={type:"style",instance:null,count:0,state:null},i.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=ps(i.href);var m=ur(f).hoistableStyles,w=m.get(t);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,w),(m=f.querySelector(Di(t)))&&!m._p&&(w.instance=m,w.state.loading=5),on.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},on.set(t,i),m||W_(f,t,i,w.state))),r&&l===null)throw Error(s(528,""));return w}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ys(i),i=ur(f).hoistableScripts,l=i.get(r),l||(l={type:"script",instance:null,count:0,state:null},i.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ps(t){return'href="'+Tt(t)+'"'}function Di(t){return'link[rel="stylesheet"]['+t+"]"}function l0(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function W_(t,r,i,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),xt(r,"link",i),at(r),t.head.appendChild(r))}function ys(t){return'[src="'+Tt(t)+'"]'}function zi(t){return"script[async]"+t}function c0(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(i.href)+'"]');if(l)return r.instance=l,at(l),l;var f=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),at(l),xt(l,"style",f),Hl(l,i.precedence,t),r.instance=l;case"stylesheet":f=ps(i.href);var m=t.querySelector(Di(f));if(m)return r.state.loading|=4,r.instance=m,at(m),m;l=l0(i),(f=on.get(f))&&df(l,f),m=(t.ownerDocument||t).createElement("link"),at(m);var w=m;return w._p=new Promise(function(O,L){w.onload=O,w.onerror=L}),xt(m,"link",l),r.state.loading|=4,Hl(m,i.precedence,t),r.instance=m;case"script":return m=ys(i.src),(f=t.querySelector(zi(m)))?(r.instance=f,at(f),f):(l=i,(f=on.get(m))&&(l=v({},i),ff(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),at(f),xt(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Hl(l,i.precedence,t));return r.instance}function Hl(t,r,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,w=0;w<l.length;w++){var O=l[w];if(O.dataset.precedence===r)m=O;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function df(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function ff(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Bl=null;function u0(t,r,i){if(Bl===null){var l=new Map,f=Bl=new Map;f.set(i,l)}else f=Bl,l=f.get(i),l||(l=new Map,f.set(i,l));if(l.has(t))return l;for(l.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var m=i[f];if(!(m[Zr]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(r)||"";w=t+w;var O=l.get(w);O?O.push(m):l.set(w,[m])}}return l}function d0(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function eS(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function f0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function tS(t,r,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=ps(l.href),m=r.querySelector(Di(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Il.bind(t),r.then(t,t)),i.state.loading|=4,i.instance=m,at(m);return}m=r.ownerDocument||r,l=l0(l),(f=on.get(f))&&df(l,f),m=m.createElement("link"),at(m);var w=m;w._p=new Promise(function(O,L){w.onload=O,w.onerror=L}),xt(m,"link",l),i.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Il.bind(t),r.addEventListener("load",i),r.addEventListener("error",i))}}var hf=0;function nS(t,r){return t.stylesheets&&t.count===0&&Vl(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var l=setTimeout(function(){if(t.stylesheets&&Vl(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&hf===0&&(hf=62500*$_());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vl(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>hf?50:800)+r);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Il(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ql=null;function Vl(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ql=new Map,r.forEach(rS,t),ql=null,Il.call(t))}function rS(t,r){if(!(r.state.loading&4)){var i=ql.get(t);if(i)var l=i.get(null);else{i=new Map,ql.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var w=f[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(i.set(w.dataset.precedence,w),l=w)}l&&i.set(null,l)}f=r.instance,w=f.getAttribute("data-precedence"),m=i.get(w)||l,m===l&&i.set(null,f),i.set(w,f),this.count++,l=Il.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var $i={$$typeof:_,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function aS(t,r,i,l,f,m,w,O,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.hiddenUpdates=Xs(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function h0(t,r,i,l,f,m,w,O,L,J,re,se){return t=new aS(t,r,i,w,L,J,re,se,O),r=1,m===!0&&(r|=24),m=It(3,null,null,r),t.current=m,m.stateNode=t,r=Gu(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:i,cache:r},Zu(m),t}function g0(t){return t?(t=Ka,t):Ka}function m0(t,r,i,l,f,m){f=g0(f),l.context===null?l.context=f:l.pendingContext=f,l=vr(r),l.payload={element:i},m=m===void 0?null:m,m!==null&&(l.callback=m),i=br(t,l,r),i!==null&&($t(i,t,r),gi(i,t,r))}function p0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function gf(t,r){p0(t,r),(t=t.alternate)&&p0(t,r)}function y0(t){if(t.tag===13||t.tag===31){var r=Wr(t,67108864);r!==null&&$t(r,t,67108864),gf(t,67108864)}}function v0(t){if(t.tag===13||t.tag===31){var r=Yt();r=Ks(r);var i=Wr(t,r);i!==null&&$t(i,t,r),gf(t,r)}}var Pl=!0;function sS(t,r,i,l){var f=M.T;M.T=null;var m=U.p;try{U.p=2,mf(t,r,i,l)}finally{U.p=m,M.T=f}}function iS(t,r,i,l){var f=M.T;M.T=null;var m=U.p;try{U.p=8,mf(t,r,i,l)}finally{U.p=m,M.T=f}}function mf(t,r,i,l){if(Pl){var f=pf(l);if(f===null)ef(t,r,l,Gl,i),w0(t,l);else if(lS(f,t,r,i,l))l.stopPropagation();else if(w0(t,l),r&4&&-1<oS.indexOf(t)){for(;f!==null;){var m=lr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=kn(m.pendingLanes);if(w!==0){var O=m;for(O.pendingLanes|=2,O.entangledLanes|=2;w;){var L=1<<31-Nt(w);O.entanglements[1]|=L,w&=~L}Cn(m),(Le&6)===0&&(Al=yt()+500,Ri(0))}}break;case 31:case 13:O=Wr(m,2),O!==null&&$t(O,m,2),Ol(),gf(m,2)}if(m=pf(l),m===null&&ef(t,r,l,Gl,i),m===f)break;f=m}f!==null&&l.stopPropagation()}else ef(t,r,l,null,i)}}function pf(t){return t=yu(t),yf(t)}var Gl=null;function yf(t){if(Gl=null,t=or(t),t!==null){var r=c(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=u(r),t!==null)return t;t=null}else if(i===31){if(t=d(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Gl=t,null}function b0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Na()){case Mn:return 2;case ir:return 8;case Gr:case nu:return 32;case Oa:return 268435456;default:return 32}default:return 32}}var vf=!1,Rr=null,Mr=null,kr=null,Ui=new Map,Li=new Map,jr=[],oS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w0(t,r){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Ui.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(r.pointerId)}}function Hi(t,r,i,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:i,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=lr(r),r!==null&&y0(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function lS(t,r,i,l,f){switch(r){case"focusin":return Rr=Hi(Rr,t,r,i,l,f),!0;case"dragenter":return Mr=Hi(Mr,t,r,i,l,f),!0;case"mouseover":return kr=Hi(kr,t,r,i,l,f),!0;case"pointerover":var m=f.pointerId;return Ui.set(m,Hi(Ui.get(m)||null,t,r,i,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Li.set(m,Hi(Li.get(m)||null,t,r,i,l,f)),!0}return!1}function x0(t){var r=or(t.target);if(r!==null){var i=c(r);if(i!==null){if(r=i.tag,r===13){if(r=u(i),r!==null){t.blockedOn=r,jo(t.priority,function(){v0(i)});return}}else if(r===31){if(r=d(i),r!==null){t.blockedOn=r,jo(t.priority,function(){v0(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=pf(t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);pu=l,i.target.dispatchEvent(l),pu=null}else return r=lr(i),r!==null&&y0(r),t.blockedOn=i,!1;r.shift()}return!0}function _0(t,r,i){Yl(t)&&i.delete(r)}function cS(){vf=!1,Rr!==null&&Yl(Rr)&&(Rr=null),Mr!==null&&Yl(Mr)&&(Mr=null),kr!==null&&Yl(kr)&&(kr=null),Ui.forEach(_0),Li.forEach(_0)}function Xl(t,r){t.blockedOn===r&&(t.blockedOn=null,vf||(vf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cS)))}var Kl=null;function S0(t){Kl!==t&&(Kl=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Kl===t&&(Kl=null);for(var r=0;r<t.length;r+=3){var i=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(yf(l||i)===null)continue;break}var m=lr(i);m!==null&&(t.splice(r,3),r-=3,md(m,{pending:!0,data:f,method:i.method,action:l},l,f))}}))}function vs(t){function r(L){return Xl(L,t)}Rr!==null&&Xl(Rr,t),Mr!==null&&Xl(Mr,t),kr!==null&&Xl(kr,t),Ui.forEach(r),Li.forEach(r);for(var i=0;i<jr.length;i++){var l=jr[i];l.blockedOn===t&&(l.blockedOn=null)}for(;0<jr.length&&(i=jr[0],i.blockedOn===null);)x0(i),i.blockedOn===null&&jr.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var f=i[l],m=i[l+1],w=f[Et]||null;if(typeof m=="function")w||S0(i);else if(w){var O=null;if(m&&m.hasAttribute("formAction")){if(f=m,w=m[Et]||null)O=w.formAction;else if(yf(f)!==null)continue}else O=w.action;typeof O=="function"?i[l+1]=O:(i.splice(l,3),l-=3),S0(i)}}}function E0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function bf(t){this._internalRoot=t}Zl.prototype.render=bf.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var i=r.current,l=Yt();m0(i,l,t,r,null,null)},Zl.prototype.unmount=bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;m0(t.current,2,null,t,null,null),Ol(),r[jn]=null}};function Zl(t){this._internalRoot=t}Zl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ko();t={blockedOn:null,target:t,priority:r};for(var i=0;i<jr.length&&r!==0&&r<jr[i].priority;i++);jr.splice(i,0,t),i===0&&x0(t)}};var T0=n.version;if(T0!=="19.2.0")throw Error(s(527,T0,"19.2.0"));U.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=h(r),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var uS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Yr=Ql.inject(uS),At=Ql}catch{}}return Ii.createRoot=function(t,r){if(!o(t))throw Error(s(299));var i=!1,l="",f=km,m=jm,w=Dm;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=h0(t,1,!1,null,null,i,l,null,f,m,w,E0),t[jn]=r.current,Wd(t),new bf(r)},Ii.hydrateRoot=function(t,r,i){if(!o(t))throw Error(s(299));var l=!1,f="",m=km,w=jm,O=Dm,L=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError),i.formState!==void 0&&(L=i.formState)),r=h0(t,1,!0,r,i??null,l,f,L,m,w,O,E0),r.context=g0(null),i=r.current,l=Yt(),l=Ks(l),f=vr(l),f.callback=null,br(i,f,l),i=l,r.current.lanes=i,Kr(r,i),Cn(r),t[jn]=r.current,Wd(t),new Zl(r)},Ii.version="19.2.0",Ii}var z0;function bS(){if(z0)return _f.exports;z0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),_f.exports=vS(),_f.exports}var wS=bS();function ut(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let a=0,s;a<e.length;a++)(s=ut(e[a]))!==""&&(n+=(n&&" ")+s);else for(let a in e)e[a]&&(n+=(n&&" ")+a);return n}var xS={value:()=>{}};function Hc(){for(var e=0,n=arguments.length,a={},s;e<n;++e){if(!(s=arguments[e]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new pc(a)}function pc(e){this._=e}function _S(e,n){return e.trim().split(/^|\s+/).map(function(a){var s="",o=a.indexOf(".");if(o>=0&&(s=a.slice(o+1),a=a.slice(0,o)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}pc.prototype=Hc.prototype={constructor:pc,on:function(e,n){var a=this._,s=_S(e+"",a),o,c=-1,u=s.length;if(arguments.length<2){for(;++c<u;)if((o=(e=s[c]).type)&&(o=SS(a[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<u;)if(o=(e=s[c]).type)a[o]=$0(a[o],e.name,n);else if(n==null)for(o in a)a[o]=$0(a[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new pc(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var a=new Array(o),s=0,o,c;s<o;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],s=0,o=c.length;s<o;++s)c[s].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],o=0,c=s.length;o<c;++o)s[o].value.apply(n,a)}};function SS(e,n){for(var a=0,s=e.length,o;a<s;++a)if((o=e[a]).name===n)return o.value}function $0(e,n,a){for(var s=0,o=e.length;s<o;++s)if(e[s].name===n){e[s]=xS,e=e.slice(0,s).concat(e.slice(s+1));break}return a!=null&&e.push({name:n,value:a}),e}var Qf="http://www.w3.org/1999/xhtml";const U0={svg:"http://www.w3.org/2000/svg",xhtml:Qf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bc(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),U0.hasOwnProperty(n)?{space:U0[n],local:e}:e}function ES(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===Qf&&n.documentElement.namespaceURI===Qf?n.createElement(e):n.createElementNS(a,e)}}function TS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dv(e){var n=Bc(e);return(n.local?TS:ES)(n)}function CS(){}function Sh(e){return e==null?CS:function(){return this.querySelector(e)}}function AS(e){typeof e!="function"&&(e=Sh(e));for(var n=this._groups,a=n.length,s=new Array(a),o=0;o<a;++o)for(var c=n[o],u=c.length,d=s[o]=new Array(u),g,h,p=0;p<u;++p)(g=c[p])&&(h=e.call(g,g.__data__,p,c))&&("__data__"in g&&(h.__data__=g.__data__),d[p]=h);return new Jt(s,this._parents)}function NS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function OS(){return[]}function zv(e){return e==null?OS:function(){return this.querySelectorAll(e)}}function RS(e){return function(){return NS(e.apply(this,arguments))}}function MS(e){typeof e=="function"?e=RS(e):e=zv(e);for(var n=this._groups,a=n.length,s=[],o=[],c=0;c<a;++c)for(var u=n[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&(s.push(e.call(g,g.__data__,h,u)),o.push(g));return new Jt(s,o)}function $v(e){return function(){return this.matches(e)}}function Uv(e){return function(n){return n.matches(e)}}var kS=Array.prototype.find;function jS(e){return function(){return kS.call(this.children,e)}}function DS(){return this.firstElementChild}function zS(e){return this.select(e==null?DS:jS(typeof e=="function"?e:Uv(e)))}var $S=Array.prototype.filter;function US(){return Array.from(this.children)}function LS(e){return function(){return $S.call(this.children,e)}}function HS(e){return this.selectAll(e==null?US:LS(typeof e=="function"?e:Uv(e)))}function BS(e){typeof e!="function"&&(e=$v(e));for(var n=this._groups,a=n.length,s=new Array(a),o=0;o<a;++o)for(var c=n[o],u=c.length,d=s[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new Jt(s,this._parents)}function Lv(e){return new Array(e.length)}function IS(){return new Jt(this._enter||this._groups.map(Lv),this._parents)}function Ec(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Ec.prototype={constructor:Ec,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qS(e){return function(){return e}}function VS(e,n,a,s,o,c){for(var u=0,d,g=n.length,h=c.length;u<h;++u)(d=n[u])?(d.__data__=c[u],s[u]=d):a[u]=new Ec(e,c[u]);for(;u<g;++u)(d=n[u])&&(o[u]=d)}function PS(e,n,a,s,o,c,u){var d,g,h=new Map,p=n.length,v=c.length,y=new Array(p),b;for(d=0;d<p;++d)(g=n[d])&&(y[d]=b=u.call(g,g.__data__,d,n)+"",h.has(b)?o[d]=g:h.set(b,g));for(d=0;d<v;++d)b=u.call(e,c[d],d,c)+"",(g=h.get(b))?(s[d]=g,g.__data__=c[d],h.delete(b)):a[d]=new Ec(e,c[d]);for(d=0;d<p;++d)(g=n[d])&&h.get(y[d])===g&&(o[d]=g)}function GS(e){return e.__data__}function YS(e,n){if(!arguments.length)return Array.from(this,GS);var a=n?PS:VS,s=this._parents,o=this._groups;typeof e!="function"&&(e=qS(e));for(var c=o.length,u=new Array(c),d=new Array(c),g=new Array(c),h=0;h<c;++h){var p=s[h],v=o[h],y=v.length,b=XS(e.call(p,p&&p.__data__,h,s)),C=b.length,E=d[h]=new Array(C),T=u[h]=new Array(C),S=g[h]=new Array(y);a(p,v,E,T,S,b,n);for(var N=0,_=0,A,D;N<C;++N)if(A=E[N]){for(N>=_&&(_=N+1);!(D=T[_])&&++_<C;);A._next=D||null}}return u=new Jt(u,s),u._enter=d,u._exit=g,u}function XS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KS(){return new Jt(this._exit||this._groups.map(Lv),this._parents)}function ZS(e,n,a){var s=this.enter(),o=this,c=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),n!=null&&(o=n(o),o&&(o=o.selection())),a==null?c.remove():a(c),s&&o?s.merge(o).order():o}function QS(e){for(var n=e.selection?e.selection():e,a=this._groups,s=n._groups,o=a.length,c=s.length,u=Math.min(o,c),d=new Array(o),g=0;g<u;++g)for(var h=a[g],p=s[g],v=h.length,y=d[g]=new Array(v),b,C=0;C<v;++C)(b=h[C]||p[C])&&(y[C]=b);for(;g<o;++g)d[g]=a[g];return new Jt(d,this._parents)}function JS(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var s=e[n],o=s.length-1,c=s[o],u;--o>=0;)(u=s[o])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function FS(e){e||(e=WS);function n(v,y){return v&&y?e(v.__data__,y.__data__):!v-!y}for(var a=this._groups,s=a.length,o=new Array(s),c=0;c<s;++c){for(var u=a[c],d=u.length,g=o[c]=new Array(d),h,p=0;p<d;++p)(h=u[p])&&(g[p]=h);g.sort(n)}return new Jt(o,this._parents).order()}function WS(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function e1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function t1(){return Array.from(this)}function n1(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var s=e[n],o=0,c=s.length;o<c;++o){var u=s[o];if(u)return u}return null}function r1(){let e=0;for(const n of this)++e;return e}function a1(){return!this.node()}function s1(e){for(var n=this._groups,a=0,s=n.length;a<s;++a)for(var o=n[a],c=0,u=o.length,d;c<u;++c)(d=o[c])&&e.call(d,d.__data__,c,o);return this}function i1(e){return function(){this.removeAttribute(e)}}function o1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function l1(e,n){return function(){this.setAttribute(e,n)}}function c1(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function u1(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function d1(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function f1(e,n){var a=Bc(e);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((n==null?a.local?o1:i1:typeof n=="function"?a.local?d1:u1:a.local?c1:l1)(a,n))}function Hv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function h1(e){return function(){this.style.removeProperty(e)}}function g1(e,n,a){return function(){this.style.setProperty(e,n,a)}}function m1(e,n,a){return function(){var s=n.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,a)}}function p1(e,n,a){return arguments.length>1?this.each((n==null?h1:typeof n=="function"?m1:g1)(e,n,a??"")):Ls(this.node(),e)}function Ls(e,n){return e.style.getPropertyValue(n)||Hv(e).getComputedStyle(e,null).getPropertyValue(n)}function y1(e){return function(){delete this[e]}}function v1(e,n){return function(){this[e]=n}}function b1(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function w1(e,n){return arguments.length>1?this.each((n==null?y1:typeof n=="function"?b1:v1)(e,n)):this.node()[e]}function Bv(e){return e.trim().split(/^|\s+/)}function Eh(e){return e.classList||new Iv(e)}function Iv(e){this._node=e,this._names=Bv(e.getAttribute("class")||"")}Iv.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function qv(e,n){for(var a=Eh(e),s=-1,o=n.length;++s<o;)a.add(n[s])}function Vv(e,n){for(var a=Eh(e),s=-1,o=n.length;++s<o;)a.remove(n[s])}function x1(e){return function(){qv(this,e)}}function _1(e){return function(){Vv(this,e)}}function S1(e,n){return function(){(n.apply(this,arguments)?qv:Vv)(this,e)}}function E1(e,n){var a=Bv(e+"");if(arguments.length<2){for(var s=Eh(this.node()),o=-1,c=a.length;++o<c;)if(!s.contains(a[o]))return!1;return!0}return this.each((typeof n=="function"?S1:n?x1:_1)(a,n))}function T1(){this.textContent=""}function C1(e){return function(){this.textContent=e}}function A1(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function N1(e){return arguments.length?this.each(e==null?T1:(typeof e=="function"?A1:C1)(e)):this.node().textContent}function O1(){this.innerHTML=""}function R1(e){return function(){this.innerHTML=e}}function M1(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function k1(e){return arguments.length?this.each(e==null?O1:(typeof e=="function"?M1:R1)(e)):this.node().innerHTML}function j1(){this.nextSibling&&this.parentNode.appendChild(this)}function D1(){return this.each(j1)}function z1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $1(){return this.each(z1)}function U1(e){var n=typeof e=="function"?e:Dv(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function L1(){return null}function H1(e,n){var a=typeof e=="function"?e:Dv(e),s=n==null?L1:typeof n=="function"?n:Sh(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})}function B1(){var e=this.parentNode;e&&e.removeChild(this)}function I1(){return this.each(B1)}function q1(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function V1(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function P1(e){return this.select(e?V1:q1)}function G1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Y1(e){return function(n){e.call(this,n,this.__data__)}}function X1(e){return e.trim().split(/^|\s+/).map(function(n){var a="",s=n.indexOf(".");return s>=0&&(a=n.slice(s+1),n=n.slice(0,s)),{type:n,name:a}})}function K1(e){return function(){var n=this.__on;if(n){for(var a=0,s=-1,o=n.length,c;a<o;++a)c=n[a],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++s]=c;++s?n.length=s:delete this.__on}}}function Z1(e,n,a){return function(){var s=this.__on,o,c=Y1(n);if(s){for(var u=0,d=s.length;u<d;++u)if((o=s[u]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=c,o.options=a),o.value=n;return}}this.addEventListener(e.type,c,a),o={type:e.type,name:e.name,value:n,listener:c,options:a},s?s.push(o):this.__on=[o]}}function Q1(e,n,a){var s=X1(e+""),o,c=s.length,u;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,h=d.length,p;g<h;++g)for(o=0,p=d[g];o<c;++o)if((u=s[o]).type===p.type&&u.name===p.name)return p.value}return}for(d=n?Z1:K1,o=0;o<c;++o)this.each(d(s[o],n,a));return this}function Pv(e,n,a){var s=Hv(e),o=s.CustomEvent;typeof o=="function"?o=new o(n,a):(o=s.document.createEvent("Event"),a?(o.initEvent(n,a.bubbles,a.cancelable),o.detail=a.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function J1(e,n){return function(){return Pv(this,e,n)}}function F1(e,n){return function(){return Pv(this,e,n.apply(this,arguments))}}function W1(e,n){return this.each((typeof n=="function"?F1:J1)(e,n))}function*eE(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var s=e[n],o=0,c=s.length,u;o<c;++o)(u=s[o])&&(yield u)}var Gv=[null];function Jt(e,n){this._groups=e,this._parents=n}function yo(){return new Jt([[document.documentElement]],Gv)}function tE(){return this}Jt.prototype=yo.prototype={constructor:Jt,select:AS,selectAll:MS,selectChild:zS,selectChildren:HS,filter:BS,data:YS,enter:IS,exit:KS,join:ZS,merge:QS,selection:tE,order:JS,sort:FS,call:e1,nodes:t1,node:n1,size:r1,empty:a1,each:s1,attr:f1,style:p1,property:w1,classed:E1,text:N1,html:k1,raise:D1,lower:$1,append:U1,insert:H1,remove:I1,clone:P1,datum:G1,on:Q1,dispatch:W1,[Symbol.iterator]:eE};function Zt(e){return typeof e=="string"?new Jt([[document.querySelector(e)]],[document.documentElement]):new Jt([[e]],Gv)}function nE(e){let n;for(;n=e.sourceEvent;)e=n;return e}function mn(e,n){if(e=nE(e),n===void 0&&(n=e.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var s=a.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(n.getScreenCTM().inverse()),[s.x,s.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}const rE={passive:!1},Fi={capture:!0,passive:!1};function Cf(e){e.stopImmediatePropagation()}function zs(e){e.preventDefault(),e.stopImmediatePropagation()}function Yv(e){var n=e.document.documentElement,a=Zt(e).on("dragstart.drag",zs,Fi);"onselectstart"in n?a.on("selectstart.drag",zs,Fi):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Xv(e,n){var a=e.document.documentElement,s=Zt(e).on("dragstart.drag",null);n&&(s.on("click.drag",zs,Fi),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in a?s.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const Fl=e=>()=>e;function Jf(e,{sourceEvent:n,subject:a,target:s,identifier:o,active:c,x:u,y:d,dx:g,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Jf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function aE(e){return!e.ctrlKey&&!e.button}function sE(){return this.parentNode}function iE(e,n){return n??{x:e.x,y:e.y}}function oE(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kv(){var e=aE,n=sE,a=iE,s=oE,o={},c=Hc("start","drag","end"),u=0,d,g,h,p,v=0;function y(A){A.on("mousedown.drag",b).filter(s).on("touchstart.drag",T).on("touchmove.drag",S,rE).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(A,D){if(!(p||!e.call(this,A,D))){var z=_(this,n.call(this,A,D),A,D,"mouse");z&&(Zt(A.view).on("mousemove.drag",C,Fi).on("mouseup.drag",E,Fi),Yv(A.view),Cf(A),h=!1,d=A.clientX,g=A.clientY,z("start",A))}}function C(A){if(zs(A),!h){var D=A.clientX-d,z=A.clientY-g;h=D*D+z*z>v}o.mouse("drag",A)}function E(A){Zt(A.view).on("mousemove.drag mouseup.drag",null),Xv(A.view,h),zs(A),o.mouse("end",A)}function T(A,D){if(e.call(this,A,D)){var z=A.changedTouches,$=n.call(this,A,D),V=z.length,K,oe;for(K=0;K<V;++K)(oe=_(this,$,A,D,z[K].identifier,z[K]))&&(Cf(A),oe("start",A,z[K]))}}function S(A){var D=A.changedTouches,z=D.length,$,V;for($=0;$<z;++$)(V=o[D[$].identifier])&&(zs(A),V("drag",A,D[$]))}function N(A){var D=A.changedTouches,z=D.length,$,V;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),$=0;$<z;++$)(V=o[D[$].identifier])&&(Cf(A),V("end",A,D[$]))}function _(A,D,z,$,V,K){var oe=c.copy(),W=mn(K||z,D),ee,ne,j;if((j=a.call(A,new Jf("beforestart",{sourceEvent:z,target:y,identifier:V,active:u,x:W[0],y:W[1],dx:0,dy:0,dispatch:oe}),$))!=null)return ee=j.x-W[0]||0,ne=j.y-W[1]||0,function P(M,U,B){var X=W,H;switch(M){case"start":o[V]=P,H=u++;break;case"end":delete o[V],--u;case"drag":W=mn(B||U,D),H=u;break}oe.call(M,A,new Jf(M,{sourceEvent:U,subject:j,target:y,identifier:V,active:H,x:W[0]+ee,y:W[1]+ne,dx:W[0]-X[0],dy:W[1]-X[1],dispatch:oe}),$)}}return y.filter=function(A){return arguments.length?(e=typeof A=="function"?A:Fl(!!A),y):e},y.container=function(A){return arguments.length?(n=typeof A=="function"?A:Fl(A),y):n},y.subject=function(A){return arguments.length?(a=typeof A=="function"?A:Fl(A),y):a},y.touchable=function(A){return arguments.length?(s=typeof A=="function"?A:Fl(!!A),y):s},y.on=function(){var A=c.on.apply(c,arguments);return A===c?y:A},y.clickDistance=function(A){return arguments.length?(v=(A=+A)*A,y):Math.sqrt(v)},y}function Th(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function Zv(e,n){var a=Object.create(e.prototype);for(var s in n)a[s]=n[s];return a}function vo(){}var Wi=.7,Tc=1/Wi,$s="\\s*([+-]?\\d+)\\s*",eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lE=/^#([0-9a-f]{3,8})$/,cE=new RegExp(`^rgb\\(${$s},${$s},${$s}\\)$`),uE=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),dE=new RegExp(`^rgba\\(${$s},${$s},${$s},${eo}\\)$`),fE=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${eo}\\)$`),hE=new RegExp(`^hsl\\(${eo},${Nn},${Nn}\\)$`),gE=new RegExp(`^hsla\\(${eo},${Nn},${Nn},${eo}\\)$`),L0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Th(vo,Ta,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:H0,formatHex:H0,formatHex8:mE,formatHsl:pE,formatRgb:B0,toString:B0});function H0(){return this.rgb().formatHex()}function mE(){return this.rgb().formatHex8()}function pE(){return Qv(this).formatHsl()}function B0(){return this.rgb().formatRgb()}function Ta(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=lE.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?I0(n):a===3?new Ut(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?Wl(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?Wl(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=cE.exec(e))?new Ut(n[1],n[2],n[3],1):(n=uE.exec(e))?new Ut(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=dE.exec(e))?Wl(n[1],n[2],n[3],n[4]):(n=fE.exec(e))?Wl(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=hE.exec(e))?P0(n[1],n[2]/100,n[3]/100,1):(n=gE.exec(e))?P0(n[1],n[2]/100,n[3]/100,n[4]):L0.hasOwnProperty(e)?I0(L0[e]):e==="transparent"?new Ut(NaN,NaN,NaN,0):null}function I0(e){return new Ut(e>>16&255,e>>8&255,e&255,1)}function Wl(e,n,a,s){return s<=0&&(e=n=a=NaN),new Ut(e,n,a,s)}function yE(e){return e instanceof vo||(e=Ta(e)),e?(e=e.rgb(),new Ut(e.r,e.g,e.b,e.opacity)):new Ut}function Ff(e,n,a,s){return arguments.length===1?yE(e):new Ut(e,n,a,s??1)}function Ut(e,n,a,s){this.r=+e,this.g=+n,this.b=+a,this.opacity=+s}Th(Ut,Ff,Zv(vo,{brighter(e){return e=e==null?Tc:Math.pow(Tc,e),new Ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Wi:Math.pow(Wi,e),new Ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ut(_a(this.r),_a(this.g),_a(this.b),Cc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:q0,formatHex:q0,formatHex8:vE,formatRgb:V0,toString:V0}));function q0(){return`#${wa(this.r)}${wa(this.g)}${wa(this.b)}`}function vE(){return`#${wa(this.r)}${wa(this.g)}${wa(this.b)}${wa((isNaN(this.opacity)?1:this.opacity)*255)}`}function V0(){const e=Cc(this.opacity);return`${e===1?"rgb(":"rgba("}${_a(this.r)}, ${_a(this.g)}, ${_a(this.b)}${e===1?")":`, ${e})`}`}function Cc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _a(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wa(e){return e=_a(e),(e<16?"0":"")+e.toString(16)}function P0(e,n,a,s){return s<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new yn(e,n,a,s)}function Qv(e){if(e instanceof yn)return new yn(e.h,e.s,e.l,e.opacity);if(e instanceof vo||(e=Ta(e)),!e)return new yn;if(e instanceof yn)return e;e=e.rgb();var n=e.r/255,a=e.g/255,s=e.b/255,o=Math.min(n,a,s),c=Math.max(n,a,s),u=NaN,d=c-o,g=(c+o)/2;return d?(n===c?u=(a-s)/d+(a<s)*6:a===c?u=(s-n)/d+2:u=(n-a)/d+4,d/=g<.5?c+o:2-c-o,u*=60):d=g>0&&g<1?0:u,new yn(u,d,g,e.opacity)}function bE(e,n,a,s){return arguments.length===1?Qv(e):new yn(e,n,a,s??1)}function yn(e,n,a,s){this.h=+e,this.s=+n,this.l=+a,this.opacity=+s}Th(yn,bE,Zv(vo,{brighter(e){return e=e==null?Tc:Math.pow(Tc,e),new yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Wi:Math.pow(Wi,e),new yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*n,o=2*a-s;return new Ut(Af(e>=240?e-240:e+120,o,s),Af(e,o,s),Af(e<120?e+240:e-120,o,s),this.opacity)},clamp(){return new yn(G0(this.h),ec(this.s),ec(this.l),Cc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cc(this.opacity);return`${e===1?"hsl(":"hsla("}${G0(this.h)}, ${ec(this.s)*100}%, ${ec(this.l)*100}%${e===1?")":`, ${e})`}`}}));function G0(e){return e=(e||0)%360,e<0?e+360:e}function ec(e){return Math.max(0,Math.min(1,e||0))}function Af(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const Ch=e=>()=>e;function wE(e,n){return function(a){return e+a*n}}function xE(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(s){return Math.pow(e+s*n,a)}}function _E(e){return(e=+e)==1?Jv:function(n,a){return a-n?xE(n,a,e):Ch(isNaN(n)?a:n)}}function Jv(e,n){var a=n-e;return a?wE(e,a):Ch(isNaN(e)?n:e)}const Ac=(function e(n){var a=_E(n);function s(o,c){var u=a((o=Ff(o)).r,(c=Ff(c)).r),d=a(o.g,c.g),g=a(o.b,c.b),h=Jv(o.opacity,c.opacity);return function(p){return o.r=u(p),o.g=d(p),o.b=g(p),o.opacity=h(p),o+""}}return s.gamma=e,s})(1);function SE(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,s=n.slice(),o;return function(c){for(o=0;o<a;++o)s[o]=e[o]*(1-c)+n[o]*c;return s}}function EE(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function TE(e,n){var a=n?n.length:0,s=e?Math.min(a,e.length):0,o=new Array(s),c=new Array(a),u;for(u=0;u<s;++u)o[u]=Ki(e[u],n[u]);for(;u<a;++u)c[u]=n[u];return function(d){for(u=0;u<s;++u)c[u]=o[u](d);return c}}function CE(e,n){var a=new Date;return e=+e,n=+n,function(s){return a.setTime(e*(1-s)+n*s),a}}function An(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function AE(e,n){var a={},s={},o;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in e?a[o]=Ki(e[o],n[o]):s[o]=n[o];return function(c){for(o in a)s[o]=a[o](c);return s}}var Wf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nf=new RegExp(Wf.source,"g");function NE(e){return function(){return e}}function OE(e){return function(n){return e(n)+""}}function Fv(e,n){var a=Wf.lastIndex=Nf.lastIndex=0,s,o,c,u=-1,d=[],g=[];for(e=e+"",n=n+"";(s=Wf.exec(e))&&(o=Nf.exec(n));)(c=o.index)>a&&(c=n.slice(a,c),d[u]?d[u]+=c:d[++u]=c),(s=s[0])===(o=o[0])?d[u]?d[u]+=o:d[++u]=o:(d[++u]=null,g.push({i:u,x:An(s,o)})),a=Nf.lastIndex;return a<n.length&&(c=n.slice(a),d[u]?d[u]+=c:d[++u]=c),d.length<2?g[0]?OE(g[0].x):NE(n):(n=g.length,function(h){for(var p=0,v;p<n;++p)d[(v=g[p]).i]=v.x(h);return d.join("")})}function Ki(e,n){var a=typeof n,s;return n==null||a==="boolean"?Ch(n):(a==="number"?An:a==="string"?(s=Ta(n))?(n=s,Ac):Fv:n instanceof Ta?Ac:n instanceof Date?CE:EE(n)?SE:Array.isArray(n)?TE:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?AE:An)(e,n)}var Y0=180/Math.PI,eh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wv(e,n,a,s,o,c){var u,d,g;return(u=Math.sqrt(e*e+n*n))&&(e/=u,n/=u),(g=e*a+n*s)&&(a-=e*g,s-=n*g),(d=Math.sqrt(a*a+s*s))&&(a/=d,s/=d,g/=d),e*s<n*a&&(e=-e,n=-n,g=-g,u=-u),{translateX:o,translateY:c,rotate:Math.atan2(n,e)*Y0,skewX:Math.atan(g)*Y0,scaleX:u,scaleY:d}}var tc;function RE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?eh:Wv(n.a,n.b,n.c,n.d,n.e,n.f)}function ME(e){return e==null||(tc||(tc=document.createElementNS("http://www.w3.org/2000/svg","g")),tc.setAttribute("transform",e),!(e=tc.transform.baseVal.consolidate()))?eh:(e=e.matrix,Wv(e.a,e.b,e.c,e.d,e.e,e.f))}function eb(e,n,a,s){function o(h){return h.length?h.pop()+" ":""}function c(h,p,v,y,b,C){if(h!==v||p!==y){var E=b.push("translate(",null,n,null,a);C.push({i:E-4,x:An(h,v)},{i:E-2,x:An(p,y)})}else(v||y)&&b.push("translate("+v+n+y+a)}function u(h,p,v,y){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),y.push({i:v.push(o(v)+"rotate(",null,s)-2,x:An(h,p)})):p&&v.push(o(v)+"rotate("+p+s)}function d(h,p,v,y){h!==p?y.push({i:v.push(o(v)+"skewX(",null,s)-2,x:An(h,p)}):p&&v.push(o(v)+"skewX("+p+s)}function g(h,p,v,y,b,C){if(h!==v||p!==y){var E=b.push(o(b)+"scale(",null,",",null,")");C.push({i:E-4,x:An(h,v)},{i:E-2,x:An(p,y)})}else(v!==1||y!==1)&&b.push(o(b)+"scale("+v+","+y+")")}return function(h,p){var v=[],y=[];return h=e(h),p=e(p),c(h.translateX,h.translateY,p.translateX,p.translateY,v,y),u(h.rotate,p.rotate,v,y),d(h.skewX,p.skewX,v,y),g(h.scaleX,h.scaleY,p.scaleX,p.scaleY,v,y),h=p=null,function(b){for(var C=-1,E=y.length,T;++C<E;)v[(T=y[C]).i]=T.x(b);return v.join("")}}}var kE=eb(RE,"px, ","px)","deg)"),jE=eb(ME,", ",")",")"),DE=1e-12;function X0(e){return((e=Math.exp(e))+1/e)/2}function zE(e){return((e=Math.exp(e))-1/e)/2}function $E(e){return((e=Math.exp(2*e))-1)/(e+1)}const yc=(function e(n,a,s){function o(c,u){var d=c[0],g=c[1],h=c[2],p=u[0],v=u[1],y=u[2],b=p-d,C=v-g,E=b*b+C*C,T,S;if(E<DE)S=Math.log(y/h)/n,T=function($){return[d+$*b,g+$*C,h*Math.exp(n*$*S)]};else{var N=Math.sqrt(E),_=(y*y-h*h+s*E)/(2*h*a*N),A=(y*y-h*h-s*E)/(2*y*a*N),D=Math.log(Math.sqrt(_*_+1)-_),z=Math.log(Math.sqrt(A*A+1)-A);S=(z-D)/n,T=function($){var V=$*S,K=X0(D),oe=h/(a*N)*(K*$E(n*V+D)-zE(D));return[d+oe*b,g+oe*C,h*K/X0(n*V+D)]}}return T.duration=S*1e3*n/Math.SQRT2,T}return o.rho=function(c){var u=Math.max(.001,+c),d=u*u,g=d*d;return e(u,d,g)},o})(Math.SQRT2,2,4);var Hs=0,Gi=0,qi=0,tb=1e3,Nc,Yi,Oc=0,Ca=0,Ic=0,to=typeof performance=="object"&&performance.now?performance:Date,nb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ah(){return Ca||(nb(UE),Ca=to.now()+Ic)}function UE(){Ca=0}function Rc(){this._call=this._time=this._next=null}Rc.prototype=rb.prototype={constructor:Rc,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?Ah():+a)+(n==null?0:+n),!this._next&&Yi!==this&&(Yi?Yi._next=this:Nc=this,Yi=this),this._call=e,this._time=a,th()},stop:function(){this._call&&(this._call=null,this._time=1/0,th())}};function rb(e,n,a){var s=new Rc;return s.restart(e,n,a),s}function LE(){Ah(),++Hs;for(var e=Nc,n;e;)(n=Ca-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Hs}function K0(){Ca=(Oc=to.now())+Ic,Hs=Gi=0;try{LE()}finally{Hs=0,BE(),Ca=0}}function HE(){var e=to.now(),n=e-Oc;n>tb&&(Ic-=n,Oc=e)}function BE(){for(var e,n=Nc,a,s=1/0;n;)n._call?(s>n._time&&(s=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:Nc=a);Yi=e,th(s)}function th(e){if(!Hs){Gi&&(Gi=clearTimeout(Gi));var n=e-Ca;n>24?(e<1/0&&(Gi=setTimeout(K0,e-to.now()-Ic)),qi&&(qi=clearInterval(qi))):(qi||(Oc=to.now(),qi=setInterval(HE,tb)),Hs=1,nb(K0))}}function Z0(e,n,a){var s=new Rc;return n=n==null?0:+n,s.restart(o=>{s.stop(),e(o+n)},n,a),s}var IE=Hc("start","end","cancel","interrupt"),qE=[],ab=0,Q0=1,nh=2,vc=3,J0=4,rh=5,bc=6;function qc(e,n,a,s,o,c){var u=e.__transition;if(!u)e.__transition={};else if(a in u)return;VE(e,a,{name:n,index:s,group:o,on:IE,tween:qE,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:ab})}function Nh(e,n){var a=wn(e,n);if(a.state>ab)throw new Error("too late; already scheduled");return a}function Rn(e,n){var a=wn(e,n);if(a.state>vc)throw new Error("too late; already running");return a}function wn(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function VE(e,n,a){var s=e.__transition,o;s[n]=a,a.timer=rb(c,0,a.time);function c(h){a.state=Q0,a.timer.restart(u,a.delay,a.time),a.delay<=h&&u(h-a.delay)}function u(h){var p,v,y,b;if(a.state!==Q0)return g();for(p in s)if(b=s[p],b.name===a.name){if(b.state===vc)return Z0(u);b.state===J0?(b.state=bc,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete s[p]):+p<n&&(b.state=bc,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete s[p])}if(Z0(function(){a.state===vc&&(a.state=J0,a.timer.restart(d,a.delay,a.time),d(h))}),a.state=nh,a.on.call("start",e,e.__data__,a.index,a.group),a.state===nh){for(a.state=vc,o=new Array(y=a.tween.length),p=0,v=-1;p<y;++p)(b=a.tween[p].value.call(e,e.__data__,a.index,a.group))&&(o[++v]=b);o.length=v+1}}function d(h){for(var p=h<a.duration?a.ease.call(null,h/a.duration):(a.timer.restart(g),a.state=rh,1),v=-1,y=o.length;++v<y;)o[v].call(e,p);a.state===rh&&(a.on.call("end",e,e.__data__,a.index,a.group),g())}function g(){a.state=bc,a.timer.stop(),delete s[n];for(var h in s)return;delete e.__transition}}function wc(e,n){var a=e.__transition,s,o,c=!0,u;if(a){n=n==null?null:n+"";for(u in a){if((s=a[u]).name!==n){c=!1;continue}o=s.state>nh&&s.state<rh,s.state=bc,s.timer.stop(),s.on.call(o?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete a[u]}c&&delete e.__transition}}function PE(e){return this.each(function(){wc(this,e)})}function GE(e,n){var a,s;return function(){var o=Rn(this,e),c=o.tween;if(c!==a){s=a=c;for(var u=0,d=s.length;u<d;++u)if(s[u].name===n){s=s.slice(),s.splice(u,1);break}}o.tween=s}}function YE(e,n,a){var s,o;if(typeof a!="function")throw new Error;return function(){var c=Rn(this,e),u=c.tween;if(u!==s){o=(s=u).slice();for(var d={name:n,value:a},g=0,h=o.length;g<h;++g)if(o[g].name===n){o[g]=d;break}g===h&&o.push(d)}c.tween=o}}function XE(e,n){var a=this._id;if(e+="",arguments.length<2){for(var s=wn(this.node(),a).tween,o=0,c=s.length,u;o<c;++o)if((u=s[o]).name===e)return u.value;return null}return this.each((n==null?GE:YE)(a,e,n))}function Oh(e,n,a){var s=e._id;return e.each(function(){var o=Rn(this,s);(o.value||(o.value={}))[n]=a.apply(this,arguments)}),function(o){return wn(o,s).value[n]}}function sb(e,n){var a;return(typeof n=="number"?An:n instanceof Ta?Ac:(a=Ta(n))?(n=a,Ac):Fv)(e,n)}function KE(e){return function(){this.removeAttribute(e)}}function ZE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function QE(e,n,a){var s,o=a+"",c;return function(){var u=this.getAttribute(e);return u===o?null:u===s?c:c=n(s=u,a)}}function JE(e,n,a){var s,o=a+"",c;return function(){var u=this.getAttributeNS(e.space,e.local);return u===o?null:u===s?c:c=n(s=u,a)}}function FE(e,n,a){var s,o,c;return function(){var u,d=a(this),g;return d==null?void this.removeAttribute(e):(u=this.getAttribute(e),g=d+"",u===g?null:u===s&&g===o?c:(o=g,c=n(s=u,d)))}}function WE(e,n,a){var s,o,c;return function(){var u,d=a(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),g=d+"",u===g?null:u===s&&g===o?c:(o=g,c=n(s=u,d)))}}function e2(e,n){var a=Bc(e),s=a==="transform"?jE:sb;return this.attrTween(e,typeof n=="function"?(a.local?WE:FE)(a,s,Oh(this,"attr."+e,n)):n==null?(a.local?ZE:KE)(a):(a.local?JE:QE)(a,s,n))}function t2(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function n2(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function r2(e,n){var a,s;function o(){var c=n.apply(this,arguments);return c!==s&&(a=(s=c)&&n2(e,c)),a}return o._value=n,o}function a2(e,n){var a,s;function o(){var c=n.apply(this,arguments);return c!==s&&(a=(s=c)&&t2(e,c)),a}return o._value=n,o}function s2(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var s=Bc(e);return this.tween(a,(s.local?r2:a2)(s,n))}function i2(e,n){return function(){Nh(this,e).delay=+n.apply(this,arguments)}}function o2(e,n){return n=+n,function(){Nh(this,e).delay=n}}function l2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?i2:o2)(n,e)):wn(this.node(),n).delay}function c2(e,n){return function(){Rn(this,e).duration=+n.apply(this,arguments)}}function u2(e,n){return n=+n,function(){Rn(this,e).duration=n}}function d2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?c2:u2)(n,e)):wn(this.node(),n).duration}function f2(e,n){if(typeof n!="function")throw new Error;return function(){Rn(this,e).ease=n}}function h2(e){var n=this._id;return arguments.length?this.each(f2(n,e)):wn(this.node(),n).ease}function g2(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;Rn(this,e).ease=a}}function m2(e){if(typeof e!="function")throw new Error;return this.each(g2(this._id,e))}function p2(e){typeof e!="function"&&(e=$v(e));for(var n=this._groups,a=n.length,s=new Array(a),o=0;o<a;++o)for(var c=n[o],u=c.length,d=s[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new tr(s,this._parents,this._name,this._id)}function y2(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,s=n.length,o=a.length,c=Math.min(s,o),u=new Array(s),d=0;d<c;++d)for(var g=n[d],h=a[d],p=g.length,v=u[d]=new Array(p),y,b=0;b<p;++b)(y=g[b]||h[b])&&(v[b]=y);for(;d<s;++d)u[d]=n[d];return new tr(u,this._parents,this._name,this._id)}function v2(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function b2(e,n,a){var s,o,c=v2(n)?Nh:Rn;return function(){var u=c(this,e),d=u.on;d!==s&&(o=(s=d).copy()).on(n,a),u.on=o}}function w2(e,n){var a=this._id;return arguments.length<2?wn(this.node(),a).on.on(e):this.each(b2(a,e,n))}function x2(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function _2(){return this.on("end.remove",x2(this._id))}function S2(e){var n=this._name,a=this._id;typeof e!="function"&&(e=Sh(e));for(var s=this._groups,o=s.length,c=new Array(o),u=0;u<o;++u)for(var d=s[u],g=d.length,h=c[u]=new Array(g),p,v,y=0;y<g;++y)(p=d[y])&&(v=e.call(p,p.__data__,y,d))&&("__data__"in p&&(v.__data__=p.__data__),h[y]=v,qc(h[y],n,a,y,h,wn(p,a)));return new tr(c,this._parents,n,a)}function E2(e){var n=this._name,a=this._id;typeof e!="function"&&(e=zv(e));for(var s=this._groups,o=s.length,c=[],u=[],d=0;d<o;++d)for(var g=s[d],h=g.length,p,v=0;v<h;++v)if(p=g[v]){for(var y=e.call(p,p.__data__,v,g),b,C=wn(p,a),E=0,T=y.length;E<T;++E)(b=y[E])&&qc(b,n,a,E,y,C);c.push(y),u.push(p)}return new tr(c,u,n,a)}var T2=yo.prototype.constructor;function C2(){return new T2(this._groups,this._parents)}function A2(e,n){var a,s,o;return function(){var c=Ls(this,e),u=(this.style.removeProperty(e),Ls(this,e));return c===u?null:c===a&&u===s?o:o=n(a=c,s=u)}}function ib(e){return function(){this.style.removeProperty(e)}}function N2(e,n,a){var s,o=a+"",c;return function(){var u=Ls(this,e);return u===o?null:u===s?c:c=n(s=u,a)}}function O2(e,n,a){var s,o,c;return function(){var u=Ls(this,e),d=a(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),Ls(this,e))),u===g?null:u===s&&g===o?c:(o=g,c=n(s=u,d))}}function R2(e,n){var a,s,o,c="style."+n,u="end."+c,d;return function(){var g=Rn(this,e),h=g.on,p=g.value[c]==null?d||(d=ib(n)):void 0;(h!==a||o!==p)&&(s=(a=h).copy()).on(u,o=p),g.on=s}}function M2(e,n,a){var s=(e+="")=="transform"?kE:sb;return n==null?this.styleTween(e,A2(e,s)).on("end.style."+e,ib(e)):typeof n=="function"?this.styleTween(e,O2(e,s,Oh(this,"style."+e,n))).each(R2(this._id,e)):this.styleTween(e,N2(e,s,n),a).on("end.style."+e,null)}function k2(e,n,a){return function(s){this.style.setProperty(e,n.call(this,s),a)}}function j2(e,n,a){var s,o;function c(){var u=n.apply(this,arguments);return u!==o&&(s=(o=u)&&k2(e,u,a)),s}return c._value=n,c}function D2(e,n,a){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,j2(e,n,a??""))}function z2(e){return function(){this.textContent=e}}function $2(e){return function(){var n=e(this);this.textContent=n??""}}function U2(e){return this.tween("text",typeof e=="function"?$2(Oh(this,"text",e)):z2(e==null?"":e+""))}function L2(e){return function(n){this.textContent=e.call(this,n)}}function H2(e){var n,a;function s(){var o=e.apply(this,arguments);return o!==a&&(n=(a=o)&&L2(o)),n}return s._value=e,s}function B2(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,H2(e))}function I2(){for(var e=this._name,n=this._id,a=ob(),s=this._groups,o=s.length,c=0;c<o;++c)for(var u=s[c],d=u.length,g,h=0;h<d;++h)if(g=u[h]){var p=wn(g,n);qc(g,e,a,h,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new tr(s,this._parents,e,a)}function q2(){var e,n,a=this,s=a._id,o=a.size();return new Promise(function(c,u){var d={value:u},g={value:function(){--o===0&&c()}};a.each(function(){var h=Rn(this,s),p=h.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(g)),h.on=n}),o===0&&c()})}var V2=0;function tr(e,n,a,s){this._groups=e,this._parents=n,this._name=a,this._id=s}function ob(){return++V2}var Fn=yo.prototype;tr.prototype={constructor:tr,select:S2,selectAll:E2,selectChild:Fn.selectChild,selectChildren:Fn.selectChildren,filter:p2,merge:y2,selection:C2,transition:I2,call:Fn.call,nodes:Fn.nodes,node:Fn.node,size:Fn.size,empty:Fn.empty,each:Fn.each,on:w2,attr:e2,attrTween:s2,style:M2,styleTween:D2,text:U2,textTween:B2,remove:_2,tween:XE,delay:l2,duration:d2,ease:h2,easeVarying:m2,end:q2,[Symbol.iterator]:Fn[Symbol.iterator]};function P2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var G2={time:null,delay:0,duration:250,ease:P2};function Y2(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function X2(e){var n,a;e instanceof tr?(n=e._id,e=e._name):(n=ob(),(a=G2).time=Ah(),e=e==null?null:e+"");for(var s=this._groups,o=s.length,c=0;c<o;++c)for(var u=s[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&qc(g,e,n,h,u,a||Y2(g,n));return new tr(s,this._parents,e,n)}yo.prototype.interrupt=PE;yo.prototype.transition=X2;const nc=e=>()=>e;function K2(e,{sourceEvent:n,target:a,transform:s,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:o}})}function er(e,n,a){this.k=e,this.x=n,this.y=a}er.prototype={constructor:er,scale:function(e){return e===1?this:new er(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new er(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vc=new er(1,0,0);lb.prototype=er.prototype;function lb(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Vc;return e.__zoom}function Of(e){e.stopImmediatePropagation()}function Vi(e){e.preventDefault(),e.stopImmediatePropagation()}function Z2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Q2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function F0(){return this.__zoom||Vc}function J2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function F2(){return navigator.maxTouchPoints||"ontouchstart"in this}function W2(e,n,a){var s=e.invertX(n[0][0])-a[0][0],o=e.invertX(n[1][0])-a[1][0],c=e.invertY(n[0][1])-a[0][1],u=e.invertY(n[1][1])-a[1][1];return e.translate(o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function cb(){var e=Z2,n=Q2,a=W2,s=J2,o=F2,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,g=yc,h=Hc("start","zoom","end"),p,v,y,b=500,C=150,E=0,T=10;function S(j){j.property("__zoom",F0).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",oe).filter(o).on("touchstart.zoom",W).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",ne).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(j,P,M,U){var B=j.selection?j.selection():j;B.property("__zoom",F0),j!==B?D(j,P,M,U):B.interrupt().each(function(){z(this,arguments).event(U).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},S.scaleBy=function(j,P,M,U){S.scaleTo(j,function(){var B=this.__zoom.k,X=typeof P=="function"?P.apply(this,arguments):P;return B*X},M,U)},S.scaleTo=function(j,P,M,U){S.transform(j,function(){var B=n.apply(this,arguments),X=this.__zoom,H=M==null?A(B):typeof M=="function"?M.apply(this,arguments):M,R=X.invert(H),k=typeof P=="function"?P.apply(this,arguments):P;return a(_(N(X,k),H,R),B,u)},M,U)},S.translateBy=function(j,P,M,U){S.transform(j,function(){return a(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof M=="function"?M.apply(this,arguments):M),n.apply(this,arguments),u)},null,U)},S.translateTo=function(j,P,M,U,B){S.transform(j,function(){var X=n.apply(this,arguments),H=this.__zoom,R=U==null?A(X):typeof U=="function"?U.apply(this,arguments):U;return a(Vc.translate(R[0],R[1]).scale(H.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof M=="function"?-M.apply(this,arguments):-M),X,u)},U,B)};function N(j,P){return P=Math.max(c[0],Math.min(c[1],P)),P===j.k?j:new er(P,j.x,j.y)}function _(j,P,M){var U=P[0]-M[0]*j.k,B=P[1]-M[1]*j.k;return U===j.x&&B===j.y?j:new er(j.k,U,B)}function A(j){return[(+j[0][0]+ +j[1][0])/2,(+j[0][1]+ +j[1][1])/2]}function D(j,P,M,U){j.on("start.zoom",function(){z(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(U).end()}).tween("zoom",function(){var B=this,X=arguments,H=z(B,X).event(U),R=n.apply(B,X),k=M==null?A(R):typeof M=="function"?M.apply(B,X):M,G=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),Z=B.__zoom,ie=typeof P=="function"?P.apply(B,X):P,ue=g(Z.invert(k).concat(G/Z.k),ie.invert(k).concat(G/ie.k));return function(ce){if(ce===1)ce=ie;else{var le=ue(ce),de=G/le[2];ce=new er(de,k[0]-le[0]*de,k[1]-le[1]*de)}H.zoom(null,ce)}})}function z(j,P,M){return!M&&j.__zooming||new $(j,P)}function $(j,P){this.that=j,this.args=P,this.active=0,this.sourceEvent=null,this.extent=n.apply(j,P),this.taps=0}$.prototype={event:function(j){return j&&(this.sourceEvent=j),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(j,P){return this.mouse&&j!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&j!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&j!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(j){var P=Zt(this.that).datum();h.call(j,this.that,new K2(j,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:h}),P)}};function V(j,...P){if(!e.apply(this,arguments))return;var M=z(this,P).event(j),U=this.__zoom,B=Math.max(c[0],Math.min(c[1],U.k*Math.pow(2,s.apply(this,arguments)))),X=mn(j);if(M.wheel)(M.mouse[0][0]!==X[0]||M.mouse[0][1]!==X[1])&&(M.mouse[1]=U.invert(M.mouse[0]=X)),clearTimeout(M.wheel);else{if(U.k===B)return;M.mouse=[X,U.invert(X)],wc(this),M.start()}Vi(j),M.wheel=setTimeout(H,C),M.zoom("mouse",a(_(N(U,B),M.mouse[0],M.mouse[1]),M.extent,u));function H(){M.wheel=null,M.end()}}function K(j,...P){if(y||!e.apply(this,arguments))return;var M=j.currentTarget,U=z(this,P,!0).event(j),B=Zt(j.view).on("mousemove.zoom",k,!0).on("mouseup.zoom",G,!0),X=mn(j,M),H=j.clientX,R=j.clientY;Yv(j.view),Of(j),U.mouse=[X,this.__zoom.invert(X)],wc(this),U.start();function k(Z){if(Vi(Z),!U.moved){var ie=Z.clientX-H,ue=Z.clientY-R;U.moved=ie*ie+ue*ue>E}U.event(Z).zoom("mouse",a(_(U.that.__zoom,U.mouse[0]=mn(Z,M),U.mouse[1]),U.extent,u))}function G(Z){B.on("mousemove.zoom mouseup.zoom",null),Xv(Z.view,U.moved),Vi(Z),U.event(Z).end()}}function oe(j,...P){if(e.apply(this,arguments)){var M=this.__zoom,U=mn(j.changedTouches?j.changedTouches[0]:j,this),B=M.invert(U),X=M.k*(j.shiftKey?.5:2),H=a(_(N(M,X),U,B),n.apply(this,P),u);Vi(j),d>0?Zt(this).transition().duration(d).call(D,H,U,j):Zt(this).call(S.transform,H,U,j)}}function W(j,...P){if(e.apply(this,arguments)){var M=j.touches,U=M.length,B=z(this,P,j.changedTouches.length===U).event(j),X,H,R,k;for(Of(j),H=0;H<U;++H)R=M[H],k=mn(R,this),k=[k,this.__zoom.invert(k),R.identifier],B.touch0?!B.touch1&&B.touch0[2]!==k[2]&&(B.touch1=k,B.taps=0):(B.touch0=k,X=!0,B.taps=1+!!p);p&&(p=clearTimeout(p)),X&&(B.taps<2&&(v=k[0],p=setTimeout(function(){p=null},b)),wc(this),B.start())}}function ee(j,...P){if(this.__zooming){var M=z(this,P).event(j),U=j.changedTouches,B=U.length,X,H,R,k;for(Vi(j),X=0;X<B;++X)H=U[X],R=mn(H,this),M.touch0&&M.touch0[2]===H.identifier?M.touch0[0]=R:M.touch1&&M.touch1[2]===H.identifier&&(M.touch1[0]=R);if(H=M.that.__zoom,M.touch1){var G=M.touch0[0],Z=M.touch0[1],ie=M.touch1[0],ue=M.touch1[1],ce=(ce=ie[0]-G[0])*ce+(ce=ie[1]-G[1])*ce,le=(le=ue[0]-Z[0])*le+(le=ue[1]-Z[1])*le;H=N(H,Math.sqrt(ce/le)),R=[(G[0]+ie[0])/2,(G[1]+ie[1])/2],k=[(Z[0]+ue[0])/2,(Z[1]+ue[1])/2]}else if(M.touch0)R=M.touch0[0],k=M.touch0[1];else return;M.zoom("touch",a(_(H,R,k),M.extent,u))}}function ne(j,...P){if(this.__zooming){var M=z(this,P).event(j),U=j.changedTouches,B=U.length,X,H;for(Of(j),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),X=0;X<B;++X)H=U[X],M.touch0&&M.touch0[2]===H.identifier?delete M.touch0:M.touch1&&M.touch1[2]===H.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(H=mn(H,this),Math.hypot(v[0]-H[0],v[1]-H[1])<T)){var R=Zt(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return S.wheelDelta=function(j){return arguments.length?(s=typeof j=="function"?j:nc(+j),S):s},S.filter=function(j){return arguments.length?(e=typeof j=="function"?j:nc(!!j),S):e},S.touchable=function(j){return arguments.length?(o=typeof j=="function"?j:nc(!!j),S):o},S.extent=function(j){return arguments.length?(n=typeof j=="function"?j:nc([[+j[0][0],+j[0][1]],[+j[1][0],+j[1][1]]]),S):n},S.scaleExtent=function(j){return arguments.length?(c[0]=+j[0],c[1]=+j[1],S):[c[0],c[1]]},S.translateExtent=function(j){return arguments.length?(u[0][0]=+j[0][0],u[1][0]=+j[1][0],u[0][1]=+j[0][1],u[1][1]=+j[1][1],S):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},S.constrain=function(j){return arguments.length?(a=j,S):a},S.duration=function(j){return arguments.length?(d=+j,S):d},S.interpolate=function(j){return arguments.length?(g=j,S):g},S.on=function(){var j=h.on.apply(h,arguments);return j===h?S:j},S.clickDistance=function(j){return arguments.length?(E=(j=+j)*j,S):Math.sqrt(E)},S.tapDistance=function(j){return arguments.length?(T=+j,S):T},S}const On={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:a,targetHandle:s})=>`Couldn't create edge for ${e} handle id: "${e==="source"?a:s}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},no=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ub=["Enter"," ","Escape"],db={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:a})=>`Moved selected node ${e}. New position, x: ${n}, y: ${a}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Bs;(function(e){e.Strict="strict",e.Loose="loose"})(Bs||(Bs={}));var Sa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Sa||(Sa={}));var ro;(function(e){e.Partial="partial",e.Full="full"})(ro||(ro={}));const fb={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Lr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Lr||(Lr={}));var Ea;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ea||(Ea={}));var he;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(he||(he={}));const W0={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function hb(e){return e===null?null:e?"valid":"invalid"}const gb=e=>"id"in e&&"source"in e&&"target"in e,eT=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Rh=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),bo=(e,n=[0,0])=>{const{width:a,height:s}=nr(e),o=e.origin??n,c=a*o[0],u=s*o[1];return{x:e.position.x-c,y:e.position.y-u}},tT=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const a=e.reduce((s,o)=>{const c=typeof o=="string";let u=!n.nodeLookup&&!c?o:void 0;n.nodeLookup&&(u=c?n.nodeLookup.get(o):Rh(o)?o:n.nodeLookup.get(o.id));const d=u?Mc(u,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Pc(s,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Gc(a)},wo=(e,n={})=>{let a={x:1/0,y:1/0,x2:-1/0,y2:-1/0},s=!1;return e.forEach(o=>{(n.filter===void 0||n.filter(o))&&(a=Pc(a,Mc(o)),s=!0)}),s?Gc(a):{x:0,y:0,width:0,height:0}},Mh=(e,n,[a,s,o]=[0,0,1],c=!1,u=!1)=>{const d={..._o(n,[a,s,o]),width:n.width/o,height:n.height/o},g=[];for(const h of e.values()){const{measured:p,selectable:v=!0,hidden:y=!1}=h;if(u&&!v||y)continue;const b=p.width??h.width??h.initialWidth??null,C=p.height??h.height??h.initialHeight??null,E=ao(d,qs(h)),T=(b??0)*(C??0),S=c&&E>0;(!h.internals.handleBounds||S||E>=T||h.dragging)&&g.push(h)}return g},nT=(e,n)=>{const a=new Set;return e.forEach(s=>{a.add(s.id)}),n.filter(s=>a.has(s.source)||a.has(s.target))};function rT(e,n){const a=new Map,s=n?.nodes?new Set(n.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(n?.includeHiddenNodes||!o.hidden)&&(!s||s.has(o.id))&&a.set(o.id,o)}),a}async function aT({nodes:e,width:n,height:a,panZoom:s,minZoom:o,maxZoom:c},u){if(e.size===0)return Promise.resolve(!0);const d=rT(e,u),g=wo(d),h=kh(g,n,a,u?.minZoom??o,u?.maxZoom??c,u?.padding??.1);return await s.setViewport(h,{duration:u?.duration,ease:u?.ease,interpolate:u?.interpolate}),Promise.resolve(!0)}function mb({nodeId:e,nextPosition:n,nodeLookup:a,nodeOrigin:s=[0,0],nodeExtent:o,onError:c}){const u=a.get(e),d=u.parentId?a.get(u.parentId):void 0,{x:g,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},p=u.origin??s;let v=u.extent||o;if(u.extent==="parent"&&!u.expandParent)if(!d)c?.("005",On.error005());else{const b=d.measured.width,C=d.measured.height;b&&C&&(v=[[g,h],[g+b,h+C]])}else d&&Vs(u.extent)&&(v=[[u.extent[0][0]+g,u.extent[0][1]+h],[u.extent[1][0]+g,u.extent[1][1]+h]]);const y=Vs(v)?Aa(n,v,u.measured):n;return(u.measured.width===void 0||u.measured.height===void 0)&&c?.("015",On.error015()),{position:{x:y.x-g+(u.measured.width??0)*p[0],y:y.y-h+(u.measured.height??0)*p[1]},positionAbsolute:y}}async function sT({nodesToRemove:e=[],edgesToRemove:n=[],nodes:a,edges:s,onBeforeDelete:o}){const c=new Set(e.map(y=>y.id)),u=[];for(const y of a){if(y.deletable===!1)continue;const b=c.has(y.id),C=!b&&y.parentId&&u.find(E=>E.id===y.parentId);(b||C)&&u.push(y)}const d=new Set(n.map(y=>y.id)),g=s.filter(y=>y.deletable!==!1),p=nT(u,g);for(const y of g)d.has(y.id)&&!p.find(C=>C.id===y.id)&&p.push(y);if(!o)return{edges:p,nodes:u};const v=await o({nodes:u,edges:p});return typeof v=="boolean"?v?{edges:p,nodes:u}:{edges:[],nodes:[]}:v}const Is=(e,n=0,a=1)=>Math.min(Math.max(e,n),a),Aa=(e={x:0,y:0},n,a)=>({x:Is(e.x,n[0][0],n[1][0]-(a?.width??0)),y:Is(e.y,n[0][1],n[1][1]-(a?.height??0))});function pb(e,n,a){const{width:s,height:o}=nr(a),{x:c,y:u}=a.internals.positionAbsolute;return Aa(e,[[c,u],[c+s,u+o]],n)}const ey=(e,n,a)=>e<n?Is(Math.abs(e-n),1,n)/n:e>a?-Is(Math.abs(e-a),1,n)/n:0,yb=(e,n,a=15,s=40)=>{const o=ey(e.x,s,n.width-s)*a,c=ey(e.y,s,n.height-s)*a;return[o,c]},Pc=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),ah=({x:e,y:n,width:a,height:s})=>({x:e,y:n,x2:e+a,y2:n+s}),Gc=({x:e,y:n,x2:a,y2:s})=>({x:e,y:n,width:a-e,height:s-n}),qs=(e,n=[0,0])=>{const{x:a,y:s}=Rh(e)?e.internals.positionAbsolute:bo(e,n);return{x:a,y:s,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Mc=(e,n=[0,0])=>{const{x:a,y:s}=Rh(e)?e.internals.positionAbsolute:bo(e,n);return{x:a,y:s,x2:a+(e.measured?.width??e.width??e.initialWidth??0),y2:s+(e.measured?.height??e.height??e.initialHeight??0)}},vb=(e,n)=>Gc(Pc(ah(e),ah(n))),ao=(e,n)=>{const a=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),s=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(a*s)},ty=e=>vn(e.width)&&vn(e.height)&&vn(e.x)&&vn(e.y),vn=e=>!isNaN(e)&&isFinite(e),iT=(e,n)=>{},xo=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),_o=({x:e,y:n},[a,s,o],c=!1,u=[1,1])=>{const d={x:(e-a)/o,y:(n-s)/o};return c?xo(d,u):d},kc=({x:e,y:n},[a,s,o])=>({x:e*o+a,y:n*o+s});function bs(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const a=parseFloat(e);if(!Number.isNaN(a))return Math.floor(a)}if(typeof e=="string"&&e.endsWith("%")){const a=parseFloat(e);if(!Number.isNaN(a))return Math.floor(n*a*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function oT(e,n,a){if(typeof e=="string"||typeof e=="number"){const s=bs(e,a),o=bs(e,n);return{top:s,right:o,bottom:s,left:o,x:o*2,y:s*2}}if(typeof e=="object"){const s=bs(e.top??e.y??0,a),o=bs(e.bottom??e.y??0,a),c=bs(e.left??e.x??0,n),u=bs(e.right??e.x??0,n);return{top:s,right:u,bottom:o,left:c,x:c+u,y:s+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function lT(e,n,a,s,o,c){const{x:u,y:d}=kc(e,[n,a,s]),{x:g,y:h}=kc({x:e.x+e.width,y:e.y+e.height},[n,a,s]),p=o-g,v=c-h;return{left:Math.floor(u),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(v)}}const kh=(e,n,a,s,o,c)=>{const u=oT(c,n,a),d=(n-u.x)/e.width,g=(a-u.y)/e.height,h=Math.min(d,g),p=Is(h,s,o),v=e.x+e.width/2,y=e.y+e.height/2,b=n/2-v*p,C=a/2-y*p,E=lT(e,b,C,p,n,a),T={left:Math.min(E.left-u.left,0),top:Math.min(E.top-u.top,0),right:Math.min(E.right-u.right,0),bottom:Math.min(E.bottom-u.bottom,0)};return{x:b-T.left+T.right,y:C-T.top+T.bottom,zoom:p}},so=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Vs(e){return e!=null&&e!=="parent"}function nr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function bb(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function wb(e,n={width:0,height:0},a,s,o){const c={...e},u=s.get(a);if(u){const d=u.origin||o;c.x+=u.internals.positionAbsolute.x-(n.width??0)*d[0],c.y+=u.internals.positionAbsolute.y-(n.height??0)*d[1]}return c}function ny(e,n){if(e.size!==n.size)return!1;for(const a of e)if(!n.has(a))return!1;return!0}function cT(){let e,n;return{promise:new Promise((s,o)=>{e=s,n=o}),resolve:e,reject:n}}function uT(e){return{...db,...e||{}}}function Zi(e,{snapGrid:n=[0,0],snapToGrid:a=!1,transform:s,containerBounds:o}){const{x:c,y:u}=bn(e),d=_o({x:c-(o?.left??0),y:u-(o?.top??0)},s),{x:g,y:h}=a?xo(d,n):d;return{xSnapped:g,ySnapped:h,...d}}const jh=e=>({width:e.offsetWidth,height:e.offsetHeight}),xb=e=>e?.getRootNode?.()||window?.document,dT=["INPUT","SELECT","TEXTAREA"];function _b(e){const n=e.composedPath?.()?.[0]||e.target;return n?.nodeType!==1?!1:dT.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const Sb=e=>"clientX"in e,bn=(e,n)=>{const a=Sb(e),s=a?e.clientX:e.touches?.[0].clientX,o=a?e.clientY:e.touches?.[0].clientY;return{x:s-(n?.left??0),y:o-(n?.top??0)}},ry=(e,n,a,s,o)=>{const c=n.querySelectorAll(`.${e}`);return!c||!c.length?null:Array.from(c).map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:o,position:u.getAttribute("data-handlepos"),x:(d.left-a.left)/s,y:(d.top-a.top)/s,...jh(u)}})};function Eb({sourceX:e,sourceY:n,targetX:a,targetY:s,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d}){const g=e*.125+o*.375+u*.375+a*.125,h=n*.125+c*.375+d*.375+s*.125,p=Math.abs(g-e),v=Math.abs(h-n);return[g,h,p,v]}function rc(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function ay({pos:e,x1:n,y1:a,x2:s,y2:o,c}){switch(e){case he.Left:return[n-rc(n-s,c),a];case he.Right:return[n+rc(s-n,c),a];case he.Top:return[n,a-rc(a-o,c)];case he.Bottom:return[n,a+rc(o-a,c)]}}function Tb({sourceX:e,sourceY:n,sourcePosition:a=he.Bottom,targetX:s,targetY:o,targetPosition:c=he.Top,curvature:u=.25}){const[d,g]=ay({pos:a,x1:e,y1:n,x2:s,y2:o,c:u}),[h,p]=ay({pos:c,x1:s,y1:o,x2:e,y2:n,c:u}),[v,y,b,C]=Eb({sourceX:e,sourceY:n,targetX:s,targetY:o,sourceControlX:d,sourceControlY:g,targetControlX:h,targetControlY:p});return[`M${e},${n} C${d},${g} ${h},${p} ${s},${o}`,v,y,b,C]}function Cb({sourceX:e,sourceY:n,targetX:a,targetY:s}){const o=Math.abs(a-e)/2,c=a<e?a+o:a-o,u=Math.abs(s-n)/2,d=s<n?s+u:s-u;return[c,d,o,u]}function fT({sourceNode:e,targetNode:n,selected:a=!1,zIndex:s,elevateOnSelect:o=!1}){if(s!==void 0)return s;const c=o&&a?1e3:0,u=Math.max(e.parentId||o&&e.selected?e.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return c+u}function hT({sourceNode:e,targetNode:n,width:a,height:s,transform:o}){const c=Pc(Mc(e),Mc(n));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u={x:-o[0]/o[2],y:-o[1]/o[2],width:a/o[2],height:s/o[2]};return ao(u,Gc(c))>0}const gT=({source:e,sourceHandle:n,target:a,targetHandle:s})=>`xy-edge__${e}${n||""}-${a}${s||""}`,mT=(e,n)=>n.some(a=>a.source===e.source&&a.target===e.target&&(a.sourceHandle===e.sourceHandle||!a.sourceHandle&&!e.sourceHandle)&&(a.targetHandle===e.targetHandle||!a.targetHandle&&!e.targetHandle)),Ab=(e,n)=>{if(!e.source||!e.target)return n;let a;return gb(e)?a={...e}:a={...e,id:gT(e)},mT(a,n)?n:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,n.concat(a))};function Nb({sourceX:e,sourceY:n,targetX:a,targetY:s}){const[o,c,u,d]=Cb({sourceX:e,sourceY:n,targetX:a,targetY:s});return[`M ${e},${n}L ${a},${s}`,o,c,u,d]}const sy={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},pT=({source:e,sourcePosition:n=he.Bottom,target:a})=>n===he.Left||n===he.Right?e.x<a.x?{x:1,y:0}:{x:-1,y:0}:e.y<a.y?{x:0,y:1}:{x:0,y:-1},iy=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function yT({source:e,sourcePosition:n=he.Bottom,target:a,targetPosition:s=he.Top,center:o,offset:c,stepPosition:u}){const d=sy[n],g=sy[s],h={x:e.x+d.x*c,y:e.y+d.y*c},p={x:a.x+g.x*c,y:a.y+g.y*c},v=pT({source:h,sourcePosition:n,target:p}),y=v.x!==0?"x":"y",b=v[y];let C=[],E,T;const S={x:0,y:0},N={x:0,y:0},[,,_,A]=Cb({sourceX:e.x,sourceY:e.y,targetX:a.x,targetY:a.y});if(d[y]*g[y]===-1){y==="x"?(E=o.x??h.x+(p.x-h.x)*u,T=o.y??(h.y+p.y)/2):(E=o.x??(h.x+p.x)/2,T=o.y??h.y+(p.y-h.y)*u);const z=[{x:E,y:h.y},{x:E,y:p.y}],$=[{x:h.x,y:T},{x:p.x,y:T}];d[y]===b?C=y==="x"?z:$:C=y==="x"?$:z}else{const z=[{x:h.x,y:p.y}],$=[{x:p.x,y:h.y}];if(y==="x"?C=d.x===b?$:z:C=d.y===b?z:$,n===s){const ee=Math.abs(e[y]-a[y]);if(ee<=c){const ne=Math.min(c-1,c-ee);d[y]===b?S[y]=(h[y]>e[y]?-1:1)*ne:N[y]=(p[y]>a[y]?-1:1)*ne}}if(n!==s){const ee=y==="x"?"y":"x",ne=d[y]===g[ee],j=h[ee]>p[ee],P=h[ee]<p[ee];(d[y]===1&&(!ne&&j||ne&&P)||d[y]!==1&&(!ne&&P||ne&&j))&&(C=y==="x"?z:$)}const V={x:h.x+S.x,y:h.y+S.y},K={x:p.x+N.x,y:p.y+N.y},oe=Math.max(Math.abs(V.x-C[0].x),Math.abs(K.x-C[0].x)),W=Math.max(Math.abs(V.y-C[0].y),Math.abs(K.y-C[0].y));oe>=W?(E=(V.x+K.x)/2,T=C[0].y):(E=C[0].x,T=(V.y+K.y)/2)}return[[e,{x:h.x+S.x,y:h.y+S.y},...C,{x:p.x+N.x,y:p.y+N.y},a],E,T,_,A]}function vT(e,n,a,s){const o=Math.min(iy(e,n)/2,iy(n,a)/2,s),{x:c,y:u}=n;if(e.x===c&&c===a.x||e.y===u&&u===a.y)return`L${c} ${u}`;if(e.y===u){const h=e.x<a.x?-1:1,p=e.y<a.y?1:-1;return`L ${c+o*h},${u}Q ${c},${u} ${c},${u+o*p}`}const d=e.x<a.x?1:-1,g=e.y<a.y?-1:1;return`L ${c},${u+o*g}Q ${c},${u} ${c+o*d},${u}`}function sh({sourceX:e,sourceY:n,sourcePosition:a=he.Bottom,targetX:s,targetY:o,targetPosition:c=he.Top,borderRadius:u=5,centerX:d,centerY:g,offset:h=20,stepPosition:p=.5}){const[v,y,b,C,E]=yT({source:{x:e,y:n},sourcePosition:a,target:{x:s,y:o},targetPosition:c,center:{x:d,y:g},offset:h,stepPosition:p});return[v.reduce((S,N,_)=>{let A="";return _>0&&_<v.length-1?A=vT(v[_-1],N,v[_+1],u):A=`${_===0?"M":"L"}${N.x} ${N.y}`,S+=A,S},""),y,b,C,E]}function oy(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function bT(e){const{sourceNode:n,targetNode:a}=e;if(!oy(n)||!oy(a))return null;const s=n.internals.handleBounds||ly(n.handles),o=a.internals.handleBounds||ly(a.handles),c=cy(s?.source??[],e.sourceHandle),u=cy(e.connectionMode===Bs.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!c||!u)return e.onError?.("008",On.error008(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=c?.position||he.Bottom,g=u?.position||he.Top,h=io(n,c,d),p=io(a,u,g);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:g}}function ly(e){if(!e)return null;const n=[],a=[];for(const s of e)s.width=s.width??1,s.height=s.height??1,s.type==="source"?n.push(s):s.type==="target"&&a.push(s);return{source:n,target:a}}function io(e,n,a=he.Left,s=!1){const o=(n?.x??0)+e.internals.positionAbsolute.x,c=(n?.y??0)+e.internals.positionAbsolute.y,{width:u,height:d}=n??nr(e);if(s)return{x:o+u/2,y:c+d/2};switch(n?.position??a){case he.Top:return{x:o+u/2,y:c};case he.Right:return{x:o+u,y:c+d/2};case he.Bottom:return{x:o+u/2,y:c+d};case he.Left:return{x:o,y:c+d/2}}}function cy(e,n){return e&&(n?e.find(a=>a.id===n):e[0])||null}function ih(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`:""}function wT(e,{id:n,defaultColor:a,defaultMarkerStart:s,defaultMarkerEnd:o}){const c=new Set;return e.reduce((u,d)=>([d.markerStart||s,d.markerEnd||o].forEach(g=>{if(g&&typeof g=="object"){const h=ih(g,n);c.has(h)||(u.push({id:h,color:g.color||a,...g}),c.add(h))}}),u),[]).sort((u,d)=>u.id.localeCompare(d.id))}const Ob=1e3,xT=10,Dh={nodeOrigin:[0,0],nodeExtent:no,elevateNodesOnSelect:!0,defaults:{}},_T={...Dh,checkEquality:!0};function zh(e,n){const a={...e};for(const s in n)n[s]!==void 0&&(a[s]=n[s]);return a}function ST(e,n,a){const s=zh(Dh,a);for(const o of e.values())if(o.parentId)$h(o,e,n,s);else{const c=bo(o,s.nodeOrigin),u=Vs(o.extent)?o.extent:s.nodeExtent,d=Aa(c,u,nr(o));o.internals.positionAbsolute=d}}function ET(e,n){if(!e.handles)return e.measured?n?.internals.handleBounds:void 0;const a=[],s=[];for(const o of e.handles){const c={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?a.push(c):o.type==="target"&&s.push(c)}return{source:a,target:s}}function oh(e,n,a,s){const o=zh(_T,s);let c={i:-1},u=e.length>0;const d=new Map(n),g=o?.elevateNodesOnSelect?Ob:0;n.clear(),a.clear();for(const h of e){let p=d.get(h.id);if(o.checkEquality&&h===p?.internals.userNode)n.set(h.id,p);else{const v=bo(h,o.nodeOrigin),y=Vs(h.extent)?h.extent:o.nodeExtent,b=Aa(v,y,nr(h));p={...o.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:b,handleBounds:ET(h,p),z:Rb(h,g),userNode:h}},n.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(u=!1),h.parentId&&$h(p,n,a,s,c)}return u}function TT(e,n){if(!e.parentId)return;const a=n.get(e.parentId);a?a.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function $h(e,n,a,s,o){const{elevateNodesOnSelect:c,nodeOrigin:u,nodeExtent:d}=zh(Dh,s),g=e.parentId,h=n.get(g);if(!h){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}TT(e,a),o&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++o.i,h.internals.z=h.internals.z+o.i*xT),o&&h.internals.rootParentIndex!==void 0&&(o.i=h.internals.rootParentIndex);const p=c?Ob:0,{x:v,y,z:b}=CT(e,h,u,d,p),{positionAbsolute:C}=e.internals,E=v!==C.x||y!==C.y;(E||b!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:E?{x:v,y}:C,z:b}})}function Rb(e,n){return(vn(e.zIndex)?e.zIndex:0)+(e.selected?n:0)}function CT(e,n,a,s,o){const{x:c,y:u}=n.internals.positionAbsolute,d=nr(e),g=bo(e,a),h=Vs(e.extent)?Aa(g,e.extent,d):g;let p=Aa({x:c+h.x,y:u+h.y},s,d);e.extent==="parent"&&(p=pb(p,d,n));const v=Rb(e,o),y=n.internals.z??0;return{x:p.x,y:p.y,z:y>=v?y+1:v}}function Uh(e,n,a,s=[0,0]){const o=[],c=new Map;for(const u of e){const d=n.get(u.parentId);if(!d)continue;const g=c.get(u.parentId)?.expandedRect??qs(d),h=vb(g,u.rect);c.set(u.parentId,{expandedRect:h,parent:d})}return c.size>0&&c.forEach(({expandedRect:u,parent:d},g)=>{const h=d.internals.positionAbsolute,p=nr(d),v=d.origin??s,y=u.x<h.x?Math.round(Math.abs(h.x-u.x)):0,b=u.y<h.y?Math.round(Math.abs(h.y-u.y)):0,C=Math.max(p.width,Math.round(u.width)),E=Math.max(p.height,Math.round(u.height)),T=(C-p.width)*v[0],S=(E-p.height)*v[1];(y>0||b>0||T||S)&&(o.push({id:g,type:"position",position:{x:d.position.x-y+T,y:d.position.y-b+S}}),a.get(g)?.forEach(N=>{e.some(_=>_.id===N.id)||o.push({id:N.id,type:"position",position:{x:N.position.x+y,y:N.position.y+b}})})),(p.width<u.width||p.height<u.height||y||b)&&o.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:C+(y?v[0]*y-T:0),height:E+(b?v[1]*b-S:0)}})}),o}function AT(e,n,a,s,o,c){const u=s?.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const g=[],h=window.getComputedStyle(u),{m22:p}=new window.DOMMatrixReadOnly(h.transform),v=[];for(const y of e.values()){const b=n.get(y.id);if(!b)continue;if(b.hidden){n.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const C=jh(y.nodeElement),E=b.measured.width!==C.width||b.measured.height!==C.height;if(!!(C.width&&C.height&&(E||!b.internals.handleBounds||y.force))){const S=y.nodeElement.getBoundingClientRect(),N=Vs(b.extent)?b.extent:c;let{positionAbsolute:_}=b.internals;b.parentId&&b.extent==="parent"?_=pb(_,C,n.get(b.parentId)):N&&(_=Aa(_,N,C));const A={...b,measured:C,internals:{...b.internals,positionAbsolute:_,handleBounds:{source:ry("source",y.nodeElement,S,p,b.id),target:ry("target",y.nodeElement,S,p,b.id)}}};n.set(b.id,A),b.parentId&&$h(A,n,a,{nodeOrigin:o}),d=!0,E&&(g.push({id:b.id,type:"dimensions",dimensions:C}),b.expandParent&&b.parentId&&v.push({id:b.id,parentId:b.parentId,rect:qs(A,o)}))}}if(v.length>0){const y=Uh(v,n,a,o);g.push(...y)}return{changes:g,updatedInternals:d}}async function NT({delta:e,panZoom:n,transform:a,translateExtent:s,width:o,height:c}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const u=await n.setViewportConstrained({x:a[0]+e.x,y:a[1]+e.y,zoom:a[2]},[[0,0],[o,c]],s),d=!!u&&(u.x!==a[0]||u.y!==a[1]||u.k!==a[2]);return Promise.resolve(d)}function uy(e,n,a,s,o,c){let u=o;const d=s.get(u)||new Map;s.set(u,d.set(a,n)),u=`${o}-${e}`;const g=s.get(u)||new Map;if(s.set(u,g.set(a,n)),c){u=`${o}-${e}-${c}`;const h=s.get(u)||new Map;s.set(u,h.set(a,n))}}function Mb(e,n,a){e.clear(),n.clear();for(const s of a){const{source:o,target:c,sourceHandle:u=null,targetHandle:d=null}=s,g={edgeId:s.id,source:o,target:c,sourceHandle:u,targetHandle:d},h=`${o}-${u}--${c}-${d}`,p=`${c}-${d}--${o}-${u}`;uy("source",g,p,e,o,u),uy("target",g,h,e,c,d),n.set(s.id,s)}}function kb(e,n){if(!e.parentId)return!1;const a=n.get(e.parentId);return a?a.selected?!0:kb(a,n):!1}function dy(e,n,a){let s=e;do{if(s?.matches?.(n))return!0;if(s===a)return!1;s=s?.parentElement}while(s);return!1}function OT(e,n,a,s){const o=new Map;for(const[c,u]of e)if((u.selected||u.id===s)&&(!u.parentId||!kb(u,e))&&(u.draggable||n&&typeof u.draggable>"u")){const d=e.get(c);d&&o.set(c,{id:c,position:d.position||{x:0,y:0},distance:{x:a.x-d.internals.positionAbsolute.x,y:a.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return o}function Rf({nodeId:e,dragItems:n,nodeLookup:a,dragging:s=!0}){const o=[];for(const[u,d]of n){const g=a.get(u)?.internals.userNode;g&&o.push({...g,position:d.position,dragging:s})}if(!e)return[o[0],o];const c=a.get(e)?.internals.userNode;return[c?{...c,position:n.get(e)?.position||c.position,dragging:s}:o[0],o]}function RT({dragItems:e,snapGrid:n,x:a,y:s}){const o=e.values().next().value;if(!o)return null;const c={x:a-o.distance.x,y:s-o.distance.y},u=xo(c,n);return{x:u.x-c.x,y:u.y-c.y}}function MT({onNodeMouseDown:e,getStoreItems:n,onDragStart:a,onDrag:s,onDragStop:o}){let c={x:null,y:null},u=0,d=new Map,g=!1,h={x:0,y:0},p=null,v=!1,y=null,b=!1,C=!1,E=null;function T({noDragClassName:N,handleSelector:_,domNode:A,isSelectable:D,nodeId:z,nodeClickDistance:$=0}){y=Zt(A);function V({x:ee,y:ne}){const{nodeLookup:j,nodeExtent:P,snapGrid:M,snapToGrid:U,nodeOrigin:B,onNodeDrag:X,onSelectionDrag:H,onError:R,updateNodePositions:k}=n();c={x:ee,y:ne};let G=!1;const Z=d.size>1,ie=Z&&P?ah(wo(d)):null,ue=Z&&U?RT({dragItems:d,snapGrid:M,x:ee,y:ne}):null;for(const[ce,le]of d){if(!j.has(ce))continue;let de={x:ee-le.distance.x,y:ne-le.distance.y};U&&(de=ue?{x:Math.round(de.x+ue.x),y:Math.round(de.y+ue.y)}:xo(de,M));let Te=null;if(Z&&P&&!le.extent&&ie){const{positionAbsolute:_e}=le.internals,Ce=_e.x-ie.x+P[0][0],Ie=_e.x+le.measured.width-ie.x2+P[1][0],Ge=_e.y-ie.y+P[0][1],mt=_e.y+le.measured.height-ie.y2+P[1][1];Te=[[Ce,Ge],[Ie,mt]]}const{position:Se,positionAbsolute:ye}=mb({nodeId:ce,nextPosition:de,nodeLookup:j,nodeExtent:Te||P,nodeOrigin:B,onError:R});G=G||le.position.x!==Se.x||le.position.y!==Se.y,le.position=Se,le.internals.positionAbsolute=ye}if(C=C||G,!!G&&(k(d,!0),E&&(s||X||!z&&H))){const[ce,le]=Rf({nodeId:z,dragItems:d,nodeLookup:j});s?.(E,d,ce,le),X?.(E,ce,le),z||H?.(E,le)}}async function K(){if(!p)return;const{transform:ee,panBy:ne,autoPanSpeed:j,autoPanOnNodeDrag:P}=n();if(!P){g=!1,cancelAnimationFrame(u);return}const[M,U]=yb(h,p,j);(M!==0||U!==0)&&(c.x=(c.x??0)-M/ee[2],c.y=(c.y??0)-U/ee[2],await ne({x:M,y:U})&&V(c)),u=requestAnimationFrame(K)}function oe(ee){const{nodeLookup:ne,multiSelectionActive:j,nodesDraggable:P,transform:M,snapGrid:U,snapToGrid:B,selectNodesOnDrag:X,onNodeDragStart:H,onSelectionDragStart:R,unselectNodesAndEdges:k}=n();v=!0,(!X||!D)&&!j&&z&&(ne.get(z)?.selected||k()),D&&X&&z&&e?.(z);const G=Zi(ee.sourceEvent,{transform:M,snapGrid:U,snapToGrid:B,containerBounds:p});if(c=G,d=OT(ne,P,G,z),d.size>0&&(a||H||!z&&R)){const[Z,ie]=Rf({nodeId:z,dragItems:d,nodeLookup:ne});a?.(ee.sourceEvent,d,Z,ie),H?.(ee.sourceEvent,Z,ie),z||R?.(ee.sourceEvent,ie)}}const W=Kv().clickDistance($).on("start",ee=>{const{domNode:ne,nodeDragThreshold:j,transform:P,snapGrid:M,snapToGrid:U}=n();p=ne?.getBoundingClientRect()||null,b=!1,C=!1,E=ee.sourceEvent,j===0&&oe(ee),c=Zi(ee.sourceEvent,{transform:P,snapGrid:M,snapToGrid:U,containerBounds:p}),h=bn(ee.sourceEvent,p)}).on("drag",ee=>{const{autoPanOnNodeDrag:ne,transform:j,snapGrid:P,snapToGrid:M,nodeDragThreshold:U,nodeLookup:B}=n(),X=Zi(ee.sourceEvent,{transform:j,snapGrid:P,snapToGrid:M,containerBounds:p});if(E=ee.sourceEvent,(ee.sourceEvent.type==="touchmove"&&ee.sourceEvent.touches.length>1||z&&!B.has(z))&&(b=!0),!b){if(!g&&ne&&v&&(g=!0,K()),!v){const H=bn(ee.sourceEvent,p),R=H.x-h.x,k=H.y-h.y;Math.sqrt(R*R+k*k)>U&&oe(ee)}(c.x!==X.xSnapped||c.y!==X.ySnapped)&&d&&v&&(h=bn(ee.sourceEvent,p),V(X))}}).on("end",ee=>{if(!(!v||b)&&(g=!1,v=!1,cancelAnimationFrame(u),d.size>0)){const{nodeLookup:ne,updateNodePositions:j,onNodeDragStop:P,onSelectionDragStop:M}=n();if(C&&(j(d,!1),C=!1),o||P||!z&&M){const[U,B]=Rf({nodeId:z,dragItems:d,nodeLookup:ne,dragging:!1});o?.(ee.sourceEvent,d,U,B),P?.(ee.sourceEvent,U,B),z||M?.(ee.sourceEvent,B)}}}).filter(ee=>{const ne=ee.target;return!ee.button&&(!N||!dy(ne,`.${N}`,A))&&(!_||dy(ne,_,A))});y.call(W)}function S(){y?.on(".drag",null)}return{update:T,destroy:S}}function kT(e,n,a){const s=[],o={x:e.x-a,y:e.y-a,width:a*2,height:a*2};for(const c of n.values())ao(o,qs(c))>0&&s.push(c);return s}const jT=250;function DT(e,n,a,s){let o=[],c=1/0;const u=kT(e,a,n+jT);for(const d of u){const g=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of g){if(s.nodeId===h.nodeId&&s.type===h.type&&s.id===h.id)continue;const{x:p,y:v}=io(d,h,h.position,!0),y=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(v-e.y,2));y>n||(y<c?(o=[{...h,x:p,y:v}],c=y):y===c&&o.push({...h,x:p,y:v}))}}if(!o.length)return null;if(o.length>1){const d=s.type==="source"?"target":"source";return o.find(g=>g.type===d)??o[0]}return o[0]}function jb(e,n,a,s,o,c=!1){const u=s.get(e);if(!u)return null;const d=o==="strict"?u.internals.handleBounds?.[n]:[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]],g=(a?d?.find(h=>h.id===a):d?.[0])??null;return g&&c?{...g,...io(u,g,g.position,!0)}:g}function Db(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function zT(e,n){let a=null;return n?a=!0:e&&!n&&(a=!1),a}const zb=()=>!0;function $T(e,{connectionMode:n,connectionRadius:a,handleId:s,nodeId:o,edgeUpdaterType:c,isTarget:u,domNode:d,nodeLookup:g,lib:h,autoPanOnConnect:p,flowId:v,panBy:y,cancelConnection:b,onConnectStart:C,onConnect:E,onConnectEnd:T,isValidConnection:S=zb,onReconnectEnd:N,updateConnection:_,getTransform:A,getFromHandle:D,autoPanSpeed:z,dragThreshold:$=1,handleDomNode:V}){const K=xb(e.target);let oe=0,W;const{x:ee,y:ne}=bn(e),j=Db(c,V),P=d?.getBoundingClientRect();let M=!1;if(!P||!j)return;const U=jb(o,j,s,g,n);if(!U)return;let B=bn(e,P),X=!1,H=null,R=!1,k=null;function G(){if(!p||!P)return;const[Se,ye]=yb(B,P,z);y({x:Se,y:ye}),oe=requestAnimationFrame(G)}const Z={...U,nodeId:o,type:j,position:U.position},ie=g.get(o);let ce={inProgress:!0,isValid:null,from:io(ie,Z,he.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:ie,to:B,toHandle:null,toPosition:W0[Z.position],toNode:null};function le(){M=!0,_(ce),C?.(e,{nodeId:o,handleId:s,handleType:j})}$===0&&le();function de(Se){if(!M){const{x:Ie,y:Ge}=bn(Se),mt=Ie-ee,Ft=Ge-ne;if(!(mt*mt+Ft*Ft>$*$))return;le()}if(!D()||!Z){Te(Se);return}const ye=A();B=bn(Se,P),W=DT(_o(B,ye,!1,[1,1]),a,g,Z),X||(G(),X=!0);const _e=$b(Se,{handle:W,connectionMode:n,fromNodeId:o,fromHandleId:s,fromType:u?"target":"source",isValidConnection:S,doc:K,lib:h,flowId:v,nodeLookup:g});k=_e.handleDomNode,H=_e.connection,R=zT(!!W,_e.isValid);const Ce={...ce,isValid:R,to:_e.toHandle&&R?kc({x:_e.toHandle.x,y:_e.toHandle.y},ye):B,toHandle:_e.toHandle,toPosition:R&&_e.toHandle?_e.toHandle.position:W0[Z.position],toNode:_e.toHandle?g.get(_e.toHandle.nodeId):null};R&&W&&ce.toHandle&&Ce.toHandle&&ce.toHandle.type===Ce.toHandle.type&&ce.toHandle.nodeId===Ce.toHandle.nodeId&&ce.toHandle.id===Ce.toHandle.id&&ce.to.x===Ce.to.x&&ce.to.y===Ce.to.y||(_(Ce),ce=Ce)}function Te(Se){if(!("touches"in Se&&Se.touches.length>0)){if(M){(W||k)&&H&&R&&E?.(H);const{inProgress:ye,..._e}=ce,Ce={..._e,toPosition:ce.toHandle?ce.toPosition:null};T?.(Se,Ce),c&&N?.(Se,Ce)}b(),cancelAnimationFrame(oe),X=!1,R=!1,H=null,k=null,K.removeEventListener("mousemove",de),K.removeEventListener("mouseup",Te),K.removeEventListener("touchmove",de),K.removeEventListener("touchend",Te)}}K.addEventListener("mousemove",de),K.addEventListener("mouseup",Te),K.addEventListener("touchmove",de),K.addEventListener("touchend",Te)}function $b(e,{handle:n,connectionMode:a,fromNodeId:s,fromHandleId:o,fromType:c,doc:u,lib:d,flowId:g,isValidConnection:h=zb,nodeLookup:p}){const v=c==="target",y=n?u.querySelector(`.${d}-flow__handle[data-id="${g}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:b,y:C}=bn(e),E=u.elementFromPoint(b,C),T=E?.classList.contains(`${d}-flow__handle`)?E:y,S={handleDomNode:T,isValid:!1,connection:null,toHandle:null};if(T){const N=Db(void 0,T),_=T.getAttribute("data-nodeid"),A=T.getAttribute("data-handleid"),D=T.classList.contains("connectable"),z=T.classList.contains("connectableend");if(!_||!N)return S;const $={source:v?_:s,sourceHandle:v?A:o,target:v?s:_,targetHandle:v?o:A};S.connection=$;const K=D&&z&&(a===Bs.Strict?v&&N==="source"||!v&&N==="target":_!==s||A!==o);S.isValid=K&&h($),S.toHandle=jb(_,N,A,p,a,!0)}return S}const lh={onPointerDown:$T,isValid:$b};function UT({domNode:e,panZoom:n,getTransform:a,getViewScale:s}){const o=Zt(e);function c({translateExtent:d,width:g,height:h,zoomStep:p=1,pannable:v=!0,zoomable:y=!0,inversePan:b=!1}){const C=_=>{if(_.sourceEvent.type!=="wheel"||!n)return;const A=a(),D=_.sourceEvent.ctrlKey&&so()?10:1,z=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*p,$=A[2]*Math.pow(2,z*D);n.scaleTo($)};let E=[0,0];const T=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(E=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},S=_=>{const A=a();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!n)return;const D=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],z=[D[0]-E[0],D[1]-E[1]];E=D;const $=s()*Math.max(A[2],Math.log(A[2]))*(b?-1:1),V={x:A[0]-z[0]*$,y:A[1]-z[1]*$},K=[[0,0],[g,h]];n.setViewportConstrained({x:V.x,y:V.y,zoom:A[2]},K,d)},N=cb().on("start",T).on("zoom",v?S:null).on("zoom.wheel",y?C:null);o.call(N,{})}function u(){o.on("zoom",null)}return{update:c,destroy:u,pointer:mn}}const Yc=e=>({x:e.x,y:e.y,zoom:e.k}),Mf=({x:e,y:n,zoom:a})=>Vc.translate(e,n).scale(a),ks=(e,n)=>e.target.closest(`.${n}`),Ub=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),LT=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,kf=(e,n=0,a=LT,s=()=>{})=>{const o=typeof n=="number"&&n>0;return o||s(),o?e.transition().duration(n).ease(a).on("end",s):e},Lb=e=>{const n=e.ctrlKey&&so()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function HT({zoomPanValues:e,noWheelClassName:n,d3Selection:a,d3Zoom:s,panOnScrollMode:o,panOnScrollSpeed:c,zoomOnPinch:u,onPanZoomStart:d,onPanZoom:g,onPanZoomEnd:h}){return p=>{if(ks(p,n))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const v=a.property("__zoom").k||1;if(p.ctrlKey&&u){const T=mn(p),S=Lb(p),N=v*Math.pow(2,S);s.scaleTo(a,N,T,p);return}const y=p.deltaMode===1?20:1;let b=o===Sa.Vertical?0:p.deltaX*y,C=o===Sa.Horizontal?0:p.deltaY*y;!so()&&p.shiftKey&&o!==Sa.Vertical&&(b=p.deltaY*y,C=0),s.translateBy(a,-(b/v)*c,-(C/v)*c,{internal:!0});const E=Yc(a.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(g?.(p,E),e.panScrollTimeout=setTimeout(()=>{h?.(p,E),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,d?.(p,E))}}function BT({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:a}){return function(s,o){const c=s.type==="wheel",u=!n&&c&&!s.ctrlKey,d=ks(s,e);if(s.ctrlKey&&c&&d&&s.preventDefault(),u||d)return null;s.preventDefault(),a.call(this,s,o)}}function IT({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:a}){return s=>{if(s.sourceEvent?.internal)return;const o=Yc(s.transform);e.mouseButton=s.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,s.sourceEvent?.type==="mousedown"&&n(!0),a&&a?.(s.sourceEvent,o)}}function qT({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:a,onTransformChange:s,onPanZoom:o}){return c=>{e.usedRightMouseButton=!!(a&&Ub(n,e.mouseButton??0)),c.sourceEvent?.sync||s([c.transform.x,c.transform.y,c.transform.k]),o&&!c.sourceEvent?.internal&&o?.(c.sourceEvent,Yc(c.transform))}}function VT({zoomPanValues:e,panOnDrag:n,panOnScroll:a,onDraggingChange:s,onPanZoomEnd:o,onPaneContextMenu:c}){return u=>{if(!u.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,c&&Ub(n,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&c(u.sourceEvent),e.usedRightMouseButton=!1,s(!1),o)){const d=Yc(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(u.sourceEvent,d)},a?150:0)}}}function PT({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:a,panOnDrag:s,panOnScroll:o,zoomOnDoubleClick:c,userSelectionActive:u,noWheelClassName:d,noPanClassName:g,lib:h,connectionInProgress:p}){return v=>{const y=e||n,b=a&&v.ctrlKey,C=v.type==="wheel";if(v.button===1&&v.type==="mousedown"&&(ks(v,`${h}-flow__node`)||ks(v,`${h}-flow__edge`)))return!0;if(!s&&!y&&!o&&!c&&!a||u||p&&!C||ks(v,d)&&C||ks(v,g)&&(!C||o&&C&&!e)||!a&&v.ctrlKey&&C)return!1;if(!a&&v.type==="touchstart"&&v.touches?.length>1)return v.preventDefault(),!1;if(!y&&!o&&!b&&C||!s&&(v.type==="mousedown"||v.type==="touchstart")||Array.isArray(s)&&!s.includes(v.button)&&v.type==="mousedown")return!1;const E=Array.isArray(s)&&s.includes(v.button)||!v.button||v.button<=1;return(!v.ctrlKey||C)&&E}}function GT({domNode:e,minZoom:n,maxZoom:a,translateExtent:s,viewport:o,onPanZoom:c,onPanZoomStart:u,onPanZoomEnd:d,onDraggingChange:g}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),v=cb().scaleExtent([n,a]).translateExtent(s),y=Zt(e).call(v);N({x:o.x,y:o.y,zoom:Is(o.zoom,n,a)},[[0,0],[p.width,p.height]],s);const b=y.on("wheel.zoom"),C=y.on("dblclick.zoom");v.wheelDelta(Lb);function E(W,ee){return y?new Promise(ne=>{v?.interpolate(ee?.interpolate==="linear"?Ki:yc).transform(kf(y,ee?.duration,ee?.ease,()=>ne(!0)),W)}):Promise.resolve(!1)}function T({noWheelClassName:W,noPanClassName:ee,onPaneContextMenu:ne,userSelectionActive:j,panOnScroll:P,panOnDrag:M,panOnScrollMode:U,panOnScrollSpeed:B,preventScrolling:X,zoomOnPinch:H,zoomOnScroll:R,zoomOnDoubleClick:k,zoomActivationKeyPressed:G,lib:Z,onTransformChange:ie,connectionInProgress:ue,paneClickDistance:ce,selectionOnDrag:le}){j&&!h.isZoomingOrPanning&&S();const de=P&&!G&&!j;v.clickDistance(le?1/0:!vn(ce)||ce<0?0:ce);const Te=de?HT({zoomPanValues:h,noWheelClassName:W,d3Selection:y,d3Zoom:v,panOnScrollMode:U,panOnScrollSpeed:B,zoomOnPinch:H,onPanZoomStart:u,onPanZoom:c,onPanZoomEnd:d}):BT({noWheelClassName:W,preventScrolling:X,d3ZoomHandler:b});if(y.on("wheel.zoom",Te,{passive:!1}),!j){const ye=IT({zoomPanValues:h,onDraggingChange:g,onPanZoomStart:u});v.on("start",ye);const _e=qT({zoomPanValues:h,panOnDrag:M,onPaneContextMenu:!!ne,onPanZoom:c,onTransformChange:ie});v.on("zoom",_e);const Ce=VT({zoomPanValues:h,panOnDrag:M,panOnScroll:P,onPaneContextMenu:ne,onPanZoomEnd:d,onDraggingChange:g});v.on("end",Ce)}const Se=PT({zoomActivationKeyPressed:G,panOnDrag:M,zoomOnScroll:R,panOnScroll:P,zoomOnDoubleClick:k,zoomOnPinch:H,userSelectionActive:j,noPanClassName:ee,noWheelClassName:W,lib:Z,connectionInProgress:ue});v.filter(Se),k?y.on("dblclick.zoom",C):y.on("dblclick.zoom",null)}function S(){v.on("zoom",null)}async function N(W,ee,ne){const j=Mf(W),P=v?.constrain()(j,ee,ne);return P&&await E(P),new Promise(M=>M(P))}async function _(W,ee){const ne=Mf(W);return await E(ne,ee),new Promise(j=>j(ne))}function A(W){if(y){const ee=Mf(W),ne=y.property("__zoom");(ne.k!==W.zoom||ne.x!==W.x||ne.y!==W.y)&&v?.transform(y,ee,null,{sync:!0})}}function D(){const W=y?lb(y.node()):{x:0,y:0,k:1};return{x:W.x,y:W.y,zoom:W.k}}function z(W,ee){return y?new Promise(ne=>{v?.interpolate(ee?.interpolate==="linear"?Ki:yc).scaleTo(kf(y,ee?.duration,ee?.ease,()=>ne(!0)),W)}):Promise.resolve(!1)}function $(W,ee){return y?new Promise(ne=>{v?.interpolate(ee?.interpolate==="linear"?Ki:yc).scaleBy(kf(y,ee?.duration,ee?.ease,()=>ne(!0)),W)}):Promise.resolve(!1)}function V(W){v?.scaleExtent(W)}function K(W){v?.translateExtent(W)}function oe(W){const ee=!vn(W)||W<0?0:W;v?.clickDistance(ee)}return{update:T,destroy:S,setViewport:_,setViewportConstrained:N,getViewport:D,scaleTo:z,scaleBy:$,setScaleExtent:V,setTranslateExtent:K,syncViewport:A,setClickDistance:oe}}var Ps;(function(e){e.Line="line",e.Handle="handle"})(Ps||(Ps={}));function YT({width:e,prevWidth:n,height:a,prevHeight:s,affectsX:o,affectsY:c}){const u=e-n,d=a-s,g=[u>0?1:u<0?-1:0,d>0?1:d<0?-1:0];return u&&o&&(g[0]=g[0]*-1),d&&c&&(g[1]=g[1]*-1),g}function fy(e){const n=e.includes("right")||e.includes("left"),a=e.includes("bottom")||e.includes("top"),s=e.includes("left"),o=e.includes("top");return{isHorizontal:n,isVertical:a,affectsX:s,affectsY:o}}function zr(e,n){return Math.max(0,n-e)}function $r(e,n){return Math.max(0,e-n)}function ac(e,n,a){return Math.max(0,n-e,e-a)}function hy(e,n){return e?!n:n}function XT(e,n,a,s,o,c,u,d){let{affectsX:g,affectsY:h}=n;const{isHorizontal:p,isVertical:v}=n,y=p&&v,{xSnapped:b,ySnapped:C}=a,{minWidth:E,maxWidth:T,minHeight:S,maxHeight:N}=s,{x:_,y:A,width:D,height:z,aspectRatio:$}=e;let V=Math.floor(p?b-e.pointerX:0),K=Math.floor(v?C-e.pointerY:0);const oe=D+(g?-V:V),W=z+(h?-K:K),ee=-c[0]*D,ne=-c[1]*z;let j=ac(oe,E,T),P=ac(W,S,N);if(u){let B=0,X=0;g&&V<0?B=zr(_+V+ee,u[0][0]):!g&&V>0&&(B=$r(_+oe+ee,u[1][0])),h&&K<0?X=zr(A+K+ne,u[0][1]):!h&&K>0&&(X=$r(A+W+ne,u[1][1])),j=Math.max(j,B),P=Math.max(P,X)}if(d){let B=0,X=0;g&&V>0?B=$r(_+V,d[0][0]):!g&&V<0&&(B=zr(_+oe,d[1][0])),h&&K>0?X=$r(A+K,d[0][1]):!h&&K<0&&(X=zr(A+W,d[1][1])),j=Math.max(j,B),P=Math.max(P,X)}if(o){if(p){const B=ac(oe/$,S,N)*$;if(j=Math.max(j,B),u){let X=0;!g&&!h||g&&!h&&y?X=$r(A+ne+oe/$,u[1][1])*$:X=zr(A+ne+(g?V:-V)/$,u[0][1])*$,j=Math.max(j,X)}if(d){let X=0;!g&&!h||g&&!h&&y?X=zr(A+oe/$,d[1][1])*$:X=$r(A+(g?V:-V)/$,d[0][1])*$,j=Math.max(j,X)}}if(v){const B=ac(W*$,E,T)/$;if(P=Math.max(P,B),u){let X=0;!g&&!h||h&&!g&&y?X=$r(_+W*$+ee,u[1][0])/$:X=zr(_+(h?K:-K)*$+ee,u[0][0])/$,P=Math.max(P,X)}if(d){let X=0;!g&&!h||h&&!g&&y?X=zr(_+W*$,d[1][0])/$:X=$r(_+(h?K:-K)*$,d[0][0])/$,P=Math.max(P,X)}}}K=K+(K<0?P:-P),V=V+(V<0?j:-j),o&&(y?oe>W*$?K=(hy(g,h)?-V:V)/$:V=(hy(g,h)?-K:K)*$:p?(K=V/$,h=g):(V=K*$,g=h));const M=g?_+V:_,U=h?A+K:A;return{width:D+(g?-V:V),height:z+(h?-K:K),x:c[0]*V*(g?-1:1)+M,y:c[1]*K*(h?-1:1)+U}}const Hb={width:0,height:0,x:0,y:0},KT={...Hb,pointerX:0,pointerY:0,aspectRatio:1};function ZT(e){return[[0,0],[e.measured.width,e.measured.height]]}function QT(e,n,a){const s=n.position.x+e.position.x,o=n.position.y+e.position.y,c=e.measured.width??0,u=e.measured.height??0,d=a[0]*c,g=a[1]*u;return[[s-d,o-g],[s+c-d,o+u-g]]}function JT({domNode:e,nodeId:n,getStoreItems:a,onChange:s,onEnd:o}){const c=Zt(e);let u={controlDirection:fy("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:p,keepAspectRatio:v,resizeDirection:y,onResizeStart:b,onResize:C,onResizeEnd:E,shouldResize:T}){let S={...Hb},N={...KT};u={boundaries:p,resizeDirection:y,keepAspectRatio:v,controlDirection:fy(h)};let _,A=null,D=[],z,$,V,K=!1;const oe=Kv().on("start",W=>{const{nodeLookup:ee,transform:ne,snapGrid:j,snapToGrid:P,nodeOrigin:M,paneDomNode:U}=a();if(_=ee.get(n),!_)return;A=U?.getBoundingClientRect()??null;const{xSnapped:B,ySnapped:X}=Zi(W.sourceEvent,{transform:ne,snapGrid:j,snapToGrid:P,containerBounds:A});S={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},N={...S,pointerX:B,pointerY:X,aspectRatio:S.width/S.height},z=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(z=ee.get(_.parentId),$=z&&_.extent==="parent"?ZT(z):void 0),D=[],V=void 0;for(const[H,R]of ee)if(R.parentId===n&&(D.push({id:H,position:{...R.position},extent:R.extent}),R.extent==="parent"||R.expandParent)){const k=QT(R,_,R.origin??M);V?V=[[Math.min(k[0][0],V[0][0]),Math.min(k[0][1],V[0][1])],[Math.max(k[1][0],V[1][0]),Math.max(k[1][1],V[1][1])]]:V=k}b?.(W,{...S})}).on("drag",W=>{const{transform:ee,snapGrid:ne,snapToGrid:j,nodeOrigin:P}=a(),M=Zi(W.sourceEvent,{transform:ee,snapGrid:ne,snapToGrid:j,containerBounds:A}),U=[];if(!_)return;const{x:B,y:X,width:H,height:R}=S,k={},G=_.origin??P,{width:Z,height:ie,x:ue,y:ce}=XT(N,u.controlDirection,M,u.boundaries,u.keepAspectRatio,G,$,V),le=Z!==H,de=ie!==R,Te=ue!==B&&le,Se=ce!==X&&de;if(!Te&&!Se&&!le&&!de)return;if((Te||Se||G[0]===1||G[1]===1)&&(k.x=Te?ue:S.x,k.y=Se?ce:S.y,S.x=k.x,S.y=k.y,D.length>0)){const Ie=ue-B,Ge=ce-X;for(const mt of D)mt.position={x:mt.position.x-Ie+G[0]*(Z-H),y:mt.position.y-Ge+G[1]*(ie-R)},U.push(mt)}if((le||de)&&(k.width=le&&(!u.resizeDirection||u.resizeDirection==="horizontal")?Z:S.width,k.height=de&&(!u.resizeDirection||u.resizeDirection==="vertical")?ie:S.height,S.width=k.width,S.height=k.height),z&&_.expandParent){const Ie=G[0]*(k.width??0);k.x&&k.x<Ie&&(S.x=Ie,N.x=N.x-(k.x-Ie));const Ge=G[1]*(k.height??0);k.y&&k.y<Ge&&(S.y=Ge,N.y=N.y-(k.y-Ge))}const ye=YT({width:S.width,prevWidth:H,height:S.height,prevHeight:R,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),_e={...S,direction:ye};T?.(W,_e)!==!1&&(K=!0,C?.(W,_e),s(k,U))}).on("end",W=>{K&&(E?.(W,{...S}),o?.({...S}),K=!1)});c.call(oe)}function g(){c.on(".drag",null)}return{update:d,destroy:g}}var jf={exports:{}},Df={},zf={exports:{}},$f={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function FT(){if(gy)return $f;gy=1;var e=po();function n(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var a=typeof Object.is=="function"?Object.is:n,s=e.useState,o=e.useEffect,c=e.useLayoutEffect,u=e.useDebugValue;function d(v,y){var b=y(),C=s({inst:{value:b,getSnapshot:y}}),E=C[0].inst,T=C[1];return c(function(){E.value=b,E.getSnapshot=y,g(E)&&T({inst:E})},[v,b,y]),o(function(){return g(E)&&T({inst:E}),v(function(){g(E)&&T({inst:E})})},[v]),u(b),b}function g(v){var y=v.getSnapshot;v=v.value;try{var b=y();return!a(v,b)}catch{return!0}}function h(v,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return $f.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,$f}var my;function WT(){return my||(my=1,zf.exports=FT()),zf.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function eC(){if(py)return Df;py=1;var e=po(),n=WT();function a(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var s=typeof Object.is=="function"?Object.is:a,o=n.useSyncExternalStore,c=e.useRef,u=e.useEffect,d=e.useMemo,g=e.useDebugValue;return Df.useSyncExternalStoreWithSelector=function(h,p,v,y,b){var C=c(null);if(C.current===null){var E={hasValue:!1,value:null};C.current=E}else E=C.current;C=d(function(){function S(z){if(!N){if(N=!0,_=z,z=y(z),b!==void 0&&E.hasValue){var $=E.value;if(b($,z))return A=$}return A=z}if($=A,s(_,z))return $;var V=y(z);return b!==void 0&&b($,V)?(_=z,$):(_=z,A=V)}var N=!1,_,A,D=v===void 0?null:v;return[function(){return S(p())},D===null?void 0:function(){return S(D())}]},[p,v,y,b]);var T=o(h,C[0],C[1]);return u(function(){E.hasValue=!0,E.value=T},[T]),g(T),T},Df}var yy;function tC(){return yy||(yy=1,jf.exports=eC()),jf.exports}var nC=tC();const Bb=Mv(nC),rC={},vy=e=>{let n;const a=new Set,s=(p,v)=>{const y=typeof p=="function"?p(n):p;if(!Object.is(y,n)){const b=n;n=v??(typeof y!="object"||y===null)?y:Object.assign({},n,y),a.forEach(C=>C(n,b))}},o=()=>n,g={setState:s,getState:o,getInitialState:()=>h,subscribe:p=>(a.add(p),()=>a.delete(p)),destroy:()=>{(rC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},h=n=e(s,o,g);return g},Ib=e=>e?vy(e):vy,{useDebugValue:aC}=kv,{useSyncExternalStoreWithSelector:sC}=Bb,iC=e=>e;function qb(e,n=iC,a){const s=sC(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,a);return aC(s),s}const by=(e,n)=>{const a=Ib(e),s=(o,c=n)=>qb(a,o,c);return Object.assign(s,a),s},oC=(e,n)=>e?by(e,n):by;function Fe(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[s,o]of e)if(!Object.is(o,n.get(s)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const s of e)if(!n.has(s))return!1;return!0}const a=Object.keys(e);if(a.length!==Object.keys(n).length)return!1;for(const s of a)if(!Object.prototype.hasOwnProperty.call(n,s)||!Object.is(e[s],n[s]))return!1;return!0}jv();const Xc=q.createContext(null),lC=Xc.Provider,Vb=On.error001();function De(e,n){const a=q.useContext(Xc);if(a===null)throw new Error(Vb);return qb(a,e,n)}function Je(){const e=q.useContext(Xc);if(e===null)throw new Error(Vb);return q.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const wy={display:"none"},cC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Pb="react-flow__node-desc",Gb="react-flow__edge-desc",uC="react-flow__aria-live",dC=e=>e.ariaLiveMessage,fC=e=>e.ariaLabelConfig;function hC({rfId:e}){const n=De(dC);return x.jsx("div",{id:`${uC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:cC,children:n})}function gC({rfId:e,disableKeyboardA11y:n}){const a=De(fC);return x.jsxs(x.Fragment,{children:[x.jsx("div",{id:`${Pb}-${e}`,style:wy,children:n?a["node.a11yDescription.default"]:a["node.a11yDescription.keyboardDisabled"]}),x.jsx("div",{id:`${Gb}-${e}`,style:wy,children:a["edge.a11yDescription.default"]}),!n&&x.jsx(hC,{rfId:e})]})}const Kc=q.forwardRef(({position:e="top-left",children:n,className:a,style:s,...o},c)=>{const u=`${e}`.split("-");return x.jsx("div",{className:ut(["react-flow__panel",a,...u]),style:s,ref:c,...o,children:n})});Kc.displayName="Panel";function mC({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:x.jsx(Kc,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:x.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const pC=e=>{const n=[],a=[];for(const[,s]of e.nodeLookup)s.selected&&n.push(s.internals.userNode);for(const[,s]of e.edgeLookup)s.selected&&a.push(s);return{selectedNodes:n,selectedEdges:a}},sc=e=>e.id;function yC(e,n){return Fe(e.selectedNodes.map(sc),n.selectedNodes.map(sc))&&Fe(e.selectedEdges.map(sc),n.selectedEdges.map(sc))}function vC({onSelectionChange:e}){const n=Je(),{selectedNodes:a,selectedEdges:s}=De(pC,yC);return q.useEffect(()=>{const o={nodes:a,edges:s};e?.(o),n.getState().onSelectionChangeHandlers.forEach(c=>c(o))},[a,s,e]),null}const bC=e=>!!e.onSelectionChangeHandlers;function wC({onSelectionChange:e}){const n=De(bC);return e||n?x.jsx(vC,{onSelectionChange:e}):null}const Yb=[0,0],xC={x:0,y:0,zoom:1},_C=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],xy=[..._C,"rfId"],SC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),_y={translateExtent:no,nodeOrigin:Yb,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function EC(e){const{setNodes:n,setEdges:a,setMinZoom:s,setMaxZoom:o,setTranslateExtent:c,setNodeExtent:u,reset:d,setDefaultNodesAndEdges:g}=De(SC,Fe),h=Je();q.useEffect(()=>(g(e.defaultNodes,e.defaultEdges),()=>{p.current=_y,d()}),[]);const p=q.useRef(_y);return q.useEffect(()=>{for(const v of xy){const y=e[v],b=p.current[v];y!==b&&(typeof e[v]>"u"||(v==="nodes"?n(y):v==="edges"?a(y):v==="minZoom"?s(y):v==="maxZoom"?o(y):v==="translateExtent"?c(y):v==="nodeExtent"?u(y):v==="ariaLabelConfig"?h.setState({ariaLabelConfig:uT(y)}):v==="fitView"?h.setState({fitViewQueued:y}):v==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[v]:y})))}p.current=e},xy.map(v=>e[v])),null}function Sy(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function TC(e){const[n,a]=q.useState(e==="system"?null:e);return q.useEffect(()=>{if(e!=="system"){a(e);return}const s=Sy(),o=()=>a(s?.matches?"dark":"light");return o(),s?.addEventListener("change",o),()=>{s?.removeEventListener("change",o)}},[e]),n!==null?n:Sy()?.matches?"dark":"light"}const Ey=typeof document<"u"?document:null;function oo(e=null,n={target:Ey,actInsideInputWithModifier:!0}){const[a,s]=q.useState(!1),o=q.useRef(!1),c=q.useRef(new Set([])),[u,d]=q.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((v,y)=>v.concat(...y),[]);return[h,p]}return[[],[]]},[e]);return q.useEffect(()=>{const g=n?.target??Ey,h=n?.actInsideInputWithModifier??!0;if(e!==null){const p=b=>{if(o.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!o.current||o.current&&!h)&&_b(b))return!1;const E=Cy(b.code,d);if(c.current.add(b[E]),Ty(u,c.current,!1)){const T=b.composedPath?.()?.[0]||b.target,S=T?.nodeName==="BUTTON"||T?.nodeName==="A";n.preventDefault!==!1&&(o.current||!S)&&b.preventDefault(),s(!0)}},v=b=>{const C=Cy(b.code,d);Ty(u,c.current,!0)?(s(!1),c.current.clear()):c.current.delete(b[C]),b.key==="Meta"&&c.current.clear(),o.current=!1},y=()=>{c.current.clear(),s(!1)};return g?.addEventListener("keydown",p),g?.addEventListener("keyup",v),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{g?.removeEventListener("keydown",p),g?.removeEventListener("keyup",v),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[e,s]),a}function Ty(e,n,a){return e.filter(s=>a||s.length===n.size).some(s=>s.every(o=>n.has(o)))}function Cy(e,n){return n.includes(e)?"code":"key"}const CC=()=>{const e=Je();return q.useMemo(()=>({zoomIn:n=>{const{panZoom:a}=e.getState();return a?a.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:a}=e.getState();return a?a.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,a)=>{const{panZoom:s}=e.getState();return s?s.scaleTo(n,{duration:a?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,a)=>{const{transform:[s,o,c],panZoom:u}=e.getState();return u?(await u.setViewport({x:n.x??s,y:n.y??o,zoom:n.zoom??c},a),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,a,s]=e.getState().transform;return{x:n,y:a,zoom:s}},setCenter:async(n,a,s)=>e.getState().setCenter(n,a,s),fitBounds:async(n,a)=>{const{width:s,height:o,minZoom:c,maxZoom:u,panZoom:d}=e.getState(),g=kh(n,s,o,c,u,a?.padding??.1);return d?(await d.setViewport(g,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,a={})=>{const{transform:s,snapGrid:o,snapToGrid:c,domNode:u}=e.getState();if(!u)return n;const{x:d,y:g}=u.getBoundingClientRect(),h={x:n.x-d,y:n.y-g},p=a.snapGrid??o,v=a.snapToGrid??c;return _o(h,s,v,p)},flowToScreenPosition:n=>{const{transform:a,domNode:s}=e.getState();if(!s)return n;const{x:o,y:c}=s.getBoundingClientRect(),u=kc(n,a);return{x:u.x+o,y:u.y+c}}}),[])};function Xb(e,n){const a=[],s=new Map,o=[];for(const c of e)if(c.type==="add"){o.push(c);continue}else if(c.type==="remove"||c.type==="replace")s.set(c.id,[c]);else{const u=s.get(c.id);u?u.push(c):s.set(c.id,[c])}for(const c of n){const u=s.get(c.id);if(!u){a.push(c);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){a.push({...u[0].item});continue}const d={...c};for(const g of u)AC(g,d);a.push(d)}return o.length&&o.forEach(c=>{c.index!==void 0?a.splice(c.index,0,{...c.item}):a.push({...c.item})}),a}function AC(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured??={},n.measured.width=e.dimensions.width,n.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function Kb(e,n){return Xb(e,n)}function Zb(e,n){return Xb(e,n)}function ma(e,n){return{id:e,type:"select",selected:n}}function js(e,n=new Set,a=!1){const s=[];for(const[o,c]of e){const u=n.has(o);!(c.selected===void 0&&!u)&&c.selected!==u&&(a&&(c.selected=u),s.push(ma(c.id,u)))}return s}function Ay({items:e=[],lookup:n}){const a=[],s=new Map(e.map(o=>[o.id,o]));for(const[o,c]of e.entries()){const u=n.get(c.id),d=u?.internals?.userNode??u;d!==void 0&&d!==c&&a.push({id:c.id,item:c,type:"replace"}),d===void 0&&a.push({item:c,type:"add",index:o})}for(const[o]of n)s.get(o)===void 0&&a.push({id:o,type:"remove"});return a}function Ny(e){return{id:e.id,type:"remove"}}const Oy=e=>eT(e),NC=e=>gb(e);function Qb(e){return q.forwardRef(e)}const OC=typeof window<"u"?q.useLayoutEffect:q.useEffect;function Ry(e){const[n,a]=q.useState(BigInt(0)),[s]=q.useState(()=>RC(()=>a(o=>o+BigInt(1))));return OC(()=>{const o=s.get();o.length&&(e(o),s.reset())},[n]),s}function RC(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:a=>{n.push(a),e()}}}const Jb=q.createContext(null);function MC({children:e}){const n=Je(),a=q.useCallback(d=>{const{nodes:g=[],setNodes:h,hasDefaultNodes:p,onNodesChange:v,nodeLookup:y,fitViewQueued:b}=n.getState();let C=g;for(const T of d)C=typeof T=="function"?T(C):T;const E=Ay({items:C,lookup:y});p&&h(C),E.length>0?v?.(E):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:T,nodes:S,setNodes:N}=n.getState();T&&N(S)})},[]),s=Ry(a),o=q.useCallback(d=>{const{edges:g=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:v,edgeLookup:y}=n.getState();let b=g;for(const C of d)b=typeof C=="function"?C(b):C;p?h(b):v&&v(Ay({items:b,lookup:y}))},[]),c=Ry(o),u=q.useMemo(()=>({nodeQueue:s,edgeQueue:c}),[]);return x.jsx(Jb.Provider,{value:u,children:e})}function kC(){const e=q.useContext(Jb);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const jC=e=>!!e.panZoom;function Lh(){const e=CC(),n=Je(),a=kC(),s=De(jC),o=q.useMemo(()=>{const c=v=>n.getState().nodeLookup.get(v),u=v=>{a.nodeQueue.push(v)},d=v=>{a.edgeQueue.push(v)},g=v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState(),C=Oy(v)?v:y.get(v.id),E=C.parentId?wb(C.position,C.measured,C.parentId,y,b):C.position,T={...C,position:E,width:C.measured?.width??C.width,height:C.measured?.height??C.height};return qs(T)},h=(v,y,b={replace:!1})=>{u(C=>C.map(E=>{if(E.id===v){const T=typeof y=="function"?y(E):y;return b.replace&&Oy(T)?T:{...E,...T}}return E}))},p=(v,y,b={replace:!1})=>{d(C=>C.map(E=>{if(E.id===v){const T=typeof y=="function"?y(E):y;return b.replace&&NC(T)?T:{...E,...T}}return E}))};return{getNodes:()=>n.getState().nodes.map(v=>({...v})),getNode:v=>c(v)?.internals.userNode,getInternalNode:c,getEdges:()=>{const{edges:v=[]}=n.getState();return v.map(y=>({...y}))},getEdge:v=>n.getState().edgeLookup.get(v),setNodes:u,setEdges:d,addNodes:v=>{const y=Array.isArray(v)?v:[v];a.nodeQueue.push(b=>[...b,...y])},addEdges:v=>{const y=Array.isArray(v)?v:[v];a.edgeQueue.push(b=>[...b,...y])},toObject:()=>{const{nodes:v=[],edges:y=[],transform:b}=n.getState(),[C,E,T]=b;return{nodes:v.map(S=>({...S})),edges:y.map(S=>({...S})),viewport:{x:C,y:E,zoom:T}}},deleteElements:async({nodes:v=[],edges:y=[]})=>{const{nodes:b,edges:C,onNodesDelete:E,onEdgesDelete:T,triggerNodeChanges:S,triggerEdgeChanges:N,onDelete:_,onBeforeDelete:A}=n.getState(),{nodes:D,edges:z}=await sT({nodesToRemove:v,edgesToRemove:y,nodes:b,edges:C,onBeforeDelete:A}),$=z.length>0,V=D.length>0;if($){const K=z.map(Ny);T?.(z),N(K)}if(V){const K=D.map(Ny);E?.(D),S(K)}return(V||$)&&_?.({nodes:D,edges:z}),{deletedNodes:D,deletedEdges:z}},getIntersectingNodes:(v,y=!0,b)=>{const C=ty(v),E=C?v:g(v),T=b!==void 0;return E?(b||n.getState().nodes).filter(S=>{const N=n.getState().nodeLookup.get(S.id);if(N&&!C&&(S.id===v.id||!N.internals.positionAbsolute))return!1;const _=qs(T?S:N),A=ao(_,E);return y&&A>0||A>=_.width*_.height||A>=E.width*E.height}):[]},isNodeIntersecting:(v,y,b=!0)=>{const E=ty(v)?v:g(v);if(!E)return!1;const T=ao(E,y);return b&&T>0||T>=y.width*y.height||T>=E.width*E.height},updateNode:h,updateNodeData:(v,y,b={replace:!1})=>{h(v,C=>{const E=typeof y=="function"?y(C):y;return b.replace?{...C,data:E}:{...C,data:{...C.data,...E}}},b)},updateEdge:p,updateEdgeData:(v,y,b={replace:!1})=>{p(v,C=>{const E=typeof y=="function"?y(C):y;return b.replace?{...C,data:E}:{...C,data:{...C.data,...E}}},b)},getNodesBounds:v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState();return tT(v,{nodeLookup:y,nodeOrigin:b})},getHandleConnections:({type:v,id:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}-${v}${y?`-${y}`:""}`)?.values()??[]),getNodeConnections:({type:v,handleId:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}${v?y?`-${v}-${y}`:`-${v}`:""}`)?.values()??[]),fitView:async v=>{const y=n.getState().fitViewResolver??cT();return n.setState({fitViewQueued:!0,fitViewOptions:v,fitViewResolver:y}),a.nodeQueue.push(b=>[...b]),y.promise}}},[]);return q.useMemo(()=>({...o,...e,viewportInitialized:s}),[s])}const My=e=>e.selected,DC=typeof window<"u"?window:void 0;function zC({deleteKeyCode:e,multiSelectionKeyCode:n}){const a=Je(),{deleteElements:s}=Lh(),o=oo(e,{actInsideInputWithModifier:!1}),c=oo(n,{target:DC});q.useEffect(()=>{if(o){const{edges:u,nodes:d}=a.getState();s({nodes:d.filter(My),edges:u.filter(My)}),a.setState({nodesSelectionActive:!1})}},[o]),q.useEffect(()=>{a.setState({multiSelectionActive:c})},[c])}function $C(e){const n=Je();q.useEffect(()=>{const a=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const s=jh(e.current);(s.height===0||s.width===0)&&n.getState().onError?.("004",On.error004()),n.setState({width:s.width||500,height:s.height||500})};if(e.current){a(),window.addEventListener("resize",a);const s=new ResizeObserver(()=>a());return s.observe(e.current),()=>{window.removeEventListener("resize",a),s&&e.current&&s.unobserve(e.current)}}},[])}const Zc={position:"absolute",width:"100%",height:"100%",top:0,left:0},UC=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function LC({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:a=!0,panOnScroll:s=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Sa.Free,zoomOnDoubleClick:u=!0,panOnDrag:d=!0,defaultViewport:g,translateExtent:h,minZoom:p,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:b=!0,children:C,noWheelClassName:E,noPanClassName:T,onViewportChange:S,isControlledViewport:N,paneClickDistance:_,selectionOnDrag:A}){const D=Je(),z=q.useRef(null),{userSelectionActive:$,lib:V,connectionInProgress:K}=De(UC,Fe),oe=oo(y),W=q.useRef();$C(z);const ee=q.useCallback(ne=>{S?.({x:ne[0],y:ne[1],zoom:ne[2]}),N||D.setState({transform:ne})},[S,N]);return q.useEffect(()=>{if(z.current){W.current=GT({domNode:z.current,minZoom:p,maxZoom:v,translateExtent:h,viewport:g,onDraggingChange:M=>D.setState({paneDragging:M}),onPanZoomStart:(M,U)=>{const{onViewportChangeStart:B,onMoveStart:X}=D.getState();X?.(M,U),B?.(U)},onPanZoom:(M,U)=>{const{onViewportChange:B,onMove:X}=D.getState();X?.(M,U),B?.(U)},onPanZoomEnd:(M,U)=>{const{onViewportChangeEnd:B,onMoveEnd:X}=D.getState();X?.(M,U),B?.(U)}});const{x:ne,y:j,zoom:P}=W.current.getViewport();return D.setState({panZoom:W.current,transform:[ne,j,P],domNode:z.current.closest(".react-flow")}),()=>{W.current?.destroy()}}},[]),q.useEffect(()=>{W.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:a,panOnScroll:s,panOnScrollSpeed:o,panOnScrollMode:c,zoomOnDoubleClick:u,panOnDrag:d,zoomActivationKeyPressed:oe,preventScrolling:b,noPanClassName:T,userSelectionActive:$,noWheelClassName:E,lib:V,onTransformChange:ee,connectionInProgress:K,selectionOnDrag:A,paneClickDistance:_})},[e,n,a,s,o,c,u,d,oe,b,T,$,E,V,ee,K,A,_]),x.jsx("div",{className:"react-flow__renderer",ref:z,style:Zc,children:C})}const HC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function BC(){const{userSelectionActive:e,userSelectionRect:n}=De(HC,Fe);return e&&n?x.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const Uf=(e,n)=>a=>{a.target===n.current&&e?.(a)},IC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function qC({isSelecting:e,selectionKeyPressed:n,selectionMode:a=ro.Full,panOnDrag:s,paneClickDistance:o,selectionOnDrag:c,onSelectionStart:u,onSelectionEnd:d,onPaneClick:g,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:v,onPaneMouseMove:y,onPaneMouseLeave:b,children:C}){const E=Je(),{userSelectionActive:T,elementsSelectable:S,dragging:N,connectionInProgress:_}=De(IC,Fe),A=S&&(e||T),D=q.useRef(null),z=q.useRef(),$=q.useRef(new Set),V=q.useRef(new Set),K=q.useRef(!1),oe=B=>{if(K.current||_){K.current=!1;return}g?.(B),E.getState().resetSelectedElements(),E.setState({nodesSelectionActive:!1})},W=B=>{if(Array.isArray(s)&&s?.includes(2)){B.preventDefault();return}h?.(B)},ee=p?B=>p(B):void 0,ne=B=>{K.current&&(B.stopPropagation(),K.current=!1)},j=B=>{const{resetSelectedElements:X,domNode:H}=E.getState();if(z.current=H?.getBoundingClientRect(),!z.current)return;const R=B.target===D.current;if(!R&&!!B.target.closest(".nokey")||!e||!(c&&R||n)||B.button!==0||!B.isPrimary)return;B.target?.setPointerCapture?.(B.pointerId),K.current=!1;const{x:Z,y:ie}=bn(B.nativeEvent,z.current);E.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:ie,x:Z,y:ie}}),R||(B.stopPropagation(),B.preventDefault()),(o===0||n)&&(X(),u?.(B),K.current=!0)},P=B=>{const{userSelectionRect:X,transform:H,nodeLookup:R,edgeLookup:k,connectionLookup:G,triggerNodeChanges:Z,triggerEdgeChanges:ie,defaultEdgeOptions:ue,resetSelectedElements:ce}=E.getState();if(!z.current||!X)return;const{x:le,y:de}=bn(B.nativeEvent,z.current),{startX:Te,startY:Se}=X;if(!K.current&&B.target===D.current&&!n&&o>0){if(Math.hypot(le-Te,de-Se)<=o)return;ce(),u?.(B)}K.current=!0;const ye={startX:Te,startY:Se,x:le<Te?le:Te,y:de<Se?de:Se,width:Math.abs(le-Te),height:Math.abs(de-Se)},_e=$.current,Ce=V.current;$.current=new Set(Mh(R,ye,H,a===ro.Partial,!0).map(Ge=>Ge.id)),V.current=new Set;const Ie=ue?.selectable??!0;for(const Ge of $.current){const mt=G.get(Ge);if(mt)for(const{edgeId:Ft}of mt.values()){const ln=k.get(Ft);ln&&(ln.selectable??Ie)&&V.current.add(Ft)}}if(!ny(_e,$.current)){const Ge=js(R,$.current,!0);Z(Ge)}if(!ny(Ce,V.current)){const Ge=js(k,V.current);ie(Ge)}E.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},M=B=>{B.button===0&&(B.target?.releasePointerCapture?.(B.pointerId),!T&&B.target===D.current&&E.getState().userSelectionRect&&oe?.(B),E.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:$.current.size>0}),K.current&&d?.(B))},U=s===!0||Array.isArray(s)&&s.includes(0);return x.jsxs("div",{className:ut(["react-flow__pane",{draggable:U,dragging:N,selection:e}]),onClick:A?void 0:Uf(oe,D),onContextMenu:Uf(W,D),onWheel:Uf(ee,D),onPointerEnter:A?void 0:v,onPointerMove:A?P:y,onPointerUp:A?M:void 0,onPointerDownCapture:A?j:void 0,onClickCapture:A?ne:void 0,onPointerLeave:b,ref:D,style:Zc,children:[C,x.jsx(BC,{})]})}function ch({id:e,store:n,unselect:a=!1,nodeRef:s}){const{addSelectedNodes:o,unselectNodesAndEdges:c,multiSelectionActive:u,nodeLookup:d,onError:g}=n.getState(),h=d.get(e);if(!h){g?.("012",On.error012(e));return}n.setState({nodesSelectionActive:!1}),h.selected?(a||h.selected&&u)&&(c({nodes:[h],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):o([e])}function Fb({nodeRef:e,disabled:n=!1,noDragClassName:a,handleSelector:s,nodeId:o,isSelectable:c,nodeClickDistance:u}){const d=Je(),[g,h]=q.useState(!1),p=q.useRef();return q.useEffect(()=>{p.current=MT({getStoreItems:()=>d.getState(),onNodeMouseDown:v=>{ch({id:v,store:d,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),q.useEffect(()=>{if(n)p.current?.destroy();else if(e.current)return p.current?.update({noDragClassName:a,handleSelector:s,domNode:e.current,isSelectable:c,nodeId:o,nodeClickDistance:u}),()=>{p.current?.destroy()}},[a,s,n,c,e,o]),g}const VC=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function Wb(){const e=Je();return q.useCallback(a=>{const{nodeExtent:s,snapToGrid:o,snapGrid:c,nodesDraggable:u,onError:d,updateNodePositions:g,nodeLookup:h,nodeOrigin:p}=e.getState(),v=new Map,y=VC(u),b=o?c[0]:5,C=o?c[1]:5,E=a.direction.x*b*a.factor,T=a.direction.y*C*a.factor;for(const[,S]of h){if(!y(S))continue;let N={x:S.internals.positionAbsolute.x+E,y:S.internals.positionAbsolute.y+T};o&&(N=xo(N,c));const{position:_,positionAbsolute:A}=mb({nodeId:S.id,nextPosition:N,nodeLookup:h,nodeExtent:s,nodeOrigin:p,onError:d});S.position=_,S.internals.positionAbsolute=A,v.set(S.id,S)}g(v)},[])}const Hh=q.createContext(null),PC=Hh.Provider;Hh.Consumer;const ew=()=>q.useContext(Hh),GC=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),YC=(e,n,a)=>s=>{const{connectionClickStartHandle:o,connectionMode:c,connection:u}=s,{fromHandle:d,toHandle:g,isValid:h}=u,p=g?.nodeId===e&&g?.id===n&&g?.type===a;return{connectingFrom:d?.nodeId===e&&d?.id===n&&d?.type===a,connectingTo:p,clickConnecting:o?.nodeId===e&&o?.id===n&&o?.type===a,isPossibleEndHandle:c===Bs.Strict?d?.type!==a:e!==d?.nodeId||n!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!o,valid:p&&h}};function XC({type:e="source",position:n=he.Top,isValidConnection:a,isConnectable:s=!0,isConnectableStart:o=!0,isConnectableEnd:c=!0,id:u,onConnect:d,children:g,className:h,onMouseDown:p,onTouchStart:v,...y},b){const C=u||null,E=e==="target",T=Je(),S=ew(),{connectOnClick:N,noPanClassName:_,rfId:A}=De(GC,Fe),{connectingFrom:D,connectingTo:z,clickConnecting:$,isPossibleEndHandle:V,connectionInProcess:K,clickConnectionInProcess:oe,valid:W}=De(YC(S,C,e),Fe);S||T.getState().onError?.("010",On.error010());const ee=P=>{const{defaultEdgeOptions:M,onConnect:U,hasDefaultEdges:B}=T.getState(),X={...M,...P};if(B){const{edges:H,setEdges:R}=T.getState();R(Ab(X,H))}U?.(X),d?.(X)},ne=P=>{if(!S)return;const M=Sb(P.nativeEvent);if(o&&(M&&P.button===0||!M)){const U=T.getState();lh.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:U.autoPanOnConnect,connectionMode:U.connectionMode,connectionRadius:U.connectionRadius,domNode:U.domNode,nodeLookup:U.nodeLookup,lib:U.lib,isTarget:E,handleId:C,nodeId:S,flowId:U.rfId,panBy:U.panBy,cancelConnection:U.cancelConnection,onConnectStart:U.onConnectStart,onConnectEnd:U.onConnectEnd,updateConnection:U.updateConnection,onConnect:ee,isValidConnection:a||U.isValidConnection,getTransform:()=>T.getState().transform,getFromHandle:()=>T.getState().connection.fromHandle,autoPanSpeed:U.autoPanSpeed,dragThreshold:U.connectionDragThreshold})}M?p?.(P):v?.(P)},j=P=>{const{onClickConnectStart:M,onClickConnectEnd:U,connectionClickStartHandle:B,connectionMode:X,isValidConnection:H,lib:R,rfId:k,nodeLookup:G,connection:Z}=T.getState();if(!S||!B&&!o)return;if(!B){M?.(P.nativeEvent,{nodeId:S,handleId:C,handleType:e}),T.setState({connectionClickStartHandle:{nodeId:S,type:e,id:C}});return}const ie=xb(P.target),ue=a||H,{connection:ce,isValid:le}=lh.isValid(P.nativeEvent,{handle:{nodeId:S,id:C,type:e},connectionMode:X,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:ue,flowId:k,doc:ie,lib:R,nodeLookup:G});le&&ce&&ee(ce);const de=structuredClone(Z);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,U?.(P,de),T.setState({connectionClickStartHandle:null})};return x.jsx("div",{"data-handleid":C,"data-nodeid":S,"data-handlepos":n,"data-id":`${A}-${S}-${C}-${e}`,className:ut(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",_,h,{source:!E,target:E,connectable:s,connectablestart:o,connectableend:c,clickconnecting:$,connectingfrom:D,connectingto:z,valid:W,connectionindicator:s&&(!K||V)&&(K||oe?c:o)}]),onMouseDown:ne,onTouchStart:ne,onClick:N?j:void 0,ref:b,...y,children:g})}const Lt=q.memo(Qb(XC));function KC({data:e,isConnectable:n,sourcePosition:a=he.Bottom}){return x.jsxs(x.Fragment,{children:[e?.label,x.jsx(Lt,{type:"source",position:a,isConnectable:n})]})}function ZC({data:e,isConnectable:n,targetPosition:a=he.Top,sourcePosition:s=he.Bottom}){return x.jsxs(x.Fragment,{children:[x.jsx(Lt,{type:"target",position:a,isConnectable:n}),e?.label,x.jsx(Lt,{type:"source",position:s,isConnectable:n})]})}function QC(){return null}function JC({data:e,isConnectable:n,targetPosition:a=he.Top}){return x.jsxs(x.Fragment,{children:[x.jsx(Lt,{type:"target",position:a,isConnectable:n}),e?.label]})}const jc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ky={input:KC,default:ZC,output:JC,group:QC};function FC(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const WC=e=>{const{width:n,height:a,x:s,y:o}=wo(e.nodeLookup,{filter:c=>!!c.selected});return{width:vn(n)?n:null,height:vn(a)?a:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${s}px,${o}px)`}};function eA({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:a}){const s=Je(),{width:o,height:c,transformString:u,userSelectionActive:d}=De(WC,Fe),g=Wb(),h=q.useRef(null);if(q.useEffect(()=>{a||h.current?.focus({preventScroll:!0})},[a]),Fb({nodeRef:h}),d||!o||!c)return null;const p=e?y=>{const b=s.getState().nodes.filter(C=>C.selected);e(y,b)}:void 0,v=y=>{Object.prototype.hasOwnProperty.call(jc,y.key)&&(y.preventDefault(),g({direction:jc[y.key],factor:y.shiftKey?4:1}))};return x.jsx("div",{className:ut(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:x.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:a?void 0:-1,onKeyDown:a?void 0:v,style:{width:o,height:c}})})}const jy=typeof window<"u"?window:void 0,tA=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function tw({children:e,onPaneClick:n,onPaneMouseEnter:a,onPaneMouseMove:s,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,paneClickDistance:d,deleteKeyCode:g,selectionKeyCode:h,selectionOnDrag:p,selectionMode:v,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:C,panActivationKeyCode:E,zoomActivationKeyCode:T,elementsSelectable:S,zoomOnScroll:N,zoomOnPinch:_,panOnScroll:A,panOnScrollSpeed:D,panOnScrollMode:z,zoomOnDoubleClick:$,panOnDrag:V,defaultViewport:K,translateExtent:oe,minZoom:W,maxZoom:ee,preventScrolling:ne,onSelectionContextMenu:j,noWheelClassName:P,noPanClassName:M,disableKeyboardA11y:U,onViewportChange:B,isControlledViewport:X}){const{nodesSelectionActive:H,userSelectionActive:R}=De(tA),k=oo(h,{target:jy}),G=oo(E,{target:jy}),Z=G||V,ie=G||A,ue=p&&Z!==!0,ce=k||R||ue;return zC({deleteKeyCode:g,multiSelectionKeyCode:C}),x.jsx(LC,{onPaneContextMenu:c,elementsSelectable:S,zoomOnScroll:N,zoomOnPinch:_,panOnScroll:ie,panOnScrollSpeed:D,panOnScrollMode:z,zoomOnDoubleClick:$,panOnDrag:!k&&Z,defaultViewport:K,translateExtent:oe,minZoom:W,maxZoom:ee,zoomActivationKeyCode:T,preventScrolling:ne,noWheelClassName:P,noPanClassName:M,onViewportChange:B,isControlledViewport:X,paneClickDistance:d,selectionOnDrag:ue,children:x.jsxs(qC,{onSelectionStart:y,onSelectionEnd:b,onPaneClick:n,onPaneMouseEnter:a,onPaneMouseMove:s,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,panOnDrag:Z,isSelecting:!!ce,selectionMode:v,selectionKeyPressed:k,paneClickDistance:d,selectionOnDrag:ue,children:[e,H&&x.jsx(eA,{onSelectionContextMenu:j,noPanClassName:M,disableKeyboardA11y:U})]})})}tw.displayName="FlowRenderer";const nA=q.memo(tw),rA=e=>n=>e?Mh(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(a=>a.id):Array.from(n.nodeLookup.keys());function aA(e){return De(q.useCallback(rA(e),[e]),Fe)}const sA=e=>e.updateNodeInternals;function iA(){const e=De(sA),[n]=q.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(a=>{const s=new Map;a.forEach(o=>{const c=o.target.getAttribute("data-id");s.set(c,{id:c,nodeElement:o.target,force:!0})}),e(s)}));return q.useEffect(()=>()=>{n?.disconnect()},[n]),n}function oA({node:e,nodeType:n,hasDimensions:a,resizeObserver:s}){const o=Je(),c=q.useRef(null),u=q.useRef(null),d=q.useRef(e.sourcePosition),g=q.useRef(e.targetPosition),h=q.useRef(n),p=a&&!!e.internals.handleBounds;return q.useEffect(()=>{c.current&&!e.hidden&&(!p||u.current!==c.current)&&(u.current&&s?.unobserve(u.current),s?.observe(c.current),u.current=c.current)},[p,e.hidden]),q.useEffect(()=>()=>{u.current&&(s?.unobserve(u.current),u.current=null)},[]),q.useEffect(()=>{if(c.current){const v=h.current!==n,y=d.current!==e.sourcePosition,b=g.current!==e.targetPosition;(v||y||b)&&(h.current=n,d.current=e.sourcePosition,g.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:c.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),c}function lA({id:e,onClick:n,onMouseEnter:a,onMouseMove:s,onMouseLeave:o,onContextMenu:c,onDoubleClick:u,nodesDraggable:d,elementsSelectable:g,nodesConnectable:h,nodesFocusable:p,resizeObserver:v,noDragClassName:y,noPanClassName:b,disableKeyboardA11y:C,rfId:E,nodeTypes:T,nodeClickDistance:S,onError:N}){const{node:_,internals:A,isParent:D}=De(le=>{const de=le.nodeLookup.get(e),Te=le.parentLookup.has(e);return{node:de,internals:de.internals,isParent:Te}},Fe);let z=_.type||"default",$=T?.[z]||ky[z];$===void 0&&(N?.("003",On.error003(z)),z="default",$=T?.default||ky.default);const V=!!(_.draggable||d&&typeof _.draggable>"u"),K=!!(_.selectable||g&&typeof _.selectable>"u"),oe=!!(_.connectable||h&&typeof _.connectable>"u"),W=!!(_.focusable||p&&typeof _.focusable>"u"),ee=Je(),ne=bb(_),j=oA({node:_,nodeType:z,hasDimensions:ne,resizeObserver:v}),P=Fb({nodeRef:j,disabled:_.hidden||!V,noDragClassName:y,handleSelector:_.dragHandle,nodeId:e,isSelectable:K,nodeClickDistance:S}),M=Wb();if(_.hidden)return null;const U=nr(_),B=FC(_),X=K||V||n||a||s||o,H=a?le=>a(le,{...A.userNode}):void 0,R=s?le=>s(le,{...A.userNode}):void 0,k=o?le=>o(le,{...A.userNode}):void 0,G=c?le=>c(le,{...A.userNode}):void 0,Z=u?le=>u(le,{...A.userNode}):void 0,ie=le=>{const{selectNodesOnDrag:de,nodeDragThreshold:Te}=ee.getState();K&&(!de||!V||Te>0)&&ch({id:e,store:ee,nodeRef:j}),n&&n(le,{...A.userNode})},ue=le=>{if(!(_b(le.nativeEvent)||C)){if(ub.includes(le.key)&&K){const de=le.key==="Escape";ch({id:e,store:ee,unselect:de,nodeRef:j})}else if(V&&_.selected&&Object.prototype.hasOwnProperty.call(jc,le.key)){le.preventDefault();const{ariaLabelConfig:de}=ee.getState();ee.setState({ariaLiveMessage:de["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),M({direction:jc[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(C||!j.current?.matches(":focus-visible"))return;const{transform:le,width:de,height:Te,autoPanOnNodeFocus:Se,setCenter:ye}=ee.getState();if(!Se)return;Mh(new Map([[e,_]]),{x:0,y:0,width:de,height:Te},le,!0).length>0||ye(_.position.x+U.width/2,_.position.y+U.height/2,{zoom:le[2]})};return x.jsx("div",{className:ut(["react-flow__node",`react-flow__node-${z}`,{[b]:V},_.className,{selected:_.selected,selectable:K,parent:D,draggable:V,dragging:P}]),ref:j,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:ne?"visible":"hidden",..._.style,...B},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:R,onMouseLeave:k,onContextMenu:G,onClick:ie,onDoubleClick:Z,onKeyDown:W?ue:void 0,tabIndex:W?0:void 0,onFocus:W?ce:void 0,role:_.ariaRole??(W?"group":void 0),"aria-roledescription":"node","aria-describedby":C?void 0:`${Pb}-${E}`,"aria-label":_.ariaLabel,..._.domAttributes,children:x.jsx(PC,{value:e,children:x.jsx($,{id:e,data:_.data,type:z,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:_.selected??!1,selectable:K,draggable:V,deletable:_.deletable??!0,isConnectable:oe,sourcePosition:_.sourcePosition,targetPosition:_.targetPosition,dragging:P,dragHandle:_.dragHandle,zIndex:A.z,parentId:_.parentId,...U})})})}var cA=q.memo(lA);const uA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function nw(e){const{nodesDraggable:n,nodesConnectable:a,nodesFocusable:s,elementsSelectable:o,onError:c}=De(uA,Fe),u=aA(e.onlyRenderVisibleElements),d=iA();return x.jsx("div",{className:"react-flow__nodes",style:Zc,children:u.map(g=>x.jsx(cA,{id:g,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:d,nodesDraggable:n,nodesConnectable:a,nodesFocusable:s,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:c},g))})}nw.displayName="NodeRenderer";const dA=q.memo(nw);function fA(e){return De(q.useCallback(a=>{if(!e)return a.edges.map(o=>o.id);const s=[];if(a.width&&a.height)for(const o of a.edges){const c=a.nodeLookup.get(o.source),u=a.nodeLookup.get(o.target);c&&u&&hT({sourceNode:c,targetNode:u,width:a.width,height:a.height,transform:a.transform})&&s.push(o.id)}return s},[e]),Fe)}const hA=({color:e="none",strokeWidth:n=1})=>{const a={strokeWidth:n,...e&&{stroke:e}};return x.jsx("polyline",{className:"arrow",style:a,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},gA=({color:e="none",strokeWidth:n=1})=>{const a={strokeWidth:n,...e&&{stroke:e,fill:e}};return x.jsx("polyline",{className:"arrowclosed",style:a,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Dy={[Ea.Arrow]:hA,[Ea.ArrowClosed]:gA};function mA(e){const n=Je();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(Dy,e)?Dy[e]:(n.getState().onError?.("009",On.error009(e)),null),[e])}const pA=({id:e,type:n,color:a,width:s=12.5,height:o=12.5,markerUnits:c="strokeWidth",strokeWidth:u,orient:d="auto-start-reverse"})=>{const g=mA(n);return g?x.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:d,refX:"0",refY:"0",children:x.jsx(g,{color:a,strokeWidth:u})}):null},rw=({defaultColor:e,rfId:n})=>{const a=De(c=>c.edges),s=De(c=>c.defaultEdgeOptions),o=q.useMemo(()=>wT(a,{id:n,defaultColor:e,defaultMarkerStart:s?.markerStart,defaultMarkerEnd:s?.markerEnd}),[a,s,n,e]);return o.length?x.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:x.jsx("defs",{children:o.map(c=>x.jsx(pA,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};rw.displayName="MarkerDefinitions";var yA=q.memo(rw);function aw({x:e,y:n,label:a,labelStyle:s,labelShowBg:o=!0,labelBgStyle:c,labelBgPadding:u=[2,4],labelBgBorderRadius:d=2,children:g,className:h,...p}){const[v,y]=q.useState({x:1,y:0,width:0,height:0}),b=ut(["react-flow__edge-textwrapper",h]),C=q.useRef(null);return q.useEffect(()=>{if(C.current){const E=C.current.getBBox();y({x:E.x,y:E.y,width:E.width,height:E.height})}},[a]),a?x.jsxs("g",{transform:`translate(${e-v.width/2} ${n-v.height/2})`,className:b,visibility:v.width?"visible":"hidden",...p,children:[o&&x.jsx("rect",{width:v.width+2*u[0],x:-u[0],y:-u[1],height:v.height+2*u[1],className:"react-flow__edge-textbg",style:c,rx:d,ry:d}),x.jsx("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:C,style:s,children:a}),g]}):null}aw.displayName="EdgeText";const vA=q.memo(aw);function Qc({path:e,labelX:n,labelY:a,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g,interactionWidth:h=20,...p}){return x.jsxs(x.Fragment,{children:[x.jsx("path",{...p,d:e,fill:"none",className:ut(["react-flow__edge-path",p.className])}),h?x.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,s&&vn(n)&&vn(a)?x.jsx(vA,{x:n,y:a,label:s,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g}):null]})}function zy({pos:e,x1:n,y1:a,x2:s,y2:o}){return e===he.Left||e===he.Right?[.5*(n+s),a]:[n,.5*(a+o)]}function sw({sourceX:e,sourceY:n,sourcePosition:a=he.Bottom,targetX:s,targetY:o,targetPosition:c=he.Top}){const[u,d]=zy({pos:a,x1:e,y1:n,x2:s,y2:o}),[g,h]=zy({pos:c,x1:s,y1:o,x2:e,y2:n}),[p,v,y,b]=Eb({sourceX:e,sourceY:n,targetX:s,targetY:o,sourceControlX:u,sourceControlY:d,targetControlX:g,targetControlY:h});return[`M${e},${n} C${u},${d} ${g},${h} ${s},${o}`,p,v,y,b]}function iw(e){return q.memo(({id:n,sourceX:a,sourceY:s,targetX:o,targetY:c,sourcePosition:u,targetPosition:d,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:C,markerEnd:E,markerStart:T,interactionWidth:S})=>{const[N,_,A]=sw({sourceX:a,sourceY:s,sourcePosition:u,targetX:o,targetY:c,targetPosition:d}),D=e.isInternal?void 0:n;return x.jsx(Qc,{id:D,path:N,labelX:_,labelY:A,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:C,markerEnd:E,markerStart:T,interactionWidth:S})})}const bA=iw({isInternal:!1}),ow=iw({isInternal:!0});bA.displayName="SimpleBezierEdge";ow.displayName="SimpleBezierEdgeInternal";function lw(e){return q.memo(({id:n,sourceX:a,sourceY:s,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,sourcePosition:b=he.Bottom,targetPosition:C=he.Top,markerEnd:E,markerStart:T,pathOptions:S,interactionWidth:N})=>{const[_,A,D]=sh({sourceX:a,sourceY:s,sourcePosition:b,targetX:o,targetY:c,targetPosition:C,borderRadius:S?.borderRadius,offset:S?.offset,stepPosition:S?.stepPosition}),z=e.isInternal?void 0:n;return x.jsx(Qc,{id:z,path:_,labelX:A,labelY:D,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:E,markerStart:T,interactionWidth:N})})}const cw=lw({isInternal:!1}),uw=lw({isInternal:!0});cw.displayName="SmoothStepEdge";uw.displayName="SmoothStepEdgeInternal";function dw(e){return q.memo(({id:n,...a})=>{const s=e.isInternal?void 0:n;return x.jsx(cw,{...a,id:s,pathOptions:q.useMemo(()=>({borderRadius:0,offset:a.pathOptions?.offset}),[a.pathOptions?.offset])})})}const wA=dw({isInternal:!1}),fw=dw({isInternal:!0});wA.displayName="StepEdge";fw.displayName="StepEdgeInternal";function hw(e){return q.memo(({id:n,sourceX:a,sourceY:s,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:C,interactionWidth:E})=>{const[T,S,N]=Nb({sourceX:a,sourceY:s,targetX:o,targetY:c}),_=e.isInternal?void 0:n;return x.jsx(Qc,{id:_,path:T,labelX:S,labelY:N,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:C,interactionWidth:E})})}const xA=hw({isInternal:!1}),gw=hw({isInternal:!0});xA.displayName="StraightEdge";gw.displayName="StraightEdgeInternal";function mw(e){return q.memo(({id:n,sourceX:a,sourceY:s,targetX:o,targetY:c,sourcePosition:u=he.Bottom,targetPosition:d=he.Top,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:C,markerEnd:E,markerStart:T,pathOptions:S,interactionWidth:N})=>{const[_,A,D]=Tb({sourceX:a,sourceY:s,sourcePosition:u,targetX:o,targetY:c,targetPosition:d,curvature:S?.curvature}),z=e.isInternal?void 0:n;return x.jsx(Qc,{id:z,path:_,labelX:A,labelY:D,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:C,markerEnd:E,markerStart:T,interactionWidth:N})})}const _A=mw({isInternal:!1}),pw=mw({isInternal:!0});_A.displayName="BezierEdge";pw.displayName="BezierEdgeInternal";const $y={default:pw,straight:gw,step:fw,smoothstep:uw,simplebezier:ow},Uy={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},SA=(e,n,a)=>a===he.Left?e-n:a===he.Right?e+n:e,EA=(e,n,a)=>a===he.Top?e-n:a===he.Bottom?e+n:e,Ly="react-flow__edgeupdater";function Hy({position:e,centerX:n,centerY:a,radius:s=10,onMouseDown:o,onMouseEnter:c,onMouseOut:u,type:d}){return x.jsx("circle",{onMouseDown:o,onMouseEnter:c,onMouseOut:u,className:ut([Ly,`${Ly}-${d}`]),cx:SA(n,s,e),cy:EA(a,s,e),r:s,stroke:"transparent",fill:"transparent"})}function TA({isReconnectable:e,reconnectRadius:n,edge:a,sourceX:s,sourceY:o,targetX:c,targetY:u,sourcePosition:d,targetPosition:g,onReconnect:h,onReconnectStart:p,onReconnectEnd:v,setReconnecting:y,setUpdateHover:b}){const C=Je(),E=(A,D)=>{if(A.button!==0)return;const{autoPanOnConnect:z,domNode:$,isValidConnection:V,connectionMode:K,connectionRadius:oe,lib:W,onConnectStart:ee,onConnectEnd:ne,cancelConnection:j,nodeLookup:P,rfId:M,panBy:U,updateConnection:B}=C.getState(),X=D.type==="target",H=(G,Z)=>{y(!1),v?.(G,a,D.type,Z)},R=G=>h?.(a,G),k=(G,Z)=>{y(!0),p?.(A,a,D.type),ee?.(G,Z)};lh.onPointerDown(A.nativeEvent,{autoPanOnConnect:z,connectionMode:K,connectionRadius:oe,domNode:$,handleId:D.id,nodeId:D.nodeId,nodeLookup:P,isTarget:X,edgeUpdaterType:D.type,lib:W,flowId:M,cancelConnection:j,panBy:U,isValidConnection:V,onConnect:R,onConnectStart:k,onConnectEnd:ne,onReconnectEnd:H,updateConnection:B,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,dragThreshold:C.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},T=A=>E(A,{nodeId:a.target,id:a.targetHandle??null,type:"target"}),S=A=>E(A,{nodeId:a.source,id:a.sourceHandle??null,type:"source"}),N=()=>b(!0),_=()=>b(!1);return x.jsxs(x.Fragment,{children:[(e===!0||e==="source")&&x.jsx(Hy,{position:d,centerX:s,centerY:o,radius:n,onMouseDown:T,onMouseEnter:N,onMouseOut:_,type:"source"}),(e===!0||e==="target")&&x.jsx(Hy,{position:g,centerX:c,centerY:u,radius:n,onMouseDown:S,onMouseEnter:N,onMouseOut:_,type:"target"})]})}function CA({id:e,edgesFocusable:n,edgesReconnectable:a,elementsSelectable:s,onClick:o,onDoubleClick:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,rfId:C,edgeTypes:E,noPanClassName:T,onError:S,disableKeyboardA11y:N}){let _=De(ye=>ye.edgeLookup.get(e));const A=De(ye=>ye.defaultEdgeOptions);_=A?{...A,..._}:_;let D=_.type||"default",z=E?.[D]||$y[D];z===void 0&&(S?.("011",On.error011(D)),D="default",z=E?.default||$y.default);const $=!!(_.focusable||n&&typeof _.focusable>"u"),V=typeof v<"u"&&(_.reconnectable||a&&typeof _.reconnectable>"u"),K=!!(_.selectable||s&&typeof _.selectable>"u"),oe=q.useRef(null),[W,ee]=q.useState(!1),[ne,j]=q.useState(!1),P=Je(),{zIndex:M,sourceX:U,sourceY:B,targetX:X,targetY:H,sourcePosition:R,targetPosition:k}=De(q.useCallback(ye=>{const _e=ye.nodeLookup.get(_.source),Ce=ye.nodeLookup.get(_.target);if(!_e||!Ce)return{zIndex:_.zIndex,...Uy};const Ie=bT({id:e,sourceNode:_e,targetNode:Ce,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:ye.connectionMode,onError:S});return{zIndex:fT({selected:_.selected,zIndex:_.zIndex,sourceNode:_e,targetNode:Ce,elevateOnSelect:ye.elevateEdgesOnSelect}),...Ie||Uy}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Fe),G=q.useMemo(()=>_.markerStart?`url('#${ih(_.markerStart,C)}')`:void 0,[_.markerStart,C]),Z=q.useMemo(()=>_.markerEnd?`url('#${ih(_.markerEnd,C)}')`:void 0,[_.markerEnd,C]);if(_.hidden||U===null||B===null||X===null||H===null)return null;const ie=ye=>{const{addSelectedEdges:_e,unselectNodesAndEdges:Ce,multiSelectionActive:Ie}=P.getState();K&&(P.setState({nodesSelectionActive:!1}),_.selected&&Ie?(Ce({nodes:[],edges:[_]}),oe.current?.blur()):_e([e])),o&&o(ye,_)},ue=c?ye=>{c(ye,{..._})}:void 0,ce=u?ye=>{u(ye,{..._})}:void 0,le=d?ye=>{d(ye,{..._})}:void 0,de=g?ye=>{g(ye,{..._})}:void 0,Te=h?ye=>{h(ye,{..._})}:void 0,Se=ye=>{if(!N&&ub.includes(ye.key)&&K){const{unselectNodesAndEdges:_e,addSelectedEdges:Ce}=P.getState();ye.key==="Escape"?(oe.current?.blur(),_e({edges:[_]})):Ce([e])}};return x.jsx("svg",{style:{zIndex:M},children:x.jsxs("g",{className:ut(["react-flow__edge",`react-flow__edge-${D}`,_.className,T,{selected:_.selected,animated:_.animated,inactive:!K&&!o,updating:W,selectable:K}]),onClick:ie,onDoubleClick:ue,onContextMenu:ce,onMouseEnter:le,onMouseMove:de,onMouseLeave:Te,onKeyDown:$?Se:void 0,tabIndex:$?0:void 0,role:_.ariaRole??($?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":$?`${Gb}-${C}`:void 0,ref:oe,..._.domAttributes,children:[!ne&&x.jsx(z,{id:e,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:K,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:U,sourceY:B,targetX:X,targetY:H,sourcePosition:R,targetPosition:k,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:G,markerEnd:Z,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),V&&x.jsx(TA,{edge:_,isReconnectable:V,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,sourceX:U,sourceY:B,targetX:X,targetY:H,sourcePosition:R,targetPosition:k,setUpdateHover:ee,setReconnecting:j})]})})}var AA=q.memo(CA);const NA=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function yw({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:a,edgeTypes:s,noPanClassName:o,onReconnect:c,onEdgeContextMenu:u,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:v,onEdgeDoubleClick:y,onReconnectStart:b,onReconnectEnd:C,disableKeyboardA11y:E}){const{edgesFocusable:T,edgesReconnectable:S,elementsSelectable:N,onError:_}=De(NA,Fe),A=fA(n);return x.jsxs("div",{className:"react-flow__edges",children:[x.jsx(yA,{defaultColor:e,rfId:a}),A.map(D=>x.jsx(AA,{id:D,edgesFocusable:T,edgesReconnectable:S,elementsSelectable:N,noPanClassName:o,onReconnect:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,onClick:p,reconnectRadius:v,onDoubleClick:y,onReconnectStart:b,onReconnectEnd:C,rfId:a,onError:_,edgeTypes:s,disableKeyboardA11y:E},D))]})}yw.displayName="EdgeRenderer";const OA=q.memo(yw),RA=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function MA({children:e}){const n=De(RA);return x.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function kA(e){const n=Lh(),a=q.useRef(!1);q.useEffect(()=>{!a.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),a.current=!0)},[e,n.viewportInitialized])}const jA=e=>e.panZoom?.syncViewport;function DA(e){const n=De(jA),a=Je();return q.useEffect(()=>{e&&(n?.(e),a.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function zA(e){return e.connection.inProgress?{...e.connection,to:_o(e.connection.to,e.transform)}:{...e.connection}}function $A(e){return zA}function UA(e){const n=$A();return De(n,Fe)}const LA=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function HA({containerStyle:e,style:n,type:a,component:s}){const{nodesConnectable:o,width:c,height:u,isValid:d,inProgress:g}=De(LA,Fe);return!(c&&o&&g)?null:x.jsx("svg",{style:e,width:c,height:u,className:"react-flow__connectionline react-flow__container",children:x.jsx("g",{className:ut(["react-flow__connection",hb(d)]),children:x.jsx(vw,{style:n,type:a,CustomComponent:s,isValid:d})})})}const vw=({style:e,type:n=Lr.Bezier,CustomComponent:a,isValid:s})=>{const{inProgress:o,from:c,fromNode:u,fromHandle:d,fromPosition:g,to:h,toNode:p,toHandle:v,toPosition:y}=UA();if(!o)return;if(a)return x.jsx(a,{connectionLineType:n,connectionLineStyle:e,fromNode:u,fromHandle:d,fromX:c.x,fromY:c.y,toX:h.x,toY:h.y,fromPosition:g,toPosition:y,connectionStatus:hb(s),toNode:p,toHandle:v});let b="";const C={sourceX:c.x,sourceY:c.y,sourcePosition:g,targetX:h.x,targetY:h.y,targetPosition:y};switch(n){case Lr.Bezier:[b]=Tb(C);break;case Lr.SimpleBezier:[b]=sw(C);break;case Lr.Step:[b]=sh({...C,borderRadius:0});break;case Lr.SmoothStep:[b]=sh(C);break;default:[b]=Nb(C)}return x.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};vw.displayName="ConnectionLine";const BA={};function By(e=BA){q.useRef(e),Je(),q.useEffect(()=>{},[e])}function IA(){Je(),q.useRef(!1),q.useEffect(()=>{},[])}function bw({nodeTypes:e,edgeTypes:n,onInit:a,onNodeClick:s,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:b,connectionLineType:C,connectionLineStyle:E,connectionLineComponent:T,connectionLineContainerStyle:S,selectionKeyCode:N,selectionOnDrag:_,selectionMode:A,multiSelectionKeyCode:D,panActivationKeyCode:z,zoomActivationKeyCode:$,deleteKeyCode:V,onlyRenderVisibleElements:K,elementsSelectable:oe,defaultViewport:W,translateExtent:ee,minZoom:ne,maxZoom:j,preventScrolling:P,defaultMarkerColor:M,zoomOnScroll:U,zoomOnPinch:B,panOnScroll:X,panOnScrollSpeed:H,panOnScrollMode:R,zoomOnDoubleClick:k,panOnDrag:G,onPaneClick:Z,onPaneMouseEnter:ie,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:de,paneClickDistance:Te,nodeClickDistance:Se,onEdgeContextMenu:ye,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,noDragClassName:ar,noWheelClassName:sr,noPanClassName:Vr,disableKeyboardA11y:Pr,nodeExtent:yt,rfId:Na,viewport:Mn,onViewportChange:ir}){return By(e),By(n),IA(),kA(a),DA(Mn),x.jsx(nA,{onPaneClick:Z,onPaneMouseEnter:ie,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneContextMenu:de,onPaneScroll:le,paneClickDistance:Te,deleteKeyCode:V,selectionKeyCode:N,selectionOnDrag:_,selectionMode:A,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:D,panActivationKeyCode:z,zoomActivationKeyCode:$,elementsSelectable:oe,zoomOnScroll:U,zoomOnPinch:B,zoomOnDoubleClick:k,panOnScroll:X,panOnScrollSpeed:H,panOnScrollMode:R,panOnDrag:G,defaultViewport:W,translateExtent:ee,minZoom:ne,maxZoom:j,onSelectionContextMenu:v,preventScrolling:P,noDragClassName:ar,noWheelClassName:sr,noPanClassName:Vr,disableKeyboardA11y:Pr,onViewportChange:ir,isControlledViewport:!!Mn,children:x.jsxs(MA,{children:[x.jsx(OA,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:u,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,onlyRenderVisibleElements:K,onEdgeContextMenu:ye,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,defaultMarkerColor:M,noPanClassName:Vr,disableKeyboardA11y:Pr,rfId:Na}),x.jsx(HA,{style:E,type:C,component:T,containerStyle:S}),x.jsx("div",{className:"react-flow__edgelabel-renderer"}),x.jsx(dA,{nodeTypes:e,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:Se,onlyRenderVisibleElements:K,noPanClassName:Vr,noDragClassName:ar,disableKeyboardA11y:Pr,nodeExtent:yt,rfId:Na}),x.jsx("div",{className:"react-flow__viewport-portal"})]})})}bw.displayName="GraphView";const qA=q.memo(bw),Iy=({nodes:e,edges:n,defaultNodes:a,defaultEdges:s,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:v}={})=>{const y=new Map,b=new Map,C=new Map,E=new Map,T=s??n??[],S=a??e??[],N=p??[0,0],_=v??no;Mb(C,E,T);const A=oh(S,y,b,{nodeOrigin:N,nodeExtent:_,elevateNodesOnSelect:!1});let D=[0,0,1];if(u&&o&&c){const z=wo(y,{filter:oe=>!!((oe.width||oe.initialWidth)&&(oe.height||oe.initialHeight))}),{x:$,y:V,zoom:K}=kh(z,o,c,g,h,d?.padding??.1);D=[$,V,K]}return{rfId:"1",width:o??0,height:c??0,transform:D,nodes:S,nodesInitialized:A,nodeLookup:y,parentLookup:b,edges:T,edgeLookup:E,connectionLookup:C,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:a!==void 0,hasDefaultEdges:s!==void 0,panZoom:null,minZoom:g,maxZoom:h,translateExtent:no,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Bs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:d,fitViewResolver:null,connection:{...fb},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:iT,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:db}},VA=({nodes:e,edges:n,defaultNodes:a,defaultEdges:s,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v})=>oC((y,b)=>{async function C(){const{nodeLookup:E,panZoom:T,fitViewOptions:S,fitViewResolver:N,width:_,height:A,minZoom:D,maxZoom:z}=b();T&&(await aT({nodes:E,width:_,height:A,panZoom:T,minZoom:D,maxZoom:z},S),N?.resolve(!0),y({fitViewResolver:null}))}return{...Iy({nodes:e,edges:n,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v,defaultNodes:a,defaultEdges:s}),setNodes:E=>{const{nodeLookup:T,parentLookup:S,nodeOrigin:N,elevateNodesOnSelect:_,fitViewQueued:A}=b(),D=oh(E,T,S,{nodeOrigin:N,nodeExtent:v,elevateNodesOnSelect:_,checkEquality:!0});A&&D?(C(),y({nodes:E,nodesInitialized:D,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:E,nodesInitialized:D})},setEdges:E=>{const{connectionLookup:T,edgeLookup:S}=b();Mb(T,S,E),y({edges:E})},setDefaultNodesAndEdges:(E,T)=>{if(E){const{setNodes:S}=b();S(E),y({hasDefaultNodes:!0})}if(T){const{setEdges:S}=b();S(T),y({hasDefaultEdges:!0})}},updateNodeInternals:E=>{const{triggerNodeChanges:T,nodeLookup:S,parentLookup:N,domNode:_,nodeOrigin:A,nodeExtent:D,debug:z,fitViewQueued:$}=b(),{changes:V,updatedInternals:K}=AT(E,S,N,_,A,D);K&&(ST(S,N,{nodeOrigin:A,nodeExtent:D}),$?(C(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),V?.length>0&&(z&&console.log("React Flow: trigger node changes",V),T?.(V)))},updateNodePositions:(E,T=!1)=>{const S=[],N=[],{nodeLookup:_,triggerNodeChanges:A}=b();for(const[D,z]of E){const $=_.get(D),V=!!($?.expandParent&&$?.parentId&&z?.position),K={id:D,type:"position",position:V?{x:Math.max(0,z.position.x),y:Math.max(0,z.position.y)}:z.position,dragging:T};V&&$.parentId&&S.push({id:D,parentId:$.parentId,rect:{...z.internals.positionAbsolute,width:z.measured.width??0,height:z.measured.height??0}}),N.push(K)}if(S.length>0){const{parentLookup:D,nodeOrigin:z}=b(),$=Uh(S,_,D,z);N.push(...$)}A(N)},triggerNodeChanges:E=>{const{onNodesChange:T,setNodes:S,nodes:N,hasDefaultNodes:_,debug:A}=b();if(E?.length){if(_){const D=Kb(E,N);S(D)}A&&console.log("React Flow: trigger node changes",E),T?.(E)}},triggerEdgeChanges:E=>{const{onEdgesChange:T,setEdges:S,edges:N,hasDefaultEdges:_,debug:A}=b();if(E?.length){if(_){const D=Zb(E,N);S(D)}A&&console.log("React Flow: trigger edge changes",E),T?.(E)}},addSelectedNodes:E=>{const{multiSelectionActive:T,edgeLookup:S,nodeLookup:N,triggerNodeChanges:_,triggerEdgeChanges:A}=b();if(T){const D=E.map(z=>ma(z,!0));_(D);return}_(js(N,new Set([...E]),!0)),A(js(S))},addSelectedEdges:E=>{const{multiSelectionActive:T,edgeLookup:S,nodeLookup:N,triggerNodeChanges:_,triggerEdgeChanges:A}=b();if(T){const D=E.map(z=>ma(z,!0));A(D);return}A(js(S,new Set([...E]))),_(js(N,new Set,!0))},unselectNodesAndEdges:({nodes:E,edges:T}={})=>{const{edges:S,nodes:N,nodeLookup:_,triggerNodeChanges:A,triggerEdgeChanges:D}=b(),z=E||N,$=T||S,V=z.map(oe=>{const W=_.get(oe.id);return W&&(W.selected=!1),ma(oe.id,!1)}),K=$.map(oe=>ma(oe.id,!1));A(V),D(K)},setMinZoom:E=>{const{panZoom:T,maxZoom:S}=b();T?.setScaleExtent([E,S]),y({minZoom:E})},setMaxZoom:E=>{const{panZoom:T,minZoom:S}=b();T?.setScaleExtent([S,E]),y({maxZoom:E})},setTranslateExtent:E=>{b().panZoom?.setTranslateExtent(E),y({translateExtent:E})},resetSelectedElements:()=>{const{edges:E,nodes:T,triggerNodeChanges:S,triggerEdgeChanges:N,elementsSelectable:_}=b();if(!_)return;const A=T.reduce((z,$)=>$.selected?[...z,ma($.id,!1)]:z,[]),D=E.reduce((z,$)=>$.selected?[...z,ma($.id,!1)]:z,[]);S(A),N(D)},setNodeExtent:E=>{const{nodes:T,nodeLookup:S,parentLookup:N,nodeOrigin:_,elevateNodesOnSelect:A,nodeExtent:D}=b();E[0][0]===D[0][0]&&E[0][1]===D[0][1]&&E[1][0]===D[1][0]&&E[1][1]===D[1][1]||(oh(T,S,N,{nodeOrigin:_,nodeExtent:E,elevateNodesOnSelect:A,checkEquality:!1}),y({nodeExtent:E}))},panBy:E=>{const{transform:T,width:S,height:N,panZoom:_,translateExtent:A}=b();return NT({delta:E,panZoom:_,transform:T,translateExtent:A,width:S,height:N})},setCenter:async(E,T,S)=>{const{width:N,height:_,maxZoom:A,panZoom:D}=b();if(!D)return Promise.resolve(!1);const z=typeof S?.zoom<"u"?S.zoom:A;return await D.setViewport({x:N/2-E*z,y:_/2-T*z,zoom:z},{duration:S?.duration,ease:S?.ease,interpolate:S?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...fb}})},updateConnection:E=>{y({connection:E})},reset:()=>y({...Iy()})}},Object.is);function PA({initialNodes:e,initialEdges:n,defaultNodes:a,defaultEdges:s,initialWidth:o,initialHeight:c,initialMinZoom:u,initialMaxZoom:d,initialFitViewOptions:g,fitView:h,nodeOrigin:p,nodeExtent:v,children:y}){const[b]=q.useState(()=>VA({nodes:e,edges:n,defaultNodes:a,defaultEdges:s,width:o,height:c,fitView:h,minZoom:u,maxZoom:d,fitViewOptions:g,nodeOrigin:p,nodeExtent:v}));return x.jsx(lC,{value:b,children:x.jsx(MC,{children:y})})}function GA({children:e,nodes:n,edges:a,defaultNodes:s,defaultEdges:o,width:c,height:u,fitView:d,fitViewOptions:g,minZoom:h,maxZoom:p,nodeOrigin:v,nodeExtent:y}){return q.useContext(Xc)?x.jsx(x.Fragment,{children:e}):x.jsx(PA,{initialNodes:n,initialEdges:a,defaultNodes:s,defaultEdges:o,initialWidth:c,initialHeight:u,fitView:d,initialFitViewOptions:g,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:v,nodeExtent:y,children:e})}const YA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function XA({nodes:e,edges:n,defaultNodes:a,defaultEdges:s,className:o,nodeTypes:c,edgeTypes:u,onNodeClick:d,onEdgeClick:g,onInit:h,onMove:p,onMoveStart:v,onMoveEnd:y,onConnect:b,onConnectStart:C,onConnectEnd:E,onClickConnectStart:T,onClickConnectEnd:S,onNodeMouseEnter:N,onNodeMouseMove:_,onNodeMouseLeave:A,onNodeContextMenu:D,onNodeDoubleClick:z,onNodeDragStart:$,onNodeDrag:V,onNodeDragStop:K,onNodesDelete:oe,onEdgesDelete:W,onDelete:ee,onSelectionChange:ne,onSelectionDragStart:j,onSelectionDrag:P,onSelectionDragStop:M,onSelectionContextMenu:U,onSelectionStart:B,onSelectionEnd:X,onBeforeDelete:H,connectionMode:R,connectionLineType:k=Lr.Bezier,connectionLineStyle:G,connectionLineComponent:Z,connectionLineContainerStyle:ie,deleteKeyCode:ue="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:de=ro.Full,panActivationKeyCode:Te="Space",multiSelectionKeyCode:Se=so()?"Meta":"Control",zoomActivationKeyCode:ye=so()?"Meta":"Control",snapToGrid:_e,snapGrid:Ce,onlyRenderVisibleElements:Ie=!1,selectNodesOnDrag:Ge,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ar,nodeOrigin:sr=Yb,edgesFocusable:Vr,edgesReconnectable:Pr,elementsSelectable:yt=!0,defaultViewport:Na=xC,minZoom:Mn=.5,maxZoom:ir=2,translateExtent:Gr=no,preventScrolling:nu=!0,nodeExtent:Oa,defaultMarkerColor:ru="#b1b1b7",zoomOnScroll:au=!0,zoomOnPinch:Yr=!0,panOnScroll:At=!1,panOnScrollSpeed:xn=.5,panOnScrollMode:Nt=Sa.Free,zoomOnDoubleClick:su=!0,panOnDrag:iu=!0,onPaneClick:ou,onPaneMouseEnter:Ra,onPaneMouseMove:Ma,onPaneMouseLeave:ka,onPaneScroll:kn,onPaneContextMenu:ja,paneClickDistance:Xr=0,nodeClickDistance:lu=0,children:No,onReconnect:Xs,onReconnectStart:Kr,onReconnectEnd:cu,onEdgeContextMenu:Oo,onEdgeDoubleClick:Ro,onEdgeMouseEnter:Mo,onEdgeMouseMove:Ks,onEdgeMouseLeave:Zs,reconnectRadius:ko=10,onNodesChange:jo,onEdgesChange:_n,noDragClassName:dt="nodrag",noWheelClassName:Et="nowheel",noPanClassName:jn="nopan",fitView:Da,fitViewOptions:Do,connectOnClick:uu,attributionPosition:zo,proOptions:Zr,defaultEdgeOptions:Qs,elevateNodesOnSelect:or,elevateEdgesOnSelect:lr,disableKeyboardA11y:cr=!1,autoPanOnConnect:ur,autoPanOnNodeDrag:at,autoPanSpeed:$o,connectionRadius:Uo,isValidConnection:Dn,onError:dr,style:du,id:Js,nodeDragThreshold:Lo,connectionDragThreshold:fu,viewport:za,onViewportChange:$a,width:cn,height:Rt,colorMode:Ho="light",debug:hu,onScroll:Ua,ariaLabelConfig:Bo,...La},gu){const Tt=Js||"1",Fs=TC(Ho),Io=q.useCallback(Ha=>{Ha.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ua?.(Ha)},[Ua]);return x.jsx("div",{"data-testid":"rf__wrapper",...La,onScroll:Io,style:{...du,...YA},ref:gu,className:ut(["react-flow",o,Fs]),id:Js,role:"application",children:x.jsxs(GA,{nodes:e,edges:n,width:cn,height:Rt,fitView:Da,fitViewOptions:Do,minZoom:Mn,maxZoom:ir,nodeOrigin:sr,nodeExtent:Oa,children:[x.jsx(qA,{onInit:h,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:N,onNodeMouseMove:_,onNodeMouseLeave:A,onNodeContextMenu:D,onNodeDoubleClick:z,nodeTypes:c,edgeTypes:u,connectionLineType:k,connectionLineStyle:G,connectionLineComponent:Z,connectionLineContainerStyle:ie,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:de,deleteKeyCode:ue,multiSelectionKeyCode:Se,panActivationKeyCode:Te,zoomActivationKeyCode:ye,onlyRenderVisibleElements:Ie,defaultViewport:Na,translateExtent:Gr,minZoom:Mn,maxZoom:ir,preventScrolling:nu,zoomOnScroll:au,zoomOnPinch:Yr,zoomOnDoubleClick:su,panOnScroll:At,panOnScrollSpeed:xn,panOnScrollMode:Nt,panOnDrag:iu,onPaneClick:ou,onPaneMouseEnter:Ra,onPaneMouseMove:Ma,onPaneMouseLeave:ka,onPaneScroll:kn,onPaneContextMenu:ja,paneClickDistance:Xr,nodeClickDistance:lu,onSelectionContextMenu:U,onSelectionStart:B,onSelectionEnd:X,onReconnect:Xs,onReconnectStart:Kr,onReconnectEnd:cu,onEdgeContextMenu:Oo,onEdgeDoubleClick:Ro,onEdgeMouseEnter:Mo,onEdgeMouseMove:Ks,onEdgeMouseLeave:Zs,reconnectRadius:ko,defaultMarkerColor:ru,noDragClassName:dt,noWheelClassName:Et,noPanClassName:jn,rfId:Tt,disableKeyboardA11y:cr,nodeExtent:Oa,viewport:za,onViewportChange:$a}),x.jsx(EC,{nodes:e,edges:n,defaultNodes:a,defaultEdges:s,onConnect:b,onConnectStart:C,onConnectEnd:E,onClickConnectStart:T,onClickConnectEnd:S,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ar,edgesFocusable:Vr,edgesReconnectable:Pr,elementsSelectable:yt,elevateNodesOnSelect:or,elevateEdgesOnSelect:lr,minZoom:Mn,maxZoom:ir,nodeExtent:Oa,onNodesChange:jo,onEdgesChange:_n,snapToGrid:_e,snapGrid:Ce,connectionMode:R,translateExtent:Gr,connectOnClick:uu,defaultEdgeOptions:Qs,fitView:Da,fitViewOptions:Do,onNodesDelete:oe,onEdgesDelete:W,onDelete:ee,onNodeDragStart:$,onNodeDrag:V,onNodeDragStop:K,onSelectionDrag:P,onSelectionDragStart:j,onSelectionDragStop:M,onMove:p,onMoveStart:v,onMoveEnd:y,noPanClassName:jn,nodeOrigin:sr,rfId:Tt,autoPanOnConnect:ur,autoPanOnNodeDrag:at,autoPanSpeed:$o,onError:dr,connectionRadius:Uo,isValidConnection:Dn,selectNodesOnDrag:Ge,nodeDragThreshold:Lo,connectionDragThreshold:fu,onBeforeDelete:H,debug:hu,ariaLabelConfig:Bo}),x.jsx(wC,{onSelectionChange:ne}),No,x.jsx(mC,{proOptions:Zr,position:zo}),x.jsx(gC,{rfId:Tt,disableKeyboardA11y:cr})]})})}var ww=Qb(XA);function KA(e){const[n,a]=q.useState(e),s=q.useCallback(o=>a(c=>Kb(o,c)),[]);return[n,a,s]}function ZA(e){const[n,a]=q.useState(e),s=q.useCallback(o=>a(c=>Zb(o,c)),[]);return[n,a,s]}function QA({dimensions:e,lineWidth:n,variant:a,className:s}){return x.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ut(["react-flow__background-pattern",a,s])})}function JA({radius:e,className:n}){return x.jsx("circle",{cx:e,cy:e,r:e,className:ut(["react-flow__background-pattern","dots",n])})}var Br;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Br||(Br={}));const FA={[Br.Dots]:1,[Br.Lines]:1,[Br.Cross]:6},WA=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function xw({id:e,variant:n=Br.Dots,gap:a=20,size:s,lineWidth:o=1,offset:c=0,color:u,bgColor:d,style:g,className:h,patternClassName:p}){const v=q.useRef(null),{transform:y,patternId:b}=De(WA,Fe),C=s||FA[n],E=n===Br.Dots,T=n===Br.Cross,S=Array.isArray(a)?a:[a,a],N=[S[0]*y[2]||1,S[1]*y[2]||1],_=C*y[2],A=Array.isArray(c)?c:[c,c],D=T?[_,_]:N,z=[A[0]*y[2]||1+D[0]/2,A[1]*y[2]||1+D[1]/2],$=`${b}${e||""}`;return x.jsxs("svg",{className:ut(["react-flow__background",h]),style:{...g,...Zc,"--xy-background-color-props":d,"--xy-background-pattern-color-props":u},ref:v,"data-testid":"rf__background",children:[x.jsx("pattern",{id:$,x:y[0]%N[0],y:y[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${z[0]},-${z[1]})`,children:E?x.jsx(JA,{radius:_/2,className:p}):x.jsx(QA,{dimensions:D,lineWidth:o,variant:n,className:p})}),x.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${$})`})]})}xw.displayName="Background";const _w=q.memo(xw);function eN(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:x.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function tN(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:x.jsx("path",{d:"M0 0h32v4.2H0z"})})}function nN(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:x.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function rN(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:x.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function aN(){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:x.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ic({children:e,className:n,...a}){return x.jsx("button",{type:"button",className:ut(["react-flow__controls-button",n]),...a,children:e})}const sN=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Sw({style:e,showZoom:n=!0,showFitView:a=!0,showInteractive:s=!0,fitViewOptions:o,onZoomIn:c,onZoomOut:u,onFitView:d,onInteractiveChange:g,className:h,children:p,position:v="bottom-left",orientation:y="vertical","aria-label":b}){const C=Je(),{isInteractive:E,minZoomReached:T,maxZoomReached:S,ariaLabelConfig:N}=De(sN,Fe),{zoomIn:_,zoomOut:A,fitView:D}=Lh(),z=()=>{_(),c?.()},$=()=>{A(),u?.()},V=()=>{D(o),d?.()},K=()=>{C.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),g?.(!E)},oe=y==="horizontal"?"horizontal":"vertical";return x.jsxs(Kc,{className:ut(["react-flow__controls",oe,h]),position:v,style:e,"data-testid":"rf__controls","aria-label":b??N["controls.ariaLabel"],children:[n&&x.jsxs(x.Fragment,{children:[x.jsx(ic,{onClick:z,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:S,children:x.jsx(eN,{})}),x.jsx(ic,{onClick:$,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:T,children:x.jsx(tN,{})})]}),a&&x.jsx(ic,{className:"react-flow__controls-fitview",onClick:V,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:x.jsx(nN,{})}),s&&x.jsx(ic,{className:"react-flow__controls-interactive",onClick:K,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:E?x.jsx(aN,{}):x.jsx(rN,{})}),p]})}Sw.displayName="Controls";const Ew=q.memo(Sw);function iN({id:e,x:n,y:a,width:s,height:o,style:c,color:u,strokeColor:d,strokeWidth:g,className:h,borderRadius:p,shapeRendering:v,selected:y,onClick:b}){const{background:C,backgroundColor:E}=c||{},T=u||C||E;return x.jsx("rect",{className:ut(["react-flow__minimap-node",{selected:y},h]),x:n,y:a,rx:p,ry:p,width:s,height:o,style:{fill:T,stroke:d,strokeWidth:g},shapeRendering:v,onClick:b?S=>b(S,e):void 0})}const oN=q.memo(iN),lN=e=>e.nodes.map(n=>n.id),Lf=e=>e instanceof Function?e:()=>e;function cN({nodeStrokeColor:e,nodeColor:n,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:c=oN,onClick:u}){const d=De(lN,Fe),g=Lf(n),h=Lf(e),p=Lf(a),v=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return x.jsx(x.Fragment,{children:d.map(y=>x.jsx(dN,{id:y,nodeColorFunc:g,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:s,nodeStrokeWidth:o,NodeComponent:c,onClick:u,shapeRendering:v},y))})}function uN({id:e,nodeColorFunc:n,nodeStrokeColorFunc:a,nodeClassNameFunc:s,nodeBorderRadius:o,nodeStrokeWidth:c,shapeRendering:u,NodeComponent:d,onClick:g}){const{node:h,x:p,y:v,width:y,height:b}=De(C=>{const{internals:E}=C.nodeLookup.get(e),T=E.userNode,{x:S,y:N}=E.positionAbsolute,{width:_,height:A}=nr(T);return{node:T,x:S,y:N,width:_,height:A}},Fe);return!h||h.hidden||!bb(h)?null:x.jsx(d,{x:p,y:v,width:y,height:b,style:h.style,selected:!!h.selected,className:s(h),color:n(h),borderRadius:o,strokeColor:a(h),strokeWidth:c,shapeRendering:u,onClick:g,id:h.id})}const dN=q.memo(uN);var fN=q.memo(cN);const hN=200,gN=150,mN=e=>!e.hidden,pN=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?vb(wo(e.nodeLookup,{filter:mN}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},yN="react-flow__minimap-desc";function Tw({style:e,className:n,nodeStrokeColor:a,nodeColor:s,nodeClassName:o="",nodeBorderRadius:c=5,nodeStrokeWidth:u,nodeComponent:d,bgColor:g,maskColor:h,maskStrokeColor:p,maskStrokeWidth:v,position:y="bottom-right",onClick:b,onNodeClick:C,pannable:E=!1,zoomable:T=!1,ariaLabel:S,inversePan:N,zoomStep:_=1,offsetScale:A=5}){const D=Je(),z=q.useRef(null),{boundingRect:$,viewBB:V,rfId:K,panZoom:oe,translateExtent:W,flowWidth:ee,flowHeight:ne,ariaLabelConfig:j}=De(pN,Fe),P=e?.width??hN,M=e?.height??gN,U=$.width/P,B=$.height/M,X=Math.max(U,B),H=X*P,R=X*M,k=A*X,G=$.x-(H-$.width)/2-k,Z=$.y-(R-$.height)/2-k,ie=H+k*2,ue=R+k*2,ce=`${yN}-${K}`,le=q.useRef(0),de=q.useRef();le.current=X,q.useEffect(()=>{if(z.current&&oe)return de.current=UT({domNode:z.current,panZoom:oe,getTransform:()=>D.getState().transform,getViewScale:()=>le.current}),()=>{de.current?.destroy()}},[oe]),q.useEffect(()=>{de.current?.update({translateExtent:W,width:ee,height:ne,inversePan:N,pannable:E,zoomStep:_,zoomable:T})},[E,T,N,_,W,ee,ne]);const Te=b?_e=>{const[Ce,Ie]=de.current?.pointer(_e)||[0,0];b(_e,{x:Ce,y:Ie})}:void 0,Se=C?q.useCallback((_e,Ce)=>{const Ie=D.getState().nodeLookup.get(Ce).internals.userNode;C(_e,Ie)},[]):void 0,ye=S??j["minimap.ariaLabel"];return x.jsx(Kc,{position:y,style:{...e,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof v=="number"?v*X:void 0,"--xy-minimap-node-background-color-props":typeof s=="string"?s:void 0,"--xy-minimap-node-stroke-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:ut(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:x.jsxs("svg",{width:P,height:M,viewBox:`${G} ${Z} ${ie} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:z,onClick:Te,children:[ye&&x.jsx("title",{id:ce,children:ye}),x.jsx(fN,{onClick:Se,nodeColor:s,nodeStrokeColor:a,nodeBorderRadius:c,nodeClassName:o,nodeStrokeWidth:u,nodeComponent:d}),x.jsx("path",{className:"react-flow__minimap-mask",d:`M${G-k},${Z-k}h${ie+k*2}v${ue+k*2}h${-ie-k*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Tw.displayName="MiniMap";const Cw=q.memo(Tw),vN=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,bN={[Ps.Line]:"right",[Ps.Handle]:"bottom-right"};function wN({nodeId:e,position:n,variant:a=Ps.Handle,className:s,style:o=void 0,children:c,color:u,minWidth:d=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:v=!1,resizeDirection:y,autoScale:b=!0,shouldResize:C,onResizeStart:E,onResize:T,onResizeEnd:S}){const N=ew(),_=typeof e=="string"?e:N,A=Je(),D=q.useRef(null),z=a===Ps.Handle,$=De(q.useCallback(vN(z&&b),[z,b]),Fe),V=q.useRef(null),K=n??bN[a];q.useEffect(()=>{if(!(!D.current||!_))return V.current||(V.current=JT({domNode:D.current,nodeId:_,getStoreItems:()=>{const{nodeLookup:W,transform:ee,snapGrid:ne,snapToGrid:j,nodeOrigin:P,domNode:M}=A.getState();return{nodeLookup:W,transform:ee,snapGrid:ne,snapToGrid:j,nodeOrigin:P,paneDomNode:M}},onChange:(W,ee)=>{const{triggerNodeChanges:ne,nodeLookup:j,parentLookup:P,nodeOrigin:M}=A.getState(),U=[],B={x:W.x,y:W.y},X=j.get(_);if(X&&X.expandParent&&X.parentId){const H=X.origin??M,R=W.width??X.measured.width??0,k=W.height??X.measured.height??0,G={id:X.id,parentId:X.parentId,rect:{width:R,height:k,...wb({x:W.x??X.position.x,y:W.y??X.position.y},{width:R,height:k},X.parentId,j,H)}},Z=Uh([G],j,P,M);U.push(...Z),B.x=W.x?Math.max(H[0]*R,W.x):void 0,B.y=W.y?Math.max(H[1]*k,W.y):void 0}if(B.x!==void 0&&B.y!==void 0){const H={id:_,type:"position",position:{...B}};U.push(H)}if(W.width!==void 0&&W.height!==void 0){const R={id:_,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:W.width,height:W.height}};U.push(R)}for(const H of ee){const R={...H,type:"position"};U.push(R)}ne(U)},onEnd:({width:W,height:ee})=>{const ne={id:_,type:"dimensions",resizing:!1,dimensions:{width:W,height:ee}};A.getState().triggerNodeChanges([ne])}})),V.current.update({controlPosition:K,boundaries:{minWidth:d,minHeight:g,maxWidth:h,maxHeight:p},keepAspectRatio:v,resizeDirection:y,onResizeStart:E,onResize:T,onResizeEnd:S,shouldResize:C}),()=>{V.current?.destroy()}},[K,d,g,h,p,v,E,T,S,C]);const oe=K.split("-");return x.jsx("div",{className:ut(["react-flow__resize-control","nodrag",...oe,a,s]),ref:D,style:{...o,scale:$,...u&&{[z?"backgroundColor":"borderColor"]:u}},children:c})}q.memo(wN);const Aw={},{useDebugValue:xN}=kv,{useSyncExternalStoreWithSelector:_N}=Bb;let qy=!1;const SN=e=>e;function EN(e,n=SN,a){(Aw?"production":void 0)!=="production"&&a&&!qy&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),qy=!0);const s=_N(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,a);return xN(s),s}const Vy=e=>{(Aw?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?Ib(e):e,a=(s,o)=>EN(n,s,o);return Object.assign(a,n),a},TN=e=>e?Vy(e):Vy,Hf=e=>({system:"systems",container:"containers",component:"components",person:"people",externalSystem:"externalSystems",shadow:"shadows"})[e]||`${e}s`,pe=TN((e,n)=>({debugMode:!1,metadata:{name:"New C4 Model",version:"1.0",author:"Solution Architect"},currentLevel:"context",viewMode:"edit",currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null,systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],warnings:[],setMetadata:a=>e({metadata:a}),setCurrentLevel:a=>e({currentLevel:a}),setViewMode:a=>e({viewMode:a}),navigateInto:a=>{const s=n();s.getElementById(a)&&e({currentParentId:a,navigationHistory:[...s.navigationHistory,s.currentParentId],selectedElement:null,selectedEdge:null})},navigateUp:()=>{const a=n();if(a.navigationHistory.length===0)return;const s=[...a.navigationHistory],o=s.pop();e({currentParentId:o,navigationHistory:s,selectedElement:null,selectedEdge:null})},navigateToRoot:()=>{e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},navigateTo:a=>{const s=n();if(a===null){e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null});return}const c=(u=>{const d=[];let g=s.getElementById(u);for(;g&&g.parentId;)d.unshift(g.parentId),g=s.getElementById(g.parentId);return d})(a);e({currentParentId:a,navigationHistory:[null,...c],selectedElement:null,selectedEdge:null})},getBreadcrumb:()=>{const a=n(),s=[];for(const o of a.navigationHistory)if(o!==null){const c=a.getElementById(o);c&&s.push(c)}if(a.currentParentId!==null){const o=a.getElementById(a.currentParentId);o&&s.push(o)}return s},getChildren:a=>{const o=n().getAllElements();return a===null?o.filter(c=>!c.parentId):o.filter(c=>c.parentId===a)},hasChildren:a=>n().getChildren(a).length>0,getChildCount:a=>n().getChildren(a).length,getElementPath:a=>{const s=n(),o=[];let c=s.getElementById(a);for(;c&&(o.unshift(c.name||c.id),c.parentId);)c=s.getElementById(c.parentId);return o.join(" / ")},setSelectedElement:a=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedElement called:",a?{id:a.id,type:a.type}:null),e({selectedElement:a,selectedEdge:null})},setSelectedEdge:a=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedEdge called:",a?{id:a.id}:null),e({selectedEdge:a,selectedElement:null})},addElement:(a,s)=>{const o=n(),c={id:`${a}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:a,parentId:o.currentParentId,phases:[],...s},u=Hf(a);return e(d=>({[u]:[...d[u],c]})),c},updateElement:(a,s,o)=>{n().debugMode&&console.log("[Diagrams Debug] updateElement called:",{type:a,id:s,updates:o});const u=Hf(a);e(d=>{const g=d[u].map(v=>v.id===s?{...v,...o}:v),h=g.find(v=>v.id===s),p=d.selectedElement?.id===s?h:d.selectedElement;return d.debugMode&&h&&console.log("[Diagrams Debug] Element updated:",h),{[u]:g,selectedElement:p}})},deleteElement:(a,s)=>{const o=n(),c=Hf(a);let u={};o.currentParentId===s?u={currentParentId:null,navigationHistory:[]}:o.navigationHistory.includes(s)&&(u={currentParentId:null,navigationHistory:[]}),e(d=>({[c]:d[c].filter(g=>g.id!==s),relationships:d.relationships.filter(g=>g.from!==s&&g.to!==s),...u}))},addRelationship:a=>{const s={id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...a};return e(o=>({relationships:[...o.relationships,s]})),s},updateRelationship:(a,s)=>{n().debugMode&&console.log("[Diagrams Debug] updateRelationship called:",{id:a,updates:s}),e(c=>{const u=c.relationships.map(h=>h.id===a?{...h,...s}:h),d=u.find(h=>h.id===a),g=c.selectedEdge?.id===a?d:c.selectedEdge;return c.debugMode&&d&&console.log("[Diagrams Debug] Relationship updated:",d),{relationships:u,selectedEdge:g}})},deleteRelationship:a=>{e(s=>({relationships:s.relationships.filter(o=>o.id!==a)}))},getAllElements:()=>{const a=n();return[...a.systems,...a.containers,...a.components,...a.people,...a.externalSystems,...a.shadows]},getElementById:a=>n().getAllElements().find(o=>o.id===a),clearAll:()=>{e({systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],selectedElement:null,selectedEdge:null,warnings:[],currentParentId:null,navigationHistory:[]})},importModel:a=>{e({metadata:a.metadata||n().metadata,systems:a.systems||[],containers:a.containers||[],components:a.components||[],people:a.people||[],externalSystems:a.externalSystems||[],shadows:a.shadows||[],relationships:a.relationships||[],currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},exportModel:()=>{const a=n();return{metadata:a.metadata,systems:a.systems,containers:a.containers,components:a.components,people:a.people,externalSystems:a.externalSystems,shadows:a.shadows,relationships:a.relationships}},validateModel:()=>{const a=n(),s=[];a.containers.forEach(d=>{d.parentSystem&&!a.systems.find(g=>g.id===d.parentSystem)&&s.push({type:"warning",message:`Container "${d.name}" references non-existent parent system`,elementId:d.id})}),a.components.forEach(d=>{d.parentContainer&&!a.containers.find(g=>g.id===d.parentContainer)&&s.push({type:"warning",message:`Component "${d.name}" references non-existent parent container`,elementId:d.id})});const o=a.getAllElements(),c=new Set(o.map(d=>d.id));a.relationships.forEach(d=>{c.has(d.from)||s.push({type:"error",message:`Relationship references non-existent source element: ${d.from}`,elementId:d.id}),c.has(d.to)||s.push({type:"error",message:`Relationship references non-existent target element: ${d.to}`,elementId:d.id})});const u=n().getVisibleElements();return u.length>15&&s.push({type:"info",message:`Current view has ${u.length} elements. Consider splitting into multiple diagrams for clarity.`}),e({warnings:s}),s},getVisibleElements:()=>{const a=n(),s=a.currentParentId;return a.getAllElements().filter(c=>s===null?!c.parentId:c.parentId===s)}}));typeof window<"u"&&(window.__ZUSTAND_STORE__=pe);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nw=(...e)=>e.filter((n,a,s)=>!!n&&s.indexOf(n)===a).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=q.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:u,...d},g)=>q.createElement("svg",{ref:g,...AN,width:n,height:n,stroke:e,strokeWidth:s?Number(a)*24/Number(n):a,className:Nw("lucide",o),...d},[...u.map(([h,p])=>q.createElement(h,p)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(e,n)=>{const a=q.forwardRef(({className:s,...o},c)=>q.createElement(NN,{ref:c,iconNode:n,className:Nw(`lucide-${CN(e)}`,s),...o}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Ue("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=Ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=Ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=Ue("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Ue("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Ue("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ue("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Ue("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Ue("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Ue("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Ue("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=Ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Ue("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Ue("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),VN=e=>{if(!e)return null;let n=0;for(let s=0;s<e.length;s++)n=e.charCodeAt(s)+((n<<5)-n);const a=Math.abs(n)%360;return{bg:`hsl(${a}, 70%, 90%)`,text:`hsl(${a}, 70%, 30%)`,border:`hsl(${a}, 70%, 70%)`}},Ky=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},PN=({data:e,selected:n})=>{const s=pe(h=>h.getChildCount)(e.id),o=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(h=>h.name).map(h=>({...h,initials:Ky(h.name),colors:VN(Ky(h.name))})),c=()=>{const h="px-4 py-3 rounded-lg border-2 min-w-[200px] shadow-lg transition-all";switch(e.type){case"system":return`${h} bg-blue-100 border-blue-500 hover:bg-blue-200`;case"container":return`${h} bg-green-100 border-green-500 hover:bg-green-200`;case"component":return`${h} bg-yellow-100 border-yellow-500 hover:bg-yellow-200`;case"person":return`${h} bg-purple-100 border-purple-500 hover:bg-purple-200`;case"externalSystem":return`${h} bg-gray-100 border-gray-500 hover:bg-gray-200`;default:return`${h} bg-white border-gray-300`}},u=()=>{const h="w-5 h-5";switch(e.type){case"system":return x.jsx(Eo,{className:h});case"container":return x.jsx(qr,{className:h});case"component":return x.jsx(So,{className:h});case"person":return x.jsx(To,{className:h});case"externalSystem":return x.jsx(Gs,{className:h});default:return x.jsx(qr,{className:h})}},d=()=>{switch(e.type){case"system":return"Software System";case"container":return"Container";case"component":return"Component";case"person":return"Person";case"externalSystem":return"External System";default:return e.type}},g="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return x.jsxs("div",{className:`${c()} ${n?"ring-4 ring-blue-400":""} relative`,children:[x.jsx(Lt,{type:"target",position:he.Top,id:"top",className:g}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("div",{className:"mt-1",children:u()}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:d()}),x.jsx("div",{className:"font-bold text-gray-900 mb-1",children:e.label||e.name||"Unnamed"}),e.technology&&x.jsxs("div",{className:"text-xs text-gray-600 italic mb-1",children:["[",e.technology,"]"]}),e.description&&x.jsx("div",{className:"text-xs text-gray-700 mt-2",children:e.description})]})]}),o.length>0&&x.jsx("div",{className:"absolute bottom-2 left-2 flex items-center gap-1",children:o.map(h=>x.jsx("div",{className:"px-1.5 py-0.5 rounded text-xs font-medium border",style:{backgroundColor:h.colors.bg,color:h.colors.text,borderColor:h.colors.border},title:`${h.label}: ${h.name}`,children:h.initials},h.label))}),s>0&&x.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 text-xs text-gray-500 bg-white/80 px-1.5 py-0.5 rounded",children:[x.jsx(BN,{className:"w-3 h-3"}),x.jsx("span",{children:s})]}),x.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:g}),x.jsx(Lt,{type:"source",position:he.Right,id:"right",className:g}),x.jsx(Lt,{type:"target",position:he.Left,id:"left",className:g})]})},GN=q.memo(PN),YN=({data:e,selected:n})=>{const s=pe(d=>d.getElementById)(e.targetId),o=()=>{const d="w-5 h-5";if(!s)return x.jsx(xc,{className:d});switch(s.type){case"system":return x.jsx(Eo,{className:d});case"container":return x.jsx(qr,{className:d});case"component":return x.jsx(So,{className:d});case"person":return x.jsx(To,{className:d});case"externalSystem":return x.jsx(Gs,{className:d});default:return x.jsx(xc,{className:d})}},c=()=>s?`Shadow  ${{system:"Software System",container:"Container",component:"Component",person:"Person",externalSystem:"External System"}[s.type]||s.type}`:"Shadow (broken link)",u="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return x.jsxs("div",{className:`px-4 py-3 rounded-lg border-2 border-dashed min-w-[200px] shadow-lg transition-all
        ${s?"bg-slate-50/50 border-slate-400":"bg-red-50/50 border-red-400"}
        ${n?"ring-4 ring-blue-400":""} relative`,children:[x.jsx(Lt,{type:"target",position:he.Top,id:"top",className:u}),x.jsxs("div",{className:"flex items-start gap-2 opacity-70",children:[x.jsx("div",{className:"mt-1",children:o()}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:c()}),x.jsx("div",{className:"font-bold text-gray-700 mb-1",children:s?.name||"Select target..."}),s?.technology&&x.jsxs("div",{className:"text-xs text-gray-500 italic mb-1",children:["[",s.technology,"]"]}),s?.description&&x.jsx("div",{className:"text-xs text-gray-600 mt-2",children:s.description})]})]}),x.jsx("div",{className:"absolute top-2 right-2",children:x.jsx(xc,{className:"w-4 h-4 text-slate-400"})}),x.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:u}),x.jsx(Lt,{type:"source",position:he.Right,id:"right",className:u}),x.jsx(Lt,{type:"target",position:he.Left,id:"left",className:u})]})},XN=q.memo(YN),KN=e=>{if(!e)return null;let n=0;for(let s=0;s<e.length;s++)n=e.charCodeAt(s)+((n<<5)-n);const a=Math.abs(n)%360;return{bg:`hsl(${a}, 70%, 90%)`,text:`hsl(${a}, 70%, 30%)`,border:`hsl(${a}, 70%, 70%)`}},Zy=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},ZN=({data:e})=>{const n=pe(d=>d.setViewMode),a=pe(d=>d.navigateTo),s=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(d=>d.name).map(d=>({...d,initials:Zy(d.name),colors:KN(Zy(d.name))})),o=()=>{const d="w-4 h-4";switch(e.type){case"system":return x.jsx(Eo,{className:d});case"container":return x.jsx(qr,{className:d});case"component":return x.jsx(So,{className:d});case"person":return x.jsx(To,{className:d});case"externalSystem":return x.jsx(Gs,{className:d});default:return x.jsx(qr,{className:d})}},c=()=>{const d="px-3 py-2 rounded border min-w-[150px] text-sm";switch(e.type){case"system":return`${d} bg-blue-50 border-blue-300`;case"container":return`${d} bg-green-50 border-green-300`;case"component":return`${d} bg-yellow-50 border-yellow-300`;case"person":return`${d} bg-purple-50 border-purple-300`;case"externalSystem":return`${d} bg-gray-50 border-gray-300`;default:return`${d} bg-white border-gray-200`}},u=d=>{d.stopPropagation();const g=e.parentId||null;g?a(g):pe.getState().navigateToRoot(),n("edit")};return x.jsxs("div",{className:`${c()} relative`,children:[x.jsx(Lt,{type:"target",position:he.Top,className:"!w-2 !h-2 !bg-gray-400 !border-0"}),x.jsxs("div",{className:"flex items-center gap-2",children:[o(),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-medium text-gray-900 truncate",children:e.name||"Unnamed"}),x.jsx("div",{className:"text-xs text-gray-500 capitalize",children:e.type})]}),x.jsx("button",{onClick:u,className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Go to this element in edit mode",children:x.jsx(Gs,{className:"w-3 h-3 text-gray-400 hover:text-blue-500"})})]}),s.length>0&&x.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:s.map(d=>x.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium border",style:{backgroundColor:d.colors?.bg||"#f3f4f6",color:d.colors?.text||"#374151",borderColor:d.colors?.border||"#d1d5db"},title:`${d.label}: ${d.name}`,children:[x.jsx("span",{className:"opacity-60",children:d.label}),x.jsx("span",{children:d.initials})]},d.label))}),x.jsx(Lt,{type:"source",position:he.Bottom,className:"!w-2 !h-2 !bg-gray-400 !border-0"})]})},QN=q.memo(ZN),JN={treeNode:QN},FN=e=>{const n=new Map,a=[];e.forEach(E=>{E.parentId?(n.has(E.parentId)||n.set(E.parentId,[]),n.get(E.parentId).push(E)):a.push(E)});const s=[],o=[],c=180,u=70,d=40,g=120,h=3,p=E=>{const T=n.get(E)||[];if(T.length===0)return c;const S=Math.min(T.length,h),N=Math.ceil(T.length/S);let _=c;for(let A=0;A<N;A++){let D=0;const z=Math.min(S,T.length-A*S);for(let $=0;$<z;$++){const V=A*S+$,K=p(T[V].id);D+=K,$<z-1&&(D+=d)}_=Math.max(_,D)}return _},v=E=>{const T=n.get(E)||[];if(T.length===0)return u;const S=Math.min(T.length,h),N=Math.ceil(T.length/S);let _=0;for(let A=0;A<N;A++){let D=u;for(let z=0;z<S;z++){const $=A*S+z;if($<T.length){const V=v(T[$].id);D=Math.max(D,V)}}_+=D,A<N-1&&(_+=g)}return u+g+_},y=(E,T,S)=>{let N=u;for(let _=0;_<T;_++){const A=S*T+_;if(A<E.length){const D=v(E[A].id);N=Math.max(N,D)}}return N},b=(E,T,S,N=0)=>{s.push({id:E.id,type:"treeNode",position:{x:T,y:S},data:{...E,label:E.name}});const _=n.get(E.id)||[];if(_.length===0)return;const A=Math.min(_.length,h),D=Math.ceil(_.length/A);p(E.id);const z=T+c/2;let $=S+g;for(let V=0;V<D;V++){const K=Math.min(A,_.length-V*A),oe=[];for(let ne=0;ne<K;ne++){const j=V*A+ne;oe.push(p(_[j].id))}const W=oe.reduce((ne,j)=>ne+j,0)+(K-1)*d;let ee=z-W/2;for(let ne=0;ne<K;ne++){const j=V*A+ne,P=_[j],M=oe[ne],U=ee+(M-c)/2;o.push({id:`edge-${E.id}-${P.id}`,source:E.id,target:P.id,type:"smoothstep",style:{stroke:"#94a3b8",strokeWidth:1}}),b(P,U,$,N+1),ee+=M+d}$+=y(_,A,V)+g}};let C=50;return a.forEach(E=>{const T=p(E.id);b(E,C,50),C+=T+80}),{nodes:s,edges:o}},WN=()=>{const e=pe(g=>g.getAllElements),n=pe(g=>g.setViewMode);pe(g=>g.navigateInto);const a=pe(g=>g.navigateTo),s=pe(g=>g.navigateToRoot),o=e().filter(g=>g.type!=="shadow"),{nodes:c,edges:u}=q.useMemo(()=>FN(o),[o]),d=q.useCallback((g,h)=>{g.stopPropagation();const p=h.data;if(!p)return;const v=p.parentId||null;v?a(v):s(),n("edit")},[a,s,n]);return x.jsx("div",{className:"flex-1 h-full",children:x.jsxs(ww,{nodes:c,edges:u,nodeTypes:JN,onNodeDoubleClick:d,fitView:!0,fitViewOptions:{padding:.2},nodesDraggable:!1,nodesConnectable:!1,className:"bg-gray-50",children:[x.jsx(_w,{color:"#e2e8f0",gap:20}),x.jsx(Ew,{}),x.jsx(Cw,{nodeColor:g=>{switch(g.data?.type){case"system":return"#93c5fd";case"container":return"#86efac";case"component":return"#fde047";case"person":return"#c4b5fd";default:return"#e2e8f0"}}})]})})},eO={Discovery:"bg-blue-500",Design:"bg-purple-500",Build:"bg-green-500",Testing:"bg-orange-500",Deployment:"bg-teal-500",Maintenance:"bg-gray-500"},tO=e=>eO[e]||"bg-slate-500",nO=e=>{const n="w-4 h-4";switch(e){case"system":return x.jsx(Eo,{className:n});case"container":return x.jsx(qr,{className:n});case"component":return x.jsx(So,{className:n});case"person":return x.jsx(To,{className:n});case"externalSystem":return x.jsx(Gs,{className:n});default:return x.jsx(qr,{className:n})}},rO=()=>{const e=pe(S=>S.getAllElements),n=pe(S=>S.setSelectedElement),a=pe(S=>S.setViewMode),s=pe(S=>S.navigateTo),o=pe(S=>S.navigateToRoot),[c,u]=q.useState(new Set),d=e().filter(S=>S.type!=="shadow"),{tree:g,dateRange:h}=q.useMemo(()=>{const S=new Map,N=[];d.forEach(z=>{z.parentId?(S.has(z.parentId)||S.set(z.parentId,[]),S.get(z.parentId).push(z)):N.push(z)});let _=null,A=null;if(d.forEach(z=>{(z.phases||[]).forEach($=>{(!_||$.startMonth<_)&&(_=$.startMonth),(!A||$.endMonth>A)&&(A=$.endMonth)})}),!_){const z=new Date;_=`${z.getFullYear()}-01`,A=`${z.getFullYear()}-12`}const D=(z,$=0)=>{let V=[];return z.forEach(K=>{V.push({...K,depth:$});const oe=S.get(K.id)||[];oe.length>0&&!c.has(K.id)&&(V=V.concat(D(oe,$+1)))}),V};return{tree:D(N),dateRange:{minDate:_,maxDate:A}}},[d,c]),p=q.useMemo(()=>{if(!h.minDate||!h.maxDate)return[];const S=[];let[N,_]=h.minDate.split("-").map(Number);const[A,D]=h.maxDate.split("-").map(Number);for(;N<A||N===A&&_<=D;)S.push({year:N,month:_,key:`${N}-${String(_).padStart(2,"0")}`}),_++,_>12&&(_=1,N++);return S},[h]),v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y=S=>{u(N=>{const _=new Set(N);return _.has(S)?_.delete(S):_.add(S),_})},b=S=>{n(S)},C=S=>{const N=S.parentId||null;N?s(N):o(),a("edit")},E=S=>d.some(N=>N.parentId===S),T=S=>{if(!S.startMonth||!S.endMonth||p.length===0)return null;const N=p.findIndex(z=>z.key===S.startMonth),_=p.findIndex(z=>z.key===S.endMonth);if(N===-1||_===-1)return null;const A=N/p.length*100,D=(_-N+1)/p.length*100;return{left:`${A}%`,width:`${D}%`}};return x.jsx("div",{className:"flex-1 h-full bg-white overflow-auto",children:x.jsxs("div",{className:"min-w-[800px]",children:[x.jsxs("div",{className:"flex border-b border-gray-300 bg-gray-50 sticky top-0 z-10",children:[x.jsx("div",{className:"w-64 flex-shrink-0 px-4 py-2 font-semibold text-sm text-gray-700 border-r border-gray-300",children:"Element"}),x.jsx("div",{className:"flex-1 flex",children:p.map(S=>x.jsxs("div",{className:"flex-1 px-1 py-2 text-xs text-center text-gray-600 border-r border-gray-200",style:{minWidth:"40px"},children:[x.jsx("div",{children:v[S.month-1]}),x.jsx("div",{className:"text-gray-400",children:S.year})]},S.key))})]}),g.map(S=>x.jsxs("div",{className:"flex border-b border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>b(S),onDoubleClick:()=>C(S),children:[x.jsxs("div",{className:"w-64 flex-shrink-0 px-4 py-2 flex items-center gap-2 border-r border-gray-200",style:{paddingLeft:`${16+S.depth*16}px`},children:[E(S.id)?x.jsx("button",{onClick:N=>{N.stopPropagation(),y(S.id)},className:"p-0.5 hover:bg-gray-200 rounded",children:c.has(S.id)?x.jsx(Mw,{className:"w-3 h-3 text-gray-500"}):x.jsx(Rw,{className:"w-3 h-3 text-gray-500"})}):x.jsx("span",{className:"w-4"}),x.jsx("span",{className:"text-gray-500",children:nO(S.type)}),x.jsx("span",{className:"text-sm truncate",children:S.name||"Unnamed"})]}),x.jsx("div",{className:"flex-1 relative py-1",children:(S.phases||[]).map(N=>{const _=T(N);return _?x.jsx("div",{className:`absolute top-1 bottom-1 ${tO(N.name)} rounded text-xs text-white flex items-center px-2 overflow-hidden`,style:_,title:`${N.name}: ${N.startMonth}  ${N.endMonth}`,children:x.jsx("span",{className:"truncate",children:N.name})},N.id):null})})]},S.id)),g.length===0&&x.jsx("div",{className:"p-8 text-center text-gray-500",children:"No elements with timeline data. Add phases to elements in the Properties panel."})]})})},aO=()=>{const{addElement:e,currentLevel:n}=pe(),a=pe(p=>p.currentParentId),s=pe(p=>p.getElementById),o=[{type:"system",icon:Eo,label:"Software System",color:"bg-blue-100 hover:bg-blue-200 text-blue-700"},{type:"container",icon:qr,label:"Container",color:"bg-green-100 hover:bg-green-200 text-green-700"},{type:"component",icon:So,label:"Component",color:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700"},{type:"person",icon:To,label:"Person",color:"bg-purple-100 hover:bg-purple-200 text-purple-700"},{type:"externalSystem",icon:Gs,label:"External System",color:"bg-gray-100 hover:bg-gray-200 text-gray-700"},{type:"shadow",icon:xc,label:"Shadow (Reference)",color:"bg-slate-100 hover:bg-slate-200 text-slate-700 border-dashed"}],u=(()=>{if(a===null)return["system","person","externalSystem","shadow"];const p=s(a);if(!p)return["system","person","externalSystem","shadow"];switch(p.type){case"system":return["container","person","shadow"];case"container":return["component","shadow"];case"component":return["component","shadow"];default:return["shadow"]}})(),d=o.filter(p=>u.includes(p.type)),g=(p,v)=>{p.dataTransfer.setData("application/c4-element-type",v),p.dataTransfer.effectAllowed="move"},h=()=>({context:"Context",container:"Container",component:"Component",code:"Code"})[n]||n;return x.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 p-4",children:[x.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1",children:"Add Elements"}),x.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[h()," Level"]}),x.jsx("div",{className:"space-y-2",children:d.length>0?d.map(p=>{const v=p.icon;return x.jsxs("div",{draggable:!0,onDragStart:y=>g(y,p.type),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg border-2 transition-colors cursor-grab active:cursor-grabbing ${p.color}`,children:[x.jsx(v,{className:"w-5 h-5"}),x.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.type)}):x.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No elements can be added at this level"})}),x.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("h3",{className:"text-xs font-semibold text-blue-900 uppercase mb-2",children:"Quick Tips"}),x.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[x.jsx("li",{children:" Drag elements to canvas to add"}),x.jsx("li",{children:" Click elements to edit properties"}),x.jsx("li",{children:" Drag between elements to create relationships"}),x.jsx("li",{children:" Use mouse wheel to zoom"})]})]})]})},sO=["Discovery","Design","Build","Testing","Deployment","Maintenance"],iO=({phases:e=[],onChange:n})=>{const[a,s]=q.useState(!1),[o,c]=q.useState({name:"",startMonth:"",endMonth:""}),u=()=>{if(!o.name||!o.startMonth||!o.endMonth)return;const p={id:`phase-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:o.name,startMonth:o.startMonth,endMonth:o.endMonth};n([...e,p]),c({name:"",startMonth:"",endMonth:""}),s(!1)},d=p=>{n(e.filter(v=>v.id!==p))},g=p=>{if(!p)return"";const[v,y]=p.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(y,10)-1]} ${v}`},h=o.startMonth&&o.endMonth&&o.startMonth<=o.endMonth;return x.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase",children:"Timeline"}),x.jsx("button",{onClick:()=>s(!0),className:"p-1 hover:bg-gray-100 rounded text-gray-500 hover:text-gray-700",title:"Add phase",children:x.jsx(LN,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"space-y-2 mb-3",children:[e.length===0&&!a&&x.jsx("p",{className:"text-xs text-gray-400 italic",children:"No phases defined"}),e.map(p=>x.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 bg-gray-50 rounded text-sm",children:[x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-medium text-gray-800 truncate",children:p.name}),x.jsxs("div",{className:"text-xs text-gray-500",children:[g(p.startMonth),"  ",g(p.endMonth)]})]}),x.jsx("button",{onClick:()=>d(p.id),className:"p-1 hover:bg-gray-200 rounded text-gray-400 hover:text-red-600",children:x.jsx(dh,{className:"w-3 h-3"})})]},p.id))]}),a&&x.jsxs("div",{className:"p-3 bg-blue-50 rounded-md border border-blue-200",children:[x.jsxs("div",{className:"mb-2",children:[x.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Phase Name"}),x.jsx("input",{type:"text",list:"phase-suggestions",value:o.name,onChange:p=>c({...o,name:p.target.value}),placeholder:"e.g., Discovery",className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),x.jsx("datalist",{id:"phase-suggestions",children:sO.map(p=>x.jsx("option",{value:p},p))})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Start"}),x.jsx("input",{type:"month",value:o.startMonth,onChange:p=>c({...o,startMonth:p.target.value}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"End"}),x.jsx("input",{type:"month",value:o.endMonth,onChange:p=>c({...o,endMonth:p.target.value}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.startMonth&&o.endMonth&&!h&&x.jsx("p",{className:"text-xs text-red-600 mb-2",children:"End month must be after start month"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:u,disabled:!o.name||!h,className:"flex-1 px-3 py-1.5 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),x.jsx("button",{onClick:()=>{s(!1),c({name:"",startMonth:"",endMonth:""})},className:"px-3 py-1.5 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300",children:"Cancel"})]})]})]})},oO=()=>{const{selectedElement:e,selectedEdge:n,setSelectedElement:a,setSelectedEdge:s,updateElement:o,deleteElement:c,updateRelationship:u,deleteRelationship:d,getAllElements:g,getElementPath:h}=pe(),[p,v]=q.useState({name:"",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""}),[y,b]=q.useState({description:"",technology:"",arrowDirection:"right",lineStyle:"solid"}),[C,E]=q.useState(""),[T,S]=q.useState(!1),[N,_]=q.useState("");q.useEffect(()=>{if(e&&e.id)try{v({name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags.join(", "):"",ownerPM:e.ownerPM||"",ownerUX:e.ownerUX||"",ownerTech:e.ownerTech||""})}catch(j){console.error("[Diagrams] Error setting formData for element:",j,e),v({name:"Error loading element",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""})}},[e?.id]),q.useEffect(()=>{e&&e.type==="shadow"&&_(e.targetId||"")},[e?.id,e?.type]),q.useEffect(()=>{if(n&&n.id)try{b({description:n.description||"",technology:n.technology||"",arrowDirection:n.arrowDirection||"right",lineStyle:n.lineStyle||"solid"})}catch(j){console.error("[Diagrams] Error setting edgeFormData:",j,n),b({description:"Error loading relationship",technology:"",arrowDirection:"right",lineStyle:"solid"})}},[n?.id]),q.useEffect(()=>{const j=()=>S(!1);if(T){const P=setTimeout(()=>{document.addEventListener("click",j)},100);return()=>{clearTimeout(P),document.removeEventListener("click",j)}}},[T]);const A=(j,P)=>{v(M=>({...M,[j]:P}))},D=(j,P)=>{b(M=>({...M,[j]:P}))},z=()=>{if(e){const j={name:p.name,description:p.description,technology:p.technology,tags:p.tags.split(",").map(P=>P.trim()).filter(Boolean),ownerPM:p.ownerPM,ownerUX:p.ownerUX,ownerTech:p.ownerTech};o(e.type,e.id,j)}},$=j=>{e&&o(e.type,e.id,{phases:j})},V=()=>{n&&u(n.id,y)},K=(j,P)=>{const M={...y,[j]:P};b(M),n&&u(n.id,M)},oe=()=>{e&&window.confirm("Are you sure you want to delete this element?")&&(c(e.type,e.id),a(null))},W=()=>{n&&window.confirm("Are you sure you want to delete this relationship?")&&(d(n.id),s(null))},ee=g().filter(j=>j.type!=="shadow"),ne=C?ee.filter(j=>h(j.id).toLowerCase().includes(C.toLowerCase())):ee;return n&&!e?x.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Relationship Properties"}),x.jsx("button",{onClick:()=>s(null),className:"p-1 hover:bg-gray-100 rounded",children:x.jsx(dh,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),x.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:n.id})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"edge-description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),x.jsx("input",{id:"edge-description",type:"text",value:y.description,onChange:j=>D("description",j.target.value),onBlur:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Makes API calls to"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"edge-technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology/Protocol"}),x.jsx("input",{id:"edge-technology",type:"text",value:y.technology,onChange:j=>D("technology",j.target.value),onBlur:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., REST/HTTPS, gRPC"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"arrow-direction",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Arrow Direction"}),x.jsxs("select",{id:"arrow-direction",value:y.arrowDirection,onChange:j=>K("arrowDirection",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[x.jsx("option",{value:"right",children:"Right "}),x.jsx("option",{value:"left",children:"Left "}),x.jsx("option",{value:"both",children:"Both "}),x.jsx("option",{value:"none",children:"None "})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"line-style",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Line Style"}),x.jsxs("select",{id:"line-style",value:y.lineStyle,onChange:j=>K("lineStyle",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[x.jsx("option",{value:"solid",children:"Solid "}),x.jsx("option",{value:"dashed",children:"Dashed   "}),x.jsx("option",{value:"dotted",children:"Dotted    "})]})]}),x.jsx("div",{className:"pt-4 border-t border-gray-200",children:x.jsxs("button",{onClick:W,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[x.jsx(uh,{className:"w-4 h-4"}),"Delete Relationship"]})})]})]}):e?!e.id||!e.type?(console.error("[Diagrams] Invalid selectedElement:",e),x.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:x.jsxs("div",{className:"text-center text-red-500 mt-8",children:[x.jsx("p",{className:"text-sm",children:"Error: Invalid element data"}),x.jsx("button",{onClick:()=>a(null),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Clear Selection"})]})})):x.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Properties"}),x.jsx("button",{onClick:()=>a(null),className:"p-1 hover:bg-gray-100 rounded",children:x.jsx(dh,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Type"}),x.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:e.type||"Unknown"})]}),e.type==="shadow"&&x.jsxs("div",{className:"mb-4",children:[x.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Target Element"}),N&&x.jsxs("div",{className:"mb-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[x.jsx("div",{className:"font-medium text-blue-900",children:g().find(j=>j.id===N)?.name||"Unknown"}),x.jsx("div",{className:"text-xs text-blue-600",children:h(N)})]}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"text",value:C,onChange:j=>{E(j.target.value),S(!0)},onFocus:()=>S(!0),placeholder:"Search elements by path...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),T&&x.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-48 overflow-y-auto",children:ne.length===0?x.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No elements found"}):ne.slice(0,20).map(j=>x.jsxs("div",{onClick:()=>{_(j.id),E(""),S(!1),o("shadow",e.id,{targetId:j.id})},className:`px-3 py-2 cursor-pointer hover:bg-gray-100 ${j.id===N?"bg-blue-50":""}`,children:[x.jsx("div",{className:"text-sm font-medium",children:j.name||j.id}),x.jsx("div",{className:"text-xs text-gray-500",children:h(j.id)})]},j.id))})]}),x.jsx("div",{className:"mt-2",children:x.jsx("input",{type:"text",value:N,onChange:j=>{_(j.target.value),o("shadow",e.id,{targetId:j.target.value})},placeholder:"Or paste element ID directly...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-xs font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),x.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:e.id})]}),e.type!=="shadow"&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Name"}),x.jsx("input",{id:"name",type:"text",value:p.name,onChange:j=>A("name",j.target.value),onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter element name"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology"}),x.jsx("input",{id:"technology",type:"text",value:p.technology,onChange:j=>A("technology",j.target.value),onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Spring Boot, React, PostgreSQL"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),x.jsx("textarea",{id:"description",value:p.description,onChange:j=>A("description",j.target.value),onBlur:z,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the element's purpose and responsibilities"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"tags",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Tags"}),x.jsx("input",{id:"tags",type:"text",value:p.tags,onChange:j=>A("tags",j.target.value),onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tag1, tag2, tag3"}),x.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated values"})]}),x.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[x.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-2",children:"Owners"}),x.jsxs("div",{className:"mb-2",children:[x.jsx("label",{htmlFor:"ownerPM",className:"block text-xs text-gray-500 mb-1",children:"PM"}),x.jsx("input",{id:"ownerPM",type:"text",value:p.ownerPM,onChange:j=>A("ownerPM",j.target.value),onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product Manager name"})]}),x.jsxs("div",{className:"mb-2",children:[x.jsx("label",{htmlFor:"ownerUX",className:"block text-xs text-gray-500 mb-1",children:"UX"}),x.jsx("input",{id:"ownerUX",type:"text",value:p.ownerUX,onChange:j=>A("ownerUX",j.target.value),onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"UX Designer name"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"ownerTech",className:"block text-xs text-gray-500 mb-1",children:"Tech"}),x.jsx("input",{id:"ownerTech",type:"text",value:p.ownerTech,onChange:j=>A("ownerTech",j.target.value),onBlur:z,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tech Lead name"})]})]}),x.jsx(iO,{phases:e.phases||[],onChange:$})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Position"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-xs text-gray-500",children:"X:"}),x.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.x||0)})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-xs text-gray-500",children:"Y:"}),x.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.y||0)})]})]})]}),x.jsx("div",{className:"pt-4 border-t border-gray-200",children:x.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[x.jsx(uh,{className:"w-4 h-4"}),"Delete Element"]})})]})]}):x.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:x.jsx("div",{className:"text-center text-gray-500 mt-8",children:x.jsx("p",{className:"text-sm",children:"Select an element to view and edit its properties"})})})},lO=()=>{const e=pe(u=>u.getBreadcrumb),n=pe(u=>u.navigateToRoot),a=pe(u=>u.navigateTo),s=pe(u=>u.currentParentId),o=pe(u=>u.metadata),c=e();return x.jsxs("nav",{className:"flex items-center gap-1 text-sm",children:[x.jsxs("button",{onClick:n,className:`flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-200 transition-colors ${s===null?"text-blue-600 font-medium":"text-gray-600"}`,title:"Go to root view",children:[x.jsx($N,{className:"w-4 h-4"}),x.jsx("span",{children:o.name||"Model"})]}),c.map((u,d)=>x.jsxs("div",{className:"flex items-center",children:[x.jsx(Mw,{className:"w-4 h-4 text-gray-400"}),x.jsx("button",{onClick:()=>a(u.id),className:`px-2 py-1 rounded hover:bg-gray-200 transition-colors ${d===c.length-1?"text-blue-600 font-medium":"text-gray-600"}`,children:u.name})]},u.id))]})};function cO(e,n){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const a=document.implementation.createHTMLDocument(),s=a.createElement("base"),o=a.createElement("a");return a.head.appendChild(s),a.body.appendChild(o),n&&(s.href=n),o.href=e,o.href}const uO=(()=>{let e=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)})();function Ir(e){const n=[];for(let a=0,s=e.length;a<s;a++)n.push(e[a]);return n}let ws=null;function jw(e={}){return ws||(e.includeStyleProperties?(ws=e.includeStyleProperties,ws):(ws=Ir(window.getComputedStyle(document.documentElement)),ws))}function Dc(e,n){const s=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(n);return s?parseFloat(s.replace("px","")):0}function dO(e){const n=Dc(e,"border-left-width"),a=Dc(e,"border-right-width");return e.clientWidth+n+a}function fO(e){const n=Dc(e,"border-top-width"),a=Dc(e,"border-bottom-width");return e.clientHeight+n+a}function Dw(e,n={}){const a=n.width||dO(e),s=n.height||fO(e);return{width:a,height:s}}function hO(){let e,n;try{n=process}catch{}const a=n&&n.env?n.env.devicePixelRatio:null;return a&&(e=parseInt(a,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Xt=16384;function gO(e){(e.width>Xt||e.height>Xt)&&(e.width>Xt&&e.height>Xt?e.width>e.height?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt):e.width>Xt?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt))}function zc(e){return new Promise((n,a)=>{const s=new Image;s.onload=()=>{s.decode().then(()=>{requestAnimationFrame(()=>n(s))})},s.onerror=a,s.crossOrigin="anonymous",s.decoding="async",s.src=e})}async function mO(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function pO(e,n,a){const s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),c=document.createElementNS(s,"foreignObject");return o.setAttribute("width",`${n}`),o.setAttribute("height",`${a}`),o.setAttribute("viewBox",`0 0 ${n} ${a}`),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("externalResourcesRequired","true"),o.appendChild(c),c.appendChild(e),mO(o)}const Ht=(e,n)=>{if(e instanceof n)return!0;const a=Object.getPrototypeOf(e);return a===null?!1:a.constructor.name===n.name||Ht(a,n)};function yO(e){const n=e.getPropertyValue("content");return`${e.cssText} content: '${n.replace(/'|"/g,"")}';`}function vO(e,n){return jw(n).map(a=>{const s=e.getPropertyValue(a),o=e.getPropertyPriority(a);return`${a}: ${s}${o?" !important":""};`}).join(" ")}function bO(e,n,a,s){const o=`.${e}:${n}`,c=a.cssText?yO(a):vO(a,s);return document.createTextNode(`${o}{${c}}`)}function Qy(e,n,a,s){const o=window.getComputedStyle(e,a),c=o.getPropertyValue("content");if(c===""||c==="none")return;const u=uO();try{n.className=`${n.className} ${u}`}catch{return}const d=document.createElement("style");d.appendChild(bO(u,a,o,s)),n.appendChild(d)}function wO(e,n,a){Qy(e,n,":before",a),Qy(e,n,":after",a)}const Jy="application/font-woff",Fy="image/jpeg",xO={woff:Jy,woff2:Jy,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Fy,jpeg:Fy,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function _O(e){const n=/\.([^./]*?)$/g.exec(e);return n?n[1]:""}function Bh(e){const n=_O(e).toLowerCase();return xO[n]||""}function SO(e){return e.split(/,/)[1]}function fh(e){return e.search(/^(data:)/)!==-1}function EO(e,n){return`data:${n};base64,${e}`}async function zw(e,n,a){const s=await fetch(e,n);if(s.status===404)throw new Error(`Resource "${s.url}" not found`);const o=await s.blob();return new Promise((c,u)=>{const d=new FileReader;d.onerror=u,d.onloadend=()=>{try{c(a({res:s,result:d.result}))}catch(g){u(g)}},d.readAsDataURL(o)})}const qf={};function TO(e,n,a){let s=e.replace(/\?.*/,"");return a&&(s=e),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),n?`[${n}]${s}`:s}async function Ih(e,n,a){const s=TO(e,n,a.includeQueryParams);if(qf[s]!=null)return qf[s];a.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const c=await zw(e,a.fetchRequestInit,({res:u,result:d})=>(n||(n=u.headers.get("Content-Type")||""),SO(d)));o=EO(c,n)}catch(c){o=a.imagePlaceholder||"";let u=`Failed to fetch resource: ${e}`;c&&(u=typeof c=="string"?c:c.message),u&&console.warn(u)}return qf[s]=o,o}async function CO(e){const n=e.toDataURL();return n==="data:,"?e.cloneNode(!1):zc(n)}async function AO(e,n){if(e.currentSrc){const c=document.createElement("canvas"),u=c.getContext("2d");c.width=e.clientWidth,c.height=e.clientHeight,u?.drawImage(e,0,0,c.width,c.height);const d=c.toDataURL();return zc(d)}const a=e.poster,s=Bh(a),o=await Ih(a,s,n);return zc(o)}async function NO(e,n){var a;try{if(!((a=e?.contentDocument)===null||a===void 0)&&a.body)return await Jc(e.contentDocument.body,n,!0)}catch{}return e.cloneNode(!1)}async function OO(e,n){return Ht(e,HTMLCanvasElement)?CO(e):Ht(e,HTMLVideoElement)?AO(e,n):Ht(e,HTMLIFrameElement)?NO(e,n):e.cloneNode($w(e))}const RO=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",$w=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function MO(e,n,a){var s,o;if($w(n))return n;let c=[];return RO(e)&&e.assignedNodes?c=Ir(e.assignedNodes()):Ht(e,HTMLIFrameElement)&&(!((s=e.contentDocument)===null||s===void 0)&&s.body)?c=Ir(e.contentDocument.body.childNodes):c=Ir(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),c.length===0||Ht(e,HTMLVideoElement)||await c.reduce((u,d)=>u.then(()=>Jc(d,a)).then(g=>{g&&n.appendChild(g)}),Promise.resolve()),n}function kO(e,n,a){const s=n.style;if(!s)return;const o=window.getComputedStyle(e);o.cssText?(s.cssText=o.cssText,s.transformOrigin=o.transformOrigin):jw(a).forEach(c=>{let u=o.getPropertyValue(c);c==="font-size"&&u.endsWith("px")&&(u=`${Math.floor(parseFloat(u.substring(0,u.length-2)))-.1}px`),Ht(e,HTMLIFrameElement)&&c==="display"&&u==="inline"&&(u="block"),c==="d"&&n.getAttribute("d")&&(u=`path(${n.getAttribute("d")})`),s.setProperty(c,u,o.getPropertyPriority(c))})}function jO(e,n){Ht(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),Ht(e,HTMLInputElement)&&n.setAttribute("value",e.value)}function DO(e,n){if(Ht(e,HTMLSelectElement)){const a=n,s=Array.from(a.children).find(o=>e.value===o.getAttribute("value"));s&&s.setAttribute("selected","")}}function zO(e,n,a){return Ht(n,Element)&&(kO(e,n,a),wO(e,n,a),jO(e,n),DO(e,n)),n}async function $O(e,n){const a=e.querySelectorAll?e.querySelectorAll("use"):[];if(a.length===0)return e;const s={};for(let c=0;c<a.length;c++){const d=a[c].getAttribute("xlink:href");if(d){const g=e.querySelector(d),h=document.querySelector(d);!g&&h&&!s[d]&&(s[d]=await Jc(h,n,!0))}}const o=Object.values(s);if(o.length){const c="http://www.w3.org/1999/xhtml",u=document.createElementNS(c,"svg");u.setAttribute("xmlns",c),u.style.position="absolute",u.style.width="0",u.style.height="0",u.style.overflow="hidden",u.style.display="none";const d=document.createElementNS(c,"defs");u.appendChild(d);for(let g=0;g<o.length;g++)d.appendChild(o[g]);e.appendChild(u)}return e}async function Jc(e,n,a){return!a&&n.filter&&!n.filter(e)?null:Promise.resolve(e).then(s=>OO(s,n)).then(s=>MO(e,s,n)).then(s=>zO(e,s,n)).then(s=>$O(s,n))}const Uw=/url\((['"]?)([^'"]+?)\1\)/g,UO=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,LO=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function HO(e){const n=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function BO(e){const n=[];return e.replace(Uw,(a,s,o)=>(n.push(o),a)),n.filter(a=>!fh(a))}async function IO(e,n,a,s,o){try{const c=a?cO(n,a):n,u=Bh(n);let d;return o||(d=await Ih(c,u,s)),e.replace(HO(n),`$1${d}$3`)}catch{}return e}function qO(e,{preferredFontFormat:n}){return n?e.replace(LO,a=>{for(;;){const[s,,o]=UO.exec(a)||[];if(!o)return"";if(o===n)return`src: ${s};`}}):e}function Lw(e){return e.search(Uw)!==-1}async function Hw(e,n,a){if(!Lw(e))return e;const s=qO(e,a);return BO(s).reduce((c,u)=>c.then(d=>IO(d,u,n,a)),Promise.resolve(s))}async function xs(e,n,a){var s;const o=(s=n.style)===null||s===void 0?void 0:s.getPropertyValue(e);if(o){const c=await Hw(o,null,a);return n.style.setProperty(e,c,n.style.getPropertyPriority(e)),!0}return!1}async function VO(e,n){await xs("background",e,n)||await xs("background-image",e,n),await xs("mask",e,n)||await xs("-webkit-mask",e,n)||await xs("mask-image",e,n)||await xs("-webkit-mask-image",e,n)}async function PO(e,n){const a=Ht(e,HTMLImageElement);if(!(a&&!fh(e.src))&&!(Ht(e,SVGImageElement)&&!fh(e.href.baseVal)))return;const s=a?e.src:e.href.baseVal,o=await Ih(s,Bh(s),n);await new Promise((c,u)=>{e.onload=c,e.onerror=n.onImageErrorHandler?(...g)=>{try{c(n.onImageErrorHandler(...g))}catch(h){u(h)}}:u;const d=e;d.decode&&(d.decode=c),d.loading==="lazy"&&(d.loading="eager"),a?(e.srcset="",e.src=o):e.href.baseVal=o})}async function GO(e,n){const s=Ir(e.childNodes).map(o=>Bw(o,n));await Promise.all(s).then(()=>e)}async function Bw(e,n){Ht(e,Element)&&(await VO(e,n),await PO(e,n),await GO(e,n))}function YO(e,n){const{style:a}=e;n.backgroundColor&&(a.backgroundColor=n.backgroundColor),n.width&&(a.width=`${n.width}px`),n.height&&(a.height=`${n.height}px`);const s=n.style;return s!=null&&Object.keys(s).forEach(o=>{a[o]=s[o]}),e}const Wy={};async function ev(e){let n=Wy[e];if(n!=null)return n;const s=await(await fetch(e)).text();return n={url:e,cssText:s},Wy[e]=n,n}async function tv(e,n){let a=e.cssText;const s=/url\(["']?([^"')]+)["']?\)/g,c=(a.match(/url\([^)]+\)/g)||[]).map(async u=>{let d=u.replace(s,"$1");return d.startsWith("https://")||(d=new URL(d,e.url).href),zw(d,n.fetchRequestInit,({result:g})=>(a=a.replace(u,`url(${g})`),[u,g]))});return Promise.all(c).then(()=>a)}function nv(e){if(e==null)return[];const n=[],a=/(\/\*[\s\S]*?\*\/)/gi;let s=e.replace(a,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const g=o.exec(s);if(g===null)break;n.push(g[0])}s=s.replace(o,"");const c=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,u="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",d=new RegExp(u,"gi");for(;;){let g=c.exec(s);if(g===null){if(g=d.exec(s),g===null)break;c.lastIndex=d.lastIndex}else d.lastIndex=c.lastIndex;n.push(g[0])}return n}async function XO(e,n){const a=[],s=[];return e.forEach(o=>{if("cssRules"in o)try{Ir(o.cssRules||[]).forEach((c,u)=>{if(c.type===CSSRule.IMPORT_RULE){let d=u+1;const g=c.href,h=ev(g).then(p=>tv(p,n)).then(p=>nv(p).forEach(v=>{try{o.insertRule(v,v.startsWith("@import")?d+=1:o.cssRules.length)}catch(y){console.error("Error inserting rule from remote css",{rule:v,error:y})}})).catch(p=>{console.error("Error loading remote css",p.toString())});s.push(h)}})}catch(c){const u=e.find(d=>d.href==null)||document.styleSheets[0];o.href!=null&&s.push(ev(o.href).then(d=>tv(d,n)).then(d=>nv(d).forEach(g=>{u.insertRule(g,u.cssRules.length)})).catch(d=>{console.error("Error loading remote stylesheet",d)})),console.error("Error inlining remote css file",c)}}),Promise.all(s).then(()=>(e.forEach(o=>{if("cssRules"in o)try{Ir(o.cssRules||[]).forEach(c=>{a.push(c)})}catch(c){console.error(`Error while reading CSS rules from ${o.href}`,c)}}),a))}function KO(e){return e.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>Lw(n.style.getPropertyValue("src")))}async function ZO(e,n){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const a=Ir(e.ownerDocument.styleSheets),s=await XO(a,n);return KO(s)}function Iw(e){return e.trim().replace(/["']/g,"")}function QO(e){const n=new Set;function a(s){(s.style.fontFamily||getComputedStyle(s).fontFamily).split(",").forEach(c=>{n.add(Iw(c))}),Array.from(s.children).forEach(c=>{c instanceof HTMLElement&&a(c)})}return a(e),n}async function JO(e,n){const a=await ZO(e,n),s=QO(e);return(await Promise.all(a.filter(c=>s.has(Iw(c.style.fontFamily))).map(c=>{const u=c.parentStyleSheet?c.parentStyleSheet.href:null;return Hw(c.cssText,u,n)}))).join(`
`)}async function FO(e,n){const a=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await JO(e,n);if(a){const s=document.createElement("style"),o=document.createTextNode(a);s.appendChild(o),e.firstChild?e.insertBefore(s,e.firstChild):e.appendChild(s)}}async function qw(e,n={}){const{width:a,height:s}=Dw(e,n),o=await Jc(e,n,!0);return await FO(o,n),await Bw(o,n),YO(o,n),await pO(o,a,s)}async function WO(e,n={}){const{width:a,height:s}=Dw(e,n),o=await qw(e,n),c=await zc(o),u=document.createElement("canvas"),d=u.getContext("2d"),g=n.pixelRatio||hO(),h=n.canvasWidth||a,p=n.canvasHeight||s;return u.width=h*g,u.height=p*g,n.skipAutoScale||gO(u),u.style.width=`${h}`,u.style.height=`${p}`,n.backgroundColor&&(d.fillStyle=n.backgroundColor,d.fillRect(0,0,u.width,u.height)),d.drawImage(c,0,0,u.width,u.height),u}async function eR(e,n={}){return(await WO(e,n)).toDataURL()}var _c={exports:{}},tR=_c.exports,rv;function nR(){return rv||(rv=1,(function(e,n){(function(a,s){s()})(tR,function(){function a(h,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function s(h,p,v){var y=new XMLHttpRequest;y.open("GET",h),y.responseType="blob",y.onload=function(){g(y.response,p,v)},y.onerror=function(){console.error("could not download file")},y.send()}function o(h){var p=new XMLHttpRequest;p.open("HEAD",h,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Jl=="object"&&Jl.global===Jl?Jl:void 0,d=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(h,p,v){var y=u.URL||u.webkitURL,b=document.createElement("a");p=p||h.name||"download",b.download=p,b.rel="noopener",typeof h=="string"?(b.href=h,b.origin===location.origin?c(b):o(b.href)?s(h,p,v):c(b,b.target="_blank")):(b.href=y.createObjectURL(h),setTimeout(function(){y.revokeObjectURL(b.href)},4e4),setTimeout(function(){c(b)},0))}:"msSaveOrOpenBlob"in navigator?function(h,p,v){if(p=p||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(a(h,v),p);else if(o(h))s(h,p,v);else{var y=document.createElement("a");y.href=h,y.target="_blank",setTimeout(function(){c(y)})}}:function(h,p,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof h=="string")return s(h,p,v);var b=h.type==="application/octet-stream",C=/constructor/i.test(u.HTMLElement)||u.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||b&&C||d)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var _=T.result;_=E?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=_:location=_,y=null},T.readAsDataURL(h)}else{var S=u.URL||u.webkitURL,N=S.createObjectURL(h);y?y.location=N:location.href=N,y=null,setTimeout(function(){S.revokeObjectURL(N)},4e4)}});u.saveAs=g.saveAs=g,e.exports=g})})(_c)),_c.exports}var Co=nR();const rR=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const a=await eR(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),s=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.png`;Co.saveAs(a,s)}catch(a){console.error("Error exporting PNG:",a),alert("Failed to export PNG: "+a.message)}},aR=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const a=await qw(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),s=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.svg`;Co.saveAs(a,s)}catch(a){console.error("Error exporting SVG:",a),alert("Failed to export SVG: "+a.message)}},sR=e=>{let n="C4Context";e.components?.length>0?n="C4Component":e.containers?.length>0&&(n="C4Container");let a=`${n}
`;return a+=`  title ${e.metadata.name}

`,e.people?.forEach(s=>{const o=s.description||"";a+=`  Person(${gt(s.id)}, "${s.name}", "${o}")
`}),e.people?.length>0&&(a+=`
`),e.systems?.forEach(s=>{const o=s.description||"",c=s.technology||"";c?a+=`  System(${gt(s.id)}, "${s.name}", "${o}", "${c}")
`:a+=`  System(${gt(s.id)}, "${s.name}", "${o}")
`}),e.systems?.length>0&&(a+=`
`),e.externalSystems?.forEach(s=>{const o=s.description||"";a+=`  System_Ext(${gt(s.id)}, "${s.name}", "${o}")
`}),e.externalSystems?.length>0&&(a+=`
`),e.containers?.forEach(s=>{const o=s.description||"",c=s.technology||"";c?a+=`  Container(${gt(s.id)}, "${s.name}", "${c}", "${o}")
`:a+=`  Container(${gt(s.id)}, "${s.name}", "${o}")
`}),e.containers?.length>0&&(a+=`
`),e.components?.forEach(s=>{const o=s.description||"",c=s.technology||"";c?a+=`  Component(${gt(s.id)}, "${s.name}", "${c}", "${o}")
`:a+=`  Component(${gt(s.id)}, "${s.name}", "${o}")
`}),e.components?.length>0&&(a+=`
`),e.relationships?.forEach(s=>{const o=s.description||"uses",c=s.technology||"",u=s.arrowDirection==="left"?"Rel_Back":"Rel";c?a+=`  ${u}(${gt(s.from)}, ${gt(s.to)}, "${o}", "${c}")
`:a+=`  ${u}(${gt(s.from)}, ${gt(s.to)}, "${o}")
`}),a},Vw=e=>{let n=`@startuml
`;return n+=`!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

`,n+=`title ${e.metadata.name}

`,e.people?.forEach(a=>{n+=`Person(${gt(a.id)}, "${a.name}", "${a.description||""}")
`}),e.systems?.forEach(a=>{n+=`System(${gt(a.id)}, "${a.name}", "${a.description||""}")
`}),e.externalSystems?.forEach(a=>{n+=`System_Ext(${gt(a.id)}, "${a.name}", "${a.description||""}")
`}),e.containers?.forEach(a=>{const s=a.technology?`, "${a.technology}"`:"";n+=`Container(${gt(a.id)}, "${a.name}", "${a.description||""}"${s})
`}),e.components?.forEach(a=>{const s=a.technology?`, "${a.technology}"`:"";n+=`Component(${gt(a.id)}, "${a.name}", "${a.description||""}"${s})
`}),n+=`
`,e.relationships?.forEach(a=>{const s=a.description||"uses",o=a.technology?`, "${a.technology}"`:"";n+=`Rel(${gt(a.from)}, ${gt(a.to)}, "${s}"${o})
`}),n+=`
@enduml`,n},Pw=e=>{let n=`# ${e.metadata.name}

`;return n+=`**Version:** ${e.metadata.version}
`,n+=`**Author:** ${e.metadata.author}

`,n+=`---

`,e.systems?.length>0&&(n+=`## Software Systems

`,e.systems.forEach(a=>{n+=`### ${a.name}

`,a.description&&(n+=`${a.description}

`),a.technology&&(n+=`**Technology:** ${a.technology}

`);const s=e.containers?.filter(o=>o.parentSystem===a.id)||[];s.length>0&&(n+=`#### Containers

`,s.forEach(o=>{n+=`- **${o.name}**`,o.technology&&(n+=` (${o.technology})`),o.description&&(n+=`: ${o.description}`),n+=`
`}),n+=`
`)})),e.externalSystems?.length>0&&(n+=`## External Systems

`,e.externalSystems.forEach(a=>{n+=`### ${a.name}

`,a.description&&(n+=`${a.description}

`)})),e.people?.length>0&&(n+=`## People / Actors

`,e.people.forEach(a=>{n+=`### ${a.name}

`,a.description&&(n+=`${a.description}

`)})),e.relationships?.length>0&&(n+=`## Relationships

`,n+=`| From | To | Description | Technology |
`,n+=`|------|-----|-------------|------------|
`,e.relationships.forEach(a=>{const s=av(e,a.from),o=av(e,a.to),c=s?.name||a.from,u=o?.name||a.to;n+=`| ${c} | ${u} | ${a.description||"-"} | ${a.technology||"-"} |
`}),n+=`
`),n},iR=e=>{const n=Pw(e),a=Vw(e),s=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e.metadata.name} - C4 Model</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        h1, h2, h3, h4 { color: #1e293b; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: left;
        }
        th { background-color: #f1f5f9; font-weight: 600; }
        pre {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
        }
        code {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .metadata {
            background-color: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="metadata">
        <h1>${e.metadata.name}</h1>
        <p><strong>Version:</strong> ${e.metadata.version}</p>
        <p><strong>Author:</strong> ${e.metadata.author}</p>
    </div>

    ${oR(n)}

    <h2>PlantUML Diagram Code</h2>
    <pre><code>${a}</code></pre>

    <h2>JSON Model</h2>
    <pre><code>${JSON.stringify(e,null,2)}</code></pre>
</body>
</html>`,o=new Blob([s],{type:"text/html"});Co.saveAs(o,`${(e.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.html`)},gt=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),av=(e,n)=>[...e.systems||[],...e.containers||[],...e.components||[],...e.people||[],...e.externalSystems||[]].find(s=>s.id===n),oR=e=>e.split(`
`).map(n=>n.startsWith("# ")?`<h1>${n.substring(2)}</h1>`:n.startsWith("## ")?`<h2>${n.substring(3)}</h2>`:n.startsWith("### ")?`<h3>${n.substring(4)}</h3>`:n.startsWith("#### ")?`<h4>${n.substring(5)}</h4>`:n.startsWith("- ")?`<li>${n.substring(2)}</li>`:n.startsWith("**")&&n.endsWith("**")?`<p><strong>${n.substring(2,n.length-2)}</strong></p>`:n.trim()==="---"?"<hr>":n.trim()===""?"<br>":`<p>${n}</p>`).join(`
`),fa=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",lR=e=>{const n="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;align=center;spacingTop=8;";switch(e){case"person":return`${n}fillColor=#e1d5e7;strokeColor=#9673a6;`;case"system":return`${n}fillColor=#dae8fc;strokeColor=#6c8ebf;`;case"externalSystem":return`${n}fillColor=#f5f5f5;strokeColor=#666666;dashed=1;`;case"container":return`${n}fillColor=#d5e8d4;strokeColor=#82b366;`;case"component":return`${n}fillColor=#fff2cc;strokeColor=#d6b656;`;default:return`${n}fillColor=#ffffff;strokeColor=#000000;`}},cR=e=>{let n="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;";return e.lineStyle==="dashed"?n+="dashed=1;dashPattern=8 8;":e.lineStyle==="dotted"&&(n+="dashed=1;dashPattern=2 2;"),e.arrowDirection==="left"?n+="startArrow=classic;endArrow=none;":e.arrowDirection==="both"?n+="startArrow=classic;endArrow=classic;":n+="startArrow=none;endArrow=classic;",n+="strokeColor=#666666;",n},uR=e=>{const n=new Date().toISOString(),a=`diagram-${Date.now()}`,s=[...e.people||[],...e.systems||[],...e.externalSystems||[],...e.containers||[],...e.components||[]];let o=1/0,c=1/0,u=-1/0,d=-1/0;s.forEach(T=>{const S=T.position?.x||0,N=T.position?.y||0;o=Math.min(o,S),c=Math.min(c,N),u=Math.max(u,S+220),d=Math.max(d,N+120)});const g=o<50?50-o:0,h=c<50?50-c:0,p=Math.max(1100,u+g+100),v=Math.max(850,d+h+100);let y=`<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="Diagrams" modified="${n}" agent="Diagrams C4 Modelling Tool" version="1.0" type="device">
  <diagram name="${fa(e.metadata?.name||"C4 Diagram")}" id="${a}">
    <mxGraphModel dx="0" dy="0" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="${p}" pageHeight="${v}" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
`;const b=new Map;let C=2;const E=T=>{switch(T){case"person":return"[Person]";case"system":return"[Software System]";case"externalSystem":return"[External System]";case"container":return"[Container]";case"component":return"[Component]";default:return""}};return s.forEach(T=>{const S=`cell-${C++}`;b.set(T.id,S);const N=(T.position?.x||0)+g,_=(T.position?.y||0)+h,A=220,D=120,z=lR(T.type),$=E(T.type),V=T.technology?`[${fa(T.technology)}]`:"",K=T.description?`&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;${fa(T.description)}&lt;/font&gt;`:"",oe=`&lt;b&gt;${fa(T.name)}&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px; color: #666666;&quot;&gt;${$}${V?"&lt;br&gt;"+V:""}&lt;/font&gt;${K}`;y+=`        <mxCell id="${S}" value="${oe}" style="${z}" vertex="1" parent="1">
          <mxGeometry x="${N}" y="${_}" width="${A}" height="${D}" as="geometry" />
        </mxCell>
`}),(e.relationships||[]).forEach(T=>{const S=`edge-${C++}`,N=b.get(T.from),_=b.get(T.to);if(!N||!_)return;const A=cR(T),D=T.description||"",z=T.technology?`[${fa(T.technology)}]`:"",$=z?`${fa(D)}&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;${z}&lt;/font&gt;`:fa(D);y+=`        <mxCell id="${S}" value="${$}" style="${A}" edge="1" parent="1" source="${N}" target="${_}">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
`}),y+=`      </root>
    </mxGraphModel>
  </diagram>
</mxfile>`,y},dR=e=>{const n=uR(e),a=new Blob([n],{type:"application/xml"}),s=`${(e.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.drawio`;Co.saveAs(a,s)},fR=e=>{const n=[...(e.systems||[]).map(T=>({...T,type:"system"})),...(e.containers||[]).map(T=>({...T,type:"container"})),...(e.components||[]).map(T=>({...T,type:"component"})),...(e.people||[]).map(T=>({...T,type:"person"})),...(e.externalSystems||[]).map(T=>({...T,type:"externalSystem"}))],a=new Map(n.map(T=>[T.id,T])),s=T=>{const S=[T];let N=T;for(;N.parentId&&a.has(N.parentId);)N=a.get(N.parentId),S.unshift(N);return S};let o=0;const c=n.map(T=>{const S=s(T);return o=Math.max(o,S.length),{element:T,chain:S}});c.sort((T,S)=>{const N=Math.min(T.chain.length,S.chain.length);for(let _=0;_<N;_++){const A=(T.chain[_].name||"").localeCompare(S.chain[_].name||"");if(A!==0)return A}return T.chain.length-S.chain.length});const u=[];for(let T=0;T<o;T++)T===0?u.push("Level 1 (System)"):T===1?u.push("Level 2 (Container)"):u.push(`Level ${T+1}`);const d=["Discovery","Design","Build","Testing","Deployment","Maintenance"],g=new Set;n.forEach(T=>{(T.phases||[]).forEach(S=>{g.add(S.name)})});const h=[...d];g.forEach(T=>{h.includes(T)||h.push(T)});const p=["ID",...u,"Type","PM","UX","Tech","Technology","Description",...h.flatMap(T=>[`${T} Start`,`${T} End`])],v=c.map(({element:T,chain:S})=>{const N=[];for(let D=0;D<o;D++)D<S.length?N.push(S[D].name||""):N.push(T.name||"");const _=new Map;(T.phases||[]).forEach(D=>{_.set(D.name,D)});const A=h.flatMap(D=>{const z=_.get(D);return z?[z.startMonth||"",z.endMonth||""]:["",""]});return[T.id||"",...N,T.type||"",T.ownerPM||"",T.ownerUX||"",T.ownerTech||"",T.technology||"",T.description||"",...A]}),y=T=>{const S=String(T||"");return S.includes(",")||S.includes('"')||S.includes(`
`)?`"${S.replace(/"/g,'""')}"`:S},b=[p.map(y).join(","),...v.map(T=>T.map(y).join(","))].join(`
`),C=new Blob([b],{type:"text/csv;charset=utf-8"}),E=`${(e.metadata?.name||"architecture").replace(/\s+/g,"-").toLowerCase()}.csv`;Co.saveAs(C,E)},hR=e=>{const n=[];let a=[],s="",o=!1;for(let c=0;c<e.length;c++){const u=e[c],d=e[c+1];o?u==='"'&&d==='"'?(s+='"',c++):u==='"'?o=!1:s+=u:u==='"'?o=!0:u===","?(a.push(s),s=""):u===`
`||u==="\r"&&d===`
`?(a.push(s),n.push(a),a=[],s="",u==="\r"&&c++):u!=="\r"&&(s+=u)}return(s||a.length>0)&&(a.push(s),n.push(a)),n},sv=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)}),gR=e=>{const n=hR(e);if(n.length<2)throw new Error("CSV must have at least a header row and one data row");const a=n[0].map(A=>A.trim()),s=n.slice(1).filter(A=>A.some(D=>D.trim())),o=a.findIndex(A=>A.toLowerCase()==="id"),c=a.findIndex(A=>A.toLowerCase()==="type"),u=a.findIndex(A=>A.toLowerCase()==="pm"),d=a.findIndex(A=>A.toLowerCase()==="ux"),g=a.findIndex(A=>A.toLowerCase()==="tech"),h=a.findIndex(A=>A.toLowerCase()==="technology"),p=a.findIndex(A=>A.toLowerCase()==="description"),v=[];a.forEach((A,D)=>{A.toLowerCase().startsWith("level")&&v.push(D)});const y=new Map;if(a.forEach((A,D)=>{const z=A.toLowerCase();if(z.endsWith(" start")){const $=A.slice(0,-6).trim();y.has($)||y.set($,{}),y.get($).startIndex=D}else if(z.endsWith(" end")){const $=A.slice(0,-4).trim();y.has($)||y.set($,{}),y.get($).endIndex=D}}),v.length===0)throw new Error('No Level columns found in CSV. Expected columns like "Level 1", "Level 2", etc.');if(c===-1)throw new Error("Type column is required");const b=new Map,C={systems:[],containers:[],components:[],people:[],externalSystems:[]};s.forEach(A=>{const D=k=>k>=0&&k<A.length&&A[k]?.trim()||"",z=D(o),$=D(c).toLowerCase(),V=D(u),K=D(d),oe=D(g),W=D(h),ee=D(p),ne=v.map(k=>D(k));let j=0;for(let k=0;k<ne.length;k++){const G=ne[k];if(!G)break;(k===0||G!==ne[k-1])&&(j=k)}const P=[];for(let k=0;k<=j;k++)ne[k]&&(k===0||ne[k]!==ne[k-1])&&P.push(ne[k]);const M=P.join("/"),U=P[P.length-1],B=P.slice(0,-1).join("/");if(b.has(M)){const k=b.get(M);V&&!k.ownerPM&&(k.ownerPM=V),K&&!k.ownerUX&&(k.ownerUX=K),oe&&!k.ownerTech&&(k.ownerTech=oe),W&&!k.technology&&(k.technology=W),ee&&!k.description&&(k.description=ee);return}let X=$;(!X||!["system","container","component","person","externalsystem"].includes(X))&&(j===0?X="system":j===1?X="container":X="component"),X==="externalsystem"&&(X="externalSystem");const H=[];y.forEach((k,G)=>{const Z=k.startIndex!==void 0?D(k.startIndex):"",ie=k.endIndex!==void 0?D(k.endIndex):"";(Z||ie)&&H.push({id:sv(),name:G,startMonth:Z||"",endMonth:ie||""})});const R={id:z||sv(),name:U,type:X,description:ee||"",technology:W||"",ownerPM:V||"",ownerUX:K||"",ownerTech:oe||"",phases:H.length>0?H:[],position:{x:100,y:100}};switch(b.set(M,R),B&&b.has(B)&&(R.parentId=b.get(B).id),X){case"system":C.systems.push(R);break;case"container":C.containers.push(R);break;case"component":C.components.push(R);break;case"person":C.people.push(R);break;case"externalSystem":C.externalSystems.push(R);break}});const E=250,T=4,S=[...C.systems,...C.containers,...C.components,...C.people,...C.externalSystems],N=new Map;S.forEach(A=>{const D=A.parentId||"root";N.has(D)||N.set(D,[]),N.get(D).push(A)});const _=(A,D,z)=>{const $=N.get(A||"root")||[];let V=D,K=z,oe=0;$.forEach(W=>{W.position={x:V,y:K},oe++,oe>=T?(oe=0,V=D,K+=E):V+=E})};return _(null,100,100),N.forEach((A,D)=>{D!=="root"&&_(D,100,100)}),{metadata:{name:"Imported Model",version:"1.0",author:""},...C,relationships:[],shadows:[]}},mR=e=>{let n=1;const a=new Map,s=h=>(a.has(h)||a.set(h,String(n++)),a.get(h)),o=(e.people||[]).map(h=>({id:s(h.id),name:h.name||"Unnamed Person",description:h.description||"",tags:(h.tags||[]).join(",")||"Person",location:"Unspecified",relationships:[]})),c=[];(e.systems||[]).forEach(h=>{const p=s(h.id);c.push({id:p,name:h.name||"Unnamed System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System",location:"Unspecified",containers:[],relationships:[]})}),(e.externalSystems||[]).forEach(h=>{const p=s(h.id);c.push({id:p,name:h.name||"Unnamed External System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System,External",location:"External",containers:[],relationships:[]})}),(e.containers||[]).forEach(h=>{const v={id:s(h.id),name:h.name||"Unnamed Container",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Container",components:[],relationships:[]},y=c.find(b=>s(h.parentSystem)===b.id);y?y.containers.push(v):c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned containers",tags:"Software System",location:"Unspecified",containers:[v],relationships:[]}):c[0].containers.push(v)}),(e.components||[]).forEach(h=>{const v={id:s(h.id),name:h.name||"Unnamed Component",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Component",relationships:[]};let y=!1;for(const b of c){const C=b.containers.find(E=>s(h.parentContainer)===E.id);if(C){C.components.push(v),y=!0;break}}if(!y){for(const b of c)if(b.containers.length>0){b.containers[0].components.push(v),y=!0;break}}y||(c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned components",tags:"Software System",location:"Unspecified",containers:[{id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}],relationships:[]}):c[0].containers.length===0?c[0].containers.push({id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}):c[0].containers[0].components.push(v))});const u=h=>{const p=s(h.from),v=s(h.to),y={sourceId:p,destinationId:v,description:h.description||"",technology:h.technology||"",tags:h.tags||""},b=o.find(C=>C.id===p);if(b){b.relationships.push(y);return}for(const C of c){if(C.id===p){C.relationships.push(y);return}for(const E of C.containers){if(E.id===p){E.relationships.push(y);return}for(const T of E.components)if(T.id===p){T.relationships.push(y);return}}}};(e.relationships||[]).forEach(h=>{u(h)});const d={systemLandscapeViews:[],systemContextViews:[],containerViews:[],componentViews:[],configuration:{styles:{elements:[{tag:"Person",shape:"Person",background:"#08427b",color:"#ffffff"},{tag:"Software System",background:"#1168bd",color:"#ffffff"},{tag:"External",background:"#999999",color:"#ffffff"},{tag:"Container",background:"#438dd5",color:"#ffffff"},{tag:"Component",background:"#85bbf0",color:"#000000"}],relationships:[]}}};if(c.length>0||o.length>0){const h=[];let p=100,v=100;o.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),c.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),d.systemLandscapeViews.push({key:"SystemLandscape",description:"System Landscape view",elements:h,relationships:[],automaticLayout:{rankDirection:"TopBottom",rankSeparation:200,nodeSeparation:200}})}return{id:1,name:e.metadata?.name||"Architecture Model",description:`Exported from Diagrams on ${new Date().toISOString()}`,version:e.metadata?.version||"1.0",model:{people:o,softwareSystems:c},views:d,documentation:{},properties:{exportedFrom:"Diagrams",author:e.metadata?.author||""}}},pR=e=>{const n={metadata:{name:e.name||"Imported Model",version:e.version||"1.0",author:e.properties?.author||e.lastModifiedUser||"Unknown"},systems:[],containers:[],components:[],people:[],externalSystems:[],relationships:[]},a=new Map;[...e.views?.systemLandscapeViews||[],...e.views?.systemContextViews||[],...e.views?.containerViews||[],...e.views?.componentViews||[]].forEach(d=>{(d.elements||[]).forEach(g=>{g.x!==void 0&&g.y!==void 0&&a.set(g.id,{x:g.x,y:g.y})})});const o=d=>a.get(d)||{x:100,y:100},c=(d,g)=>`${d}-${Date.now()}-${g}-${Math.random().toString(36).substr(2,5)}`,u=new Map;return(e.model?.people||[]).forEach(d=>{const g=c("person",d.id);u.set(d.id,g);const h=o(d.id);n.people.push({id:g,type:"person",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(p=>p.trim()).filter(p=>p!=="Person"):[],position:h})}),(e.model?.softwareSystems||[]).forEach(d=>{const g=d.location==="External"||d.tags&&d.tags.includes("External"),h=c(g?"externalSystem":"system",d.id);u.set(d.id,h);const p=o(d.id),v={id:h,type:g?"externalSystem":"system",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(y=>y.trim()).filter(y=>y!=="Software System"&&y!=="External"):[],position:p};g?n.externalSystems.push(v):n.systems.push(v),(d.containers||[]).forEach(y=>{const b=c("container",y.id);u.set(y.id,b);const C=o(y.id);n.containers.push({id:b,type:"container",name:y.name,description:y.description||"",technology:y.technology||"",tags:y.tags?y.tags.split(",").map(E=>E.trim()).filter(E=>E!=="Container"):[],position:C,parentSystem:h}),(y.components||[]).forEach(E=>{const T=c("component",E.id);u.set(E.id,T);const S=o(E.id);n.components.push({id:T,type:"component",name:E.name,description:E.description||"",technology:E.technology||"",tags:E.tags?E.tags.split(",").map(N=>N.trim()).filter(N=>N!=="Component"):[],position:S,parentContainer:b}),(E.relationships||[]).forEach(N=>{const _=u.get(N.sourceId),A=u.get(N.destinationId);_&&A&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:_,to:A,description:N.description||"",technology:N.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(y.relationships||[]).forEach(E=>{const T=u.get(E.sourceId),S=u.get(E.destinationId);T&&S&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:T,to:S,description:E.description||"",technology:E.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(d.relationships||[]).forEach(y=>{const b=u.get(y.sourceId),C=u.get(y.destinationId);b&&C&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:b,to:C,description:y.description||"",technology:y.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(e.model?.people||[]).forEach(d=>{(d.relationships||[]).forEach(g=>{const h=u.get(g.sourceId),p=u.get(g.destinationId);h&&p&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:h,to:p,description:g.description||"",technology:g.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),n},yR=8e3,vR=e=>{try{const n=JSON.stringify(e);return btoa(encodeURIComponent(n))}catch(n){return console.error("Error encoding model:",n),null}},bR=e=>{try{const n=decodeURIComponent(atob(e));return JSON.parse(n)}catch(n){return console.error("Error decoding model:",n),null}},wR=e=>{const n=vR(e);if(!n)return{url:null,error:"Failed to encode model"};const s=`${window.location.origin+window.location.pathname}#model=${n}`;return s.length>yR?{url:null,error:`Model too large for URL sharing (${Math.round(s.length/1024)}KB). Use JSON export instead.`}:{url:s,error:null}},xR=()=>{const e=window.location.hash;if(!e||!e.startsWith("#model="))return null;const n=e.substring(7);return bR(n)},_R=()=>{history.replaceState(null,"",window.location.pathname)},SR=()=>window.location.hash.startsWith("#model=");function Fc(e,n){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)n.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]]);return a}function ER(e,n,a,s){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(p){try{h(s.next(p))}catch(v){u(v)}}function g(p){try{h(s.throw(p))}catch(v){u(v)}}function h(p){p.done?c(p.value):o(p.value).then(d,g)}h((s=s.apply(e,n||[])).next())})}const TR=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);class qh extends Error{constructor(n,a="FunctionsError",s){super(n),this.name=a,this.context=s}}class CR extends qh{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class iv extends qh{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class ov extends qh{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var hh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(hh||(hh={}));class AR{constructor(n,{headers:a={},customFetch:s,region:o=hh.Any}={}){this.url=n,this.headers=a,this.region=o,this.fetch=TR(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return ER(this,arguments,void 0,function*(a,s={}){var o;let c,u;try{const{headers:d,method:g,body:h,signal:p,timeout:v}=s;let y={},{region:b}=s;b||(b=this.region);const C=new URL(`${this.url}/${a}`);b&&b!=="any"&&(y["x-region"]=b,C.searchParams.set("forceFunctionRegion",b));let E;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",E=h):typeof h=="string"?(y["Content-Type"]="text/plain",E=h):typeof FormData<"u"&&h instanceof FormData?E=h:(y["Content-Type"]="application/json",E=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?E=JSON.stringify(h):E=h;let T=p;v&&(u=new AbortController,c=setTimeout(()=>u.abort(),v),p?(T=u.signal,p.addEventListener("abort",()=>u.abort())):T=u.signal);const S=yield this.fetch(C.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:E,signal:T}).catch(D=>{throw new CR(D)}),N=S.headers.get("x-relay-error");if(N&&N==="true")throw new iv(S);if(!S.ok)throw new ov(S);let _=((o=S.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),A;return _==="application/json"?A=yield S.json():_==="application/octet-stream"||_==="application/pdf"?A=yield S.blob():_==="text/event-stream"?A=S:_==="multipart/form-data"?A=yield S.formData():A=yield S.text(),{data:A,error:null,response:S}}catch(d){return{data:null,error:d,response:d instanceof ov||d instanceof iv?d.context:void 0}}finally{c&&clearTimeout(c)}})}}var NR=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},OR=class{constructor(e){var n,a,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(a=e.isMaybeSingle)!==null&&a!==void 0?a:!1,this.urlLengthLimit=(s=e.urlLengthLimit)!==null&&s!==void 0?s:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let o=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,d=null,g=null,h=c.status,p=c.statusText;if(c.ok){var v,y;if(a.method!=="HEAD"){var b;const S=await c.text();S===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((b=a.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=S:d=JSON.parse(S))}const E=(v=a.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),T=(y=c.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");E&&T&&T.length>1&&(g=parseInt(T[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var C;const E=await c.text();try{u=JSON.parse(E),Array.isArray(u)&&c.status===404&&(d=[],u=null,h=200,p="OK")}catch{c.status===404&&E===""?(h=204,p="No Content"):u={message:E}}if(u&&a.isMaybeSingle&&(!(u==null||(C=u.details)===null||C===void 0)&&C.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&a.shouldThrowOnError)throw new NR(u)}return{error:u,data:d,count:g,status:h,statusText:p}});return this.shouldThrowOnError||(o=o.catch(c=>{var u;let d="",g="",h="";const p=c?.cause;if(p){var v,y,b,C;const S=(v=p?.message)!==null&&v!==void 0?v:"",N=(y=p?.code)!==null&&y!==void 0?y:"";d=`${(b=c?.name)!==null&&b!==void 0?b:"FetchError"}: ${c?.message}`,d+=`

Caused by: ${(C=p?.name)!==null&&C!==void 0?C:"Error"}: ${S}`,N&&(d+=` (${N})`),p?.stack&&(d+=`
${p.stack}`)}else{var E;d=(E=c?.stack)!==null&&E!==void 0?E:""}const T=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(h="",g="Request was aborted (timeout or manual cancellation)",T>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${T} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(p?.name==="HeadersOverflowError"||p?.code==="UND_ERR_HEADERS_OVERFLOW")&&(h="",g="HTTP headers exceeded server limits (typically 16KB)",T>this.urlLengthLimit&&(g+=`. Your request URL is ${T} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:d,hint:g,code:h},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}},RR=class extends OR{select(e){let n=!1;const a=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:a,foreignTable:s,referencedTable:o=s}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:a=n}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:a,referencedTable:s=a}={}){const o=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(c,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:a=!1,buffers:s=!1,wal:o=!1,format:c="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,a?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const lv=new RegExp("[,()]");var Os=class extends RR{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}regexMatch(e,n){return this.url.searchParams.append(e,`match.${n}`),this}regexIMatch(e,n){return this.url.searchParams.append(e,`imatch.${n}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}isDistinct(e,n){return this.url.searchParams.append(e,`isdistinct.${n}`),this}in(e,n){const a=Array.from(new Set(n)).map(s=>typeof s=="string"&&lv.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${a})`),this}notIn(e,n){const a=Array.from(new Set(n)).map(s=>typeof s=="string"&&lv.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${a})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:a,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(e,`${o}fts${c}.${n}`),this}match(e){return Object.entries(e).forEach(([n,a])=>{this.url.searchParams.append(n,`eq.${a}`)}),this}not(e,n,a){return this.url.searchParams.append(e,`not.${n}.${a}`),this}or(e,{foreignTable:n,referencedTable:a=n}={}){const s=a?`${a}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,a){return this.url.searchParams.append(e,`${n}.${a}`),this}},MR=class{constructor(e,{headers:n={},schema:a,fetch:s,urlLengthLimit:o=8e3}){this.url=e,this.headers=new Headers(n),this.schema=a,this.fetch=s,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,n){const{head:a=!1,count:s}=n??{},o=a?"HEAD":"GET";let c=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join(""),{url:d,headers:g}=this.cloneRequestState();return d.searchParams.set("select",u),s&&g.append("Prefer",`count=${s}`),new Os({method:o,url:d,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:n,defaultToNull:a=!0}={}){var s;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(n&&u.append("Prefer",`count=${n}`),a||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((g,h)=>g.concat(Object.keys(h)),[]);if(d.length>0){const g=[...new Set(d)].map(h=>`"${h}"`);c.searchParams.set("columns",g.join(","))}}return new Os({method:o,url:c,headers:u,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:n,ignoreDuplicates:a=!1,count:s,defaultToNull:o=!0}={}){var c;const u="POST",{url:d,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),n!==void 0&&d.searchParams.set("on_conflict",n),s&&g.append("Prefer",`count=${s}`),o||g.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(h.length>0){const p=[...new Set(h)].map(v=>`"${v}"`);d.searchParams.set("columns",p.join(","))}}return new Os({method:u,url:d,headers:g,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:n}={}){var a;const s="PATCH",{url:o,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Os({method:s,url:o,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var n;const a="DELETE",{url:s,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Os({method:a,url:s,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function lo(e){"@babel/helpers - typeof";return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lo(e)}function kR(e,n){if(lo(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,n);if(lo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function jR(e){var n=kR(e,"string");return lo(n)=="symbol"?n:n+""}function DR(e,n,a){return(n=jR(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function cv(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,s)}return a}function oc(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?cv(Object(a),!0).forEach(function(s){DR(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):cv(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}var zR=class Gw{constructor(n,{headers:a={},schema:s,fetch:o,timeout:c,urlLengthLimit:u=8e3}={}){this.url=n,this.headers=new Headers(a),this.schemaName=s,this.urlLengthLimit=u;const d=o??globalThis.fetch;c!==void 0&&c>0?this.fetch=(g,h)=>{const p=new AbortController,v=setTimeout(()=>p.abort(),c),y=h?.signal;if(y){if(y.aborted)return clearTimeout(v),d(g,h);const b=()=>{clearTimeout(v),p.abort()};return y.addEventListener("abort",b,{once:!0}),d(g,oc(oc({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(v),y.removeEventListener("abort",b)})}return d(g,oc(oc({},h),{},{signal:p.signal})).finally(()=>clearTimeout(v))}:this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new MR(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Gw(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,a={},{head:s=!1,get:o=!1,count:c}={}){var u;let d;const g=new URL(`${this.url}/rpc/${n}`);let h;const p=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(p)),v=s&&Object.values(a).some(p);v?(d="POST",h=a):s||o?(d=s?"HEAD":"GET",Object.entries(a).filter(([b,C])=>C!==void 0).map(([b,C])=>[b,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([b,C])=>{g.searchParams.append(b,C)})):(d="POST",h=a);const y=new Headers(this.headers);return v?y.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&y.set("Prefer",`count=${c}`),new Os({method:d,url:g,headers:y,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class $R{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const a=globalThis.process;if(a){const s=a.versions;if(s&&s.node){const o=s.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const s=this.getWebSocketConstructor();return new s(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const UR="2.97.0",LR=`realtime-js/${UR}`,HR="1.0.0",Yw="2.0.0",uv=Yw,gh=1e4,BR=1e3,IR=100;var Ur;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ur||(Ur={}));var ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ht||(ht={}));var pn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pn||(pn={}));var mh;(function(e){e.websocket="websocket"})(mh||(mh={}));var va;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(va||(va={}));class qR{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,a){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(n));let s=[n.join_ref,n.ref,n.topic,n.event,n.payload];return a(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(n){var a;return this._isArrayBuffer((a=n.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var a,s;const o=(s=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var a,s;const o=(s=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(n,a,s){var o,c;const u=n.topic,d=(o=n.ref)!==null&&o!==void 0?o:"",g=(c=n.join_ref)!==null&&c!==void 0?c:"",h=n.payload.event,p=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},v=Object.keys(p).length===0?"":JSON.stringify(p);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+d.length+u.length+h.length+v.length,b=new ArrayBuffer(this.HEADER_LENGTH+y);let C=new DataView(b),E=0;C.setUint8(E++,this.KINDS.userBroadcastPush),C.setUint8(E++,g.length),C.setUint8(E++,d.length),C.setUint8(E++,u.length),C.setUint8(E++,h.length),C.setUint8(E++,v.length),C.setUint8(E++,a),Array.from(g,S=>C.setUint8(E++,S.charCodeAt(0))),Array.from(d,S=>C.setUint8(E++,S.charCodeAt(0))),Array.from(u,S=>C.setUint8(E++,S.charCodeAt(0))),Array.from(h,S=>C.setUint8(E++,S.charCodeAt(0))),Array.from(v,S=>C.setUint8(E++,S.charCodeAt(0)));var T=new Uint8Array(b.byteLength+s.byteLength);return T.set(new Uint8Array(b),0),T.set(new Uint8Array(s),b.byteLength),T.buffer}decode(n,a){if(this._isArrayBuffer(n)){let s=this._binaryDecode(n);return a(s)}if(typeof n=="string"){const s=JSON.parse(n),[o,c,u,d,g]=s;return a({join_ref:o,ref:c,topic:u,event:d,payload:g})}return a({})}_binaryDecode(n){const a=new DataView(n),s=a.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,a,o)}}_decodeUserBroadcast(n,a,s){const o=a.getUint8(1),c=a.getUint8(2),u=a.getUint8(3),d=a.getUint8(4);let g=this.HEADER_LENGTH+4;const h=s.decode(n.slice(g,g+o));g=g+o;const p=s.decode(n.slice(g,g+c));g=g+c;const v=s.decode(n.slice(g,g+u));g=g+u;const y=n.slice(g,n.byteLength),b=d===this.JSON_ENCODING?JSON.parse(s.decode(y)):y,C={type:this.BROADCAST_EVENT,event:p,payload:b};return u>0&&(C.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(n){var a;return n instanceof ArrayBuffer||((a=n?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(n,a){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([s])=>a.includes(s)))}}class Xw{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Xe||(Xe={}));const dv=(e,n,a={})=>{var s;const o=(s=a.skipTypes)!==null&&s!==void 0?s:[];return n?Object.keys(n).reduce((c,u)=>(c[u]=VR(u,e,n,o),c),{}):{}},VR=(e,n,a,s)=>{const o=n.find(d=>d.name===e),c=o?.type,u=a[e];return c&&!s.includes(c)?Kw(c,u):ph(u)},Kw=(e,n)=>{if(e.charAt(0)==="_"){const a=e.slice(1,e.length);return XR(n,a)}switch(e){case Xe.bool:return PR(n);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return GR(n);case Xe.json:case Xe.jsonb:return YR(n);case Xe.timestamp:return KR(n);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return ph(n);default:return ph(n)}},ph=e=>e,PR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},GR=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},YR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},XR=(e,n)=>{if(typeof e!="string")return e;const a=e.length-1,s=e[a];if(e[0]==="{"&&s==="}"){let c;const u=e.slice(1,a);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(d=>Kw(n,d))}return e},KR=e=>typeof e=="string"?e.replace(" ","T"):e,Zw=e=>{const n=new URL(e);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Vf{constructor(n,a,s={},o=gh){this.channel=n,this.event=a,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var s;return this._hasReceived(n)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var fv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(fv||(fv={}));class Qi{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qi.syncState(this.state,o,c,u),this.pendingDiffs.forEach(g=>{this.state=Qi.syncDiff(this.state,g,c,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Qi.syncDiff(this.state,o,c,u),d())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,s,o){const c=this.cloneDeep(n),u=this.transformState(a),d={},g={};return this.map(c,(h,p)=>{u[h]||(g[h]=p)}),this.map(u,(h,p)=>{const v=c[h];if(v){const y=p.map(T=>T.presence_ref),b=v.map(T=>T.presence_ref),C=p.filter(T=>b.indexOf(T.presence_ref)<0),E=v.filter(T=>y.indexOf(T.presence_ref)<0);C.length>0&&(d[h]=C),E.length>0&&(g[h]=E)}else d[h]=p}),this.syncDiff(c,{joins:d,leaves:g},s,o)}static syncDiff(n,a,s,o){const{joins:c,leaves:u}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(c,(d,g)=>{var h;const p=(h=n[d])!==null&&h!==void 0?h:[];if(n[d]=this.cloneDeep(g),p.length>0){const v=n[d].map(b=>b.presence_ref),y=p.filter(b=>v.indexOf(b.presence_ref)<0);n[d].unshift(...y)}s(d,p,g)}),this.map(u,(d,g)=>{let h=n[d];if(!h)return;const p=g.map(v=>v.presence_ref);h=h.filter(v=>p.indexOf(v.presence_ref)<0),n[d]=h,o(d,h,g),h.length===0&&delete n[d]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(s=>a(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,s)=>{const o=n[s];return"metas"in o?a[s]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):a[s]=o,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(hv||(hv={}));var Ji;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ji||(Ji={}));var Wn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wn||(Wn={}));class Ds{constructor(n,a={config:{}},s){var o,c;if(this.topic=n,this.params=a,this.socket=s,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Vf(this,pn.join,this.params,this.timeout),this.rejoinTimer=new Xw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Qi(this),this.broadcastEndpointURL=Zw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,a=this.timeout){var s,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:u,presence:d,private:g}}=this.params,h=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&o!==void 0?o:[],p=!!this.bindings[Ji.PRESENCE]&&this.bindings[Ji.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,v={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:g};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(b=>n?.(Wn.CHANNEL_ERROR,b)),this._onClose(()=>n?.(Wn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:b})=>{var C;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){n?.(Wn.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,T=(C=E?.length)!==null&&C!==void 0?C:0,S=[];for(let N=0;N<T;N++){const _=E[N],{filter:{event:A,schema:D,table:z,filter:$}}=_,V=b&&b[N];if(V&&V.event===A&&Ds.isFilterValueEqual(V.schema,D)&&Ds.isFilterValueEqual(V.table,z)&&Ds.isFilterValueEqual(V.filter,$))S.push(Object.assign(Object.assign({},_),{id:V.id}));else{this.unsubscribe(),this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,n&&n(Wn.SUBSCRIBED);return}}).receive("error",b=>{this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{n?.(Wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,s){return this.state===ht.joined&&n===Ji.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,a,s)}async httpSend(n,a,s={}){var o;if(a==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let g=d.statusText;try{const h=await d.json();g=h.error||h.message||g}catch{}return Promise.reject(new Error(g))}async send(n,a={}){var s,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=n,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,d,g;const h=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),h.receive("ok",()=>c("ok")),h.receive("error",()=>c("error")),h.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ht.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Vf(this,pn.leave,{},n),s.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(n,a,s){const o=new AbortController,c=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(c),u}_push(n,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Vf(this,n,a,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>IR){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,s){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,s){var o,c;const u=n.toLocaleLowerCase(),{close:d,error:g,leave:h,join:p}=pn;if(s&&[d,g,h,p].indexOf(u)>=0&&s!==this._joinRef())return;let y=this._onMessage(u,a,s);if(a&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var C,E,T;return((C=b.filter)===null||C===void 0?void 0:C.event)==="*"||((T=(E=b.filter)===null||E===void 0?void 0:E.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(b=>b.callback(y,s)):(c=this.bindings[u])===null||c===void 0||c.filter(b=>{var C,E,T,S,N,_;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const A=b.id,D=(C=b.filter)===null||C===void 0?void 0:C.event;return A&&((E=a.ids)===null||E===void 0?void 0:E.includes(A))&&(D==="*"||D?.toLocaleLowerCase()===((T=a.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const A=(N=(S=b?.filter)===null||S===void 0?void 0:S.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return A==="*"||A===((_=a?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof y=="object"&&"ids"in y){const C=y.data,{schema:E,table:T,commit_timestamp:S,type:N,errors:_}=C;y=Object.assign(Object.assign({},{schema:E,table:T,commit_timestamp:S,eventType:N,new:{},old:{},errors:_}),this._getPayloadRecords(C))}b.callback(y,s)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,s){const o=n.toLocaleLowerCase(),c={type:o,filter:a,callback:s};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,a){const s=n.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===s&&Ds.isEqual(o.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const s in n)if(n[s]!==a[s])return!1;return!0}static isFilterValueEqual(n,a){return(n??void 0)===(a??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(pn.close,{},n)}_onError(n){this._on(pn.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=dv(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=dv(n.columns,n.old_record)),a}}const Pf=()=>{},lc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZR=[1e3,2e3,5e3,1e4],QR=1e4,JR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class FR{constructor(n,a){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gh,this.transport=null,this.heartbeatIntervalMs=lc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pf,this.ref=0,this.reconnectTimer=null,this.vsn=uv,this.logger=Pf,this.conn=null,this.sendBuffer=[],this.serializer=new qR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((s=a?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${mh.websocket}`,this.httpEndpoint=Zw(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$R.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,s){this.logger(n,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ur.connecting:return va.Connecting;case Ur.open:return va.Open;case Ur.closing:return va.Closing;default:return va.Closed}}isConnected(){return this.connectionState()===va.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const s=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===s);if(o)return o;{const c=new Ds(`realtime:${n}`,a,this);return this.channels.push(c),c}}push(n){const{topic:a,event:s,payload:o,ref:c}=n,u=()=>{this.encode(n,d=>{var g;(g=this.conn)===null||g===void 0||g.send(d)})};this.log("push",`${a} ${s} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(BR,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},lc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply"&&a.ref&&a.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:o,payload:c,ref:u}=a,d=u?`(${u})`:"",g=c.status||"";this.log("receive",`${g} ${s} ${o} ${d}`.trim(),c),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(o,c,u)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Ur.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ur.open||this.conn.readyState===Ur.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(a){this.log("error","error in heartbeat callback",a)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(pn.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const s=n.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${n}${s}${o}`}_workerObjectUrl(n){let a;if(n)a=n;else{const s=new Blob([JR],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a,s=!1;if(n)a=n,s=!0;else if(this.accessToken)try{a=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),a=this.accessTokenValue}else a=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const c={access_token:a,version:LR};a&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(pn.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(s=>{try{s(a)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(s){this.log("error",`error triggering ${n} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Xw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},lc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,s,o,c,u,d,g,h,p,v,y,b;switch(this.transport=(a=n?.transport)!==null&&a!==void 0?a:null,this.timeout=(s=n?.timeout)!==null&&s!==void 0?s:gh,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:lc.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=n?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=n?.heartbeatCallback)!==null&&d!==void 0?d:Pf,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:uv,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=n?.reconnectAfterMs)!==null&&h!==void 0?h:(C=>ZR[C-1]||QR),this.vsn){case HR:this.encode=(p=n?.encode)!==null&&p!==void 0?p:((C,E)=>E(JSON.stringify(C))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:((C,E)=>E(JSON.parse(C)));break;case Yw:this.encode=(y=n?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(b=n?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var co=class extends Error{constructor(e,n){super(e),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function WR(e,n,a){const s=new URL(n,e);if(a)for(const[o,c]of Object.entries(a))c!==void 0&&s.searchParams.set(o,c);return s.toString()}async function eM(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function tM(e){const n=e.fetchImpl??globalThis.fetch;return{async request({method:a,path:s,query:o,body:c,headers:u}){const d=WR(e.baseUrl,s,o),g=await eM(e.auth),h=await n(d,{method:a,headers:{...c?{"Content-Type":"application/json"}:{},...g,...u},body:c?JSON.stringify(c):void 0}),p=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),y=v&&p?JSON.parse(p):p;if(!h.ok){const b=v?y:void 0,C=b?.error;throw new co(C?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:C?.type,icebergCode:C?.code,details:b})}return{status:h.status,headers:h.headers,data:y}}}}function cc(e){return e.join("")}var nM=class{constructor(e,n=""){this.client=e,this.prefix=n}async listNamespaces(e){const n=e?{parent:cc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,n){const a={namespace:e.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${cc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${cc(e.namespace)}`}),!0}catch(n){if(n instanceof co&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(e,n){try{return await this.createNamespace(e,n)}catch(a){if(a instanceof co&&a.status===409)return;throw a}}};function _s(e){return e.join("")}var rM=class{constructor(e,n="",a){this.client=e,this.prefix=n,this.accessDelegation=a}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_s(e.namespace)}/tables`})).data.identifiers}async createTable(e,n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_s(e.namespace)}/tables`,body:n,headers:a})).data.metadata}async updateTable(e,n){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_s(e.namespace)}/tables/${e.name}`,body:n});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(e,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_s(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_s(e.namespace)}/tables/${e.name}`,headers:n})).data.metadata}async tableExists(e){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_s(e.namespace)}/tables/${e.name}`,headers:n}),!0}catch(a){if(a instanceof co&&a.status===404)return!1;throw a}}async createTableIfNotExists(e,n){try{return await this.createTable(e,n)}catch(a){if(a instanceof co&&a.status===409)return await this.loadTable({namespace:e.namespace,name:n.name});throw a}}},aM=class{constructor(e){let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const a=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=tM({baseUrl:a,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new nM(this.client,n),this.tableOps=new rM(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,n){return this.namespaceOps.createNamespace(e,n)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,n){return this.tableOps.createTable(e,n)}async updateTable(e,n){return this.tableOps.updateTable(e,n)}async dropTable(e,n){await this.tableOps.dropTable(e,n)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,n){return this.namespaceOps.createNamespaceIfNotExists(e,n)}async createTableIfNotExists(e,n){return this.tableOps.createTableIfNotExists(e,n)}},Wc=class extends Error{constructor(e,n="storage",a,s){super(e),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=a,this.statusCode=s}};function eu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var uc=class extends Wc{constructor(e,n,a,s="storage"){super(e,s,n,a),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Qw=class extends Wc{constructor(e,n,a="storage"){super(e,a),this.name=a==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const sM=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),iM=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yh=e=>{if(Array.isArray(e))return e.map(a=>yh(a));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([a,s])=>{const o=a.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=yh(s)}),n},oM=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function uo(e){"@babel/helpers - typeof";return uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uo(e)}function lM(e,n){if(uo(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,n);if(uo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function cM(e){var n=lM(e,"string");return uo(n)=="symbol"?n:n+""}function uM(e,n,a){return(n=cM(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function gv(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,s)}return a}function we(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?gv(Object(a),!0).forEach(function(s){uM(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gv(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}const mv=e=>{var n;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(n=e.error)===null||n===void 0?void 0:n.message)||JSON.stringify(e)},dM=async(e,n,a,s)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!a?.noResolveJson){const o=e,c=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const d=u?.statusCode||u?.code||c+"";n(new uc(mv(u),c,d,s))}).catch(()=>{if(s==="vectors"){const u=c+"";n(new uc(o.statusText||`HTTP ${c} error`,c,u,s))}else{const u=c+"";n(new uc(o.statusText||`HTTP ${c} error`,c,u,s))}});else{const u=c+"";n(new uc(o.statusText||`HTTP ${c} error`,c,u,s))}}else n(new Qw(mv(e),e,s))},fM=(e,n,a,s)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"||e==="HEAD"||!s?we(we({},o),a):(iM(s)?(o.headers=we({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(s)):o.body=s,n?.duplex&&(o.duplex=n.duplex),we(we({},o),a))};async function Pi(e,n,a,s,o,c,u){return new Promise((d,g)=>{e(a,fM(n,s,o,c)).then(h=>{if(!h.ok)throw h;if(s?.noResolveJson)return h;if(u==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>d(h)).catch(h=>dM(h,g,s,u))})}function Jw(e="storage"){return{get:async(n,a,s,o)=>Pi(n,"GET",a,s,o,void 0,e),post:async(n,a,s,o,c)=>Pi(n,"POST",a,o,c,s,e),put:async(n,a,s,o,c)=>Pi(n,"PUT",a,o,c,s,e),head:async(n,a,s,o)=>Pi(n,"HEAD",a,we(we({},s),{},{noResolveJson:!0}),o,void 0,e),remove:async(n,a,s,o,c)=>Pi(n,"DELETE",a,o,c,s,e)}}const hM=Jw("storage"),{get:fo,post:gn,put:vh,head:gM,remove:Vh}=hM,Qt=Jw("vectors");var Ys=class{constructor(e,n={},a,s="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.fetch=sM(a),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=we(we({},this.headers),{},{[e]:n}),this}async handleOperation(e){var n=this;try{return{data:await e(),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(eu(a))return{data:null,error:a};throw a}}},mM=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(eu(n))return{data:null,error:n};throw n}}};let Fw;Fw=Symbol.toStringTag;var pM=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Fw]="BlobDownloadBuilder",this.promise=null}asStream(){return new mM(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(eu(n))return{data:null,error:n};throw n}}};const yM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var vM=class extends Ys{constructor(e,n={},a,s){super(e,n,s,"storage"),this.bucketId=a}async uploadOrUpdate(e,n,a,s){var o=this;return o.handleOperation(async()=>{let c;const u=we(we({},pv),s);let d=we(we({},o.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",o.encodeMetadata(g)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),g&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(g))):(c=a,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,g&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),s?.headers&&(d=we(we({},d),s.headers));const h=o._removeEmptyFolders(n),p=o._getFinalPath(h),v=await(e=="PUT"?vh:gn)(o.fetch,`${o.url}/object/${p}`,c,we({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{path:h,id:v.Id,fullPath:v.Key}})}async upload(e,n,a){return this.uploadOrUpdate("POST",e,n,a)}async uploadToSignedUrl(e,n,a,s){var o=this;const c=o._removeEmptyFolders(e),u=o._getFinalPath(c),d=new URL(o.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",n),o.handleOperation(async()=>{let g;const h=we({upsert:pv.upsert},s),p=we(we({},o.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&a instanceof Blob?(g=new FormData,g.append("cacheControl",h.cacheControl),g.append("",a)):typeof FormData<"u"&&a instanceof FormData?(g=a,g.append("cacheControl",h.cacheControl)):(g=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:c,fullPath:(await vh(o.fetch,d.toString(),g,{headers:p})).Key}})}async createSignedUploadUrl(e,n){var a=this;return a.handleOperation(async()=>{let s=a._getFinalPath(e);const o=we({},a.headers);n?.upsert&&(o["x-upsert"]="true");const c=await gn(a.fetch,`${a.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(a.url+c.url),d=u.searchParams.get("token");if(!d)throw new Wc("No token returned by API");return{signedUrl:u.toString(),path:e,token:d}})}async update(e,n,a){return this.uploadOrUpdate("PUT",e,n,a)}async move(e,n,a){var s=this;return s.handleOperation(async()=>await gn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:s.headers}))}async copy(e,n,a){var s=this;return s.handleOperation(async()=>({path:(await gn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(e,n,a){var s=this;return s.handleOperation(async()=>{let o=s._getFinalPath(e),c=await gn(s.fetch,`${s.url}/object/sign/${o}`,we({expiresIn:n},a?.transform?{transform:a.transform}:{}),{headers:s.headers});const u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{signedUrl:encodeURI(`${s.url}${c.signedURL}${u}`)}})}async createSignedUrls(e,n,a){var s=this;return s.handleOperation(async()=>{const o=await gn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:n,paths:e},{headers:s.headers}),c=a?.download?`&download=${a.download===!0?"":a.download}`:"";return o.map(u=>we(we({},u),{},{signedUrl:u.signedURL?encodeURI(`${s.url}${u.signedURL}${c}`):null}))})}download(e,n,a){const s=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"",u=this._getFinalPath(e),d=()=>fo(this.fetch,`${this.url}/${s}/${u}${c}`,{headers:this.headers,noResolveJson:!0},a);return new pM(d,this.shouldThrowOnError)}async info(e){var n=this;const a=n._getFinalPath(e);return n.handleOperation(async()=>yh(await fo(n.fetch,`${n.url}/object/info/${a}`,{headers:n.headers})))}async exists(e){var n=this;const a=n._getFinalPath(e);try{return await gM(n.fetch,`${n.url}/object/${a}`,{headers:n.headers}),{data:!0,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(eu(s)&&s instanceof Qw){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,n){const a=this._getFinalPath(e),s=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const c=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${a}${d}`)}}}async remove(e){var n=this;return n.handleOperation(async()=>await Vh(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:e},{headers:n.headers}))}async list(e,n,a){var s=this;return s.handleOperation(async()=>{const o=we(we(we({},yM),n),{},{prefix:e||""});return await gn(s.fetch,`${s.url}/object/list/${s.bucketId}`,o,{headers:s.headers},a)})}async listV2(e,n){var a=this;return a.handleOperation(async()=>{const s=we({},e);return await gn(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,s,{headers:a.headers},n)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}};const bM="2.97.0",Ao={"X-Client-Info":`storage-js/${bM}`};var wM=class extends Ys{constructor(e,n={},a,s){const o=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),u=we(we({},Ao),n);super(c,u,a,"storage")}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const a=n.listBucketOptionsToQueryString(e);return await fo(n.fetch,`${n.url}/bucket${a}`,{headers:n.headers})})}async getBucket(e){var n=this;return n.handleOperation(async()=>await fo(n.fetch,`${n.url}/bucket/${e}`,{headers:n.headers}))}async createBucket(e,n={public:!1}){var a=this;return a.handleOperation(async()=>await gn(a.fetch,`${a.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}))}async updateBucket(e,n){var a=this;return a.handleOperation(async()=>await vh(a.fetch,`${a.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}))}async emptyBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket/${e}/empty`,{},{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Vh(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},xM=class extends Ys{constructor(e,n={},a){const s=e.replace(/\/$/,""),o=we(we({},Ao),n);super(s,o,a,"storage")}async createBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket`,{name:e},{headers:n.headers}))}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const a=new URLSearchParams;e?.limit!==void 0&&a.set("limit",e.limit.toString()),e?.offset!==void 0&&a.set("offset",e.offset.toString()),e?.sortColumn&&a.set("sortColumn",e.sortColumn),e?.sortOrder&&a.set("sortOrder",e.sortOrder),e?.search&&a.set("search",e.search);const s=a.toString(),o=s?`${n.url}/bucket?${s}`:`${n.url}/bucket`;return await fo(n.fetch,o,{headers:n.headers})})}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Vh(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}from(e){var n=this;if(!oM(e))throw new Wc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new aM({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(a,{get(o,c){const u=o[c];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(g){if(s)throw g;return{data:null,error:g}}}}})}},_M=class extends Ys{constructor(e,n={},a){const s=e.replace(/\/$/,""),o=we(we({},Ao),{},{"Content-Type":"application/json"},n);super(s,o,a,"vectors")}async createIndex(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateIndex`,e,{headers:n.headers})||{})}async getIndex(e,n){var a=this;return a.handleOperation(async()=>await Qt.post(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:a.headers}))}async listIndexes(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListIndexes`,e,{headers:n.headers}))}async deleteIndex(e,n){var a=this;return a.handleOperation(async()=>await Qt.post(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:a.headers})||{})}},SM=class extends Ys{constructor(e,n={},a){const s=e.replace(/\/$/,""),o=we(we({},Ao),{},{"Content-Type":"application/json"},n);super(s,o,a,"vectors")}async putVectors(e){var n=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/PutVectors`,e,{headers:n.headers})||{})}async getVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectors`,e,{headers:n.headers}))}async listVectors(e){var n=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectors`,e,{headers:n.headers}))}async queryVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/QueryVectors`,e,{headers:n.headers}))}async deleteVectors(e){var n=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectors`,e,{headers:n.headers})||{})}},EM=class extends Ys{constructor(e,n={},a){const s=e.replace(/\/$/,""),o=we(we({},Ao),{},{"Content-Type":"application/json"},n);super(s,o,a,"vectors")}async createBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}async getBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:e},{headers:n.headers}))}async listBuckets(e={}){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectorBuckets`,e,{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}},TM=class extends EM{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new CM(this.url,this.headers,e,this.fetch)}async createBucket(e){var n=()=>super.createBucket,a=this;return n().call(a,e)}async getBucket(e){var n=()=>super.getBucket,a=this;return n().call(a,e)}async listBuckets(e={}){var n=()=>super.listBuckets,a=this;return n().call(a,e)}async deleteBucket(e){var n=()=>super.deleteBucket,a=this;return n().call(a,e)}},CM=class extends _M{constructor(e,n,a,s){super(e,n,s),this.vectorBucketName=a}async createIndex(e){var n=()=>super.createIndex,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName}))}async listIndexes(e={}){var n=()=>super.listIndexes,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName}))}async getIndex(e){var n=()=>super.getIndex,a=this;return n().call(a,a.vectorBucketName,e)}async deleteIndex(e){var n=()=>super.deleteIndex,a=this;return n().call(a,a.vectorBucketName,e)}index(e){return new AM(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},AM=class extends SM{constructor(e,n,a,s,o){super(e,n,o),this.vectorBucketName=a,this.indexName=s}async putVectors(e){var n=()=>super.putVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async getVectors(e){var n=()=>super.getVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async listVectors(e={}){var n=()=>super.listVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async queryVectors(e){var n=()=>super.queryVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async deleteVectors(e){var n=()=>super.deleteVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}},NM=class extends wM{constructor(e,n={},a,s){super(e,n,a,s)}from(e){return new vM(this.url,this.headers,e,this.fetch)}get vectors(){return new TM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xM(this.url+"/iceberg",this.headers,this.fetch)}};const Ww="2.97.0",Rs=30*1e3,bh=3,Gf=bh*Rs,OM="http://localhost:9999",RM="supabase.auth.token",MM={"X-Client-Info":`gotrue-js/${Ww}`},wh="X-Supabase-Api-Version",ex={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jM=600*1e3;class ho extends Error{constructor(n,a,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class DM extends ho{constructor(n,a,s){super(n,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function zM(e){return me(e)&&e.name==="AuthApiError"}class ba extends ho{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class rr extends ho{constructor(n,a,s,o){super(n,s,o),this.name=a,this.status=s}}class Kt extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yf(e){return me(e)&&e.name==="AuthSessionMissingError"}class Ss extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dc extends rr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class fc extends rr{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $M(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class yv extends rr{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class UM extends rr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class xh extends rr{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function Xf(e){return me(e)&&e.name==="AuthRetryableFetchError"}class vv extends rr{constructor(n,a,s){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class _h extends rr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const $c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bv=` 	
\r=`.split(""),LM=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<bv.length;n+=1)e[bv[n].charCodeAt(0)]=-2;for(let n=0;n<$c.length;n+=1)e[$c[n].charCodeAt(0)]=n;return e})();function wv(e,n,a){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;a($c[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;a($c[s]),n.queuedBits-=6}}function tx(e,n,a){const s=LM[e];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function xv(e){const n=[],a=u=>{n.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{IM(u,s,a)};for(let u=0;u<e.length;u+=1)tx(e.charCodeAt(u),o,c);return n.join("")}function HM(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function BM(e,n){for(let a=0;a<e.length;a+=1){let s=e.charCodeAt(a);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(e.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}HM(s,n)}}function IM(e,n,a){if(n.utf8seq===0){if(e<=127){a(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function Us(e){const n=[],a={queue:0,queuedBits:0},s=o=>{n.push(o)};for(let o=0;o<e.length;o+=1)tx(e.charCodeAt(o),a,s);return new Uint8Array(n)}function qM(e){const n=[];return BM(e,a=>n.push(a)),new Uint8Array(n)}function xa(e){const n=[],a={queue:0,queuedBits:0},s=o=>{n.push(o)};return e.forEach(o=>wv(o,a,s)),wv(null,a,s),n.join("")}function VM(e){return Math.round(Date.now()/1e3)+e}function PM(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",ha={tested:!1,writable:!1},nx=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ha.tested)return ha.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ha.tested=!0,ha.writable=!0}catch{ha.tested=!0,ha.writable=!1}return ha.writable};function GM(e){const n={},a=new URL(e);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return a.searchParams.forEach((s,o)=>{n[o]=s}),n}const rx=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),YM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ms=async(e,n,a)=>{await e.setItem(n,JSON.stringify(a))},ga=async(e,n)=>{const a=await e.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},_t=async(e,n)=>{await e.removeItem(n)};class tu{constructor(){this.promise=new tu.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}tu.promiseConstructor=Promise;function hc(e){const n=e.split(".");if(n.length!==3)throw new _h("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!kM.test(n[s]))throw new _h("JWT not in base64url format");return{header:JSON.parse(xv(n[0])),payload:JSON.parse(xv(n[1])),signature:Us(n[2]),raw:{header:n[0],payload:n[1]}}}async function XM(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function KM(e,n){return new Promise((s,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await e(c);if(!n(c,null,u)){s(u);return}}catch(u){if(!n(c,u)){o(u);return}}})()})}function ZM(e){return("0"+e.toString(16)).substr(-2)}function QM(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let o="";for(let c=0;c<56;c++)o+=a.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(n),Array.from(n,ZM).join("")}async function JM(e){const a=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(s);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function FM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const a=await JM(e);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Es(e,n,a=!1){const s=QM();let o=s;a&&(o+="/PASSWORD_RECOVERY"),await Ms(e,`${n}-code-verifier`,o);const c=await FM(s);return[c,s===c?"plain":"s256"]}const WM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ek(e){const n=e.headers.get(wh);if(!n||!n.match(WM))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function tk(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function nk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ts(e){if(!rk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kf(){const e={};return new Proxy(e,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ak(e,n){return new Proxy(e,{get:(a,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const c=s.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,s,o)}return!n.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(a,s,o)}})}function _v(e){return JSON.parse(JSON.stringify(e))}const pa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sk=[502,503,504];async function Sv(e){var n;if(!YM(e))throw new xh(pa(e),0);if(sk.includes(e.status))throw new xh(pa(e),e.status);let a;try{a=await e.json()}catch(c){throw new ba(pa(c),c)}let s;const o=ek(e);if(o&&o.getTime()>=ex["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new vv(pa(a),e.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new Kt}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new vv(pa(a),e.status,a.weak_password.reasons);throw new DM(pa(a),e.status||500,s)}const ik=(e,n,a,s)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),a))};async function xe(e,n,a,s){var o;const c=Object.assign({},s?.headers);c[wh]||(c[wh]=ex["2024-01-01"].name),s?.jwt&&(c.Authorization=`Bearer ${s.jwt}`);const u=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await ok(e,n,a+d,{headers:c,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(g):{data:Object.assign({},g),error:null}}async function ok(e,n,a,s,o,c){const u=ik(n,s,o,c);let d;try{d=await e(a,Object.assign({},u))}catch(g){throw console.error(g),new xh(pa(g),0)}if(d.ok||await Sv(d),s?.noResolveJson)return d;try{return await d.json()}catch(g){await Sv(g)}}function hn(e){var n;let a=null;uk(e)&&(a=Object.assign({},e),e.expires_at||(a.expires_at=VM(e.expires_in)));const s=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:a,user:s},error:null}}function Ev(e){const n=hn(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(n.data.weak_password=e.weak_password),n}function Hr(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function lk(e){return{data:e,error:null}}function ck(e){const{action_link:n,email_otp:a,hashed_token:s,redirect_to:o,verification_type:c}=e,u=Fc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:n,email_otp:a,hashed_token:s,redirect_to:o,verification_type:c},g=Object.assign({},u);return{data:{properties:d,user:g},error:null}}function Tv(e){return e}function uk(e){return e.access_token&&e.refresh_token&&e.expires_in}const Zf=["global","local","others"];class dk{constructor({url:n="",headers:a={},fetch:s}){this.url=n,this.headers=a,this.fetch=rx(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,a=Zf[0]){if(Zf.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zf.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,a={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Hr})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:a}=n,s=Fc(n,["options"]),o=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:ck,redirectTo:a?.redirectTo})}catch(a){if(me(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Hr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,s,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Tv});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(C=>{const E=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(C.split(";")[1].split("=")[1]);h[`${T}Page`]=E}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{users:[]},error:h};throw h}}async getUserById(n){Ts(n);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Hr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){Ts(n);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:Hr})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,a=!1){Ts(n);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:Hr})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){Ts(n.userId);try{const{data:a,error:s}=await xe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:s}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _deleteFactor(n){Ts(n.userId),Ts(n.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _listOAuthClients(n){var a,s,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Tv});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(C=>{const E=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(C.split(";")[1].split("=")[1]);h[`${T}Page`]=E}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _getOAuthClient(n){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _updateOAuthClient(n,a){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:a,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}}function Cv(e={}){return{getItem:n=>e[n]||null,setItem:(n,a)=>{e[n]=a},removeItem:n=>{delete e[n]}}}const Cs={debug:!!(globalThis&&nx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ax extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Av extends ax{}async function fk(e,n,a){Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const s=new globalThis.AbortController;n>0&&setTimeout(()=>{s.abort(),Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await a()}finally{Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(n===0)throw Cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Av(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Cs.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}})}catch(o){throw o?.name==="AbortError"?new Av(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${n}ms`):o}}function hk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sx(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function gk(e){return parseInt(e,16)}function mk(e){const n=new TextEncoder().encode(e);return"0x"+Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}function pk(e){var n;const{chainId:a,domain:s,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:d,requestId:g,resources:h,scheme:p,uri:v,version:y}=e;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((n=e.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=sx(e.address),C=p?`${p}://${s}`:s,E=e.statement?`${e.statement}
`:"",T=`${C} wants you to sign in with your Ethereum account:
${b}

${E}`;let S=`URI: ${v}
Version: ${y}
Chain ID: ${a}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(S+=`
Expiration Time: ${o.toISOString()}`),d&&(S+=`
Not Before: ${d.toISOString()}`),g&&(S+=`
Request ID: ${g}`),h){let N=`
Resources:`;for(const _ of h){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);N+=`
- ${_}`}S+=N}return`${T}
${S}`}class ct extends Error{constructor({message:n,code:a,cause:s,name:o}){var c;super(n,{cause:s}),this.__isWebAuthnError=!0,this.name=(c=o??(s instanceof Error?s.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=a}}class Uc extends ct{constructor(n,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:n}),this.name="WebAuthnUnknownError",this.originalError=a}}function yk({error:e,options:n}){var a,s,o;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((a=c.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(n.mediation==="conditional"&&((s=c.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(ix(u)){if(c.rp.id!==u)return new ct({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function vk({error:e,options:n}){const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(ix(s)){if(a.rpId!==s)return new ct({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class bk{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const wk=new bk;function xk(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:n,user:a,excludeCredentials:s}=e,o=Fc(e,["challenge","user","excludeCredentials"]),c=Us(n).buffer,u=Object.assign(Object.assign({},a),{id:Us(a.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:c,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const h=s[g];d.excludeCredentials[g]=Object.assign(Object.assign({},h),{id:Us(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function _k(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:n,allowCredentials:a}=e,s=Fc(e,["challenge","allowCredentials"]),o=Us(n).buffer,c=Object.assign(Object.assign({},s),{challenge:o});if(a&&a.length>0){c.allowCredentials=new Array(a.length);for(let u=0;u<a.length;u++){const d=a[u];c.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Us(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function Sk(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const a=e;return{id:e.id,rawId:e.id,response:{attestationObject:xa(new Uint8Array(e.response.attestationObject)),clientDataJSON:xa(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Ek(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const a=e,s=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:xa(new Uint8Array(o.authenticatorData)),clientDataJSON:xa(new Uint8Array(o.clientDataJSON)),signature:xa(new Uint8Array(o.signature)),userHandle:o.userHandle?xa(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function ix(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Nv(){var e,n;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Tk(e){try{const n=await navigator.credentials.create(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Uc("Browser returned unexpected credential type",n)}:{data:null,error:new Uc("Empty credential response",n)}}catch(n){return{data:null,error:yk({error:n,options:e})}}}async function Ck(e){try{const n=await navigator.credentials.get(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Uc("Browser returned unexpected credential type",n)}:{data:null,error:new Uc("Empty credential response",n)}}catch(n){return{data:null,error:vk({error:n,options:e})}}}const Ak={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Nk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Lc(...e){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),a=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of e)if(o)for(const c in o){const u=o[c];if(u!==void 0)if(Array.isArray(u))s[c]=u;else if(a(u))s[c]=u;else if(n(u)){const d=s[c];n(d)?s[c]=Lc(d,u):s[c]=Lc(u)}else s[c]=u}return s}function Ok(e,n){return Lc(Ak,e,n||{})}function Rk(e,n){return Lc(Nk,e,n||{})}class Mk{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:a,friendlyName:s,signal:o},c){var u;try{const{data:d,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:a});if(!d)return{data:null,error:g};const h=o??wk.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;if(!p.name){const v=s;if(v)p.name=`${p.id}:${v}`;else{const b=(await this.client.getUser()).data.user,C=((u=b?.user_metadata)===null||u===void 0?void 0:u.name)||b?.email||b?.id||"User";p.name=`${p.id}:${C}`}}p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=Ok(d.webauthn.credential_options.publicKey,c?.create),{data:v,error:y}=await Tk({publicKey:p,signal:h});return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const p=Rk(d.webauthn.credential_options.publicKey,c?.request),{data:v,error:y}=await Ck(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(d){return me(d)?{data:null,error:d}:{data:null,error:new ba("Unexpected error in challenge",d)}}}async _verify({challengeId:n,factorId:a,webauthn:s}){return this.client.mfa.verify({factorId:a,challengeId:n,webauthn:s})}async _authenticate({factorId:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!a)return{data:null,error:new ho("rpId is required for WebAuthn authentication")};try{if(!Nv())return{data:null,error:new ba("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:n,webauthn:{rpId:a,rpOrigins:s},signal:o},{request:c});if(!u)return{data:null,error:d};const{webauthn:g}=u;return this._verify({factorId:n,challengeId:u.challengeId,webauthn:{type:g.type,rpId:a,rpOrigins:s,credential_response:g.credential_response}})}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new ba("Unexpected error in authenticate",u)}}}async _register({friendlyName:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!a)return{data:null,error:new ho("rpId is required for WebAuthn registration")};try{if(!Nv())return{data:null,error:new ba("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:n});if(!u)return await this.client.mfa.listFactors().then(p=>{var v;return(v=p.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===n&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:d};const{data:g,error:h}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:a,rpOrigins:s},signal:o},{create:c});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:a,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:h}}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new ba("Unexpected error in register",u)}}}}hk();const kk={url:OM,storageKey:RM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Ov(e,n,a){return await a()}const As={};class go{get jwks(){var n,a;return(a=(n=As[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){As[this.storageKey]=Object.assign(Object.assign({},As[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=As[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){As[this.storageKey]=Object.assign(Object.assign({},As[this.storageKey]),{cachedAt:n})}constructor(n){var a,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},kk),n);if(this.storageKey=c.storageKey,this.instanceID=(a=go.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,go.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&St()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new dk({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=rx(c.fetch),this.lock=c.lock||Ov,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&St()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=fk:this.lock=Ov,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Mk(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:nx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cv(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Cv(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}c.skipAutoInitialize||this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ww}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let a={},s="none";if(St()&&(a=GM(window.location.href),this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce")),St()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:c}=await this._getSessionFromURL(a,s);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),$M(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return me(a)?this._returnResult({error:a}):this._returnResult({error:new ba("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,s,o;try{const c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=n?.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:hn}),{data:u,error:d}=c;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var a,s,o;try{let c;if("email"in n){const{email:p,password:v,options:y}=n;let b=null,C=null;this.flowType==="pkce"&&([b,C]=await Es(this.storage,this.storageKey)),c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:v,data:(a=y?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:C},xform:hn})}else if("phone"in n){const{phone:p,password:v,options:y}=n;c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(s=y?.data)!==null&&s!==void 0?s:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:hn})}else throw new dc("You must provide either an email or phone number and a password");const{data:u,error:d}=c;if(d||!u)return await _t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let a;if("email"in n){const{email:c,password:u,options:d}=n;a=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Ev})}else if("phone"in n){const{phone:c,password:u,options:d}=n;a=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Ev})}else throw new dc("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const c=new Ss;return this._returnResult({data:{user:null,session:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(n){var a,s,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;switch(a){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(n){var a,s,o,c,u,d,g,h,p,v,y;let b,C;if("message"in n)b=n.message,C=n.signature;else{const{chain:E,wallet:T,statement:S,options:N}=n;let _;if(St())if(typeof T=="object")_=T;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")_=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=T}const A=new URL((a=N?.url)!==null&&a!==void 0?a:window.location.href),D=await _.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=sx(D[0]);let $=(s=N?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!$){const K=await _.request({method:"eth_chainId"});$=gk(K)}const V={domain:A.host,address:z,statement:S,uri:A.href,version:"1",chainId:$,nonce:(o=N?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=N?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=N?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(g=N?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(h=N?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=N?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=pk(V),C=await _.request({method:"personal_sign",params:[mk(b),z]})}try{const{data:E,error:T}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:C},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=n.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:hn});if(T)throw T;if(!E||!E.session||!E.user){const S=new Ss;return this._returnResult({data:{user:null,session:null},error:S})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:T})}catch(E){if(me(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(n){var a,s,o,c,u,d,g,h,p,v,y,b;let C,E;if("message"in n)C=n.message,E=n.signature;else{const{chain:T,wallet:S,statement:N,options:_}=n;let A;if(St())if(typeof S=="object")A=S;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))A=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=S}const D=new URL((a=_?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in A&&A.signIn){const z=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),N?{statement:N}:null));let $;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")$=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)$=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)C=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),E=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${D.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(o=(s=_?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=_?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((u=_?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((d=_?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((g=_?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((h=_?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((v=(p=_?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",..._.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const z=await A.signMessage(new TextEncoder().encode(C),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=z}}try{const{data:T,error:S}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:xa(E)},!((y=n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:hn});if(S)throw S;if(!T||!T.session||!T.user){const N=new Ss;return this._returnResult({data:{user:null,session:null},error:N})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:S})}catch(T){if(me(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(n){const a=await ga(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(a??"").split("/");try{if(!s&&this.flowType==="pkce")throw new UM;const{data:c,error:u}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:hn});if(await _t(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const d=new Ss;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:a,provider:s,token:o,access_token:c,nonce:u}=n,d=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:hn}),{data:g,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g||!g.session||!g.user){const p=new Ss;return this._returnResult({data:{user:null,session:null},error:p})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:h})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(n){var a,s,o,c,u;try{if("email"in n){const{email:d,options:g}=n;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Es(this.storage,this.storageKey));const{error:v}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(a=g?.data)!==null&&a!==void 0?a:{},create_user:(s=g?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in n){const{phone:d,options:g}=n,{data:h,error:p}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new dc("You must provide either an email or phone number.")}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(n){var a,s;try{let o,c;"options"in n&&(o=(a=n.options)===null||a===void 0?void 0:a.redirectTo,c=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:hn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,h=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(o){if(me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var a,s,o,c,u;try{let d=null,g=null;this.flowType==="pkce"&&([d,g]=await Es(this.storage,this.storageKey));const h=await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:g}),headers:this.headers,xform:lk});return!((c=h.data)===null||c===void 0)&&c.url&&St()&&!(!((u=n.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)throw s;if(!a)throw new Kt;const{error:o}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:s,type:o,options:c}=n,{error:u}=await xe(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in n){const{phone:s,type:o,options:c}=n,{data:u,error:d}=await xe(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new dc("You must provide either an email or phone number and a type")}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await ga(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<Gf:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const u=await ga(this.userStorage,this.storageKey+"-user");u?.user?n.user=u.user:n.user=Kf()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};n.user=ak(n.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const a=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(n){try{return n?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Hr}):await this._useSession(async a=>{var s,o,c;const{data:u,error:d}=a;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kt}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Hr})})}catch(a){if(me(a))return Yf(a)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async s=>{const{data:o,error:c}=s;if(c)throw c;if(!o.session)throw new Kt;const u=o.session;let d=null,g=null;this.flowType==="pkce"&&n.email!=null&&([d,g]=await Es(this.storage,this.storageKey));const{data:h,error:p}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:d,code_challenge_method:g}),jwt:u.access_token,xform:Hr});if(p)throw p;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Kt;const a=Date.now()/1e3;let s=a,o=!0,c=null;const{payload:u}=hc(n.access_token);if(u.exp&&(s=u.exp,o=s<=a),o){const{data:d,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:g}=await this._getUser(n.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});c={access_token:n.access_token,refresh_token:n.refresh_token,user:d.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(a){if(me(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var s;if(!n){const{data:u,error:d}=a;if(d)throw d;n=(s=u.session)!==null&&s!==void 0?s:void 0}if(!n?.refresh_token)throw new Kt;const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(n,a){try{if(!St())throw new fc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new fc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new yv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fc("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new yv("No code detected.");const{data:N,error:_}=await this._exchangeCodeForSession(n.code);if(_)throw _;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:d,expires_at:g,token_type:h}=n;if(!c||!d||!u||!h)throw new fc("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(d);let y=p+v;g&&(y=parseInt(g));const b=y-p;b*1e3<=Rs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const C=y-v;p-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,y,p):p-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,y,p);const{data:E,error:T}=await this._getUser(c);if(T)throw T;const S={provider_token:s,provider_refresh_token:o,access_token:c,expires_in:v,expires_at:y,refresh_token:u,token_type:h,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:n.type},error:null})}catch(s){if(me(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await ga(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:o,error:c}=a;if(c&&!Yf(c))return this._returnResult({error:c});const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,n);if(d&&!(zM(d)&&(d.status===404||d.status===401||d.status===403)||Yf(d)))return this._returnResult({error:d})}return n!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const a=PM(),s={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async a=>{var s,o;try{const{data:{session:c},error:u}=a;if(u)throw u;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,a={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Es(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var a;try{const{data:s,error:o}=await this._useSession(async c=>{var u,d,g,h,p;const{data:v,error:y}=c;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(u=n.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=n.options)===null||d===void 0?void 0:d.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return St()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:n.provider,url:s?.url},error:null})}catch(s){if(me(s))return this._returnResult({data:{provider:n.provider,url:null},error:s});throw s}}async linkIdentityIdToken(n){return await this._useSession(async a=>{var s;try{const{error:o,data:{session:c}}=a;if(o)throw o;const{options:u,provider:d,token:g,access_token:h,nonce:p}=n,v=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=c?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:g,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hn}),{data:y,error:b}=v;return b?this._returnResult({data:{user:null,session:null},error:b}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Ss}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:b}))}catch(o){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async a=>{var s,o;const{data:c,error:u}=a;if(u)throw u;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await KM(async o=>(o>0&&await XM(200*Math.pow(2,o-1)),this._debug(a,"refreshing attempt",o),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:hn})),(o,c)=>{const u=200*Math.pow(2,o);return c&&Xf(c)&&Date.now()+u-s<Rs})}catch(s){if(this._debug(a,"error",s),me(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",s),St()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await ga(this.storage,this.storageKey);if(o&&this.userStorage){let u=await ga(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Ms(this.userStorage,this.storageKey+"-user",u)),o.user=(n=u?.user)!==null&&n!==void 0?n:Kf()}else if(o&&!o.user&&!o.user){const u=await ga(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await _t(this.storage,this.storageKey+"-user"),await Ms(this.storage,this.storageKey,o)):o.user=Kf()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const c=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Gf;if(this._debug(s,`session has${c?"":" not"} expired with margin of ${Gf}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Xf(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var a,s;if(!n)throw new Kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new tu;const{data:c,error:u}=await this._refreshAccessToken(n);if(u)throw u;if(!c.session)throw new Kt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(o,"error",c),me(c)){const u={data:null,error:c};return Xf(c)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,a,s=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:a});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(n,a)}catch(g){c.push(g)}});if(await Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await _t(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},n),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await Ms(this.userStorage,this.storageKey+"-user",{user:a.user});const o=Object.assign({},a);delete o.user;const c=_v(o);await Ms(this.storage,this.storageKey,c)}else{const o=_v(a);await Ms(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Rs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const a=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const a=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,a&&clearTimeout(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-n)/Rs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Rs}ms, refresh threshold is ${bh} ticks`),o<=bh&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof ax)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,s){const o=[`provider=${encodeURIComponent(a)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[c,u]=await Es(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(s?.queryParams){const c=new URLSearchParams(s.queryParams);o.push(c.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var s;const{data:o,error:c}=a;return c?this._returnResult({data:null,error:c}):await xe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(n){try{return await this._useSession(async a=>{var s,o;const{data:c,error:u}=a;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:h}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=c?.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(n.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var s;const{data:o,error:c}=a;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Sk(n.webauthn.credential_response):Ek(n.webauthn.credential_response)})}:{code:n.code}),{data:d,error:g}=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:g}))})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var s;const{data:o,error:c}=a;if(c)return this._returnResult({data:null,error:c});const u=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:xk(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:_k(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(n){const{data:a,error:s}=await this._challenge({factorId:n.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){var n;const{data:{user:a},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=a?.factors)!==null&&n!==void 0?n:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var a,s,o,c;if(n)try{const{payload:b}=hc(n);let C=null;b.aal&&(C=b.aal);let E=C;const{data:{user:T},error:S}=await this.getUser(n);if(S)return this._returnResult({data:null,error:S});((s=(a=T?.factors)===null||a===void 0?void 0:a.filter(A=>A.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(E="aal2");const _=b.amr||[];return{data:{currentLevel:C,nextLevel:E,currentAuthenticationMethods:_},error:null}}catch(b){if(me(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=hc(u.access_token);let h=null;g.aal&&(h=g.aal);let p=h;((c=(o=u.user.factors)===null||o===void 0?void 0:o.filter(b=>b.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(p="aal2");const y=g.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async a=>{const{data:{session:s},error:o}=a;return o?this._returnResult({data:null,error:o}):s?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:s.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(n,a){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!a?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(n,a){try{return await this._useSession(async s=>{const{data:{session:o},error:c}=s;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!a?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;return s?this._returnResult({data:null,error:s}):a?await xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async a=>{const{data:{session:s},error:o}=a;return o?this._returnResult({data:null,error:o}):s?(await xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kt})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(n,a={keys:[]}){let s=a.keys.find(d=>d.kid===n);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(d=>d.kid===n),s&&this.jwks_cached_at+jM>o)return s;const{data:c,error:u}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,s=c.keys.find(d=>d.kid===n),!s)?null:s}async getClaims(n,a={}){try{let s=n;if(!s){const{data:b,error:C}=await this.getSession();if(C||!b.session)return this._returnResult({data:null,error:C});s=b.session.access_token}const{header:o,payload:c,signature:u,raw:{header:d,payload:g}}=hc(s);a?.allowExpired||tk(c.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!h){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:c,header:o,signature:u},error:null}}const p=nk(o.alg),v=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,u,qM(`${d}.${g}`)))throw new _h("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}}go.nextInstanceID={};const jk=go,Dk="2.97.0";let Xi="";typeof Deno<"u"?Xi="deno":typeof document<"u"?Xi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xi="react-native":Xi="node";const zk={"X-Client-Info":`supabase-js-${Xi}/${Dk}`},$k={headers:zk},Uk={schema:"public"},Lk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hk={};function mo(e){"@babel/helpers - typeof";return mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mo(e)}function Bk(e,n){if(mo(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,n);if(mo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Ik(e){var n=Bk(e,"string");return mo(n)=="symbol"?n:n+""}function qk(e,n,a){return(n=Ik(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function Rv(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,s)}return a}function tt(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Rv(Object(a),!0).forEach(function(s){qk(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rv(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}const Vk=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),Pk=()=>Headers,Gk=(e,n,a)=>{const s=Vk(a),o=Pk();return async(c,u)=>{var d;const g=(d=await n())!==null&&d!==void 0?d:e;let h=new o(u?.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${g}`),s(c,tt(tt({},u),{},{headers:h}))}};function Yk(e){return e.endsWith("/")?e:e+"/"}function Xk(e,n){var a,s;const{db:o,auth:c,realtime:u,global:d}=e,{db:g,auth:h,realtime:p,global:v}=n,y={db:tt(tt({},g),o),auth:tt(tt({},h),c),realtime:tt(tt({},p),u),storage:{},global:tt(tt(tt({},v),d),{},{headers:tt(tt({},(a=v?.headers)!==null&&a!==void 0?a:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function Kk(e){const n=e?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Yk(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Zk=class extends jk{constructor(e){super(e)}},Qk=class{constructor(e,n,a){var s,o;this.supabaseUrl=e,this.supabaseKey=n;const c=Kk(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Uk,realtime:Hk,auth:tt(tt({},Lk),{},{storageKey:u}),global:$k},g=Xk(a??{},d);if(this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=g.auth)!==null&&h!==void 0?h:{},this.headers,g.global.fetch)}this.fetch=Gk(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new zR(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new NM(this.storageUrl.href,this.headers,this.fetch,a?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new AR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,a)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,n,a;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(n=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:a,storage:s,userStorage:o,storageKey:c,flowType:u,lock:d,debug:g,throwOnError:h},p,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zk({url:this.authUrl.href,headers:tt(tt({},y),p),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:a,storage:s,userStorage:o,flowType:u,lock:d,debug:g,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new FR(this.realtimeUrl.href,tt(tt({},e),{},{params:tt(tt({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n?.access_token)})}_handleTokenChanged(e,n,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Jk=(e,n,a)=>new Qk(e,n,a);function Fk(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const n=e.version;if(n==null)return!1;const a=n.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}Fk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Wk="https://nlavjplhryynbdyubumj.supabase.co",ej="sb_publishable_RvhGSkpc-ILlK7mi_uHxcg_WGoonOjj",ya=Jk(Wk,ej),tj=()=>!0,Sc="c4-last-model-id",nj=()=>{const[e,n]=q.useState([]),[a,s]=q.useState(!1),[o,c]=q.useState(null),[u,d]=q.useState(null),g=q.useRef(!1),h=pe(T=>T.importModel),p=q.useCallback(async()=>{s(!0),c(null);try{const{data:T,error:S}=await ya.from("models").select("id, name, updated_at").order("updated_at",{ascending:!1});if(S)throw S;n(T||[])}catch(T){c(T.message),console.error("Error fetching models:",T)}finally{s(!1)}},[]),v=q.useCallback(async(T,S=!1)=>{s(!0),c(null);try{const{data:N,error:_}=await ya.from("models").select("*").eq("id",T).single();if(_)throw _;return d(T),localStorage.setItem(Sc,T),!S&&N?.data&&h(N.data),N}catch(N){return c(N.message),console.error("Error loading model:",N),(N.message?.includes("not found")||N.code==="PGRST116")&&localStorage.removeItem(Sc),null}finally{s(!1)}},[h]),y=q.useCallback(async(T,S)=>{s(!0),c(null);try{const N={name:T,data:S,updated_at:new Date().toISOString()};let _;if(u){const{data:A,error:D}=await ya.from("models").update(N).eq("id",u).select().single();if(D)throw D;_=A}else{const{data:A,error:D}=await ya.from("models").insert(N).select().single();if(D)throw D;_=A,d(_.id)}return await p(),_}catch(N){return c(N.message),console.error("Error saving model:",N),null}finally{s(!1)}},[u,p]),b=q.useCallback(async(T,S)=>{s(!0),c(null);try{const{data:N,error:_}=await ya.from("models").insert({name:T,data:S,updated_at:new Date().toISOString()}).select().single();if(_)throw _;return d(N.id),await p(),N}catch(N){return c(N.message),console.error("Error saving model:",N),null}finally{s(!1)}},[p]),C=q.useCallback(async T=>{s(!0),c(null);try{const{error:S}=await ya.from("models").delete().eq("id",T);if(S)throw S;return u===T&&d(null),await p(),!0}catch(S){return c(S.message),console.error("Error deleting model:",S),!1}finally{s(!1)}},[u,p]),E=q.useCallback(()=>{d(null)},[]);return q.useEffect(()=>{(async()=>{if(await p(),g.current)return;g.current=!0;const S=localStorage.getItem(Sc);S&&(console.log("Auto-loading last accessed model:",S),await v(S))})()},[p,v]),{models:e,loading:a,error:o,currentModelId:u,setCurrentModelId:d,isConfigured:tj(),fetchModels:p,loadModel:v,saveModel:y,saveAsModel:b,deleteModel:C,newModel:E}},rj=()=>localStorage.getItem(Sc)!==null,aj=2e3,sj=(e,n)=>{const[a,s]=q.useState(()=>localStorage.getItem("c4-autosave-enabled")==="true"),[o,c]=q.useState("idle"),u=q.useRef(null),d=q.useRef(null),g=pe(_=>_.systems),h=pe(_=>_.containers),p=pe(_=>_.components),v=pe(_=>_.people),y=pe(_=>_.externalSystems),b=pe(_=>_.shadows),C=pe(_=>_.relationships),E=pe(_=>_.metadata),T=pe(_=>_.exportModel),S=q.useCallback(_=>{s(_),localStorage.setItem("c4-autosave-enabled",_?"true":"false")},[]),N=q.useCallback(async()=>{if(!e)return;const _=T(),A=JSON.stringify(_);if(A!==d.current){c("saving");try{const{error:D}=await ya.from("models").update({name:E.name,data:_,updated_at:new Date().toISOString()}).eq("id",e);if(D)throw D;d.current=A,c("saved"),n?.(),setTimeout(()=>c("idle"),2e3)}catch(D){console.error("Auto-save error:",D),c("error"),setTimeout(()=>c("idle"),3e3)}}},[e,T,E.name,n]);return q.useEffect(()=>{if(!(!a||!e))return u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{N()},aj),()=>{u.current&&clearTimeout(u.current)}},[a,e,N,g,h,p,v,y,b,C]),q.useEffect(()=>{d.current=null},[e]),{autoSaveEnabled:a,toggleAutoSave:S,saveStatus:o}},ij=()=>{const[e,n]=q.useState(!1),[a,s]=q.useState(!1),[o,c]=q.useState(""),u=q.useRef(null),{models:d,loading:g,error:h,currentModelId:p,loadModel:v,saveModel:y,saveAsModel:b,deleteModel:C,newModel:E,fetchModels:T}=nj(),{metadata:S,exportModel:N,importModel:_,clearAll:A,setMetadata:D}=pe(),{autoSaveEnabled:z,toggleAutoSave:$,saveStatus:V}=sj(p,T);q.useEffect(()=>{const M=U=>{u.current&&!u.current.contains(U.target)&&(n(!1),s(!1))};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]);const K=async()=>{const M=N();p?await y(S.name,M):(s(!0),c(S.name)),n(!1)},oe=async()=>{if(!o.trim())return;const M=N();D({...S,name:o.trim()}),await b(o.trim(),{...M,metadata:{...M.metadata,name:o.trim()}}),s(!1),c("")},W=async M=>{const U=await v(M);U?.data&&_(U.data),n(!1)},ee=async(M,U)=>{M.stopPropagation(),window.confirm("Delete this model? This cannot be undone.")&&await C(U)},ne=()=>{A(),E(),D({name:"New C4 Model",version:"1.0",author:"Solution Architect"}),n(!1)},j=d.find(M=>M.id===p),P=()=>g?x.jsx(UN,{className:"w-4 h-4 animate-spin"}):V==="saving"?x.jsx(HN,{className:"w-4 h-4 animate-spin"}):V==="saved"?x.jsx(Ow,{className:"w-4 h-4 text-green-300"}):V==="error"?x.jsx(kw,{className:"w-4 h-4 text-red-300"}):x.jsx(RN,{className:"w-4 h-4"});return x.jsxs("div",{className:"relative",ref:u,children:[x.jsxs("button",{onClick:()=>n(!e),className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm transition-colors",title:z&&p?"Auto-save enabled":"Cloud models",children:[P(),x.jsx("span",{className:"max-w-[120px] truncate",children:j?j.name:"Models"}),x.jsx(Rw,{className:"w-3 h-3"})]}),e&&x.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:a?x.jsxs("div",{className:"p-3",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Name"}),x.jsx("input",{type:"text",value:o,onChange:M=>c(M.target.value),onKeyDown:M=>M.key==="Enter"&&oe(),placeholder:"Enter model name",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),x.jsxs("div",{className:"flex gap-2 mt-2",children:[x.jsx("button",{onClick:oe,disabled:!o.trim(),className:"flex-1 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"}),x.jsx("button",{onClick:()=>s(!1),className:"px-3 py-1.5 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm",children:"Cancel"})]})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"p-2 border-b border-gray-100",children:[x.jsxs("button",{onClick:ne,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[x.jsx(jN,{className:"w-4 h-4"}),"New Model"]}),x.jsxs("button",{onClick:K,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[x.jsx(Yy,{className:"w-4 h-4"}),p?"Save":"Save As..."]}),p&&x.jsxs("button",{onClick:()=>{s(!0),c(S.name)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[x.jsx(Yy,{className:"w-4 h-4"}),"Save As..."]}),x.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-700",children:"Auto-save"}),x.jsx("button",{onClick:()=>$(!z),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${z?"bg-indigo-600":"bg-gray-300"} ${p?"":"opacity-50 cursor-not-allowed"}`,disabled:!p,title:p?"":"Save a model first to enable auto-save",children:x.jsx("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform ${z?"translate-x-5":"translate-x-1"}`})})]})]}),x.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[h&&x.jsxs("div",{className:"px-3 py-2 text-sm text-red-600 bg-red-50 border-b border-red-100",children:["Error: ",h,x.jsx("button",{onClick:()=>T(),className:"ml-2 underline hover:no-underline",children:"Retry"})]}),d.length===0&&!h?x.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 text-center",children:"No saved models"}):d.map(M=>x.jsxs("div",{onClick:()=>W(M.id),className:`flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer ${M.id===p?"bg-indigo-50":""}`,children:[x.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[x.jsx(DN,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),x.jsx("span",{className:"truncate",children:M.name})]}),x.jsx("button",{onClick:U=>ee(U,M.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete model",children:x.jsx(uh,{className:"w-3 h-3"})})]},M.id))]})]})})]})},oj=()=>{const{metadata:e,setMetadata:n,exportModel:a,importModel:s,clearAll:o}=pe(),c=pe(H=>H.viewMode),u=pe(H=>H.setViewMode),[d,g]=q.useState(!1),[h,p]=q.useState(!1),[v,y]=q.useState(!1),[b,C]=q.useState(!1),[E,T]=q.useState(e.name),[S,N]=q.useState(null),_=async()=>{const H=a(),{url:R,error:k}=wR(H);if(k){N("error"),alert(k),setTimeout(()=>N(null),2e3);return}try{await navigator.clipboard.writeText(R),N("copied"),setTimeout(()=>N(null),2e3)}catch{const Z=document.createElement("textarea");Z.value=R,document.body.appendChild(Z),Z.select(),document.execCommand("copy"),document.body.removeChild(Z),N("copied"),setTimeout(()=>N(null),2e3)}},A=()=>{const H=a(),R=JSON.stringify(H,null,2),k="data:application/json;charset=utf-8,"+encodeURIComponent(R),G=`${(H.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.json`,Z=document.createElement("a");Z.setAttribute("href",k),Z.setAttribute("download",G),Z.click()},D=H=>{const R=H.target.files?.[0];if(R){const k=new FileReader;k.onload=G=>{try{const Z=JSON.parse(G.target.result);if(Z.model&&(Z.views||Z.documentation)){const ie=pR(Z);s(ie),alert("Structurizr workspace imported successfully!")}else s(Z),alert("Model imported successfully!")}catch(Z){alert("Error importing model: "+Z.message)}},k.readAsText(R)}y(!1),H.target.value=""},z=H=>{const R=H.target.files?.[0];if(R){const k=new FileReader;k.onload=G=>{try{const Z=G.target.result,ie=gR(Z);s(ie),alert(`Spreadsheet imported successfully! Created ${ie.systems?.length||0} systems, ${ie.containers?.length||0} containers, ${ie.components?.length||0} components.`)}catch(Z){alert("Error importing spreadsheet: "+Z.message)}},k.readAsText(R)}y(!1),H.target.value=""},$=()=>{const H=a(),R=mR(H),k=JSON.stringify(R,null,2),G="data:application/json;charset=utf-8,"+encodeURIComponent(k),Z=`${(H.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}-structurizr.json`,ie=document.createElement("a");ie.setAttribute("href",G),ie.setAttribute("download",Z),ie.click(),p(!1)},V=()=>{window.confirm("Are you sure you want to clear all elements? This cannot be undone.")&&o()},K=()=>{const H=a(),R=Vw(H),k=new Blob([R],{type:"text/plain"}),G=URL.createObjectURL(k),Z=document.createElement("a");Z.href=G,Z.download=`${(H.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.puml`,Z.click(),URL.revokeObjectURL(G),p(!1)},oe=()=>{const H=a(),R=sR(H),k=new Blob([R],{type:"text/plain"}),G=URL.createObjectURL(k),Z=document.createElement("a");Z.href=G,Z.download=`${(H.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.mmd`,Z.click(),URL.revokeObjectURL(G),p(!1)},W=()=>{const H=a(),R=Pw(H),k=new Blob([R],{type:"text/markdown"}),G=URL.createObjectURL(k),Z=document.createElement("a");Z.href=G,Z.download=`${(H.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.md`,Z.click(),URL.revokeObjectURL(G),p(!1)},ee=()=>{const H=a();iR(H),p(!1)},ne=async()=>{const H=a();await rR(H),p(!1)},j=async()=>{const H=a();await aR(H),p(!1)},P=()=>{const H=a();dR(H),p(!1)},M=()=>{const H=a();fR(H),p(!1)},U=()=>{T(e.name),C(!0)},B=()=>{const H=E.trim();H?n({...e,name:H}):T(e.name),C(!1)},X=H=>{H.key==="Enter"?B():H.key==="Escape"&&(T(e.name),C(!1))};return x.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Diagrams"}),x.jsx("span",{className:"text-gray-400",children:"|"}),b?x.jsx("input",{type:"text",value:E,onChange:H=>T(H.target.value),onBlur:B,onKeyDown:X,autoFocus:!0,className:"text-sm text-gray-900 font-medium px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[200px]"}):x.jsx("button",{onClick:U,className:"text-sm text-gray-600 cursor-text hover:text-gray-900 hover:bg-gray-100 px-2 py-1 rounded transition-colors border border-transparent hover:border-gray-300",title:"Click to edit model name",children:e.name})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx(lO,{}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(ij,{}),x.jsxs("button",{onClick:_,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm transition-colors ${S==="copied"?"bg-green-600 text-white":S==="error"?"bg-red-600 text-white":"bg-gray-600 text-white hover:bg-gray-700"}`,title:"Copy shareable link to clipboard",children:[S==="copied"?x.jsx(Ow,{className:"w-4 h-4"}):S==="error"?x.jsx(kw,{className:"w-4 h-4"}):x.jsx(IN,{className:"w-4 h-4"}),S==="copied"?"Copied!":"Share"]}),x.jsxs("div",{className:"relative",children:[x.jsxs("button",{onClick:()=>p(!h),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm transition-colors",title:"Export model",children:[x.jsx(MN,{className:"w-4 h-4"}),"Export"]}),h&&x.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:x.jsxs("div",{className:"py-1",children:[x.jsxs("button",{onClick:A,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(If,{className:"w-4 h-4"}),"JSON"]}),x.jsxs("button",{onClick:$,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(If,{className:"w-4 h-4"}),"Structurizr JSON"]}),x.jsx("hr",{className:"my-1"}),x.jsxs("button",{onClick:K,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(Bf,{className:"w-4 h-4"}),"PlantUML"]}),x.jsxs("button",{onClick:oe,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(Bf,{className:"w-4 h-4"}),"Mermaid"]}),x.jsxs("button",{onClick:W,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(Gy,{className:"w-4 h-4"}),"Markdown"]}),x.jsxs("button",{onClick:ee,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(Gy,{className:"w-4 h-4"}),"HTML Document"]}),x.jsx("hr",{className:"my-1"}),x.jsxs("button",{onClick:ne,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(Py,{className:"w-4 h-4"}),"PNG Image"]}),x.jsxs("button",{onClick:j,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(Py,{className:"w-4 h-4"}),"SVG Image"]}),x.jsx("hr",{className:"my-1"}),x.jsxs("button",{onClick:P,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(Bf,{className:"w-4 h-4"}),"Draw.io (.drawio)"]}),x.jsx("hr",{className:"my-1"}),x.jsxs("button",{onClick:M,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[x.jsx(Xy,{className:"w-4 h-4"}),"Spreadsheet (.csv)"]})]})})]}),x.jsxs("div",{className:"relative",children:[x.jsxs("button",{onClick:()=>y(!v),className:"flex items-center gap-2 px-3 py-1.5 bg-green-700 text-white rounded-md hover:bg-green-800 text-sm transition-colors",title:"Import model",children:[x.jsx(qN,{className:"w-4 h-4"}),"Import"]}),v&&x.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:x.jsxs("div",{className:"py-1",children:[x.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[x.jsx(If,{className:"w-4 h-4"}),"JSON / Structurizr",x.jsx("input",{type:"file",accept:".json",onChange:D,className:"hidden","aria-label":"Import JSON model file"})]}),x.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[x.jsx(Xy,{className:"w-4 h-4"}),"Spreadsheet (.csv)",x.jsx("input",{type:"file",accept:".csv",onChange:z,className:"hidden","aria-label":"Import CSV spreadsheet"})]})]})})]}),x.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-md p-1",children:[x.jsxs("button",{onClick:()=>u("edit"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="edit"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Edit mode - navigate and edit elements",children:[x.jsx(kN,{className:"w-4 h-4"}),"Edit"]}),x.jsxs("button",{onClick:()=>u("tree"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="tree"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Tree view - see full hierarchy",children:[x.jsx(zN,{className:"w-4 h-4"}),"Tree"]}),x.jsxs("button",{onClick:()=>u("gantt"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="gantt"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Gantt view - see project timeline",children:[x.jsx(ON,{className:"w-4 h-4"}),"Gantt"]})]}),x.jsx("button",{onClick:V,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm transition-colors",title:"Clear all elements",children:"Clear All"})]})]})]})})},gc="c4-model-autosave",lj=3e4,Ns=e=>!e||typeof e!="object"?null:{id:e.id,type:e.type,name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags:[],parentId:e.parentId||null,position:e.position&&typeof e.position=="object"?{x:Number(e.position.x)||0,y:Number(e.position.y)||0}:{x:0,y:0},width:e.width?Number(e.width):void 0,height:e.height?Number(e.height):void 0},cj=e=>!e||typeof e!="object"?null:{id:e.id,from:e.from,to:e.to,description:e.description||"",technology:e.technology||"",arrowDirection:e.arrowDirection||"right",lineStyle:e.lineStyle||"solid",animated:!!e.animated},mc=e=>{if(!e||typeof e!="object")return null;const n=(a,s)=>Array.isArray(a)?a.map(s).filter(o=>o!==null):[];return{metadata:e.metadata||{name:"New C4 Model",version:"1.0",author:"Solution Architect"},systems:n(e.systems,Ns),containers:n(e.containers,Ns),components:n(e.components,Ns),people:n(e.people,Ns),externalSystems:n(e.externalSystems,Ns),shadows:(e.shadows||[]).map(Ns),relationships:n(e.relationships,cj)}},uj=()=>{const{exportModel:e,importModel:n}=pe();q.useEffect(()=>{if(SR())try{const s=xR();if(s){const o=mc(s);if(o){n(o),console.log("Model loaded from shared URL"),_R();return}}}catch(s){console.error("Error loading shared model from URL:",s)}if(rj()){console.log("Supabase model will be auto-loaded, skipping localStorage restore");return}const a=localStorage.getItem(gc);if(a)try{const s=JSON.parse(a),o=mc(s);o&&window.confirm("Found a previously saved model. Would you like to restore it?")&&(n(o),console.log("Model restored from local storage (sanitized)"))}catch(s){console.error("Error loading saved model:",s),console.warn("Clearing corrupted localStorage data"),localStorage.removeItem(gc)}},[n]),q.useEffect(()=>{const a=setInterval(()=>{const s=e(),o=mc(s);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(gc,JSON.stringify(o)),console.log("Model auto-saved to local storage")}catch(c){console.error("Error saving model to localStorage:",c)}},lj);return()=>clearInterval(a)},[e]),q.useEffect(()=>{const a=()=>{const s=e(),o=mc(s);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(gc,JSON.stringify(o))}catch(c){console.error("Error saving model on unload:",c)}};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[e])},dj=()=>{const e=pe(d=>d.currentParentId),n=pe(d=>d.viewMode),a=pe(d=>d.navigateTo),s=pe(d=>d.navigateToRoot),o=pe(d=>d.setViewMode),c=q.useRef(!1),u=q.useRef(null);q.useEffect(()=>{if(c.current){c.current=!1;return}const d=`${e||"root"}-${n}`;if(u.current===d)return;const g={currentParentId:e,viewMode:n};u.current===null?window.history.replaceState(g,""):window.history.pushState(g,""),u.current=d},[e,n]),q.useEffect(()=>{const d=g=>{c.current=!0;const h=g.state;h?(h.currentParentId===null?s():a(h.currentParentId),h.viewMode&&o(h.viewMode),u.current=`${h.currentParentId||"root"}-${h.viewMode||"edit"}`):(s(),o("edit"),u.current="root-edit")};if(window.addEventListener("popstate",d),!window.history.state){const g={currentParentId:e,viewMode:n};window.history.replaceState(g,""),u.current=`${e||"root"}-${n}`}return()=>{window.removeEventListener("popstate",d)}},[a,s,o])},fj={c4Node:GN,shadowNode:XN},hj=(e,n)=>{if(!e?.position||!n?.position)return{sourceHandle:"bottom",targetHandle:"top"};const a=n.position.x-e.position.x,s=n.position.y-e.position.y;return Math.abs(a)>Math.abs(s)?a>0?{sourceHandle:"right",targetHandle:"left"}:{sourceHandle:"left",targetHandle:"right"}:s>0?{sourceHandle:"bottom",targetHandle:"top"}:{sourceHandle:"top",targetHandle:"bottom"}};function gj(){const[e,n,a]=KA([]),[s,o,c]=ZA([]),[u,d]=q.useState(null),{getAllElements:g,relationships:h,updateElement:p,setSelectedElement:v,setSelectedEdge:y,selectedElement:b,currentParentId:C,navigateInto:E,navigateTo:T}=pe(),S=pe(H=>H.navigateUp),N=pe(H=>H.navigateToRoot),_=pe(H=>H.viewMode),A=q.useCallback(H=>{a(H)},[a]),D=pe(H=>H.systems),z=pe(H=>H.containers),$=pe(H=>H.components),V=pe(H=>H.people),K=pe(H=>H.externalSystems),oe=pe(H=>H.shadows),W=pe(H=>H.getVisibleElements);uj(),dj(),q.useEffect(()=>{const R=W().map(k=>({id:k.id,type:k.type==="shadow"?"shadowNode":"c4Node",position:k.position||{x:Math.random()*400,y:Math.random()*300},data:{...k,label:k.name}}));n(R)},[D,z,$,V,K,oe,C,W,n]),q.useEffect(()=>{const H=W(),R=h.map(k=>{const G=k.arrowDirection||"right";let Z,ie;(G==="left"||G==="both")&&(Z={type:Ea.ArrowClosed}),(G==="right"||G==="both")&&(ie={type:Ea.ArrowClosed});const ue=k.lineStyle||"solid";let ce;ue==="dashed"?ce="5,5":ue==="dotted"&&(ce="2,2");const le=H.find(ye=>ye.id===k.from),de=H.find(ye=>ye.id===k.to),{sourceHandle:Te,targetHandle:Se}=hj(le,de);return{id:k.id,source:k.from,target:k.to,sourceHandle:Te,targetHandle:Se,label:k.description||"",type:"smoothstep",animated:k.animated||!1,markerStart:Z,markerEnd:ie,style:{stroke:"#64748b",strokeWidth:2,strokeDasharray:ce},labelStyle:{fill:"#334155",fontSize:12,fontWeight:500},labelBgStyle:{fill:"#f8fafc",fillOpacity:.9}}});o(R)},[h,o,W,D,z,$,V,K,oe,C]);const ee=q.useCallback((H,R)=>{const k=g().find(G=>G.id===R.id);k&&p(k.type,k.id,{position:{x:R.position.x,y:R.position.y}})},[g,p]),ne=q.useCallback(H=>{const R={...H,type:"smoothstep",animated:!1,markerEnd:{type:Ea.ArrowClosed}};o(Z=>Ab(R,Z));const{source:k,target:G}=H;pe.getState().addRelationship({from:k,to:G,description:"New relationship",technology:""})},[o]);q.useEffect(()=>(typeof window<"u"&&(window.__CREATE_CONNECTION__=ne),()=>{typeof window<"u"&&delete window.__CREATE_CONNECTION__}),[ne]),q.useEffect(()=>{const H=R=>{R.target.tagName==="INPUT"||R.target.tagName==="TEXTAREA"||(R.key==="Escape"&&(b?v(null):S()),R.key==="Home"&&!R.ctrlKey&&!R.metaKey&&N(),R.key==="Enter"&&b&&b.type!=="person"&&b.type!=="externalSystem"&&E(b.id))};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[b,v,S,N,E]);const j=q.useCallback((H,R)=>{try{const k=g().find(G=>G.id===R.id);k?(console.log("[Diagrams] Node clicked:",k.type,k.id),v(k)):(console.error("[Diagrams] Element not found for node:",R.id),v(null))}catch(k){console.error("[Diagrams] Error in onNodeClick:",k),v(null)}},[g,v]),P=q.useCallback((H,R)=>{H.stopPropagation();const k=g().find(G=>G.id===R.id);if(k){if(k.type==="shadow"&&k.targetId){const G=g().find(Z=>Z.id===k.targetId);if(G&&G.type!=="person"&&G.type!=="externalSystem"){E(G.id);return}}k.type!=="person"&&k.type!=="externalSystem"&&E(k.id)}},[g,E]),M=q.useCallback((H,R)=>{const k=h.find(G=>G.id===R.id);y(k)},[h,y]),U=q.useCallback(()=>{v(null),y(null)},[v,y]),B=q.useCallback(H=>{H.preventDefault(),H.dataTransfer.dropEffect="move"},[]),X=q.useCallback(H=>{H.preventDefault();const R=H.dataTransfer.getData("application/c4-element-type");if(!R||!u)return;const k=u.screenToFlowPosition({x:H.clientX,y:H.clientY}),G={name:`New ${R.charAt(0).toUpperCase()+R.slice(1)}`,description:"",technology:"",position:k};pe.getState().addElement(R,G)},[u]);return x.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[x.jsx(oj,{}),x.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[_==="edit"&&x.jsx(aO,{}),x.jsx("div",{className:"flex-1 relative",children:_==="tree"?x.jsx(WN,{}):_==="gantt"?x.jsx(rO,{}):x.jsxs(ww,{nodes:e,edges:s,onNodesChange:A,onEdgesChange:c,onConnect:ne,onNodeDragStop:ee,onNodeClick:j,onNodeDoubleClick:P,onEdgeClick:M,onPaneClick:U,onDrop:X,onDragOver:B,onInit:d,nodeTypes:fj,fitView:!0,className:"bg-gray-50",children:[x.jsx(_w,{color:"#cbd5e1",gap:16}),x.jsx(Ew,{}),x.jsx(Cw,{nodeColor:H=>{switch(H.data.type){case"system":return"#3b82f6";case"container":return"#22c55e";case"component":return"#eab308";case"person":return"#a855f7";case"externalSystem":return"#6b7280";default:return"#94a3b8"}}})]})}),(_==="edit"||_==="gantt")&&x.jsx(oO,{})]})]})}wS.createRoot(document.getElementById("root")).render(x.jsx(q.StrictMode,{children:x.jsx(gj,{})}));
