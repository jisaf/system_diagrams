(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wf={exports:{}},Bs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function dS(){if(C0)return Bs;C0=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:e,type:i,key:u,ref:o!==void 0?o:null,props:c}}return Bs.Fragment=n,Bs.jsx=a,Bs.jsxs=a,Bs}var A0;function fS(){return A0||(A0=1,wf.exports=dS()),wf.exports}var _=fS(),xf={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function hS(){if(N0)return Ee;N0=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),y=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function E(O,D,K){this.props=O,this.context=D,this.refs=C,this.updater=K||T}E.prototype.isReactComponent={},E.prototype.setState=function(O,D){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,D,"setState")},E.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function R(){}R.prototype=E.prototype;function w(O,D,K){this.props=O,this.context=D,this.refs=C,this.updater=K||T}var A=w.prototype=new R;A.constructor=w,S(A,E.prototype),A.isPureReactComponent=!0;var $=Array.isArray;function j(){}var U={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function Y(O,D,K){var Z=K.ref;return{$$typeof:e,type:O,key:D,ref:Z!==void 0?Z:null,props:K}}function oe(O,D){return Y(O.type,D,O.props)}function ee(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function W(O){var D={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(K){return D[K]})}var ne=/\/+/g;function k(O,D){return typeof O=="object"&&O!==null&&O.key!=null?W(""+O.key):D.toString(36)}function P(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(j,j):(O.status="pending",O.then(function(D){O.status==="pending"&&(O.status="fulfilled",O.value=D)},function(D){O.status==="pending"&&(O.status="rejected",O.reason=D)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function M(O,D,K,Z,se){var ue=typeof O;(ue==="undefined"||ue==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(ue){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case e:case n:ce=!0;break;case p:return ce=O._init,M(ce(O._payload),D,K,Z,se)}}if(ce)return se=se(O),ce=Z===""?"."+k(O,0):Z,$(se)?(K="",ce!=null&&(K=ce.replace(ne,"$&/")+"/"),M(se,D,K,"",function(Te){return Te})):se!=null&&(ee(se)&&(se=oe(se,K+(se.key==null||O&&O.key===se.key?"":(""+se.key).replace(ne,"$&/")+"/")+ce)),D.push(se)),1;ce=0;var le=Z===""?".":Z+":";if($(O))for(var de=0;de<O.length;de++)Z=O[de],ue=le+k(Z,de),ce+=M(Z,D,K,ue,se);else if(de=b(O),typeof de=="function")for(O=de.call(O),de=0;!(Z=O.next()).done;)Z=Z.value,ue=le+k(Z,de++),ce+=M(Z,D,K,ue,se);else if(ue==="object"){if(typeof O.then=="function")return M(P(O),D,K,Z,se);throw D=String(O),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return ce}function L(O,D,K){if(O==null)return O;var Z=[],se=0;return M(O,Z,"","",function(ue){return D.call(K,ue,se++)}),Z}function B(O){if(O._status===-1){var D=O._result;D=D(),D.then(function(K){(O._status===0||O._status===-1)&&(O._status=1,O._result=K)},function(K){(O._status===0||O._status===-1)&&(O._status=2,O._result=K)}),O._status===-1&&(O._status=0,O._result=D)}if(O._status===1)return O._result.default;throw O._result}var X=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},z={map:L,forEach:function(O,D,K){L(O,function(){D.apply(this,arguments)},K)},count:function(O){var D=0;return L(O,function(){D++}),D},toArray:function(O){return L(O,function(D){return D})||[]},only:function(O){if(!ee(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ee.Activity=v,Ee.Children=z,Ee.Component=E,Ee.Fragment=a,Ee.Profiler=o,Ee.PureComponent=w,Ee.StrictMode=i,Ee.Suspense=g,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(O){return U.H.useMemoCache(O)}},Ee.cache=function(O){return function(){return O.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(O,D,K){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Z=S({},O.props),se=O.key;if(D!=null)for(ue in D.key!==void 0&&(se=""+D.key),D)!V.call(D,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&D.ref===void 0||(Z[ue]=D[ue]);var ue=arguments.length-2;if(ue===1)Z.children=K;else if(1<ue){for(var ce=Array(ue),le=0;le<ue;le++)ce[le]=arguments[le+2];Z.children=ce}return Y(O.type,se,Z)},Ee.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Ee.createElement=function(O,D,K){var Z,se={},ue=null;if(D!=null)for(Z in D.key!==void 0&&(ue=""+D.key),D)V.call(D,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(se[Z]=D[Z]);var ce=arguments.length-2;if(ce===1)se.children=K;else if(1<ce){for(var le=Array(ce),de=0;de<ce;de++)le[de]=arguments[de+2];se.children=le}if(O&&O.defaultProps)for(Z in ce=O.defaultProps,ce)se[Z]===void 0&&(se[Z]=ce[Z]);return Y(O,ue,se)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(O){return{$$typeof:d,render:O}},Ee.isValidElement=ee,Ee.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:B}},Ee.memo=function(O,D){return{$$typeof:h,type:O,compare:D===void 0?null:D}},Ee.startTransition=function(O){var D=U.T,K={};U.T=K;try{var Z=O(),se=U.S;se!==null&&se(K,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(j,X)}catch(ue){X(ue)}finally{D!==null&&K.types!==null&&(D.types=K.types),U.T=D}},Ee.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ee.use=function(O){return U.H.use(O)},Ee.useActionState=function(O,D,K){return U.H.useActionState(O,D,K)},Ee.useCallback=function(O,D){return U.H.useCallback(O,D)},Ee.useContext=function(O){return U.H.useContext(O)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(O,D){return U.H.useDeferredValue(O,D)},Ee.useEffect=function(O,D){return U.H.useEffect(O,D)},Ee.useEffectEvent=function(O){return U.H.useEffectEvent(O)},Ee.useId=function(){return U.H.useId()},Ee.useImperativeHandle=function(O,D,K){return U.H.useImperativeHandle(O,D,K)},Ee.useInsertionEffect=function(O,D){return U.H.useInsertionEffect(O,D)},Ee.useLayoutEffect=function(O,D){return U.H.useLayoutEffect(O,D)},Ee.useMemo=function(O,D){return U.H.useMemo(O,D)},Ee.useOptimistic=function(O,D){return U.H.useOptimistic(O,D)},Ee.useReducer=function(O,D,K){return U.H.useReducer(O,D,K)},Ee.useRef=function(O){return U.H.useRef(O)},Ee.useState=function(O){return U.H.useState(O)},Ee.useSyncExternalStore=function(O,D,K){return U.H.useSyncExternalStore(O,D,K)},Ee.useTransition=function(){return U.H.useTransition()},Ee.version="19.2.0",Ee}var O0;function po(){return O0||(O0=1,xf.exports=hS()),xf.exports}var q=po();const Mv=Rv(q);var _f={exports:{}},Is={},Sf={exports:{}},Ef={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function gS(){return R0||(R0=1,(function(e){function n(M,L){var B=M.length;M.push(L);e:for(;0<B;){var X=B-1>>>1,z=M[X];if(0<o(z,L))M[X]=L,M[B]=z,B=X;else break e}}function a(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var L=M[0],B=M.pop();if(B!==L){M[0]=B;e:for(var X=0,z=M.length,O=z>>>1;X<O;){var D=2*(X+1)-1,K=M[D],Z=D+1,se=M[Z];if(0>o(K,B))Z<z&&0>o(se,K)?(M[X]=se,M[Z]=B,X=Z):(M[X]=K,M[D]=B,X=D);else if(Z<z&&0>o(se,B))M[X]=se,M[Z]=B,X=Z;else break e}}return L}function o(M,L){var B=M.sortIndex-L.sortIndex;return B!==0?B:M.id-L.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var g=[],h=[],p=1,v=null,y=3,b=!1,T=!1,S=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function A(M){for(var L=a(h);L!==null;){if(L.callback===null)i(h);else if(L.startTime<=M)i(h),L.sortIndex=L.expirationTime,n(g,L);else break;L=a(h)}}function $(M){if(S=!1,A(M),!T)if(a(g)!==null)T=!0,j||(j=!0,W());else{var L=a(h);L!==null&&P($,L.startTime-M)}}var j=!1,U=-1,V=5,Y=-1;function oe(){return C?!0:!(e.unstable_now()-Y<V)}function ee(){if(C=!1,j){var M=e.unstable_now();Y=M;var L=!0;try{e:{T=!1,S&&(S=!1,R(U),U=-1),b=!0;var B=y;try{t:{for(A(M),v=a(g);v!==null&&!(v.expirationTime>M&&oe());){var X=v.callback;if(typeof X=="function"){v.callback=null,y=v.priorityLevel;var z=X(v.expirationTime<=M);if(M=e.unstable_now(),typeof z=="function"){v.callback=z,A(M),L=!0;break t}v===a(g)&&i(g),A(M)}else i(g);v=a(g)}if(v!==null)L=!0;else{var O=a(h);O!==null&&P($,O.startTime-M),L=!1}}break e}finally{v=null,y=B,b=!1}L=void 0}}finally{L?W():j=!1}}}var W;if(typeof w=="function")W=function(){w(ee)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,k=ne.port2;ne.port1.onmessage=ee,W=function(){k.postMessage(null)}}else W=function(){E(ee,0)};function P(M,L){U=E(function(){M(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(M){switch(y){case 1:case 2:case 3:var L=3;break;default:L=y}var B=y;y=L;try{return M()}finally{y=B}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var B=y;y=M;try{return L()}finally{y=B}},e.unstable_scheduleCallback=function(M,L,B){var X=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,M){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=B+z,M={id:p++,callback:L,priorityLevel:M,startTime:B,expirationTime:z,sortIndex:-1},B>X?(M.sortIndex=B,n(h,M),a(g)===null&&M===a(h)&&(S?(R(U),U=-1):S=!0,P($,B-X))):(M.sortIndex=z,n(g,M),T||b||(T=!0,j||(j=!0,W()))),M},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(M){var L=y;return function(){var B=y;y=L;try{return M.apply(this,arguments)}finally{y=B}}}})(Ef)),Ef}var M0;function mS(){return M0||(M0=1,Sf.exports=gS()),Sf.exports}var Tf={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function pS(){if(k0)return Ct;k0=1;var e=po();function n(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:h,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ct.createPortal=function(g,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(n(299));return c(g,h,null,p)},Ct.flushSync=function(g){var h=u.T,p=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=p,i.d.f()}},Ct.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},Ct.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Ct.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:b}):p==="script"&&i.d.X(g,{crossOrigin:v,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ct.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},Ct.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin);i.d.L(g,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ct.preloadModule=function(g,h){if(typeof g=="string")if(h){var p=d(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},Ct.requestFormReset=function(g){i.d.r(g)},Ct.unstable_batchedUpdates=function(g,h){return g(h)},Ct.useFormState=function(g,h,p){return u.H.useFormState(g,h,p)},Ct.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ct.version="19.2.0",Ct}var j0;function kv(){if(j0)return Tf.exports;j0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Tf.exports=pS(),Tf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function yS(){if(D0)return Is;D0=1;var e=mS(),n=po(),a=kv();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function u(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function d(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function h(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(i(188));return r!==t?null:t}for(var s=t,l=r;;){var f=s.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===s)return g(f),t;if(m===l)return g(f),r;m=m.sibling}throw Error(i(188))}if(s.return!==l.return)s=f,l=m;else{for(var x=!1,N=f.child;N;){if(N===s){x=!0,s=f,l=m;break}if(N===l){x=!0,l=f,s=m;break}N=N.sibling}if(!x){for(N=m.child;N;){if(N===s){x=!0,s=m,l=f;break}if(N===l){x=!0,l=m,s=f;break}N=N.sibling}if(!x)throw Error(i(189))}}if(s.alternate!==l)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?t:r}function p(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=p(t),r!==null)return r;t=t.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),w=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function W(t){return t===null||typeof t!="object"?null:(t=ee&&t[ee]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Symbol.for("react.client.reference");function k(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ne?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case S:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case $:return"Suspense";case j:return"SuspenseList";case Y:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case w:return t.displayName||"Context";case R:return(t._context.displayName||"Context")+".Consumer";case A:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return r=t.displayName||null,r!==null?r:k(t.type)||"Memo";case V:r=t._payload,t=t._init;try{return k(t(r))}catch{}}return null}var P=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},X=[],z=-1;function O(t){return{current:t}}function D(t){0>z||(t.current=X[z],X[z]=null,z--)}function K(t,r){z++,X[z]=t.current,t.current=r}var Z=O(null),se=O(null),ue=O(null),ce=O(null);function le(t,r){switch(K(ue,r),K(se,t),K(Z,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Zp(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Zp(r),t=Qp(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}D(Z),K(Z,t)}function de(){D(Z),D(se),D(ue)}function Te(t){t.memoizedState!==null&&K(ce,t);var r=Z.current,s=Qp(r,t.type);r!==s&&(K(se,t),K(Z,s))}function Se(t){se.current===t&&(D(Z),D(se)),ce.current===t&&(D(ce),$s._currentValue=B)}var ye,_e;function Ce(t){if(ye===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);ye=r&&r[1]||"",_e=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+t+_e}var Ie=!1;function Ge(t,r){if(!t||Ie)return"";Ie=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(te){var F=te}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(te){F=te}t.call(ie.prototype)}}else{try{throw Error()}catch(te){F=te}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(te){if(te&&F&&typeof te.stack=="string")return[te.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],N=m[1];if(x&&N){var H=x.split(`
`),J=N.split(`
`);for(f=l=0;l<H.length&&!H[l].includes("DetermineComponentFrameRoot");)l++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(l===H.length||f===J.length)for(l=H.length-1,f=J.length-1;1<=l&&0<=f&&H[l]!==J[f];)f--;for(;1<=l&&0<=f;l--,f--)if(H[l]!==J[f]){if(l!==1||f!==1)do if(l--,f--,0>f||H[l]!==J[f]){var re=`
`+H[l].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=l&&0<=f);break}}}finally{Ie=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Ce(s):""}function mt(t,r){switch(t.tag){case 26:case 27:case 5:return Ce(t.type);case 16:return Ce("Lazy");case 13:return t.child!==r&&r!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Ge(t.type,!1);case 11:return Ge(t.type.render,!1);case 1:return Ge(t.type,!0);case 31:return Ce("Activity");default:return""}}function Ft(t){try{var r="",s=null;do r+=mt(t,s),s=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ln=Object.prototype.hasOwnProperty,ar=e.unstable_scheduleCallback,ir=e.unstable_cancelCallback,Vr=e.unstable_shouldYield,Pr=e.unstable_requestPaint,yt=e.unstable_now,Na=e.unstable_getCurrentPriorityLevel,Mn=e.unstable_ImmediatePriority,sr=e.unstable_UserBlockingPriority,Gr=e.unstable_NormalPriority,nu=e.unstable_LowPriority,Oa=e.unstable_IdlePriority,ru=e.log,au=e.unstable_setDisableYieldValue,Yr=null,At=null;function xn(t){if(typeof ru=="function"&&au(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Yr,t)}catch{}}var Nt=Math.clz32?Math.clz32:ou,iu=Math.log,su=Math.LN2;function ou(t){return t>>>=0,t===0?32:31-(iu(t)/su|0)|0}var Ra=256,Ma=262144,ka=4194304;function kn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ja(t,r,s){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var N=l&134217727;return N!==0?(l=N&~m,l!==0?f=kn(l):(x&=N,x!==0?f=kn(x):s||(s=N&~t,s!==0&&(f=kn(s))))):(N=l&~m,N!==0?f=kn(N):x!==0?f=kn(x):s||(s=l&~t,s!==0&&(f=kn(s)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,s=r&-r,m>=s||m===32&&(s&4194048)!==0)?r:f}function Xr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function lu(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function No(){var t=ka;return ka<<=1,(ka&62914560)===0&&(ka=4194304),t}function Xi(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function Kr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function cu(t,r,s,l,f,m){var x=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var N=t.entanglements,H=t.expirationTimes,J=t.hiddenUpdates;for(s=x&~s;0<s;){var re=31-Nt(s),ie=1<<re;N[re]=0,H[re]=-1;var F=J[re];if(F!==null)for(J[re]=null,re=0;re<F.length;re++){var te=F[re];te!==null&&(te.lane&=-536870913)}s&=~ie}l!==0&&Oo(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~r))}function Oo(t,r,s){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Nt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function Ro(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var l=31-Nt(s),f=1<<l;f&r|t[l]&r&&(t[l]|=r),s&=~f}}function Mo(t,r){var s=r&-r;return s=(s&42)!==0?1:Ki(s),(s&(t.suspendedLanes|r))!==0?0:s}function Ki(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Zi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ko(){var t=L.p;return t!==0?t:(t=window.event,t===void 0?32:b0(t.type))}function jo(t,r){var s=L.p;try{return L.p=t,r()}finally{L.p=s}}var _n=Math.random().toString(36).slice(2),dt="__reactFiber$"+_n,Et="__reactProps$"+_n,jn="__reactContainer$"+_n,Da="__reactEvents$"+_n,Do="__reactListeners$"+_n,uu="__reactHandles$"+_n,zo="__reactResources$"+_n,Zr="__reactMarker$"+_n;function Qi(t){delete t[dt],delete t[Et],delete t[Da],delete t[Do],delete t[uu]}function or(t){var r=t[dt];if(r)return r;for(var s=t.parentNode;s;){if(r=s[jn]||s[dt]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=r0(t);t!==null;){if(s=t[dt])return s;t=r0(t)}return r}t=s,s=t.parentNode}return null}function lr(t){if(t=t[dt]||t[jn]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function cr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function ur(t){var r=t[zo];return r||(r=t[zo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function at(t){t[Zr]=!0}var $o=new Set,Uo={};function Dn(t,r){dr(t,r),dr(t+"Capture",r)}function dr(t,r){for(Uo[t]=r,t=0;t<r.length;t++)$o.add(r[t])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ji={},Lo={};function fu(t){return ln.call(Lo,t)?!0:ln.call(Ji,t)?!1:du.test(t)?Lo[t]=!0:(Ji[t]=!0,!1)}function za(t,r,s){if(fu(r))if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+s)}}function $a(t,r,s){if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+s)}}function cn(t,r,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(r,s,""+l)}}function Rt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ho(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function hu(t,r,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(x){s=""+x,m.call(this,x)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(x){s=""+x},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ua(t){if(!t._valueTracker){var r=Ho(t)?"checked":"value";t._valueTracker=hu(t,r,""+t[r])}}function Bo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),l="";return t&&(l=Ho(t)?t.checked?"true":"false":t.value),t=l,t!==s?(r.setValue(t),!0):!1}function La(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gu=/[\n"\\]/g;function Tt(t){return t.replace(gu,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Fi(t,r,s,l,f,m,x,N){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),r!=null?x==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Rt(r)):t.value!==""+Rt(r)&&(t.value=""+Rt(r)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),r!=null?Ha(t,x,Rt(r)):s!=null?Ha(t,x,Rt(s)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+Rt(N):t.removeAttribute("name")}function Io(t,r,s,l,f,m,x,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ua(t);return}s=s!=null?""+Rt(s):"",r=r!=null?""+Rt(r):s,N||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=N?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Ua(t)}function Ha(t,r,s){r==="number"&&La(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Ba(t,r,s,l){if(t=t.options,r){r={};for(var f=0;f<s.length;f++)r["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=r.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Rt(s),r=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Ph(t,r,s){if(r!=null&&(r=""+Rt(r),r!==t.value&&(t.value=r),s==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=s!=null?""+Rt(s):""}function Gh(t,r,s,l){if(r==null){if(l!=null){if(s!=null)throw Error(i(92));if(P(l)){if(1<l.length)throw Error(i(93));l=l[0]}s=l}s==null&&(s=""),r=s}s=Rt(r),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),Ua(t)}function Ia(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var sx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yh(t,r,s){var l=r.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,s):typeof s!="number"||s===0||sx.has(r)?r==="float"?t.cssFloat=s:t[r]=(""+s).trim():t[r]=s+"px"}function Xh(t,r,s){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&s[f]!==l&&Yh(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Yh(t,m,r[m])}function mu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ox=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qo(t){return lx.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function zn(){}var pu=null;function yu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qa=null,Va=null;function Kh(t){var r=lr(t);if(r&&(t=r.stateNode)){var s=t[Et]||null;e:switch(t=r.stateNode,r.type){case"input":if(Fi(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Tt(""+r)+'"][type="radio"]'),r=0;r<s.length;r++){var l=s[r];if(l!==t&&l.form===t.form){var f=l[Et]||null;if(!f)throw Error(i(90));Fi(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<s.length;r++)l=s[r],l.form===t.form&&Bo(l)}break e;case"textarea":Ph(t,s.value,s.defaultValue);break e;case"select":r=s.value,r!=null&&Ba(t,!!s.multiple,r,!1)}}}var vu=!1;function Zh(t,r,s){if(vu)return t(r,s);vu=!0;try{var l=t(r);return l}finally{if(vu=!1,(qa!==null||Va!==null)&&(Ol(),qa&&(r=qa,t=Va,Va=qa=null,Kh(r),t)))for(r=0;r<t.length;r++)Kh(t[r])}}function Wi(t,r){var s=t.stateNode;if(s===null)return null;var l=s[Et]||null;if(l===null)return null;s=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(i(231,r,typeof s));return s}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=!1;if($n)try{var es={};Object.defineProperty(es,"passive",{get:function(){bu=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{bu=!1}var fr=null,wu=null,Vo=null;function Qh(){if(Vo)return Vo;var t,r=wu,s=r.length,l,f="value"in fr?fr.value:fr.textContent,m=f.length;for(t=0;t<s&&r[t]===f[t];t++);var x=s-t;for(l=1;l<=x&&r[s-l]===f[m-l];l++);return Vo=f.slice(t,1<l?1-l:void 0)}function Po(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Go(){return!0}function Jh(){return!1}function Mt(t){function r(s,l,f,m,x){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(s=t[N],this[N]=s?s(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Go:Jh,this.isPropagationStopped=Jh,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),r}var Qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=Mt(Qr),ts=v({},Qr,{view:0,detail:0}),cx=Mt(ts),xu,_u,ns,Xo=v({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(xu=t.screenX-ns.screenX,_u=t.screenY-ns.screenY):_u=xu=0,ns=t),xu)},movementY:function(t){return"movementY"in t?t.movementY:_u}}),Fh=Mt(Xo),ux=v({},Xo,{dataTransfer:0}),dx=Mt(ux),fx=v({},ts,{relatedTarget:0}),Su=Mt(fx),hx=v({},Qr,{animationName:0,elapsedTime:0,pseudoElement:0}),gx=Mt(hx),mx=v({},Qr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),px=Mt(mx),yx=v({},Qr,{data:0}),Wh=Mt(yx),vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xx(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=wx[t])?!!r[t]:!1}function Eu(){return xx}var _x=v({},ts,{key:function(t){if(t.key){var r=vx[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Po(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(t){return t.type==="keypress"?Po(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Po(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sx=Mt(_x),Ex=v({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eg=Mt(Ex),Tx=v({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),Cx=Mt(Tx),Ax=v({},Qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nx=Mt(Ax),Ox=v({},Xo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rx=Mt(Ox),Mx=v({},Qr,{newState:0,oldState:0}),kx=Mt(Mx),jx=[9,13,27,32],Tu=$n&&"CompositionEvent"in window,rs=null;$n&&"documentMode"in document&&(rs=document.documentMode);var Dx=$n&&"TextEvent"in window&&!rs,tg=$n&&(!Tu||rs&&8<rs&&11>=rs),ng=" ",rg=!1;function ag(t,r){switch(t){case"keyup":return jx.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ig(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pa=!1;function zx(t,r){switch(t){case"compositionend":return ig(r);case"keypress":return r.which!==32?null:(rg=!0,ng);case"textInput":return t=r.data,t===ng&&rg?null:t;default:return null}}function $x(t,r){if(Pa)return t==="compositionend"||!Tu&&ag(t,r)?(t=Qh(),Vo=wu=fr=null,Pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return tg&&r.locale!=="ko"?null:r.data;default:return null}}var Ux={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ux[t.type]:r==="textarea"}function og(t,r,s,l){qa?Va?Va.push(l):Va=[l]:qa=l,r=$l(r,"onChange"),0<r.length&&(s=new Yo("onChange","change",null,s,l),t.push({event:s,listeners:r}))}var as=null,is=null;function Lx(t){Vp(t,0)}function Ko(t){var r=cr(t);if(Bo(r))return t}function lg(t,r){if(t==="change")return r}var cg=!1;if($n){var Cu;if($n){var Au="oninput"in document;if(!Au){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),Au=typeof ug.oninput=="function"}Cu=Au}else Cu=!1;cg=Cu&&(!document.documentMode||9<document.documentMode)}function dg(){as&&(as.detachEvent("onpropertychange",fg),is=as=null)}function fg(t){if(t.propertyName==="value"&&Ko(is)){var r=[];og(r,is,t,yu(t)),Zh(Lx,r)}}function Hx(t,r,s){t==="focusin"?(dg(),as=r,is=s,as.attachEvent("onpropertychange",fg)):t==="focusout"&&dg()}function Bx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ko(is)}function Ix(t,r){if(t==="click")return Ko(r)}function qx(t,r){if(t==="input"||t==="change")return Ko(r)}function Vx(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Bt=typeof Object.is=="function"?Object.is:Vx;function ss(t,r){if(Bt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),l=Object.keys(r);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!ln.call(r,f)||!Bt(t[f],r[f]))return!1}return!0}function hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,r){var s=hg(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=r&&l>=r)return{node:s,offset:r-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hg(s)}}function mg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?mg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function pg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=La(t.document);r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=La(t.document)}return r}function Nu(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Px=$n&&"documentMode"in document&&11>=document.documentMode,Ga=null,Ou=null,os=null,Ru=!1;function yg(t,r,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ru||Ga==null||Ga!==La(l)||(l=Ga,"selectionStart"in l&&Nu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),os&&ss(os,l)||(os=l,l=$l(Ou,"onSelect"),0<l.length&&(r=new Yo("onSelect","select",null,r,s),t.push({event:r,listeners:l}),r.target=Ga)))}function Jr(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Ya={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},Mu={},vg={};$n&&(vg=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Fr(t){if(Mu[t])return Mu[t];if(!Ya[t])return t;var r=Ya[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in vg)return Mu[t]=r[s];return t}var bg=Fr("animationend"),wg=Fr("animationiteration"),xg=Fr("animationstart"),Gx=Fr("transitionrun"),Yx=Fr("transitionstart"),Xx=Fr("transitioncancel"),_g=Fr("transitionend"),Sg=new Map,ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ku.push("scrollEnd");function un(t,r){Sg.set(t,r),Dn(r,[t])}var Zo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Wt=[],Xa=0,ju=0;function Qo(){for(var t=Xa,r=ju=Xa=0;r<t;){var s=Wt[r];Wt[r++]=null;var l=Wt[r];Wt[r++]=null;var f=Wt[r];Wt[r++]=null;var m=Wt[r];if(Wt[r++]=null,l!==null&&f!==null){var x=l.pending;x===null?f.next=f:(f.next=x.next,x.next=f),l.pending=f}m!==0&&Eg(s,f,m)}}function Jo(t,r,s,l){Wt[Xa++]=t,Wt[Xa++]=r,Wt[Xa++]=s,Wt[Xa++]=l,ju|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Du(t,r,s,l){return Jo(t,r,s,l),Fo(t)}function Wr(t,r){return Jo(t,null,null,r),Fo(t)}function Eg(t,r,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var f=!1,m=t.return;m!==null;)m.childLanes|=s,l=m.alternate,l!==null&&(l.childLanes|=s),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Nt(s),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=s|536870912),m):null}function Fo(t){if(50<Os)throw Os=0,Vd=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ka={};function Kx(t,r,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,r,s,l){return new Kx(t,r,s,l)}function zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Un(t,r){var s=t.alternate;return s===null?(s=It(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Tg(t,r){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,r=s.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Wo(t,r,s,l,f,m){var x=0;if(l=t,typeof t=="function")zu(t)&&(x=1);else if(typeof t=="string")x=W_(t,s,Z.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Y:return t=It(31,s,r,f),t.elementType=Y,t.lanes=m,t;case S:return ea(s.children,f,m,r);case C:x=8,f|=24;break;case E:return t=It(12,s,r,f|2),t.elementType=E,t.lanes=m,t;case $:return t=It(13,s,r,f),t.elementType=$,t.lanes=m,t;case j:return t=It(19,s,r,f),t.elementType=j,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w:x=10;break e;case R:x=9;break e;case A:x=11;break e;case U:x=14;break e;case V:x=16,l=null;break e}x=29,s=Error(i(130,t===null?"null":typeof t,"")),l=null}return r=It(x,s,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function ea(t,r,s,l){return t=It(7,t,l,r),t.lanes=s,t}function $u(t,r,s){return t=It(6,t,null,r),t.lanes=s,t}function Cg(t){var r=It(18,null,null,0);return r.stateNode=t,r}function Uu(t,r,s){return r=It(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ag=new WeakMap;function en(t,r){if(typeof t=="object"&&t!==null){var s=Ag.get(t);return s!==void 0?s:(r={value:t,source:r,stack:Ft(r)},Ag.set(t,r),r)}return{value:t,source:r,stack:Ft(r)}}var Za=[],Qa=0,el=null,ls=0,tn=[],nn=0,hr=null,Sn=1,En="";function Ln(t,r){Za[Qa++]=ls,Za[Qa++]=el,el=t,ls=r}function Ng(t,r,s){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hr,hr=t;var l=Sn;t=En;var f=32-Nt(l)-1;l&=~(1<<f),s+=1;var m=32-Nt(r)+f;if(30<m){var x=f-f%5;m=(l&(1<<x)-1).toString(32),l>>=x,f-=x,Sn=1<<32-Nt(r)+f|s<<f|l,En=m+t}else Sn=1<<m|s<<f|l,En=t}function Lu(t){t.return!==null&&(Ln(t,1),Ng(t,1,0))}function Hu(t){for(;t===el;)el=Za[--Qa],Za[Qa]=null,ls=Za[--Qa],Za[Qa]=null;for(;t===hr;)hr=tn[--nn],tn[nn]=null,En=tn[--nn],tn[nn]=null,Sn=tn[--nn],tn[nn]=null}function Og(t,r){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hr,Sn=r.id,En=r.overflow,hr=t}var vt=null,Ke=null,je=!1,gr=null,rn=!1,Bu=Error(i(519));function mr(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cs(en(r,t)),Bu}function Rg(t){var r=t.stateNode,s=t.type,l=t.memoizedProps;switch(r[dt]=t,r[Et]=l,s){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Ms.length;s++)Re(Ms[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Re("invalid",r),Io(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Re("invalid",r);break;case"textarea":Re("invalid",r),Gh(r,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||r.textContent===""+s||l.suppressHydrationWarning===!0||Xp(r.textContent,s)?(l.popover!=null&&(Re("beforetoggle",r),Re("toggle",r)),l.onScroll!=null&&Re("scroll",r),l.onScrollEnd!=null&&Re("scrollend",r),l.onClick!=null&&(r.onclick=zn),r=!0):r=!1,r||mr(t,!0)}function Mg(t){for(vt=t.return;vt;)switch(vt.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:vt=vt.return}}function Ja(t){if(t!==vt)return!1;if(!je)return Mg(t),je=!0,!1;var r=t.tag,s;if((s=r!==3&&r!==27)&&((s=r===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||af(t.type,t.memoizedProps)),s=!s),s&&Ke&&mr(t),Mg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ke=n0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ke=n0(t)}else r===27?(r=Ke,Or(t.type)?(t=uf,uf=null,Ke=t):Ke=r):Ke=vt?sn(t.stateNode.nextSibling):null;return!0}function ta(){Ke=vt=null,je=!1}function Iu(){var t=gr;return t!==null&&(zt===null?zt=t:zt.push.apply(zt,t),gr=null),t}function cs(t){gr===null?gr=[t]:gr.push(t)}var qu=O(null),na=null,Hn=null;function pr(t,r,s){K(qu,r._currentValue),r._currentValue=s}function Bn(t){t._currentValue=qu.current,D(qu)}function Vu(t,r,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===s)break;t=t.return}}function Pu(t,r,s,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var H=0;H<r.length;H++)if(N.context===r[H]){m.lanes|=s,N=m.alternate,N!==null&&(N.lanes|=s),Vu(m.return,s,t),l||(x=null);break e}m=N.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=s,m=x.alternate,m!==null&&(m.lanes|=s),Vu(x,s,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Fa(t,r,s,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var N=f.type;Bt(f.pendingProps.value,x.value)||(t!==null?t.push(N):t=[N])}}else if(f===ce.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push($s):t=[$s])}f=f.return}t!==null&&Pu(r,t,s,l),r.flags|=262144}function tl(t){for(t=t.firstContext;t!==null;){if(!Bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ra(t){na=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return kg(na,t)}function nl(t,r){return na===null&&ra(t),kg(t,r)}function kg(t,r){var s=r._currentValue;if(r={context:r,memoizedValue:s,next:null},Hn===null){if(t===null)throw Error(i(308));Hn=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Hn=Hn.next=r;return s}var Zx=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(s){return s()})}},Qx=e.unstable_scheduleCallback,Jx=e.unstable_NormalPriority,it={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gu(){return{controller:new Zx,data:new Map,refCount:0}}function us(t){t.refCount--,t.refCount===0&&Qx(Jx,function(){t.controller.abort()})}var ds=null,Yu=0,Wa=0,ei=null;function Fx(t,r){if(ds===null){var s=ds=[];Yu=0,Wa=Zd(),ei={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Yu++,r.then(jg,jg),r}function jg(){if(--Yu===0&&ds!==null){ei!==null&&(ei.status="fulfilled");var t=ds;ds=null,Wa=0,ei=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Wx(t,r){var s=[],l={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<s.length;f++)(0,s[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),l}var Dg=M.S;M.S=function(t,r){yp=yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Fx(t,r),Dg!==null&&Dg(t,r)};var aa=O(null);function Xu(){var t=aa.current;return t!==null?t:Ye.pooledCache}function rl(t,r){r===null?K(aa,aa.current):K(aa,r.pool)}function zg(){var t=Xu();return t===null?null:{parent:it._currentValue,pool:t}}var ti=Error(i(460)),Ku=Error(i(474)),al=Error(i(542)),il={then:function(){}};function $g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ug(t,r,s){switch(s=t[s],s===void 0?t.push(r):s!==r&&(r.then(zn,zn),r=s),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Hg(t),t;default:if(typeof r.status=="string")r.then(zn,zn);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Hg(t),t}throw sa=r,ti}}function ia(t){try{var r=t._init;return r(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(sa=s,ti):s}}var sa=null;function Lg(){if(sa===null)throw Error(i(459));var t=sa;return sa=null,t}function Hg(t){if(t===ti||t===al)throw Error(i(483))}var ni=null,fs=0;function sl(t){var r=fs;return fs+=1,ni===null&&(ni=[]),Ug(ni,t,r)}function hs(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ol(t,r){throw r.$$typeof===y?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Bg(t){function r(G,I){if(t){var Q=G.deletions;Q===null?(G.deletions=[I],G.flags|=16):Q.push(I)}}function s(G,I){if(!t)return null;for(;I!==null;)r(G,I),I=I.sibling;return null}function l(G){for(var I=new Map;G!==null;)G.key!==null?I.set(G.key,G):I.set(G.index,G),G=G.sibling;return I}function f(G,I){return G=Un(G,I),G.index=0,G.sibling=null,G}function m(G,I,Q){return G.index=Q,t?(Q=G.alternate,Q!==null?(Q=Q.index,Q<I?(G.flags|=67108866,I):Q):(G.flags|=67108866,I)):(G.flags|=1048576,I)}function x(G){return t&&G.alternate===null&&(G.flags|=67108866),G}function N(G,I,Q,ae){return I===null||I.tag!==6?(I=$u(Q,G.mode,ae),I.return=G,I):(I=f(I,Q),I.return=G,I)}function H(G,I,Q,ae){var ve=Q.type;return ve===S?re(G,I,Q.props.children,ae,Q.key):I!==null&&(I.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===V&&ia(ve)===I.type)?(I=f(I,Q.props),hs(I,Q),I.return=G,I):(I=Wo(Q.type,Q.key,Q.props,null,G.mode,ae),hs(I,Q),I.return=G,I)}function J(G,I,Q,ae){return I===null||I.tag!==4||I.stateNode.containerInfo!==Q.containerInfo||I.stateNode.implementation!==Q.implementation?(I=Uu(Q,G.mode,ae),I.return=G,I):(I=f(I,Q.children||[]),I.return=G,I)}function re(G,I,Q,ae,ve){return I===null||I.tag!==7?(I=ea(Q,G.mode,ae,ve),I.return=G,I):(I=f(I,Q),I.return=G,I)}function ie(G,I,Q){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=$u(""+I,G.mode,Q),I.return=G,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return Q=Wo(I.type,I.key,I.props,null,G.mode,Q),hs(Q,I),Q.return=G,Q;case T:return I=Uu(I,G.mode,Q),I.return=G,I;case V:return I=ia(I),ie(G,I,Q)}if(P(I)||W(I))return I=ea(I,G.mode,Q,null),I.return=G,I;if(typeof I.then=="function")return ie(G,sl(I),Q);if(I.$$typeof===w)return ie(G,nl(G,I),Q);ol(G,I)}return null}function F(G,I,Q,ae){var ve=I!==null?I.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return ve!==null?null:N(G,I,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Q.key===ve?H(G,I,Q,ae):null;case T:return Q.key===ve?J(G,I,Q,ae):null;case V:return Q=ia(Q),F(G,I,Q,ae)}if(P(Q)||W(Q))return ve!==null?null:re(G,I,Q,ae,null);if(typeof Q.then=="function")return F(G,I,sl(Q),ae);if(Q.$$typeof===w)return F(G,I,nl(G,Q),ae);ol(G,Q)}return null}function te(G,I,Q,ae,ve){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return G=G.get(Q)||null,N(I,G,""+ae,ve);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case b:return G=G.get(ae.key===null?Q:ae.key)||null,H(I,G,ae,ve);case T:return G=G.get(ae.key===null?Q:ae.key)||null,J(I,G,ae,ve);case V:return ae=ia(ae),te(G,I,Q,ae,ve)}if(P(ae)||W(ae))return G=G.get(Q)||null,re(I,G,ae,ve,null);if(typeof ae.then=="function")return te(G,I,Q,sl(ae),ve);if(ae.$$typeof===w)return te(G,I,Q,nl(I,ae),ve);ol(I,ae)}return null}function fe(G,I,Q,ae){for(var ve=null,ze=null,ge=I,Ne=I=0,ke=null;ge!==null&&Ne<Q.length;Ne++){ge.index>Ne?(ke=ge,ge=null):ke=ge.sibling;var $e=F(G,ge,Q[Ne],ae);if($e===null){ge===null&&(ge=ke);break}t&&ge&&$e.alternate===null&&r(G,ge),I=m($e,I,Ne),ze===null?ve=$e:ze.sibling=$e,ze=$e,ge=ke}if(Ne===Q.length)return s(G,ge),je&&Ln(G,Ne),ve;if(ge===null){for(;Ne<Q.length;Ne++)ge=ie(G,Q[Ne],ae),ge!==null&&(I=m(ge,I,Ne),ze===null?ve=ge:ze.sibling=ge,ze=ge);return je&&Ln(G,Ne),ve}for(ge=l(ge);Ne<Q.length;Ne++)ke=te(ge,G,Ne,Q[Ne],ae),ke!==null&&(t&&ke.alternate!==null&&ge.delete(ke.key===null?Ne:ke.key),I=m(ke,I,Ne),ze===null?ve=ke:ze.sibling=ke,ze=ke);return t&&ge.forEach(function(Dr){return r(G,Dr)}),je&&Ln(G,Ne),ve}function be(G,I,Q,ae){if(Q==null)throw Error(i(151));for(var ve=null,ze=null,ge=I,Ne=I=0,ke=null,$e=Q.next();ge!==null&&!$e.done;Ne++,$e=Q.next()){ge.index>Ne?(ke=ge,ge=null):ke=ge.sibling;var Dr=F(G,ge,$e.value,ae);if(Dr===null){ge===null&&(ge=ke);break}t&&ge&&Dr.alternate===null&&r(G,ge),I=m(Dr,I,Ne),ze===null?ve=Dr:ze.sibling=Dr,ze=Dr,ge=ke}if($e.done)return s(G,ge),je&&Ln(G,Ne),ve;if(ge===null){for(;!$e.done;Ne++,$e=Q.next())$e=ie(G,$e.value,ae),$e!==null&&(I=m($e,I,Ne),ze===null?ve=$e:ze.sibling=$e,ze=$e);return je&&Ln(G,Ne),ve}for(ge=l(ge);!$e.done;Ne++,$e=Q.next())$e=te(ge,G,Ne,$e.value,ae),$e!==null&&(t&&$e.alternate!==null&&ge.delete($e.key===null?Ne:$e.key),I=m($e,I,Ne),ze===null?ve=$e:ze.sibling=$e,ze=$e);return t&&ge.forEach(function(uS){return r(G,uS)}),je&&Ln(G,Ne),ve}function Pe(G,I,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===S&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:e:{for(var ve=Q.key;I!==null;){if(I.key===ve){if(ve=Q.type,ve===S){if(I.tag===7){s(G,I.sibling),ae=f(I,Q.props.children),ae.return=G,G=ae;break e}}else if(I.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===V&&ia(ve)===I.type){s(G,I.sibling),ae=f(I,Q.props),hs(ae,Q),ae.return=G,G=ae;break e}s(G,I);break}else r(G,I);I=I.sibling}Q.type===S?(ae=ea(Q.props.children,G.mode,ae,Q.key),ae.return=G,G=ae):(ae=Wo(Q.type,Q.key,Q.props,null,G.mode,ae),hs(ae,Q),ae.return=G,G=ae)}return x(G);case T:e:{for(ve=Q.key;I!==null;){if(I.key===ve)if(I.tag===4&&I.stateNode.containerInfo===Q.containerInfo&&I.stateNode.implementation===Q.implementation){s(G,I.sibling),ae=f(I,Q.children||[]),ae.return=G,G=ae;break e}else{s(G,I);break}else r(G,I);I=I.sibling}ae=Uu(Q,G.mode,ae),ae.return=G,G=ae}return x(G);case V:return Q=ia(Q),Pe(G,I,Q,ae)}if(P(Q))return fe(G,I,Q,ae);if(W(Q)){if(ve=W(Q),typeof ve!="function")throw Error(i(150));return Q=ve.call(Q),be(G,I,Q,ae)}if(typeof Q.then=="function")return Pe(G,I,sl(Q),ae);if(Q.$$typeof===w)return Pe(G,I,nl(G,Q),ae);ol(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,I!==null&&I.tag===6?(s(G,I.sibling),ae=f(I,Q),ae.return=G,G=ae):(s(G,I),ae=$u(Q,G.mode,ae),ae.return=G,G=ae),x(G)):s(G,I)}return function(G,I,Q,ae){try{fs=0;var ve=Pe(G,I,Q,ae);return ni=null,ve}catch(ge){if(ge===ti||ge===al)throw ge;var ze=It(29,ge,null,G.mode);return ze.lanes=ae,ze.return=G,ze}finally{}}}var oa=Bg(!0),Ig=Bg(!1),yr=!1;function Zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qu(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function br(t,r,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Le&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Fo(t),Eg(t,null,s),r}return Jo(t,l,r,s),Fo(t)}function gs(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,s|=l,r.lanes=s,Ro(t,s)}}function Ju(t,r){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var x={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,s=s.next}while(s!==null);m===null?f=m=r:m=m.next=r}else f=m=r;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}var Fu=!1;function ms(){if(Fu){var t=ei;if(t!==null)throw t}}function ps(t,r,s,l){Fu=!1;var f=t.updateQueue;yr=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var H=N,J=H.next;H.next=null,x===null?m=J:x.next=J,x=H;var re=t.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==x&&(N===null?re.firstBaseUpdate=J:N.next=J,re.lastBaseUpdate=H))}if(m!==null){var ie=f.baseState;x=0,re=J=H=null,N=m;do{var F=N.lane&-536870913,te=F!==N.lane;if(te?(Me&F)===F:(l&F)===F){F!==0&&F===Wa&&(Fu=!0),re!==null&&(re=re.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var fe=t,be=N;F=r;var Pe=s;switch(be.tag){case 1:if(fe=be.payload,typeof fe=="function"){ie=fe.call(Pe,ie,F);break e}ie=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=be.payload,F=typeof fe=="function"?fe.call(Pe,ie,F):fe,F==null)break e;ie=v({},ie,F);break e;case 2:yr=!0}}F=N.callback,F!==null&&(t.flags|=64,te&&(t.flags|=8192),te=f.callbacks,te===null?f.callbacks=[F]:te.push(F))}else te={lane:F,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(J=re=te,H=ie):re=re.next=te,x|=F;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;te=N,N=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);re===null&&(H=ie),f.baseState=H,f.firstBaseUpdate=J,f.lastBaseUpdate=re,m===null&&(f.shared.lanes=0),Er|=x,t.lanes=x,t.memoizedState=ie}}function qg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Vg(t,r){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)qg(s[t],r)}var ri=O(null),ll=O(0);function Pg(t,r){t=Zn,K(ll,t),K(ri,r),Zn=t|r.baseLanes}function Wu(){K(ll,Zn),K(ri,ri.current)}function ed(){Zn=ll.current,D(ri),D(ll)}var qt=O(null),an=null;function wr(t){var r=t.alternate;K(nt,nt.current&1),K(qt,t),an===null&&(r===null||ri.current!==null||r.memoizedState!==null)&&(an=t)}function td(t){K(nt,nt.current),K(qt,t),an===null&&(an=t)}function Gg(t){t.tag===22?(K(nt,nt.current),K(qt,t),an===null&&(an=t)):xr()}function xr(){K(nt,nt.current),K(qt,qt.current)}function Vt(t){D(qt),an===t&&(an=null),D(nt)}var nt=O(0);function cl(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||lf(s)||cf(s)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var In=0,Ae=null,qe=null,st=null,ul=!1,ai=!1,la=!1,dl=0,ys=0,ii=null,e_=0;function We(){throw Error(i(321))}function nd(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!Bt(t[s],r[s]))return!1;return!0}function rd(t,r,s,l,f,m){return In=m,Ae=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,M.H=t===null||t.memoizedState===null?Nm:vd,la=!1,m=s(l,f),la=!1,ai&&(m=Xg(r,s,l,f)),Yg(t),m}function Yg(t){M.H=ws;var r=qe!==null&&qe.next!==null;if(In=0,st=qe=Ae=null,ul=!1,ys=0,ii=null,r)throw Error(i(300));t===null||ot||(t=t.dependencies,t!==null&&tl(t)&&(ot=!0))}function Xg(t,r,s,l){Ae=t;var f=0;do{if(ai&&(ii=null),ys=0,ai=!1,25<=f)throw Error(i(301));if(f+=1,st=qe=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=Om,m=r(s,l)}while(ai);return m}function t_(){var t=M.H,r=t.useState()[0];return r=typeof r.then=="function"?vs(r):r,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(Ae.flags|=1024),r}function ad(){var t=dl!==0;return dl=0,t}function id(t,r,s){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~s}function sd(t){if(ul){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ul=!1}In=0,st=qe=Ae=null,ai=!1,ys=dl=0,ii=null}function Ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ae.memoizedState=st=t:st=st.next=t,st}function rt(){if(qe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var r=st===null?Ae.memoizedState:st.next;if(r!==null)st=r,qe=t;else{if(t===null)throw Ae.alternate===null?Error(i(467)):Error(i(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},st===null?Ae.memoizedState=st=t:st=st.next=t}return st}function fl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vs(t){var r=ys;return ys+=1,ii===null&&(ii=[]),t=Ug(ii,t,r),r=Ae,(st===null?r.memoizedState:st.next)===null&&(r=r.alternate,M.H=r===null||r.memoizedState===null?Nm:vd),t}function hl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vs(t);if(t.$$typeof===w)return bt(t)}throw Error(i(438,String(t)))}function od(t){var r=null,s=Ae.updateQueue;if(s!==null&&(r=s.memoCache),r==null){var l=Ae.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),s===null&&(s=fl(),Ae.updateQueue=s),s.memoCache=r,s=r.data[r.index],s===void 0)for(s=r.data[r.index]=Array(t),l=0;l<t;l++)s[l]=oe;return r.index++,s}function qn(t,r){return typeof r=="function"?r(t):r}function gl(t){var r=rt();return ld(r,qe,t)}function ld(t,r,s){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var N=x=null,H=null,J=r,re=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?(Me&ie)===ie:(In&ie)===ie){var F=J.revertLane;if(F===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===Wa&&(re=!0);else if((In&F)===F){J=J.next,F===Wa&&(re=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},H===null?(N=H=ie,x=m):H=H.next=ie,Ae.lanes|=F,Er|=F;ie=J.action,la&&s(m,ie),m=J.hasEagerState?J.eagerState:s(m,ie)}else F={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},H===null?(N=H=F,x=m):H=H.next=F,Ae.lanes|=ie,Er|=ie;J=J.next}while(J!==null&&J!==r);if(H===null?x=m:H.next=N,!Bt(m,t.memoizedState)&&(ot=!0,re&&(s=ei,s!==null)))throw s;t.memoizedState=m,t.baseState=x,t.baseQueue=H,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function cd(t){var r=rt(),s=r.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var l=s.dispatch,f=s.pending,m=r.memoizedState;if(f!==null){s.pending=null;var x=f=f.next;do m=t(m,x.action),x=x.next;while(x!==f);Bt(m,r.memoizedState)||(ot=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),s.lastRenderedState=m}return[m,l]}function Kg(t,r,s){var l=Ae,f=rt(),m=je;if(m){if(s===void 0)throw Error(i(407));s=s()}else s=r();var x=!Bt((qe||f).memoizedState,s);if(x&&(f.memoizedState=s,ot=!0),f=f.queue,fd(Jg.bind(null,l,f,t),[t]),f.getSnapshot!==r||x||st!==null&&st.memoizedState.tag&1){if(l.flags|=2048,si(9,{destroy:void 0},Qg.bind(null,l,f,s,r),null),Ye===null)throw Error(i(349));m||(In&127)!==0||Zg(l,r,s)}return s}function Zg(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=Ae.updateQueue,r===null?(r=fl(),Ae.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Qg(t,r,s,l){r.value=s,r.getSnapshot=l,Fg(r)&&Wg(t)}function Jg(t,r,s){return s(function(){Fg(r)&&Wg(t)})}function Fg(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!Bt(t,s)}catch{return!0}}function Wg(t){var r=Wr(t,2);r!==null&&$t(r,t,2)}function ud(t){var r=Ot();if(typeof t=="function"){var s=t;if(t=s(),la){xn(!0);try{s()}finally{xn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:t},r}function em(t,r,s,l){return t.baseState=s,ld(t,qe,typeof l=="function"?l:qn)}function n_(t,r,s,l,f){if(yl(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};M.T!==null?s(!0):m.isTransition=!1,l(m),s=r.pending,s===null?(m.next=r.pending=m,tm(r,m)):(m.next=s.next,r.pending=s.next=m)}}function tm(t,r){var s=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=M.T,x={};M.T=x;try{var N=s(f,l),H=M.S;H!==null&&H(x,N),nm(t,r,N)}catch(J){dd(t,r,J)}finally{m!==null&&x.types!==null&&(m.types=x.types),M.T=m}}else try{m=s(f,l),nm(t,r,m)}catch(J){dd(t,r,J)}}function nm(t,r,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){rm(t,r,l)},function(l){return dd(t,r,l)}):rm(t,r,s)}function rm(t,r,s){r.status="fulfilled",r.value=s,am(r),t.state=s,r=t.pending,r!==null&&(s=r.next,s===r?t.pending=null:(s=s.next,r.next=s,tm(t,s)))}function dd(t,r,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=s,am(r),r=r.next;while(r!==l)}t.action=null}function am(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function im(t,r){return r}function sm(t,r){if(je){var s=Ye.formState;if(s!==null){e:{var l=Ae;if(je){if(Ke){t:{for(var f=Ke,m=rn;f.nodeType!==8;){if(!m){f=null;break t}if(f=sn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ke=sn(f.nextSibling),l=f.data==="F!";break e}}mr(l)}l=!1}l&&(r=s[0])}}return s=Ot(),s.memoizedState=s.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:im,lastRenderedState:r},s.queue=l,s=Tm.bind(null,Ae,l),l.dispatch=s,l=ud(!1),m=yd.bind(null,Ae,!1,l.queue),l=Ot(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,s=n_.bind(null,Ae,f,m,s),f.dispatch=s,l.memoizedState=t,[r,s,!1]}function om(t){var r=rt();return lm(r,qe,t)}function lm(t,r,s){if(r=ld(t,r,im)[0],t=gl(qn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=vs(r)}catch(x){throw x===ti?al:x}else l=r;r=rt();var f=r.queue,m=f.dispatch;return s!==r.memoizedState&&(Ae.flags|=2048,si(9,{destroy:void 0},r_.bind(null,f,s),null)),[l,m,t]}function r_(t,r){t.action=r}function cm(t){var r=rt(),s=qe;if(s!==null)return lm(r,s,t);rt(),r=r.memoizedState,s=rt();var l=s.queue.dispatch;return s.memoizedState=t,[r,l,!1]}function si(t,r,s,l){return t={tag:t,create:s,deps:l,inst:r,next:null},r=Ae.updateQueue,r===null&&(r=fl(),Ae.updateQueue=r),s=r.lastEffect,s===null?r.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,r.lastEffect=t),t}function um(){return rt().memoizedState}function ml(t,r,s,l){var f=Ot();Ae.flags|=t,f.memoizedState=si(1|r,{destroy:void 0},s,l===void 0?null:l)}function pl(t,r,s,l){var f=rt();l=l===void 0?null:l;var m=f.memoizedState.inst;qe!==null&&l!==null&&nd(l,qe.memoizedState.deps)?f.memoizedState=si(r,m,s,l):(Ae.flags|=t,f.memoizedState=si(1|r,m,s,l))}function dm(t,r){ml(8390656,8,t,r)}function fd(t,r){pl(2048,8,t,r)}function a_(t){Ae.flags|=4;var r=Ae.updateQueue;if(r===null)r=fl(),Ae.updateQueue=r,r.events=[t];else{var s=r.events;s===null?r.events=[t]:s.push(t)}}function fm(t){var r=rt().memoizedState;return a_({ref:r,nextImpl:t}),function(){if((Le&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function hm(t,r){return pl(4,2,t,r)}function gm(t,r){return pl(4,4,t,r)}function mm(t,r){if(typeof r=="function"){t=t();var s=r(t);return function(){typeof s=="function"?s():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function pm(t,r,s){s=s!=null?s.concat([t]):null,pl(4,4,mm.bind(null,r,t),s)}function hd(){}function ym(t,r){var s=rt();r=r===void 0?null:r;var l=s.memoizedState;return r!==null&&nd(r,l[1])?l[0]:(s.memoizedState=[t,r],t)}function vm(t,r){var s=rt();r=r===void 0?null:r;var l=s.memoizedState;if(r!==null&&nd(r,l[1]))return l[0];if(l=t(),la){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,r],l}function gd(t,r,s){return s===void 0||(In&1073741824)!==0&&(Me&261930)===0?t.memoizedState=r:(t.memoizedState=s,t=bp(),Ae.lanes|=t,Er|=t,s)}function bm(t,r,s,l){return Bt(s,r)?s:ri.current!==null?(t=gd(t,s,l),Bt(t,r)||(ot=!0),t):(In&42)===0||(In&1073741824)!==0&&(Me&261930)===0?(ot=!0,t.memoizedState=s):(t=bp(),Ae.lanes|=t,Er|=t,r)}function wm(t,r,s,l,f){var m=L.p;L.p=m!==0&&8>m?m:8;var x=M.T,N={};M.T=N,yd(t,!1,r,s);try{var H=f(),J=M.S;if(J!==null&&J(N,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var re=Wx(H,l);bs(t,r,re,Yt(t))}else bs(t,r,l,Yt(t))}catch(ie){bs(t,r,{then:function(){},status:"rejected",reason:ie},Yt())}finally{L.p=m,x!==null&&N.types!==null&&(x.types=N.types),M.T=x}}function i_(){}function md(t,r,s,l){if(t.tag!==5)throw Error(i(476));var f=xm(t).queue;wm(t,f,r,B,s===null?i_:function(){return _m(t),s(l)})}function xm(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:B},next:null};var s={};return r.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:s},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function _m(t){var r=xm(t);r.next===null&&(r=t.alternate.memoizedState),bs(t,r.next.queue,{},Yt())}function pd(){return bt($s)}function Sm(){return rt().memoizedState}function Em(){return rt().memoizedState}function s_(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var s=Yt();t=vr(s);var l=br(r,t,s);l!==null&&($t(l,r,s),gs(l,r,s)),r={cache:Gu()},t.payload=r;return}r=r.return}}function o_(t,r,s){var l=Yt();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},yl(t)?Cm(r,s):(s=Du(t,r,s,l),s!==null&&($t(s,t,l),Am(s,r,l)))}function Tm(t,r,s){var l=Yt();bs(t,r,s,l)}function bs(t,r,s,l){var f={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(yl(t))Cm(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,N=m(x,s);if(f.hasEagerState=!0,f.eagerState=N,Bt(N,x))return Jo(t,r,f,0),Ye===null&&Qo(),!1}catch{}finally{}if(s=Du(t,r,f,l),s!==null)return $t(s,t,l),Am(s,r,l),!0}return!1}function yd(t,r,s,l){if(l={lane:2,revertLane:Zd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yl(t)){if(r)throw Error(i(479))}else r=Du(t,s,l,2),r!==null&&$t(r,t,2)}function yl(t){var r=t.alternate;return t===Ae||r!==null&&r===Ae}function Cm(t,r){ai=ul=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function Am(t,r,s){if((s&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,s|=l,r.lanes=s,Ro(t,s)}}var ws={readContext:bt,use:hl,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};ws.useEffectEvent=We;var Nm={readContext:bt,use:hl,useCallback:function(t,r){return Ot().memoizedState=[t,r===void 0?null:r],t},useContext:bt,useEffect:dm,useImperativeHandle:function(t,r,s){s=s!=null?s.concat([t]):null,ml(4194308,4,mm.bind(null,r,t),s)},useLayoutEffect:function(t,r){return ml(4194308,4,t,r)},useInsertionEffect:function(t,r){ml(4,2,t,r)},useMemo:function(t,r){var s=Ot();r=r===void 0?null:r;var l=t();if(la){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,r],l},useReducer:function(t,r,s){var l=Ot();if(s!==void 0){var f=s(r);if(la){xn(!0);try{s(r)}finally{xn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=o_.bind(null,Ae,t),[l.memoizedState,t]},useRef:function(t){var r=Ot();return t={current:t},r.memoizedState=t},useState:function(t){t=ud(t);var r=t.queue,s=Tm.bind(null,Ae,r);return r.dispatch=s,[t.memoizedState,s]},useDebugValue:hd,useDeferredValue:function(t,r){var s=Ot();return gd(s,t,r)},useTransition:function(){var t=ud(!1);return t=wm.bind(null,Ae,t.queue,!0,!1),Ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,s){var l=Ae,f=Ot();if(je){if(s===void 0)throw Error(i(407));s=s()}else{if(s=r(),Ye===null)throw Error(i(349));(Me&127)!==0||Zg(l,r,s)}f.memoizedState=s;var m={value:s,getSnapshot:r};return f.queue=m,dm(Jg.bind(null,l,m,t),[t]),l.flags|=2048,si(9,{destroy:void 0},Qg.bind(null,l,m,s,r),null),s},useId:function(){var t=Ot(),r=Ye.identifierPrefix;if(je){var s=En,l=Sn;s=(l&~(1<<32-Nt(l)-1)).toString(32)+s,r="_"+r+"R_"+s,s=dl++,0<s&&(r+="H"+s.toString(32)),r+="_"}else s=e_++,r="_"+r+"r_"+s.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:pd,useFormState:sm,useActionState:sm,useOptimistic:function(t){var r=Ot();r.memoizedState=r.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=s,r=yd.bind(null,Ae,!0,s),s.dispatch=r,[t,r]},useMemoCache:od,useCacheRefresh:function(){return Ot().memoizedState=s_.bind(null,Ae)},useEffectEvent:function(t){var r=Ot(),s={impl:t};return r.memoizedState=s,function(){if((Le&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},vd={readContext:bt,use:hl,useCallback:ym,useContext:bt,useEffect:fd,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:gm,useMemo:vm,useReducer:gl,useRef:um,useState:function(){return gl(qn)},useDebugValue:hd,useDeferredValue:function(t,r){var s=rt();return bm(s,qe.memoizedState,t,r)},useTransition:function(){var t=gl(qn)[0],r=rt().memoizedState;return[typeof t=="boolean"?t:vs(t),r]},useSyncExternalStore:Kg,useId:Sm,useHostTransitionStatus:pd,useFormState:om,useActionState:om,useOptimistic:function(t,r){var s=rt();return em(s,qe,t,r)},useMemoCache:od,useCacheRefresh:Em};vd.useEffectEvent=fm;var Om={readContext:bt,use:hl,useCallback:ym,useContext:bt,useEffect:fd,useImperativeHandle:pm,useInsertionEffect:hm,useLayoutEffect:gm,useMemo:vm,useReducer:cd,useRef:um,useState:function(){return cd(qn)},useDebugValue:hd,useDeferredValue:function(t,r){var s=rt();return qe===null?gd(s,t,r):bm(s,qe.memoizedState,t,r)},useTransition:function(){var t=cd(qn)[0],r=rt().memoizedState;return[typeof t=="boolean"?t:vs(t),r]},useSyncExternalStore:Kg,useId:Sm,useHostTransitionStatus:pd,useFormState:cm,useActionState:cm,useOptimistic:function(t,r){var s=rt();return qe!==null?em(s,qe,t,r):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:od,useCacheRefresh:Em};Om.useEffectEvent=fm;function bd(t,r,s,l){r=t.memoizedState,s=s(l,r),s=s==null?r:v({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var wd={enqueueSetState:function(t,r,s){t=t._reactInternals;var l=Yt(),f=vr(l);f.payload=r,s!=null&&(f.callback=s),r=br(t,f,l),r!==null&&($t(r,t,l),gs(r,t,l))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var l=Yt(),f=vr(l);f.tag=1,f.payload=r,s!=null&&(f.callback=s),r=br(t,f,l),r!==null&&($t(r,t,l),gs(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Yt(),l=vr(s);l.tag=2,r!=null&&(l.callback=r),r=br(t,l,s),r!==null&&($t(r,t,s),gs(r,t,s))}};function Rm(t,r,s,l,f,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):r.prototype&&r.prototype.isPureReactComponent?!ss(s,l)||!ss(f,m):!0}function Mm(t,r,s,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,l),r.state!==t&&wd.enqueueReplaceState(r,r.state,null)}function ca(t,r){var s=r;if("ref"in r){s={};for(var l in r)l!=="ref"&&(s[l]=r[l])}if(t=t.defaultProps){s===r&&(s=v({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}function km(t){Zo(t)}function jm(t){console.error(t)}function Dm(t){Zo(t)}function vl(t,r){try{var s=t.onUncaughtError;s(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function zm(t,r,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xd(t,r,s){return s=vr(s),s.tag=3,s.payload={element:null},s.callback=function(){vl(t,r)},s}function $m(t){return t=vr(t),t.tag=3,t}function Um(t,r,s,l){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){zm(r,s,l)}}var x=s.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){zm(r,s,l),typeof f!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function l_(t,r,s,l,f){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=s.alternate,r!==null&&Fa(r,s,f,!0),s=qt.current,s!==null){switch(s.tag){case 31:case 13:return an===null?Rl():s.alternate===null&&et===0&&(et=3),s.flags&=-257,s.flags|=65536,s.lanes=f,l===il?s.flags|=16384:(r=s.updateQueue,r===null?s.updateQueue=new Set([l]):r.add(l),Yd(t,l,f)),!1;case 22:return s.flags|=65536,l===il?s.flags|=16384:(r=s.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=r):(s=r.retryQueue,s===null?r.retryQueue=new Set([l]):s.add(l)),Yd(t,l,f)),!1}throw Error(i(435,s.tag))}return Yd(t,l,f),Rl(),!1}if(je)return r=qt.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Bu&&(t=Error(i(422),{cause:l}),cs(en(t,s)))):(l!==Bu&&(r=Error(i(423),{cause:l}),cs(en(r,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=en(l,s),f=xd(t.stateNode,l,f),Ju(t,f),et!==4&&(et=2)),!1;var m=Error(i(520),{cause:l});if(m=en(m,s),Ns===null?Ns=[m]:Ns.push(m),et!==4&&(et=2),r===null)return!0;l=en(l,s),s=r;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=xd(s.stateNode,l,t),Ju(s,t),!1;case 1:if(r=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Tr===null||!Tr.has(m))))return s.flags|=65536,f&=-f,s.lanes|=f,f=$m(f),Um(f,t,s,l),Ju(s,f),!1}s=s.return}while(s!==null);return!1}var _d=Error(i(461)),ot=!1;function wt(t,r,s,l){r.child=t===null?Ig(r,null,s,l):oa(r,t.child,s,l)}function Lm(t,r,s,l,f){s=s.render;var m=r.ref;if("ref"in l){var x={};for(var N in l)N!=="ref"&&(x[N]=l[N])}else x=l;return ra(r),l=rd(t,r,s,x,m,f),N=ad(),t!==null&&!ot?(id(t,r,f),Vn(t,r,f)):(je&&N&&Lu(r),r.flags|=1,wt(t,r,l,f),r.child)}function Hm(t,r,s,l,f){if(t===null){var m=s.type;return typeof m=="function"&&!zu(m)&&m.defaultProps===void 0&&s.compare===null?(r.tag=15,r.type=m,Bm(t,r,m,l,f)):(t=Wo(s.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Rd(t,f)){var x=m.memoizedProps;if(s=s.compare,s=s!==null?s:ss,s(x,l)&&t.ref===r.ref)return Vn(t,r,f)}return r.flags|=1,t=Un(m,l),t.ref=r.ref,t.return=r,r.child=t}function Bm(t,r,s,l,f){if(t!==null){var m=t.memoizedProps;if(ss(m,l)&&t.ref===r.ref)if(ot=!1,r.pendingProps=l=m,Rd(t,f))(t.flags&131072)!==0&&(ot=!0);else return r.lanes=t.lanes,Vn(t,r,f)}return Sd(t,r,s,l,f)}function Im(t,r,s,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|s:s,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,r.child=null;return qm(t,r,m,s,l)}if((s&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&rl(r,m!==null?m.cachePool:null),m!==null?Pg(r,m):Wu(),Gg(r);else return l=r.lanes=536870912,qm(t,r,m!==null?m.baseLanes|s:s,s,l)}else m!==null?(rl(r,m.cachePool),Pg(r,m),xr(),r.memoizedState=null):(t!==null&&rl(r,null),Wu(),xr());return wt(t,r,f,s),r.child}function xs(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function qm(t,r,s,l,f){var m=Xu();return m=m===null?null:{parent:it._currentValue,pool:m},r.memoizedState={baseLanes:s,cachePool:m},t!==null&&rl(r,null),Wu(),Gg(r),t!==null&&Fa(t,r,l,!0),r.childLanes=f,null}function bl(t,r){return r=xl({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Vm(t,r,s){return oa(r,t.child,null,s),t=bl(r,r.pendingProps),t.flags|=2,Vt(r),r.memoizedState=null,t}function c_(t,r,s){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(je){if(l.mode==="hidden")return t=bl(r,l),r.lanes=536870912,xs(null,t);if(td(r),(t=Ke)?(t=t0(t,rn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:hr!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},s=Cg(t),s.return=r,r.child=s,vt=r,Ke=null)):t=null,t===null)throw mr(r);return r.lanes=536870912,null}return bl(r,l)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(td(r),f)if(r.flags&256)r.flags&=-257,r=Vm(t,r,s);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(ot||Fa(t,r,s,!1),f=(s&t.childLanes)!==0,ot||f){if(l=Ye,l!==null&&(x=Mo(l,s),x!==0&&x!==m.retryLane))throw m.retryLane=x,Wr(t,x),$t(l,t,x),_d;Rl(),r=Vm(t,r,s)}else t=m.treeContext,Ke=sn(x.nextSibling),vt=r,je=!0,gr=null,rn=!1,t!==null&&Og(r,t),r=bl(r,l),r.flags|=4096;return r}return t=Un(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function wl(t,r){var s=r.ref;if(s===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(t===null||t.ref!==s)&&(r.flags|=4194816)}}function Sd(t,r,s,l,f){return ra(r),s=rd(t,r,s,l,void 0,f),l=ad(),t!==null&&!ot?(id(t,r,f),Vn(t,r,f)):(je&&l&&Lu(r),r.flags|=1,wt(t,r,s,f),r.child)}function Pm(t,r,s,l,f,m){return ra(r),r.updateQueue=null,s=Xg(r,l,s,f),Yg(t),l=ad(),t!==null&&!ot?(id(t,r,m),Vn(t,r,m)):(je&&l&&Lu(r),r.flags|=1,wt(t,r,s,m),r.child)}function Gm(t,r,s,l,f){if(ra(r),r.stateNode===null){var m=Ka,x=s.contextType;typeof x=="object"&&x!==null&&(m=bt(x)),m=new s(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=wd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Zu(r),x=s.contextType,m.context=typeof x=="object"&&x!==null?bt(x):Ka,m.state=r.memoizedState,x=s.getDerivedStateFromProps,typeof x=="function"&&(bd(r,s,x,l),m.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&wd.enqueueReplaceState(m,m.state,null),ps(r,l,m,f),ms(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var N=r.memoizedProps,H=ca(s,N);m.props=H;var J=m.context,re=s.contextType;x=Ka,typeof re=="object"&&re!==null&&(x=bt(re));var ie=s.getDerivedStateFromProps;re=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,re||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||J!==x)&&Mm(r,m,l,x),yr=!1;var F=r.memoizedState;m.state=F,ps(r,l,m,f),ms(),J=r.memoizedState,N||F!==J||yr?(typeof ie=="function"&&(bd(r,s,ie,l),J=r.memoizedState),(H=yr||Rm(r,s,H,l,F,J,x))?(re||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=J),m.props=l,m.state=J,m.context=x,l=H):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Qu(t,r),x=r.memoizedProps,re=ca(s,x),m.props=re,ie=r.pendingProps,F=m.context,J=s.contextType,H=Ka,typeof J=="object"&&J!==null&&(H=bt(J)),N=s.getDerivedStateFromProps,(J=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==ie||F!==H)&&Mm(r,m,l,H),yr=!1,F=r.memoizedState,m.state=F,ps(r,l,m,f),ms();var te=r.memoizedState;x!==ie||F!==te||yr||t!==null&&t.dependencies!==null&&tl(t.dependencies)?(typeof N=="function"&&(bd(r,s,N,l),te=r.memoizedState),(re=yr||Rm(r,s,re,l,F,te,H)||t!==null&&t.dependencies!==null&&tl(t.dependencies))?(J||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,te,H),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,te,H)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=te),m.props=l,m.state=te,m.context=H,l=re):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,wl(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=oa(r,t.child,null,f),r.child=oa(r,null,s,f)):wt(t,r,s,f),r.memoizedState=m.state,t=r.child):t=Vn(t,r,f),t}function Ym(t,r,s,l){return ta(),r.flags|=256,wt(t,r,s,l),r.child}var Ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Td(t){return{baseLanes:t,cachePool:zg()}}function Cd(t,r,s){return t=t!==null?t.childLanes&~s:0,r&&(t|=Gt),t}function Xm(t,r,s){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),x&&(f=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,t===null){if(je){if(f?wr(r):xr(),(t=Ke)?(t=t0(t,rn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:hr!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},s=Cg(t),s.return=r,r.child=s,vt=r,Ke=null)):t=null,t===null)throw mr(r);return cf(t)?r.lanes=32:r.lanes=536870912,null}var N=l.children;return l=l.fallback,f?(xr(),f=r.mode,N=xl({mode:"hidden",children:N},f),l=ea(l,f,s,null),N.return=r,l.return=r,N.sibling=l,r.child=N,l=r.child,l.memoizedState=Td(s),l.childLanes=Cd(t,x,s),r.memoizedState=Ed,xs(null,l)):(wr(r),Ad(r,N))}var H=t.memoizedState;if(H!==null&&(N=H.dehydrated,N!==null)){if(m)r.flags&256?(wr(r),r.flags&=-257,r=Nd(t,r,s)):r.memoizedState!==null?(xr(),r.child=t.child,r.flags|=128,r=null):(xr(),N=l.fallback,f=r.mode,l=xl({mode:"visible",children:l.children},f),N=ea(N,f,s,null),N.flags|=2,l.return=r,N.return=r,l.sibling=N,r.child=l,oa(r,t.child,null,s),l=r.child,l.memoizedState=Td(s),l.childLanes=Cd(t,x,s),r.memoizedState=Ed,r=xs(null,l));else if(wr(r),cf(N)){if(x=N.nextSibling&&N.nextSibling.dataset,x)var J=x.dgst;x=J,l=Error(i(419)),l.stack="",l.digest=x,cs({value:l,source:null,stack:null}),r=Nd(t,r,s)}else if(ot||Fa(t,r,s,!1),x=(s&t.childLanes)!==0,ot||x){if(x=Ye,x!==null&&(l=Mo(x,s),l!==0&&l!==H.retryLane))throw H.retryLane=l,Wr(t,l),$t(x,t,l),_d;lf(N)||Rl(),r=Nd(t,r,s)}else lf(N)?(r.flags|=192,r.child=t.child,r=null):(t=H.treeContext,Ke=sn(N.nextSibling),vt=r,je=!0,gr=null,rn=!1,t!==null&&Og(r,t),r=Ad(r,l.children),r.flags|=4096);return r}return f?(xr(),N=l.fallback,f=r.mode,H=t.child,J=H.sibling,l=Un(H,{mode:"hidden",children:l.children}),l.subtreeFlags=H.subtreeFlags&65011712,J!==null?N=Un(J,N):(N=ea(N,f,s,null),N.flags|=2),N.return=r,l.return=r,l.sibling=N,r.child=l,xs(null,l),l=r.child,N=t.child.memoizedState,N===null?N=Td(s):(f=N.cachePool,f!==null?(H=it._currentValue,f=f.parent!==H?{parent:H,pool:H}:f):f=zg(),N={baseLanes:N.baseLanes|s,cachePool:f}),l.memoizedState=N,l.childLanes=Cd(t,x,s),r.memoizedState=Ed,xs(t.child,l)):(wr(r),s=t.child,t=s.sibling,s=Un(s,{mode:"visible",children:l.children}),s.return=r,s.sibling=null,t!==null&&(x=r.deletions,x===null?(r.deletions=[t],r.flags|=16):x.push(t)),r.child=s,r.memoizedState=null,s)}function Ad(t,r){return r=xl({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function xl(t,r){return t=It(22,t,null,r),t.lanes=0,t}function Nd(t,r,s){return oa(r,t.child,null,s),t=Ad(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Km(t,r,s){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Vu(t.return,r,s)}function Od(t,r,s,l,f,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f,treeForkCount:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=s,x.tailMode=f,x.treeForkCount=m)}function Zm(t,r,s){var l=r.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var x=nt.current,N=(x&2)!==0;if(N?(x=x&1|2,r.flags|=128):x&=1,K(nt,x),wt(t,r,l,s),l=je?ls:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Km(t,s,r);else if(t.tag===19)Km(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(s=r.child,f=null;s!==null;)t=s.alternate,t!==null&&cl(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=r.child,r.child=null):(f=s.sibling,s.sibling=null),Od(r,!1,f,s,m,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&cl(t)===null){r.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}Od(r,!0,s,null,m,l);break;case"together":Od(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Vn(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Er|=r.lanes,(s&r.childLanes)===0)if(t!==null){if(Fa(t,r,s,!1),(s&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,s=Un(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=Un(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function Rd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&tl(t)))}function u_(t,r,s){switch(r.tag){case 3:le(r,r.stateNode.containerInfo),pr(r,it,t.memoizedState.cache),ta();break;case 27:case 5:Te(r);break;case 4:le(r,r.stateNode.containerInfo);break;case 10:pr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,td(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(wr(r),r.flags|=128,null):(s&r.child.childLanes)!==0?Xm(t,r,s):(wr(r),t=Vn(t,r,s),t!==null?t.sibling:null);wr(r);break;case 19:var f=(t.flags&128)!==0;if(l=(s&r.childLanes)!==0,l||(Fa(t,r,s,!1),l=(s&r.childLanes)!==0),f){if(l)return Zm(t,r,s);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),K(nt,nt.current),l)break;return null;case 22:return r.lanes=0,Im(t,r,s,r.pendingProps);case 24:pr(r,it,t.memoizedState.cache)}return Vn(t,r,s)}function Qm(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps)ot=!0;else{if(!Rd(t,s)&&(r.flags&128)===0)return ot=!1,u_(t,r,s);ot=(t.flags&131072)!==0}else ot=!1,je&&(r.flags&1048576)!==0&&Ng(r,ls,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=ia(r.elementType),r.type=t,typeof t=="function")zu(t)?(l=ca(t,l),r.tag=1,r=Gm(null,r,t,l,s)):(r.tag=0,r=Sd(null,r,t,l,s));else{if(t!=null){var f=t.$$typeof;if(f===A){r.tag=11,r=Lm(null,r,t,l,s);break e}else if(f===U){r.tag=14,r=Hm(null,r,t,l,s);break e}}throw r=k(t)||t,Error(i(306,r,""))}}return r;case 0:return Sd(t,r,r.type,r.pendingProps,s);case 1:return l=r.type,f=ca(l,r.pendingProps),Gm(t,r,l,f,s);case 3:e:{if(le(r,r.stateNode.containerInfo),t===null)throw Error(i(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,Qu(t,r),ps(r,l,null,s);var x=r.memoizedState;if(l=x.cache,pr(r,it,l),l!==m.cache&&Pu(r,[it],s,!0),ms(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Ym(t,r,l,s);break e}else if(l!==f){f=en(Error(i(424)),r),cs(f),r=Ym(t,r,l,s);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ke=sn(t.firstChild),vt=r,je=!0,gr=null,rn=!0,s=Ig(r,null,l,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ta(),l===f){r=Vn(t,r,s);break e}wt(t,r,l,s)}r=r.child}return r;case 26:return wl(t,r),t===null?(s=o0(r.type,null,r.pendingProps,null))?r.memoizedState=s:je||(s=r.type,t=r.pendingProps,l=Ul(ue.current).createElement(s),l[dt]=r,l[Et]=t,xt(l,s,t),at(l),r.stateNode=l):r.memoizedState=o0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Te(r),t===null&&je&&(l=r.stateNode=a0(r.type,r.pendingProps,ue.current),vt=r,rn=!0,f=Ke,Or(r.type)?(uf=f,Ke=sn(l.firstChild)):Ke=f),wt(t,r,r.pendingProps.children,s),wl(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&je&&((f=l=Ke)&&(l=B_(l,r.type,r.pendingProps,rn),l!==null?(r.stateNode=l,vt=r,Ke=sn(l.firstChild),rn=!1,f=!0):f=!1),f||mr(r)),Te(r),f=r.type,m=r.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,af(f,m)?l=null:x!==null&&af(f,x)&&(r.flags|=32),r.memoizedState!==null&&(f=rd(t,r,t_,null,null,s),$s._currentValue=f),wl(t,r),wt(t,r,l,s),r.child;case 6:return t===null&&je&&((t=s=Ke)&&(s=I_(s,r.pendingProps,rn),s!==null?(r.stateNode=s,vt=r,Ke=null,t=!0):t=!1),t||mr(r)),null;case 13:return Xm(t,r,s);case 4:return le(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=oa(r,null,l,s):wt(t,r,l,s),r.child;case 11:return Lm(t,r,r.type,r.pendingProps,s);case 7:return wt(t,r,r.pendingProps,s),r.child;case 8:return wt(t,r,r.pendingProps.children,s),r.child;case 12:return wt(t,r,r.pendingProps.children,s),r.child;case 10:return l=r.pendingProps,pr(r,r.type,l.value),wt(t,r,l.children,s),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,ra(r),f=bt(f),l=l(f),r.flags|=1,wt(t,r,l,s),r.child;case 14:return Hm(t,r,r.type,r.pendingProps,s);case 15:return Bm(t,r,r.type,r.pendingProps,s);case 19:return Zm(t,r,s);case 31:return c_(t,r,s);case 22:return Im(t,r,s,r.pendingProps);case 24:return ra(r),l=bt(it),t===null?(f=Xu(),f===null&&(f=Ye,m=Gu(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=s),f=m),r.memoizedState={parent:l,cache:f},Zu(r),pr(r,it,f)):((t.lanes&s)!==0&&(Qu(t,r),ps(r,null,null,s),ms()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),pr(r,it,l)):(l=m.cache,pr(r,it,l),l!==f.cache&&Pu(r,[it],s,!0))),wt(t,r,r.pendingProps.children,s),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Pn(t){t.flags|=4}function Md(t,r,s,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Sp())t.flags|=8192;else throw sa=il,Ku}else t.flags&=-16777217}function Jm(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!f0(r))if(Sp())t.flags|=8192;else throw sa=il,Ku}function _l(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?No():536870912,t.lanes|=r,ui|=r)}function _s(t,r){if(!je)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ze(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(r)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=s,r}function d_(t,r,s){var l=r.pendingProps;switch(Hu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(r),null;case 1:return Ze(r),null;case 3:return s=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Bn(it),de(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ja(r)?Pn(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Iu())),Ze(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Pn(r),m!==null?(Ze(r),Jm(r,m)):(Ze(r),Md(r,f,null,l,s))):m?m!==t.memoizedState?(Pn(r),Ze(r),Jm(r,m)):(Ze(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Pn(r),Ze(r),Md(r,f,t,l,s)),null;case 27:if(Se(r),s=ue.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return Ze(r),null}t=Z.current,Ja(r)?Rg(r):(t=a0(f,l,s),r.stateNode=t,Pn(r))}return Ze(r),null;case 5:if(Se(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return Ze(r),null}if(m=Z.current,Ja(r))Rg(r);else{var x=Ul(ue.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(f,{is:l.is}):x.createElement(f)}}m[dt]=r,m[Et]=l;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=m;e:switch(xt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Pn(r)}}return Ze(r),Md(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,s),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(t=ue.current,Ja(r)){if(t=r.stateNode,s=r.memoizedProps,l=null,f=vt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=r,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Xp(t.nodeValue,s)),t||mr(r,!0)}else t=Ul(t).createTextNode(l),t[dt]=r,r.stateNode=t}return Ze(r),null;case 31:if(s=r.memoizedState,t===null||t.memoizedState!==null){if(l=Ja(r),s!==null){if(t===null){if(!l)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[dt]=r}else ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ze(r),t=!1}else s=Iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return r.flags&256?(Vt(r),r):(Vt(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Ze(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ja(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[dt]=r}else ta(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ze(r),f=!1}else f=Iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Vt(r),r):(Vt(r),null)}return Vt(r),(r.flags&128)!==0?(r.lanes=s,r):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),s!==t&&s&&(r.child.flags|=8192),_l(r,r.updateQueue),Ze(r),null);case 4:return de(),t===null&&Wd(r.stateNode.containerInfo),Ze(r),null;case 10:return Bn(r.type),Ze(r),null;case 19:if(D(nt),l=r.memoizedState,l===null)return Ze(r),null;if(f=(r.flags&128)!==0,m=l.rendering,m===null)if(f)_s(l,!1);else{if(et!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=cl(t),m!==null){for(r.flags|=128,_s(l,!1),t=m.updateQueue,r.updateQueue=t,_l(r,t),r.subtreeFlags=0,t=s,s=r.child;s!==null;)Tg(s,t),s=s.sibling;return K(nt,nt.current&1|2),je&&Ln(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&yt()>Al&&(r.flags|=128,f=!0,_s(l,!1),r.lanes=4194304)}else{if(!f)if(t=cl(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,_l(r,t),_s(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!je)return Ze(r),null}else 2*yt()-l.renderingStartTime>Al&&s!==536870912&&(r.flags|=128,f=!0,_s(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=yt(),t.sibling=null,s=nt.current,K(nt,f?s&1|2:s&1),je&&Ln(r,l.treeForkCount),t):(Ze(r),null);case 22:case 23:return Vt(r),ed(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(s&536870912)!==0&&(r.flags&128)===0&&(Ze(r),r.subtreeFlags&6&&(r.flags|=8192)):Ze(r),s=r.updateQueue,s!==null&&_l(r,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==s&&(r.flags|=2048),t!==null&&D(aa),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),r.memoizedState.cache!==s&&(r.flags|=2048),Bn(it),Ze(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function f_(t,r){switch(Hu(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Bn(it),de(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Se(r),null;case 31:if(r.memoizedState!==null){if(Vt(r),r.alternate===null)throw Error(i(340));ta()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Vt(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ta()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return D(nt),null;case 4:return de(),null;case 10:return Bn(r.type),null;case 22:case 23:return Vt(r),ed(),t!==null&&D(aa),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Bn(it),null;case 25:return null;default:return null}}function Fm(t,r){switch(Hu(r),r.tag){case 3:Bn(it),de();break;case 26:case 27:case 5:Se(r);break;case 4:de();break;case 31:r.memoizedState!==null&&Vt(r);break;case 13:Vt(r);break;case 19:D(nt);break;case 10:Bn(r.type);break;case 22:case 23:Vt(r),ed(),t!==null&&D(aa);break;case 24:Bn(it)}}function Ss(t,r){try{var s=r.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var f=l.next;s=f;do{if((s.tag&t)===t){l=void 0;var m=s.create,x=s.inst;l=m(),x.destroy=l}s=s.next}while(s!==f)}}catch(N){Be(r,r.return,N)}}function _r(t,r,s){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var x=l.inst,N=x.destroy;if(N!==void 0){x.destroy=void 0,f=r;var H=s,J=N;try{J()}catch(re){Be(f,H,re)}}}l=l.next}while(l!==m)}}catch(re){Be(r,r.return,re)}}function Wm(t){var r=t.updateQueue;if(r!==null){var s=t.stateNode;try{Vg(r,s)}catch(l){Be(t,t.return,l)}}}function ep(t,r,s){s.props=ca(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Be(t,r,l)}}function Es(t,r){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(f){Be(t,r,f)}}function Tn(t,r){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(f){Be(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Be(t,r,f)}else s.current=null}function tp(t){var r=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(f){Be(t,t.return,f)}}function kd(t,r,s){try{var l=t.stateNode;D_(l,t.type,s,r),l[Et]=r}catch(f){Be(t,t.return,f)}}function np(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Or(t.type)||t.tag===4}function jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||np(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Or(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dd(t,r,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,r):(r=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.appendChild(t),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=zn));else if(l!==4&&(l===27&&Or(t.type)&&(s=t.stateNode,r=null),t=t.child,t!==null))for(Dd(t,r,s),t=t.sibling;t!==null;)Dd(t,r,s),t=t.sibling}function Sl(t,r,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(l!==4&&(l===27&&Or(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Sl(t,r,s),t=t.sibling;t!==null;)Sl(t,r,s),t=t.sibling}function rp(t){var r=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);xt(r,l,s),r[dt]=t,r[Et]=s}catch(m){Be(t,t.return,m)}}var Gn=!1,lt=!1,zd=!1,ap=typeof WeakSet=="function"?WeakSet:Set,pt=null;function h_(t,r){if(t=t.containerInfo,nf=Pl,t=pg(t),Nu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var x=0,N=-1,H=-1,J=0,re=0,ie=t,F=null;t:for(;;){for(var te;ie!==s||f!==0&&ie.nodeType!==3||(N=x+f),ie!==m||l!==0&&ie.nodeType!==3||(H=x+l),ie.nodeType===3&&(x+=ie.nodeValue.length),(te=ie.firstChild)!==null;)F=ie,ie=te;for(;;){if(ie===t)break t;if(F===s&&++J===f&&(N=x),F===m&&++re===l&&(H=x),(te=ie.nextSibling)!==null)break;ie=F,F=ie.parentNode}ie=te}s=N===-1||H===-1?null:{start:N,end:H}}else s=null}s=s||{start:0,end:0}}else s=null;for(rf={focusedElem:t,selectionRange:s},Pl=!1,pt=r;pt!==null;)if(r=pt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,pt=t;else for(;pt!==null;){switch(r=pt,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)f=t[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,s=r,f=m.memoizedProps,m=m.memoizedState,l=s.stateNode;try{var fe=ca(s.type,f);t=l.getSnapshotBeforeUpdate(fe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){Be(s,s.return,be)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,s=t.nodeType,s===9)of(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":of(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,pt=t;break}pt=r.return}}function ip(t,r,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Xn(t,s),l&4&&Ss(5,s);break;case 1:if(Xn(t,s),l&4)if(t=s.stateNode,r===null)try{t.componentDidMount()}catch(x){Be(s,s.return,x)}else{var f=ca(s.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(x){Be(s,s.return,x)}}l&64&&Wm(s),l&512&&Es(s,s.return);break;case 3:if(Xn(t,s),l&64&&(t=s.updateQueue,t!==null)){if(r=null,s.child!==null)switch(s.child.tag){case 27:case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}try{Vg(t,r)}catch(x){Be(s,s.return,x)}}break;case 27:r===null&&l&4&&rp(s);case 26:case 5:Xn(t,s),r===null&&l&4&&tp(s),l&512&&Es(s,s.return);break;case 12:Xn(t,s);break;case 31:Xn(t,s),l&4&&lp(t,s);break;case 13:Xn(t,s),l&4&&cp(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=__.bind(null,s),q_(t,s))));break;case 22:if(l=s.memoizedState!==null||Gn,!l){r=r!==null&&r.memoizedState!==null||lt,f=Gn;var m=lt;Gn=l,(lt=r)&&!m?Kn(t,s,(s.subtreeFlags&8772)!==0):Xn(t,s),Gn=f,lt=m}break;case 30:break;default:Xn(t,s)}}function sp(t){var r=t.alternate;r!==null&&(t.alternate=null,sp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Qi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,kt=!1;function Yn(t,r,s){for(s=s.child;s!==null;)op(t,r,s),s=s.sibling}function op(t,r,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Yr,s)}catch{}switch(s.tag){case 26:lt||Tn(s,r),Yn(t,r,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:lt||Tn(s,r);var l=Qe,f=kt;Or(s.type)&&(Qe=s.stateNode,kt=!1),Yn(t,r,s),js(s.stateNode),Qe=l,kt=f;break;case 5:lt||Tn(s,r);case 6:if(l=Qe,f=kt,Qe=null,Yn(t,r,s),Qe=l,kt=f,Qe!==null)if(kt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(s.stateNode)}catch(m){Be(s,r,m)}else try{Qe.removeChild(s.stateNode)}catch(m){Be(s,r,m)}break;case 18:Qe!==null&&(kt?(t=Qe,Wp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),vi(t)):Wp(Qe,s.stateNode));break;case 4:l=Qe,f=kt,Qe=s.stateNode.containerInfo,kt=!0,Yn(t,r,s),Qe=l,kt=f;break;case 0:case 11:case 14:case 15:_r(2,s,r),lt||_r(4,s,r),Yn(t,r,s);break;case 1:lt||(Tn(s,r),l=s.stateNode,typeof l.componentWillUnmount=="function"&&ep(s,r,l)),Yn(t,r,s);break;case 21:Yn(t,r,s);break;case 22:lt=(l=lt)||s.memoizedState!==null,Yn(t,r,s),lt=l;break;default:Yn(t,r,s)}}function lp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{vi(t)}catch(s){Be(r,r.return,s)}}}function cp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{vi(t)}catch(s){Be(r,r.return,s)}}function g_(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ap),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ap),r;default:throw Error(i(435,t.tag))}}function El(t,r){var s=g_(t);r.forEach(function(l){if(!s.has(l)){s.add(l);var f=S_.bind(null,t,l);l.then(f,f)}})}function jt(t,r){var s=r.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l],m=t,x=r,N=x;e:for(;N!==null;){switch(N.tag){case 27:if(Or(N.type)){Qe=N.stateNode,kt=!1;break e}break;case 5:Qe=N.stateNode,kt=!1;break e;case 3:case 4:Qe=N.stateNode.containerInfo,kt=!0;break e}N=N.return}if(Qe===null)throw Error(i(160));op(m,x,f),Qe=null,kt=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)up(r,t),r=r.sibling}var dn=null;function up(t,r){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jt(r,t),Dt(t),l&4&&(_r(3,t,t.return),Ss(3,t),_r(5,t,t.return));break;case 1:jt(r,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),l&64&&Gn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var f=dn;if(jt(r,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),l&4){var m=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Zr]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),xt(m,l,s),m[dt]=t,at(m),l=m;break e;case"link":var x=u0("link","href",f).get(l+(s.href||""));if(x){for(var N=0;N<x.length;N++)if(m=x[N],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){x.splice(N,1);break t}}m=f.createElement(l),xt(m,l,s),f.head.appendChild(m);break;case"meta":if(x=u0("meta","content",f).get(l+(s.content||""))){for(N=0;N<x.length;N++)if(m=x[N],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){x.splice(N,1);break t}}m=f.createElement(l),xt(m,l,s),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[dt]=t,at(m),l=m}t.stateNode=l}else d0(f,t.type,t.stateNode);else t.stateNode=c0(f,l,t.memoizedProps);else m!==l?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,l===null?d0(f,t.type,t.stateNode):c0(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&kd(t,t.memoizedProps,s.memoizedProps)}break;case 27:jt(r,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),s!==null&&l&4&&kd(t,t.memoizedProps,s.memoizedProps);break;case 5:if(jt(r,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),t.flags&32){f=t.stateNode;try{Ia(f,"")}catch(fe){Be(t,t.return,fe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,kd(t,f,s!==null?s.memoizedProps:f)),l&1024&&(zd=!0);break;case 6:if(jt(r,t),Dt(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(fe){Be(t,t.return,fe)}}break;case 3:if(Bl=null,f=dn,dn=Ll(r.containerInfo),jt(r,t),dn=f,Dt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{vi(r.containerInfo)}catch(fe){Be(t,t.return,fe)}zd&&(zd=!1,dp(t));break;case 4:l=dn,dn=Ll(t.stateNode.containerInfo),jt(r,t),Dt(t),dn=l;break;case 12:jt(r,t),Dt(t);break;case 31:jt(r,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,El(t,l)));break;case 13:jt(r,t),Dt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Cl=yt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,El(t,l)));break;case 22:f=t.memoizedState!==null;var H=s!==null&&s.memoizedState!==null,J=Gn,re=lt;if(Gn=J||f,lt=re||H,jt(r,t),lt=re,Gn=J,Dt(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(s===null||H||Gn||lt||ua(t)),s=null,r=t;;){if(r.tag===5||r.tag===26){if(s===null){H=s=r;try{if(m=H.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{N=H.stateNode;var ie=H.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;N.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(fe){Be(H,H.return,fe)}}}else if(r.tag===6){if(s===null){H=r;try{H.stateNode.nodeValue=f?"":H.memoizedProps}catch(fe){Be(H,H.return,fe)}}}else if(r.tag===18){if(s===null){H=r;try{var te=H.stateNode;f?e0(te,!0):e0(H.stateNode,!1)}catch(fe){Be(H,H.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;s===r&&(s=null),r=r.return}s===r&&(s=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,El(t,s))));break;case 19:jt(r,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,El(t,l)));break;case 30:break;case 21:break;default:jt(r,t),Dt(t)}}function Dt(t){var r=t.flags;if(r&2){try{for(var s,l=t.return;l!==null;){if(np(l)){s=l;break}l=l.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var f=s.stateNode,m=jd(t);Sl(t,m,f);break;case 5:var x=s.stateNode;s.flags&32&&(Ia(x,""),s.flags&=-33);var N=jd(t);Sl(t,N,x);break;case 3:case 4:var H=s.stateNode.containerInfo,J=jd(t);Dd(t,J,H);break;default:throw Error(i(161))}}catch(re){Be(t,t.return,re)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function dp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;dp(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Xn(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)ip(t,r.alternate,r),r=r.sibling}function ua(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:_r(4,r,r.return),ua(r);break;case 1:Tn(r,r.return);var s=r.stateNode;typeof s.componentWillUnmount=="function"&&ep(r,r.return,s),ua(r);break;case 27:js(r.stateNode);case 26:case 5:Tn(r,r.return),ua(r);break;case 22:r.memoizedState===null&&ua(r);break;case 30:ua(r);break;default:ua(r)}t=t.sibling}}function Kn(t,r,s){for(s=s&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:Kn(f,m,s),Ss(4,m);break;case 1:if(Kn(f,m,s),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){Be(l,l.return,J)}if(l=m,f=l.updateQueue,f!==null){var N=l.stateNode;try{var H=f.shared.hiddenCallbacks;if(H!==null)for(f.shared.hiddenCallbacks=null,f=0;f<H.length;f++)qg(H[f],N)}catch(J){Be(l,l.return,J)}}s&&x&64&&Wm(m),Es(m,m.return);break;case 27:rp(m);case 26:case 5:Kn(f,m,s),s&&l===null&&x&4&&tp(m),Es(m,m.return);break;case 12:Kn(f,m,s);break;case 31:Kn(f,m,s),s&&x&4&&lp(f,m);break;case 13:Kn(f,m,s),s&&x&4&&cp(f,m);break;case 22:m.memoizedState===null&&Kn(f,m,s),Es(m,m.return);break;case 30:break;default:Kn(f,m,s)}r=r.sibling}}function $d(t,r){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&us(s))}function Ud(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&us(t))}function fn(t,r,s,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)fp(t,r,s,l),r=r.sibling}function fp(t,r,s,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:fn(t,r,s,l),f&2048&&Ss(9,r);break;case 1:fn(t,r,s,l);break;case 3:fn(t,r,s,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&us(t)));break;case 12:if(f&2048){fn(t,r,s,l),t=r.stateNode;try{var m=r.memoizedProps,x=m.id,N=m.onPostCommit;typeof N=="function"&&N(x,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(H){Be(r,r.return,H)}}else fn(t,r,s,l);break;case 31:fn(t,r,s,l);break;case 13:fn(t,r,s,l);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?fn(t,r,s,l):Ts(t,r):m._visibility&2?fn(t,r,s,l):(m._visibility|=2,oi(t,r,s,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&$d(x,r);break;case 24:fn(t,r,s,l),f&2048&&Ud(r.alternate,r);break;default:fn(t,r,s,l)}}function oi(t,r,s,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,x=r,N=s,H=l,J=x.flags;switch(x.tag){case 0:case 11:case 15:oi(m,x,N,H,f),Ss(8,x);break;case 23:break;case 22:var re=x.stateNode;x.memoizedState!==null?re._visibility&2?oi(m,x,N,H,f):Ts(m,x):(re._visibility|=2,oi(m,x,N,H,f)),f&&J&2048&&$d(x.alternate,x);break;case 24:oi(m,x,N,H,f),f&&J&2048&&Ud(x.alternate,x);break;default:oi(m,x,N,H,f)}r=r.sibling}}function Ts(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var s=t,l=r,f=l.flags;switch(l.tag){case 22:Ts(s,l),f&2048&&$d(l.alternate,l);break;case 24:Ts(s,l),f&2048&&Ud(l.alternate,l);break;default:Ts(s,l)}r=r.sibling}}var Cs=8192;function li(t,r,s){if(t.subtreeFlags&Cs)for(t=t.child;t!==null;)hp(t,r,s),t=t.sibling}function hp(t,r,s){switch(t.tag){case 26:li(t,r,s),t.flags&Cs&&t.memoizedState!==null&&eS(s,dn,t.memoizedState,t.memoizedProps);break;case 5:li(t,r,s);break;case 3:case 4:var l=dn;dn=Ll(t.stateNode.containerInfo),li(t,r,s),dn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Cs,Cs=16777216,li(t,r,s),Cs=l):li(t,r,s));break;default:li(t,r,s)}}function gp(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function As(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];pt=l,pp(l,t)}gp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mp(t),t=t.sibling}function mp(t){switch(t.tag){case 0:case 11:case 15:As(t),t.flags&2048&&_r(9,t,t.return);break;case 3:As(t);break;case 12:As(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Tl(t)):As(t);break;default:As(t)}}function Tl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];pt=l,pp(l,t)}gp(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:_r(8,r,r.return),Tl(r);break;case 22:s=r.stateNode,s._visibility&2&&(s._visibility&=-3,Tl(r));break;default:Tl(r)}t=t.sibling}}function pp(t,r){for(;pt!==null;){var s=pt;switch(s.tag){case 0:case 11:case 15:_r(8,s,r);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:us(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,pt=l;else e:for(s=t;pt!==null;){l=pt;var f=l.sibling,m=l.return;if(sp(l),l===s){pt=null;break e}if(f!==null){f.return=m,pt=f;break e}pt=m}}}var m_={getCacheForType:function(t){var r=bt(it),s=r.data.get(t);return s===void 0&&(s=t(),r.data.set(t,s)),s},cacheSignal:function(){return bt(it).controller.signal}},p_=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ye=null,Oe=null,Me=0,He=0,Pt=null,Sr=!1,ci=!1,Ld=!1,Zn=0,et=0,Er=0,da=0,Hd=0,Gt=0,ui=0,Ns=null,zt=null,Bd=!1,Cl=0,yp=0,Al=1/0,Nl=null,Tr=null,ft=0,Cr=null,di=null,Qn=0,Id=0,qd=null,vp=null,Os=0,Vd=null;function Yt(){return(Le&2)!==0&&Me!==0?Me&-Me:M.T!==null?Zd():ko()}function bp(){if(Gt===0)if((Me&536870912)===0||je){var t=Ma;Ma<<=1,(Ma&3932160)===0&&(Ma=262144),Gt=t}else Gt=536870912;return t=qt.current,t!==null&&(t.flags|=32),Gt}function $t(t,r,s){(t===Ye&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(fi(t,0),Ar(t,Me,Gt,!1)),Kr(t,s),((Le&2)===0||t!==Ye)&&(t===Ye&&((Le&2)===0&&(da|=s),et===4&&Ar(t,Me,Gt,!1)),Cn(t))}function wp(t,r,s){if((Le&6)!==0)throw Error(i(327));var l=!s&&(r&127)===0&&(r&t.expiredLanes)===0||Xr(t,r),f=l?b_(t,r):Gd(t,r,!0),m=l;do{if(f===0){ci&&!l&&Ar(t,r,0,!1);break}else{if(s=t.current.alternate,m&&!y_(s)){f=Gd(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var N=t;f=Ns;var H=N.current.memoizedState.isDehydrated;if(H&&(fi(N,x).flags|=256),x=Gd(N,x,!1),x!==2){if(Ld&&!H){N.errorRecoveryDisabledLanes|=m,da|=m,f=4;break e}m=zt,zt=f,m!==null&&(zt===null?zt=m:zt.push.apply(zt,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){fi(t,0),Ar(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ar(l,r,Gt,!Sr);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Cl+300-yt(),10<f)){if(Ar(l,r,Gt,!Sr),ja(l,0,!0)!==0)break e;Qn=r,l.timeoutHandle=Jp(xp.bind(null,l,s,zt,Nl,Bd,r,Gt,da,ui,Sr,m,"Throttled",-0,0),f);break e}xp(l,s,zt,Nl,Bd,r,Gt,da,ui,Sr,m,null,-0,0)}}break}while(!0);Cn(t)}function xp(t,r,s,l,f,m,x,N,H,J,re,ie,F,te){if(t.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},hp(r,m,ie);var fe=(m&62914560)===m?Cl-yt():(m&4194048)===m?yp-yt():0;if(fe=tS(ie,fe),fe!==null){Qn=m,t.cancelPendingCommit=fe(Op.bind(null,t,r,m,s,l,f,x,N,H,re,ie,null,F,te)),Ar(t,m,x,!J);return}}Op(t,r,m,s,l,f,x,N,H)}function y_(t){for(var r=t;;){var s=r.tag;if((s===0||s===11||s===15)&&r.flags&16384&&(s=r.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var f=s[l],m=f.getSnapshot;f=f.value;try{if(!Bt(m(),f))return!1}catch{return!1}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ar(t,r,s,l){r&=~Hd,r&=~da,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-Nt(f),x=1<<m;l[m]=-1,f&=~x}s!==0&&Oo(t,s,r)}function Ol(){return(Le&6)===0?(Rs(0),!1):!0}function Pd(){if(Oe!==null){if(He===0)var t=Oe.return;else t=Oe,Hn=na=null,sd(t),ni=null,fs=0,t=Oe;for(;t!==null;)Fm(t.alternate,t),t=t.return;Oe=null}}function fi(t,r){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,U_(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Qn=0,Pd(),Ye=t,Oe=s=Un(t.current,null),Me=r,He=0,Pt=null,Sr=!1,ci=Xr(t,r),Ld=!1,ui=Gt=Hd=da=Er=et=0,zt=Ns=null,Bd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-Nt(l),m=1<<f;r|=t[f],l&=~m}return Zn=r,Qo(),s}function _p(t,r){Ae=null,M.H=ws,r===ti||r===al?(r=Lg(),He=3):r===Ku?(r=Lg(),He=4):He=r===_d?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Pt=r,Oe===null&&(et=1,vl(t,en(r,t.current)))}function Sp(){var t=qt.current;return t===null?!0:(Me&4194048)===Me?an===null:(Me&62914560)===Me||(Me&536870912)!==0?t===an:!1}function Ep(){var t=M.H;return M.H=ws,t===null?ws:t}function Tp(){var t=M.A;return M.A=m_,t}function Rl(){et=4,Sr||(Me&4194048)!==Me&&qt.current!==null||(ci=!0),(Er&134217727)===0&&(da&134217727)===0||Ye===null||Ar(Ye,Me,Gt,!1)}function Gd(t,r,s){var l=Le;Le|=2;var f=Ep(),m=Tp();(Ye!==t||Me!==r)&&(Nl=null,fi(t,r)),r=!1;var x=et;e:do try{if(He!==0&&Oe!==null){var N=Oe,H=Pt;switch(He){case 8:Pd(),x=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(r=!0);var J=He;if(He=0,Pt=null,hi(t,N,H,J),s&&ci){x=0;break e}break;default:J=He,He=0,Pt=null,hi(t,N,H,J)}}v_(),x=et;break}catch(re){_p(t,re)}while(!0);return r&&t.shellSuspendCounter++,Hn=na=null,Le=l,M.H=f,M.A=m,Oe===null&&(Ye=null,Me=0,Qo()),x}function v_(){for(;Oe!==null;)Cp(Oe)}function b_(t,r){var s=Le;Le|=2;var l=Ep(),f=Tp();Ye!==t||Me!==r?(Nl=null,Al=yt()+500,fi(t,r)):ci=Xr(t,r);e:do try{if(He!==0&&Oe!==null){r=Oe;var m=Pt;t:switch(He){case 1:He=0,Pt=null,hi(t,r,m,1);break;case 2:case 9:if($g(m)){He=0,Pt=null,Ap(r);break}r=function(){He!==2&&He!==9||Ye!==t||(He=7),Cn(t)},m.then(r,r);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:$g(m)?(He=0,Pt=null,Ap(r)):(He=0,Pt=null,hi(t,r,m,7));break;case 5:var x=null;switch(Oe.tag){case 26:x=Oe.memoizedState;case 5:case 27:var N=Oe;if(x?f0(x):N.stateNode.complete){He=0,Pt=null;var H=N.sibling;if(H!==null)Oe=H;else{var J=N.return;J!==null?(Oe=J,Ml(J)):Oe=null}break t}}He=0,Pt=null,hi(t,r,m,5);break;case 6:He=0,Pt=null,hi(t,r,m,6);break;case 8:Pd(),et=6;break e;default:throw Error(i(462))}}w_();break}catch(re){_p(t,re)}while(!0);return Hn=na=null,M.H=l,M.A=f,Le=s,Oe!==null?0:(Ye=null,Me=0,Qo(),et)}function w_(){for(;Oe!==null&&!Vr();)Cp(Oe)}function Cp(t){var r=Qm(t.alternate,t,Zn);t.memoizedProps=t.pendingProps,r===null?Ml(t):Oe=r}function Ap(t){var r=t,s=r.alternate;switch(r.tag){case 15:case 0:r=Pm(s,r,r.pendingProps,r.type,void 0,Me);break;case 11:r=Pm(s,r,r.pendingProps,r.type.render,r.ref,Me);break;case 5:sd(r);default:Fm(s,r),r=Oe=Tg(r,Zn),r=Qm(s,r,Zn)}t.memoizedProps=t.pendingProps,r===null?Ml(t):Oe=r}function hi(t,r,s,l){Hn=na=null,sd(r),ni=null,fs=0;var f=r.return;try{if(l_(t,f,r,s,Me)){et=1,vl(t,en(s,t.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;et=1,vl(t,en(s,t.current)),Oe=null;return}r.flags&32768?(je||l===1?t=!0:ci||(Me&536870912)!==0?t=!1:(Sr=t=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Np(r,t)):Ml(r)}function Ml(t){var r=t;do{if((r.flags&32768)!==0){Np(r,Sr);return}t=r.return;var s=d_(r.alternate,r,Zn);if(s!==null){Oe=s;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);et===0&&(et=5)}function Np(t,r){do{var s=f_(t.alternate,t);if(s!==null){s.flags&=32767,Oe=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=s}while(t!==null);et=6,Oe=null}function Op(t,r,s,l,f,m,x,N,H){t.cancelPendingCommit=null;do kl();while(ft!==0);if((Le&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=ju,cu(t,s,m,x,N,H),t===Ye&&(Oe=Ye=null,Me=0),di=r,Cr=t,Qn=s,Id=m,qd=f,vp=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,E_(Gr,function(){return Dp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,f=L.p,L.p=2,x=Le,Le|=4;try{h_(t,r,s)}finally{Le=x,L.p=f,M.T=l}}ft=1,Rp(),Mp(),kp()}}function Rp(){if(ft===1){ft=0;var t=Cr,r=di,s=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||s){s=M.T,M.T=null;var l=L.p;L.p=2;var f=Le;Le|=4;try{up(r,t);var m=rf,x=pg(t.containerInfo),N=m.focusedElem,H=m.selectionRange;if(x!==N&&N&&N.ownerDocument&&mg(N.ownerDocument.documentElement,N)){if(H!==null&&Nu(N)){var J=H.start,re=H.end;if(re===void 0&&(re=J),"selectionStart"in N)N.selectionStart=J,N.selectionEnd=Math.min(re,N.value.length);else{var ie=N.ownerDocument||document,F=ie&&ie.defaultView||window;if(F.getSelection){var te=F.getSelection(),fe=N.textContent.length,be=Math.min(H.start,fe),Pe=H.end===void 0?be:Math.min(H.end,fe);!te.extend&&be>Pe&&(x=Pe,Pe=be,be=x);var G=gg(N,be),I=gg(N,Pe);if(G&&I&&(te.rangeCount!==1||te.anchorNode!==G.node||te.anchorOffset!==G.offset||te.focusNode!==I.node||te.focusOffset!==I.offset)){var Q=ie.createRange();Q.setStart(G.node,G.offset),te.removeAllRanges(),be>Pe?(te.addRange(Q),te.extend(I.node,I.offset)):(Q.setEnd(I.node,I.offset),te.addRange(Q))}}}}for(ie=[],te=N;te=te.parentNode;)te.nodeType===1&&ie.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ie.length;N++){var ae=ie[N];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Pl=!!nf,rf=nf=null}finally{Le=f,L.p=l,M.T=s}}t.current=r,ft=2}}function Mp(){if(ft===2){ft=0;var t=Cr,r=di,s=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||s){s=M.T,M.T=null;var l=L.p;L.p=2;var f=Le;Le|=4;try{ip(t,r.alternate,r)}finally{Le=f,L.p=l,M.T=s}}ft=3}}function kp(){if(ft===4||ft===3){ft=0,Pr();var t=Cr,r=di,s=Qn,l=vp;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ft=5:(ft=0,di=Cr=null,jp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Tr=null),Zi(s),r=r.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Yr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=M.T,f=L.p,L.p=2,M.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var N=l[x];m(N.value,{componentStack:N.stack})}}finally{M.T=r,L.p=f}}(Qn&3)!==0&&kl(),Cn(t),f=t.pendingLanes,(s&261930)!==0&&(f&42)!==0?t===Vd?Os++:(Os=0,Vd=t):Os=0,Rs(0)}}function jp(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,us(r)))}function kl(){return Rp(),Mp(),kp(),Dp()}function Dp(){if(ft!==5)return!1;var t=Cr,r=Id;Id=0;var s=Zi(Qn),l=M.T,f=L.p;try{L.p=32>s?32:s,M.T=null,s=qd,qd=null;var m=Cr,x=Qn;if(ft=0,di=Cr=null,Qn=0,(Le&6)!==0)throw Error(i(331));var N=Le;if(Le|=4,mp(m.current),fp(m,m.current,x,s),Le=N,Rs(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Yr,m)}catch{}return!0}finally{L.p=f,M.T=l,jp(t,r)}}function zp(t,r,s){r=en(s,r),r=xd(t.stateNode,r,2),t=br(t,r,2),t!==null&&(Kr(t,2),Cn(t))}function Be(t,r,s){if(t.tag===3)zp(t,t,s);else for(;r!==null;){if(r.tag===3){zp(r,t,s);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Tr===null||!Tr.has(l))){t=en(s,t),s=$m(2),l=br(r,s,2),l!==null&&(Um(s,l,r,t),Kr(l,2),Cn(l));break}}r=r.return}}function Yd(t,r,s){var l=t.pingCache;if(l===null){l=t.pingCache=new p_;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(s)||(Ld=!0,f.add(s),t=x_.bind(null,t,r,s),r.then(t,t))}function x_(t,r,s){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Ye===t&&(Me&s)===s&&(et===4||et===3&&(Me&62914560)===Me&&300>yt()-Cl?(Le&2)===0&&fi(t,0):Hd|=s,ui===Me&&(ui=0)),Cn(t)}function $p(t,r){r===0&&(r=No()),t=Wr(t,r),t!==null&&(Kr(t,r),Cn(t))}function __(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),$p(t,s)}function S_(t,r){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),$p(t,s)}function E_(t,r){return ar(t,r)}var jl=null,gi=null,Xd=!1,Dl=!1,Kd=!1,Nr=0;function Cn(t){t!==gi&&t.next===null&&(gi===null?jl=gi=t:gi=gi.next=t),Dl=!0,Xd||(Xd=!0,C_())}function Rs(t,r){if(!Kd&&Dl){Kd=!0;do for(var s=!1,l=jl;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var x=l.suspendedLanes,N=l.pingedLanes;m=(1<<31-Nt(42|t)+1)-1,m&=f&~(x&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,Bp(l,m))}else m=Me,m=ja(l,l===Ye?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Xr(l,m)||(s=!0,Bp(l,m));l=l.next}while(s);Kd=!1}}function T_(){Up()}function Up(){Dl=Xd=!1;var t=0;Nr!==0&&$_()&&(t=Nr);for(var r=yt(),s=null,l=jl;l!==null;){var f=l.next,m=Lp(l,r);m===0?(l.next=null,s===null?jl=f:s.next=f,f===null&&(gi=s)):(s=l,(t!==0||(m&3)!==0)&&(Dl=!0)),l=f}ft!==0&&ft!==5||Rs(t),Nr!==0&&(Nr=0)}function Lp(t,r){for(var s=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-Nt(m),N=1<<x,H=f[x];H===-1?((N&s)===0||(N&l)!==0)&&(f[x]=lu(N,r)):H<=r&&(t.expiredLanes|=N),m&=~N}if(r=Ye,s=Me,s=ja(t,t===r?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===r&&(He===2||He===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ir(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Xr(t,s)){if(r=s&-s,r===t.callbackPriority)return r;switch(l!==null&&ir(l),Zi(s)){case 2:case 8:s=sr;break;case 32:s=Gr;break;case 268435456:s=Oa;break;default:s=Gr}return l=Hp.bind(null,t),s=ar(s,l),t.callbackPriority=r,t.callbackNode=s,r}return l!==null&&l!==null&&ir(l),t.callbackPriority=2,t.callbackNode=null,2}function Hp(t,r){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(kl()&&t.callbackNode!==s)return null;var l=Me;return l=ja(t,t===Ye?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(wp(t,l,r),Lp(t,yt()),t.callbackNode!=null&&t.callbackNode===s?Hp.bind(null,t):null)}function Bp(t,r){if(kl())return null;wp(t,r,!0)}function C_(){L_(function(){(Le&6)!==0?ar(Mn,T_):Up()})}function Zd(){if(Nr===0){var t=Wa;t===0&&(t=Ra,Ra<<=1,(Ra&261888)===0&&(Ra=256)),Nr=t}return Nr}function Ip(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:qo(""+t)}function qp(t,r){var s=r.ownerDocument.createElement("input");return s.name=r.name,s.value=r.value,t.id&&s.setAttribute("form",t.id),r.parentNode.insertBefore(s,r),t=new FormData(t),s.parentNode.removeChild(s),t}function A_(t,r,s,l,f){if(r==="submit"&&s&&s.stateNode===f){var m=Ip((f[Et]||null).action),x=l.submitter;x&&(r=(r=x[Et]||null)?Ip(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var N=new Yo("action","action",null,l,f);t.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Nr!==0){var H=x?qp(f,x):new FormData(f);md(s,{pending:!0,data:H,method:f.method,action:m},null,H)}}else typeof m=="function"&&(N.preventDefault(),H=x?qp(f,x):new FormData(f),md(s,{pending:!0,data:H,method:f.method,action:m},m,H))},currentTarget:f}]})}}for(var Qd=0;Qd<ku.length;Qd++){var Jd=ku[Qd],N_=Jd.toLowerCase(),O_=Jd[0].toUpperCase()+Jd.slice(1);un(N_,"on"+O_)}un(bg,"onAnimationEnd"),un(wg,"onAnimationIteration"),un(xg,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(Gx,"onTransitionRun"),un(Yx,"onTransitionStart"),un(Xx,"onTransitionCancel"),un(_g,"onTransitionEnd"),dr("onMouseEnter",["mouseout","mouseover"]),dr("onMouseLeave",["mouseout","mouseover"]),dr("onPointerEnter",["pointerout","pointerover"]),dr("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ms));function Vp(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var x=l.length-1;0<=x;x--){var N=l[x],H=N.instance,J=N.currentTarget;if(N=N.listener,H!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=J;try{m(f)}catch(re){Zo(re)}f.currentTarget=null,m=H}else for(x=0;x<l.length;x++){if(N=l[x],H=N.instance,J=N.currentTarget,N=N.listener,H!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=J;try{m(f)}catch(re){Zo(re)}f.currentTarget=null,m=H}}}}function Re(t,r){var s=r[Da];s===void 0&&(s=r[Da]=new Set);var l=t+"__bubble";s.has(l)||(Pp(r,t,2,!1),s.add(l))}function Fd(t,r,s){var l=0;r&&(l|=4),Pp(s,t,l,r)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Wd(t){if(!t[zl]){t[zl]=!0,$o.forEach(function(s){s!=="selectionchange"&&(R_.has(s)||Fd(s,!1,t),Fd(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[zl]||(r[zl]=!0,Fd("selectionchange",!1,r))}}function Pp(t,r,s,l){switch(b0(r)){case 2:var f=aS;break;case 8:f=iS;break;default:f=mf}s=f.bind(null,r,s,t),f=void 0,!bu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,s,{capture:!0,passive:f}):t.addEventListener(r,s,!0):f!==void 0?t.addEventListener(r,s,{passive:f}):t.addEventListener(r,s,!1)}function ef(t,r,s,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var N=l.stateNode.containerInfo;if(N===f)break;if(x===4)for(x=l.return;x!==null;){var H=x.tag;if((H===3||H===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;N!==null;){if(x=or(N),x===null)return;if(H=x.tag,H===5||H===6||H===26||H===27){l=m=x;continue e}N=N.parentNode}}l=l.return}Zh(function(){var J=m,re=yu(s),ie=[];e:{var F=Sg.get(t);if(F!==void 0){var te=Yo,fe=t;switch(t){case"keypress":if(Po(s)===0)break e;case"keydown":case"keyup":te=Sx;break;case"focusin":fe="focus",te=Su;break;case"focusout":fe="blur",te=Su;break;case"beforeblur":case"afterblur":te=Su;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=dx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Cx;break;case bg:case wg:case xg:te=gx;break;case _g:te=Nx;break;case"scroll":case"scrollend":te=cx;break;case"wheel":te=Rx;break;case"copy":case"cut":case"paste":te=px;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=eg;break;case"toggle":case"beforetoggle":te=kx}var be=(r&4)!==0,Pe=!be&&(t==="scroll"||t==="scrollend"),G=be?F!==null?F+"Capture":null:F;be=[];for(var I=J,Q;I!==null;){var ae=I;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||G===null||(ae=Wi(I,G),ae!=null&&be.push(ks(I,ae,Q))),Pe)break;I=I.return}0<be.length&&(F=new te(F,fe,null,s,re),ie.push({event:F,listeners:be}))}}if((r&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",F&&s!==pu&&(fe=s.relatedTarget||s.fromElement)&&(or(fe)||fe[jn]))break e;if((te||F)&&(F=re.window===re?re:(F=re.ownerDocument)?F.defaultView||F.parentWindow:window,te?(fe=s.relatedTarget||s.toElement,te=J,fe=fe?or(fe):null,fe!==null&&(Pe=c(fe),be=fe.tag,fe!==Pe||be!==5&&be!==27&&be!==6)&&(fe=null)):(te=null,fe=J),te!==fe)){if(be=Fh,ae="onMouseLeave",G="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(be=eg,ae="onPointerLeave",G="onPointerEnter",I="pointer"),Pe=te==null?F:cr(te),Q=fe==null?F:cr(fe),F=new be(ae,I+"leave",te,s,re),F.target=Pe,F.relatedTarget=Q,ae=null,or(re)===J&&(be=new be(G,I+"enter",fe,s,re),be.target=Q,be.relatedTarget=Pe,ae=be),Pe=ae,te&&fe)t:{for(be=M_,G=te,I=fe,Q=0,ae=G;ae;ae=be(ae))Q++;ae=0;for(var ve=I;ve;ve=be(ve))ae++;for(;0<Q-ae;)G=be(G),Q--;for(;0<ae-Q;)I=be(I),ae--;for(;Q--;){if(G===I||I!==null&&G===I.alternate){be=G;break t}G=be(G),I=be(I)}be=null}else be=null;te!==null&&Gp(ie,F,te,be,!1),fe!==null&&Pe!==null&&Gp(ie,Pe,fe,be,!0)}}e:{if(F=J?cr(J):window,te=F.nodeName&&F.nodeName.toLowerCase(),te==="select"||te==="input"&&F.type==="file")var ze=lg;else if(sg(F))if(cg)ze=qx;else{ze=Bx;var ge=Hx}else te=F.nodeName,!te||te.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?J&&mu(J.elementType)&&(ze=lg):ze=Ix;if(ze&&(ze=ze(t,J))){og(ie,ze,s,re);break e}ge&&ge(t,F,J),t==="focusout"&&J&&F.type==="number"&&J.memoizedProps.value!=null&&Ha(F,"number",F.value)}switch(ge=J?cr(J):window,t){case"focusin":(sg(ge)||ge.contentEditable==="true")&&(Ga=ge,Ou=J,os=null);break;case"focusout":os=Ou=Ga=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,yg(ie,s,re);break;case"selectionchange":if(Px)break;case"keydown":case"keyup":yg(ie,s,re)}var Ne;if(Tu)e:{switch(t){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Pa?ag(t,s)&&(ke="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ke="onCompositionStart");ke&&(tg&&s.locale!=="ko"&&(Pa||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Pa&&(Ne=Qh()):(fr=re,wu="value"in fr?fr.value:fr.textContent,Pa=!0)),ge=$l(J,ke),0<ge.length&&(ke=new Wh(ke,t,null,s,re),ie.push({event:ke,listeners:ge}),Ne?ke.data=Ne:(Ne=ig(s),Ne!==null&&(ke.data=Ne)))),(Ne=Dx?zx(t,s):$x(t,s))&&(ke=$l(J,"onBeforeInput"),0<ke.length&&(ge=new Wh("onBeforeInput","beforeinput",null,s,re),ie.push({event:ge,listeners:ke}),ge.data=Ne)),A_(ie,t,J,s,re)}Vp(ie,r)})}function ks(t,r,s){return{instance:t,listener:r,currentTarget:s}}function $l(t,r){for(var s=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Wi(t,s),f!=null&&l.unshift(ks(t,f,m)),f=Wi(t,r),f!=null&&l.push(ks(t,f,m))),t.tag===3)return l;t=t.return}return[]}function M_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gp(t,r,s,l,f){for(var m=r._reactName,x=[];s!==null&&s!==l;){var N=s,H=N.alternate,J=N.stateNode;if(N=N.tag,H!==null&&H===l)break;N!==5&&N!==26&&N!==27||J===null||(H=J,f?(J=Wi(s,m),J!=null&&x.unshift(ks(s,J,H))):f||(J=Wi(s,m),J!=null&&x.push(ks(s,J,H)))),s=s.return}x.length!==0&&t.push({event:r,listeners:x})}var k_=/\r\n?/g,j_=/\u0000|\uFFFD/g;function Yp(t){return(typeof t=="string"?t:""+t).replace(k_,`
`).replace(j_,"")}function Xp(t,r){return r=Yp(r),Yp(t)===r}function Ve(t,r,s,l,f,m){switch(s){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Ia(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Ia(t,""+l);break;case"className":$a(t,"class",l);break;case"tabIndex":$a(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$a(t,s,l);break;case"style":Xh(t,l,m);break;case"data":if(r!=="object"){$a(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=qo(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(r!=="input"&&Ve(t,r,"name",f.name,f,null),Ve(t,r,"formEncType",f.formEncType,f,null),Ve(t,r,"formMethod",f.formMethod,f,null),Ve(t,r,"formTarget",f.formTarget,f,null)):(Ve(t,r,"encType",f.encType,f,null),Ve(t,r,"method",f.method,f,null),Ve(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=qo(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=zn);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=qo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Re("beforetoggle",t),Re("toggle",t),za(t,"popover",l);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":za(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ox.get(s)||s,za(t,s,l))}}function tf(t,r,s,l,f,m){switch(s){case"style":Xh(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Ia(t,l):(typeof l=="number"||typeof l=="bigint")&&Ia(t,""+l);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),r=s.slice(2,f?s.length-7:void 0),m=t[Et]||null,m=m!=null?m[s]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(r,l,f);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):za(t,s,l)}}}function xt(t,r,s){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",t),Re("load",t);var l=!1,f=!1,m;for(m in s)if(s.hasOwnProperty(m)){var x=s[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Ve(t,r,m,x,s,null)}}f&&Ve(t,r,"srcSet",s.srcSet,s,null),l&&Ve(t,r,"src",s.src,s,null);return;case"input":Re("invalid",t);var N=m=x=f=null,H=null,J=null;for(l in s)if(s.hasOwnProperty(l)){var re=s[l];if(re!=null)switch(l){case"name":f=re;break;case"type":x=re;break;case"checked":H=re;break;case"defaultChecked":J=re;break;case"value":m=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:Ve(t,r,l,re,s,null)}}Io(t,m,N,H,J,x,f,!1);return;case"select":Re("invalid",t),l=x=m=null;for(f in s)if(s.hasOwnProperty(f)&&(N=s[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":x=N;break;case"multiple":l=N;default:Ve(t,r,f,N,s,null)}r=m,s=x,t.multiple=!!l,r!=null?Ba(t,!!l,r,!1):s!=null&&Ba(t,!!l,s,!0);return;case"textarea":Re("invalid",t),m=f=l=null;for(x in s)if(s.hasOwnProperty(x)&&(N=s[x],N!=null))switch(x){case"value":l=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:Ve(t,r,x,N,s,null)}Gh(t,l,f,m);return;case"option":for(H in s)if(s.hasOwnProperty(H)&&(l=s[H],l!=null))switch(H){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ve(t,r,H,l,s,null)}return;case"dialog":Re("beforetoggle",t),Re("toggle",t),Re("cancel",t),Re("close",t);break;case"iframe":case"object":Re("load",t);break;case"video":case"audio":for(l=0;l<Ms.length;l++)Re(Ms[l],t);break;case"image":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"embed":case"source":case"link":Re("error",t),Re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in s)if(s.hasOwnProperty(J)&&(l=s[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Ve(t,r,J,l,s,null)}return;default:if(mu(r)){for(re in s)s.hasOwnProperty(re)&&(l=s[re],l!==void 0&&tf(t,r,re,l,s,void 0));return}}for(N in s)s.hasOwnProperty(N)&&(l=s[N],l!=null&&Ve(t,r,N,l,s,null))}function D_(t,r,s,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,N=null,H=null,J=null,re=null;for(te in s){var ie=s[te];if(s.hasOwnProperty(te)&&ie!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":H=ie;default:l.hasOwnProperty(te)||Ve(t,r,te,null,l,ie)}}for(var F in l){var te=l[F];if(ie=s[F],l.hasOwnProperty(F)&&(te!=null||ie!=null))switch(F){case"type":m=te;break;case"name":f=te;break;case"checked":J=te;break;case"defaultChecked":re=te;break;case"value":x=te;break;case"defaultValue":N=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:te!==ie&&Ve(t,r,F,te,l,ie)}}Fi(t,x,N,H,J,re,m,f);return;case"select":te=x=N=F=null;for(m in s)if(H=s[m],s.hasOwnProperty(m)&&H!=null)switch(m){case"value":break;case"multiple":te=H;default:l.hasOwnProperty(m)||Ve(t,r,m,null,l,H)}for(f in l)if(m=l[f],H=s[f],l.hasOwnProperty(f)&&(m!=null||H!=null))switch(f){case"value":F=m;break;case"defaultValue":N=m;break;case"multiple":x=m;default:m!==H&&Ve(t,r,f,m,l,H)}r=N,s=x,l=te,F!=null?Ba(t,!!s,F,!1):!!l!=!!s&&(r!=null?Ba(t,!!s,r,!0):Ba(t,!!s,s?[]:"",!1));return;case"textarea":te=F=null;for(N in s)if(f=s[N],s.hasOwnProperty(N)&&f!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Ve(t,r,N,null,l,f)}for(x in l)if(f=l[x],m=s[x],l.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":F=f;break;case"defaultValue":te=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Ve(t,r,x,f,l,m)}Ph(t,F,te);return;case"option":for(var fe in s)if(F=s[fe],s.hasOwnProperty(fe)&&F!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ve(t,r,fe,null,l,F)}for(H in l)if(F=l[H],te=s[H],l.hasOwnProperty(H)&&F!==te&&(F!=null||te!=null))switch(H){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Ve(t,r,H,F,l,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in s)F=s[be],s.hasOwnProperty(be)&&F!=null&&!l.hasOwnProperty(be)&&Ve(t,r,be,null,l,F);for(J in l)if(F=l[J],te=s[J],l.hasOwnProperty(J)&&F!==te&&(F!=null||te!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,r));break;default:Ve(t,r,J,F,l,te)}return;default:if(mu(r)){for(var Pe in s)F=s[Pe],s.hasOwnProperty(Pe)&&F!==void 0&&!l.hasOwnProperty(Pe)&&tf(t,r,Pe,void 0,l,F);for(re in l)F=l[re],te=s[re],!l.hasOwnProperty(re)||F===te||F===void 0&&te===void 0||tf(t,r,re,F,l,te);return}}for(var G in s)F=s[G],s.hasOwnProperty(G)&&F!=null&&!l.hasOwnProperty(G)&&Ve(t,r,G,null,l,F);for(ie in l)F=l[ie],te=s[ie],!l.hasOwnProperty(ie)||F===te||F==null&&te==null||Ve(t,r,ie,F,l,te)}function Kp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function z_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var f=s[l],m=f.transferSize,x=f.initiatorType,N=f.duration;if(m&&N&&Kp(x)){for(x=0,N=f.responseEnd,l+=1;l<s.length;l++){var H=s[l],J=H.startTime;if(J>N)break;var re=H.transferSize,ie=H.initiatorType;re&&Kp(ie)&&(H=H.responseEnd,x+=re*(H<N?1:(N-J)/(H-J)))}if(--l,r+=8*(m+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var nf=null,rf=null;function Ul(t){return t.nodeType===9?t:t.ownerDocument}function Zp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qp(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function af(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var sf=null;function $_(){var t=window.event;return t&&t.type==="popstate"?t===sf?!1:(sf=t,!0):(sf=null,!1)}var Jp=typeof setTimeout=="function"?setTimeout:void 0,U_=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,L_=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(t){return Fp.resolve(null).then(t).catch(H_)}:Jp;function H_(t){setTimeout(function(){throw t})}function Or(t){return t==="head"}function Wp(t,r){var s=r,l=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(f),vi(r);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")js(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,js(s);for(var m=s.firstChild;m;){var x=m.nextSibling,N=m.nodeName;m[Zr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||s.removeChild(m),m=x}}else s==="body"&&js(t.ownerDocument.body);s=f}while(s);vi(r)}function e0(t,r){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?r?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(r?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function of(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var s=r;switch(r=r.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":of(s),Qi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function B_(t,r,s,l){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Zr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=sn(t.nextSibling),t===null)break}return null}function I_(t,r,s){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=sn(t.nextSibling),t===null))return null;return t}function t0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=sn(t.nextSibling),t===null))return null;return t}function lf(t){return t.data==="$?"||t.data==="$~"}function cf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function q_(t,r){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||s.readyState!=="loading")r();else{var l=function(){r(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function sn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var uf=null;function n0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(r===0)return sn(t.nextSibling);r--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||r++}t=t.nextSibling}return null}function r0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(r===0)return t;r--}else s!=="/$"&&s!=="/&"||r++}t=t.previousSibling}return null}function a0(t,r,s){switch(r=Ul(s),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function js(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Qi(t)}var on=new Map,i0=new Set;function Ll(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jn=L.d;L.d={f:V_,r:P_,D:G_,C:Y_,L:X_,m:K_,X:Q_,S:Z_,M:J_};function V_(){var t=Jn.f(),r=Ol();return t||r}function P_(t){var r=lr(t);r!==null&&r.tag===5&&r.type==="form"?_m(r):Jn.r(t)}var mi=typeof document>"u"?null:document;function s0(t,r,s){var l=mi;if(l&&typeof r=="string"&&r){var f=Tt(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),i0.has(f)||(i0.add(f),t={rel:t,crossOrigin:s,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),xt(r,"link",t),at(r),l.head.appendChild(r)))}}function G_(t){Jn.D(t),s0("dns-prefetch",t,null)}function Y_(t,r){Jn.C(t,r),s0("preconnect",t,r)}function X_(t,r,s){Jn.L(t,r,s);var l=mi;if(l&&t&&r){var f='link[rel="preload"][as="'+Tt(r)+'"]';r==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Tt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Tt(s.imageSizes)+'"]')):f+='[href="'+Tt(t)+'"]';var m=f;switch(r){case"style":m=pi(t);break;case"script":m=yi(t)}on.has(m)||(t=v({rel:"preload",href:r==="image"&&s&&s.imageSrcSet?void 0:t,as:r},s),on.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Ds(m))||r==="script"&&l.querySelector(zs(m))||(r=l.createElement("link"),xt(r,"link",t),at(r),l.head.appendChild(r)))}}function K_(t,r){Jn.m(t,r);var s=mi;if(s&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=yi(t)}if(!on.has(m)&&(t=v({rel:"modulepreload",href:t},r),on.set(m,t),s.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(zs(m)))return}l=s.createElement("link"),xt(l,"link",t),at(l),s.head.appendChild(l)}}}function Z_(t,r,s){Jn.S(t,r,s);var l=mi;if(l&&t){var f=ur(l).hoistableStyles,m=pi(t);r=r||"default";var x=f.get(m);if(!x){var N={loading:0,preload:null};if(x=l.querySelector(Ds(m)))N.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":r},s),(s=on.get(m))&&df(t,s);var H=x=l.createElement("link");at(H),xt(H,"link",t),H._p=new Promise(function(J,re){H.onload=J,H.onerror=re}),H.addEventListener("load",function(){N.loading|=1}),H.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Hl(x,r,l)}x={type:"stylesheet",instance:x,count:1,state:N},f.set(m,x)}}}function Q_(t,r){Jn.X(t,r);var s=mi;if(s&&t){var l=ur(s).hoistableScripts,f=yi(t),m=l.get(f);m||(m=s.querySelector(zs(f)),m||(t=v({src:t,async:!0},r),(r=on.get(f))&&ff(t,r),m=s.createElement("script"),at(m),xt(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function J_(t,r){Jn.M(t,r);var s=mi;if(s&&t){var l=ur(s).hoistableScripts,f=yi(t),m=l.get(f);m||(m=s.querySelector(zs(f)),m||(t=v({src:t,async:!0,type:"module"},r),(r=on.get(f))&&ff(t,r),m=s.createElement("script"),at(m),xt(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function o0(t,r,s,l){var f=(f=ue.current)?Ll(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(r=pi(s.href),s=ur(f).hoistableStyles,l=s.get(r),l||(l={type:"style",instance:null,count:0,state:null},s.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=pi(s.href);var m=ur(f).hoistableStyles,x=m.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=f.querySelector(Ds(t)))&&!m._p&&(x.instance=m,x.state.loading=5),on.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},on.set(t,s),m||F_(f,t,s,x.state))),r&&l===null)throw Error(i(528,""));return x}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=s.async,s=s.src,typeof s=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yi(s),s=ur(f).hoistableScripts,l=s.get(r),l||(l={type:"script",instance:null,count:0,state:null},s.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function pi(t){return'href="'+Tt(t)+'"'}function Ds(t){return'link[rel="stylesheet"]['+t+"]"}function l0(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function F_(t,r,s,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),xt(r,"link",s),at(r),t.head.appendChild(r))}function yi(t){return'[src="'+Tt(t)+'"]'}function zs(t){return"script[async]"+t}function c0(t,r,s){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(s.href)+'"]');if(l)return r.instance=l,at(l),l;var f=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),at(l),xt(l,"style",f),Hl(l,s.precedence,t),r.instance=l;case"stylesheet":f=pi(s.href);var m=t.querySelector(Ds(f));if(m)return r.state.loading|=4,r.instance=m,at(m),m;l=l0(s),(f=on.get(f))&&df(l,f),m=(t.ownerDocument||t).createElement("link"),at(m);var x=m;return x._p=new Promise(function(N,H){x.onload=N,x.onerror=H}),xt(m,"link",l),r.state.loading|=4,Hl(m,s.precedence,t),r.instance=m;case"script":return m=yi(s.src),(f=t.querySelector(zs(m)))?(r.instance=f,at(f),f):(l=s,(f=on.get(m))&&(l=v({},s),ff(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),at(f),xt(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Hl(l,s.precedence,t));return r.instance}function Hl(t,r,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,x=0;x<l.length;x++){var N=l[x];if(N.dataset.precedence===r)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=s.nodeType===9?s.head:s,r.insertBefore(t,r.firstChild))}function df(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function ff(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Bl=null;function u0(t,r,s){if(Bl===null){var l=new Map,f=Bl=new Map;f.set(s,l)}else f=Bl,l=f.get(s),l||(l=new Map,f.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var m=s[f];if(!(m[Zr]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=t+x;var N=l.get(x);N?N.push(m):l.set(x,[m])}}return l}function d0(t,r,s){t=t.ownerDocument||t,t.head.insertBefore(s,r==="title"?t.querySelector("head > title"):null)}function W_(t,r,s){if(s===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function f0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function eS(t,r,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=pi(l.href),m=r.querySelector(Ds(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Il.bind(t),r.then(t,t)),s.state.loading|=4,s.instance=m,at(m);return}m=r.ownerDocument||r,l=l0(l),(f=on.get(f))&&df(l,f),m=m.createElement("link"),at(m);var x=m;x._p=new Promise(function(N,H){x.onload=N,x.onerror=H}),xt(m,"link",l),s.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Il.bind(t),r.addEventListener("load",s),r.addEventListener("error",s))}}var hf=0;function tS(t,r){return t.stylesheets&&t.count===0&&Vl(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&Vl(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&hf===0&&(hf=62500*z_());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vl(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>hf?50:800)+r);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Il(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ql=null;function Vl(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ql=new Map,r.forEach(nS,t),ql=null,Il.call(t))}function nS(t,r){if(!(r.state.loading&4)){var s=ql.get(t);if(s)var l=s.get(null);else{s=new Map,ql.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(s.set(x.dataset.precedence,x),l=x)}l&&s.set(null,l)}f=r.instance,x=f.getAttribute("data-precedence"),m=s.get(x)||l,m===l&&s.set(null,f),s.set(x,f),this.count++,l=Il.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var $s={$$typeof:w,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function rS(t,r,s,l,f,m,x,N,H){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.hiddenUpdates=Xi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function h0(t,r,s,l,f,m,x,N,H,J,re,ie){return t=new rS(t,r,s,x,H,J,re,ie,N),r=1,m===!0&&(r|=24),m=It(3,null,null,r),t.current=m,m.stateNode=t,r=Gu(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:s,cache:r},Zu(m),t}function g0(t){return t?(t=Ka,t):Ka}function m0(t,r,s,l,f,m){f=g0(f),l.context===null?l.context=f:l.pendingContext=f,l=vr(r),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=br(t,l,r),s!==null&&($t(s,t,r),gs(s,t,r))}function p0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function gf(t,r){p0(t,r),(t=t.alternate)&&p0(t,r)}function y0(t){if(t.tag===13||t.tag===31){var r=Wr(t,67108864);r!==null&&$t(r,t,67108864),gf(t,67108864)}}function v0(t){if(t.tag===13||t.tag===31){var r=Yt();r=Ki(r);var s=Wr(t,r);s!==null&&$t(s,t,r),gf(t,r)}}var Pl=!0;function aS(t,r,s,l){var f=M.T;M.T=null;var m=L.p;try{L.p=2,mf(t,r,s,l)}finally{L.p=m,M.T=f}}function iS(t,r,s,l){var f=M.T;M.T=null;var m=L.p;try{L.p=8,mf(t,r,s,l)}finally{L.p=m,M.T=f}}function mf(t,r,s,l){if(Pl){var f=pf(l);if(f===null)ef(t,r,l,Gl,s),w0(t,l);else if(oS(f,t,r,s,l))l.stopPropagation();else if(w0(t,l),r&4&&-1<sS.indexOf(t)){for(;f!==null;){var m=lr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=kn(m.pendingLanes);if(x!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;x;){var H=1<<31-Nt(x);N.entanglements[1]|=H,x&=~H}Cn(m),(Le&6)===0&&(Al=yt()+500,Rs(0))}}break;case 31:case 13:N=Wr(m,2),N!==null&&$t(N,m,2),Ol(),gf(m,2)}if(m=pf(l),m===null&&ef(t,r,l,Gl,s),m===f)break;f=m}f!==null&&l.stopPropagation()}else ef(t,r,l,null,s)}}function pf(t){return t=yu(t),yf(t)}var Gl=null;function yf(t){if(Gl=null,t=or(t),t!==null){var r=c(t);if(r===null)t=null;else{var s=r.tag;if(s===13){if(t=u(r),t!==null)return t;t=null}else if(s===31){if(t=d(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Gl=t,null}function b0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Na()){case Mn:return 2;case sr:return 8;case Gr:case nu:return 32;case Oa:return 268435456;default:return 32}default:return 32}}var vf=!1,Rr=null,Mr=null,kr=null,Us=new Map,Ls=new Map,jr=[],sS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w0(t,r){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Us.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ls.delete(r.pointerId)}}function Hs(t,r,s,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:s,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=lr(r),r!==null&&y0(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function oS(t,r,s,l,f){switch(r){case"focusin":return Rr=Hs(Rr,t,r,s,l,f),!0;case"dragenter":return Mr=Hs(Mr,t,r,s,l,f),!0;case"mouseover":return kr=Hs(kr,t,r,s,l,f),!0;case"pointerover":var m=f.pointerId;return Us.set(m,Hs(Us.get(m)||null,t,r,s,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Ls.set(m,Hs(Ls.get(m)||null,t,r,s,l,f)),!0}return!1}function x0(t){var r=or(t.target);if(r!==null){var s=c(r);if(s!==null){if(r=s.tag,r===13){if(r=u(s),r!==null){t.blockedOn=r,jo(t.priority,function(){v0(s)});return}}else if(r===31){if(r=d(s),r!==null){t.blockedOn=r,jo(t.priority,function(){v0(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=pf(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);pu=l,s.target.dispatchEvent(l),pu=null}else return r=lr(s),r!==null&&y0(r),t.blockedOn=s,!1;r.shift()}return!0}function _0(t,r,s){Yl(t)&&s.delete(r)}function lS(){vf=!1,Rr!==null&&Yl(Rr)&&(Rr=null),Mr!==null&&Yl(Mr)&&(Mr=null),kr!==null&&Yl(kr)&&(kr=null),Us.forEach(_0),Ls.forEach(_0)}function Xl(t,r){t.blockedOn===r&&(t.blockedOn=null,vf||(vf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lS)))}var Kl=null;function S0(t){Kl!==t&&(Kl=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Kl===t&&(Kl=null);for(var r=0;r<t.length;r+=3){var s=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(yf(l||s)===null)continue;break}var m=lr(s);m!==null&&(t.splice(r,3),r-=3,md(m,{pending:!0,data:f,method:s.method,action:l},l,f))}}))}function vi(t){function r(H){return Xl(H,t)}Rr!==null&&Xl(Rr,t),Mr!==null&&Xl(Mr,t),kr!==null&&Xl(kr,t),Us.forEach(r),Ls.forEach(r);for(var s=0;s<jr.length;s++){var l=jr[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<jr.length&&(s=jr[0],s.blockedOn===null);)x0(s),s.blockedOn===null&&jr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var f=s[l],m=s[l+1],x=f[Et]||null;if(typeof m=="function")x||S0(s);else if(x){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[Et]||null)N=x.formAction;else if(yf(f)!==null)continue}else N=x.action;typeof N=="function"?s[l+1]=N:(s.splice(l,3),l-=3),S0(s)}}}function E0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function bf(t){this._internalRoot=t}Zl.prototype.render=bf.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var s=r.current,l=Yt();m0(s,l,t,r,null,null)},Zl.prototype.unmount=bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;m0(t.current,2,null,t,null,null),Ol(),r[jn]=null}};function Zl(t){this._internalRoot=t}Zl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ko();t={blockedOn:null,target:t,priority:r};for(var s=0;s<jr.length&&r!==0&&r<jr[s].priority;s++);jr.splice(s,0,t),s===0&&x0(t)}};var T0=n.version;if(T0!=="19.2.0")throw Error(i(527,T0,"19.2.0"));L.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=h(r),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var cS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Yr=Ql.inject(cS),At=Ql}catch{}}return Is.createRoot=function(t,r){if(!o(t))throw Error(i(299));var s=!1,l="",f=km,m=jm,x=Dm;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=h0(t,1,!1,null,null,s,l,null,f,m,x,E0),t[jn]=r.current,Wd(t),new bf(r)},Is.hydrateRoot=function(t,r,s){if(!o(t))throw Error(i(299));var l=!1,f="",m=km,x=jm,N=Dm,H=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(N=s.onRecoverableError),s.formState!==void 0&&(H=s.formState)),r=h0(t,1,!0,r,s??null,l,f,H,m,x,N,E0),r.context=g0(null),s=r.current,l=Yt(),l=Ki(l),f=vr(l),f.callback=null,br(s,f,l),s=l,r.current.lanes=s,Kr(r,s),Cn(r),t[jn]=r.current,Wd(t),new Zl(r)},Is.version="19.2.0",Is}var z0;function vS(){if(z0)return _f.exports;z0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),_f.exports=yS(),_f.exports}var bS=vS();function ut(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let a=0,i;a<e.length;a++)(i=ut(e[a]))!==""&&(n+=(n&&" ")+i);else for(let a in e)e[a]&&(n+=(n&&" ")+a);return n}var wS={value:()=>{}};function Hc(){for(var e=0,n=arguments.length,a={},i;e<n;++e){if(!(i=arguments[e]+"")||i in a||/[\s.]/.test(i))throw new Error("illegal type: "+i);a[i]=[]}return new pc(a)}function pc(e){this._=e}function xS(e,n){return e.trim().split(/^|\s+/).map(function(a){var i="",o=a.indexOf(".");if(o>=0&&(i=a.slice(o+1),a=a.slice(0,o)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:i}})}pc.prototype=Hc.prototype={constructor:pc,on:function(e,n){var a=this._,i=xS(e+"",a),o,c=-1,u=i.length;if(arguments.length<2){for(;++c<u;)if((o=(e=i[c]).type)&&(o=_S(a[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<u;)if(o=(e=i[c]).type)a[o]=$0(a[o],e.name,n);else if(n==null)for(o in a)a[o]=$0(a[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new pc(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var a=new Array(o),i=0,o,c;i<o;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],i=0,o=c.length;i<o;++i)c[i].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,c=i.length;o<c;++o)i[o].value.apply(n,a)}};function _S(e,n){for(var a=0,i=e.length,o;a<i;++a)if((o=e[a]).name===n)return o.value}function $0(e,n,a){for(var i=0,o=e.length;i<o;++i)if(e[i].name===n){e[i]=wS,e=e.slice(0,i).concat(e.slice(i+1));break}return a!=null&&e.push({name:n,value:a}),e}var Qf="http://www.w3.org/1999/xhtml";const U0={svg:"http://www.w3.org/2000/svg",xhtml:Qf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bc(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),U0.hasOwnProperty(n)?{space:U0[n],local:e}:e}function SS(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===Qf&&n.documentElement.namespaceURI===Qf?n.createElement(e):n.createElementNS(a,e)}}function ES(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jv(e){var n=Bc(e);return(n.local?ES:SS)(n)}function TS(){}function Sh(e){return e==null?TS:function(){return this.querySelector(e)}}function CS(e){typeof e!="function"&&(e=Sh(e));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var c=n[o],u=c.length,d=i[o]=new Array(u),g,h,p=0;p<u;++p)(g=c[p])&&(h=e.call(g,g.__data__,p,c))&&("__data__"in g&&(h.__data__=g.__data__),d[p]=h);return new Jt(i,this._parents)}function AS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function NS(){return[]}function Dv(e){return e==null?NS:function(){return this.querySelectorAll(e)}}function OS(e){return function(){return AS(e.apply(this,arguments))}}function RS(e){typeof e=="function"?e=OS(e):e=Dv(e);for(var n=this._groups,a=n.length,i=[],o=[],c=0;c<a;++c)for(var u=n[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&(i.push(e.call(g,g.__data__,h,u)),o.push(g));return new Jt(i,o)}function zv(e){return function(){return this.matches(e)}}function $v(e){return function(n){return n.matches(e)}}var MS=Array.prototype.find;function kS(e){return function(){return MS.call(this.children,e)}}function jS(){return this.firstElementChild}function DS(e){return this.select(e==null?jS:kS(typeof e=="function"?e:$v(e)))}var zS=Array.prototype.filter;function $S(){return Array.from(this.children)}function US(e){return function(){return zS.call(this.children,e)}}function LS(e){return this.selectAll(e==null?$S:US(typeof e=="function"?e:$v(e)))}function HS(e){typeof e!="function"&&(e=zv(e));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var c=n[o],u=c.length,d=i[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new Jt(i,this._parents)}function Uv(e){return new Array(e.length)}function BS(){return new Jt(this._enter||this._groups.map(Uv),this._parents)}function Ec(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Ec.prototype={constructor:Ec,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function IS(e){return function(){return e}}function qS(e,n,a,i,o,c){for(var u=0,d,g=n.length,h=c.length;u<h;++u)(d=n[u])?(d.__data__=c[u],i[u]=d):a[u]=new Ec(e,c[u]);for(;u<g;++u)(d=n[u])&&(o[u]=d)}function VS(e,n,a,i,o,c,u){var d,g,h=new Map,p=n.length,v=c.length,y=new Array(p),b;for(d=0;d<p;++d)(g=n[d])&&(y[d]=b=u.call(g,g.__data__,d,n)+"",h.has(b)?o[d]=g:h.set(b,g));for(d=0;d<v;++d)b=u.call(e,c[d],d,c)+"",(g=h.get(b))?(i[d]=g,g.__data__=c[d],h.delete(b)):a[d]=new Ec(e,c[d]);for(d=0;d<p;++d)(g=n[d])&&h.get(y[d])===g&&(o[d]=g)}function PS(e){return e.__data__}function GS(e,n){if(!arguments.length)return Array.from(this,PS);var a=n?VS:qS,i=this._parents,o=this._groups;typeof e!="function"&&(e=IS(e));for(var c=o.length,u=new Array(c),d=new Array(c),g=new Array(c),h=0;h<c;++h){var p=i[h],v=o[h],y=v.length,b=YS(e.call(p,p&&p.__data__,h,i)),T=b.length,S=d[h]=new Array(T),C=u[h]=new Array(T),E=g[h]=new Array(y);a(p,v,S,C,E,b,n);for(var R=0,w=0,A,$;R<T;++R)if(A=S[R]){for(R>=w&&(w=R+1);!($=C[w])&&++w<T;);A._next=$||null}}return u=new Jt(u,i),u._enter=d,u._exit=g,u}function YS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XS(){return new Jt(this._exit||this._groups.map(Uv),this._parents)}function KS(e,n,a){var i=this.enter(),o=this,c=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),n!=null&&(o=n(o),o&&(o=o.selection())),a==null?c.remove():a(c),i&&o?i.merge(o).order():o}function ZS(e){for(var n=e.selection?e.selection():e,a=this._groups,i=n._groups,o=a.length,c=i.length,u=Math.min(o,c),d=new Array(o),g=0;g<u;++g)for(var h=a[g],p=i[g],v=h.length,y=d[g]=new Array(v),b,T=0;T<v;++T)(b=h[T]||p[T])&&(y[T]=b);for(;g<o;++g)d[g]=a[g];return new Jt(d,this._parents)}function QS(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var i=e[n],o=i.length-1,c=i[o],u;--o>=0;)(u=i[o])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function JS(e){e||(e=FS);function n(v,y){return v&&y?e(v.__data__,y.__data__):!v-!y}for(var a=this._groups,i=a.length,o=new Array(i),c=0;c<i;++c){for(var u=a[c],d=u.length,g=o[c]=new Array(d),h,p=0;p<d;++p)(h=u[p])&&(g[p]=h);g.sort(n)}return new Jt(o,this._parents).order()}function FS(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function WS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function e1(){return Array.from(this)}function t1(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var i=e[n],o=0,c=i.length;o<c;++o){var u=i[o];if(u)return u}return null}function n1(){let e=0;for(const n of this)++e;return e}function r1(){return!this.node()}function a1(e){for(var n=this._groups,a=0,i=n.length;a<i;++a)for(var o=n[a],c=0,u=o.length,d;c<u;++c)(d=o[c])&&e.call(d,d.__data__,c,o);return this}function i1(e){return function(){this.removeAttribute(e)}}function s1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o1(e,n){return function(){this.setAttribute(e,n)}}function l1(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function c1(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function u1(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function d1(e,n){var a=Bc(e);if(arguments.length<2){var i=this.node();return a.local?i.getAttributeNS(a.space,a.local):i.getAttribute(a)}return this.each((n==null?a.local?s1:i1:typeof n=="function"?a.local?u1:c1:a.local?l1:o1)(a,n))}function Lv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function f1(e){return function(){this.style.removeProperty(e)}}function h1(e,n,a){return function(){this.style.setProperty(e,n,a)}}function g1(e,n,a){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,a)}}function m1(e,n,a){return arguments.length>1?this.each((n==null?f1:typeof n=="function"?g1:h1)(e,n,a??"")):Li(this.node(),e)}function Li(e,n){return e.style.getPropertyValue(n)||Lv(e).getComputedStyle(e,null).getPropertyValue(n)}function p1(e){return function(){delete this[e]}}function y1(e,n){return function(){this[e]=n}}function v1(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function b1(e,n){return arguments.length>1?this.each((n==null?p1:typeof n=="function"?v1:y1)(e,n)):this.node()[e]}function Hv(e){return e.trim().split(/^|\s+/)}function Eh(e){return e.classList||new Bv(e)}function Bv(e){this._node=e,this._names=Hv(e.getAttribute("class")||"")}Bv.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Iv(e,n){for(var a=Eh(e),i=-1,o=n.length;++i<o;)a.add(n[i])}function qv(e,n){for(var a=Eh(e),i=-1,o=n.length;++i<o;)a.remove(n[i])}function w1(e){return function(){Iv(this,e)}}function x1(e){return function(){qv(this,e)}}function _1(e,n){return function(){(n.apply(this,arguments)?Iv:qv)(this,e)}}function S1(e,n){var a=Hv(e+"");if(arguments.length<2){for(var i=Eh(this.node()),o=-1,c=a.length;++o<c;)if(!i.contains(a[o]))return!1;return!0}return this.each((typeof n=="function"?_1:n?w1:x1)(a,n))}function E1(){this.textContent=""}function T1(e){return function(){this.textContent=e}}function C1(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function A1(e){return arguments.length?this.each(e==null?E1:(typeof e=="function"?C1:T1)(e)):this.node().textContent}function N1(){this.innerHTML=""}function O1(e){return function(){this.innerHTML=e}}function R1(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function M1(e){return arguments.length?this.each(e==null?N1:(typeof e=="function"?R1:O1)(e)):this.node().innerHTML}function k1(){this.nextSibling&&this.parentNode.appendChild(this)}function j1(){return this.each(k1)}function D1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function z1(){return this.each(D1)}function $1(e){var n=typeof e=="function"?e:jv(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function U1(){return null}function L1(e,n){var a=typeof e=="function"?e:jv(e),i=n==null?U1:typeof n=="function"?n:Sh(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),i.apply(this,arguments)||null)})}function H1(){var e=this.parentNode;e&&e.removeChild(this)}function B1(){return this.each(H1)}function I1(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function q1(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function V1(e){return this.select(e?q1:I1)}function P1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function G1(e){return function(n){e.call(this,n,this.__data__)}}function Y1(e){return e.trim().split(/^|\s+/).map(function(n){var a="",i=n.indexOf(".");return i>=0&&(a=n.slice(i+1),n=n.slice(0,i)),{type:n,name:a}})}function X1(e){return function(){var n=this.__on;if(n){for(var a=0,i=-1,o=n.length,c;a<o;++a)c=n[a],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++i]=c;++i?n.length=i:delete this.__on}}}function K1(e,n,a){return function(){var i=this.__on,o,c=G1(n);if(i){for(var u=0,d=i.length;u<d;++u)if((o=i[u]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=c,o.options=a),o.value=n;return}}this.addEventListener(e.type,c,a),o={type:e.type,name:e.name,value:n,listener:c,options:a},i?i.push(o):this.__on=[o]}}function Z1(e,n,a){var i=Y1(e+""),o,c=i.length,u;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,h=d.length,p;g<h;++g)for(o=0,p=d[g];o<c;++o)if((u=i[o]).type===p.type&&u.name===p.name)return p.value}return}for(d=n?K1:X1,o=0;o<c;++o)this.each(d(i[o],n,a));return this}function Vv(e,n,a){var i=Lv(e),o=i.CustomEvent;typeof o=="function"?o=new o(n,a):(o=i.document.createEvent("Event"),a?(o.initEvent(n,a.bubbles,a.cancelable),o.detail=a.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function Q1(e,n){return function(){return Vv(this,e,n)}}function J1(e,n){return function(){return Vv(this,e,n.apply(this,arguments))}}function F1(e,n){return this.each((typeof n=="function"?J1:Q1)(e,n))}function*W1(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var i=e[n],o=0,c=i.length,u;o<c;++o)(u=i[o])&&(yield u)}var Pv=[null];function Jt(e,n){this._groups=e,this._parents=n}function yo(){return new Jt([[document.documentElement]],Pv)}function eE(){return this}Jt.prototype=yo.prototype={constructor:Jt,select:CS,selectAll:RS,selectChild:DS,selectChildren:LS,filter:HS,data:GS,enter:BS,exit:XS,join:KS,merge:ZS,selection:eE,order:QS,sort:JS,call:WS,nodes:e1,node:t1,size:n1,empty:r1,each:a1,attr:d1,style:m1,property:b1,classed:S1,text:A1,html:M1,raise:j1,lower:z1,append:$1,insert:L1,remove:B1,clone:V1,datum:P1,on:Z1,dispatch:F1,[Symbol.iterator]:W1};function Zt(e){return typeof e=="string"?new Jt([[document.querySelector(e)]],[document.documentElement]):new Jt([[e]],Pv)}function tE(e){let n;for(;n=e.sourceEvent;)e=n;return e}function mn(e,n){if(e=tE(e),n===void 0&&(n=e.currentTarget),n){var a=n.ownerSVGElement||n;if(a.createSVGPoint){var i=a.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}const nE={passive:!1},Fs={capture:!0,passive:!1};function Cf(e){e.stopImmediatePropagation()}function zi(e){e.preventDefault(),e.stopImmediatePropagation()}function Gv(e){var n=e.document.documentElement,a=Zt(e).on("dragstart.drag",zi,Fs);"onselectstart"in n?a.on("selectstart.drag",zi,Fs):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Yv(e,n){var a=e.document.documentElement,i=Zt(e).on("dragstart.drag",null);n&&(i.on("click.drag",zi,Fs),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in a?i.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}const Fl=e=>()=>e;function Jf(e,{sourceEvent:n,subject:a,target:i,identifier:o,active:c,x:u,y:d,dx:g,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:a,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Jf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function rE(e){return!e.ctrlKey&&!e.button}function aE(){return this.parentNode}function iE(e,n){return n??{x:e.x,y:e.y}}function sE(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xv(){var e=rE,n=aE,a=iE,i=sE,o={},c=Hc("start","drag","end"),u=0,d,g,h,p,v=0;function y(A){A.on("mousedown.drag",b).filter(i).on("touchstart.drag",C).on("touchmove.drag",E,nE).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(A,$){if(!(p||!e.call(this,A,$))){var j=w(this,n.call(this,A,$),A,$,"mouse");j&&(Zt(A.view).on("mousemove.drag",T,Fs).on("mouseup.drag",S,Fs),Gv(A.view),Cf(A),h=!1,d=A.clientX,g=A.clientY,j("start",A))}}function T(A){if(zi(A),!h){var $=A.clientX-d,j=A.clientY-g;h=$*$+j*j>v}o.mouse("drag",A)}function S(A){Zt(A.view).on("mousemove.drag mouseup.drag",null),Yv(A.view,h),zi(A),o.mouse("end",A)}function C(A,$){if(e.call(this,A,$)){var j=A.changedTouches,U=n.call(this,A,$),V=j.length,Y,oe;for(Y=0;Y<V;++Y)(oe=w(this,U,A,$,j[Y].identifier,j[Y]))&&(Cf(A),oe("start",A,j[Y]))}}function E(A){var $=A.changedTouches,j=$.length,U,V;for(U=0;U<j;++U)(V=o[$[U].identifier])&&(zi(A),V("drag",A,$[U]))}function R(A){var $=A.changedTouches,j=$.length,U,V;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),U=0;U<j;++U)(V=o[$[U].identifier])&&(Cf(A),V("end",A,$[U]))}function w(A,$,j,U,V,Y){var oe=c.copy(),ee=mn(Y||j,$),W,ne,k;if((k=a.call(A,new Jf("beforestart",{sourceEvent:j,target:y,identifier:V,active:u,x:ee[0],y:ee[1],dx:0,dy:0,dispatch:oe}),U))!=null)return W=k.x-ee[0]||0,ne=k.y-ee[1]||0,function P(M,L,B){var X=ee,z;switch(M){case"start":o[V]=P,z=u++;break;case"end":delete o[V],--u;case"drag":ee=mn(B||L,$),z=u;break}oe.call(M,A,new Jf(M,{sourceEvent:L,subject:k,target:y,identifier:V,active:z,x:ee[0]+W,y:ee[1]+ne,dx:ee[0]-X[0],dy:ee[1]-X[1],dispatch:oe}),U)}}return y.filter=function(A){return arguments.length?(e=typeof A=="function"?A:Fl(!!A),y):e},y.container=function(A){return arguments.length?(n=typeof A=="function"?A:Fl(A),y):n},y.subject=function(A){return arguments.length?(a=typeof A=="function"?A:Fl(A),y):a},y.touchable=function(A){return arguments.length?(i=typeof A=="function"?A:Fl(!!A),y):i},y.on=function(){var A=c.on.apply(c,arguments);return A===c?y:A},y.clickDistance=function(A){return arguments.length?(v=(A=+A)*A,y):Math.sqrt(v)},y}function Th(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function Kv(e,n){var a=Object.create(e.prototype);for(var i in n)a[i]=n[i];return a}function vo(){}var Ws=.7,Tc=1/Ws,$i="\\s*([+-]?\\d+)\\s*",eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oE=/^#([0-9a-f]{3,8})$/,lE=new RegExp(`^rgb\\(${$i},${$i},${$i}\\)$`),cE=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),uE=new RegExp(`^rgba\\(${$i},${$i},${$i},${eo}\\)$`),dE=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${eo}\\)$`),fE=new RegExp(`^hsl\\(${eo},${Nn},${Nn}\\)$`),hE=new RegExp(`^hsla\\(${eo},${Nn},${Nn},${eo}\\)$`),L0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Th(vo,Ta,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:H0,formatHex:H0,formatHex8:gE,formatHsl:mE,formatRgb:B0,toString:B0});function H0(){return this.rgb().formatHex()}function gE(){return this.rgb().formatHex8()}function mE(){return Zv(this).formatHsl()}function B0(){return this.rgb().formatRgb()}function Ta(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=oE.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?I0(n):a===3?new Ut(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?Wl(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?Wl(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=lE.exec(e))?new Ut(n[1],n[2],n[3],1):(n=cE.exec(e))?new Ut(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=uE.exec(e))?Wl(n[1],n[2],n[3],n[4]):(n=dE.exec(e))?Wl(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=fE.exec(e))?P0(n[1],n[2]/100,n[3]/100,1):(n=hE.exec(e))?P0(n[1],n[2]/100,n[3]/100,n[4]):L0.hasOwnProperty(e)?I0(L0[e]):e==="transparent"?new Ut(NaN,NaN,NaN,0):null}function I0(e){return new Ut(e>>16&255,e>>8&255,e&255,1)}function Wl(e,n,a,i){return i<=0&&(e=n=a=NaN),new Ut(e,n,a,i)}function pE(e){return e instanceof vo||(e=Ta(e)),e?(e=e.rgb(),new Ut(e.r,e.g,e.b,e.opacity)):new Ut}function Ff(e,n,a,i){return arguments.length===1?pE(e):new Ut(e,n,a,i??1)}function Ut(e,n,a,i){this.r=+e,this.g=+n,this.b=+a,this.opacity=+i}Th(Ut,Ff,Kv(vo,{brighter(e){return e=e==null?Tc:Math.pow(Tc,e),new Ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ws:Math.pow(Ws,e),new Ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ut(_a(this.r),_a(this.g),_a(this.b),Cc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:q0,formatHex:q0,formatHex8:yE,formatRgb:V0,toString:V0}));function q0(){return`#${wa(this.r)}${wa(this.g)}${wa(this.b)}`}function yE(){return`#${wa(this.r)}${wa(this.g)}${wa(this.b)}${wa((isNaN(this.opacity)?1:this.opacity)*255)}`}function V0(){const e=Cc(this.opacity);return`${e===1?"rgb(":"rgba("}${_a(this.r)}, ${_a(this.g)}, ${_a(this.b)}${e===1?")":`, ${e})`}`}function Cc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _a(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wa(e){return e=_a(e),(e<16?"0":"")+e.toString(16)}function P0(e,n,a,i){return i<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new yn(e,n,a,i)}function Zv(e){if(e instanceof yn)return new yn(e.h,e.s,e.l,e.opacity);if(e instanceof vo||(e=Ta(e)),!e)return new yn;if(e instanceof yn)return e;e=e.rgb();var n=e.r/255,a=e.g/255,i=e.b/255,o=Math.min(n,a,i),c=Math.max(n,a,i),u=NaN,d=c-o,g=(c+o)/2;return d?(n===c?u=(a-i)/d+(a<i)*6:a===c?u=(i-n)/d+2:u=(n-a)/d+4,d/=g<.5?c+o:2-c-o,u*=60):d=g>0&&g<1?0:u,new yn(u,d,g,e.opacity)}function vE(e,n,a,i){return arguments.length===1?Zv(e):new yn(e,n,a,i??1)}function yn(e,n,a,i){this.h=+e,this.s=+n,this.l=+a,this.opacity=+i}Th(yn,vE,Kv(vo,{brighter(e){return e=e==null?Tc:Math.pow(Tc,e),new yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ws:Math.pow(Ws,e),new yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,i=a+(a<.5?a:1-a)*n,o=2*a-i;return new Ut(Af(e>=240?e-240:e+120,o,i),Af(e,o,i),Af(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new yn(G0(this.h),ec(this.s),ec(this.l),Cc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cc(this.opacity);return`${e===1?"hsl(":"hsla("}${G0(this.h)}, ${ec(this.s)*100}%, ${ec(this.l)*100}%${e===1?")":`, ${e})`}`}}));function G0(e){return e=(e||0)%360,e<0?e+360:e}function ec(e){return Math.max(0,Math.min(1,e||0))}function Af(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const Ch=e=>()=>e;function bE(e,n){return function(a){return e+a*n}}function wE(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(i){return Math.pow(e+i*n,a)}}function xE(e){return(e=+e)==1?Qv:function(n,a){return a-n?wE(n,a,e):Ch(isNaN(n)?a:n)}}function Qv(e,n){var a=n-e;return a?bE(e,a):Ch(isNaN(e)?n:e)}const Ac=(function e(n){var a=xE(n);function i(o,c){var u=a((o=Ff(o)).r,(c=Ff(c)).r),d=a(o.g,c.g),g=a(o.b,c.b),h=Qv(o.opacity,c.opacity);return function(p){return o.r=u(p),o.g=d(p),o.b=g(p),o.opacity=h(p),o+""}}return i.gamma=e,i})(1);function _E(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,i=n.slice(),o;return function(c){for(o=0;o<a;++o)i[o]=e[o]*(1-c)+n[o]*c;return i}}function SE(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function EE(e,n){var a=n?n.length:0,i=e?Math.min(a,e.length):0,o=new Array(i),c=new Array(a),u;for(u=0;u<i;++u)o[u]=Ks(e[u],n[u]);for(;u<a;++u)c[u]=n[u];return function(d){for(u=0;u<i;++u)c[u]=o[u](d);return c}}function TE(e,n){var a=new Date;return e=+e,n=+n,function(i){return a.setTime(e*(1-i)+n*i),a}}function An(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function CE(e,n){var a={},i={},o;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in e?a[o]=Ks(e[o],n[o]):i[o]=n[o];return function(c){for(o in a)i[o]=a[o](c);return i}}var Wf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nf=new RegExp(Wf.source,"g");function AE(e){return function(){return e}}function NE(e){return function(n){return e(n)+""}}function Jv(e,n){var a=Wf.lastIndex=Nf.lastIndex=0,i,o,c,u=-1,d=[],g=[];for(e=e+"",n=n+"";(i=Wf.exec(e))&&(o=Nf.exec(n));)(c=o.index)>a&&(c=n.slice(a,c),d[u]?d[u]+=c:d[++u]=c),(i=i[0])===(o=o[0])?d[u]?d[u]+=o:d[++u]=o:(d[++u]=null,g.push({i:u,x:An(i,o)})),a=Nf.lastIndex;return a<n.length&&(c=n.slice(a),d[u]?d[u]+=c:d[++u]=c),d.length<2?g[0]?NE(g[0].x):AE(n):(n=g.length,function(h){for(var p=0,v;p<n;++p)d[(v=g[p]).i]=v.x(h);return d.join("")})}function Ks(e,n){var a=typeof n,i;return n==null||a==="boolean"?Ch(n):(a==="number"?An:a==="string"?(i=Ta(n))?(n=i,Ac):Jv:n instanceof Ta?Ac:n instanceof Date?TE:SE(n)?_E:Array.isArray(n)?EE:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?CE:An)(e,n)}var Y0=180/Math.PI,eh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fv(e,n,a,i,o,c){var u,d,g;return(u=Math.sqrt(e*e+n*n))&&(e/=u,n/=u),(g=e*a+n*i)&&(a-=e*g,i-=n*g),(d=Math.sqrt(a*a+i*i))&&(a/=d,i/=d,g/=d),e*i<n*a&&(e=-e,n=-n,g=-g,u=-u),{translateX:o,translateY:c,rotate:Math.atan2(n,e)*Y0,skewX:Math.atan(g)*Y0,scaleX:u,scaleY:d}}var tc;function OE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?eh:Fv(n.a,n.b,n.c,n.d,n.e,n.f)}function RE(e){return e==null||(tc||(tc=document.createElementNS("http://www.w3.org/2000/svg","g")),tc.setAttribute("transform",e),!(e=tc.transform.baseVal.consolidate()))?eh:(e=e.matrix,Fv(e.a,e.b,e.c,e.d,e.e,e.f))}function Wv(e,n,a,i){function o(h){return h.length?h.pop()+" ":""}function c(h,p,v,y,b,T){if(h!==v||p!==y){var S=b.push("translate(",null,n,null,a);T.push({i:S-4,x:An(h,v)},{i:S-2,x:An(p,y)})}else(v||y)&&b.push("translate("+v+n+y+a)}function u(h,p,v,y){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),y.push({i:v.push(o(v)+"rotate(",null,i)-2,x:An(h,p)})):p&&v.push(o(v)+"rotate("+p+i)}function d(h,p,v,y){h!==p?y.push({i:v.push(o(v)+"skewX(",null,i)-2,x:An(h,p)}):p&&v.push(o(v)+"skewX("+p+i)}function g(h,p,v,y,b,T){if(h!==v||p!==y){var S=b.push(o(b)+"scale(",null,",",null,")");T.push({i:S-4,x:An(h,v)},{i:S-2,x:An(p,y)})}else(v!==1||y!==1)&&b.push(o(b)+"scale("+v+","+y+")")}return function(h,p){var v=[],y=[];return h=e(h),p=e(p),c(h.translateX,h.translateY,p.translateX,p.translateY,v,y),u(h.rotate,p.rotate,v,y),d(h.skewX,p.skewX,v,y),g(h.scaleX,h.scaleY,p.scaleX,p.scaleY,v,y),h=p=null,function(b){for(var T=-1,S=y.length,C;++T<S;)v[(C=y[T]).i]=C.x(b);return v.join("")}}}var ME=Wv(OE,"px, ","px)","deg)"),kE=Wv(RE,", ",")",")"),jE=1e-12;function X0(e){return((e=Math.exp(e))+1/e)/2}function DE(e){return((e=Math.exp(e))-1/e)/2}function zE(e){return((e=Math.exp(2*e))-1)/(e+1)}const yc=(function e(n,a,i){function o(c,u){var d=c[0],g=c[1],h=c[2],p=u[0],v=u[1],y=u[2],b=p-d,T=v-g,S=b*b+T*T,C,E;if(S<jE)E=Math.log(y/h)/n,C=function(U){return[d+U*b,g+U*T,h*Math.exp(n*U*E)]};else{var R=Math.sqrt(S),w=(y*y-h*h+i*S)/(2*h*a*R),A=(y*y-h*h-i*S)/(2*y*a*R),$=Math.log(Math.sqrt(w*w+1)-w),j=Math.log(Math.sqrt(A*A+1)-A);E=(j-$)/n,C=function(U){var V=U*E,Y=X0($),oe=h/(a*R)*(Y*zE(n*V+$)-DE($));return[d+oe*b,g+oe*T,h*Y/X0(n*V+$)]}}return C.duration=E*1e3*n/Math.SQRT2,C}return o.rho=function(c){var u=Math.max(.001,+c),d=u*u,g=d*d;return e(u,d,g)},o})(Math.SQRT2,2,4);var Hi=0,Gs=0,qs=0,eb=1e3,Nc,Ys,Oc=0,Ca=0,Ic=0,to=typeof performance=="object"&&performance.now?performance:Date,tb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ah(){return Ca||(tb($E),Ca=to.now()+Ic)}function $E(){Ca=0}function Rc(){this._call=this._time=this._next=null}Rc.prototype=nb.prototype={constructor:Rc,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?Ah():+a)+(n==null?0:+n),!this._next&&Ys!==this&&(Ys?Ys._next=this:Nc=this,Ys=this),this._call=e,this._time=a,th()},stop:function(){this._call&&(this._call=null,this._time=1/0,th())}};function nb(e,n,a){var i=new Rc;return i.restart(e,n,a),i}function UE(){Ah(),++Hi;for(var e=Nc,n;e;)(n=Ca-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Hi}function K0(){Ca=(Oc=to.now())+Ic,Hi=Gs=0;try{UE()}finally{Hi=0,HE(),Ca=0}}function LE(){var e=to.now(),n=e-Oc;n>eb&&(Ic-=n,Oc=e)}function HE(){for(var e,n=Nc,a,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:Nc=a);Ys=e,th(i)}function th(e){if(!Hi){Gs&&(Gs=clearTimeout(Gs));var n=e-Ca;n>24?(e<1/0&&(Gs=setTimeout(K0,e-to.now()-Ic)),qs&&(qs=clearInterval(qs))):(qs||(Oc=to.now(),qs=setInterval(LE,eb)),Hi=1,tb(K0))}}function Z0(e,n,a){var i=new Rc;return n=n==null?0:+n,i.restart(o=>{i.stop(),e(o+n)},n,a),i}var BE=Hc("start","end","cancel","interrupt"),IE=[],rb=0,Q0=1,nh=2,vc=3,J0=4,rh=5,bc=6;function qc(e,n,a,i,o,c){var u=e.__transition;if(!u)e.__transition={};else if(a in u)return;qE(e,a,{name:n,index:i,group:o,on:BE,tween:IE,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:rb})}function Nh(e,n){var a=wn(e,n);if(a.state>rb)throw new Error("too late; already scheduled");return a}function Rn(e,n){var a=wn(e,n);if(a.state>vc)throw new Error("too late; already running");return a}function wn(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function qE(e,n,a){var i=e.__transition,o;i[n]=a,a.timer=nb(c,0,a.time);function c(h){a.state=Q0,a.timer.restart(u,a.delay,a.time),a.delay<=h&&u(h-a.delay)}function u(h){var p,v,y,b;if(a.state!==Q0)return g();for(p in i)if(b=i[p],b.name===a.name){if(b.state===vc)return Z0(u);b.state===J0?(b.state=bc,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete i[p]):+p<n&&(b.state=bc,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete i[p])}if(Z0(function(){a.state===vc&&(a.state=J0,a.timer.restart(d,a.delay,a.time),d(h))}),a.state=nh,a.on.call("start",e,e.__data__,a.index,a.group),a.state===nh){for(a.state=vc,o=new Array(y=a.tween.length),p=0,v=-1;p<y;++p)(b=a.tween[p].value.call(e,e.__data__,a.index,a.group))&&(o[++v]=b);o.length=v+1}}function d(h){for(var p=h<a.duration?a.ease.call(null,h/a.duration):(a.timer.restart(g),a.state=rh,1),v=-1,y=o.length;++v<y;)o[v].call(e,p);a.state===rh&&(a.on.call("end",e,e.__data__,a.index,a.group),g())}function g(){a.state=bc,a.timer.stop(),delete i[n];for(var h in i)return;delete e.__transition}}function wc(e,n){var a=e.__transition,i,o,c=!0,u;if(a){n=n==null?null:n+"";for(u in a){if((i=a[u]).name!==n){c=!1;continue}o=i.state>nh&&i.state<rh,i.state=bc,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete a[u]}c&&delete e.__transition}}function VE(e){return this.each(function(){wc(this,e)})}function PE(e,n){var a,i;return function(){var o=Rn(this,e),c=o.tween;if(c!==a){i=a=c;for(var u=0,d=i.length;u<d;++u)if(i[u].name===n){i=i.slice(),i.splice(u,1);break}}o.tween=i}}function GE(e,n,a){var i,o;if(typeof a!="function")throw new Error;return function(){var c=Rn(this,e),u=c.tween;if(u!==i){o=(i=u).slice();for(var d={name:n,value:a},g=0,h=o.length;g<h;++g)if(o[g].name===n){o[g]=d;break}g===h&&o.push(d)}c.tween=o}}function YE(e,n){var a=this._id;if(e+="",arguments.length<2){for(var i=wn(this.node(),a).tween,o=0,c=i.length,u;o<c;++o)if((u=i[o]).name===e)return u.value;return null}return this.each((n==null?PE:GE)(a,e,n))}function Oh(e,n,a){var i=e._id;return e.each(function(){var o=Rn(this,i);(o.value||(o.value={}))[n]=a.apply(this,arguments)}),function(o){return wn(o,i).value[n]}}function ab(e,n){var a;return(typeof n=="number"?An:n instanceof Ta?Ac:(a=Ta(n))?(n=a,Ac):Jv)(e,n)}function XE(e){return function(){this.removeAttribute(e)}}function KE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ZE(e,n,a){var i,o=a+"",c;return function(){var u=this.getAttribute(e);return u===o?null:u===i?c:c=n(i=u,a)}}function QE(e,n,a){var i,o=a+"",c;return function(){var u=this.getAttributeNS(e.space,e.local);return u===o?null:u===i?c:c=n(i=u,a)}}function JE(e,n,a){var i,o,c;return function(){var u,d=a(this),g;return d==null?void this.removeAttribute(e):(u=this.getAttribute(e),g=d+"",u===g?null:u===i&&g===o?c:(o=g,c=n(i=u,d)))}}function FE(e,n,a){var i,o,c;return function(){var u,d=a(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),g=d+"",u===g?null:u===i&&g===o?c:(o=g,c=n(i=u,d)))}}function WE(e,n){var a=Bc(e),i=a==="transform"?kE:ab;return this.attrTween(e,typeof n=="function"?(a.local?FE:JE)(a,i,Oh(this,"attr."+e,n)):n==null?(a.local?KE:XE)(a):(a.local?QE:ZE)(a,i,n))}function e2(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function t2(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function n2(e,n){var a,i;function o(){var c=n.apply(this,arguments);return c!==i&&(a=(i=c)&&t2(e,c)),a}return o._value=n,o}function r2(e,n){var a,i;function o(){var c=n.apply(this,arguments);return c!==i&&(a=(i=c)&&e2(e,c)),a}return o._value=n,o}function a2(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var i=Bc(e);return this.tween(a,(i.local?n2:r2)(i,n))}function i2(e,n){return function(){Nh(this,e).delay=+n.apply(this,arguments)}}function s2(e,n){return n=+n,function(){Nh(this,e).delay=n}}function o2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?i2:s2)(n,e)):wn(this.node(),n).delay}function l2(e,n){return function(){Rn(this,e).duration=+n.apply(this,arguments)}}function c2(e,n){return n=+n,function(){Rn(this,e).duration=n}}function u2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?l2:c2)(n,e)):wn(this.node(),n).duration}function d2(e,n){if(typeof n!="function")throw new Error;return function(){Rn(this,e).ease=n}}function f2(e){var n=this._id;return arguments.length?this.each(d2(n,e)):wn(this.node(),n).ease}function h2(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;Rn(this,e).ease=a}}function g2(e){if(typeof e!="function")throw new Error;return this.each(h2(this._id,e))}function m2(e){typeof e!="function"&&(e=zv(e));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var c=n[o],u=c.length,d=i[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new tr(i,this._parents,this._name,this._id)}function p2(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,i=n.length,o=a.length,c=Math.min(i,o),u=new Array(i),d=0;d<c;++d)for(var g=n[d],h=a[d],p=g.length,v=u[d]=new Array(p),y,b=0;b<p;++b)(y=g[b]||h[b])&&(v[b]=y);for(;d<i;++d)u[d]=n[d];return new tr(u,this._parents,this._name,this._id)}function y2(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function v2(e,n,a){var i,o,c=y2(n)?Nh:Rn;return function(){var u=c(this,e),d=u.on;d!==i&&(o=(i=d).copy()).on(n,a),u.on=o}}function b2(e,n){var a=this._id;return arguments.length<2?wn(this.node(),a).on.on(e):this.each(v2(a,e,n))}function w2(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function x2(){return this.on("end.remove",w2(this._id))}function _2(e){var n=this._name,a=this._id;typeof e!="function"&&(e=Sh(e));for(var i=this._groups,o=i.length,c=new Array(o),u=0;u<o;++u)for(var d=i[u],g=d.length,h=c[u]=new Array(g),p,v,y=0;y<g;++y)(p=d[y])&&(v=e.call(p,p.__data__,y,d))&&("__data__"in p&&(v.__data__=p.__data__),h[y]=v,qc(h[y],n,a,y,h,wn(p,a)));return new tr(c,this._parents,n,a)}function S2(e){var n=this._name,a=this._id;typeof e!="function"&&(e=Dv(e));for(var i=this._groups,o=i.length,c=[],u=[],d=0;d<o;++d)for(var g=i[d],h=g.length,p,v=0;v<h;++v)if(p=g[v]){for(var y=e.call(p,p.__data__,v,g),b,T=wn(p,a),S=0,C=y.length;S<C;++S)(b=y[S])&&qc(b,n,a,S,y,T);c.push(y),u.push(p)}return new tr(c,u,n,a)}var E2=yo.prototype.constructor;function T2(){return new E2(this._groups,this._parents)}function C2(e,n){var a,i,o;return function(){var c=Li(this,e),u=(this.style.removeProperty(e),Li(this,e));return c===u?null:c===a&&u===i?o:o=n(a=c,i=u)}}function ib(e){return function(){this.style.removeProperty(e)}}function A2(e,n,a){var i,o=a+"",c;return function(){var u=Li(this,e);return u===o?null:u===i?c:c=n(i=u,a)}}function N2(e,n,a){var i,o,c;return function(){var u=Li(this,e),d=a(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),Li(this,e))),u===g?null:u===i&&g===o?c:(o=g,c=n(i=u,d))}}function O2(e,n){var a,i,o,c="style."+n,u="end."+c,d;return function(){var g=Rn(this,e),h=g.on,p=g.value[c]==null?d||(d=ib(n)):void 0;(h!==a||o!==p)&&(i=(a=h).copy()).on(u,o=p),g.on=i}}function R2(e,n,a){var i=(e+="")=="transform"?ME:ab;return n==null?this.styleTween(e,C2(e,i)).on("end.style."+e,ib(e)):typeof n=="function"?this.styleTween(e,N2(e,i,Oh(this,"style."+e,n))).each(O2(this._id,e)):this.styleTween(e,A2(e,i,n),a).on("end.style."+e,null)}function M2(e,n,a){return function(i){this.style.setProperty(e,n.call(this,i),a)}}function k2(e,n,a){var i,o;function c(){var u=n.apply(this,arguments);return u!==o&&(i=(o=u)&&M2(e,u,a)),i}return c._value=n,c}function j2(e,n,a){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,k2(e,n,a??""))}function D2(e){return function(){this.textContent=e}}function z2(e){return function(){var n=e(this);this.textContent=n??""}}function $2(e){return this.tween("text",typeof e=="function"?z2(Oh(this,"text",e)):D2(e==null?"":e+""))}function U2(e){return function(n){this.textContent=e.call(this,n)}}function L2(e){var n,a;function i(){var o=e.apply(this,arguments);return o!==a&&(n=(a=o)&&U2(o)),n}return i._value=e,i}function H2(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,L2(e))}function B2(){for(var e=this._name,n=this._id,a=sb(),i=this._groups,o=i.length,c=0;c<o;++c)for(var u=i[c],d=u.length,g,h=0;h<d;++h)if(g=u[h]){var p=wn(g,n);qc(g,e,a,h,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new tr(i,this._parents,e,a)}function I2(){var e,n,a=this,i=a._id,o=a.size();return new Promise(function(c,u){var d={value:u},g={value:function(){--o===0&&c()}};a.each(function(){var h=Rn(this,i),p=h.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(g)),h.on=n}),o===0&&c()})}var q2=0;function tr(e,n,a,i){this._groups=e,this._parents=n,this._name=a,this._id=i}function sb(){return++q2}var Fn=yo.prototype;tr.prototype={constructor:tr,select:_2,selectAll:S2,selectChild:Fn.selectChild,selectChildren:Fn.selectChildren,filter:m2,merge:p2,selection:T2,transition:B2,call:Fn.call,nodes:Fn.nodes,node:Fn.node,size:Fn.size,empty:Fn.empty,each:Fn.each,on:b2,attr:WE,attrTween:a2,style:R2,styleTween:j2,text:$2,textTween:H2,remove:x2,tween:YE,delay:o2,duration:u2,ease:f2,easeVarying:g2,end:I2,[Symbol.iterator]:Fn[Symbol.iterator]};function V2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var P2={time:null,delay:0,duration:250,ease:V2};function G2(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function Y2(e){var n,a;e instanceof tr?(n=e._id,e=e._name):(n=sb(),(a=P2).time=Ah(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,c=0;c<o;++c)for(var u=i[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&qc(g,e,n,h,u,a||G2(g,n));return new tr(i,this._parents,e,n)}yo.prototype.interrupt=VE;yo.prototype.transition=Y2;const nc=e=>()=>e;function X2(e,{sourceEvent:n,target:a,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function er(e,n,a){this.k=e,this.x=n,this.y=a}er.prototype={constructor:er,scale:function(e){return e===1?this:new er(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new er(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vc=new er(1,0,0);ob.prototype=er.prototype;function ob(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Vc;return e.__zoom}function Of(e){e.stopImmediatePropagation()}function Vs(e){e.preventDefault(),e.stopImmediatePropagation()}function K2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Z2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function F0(){return this.__zoom||Vc}function Q2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function J2(){return navigator.maxTouchPoints||"ontouchstart"in this}function F2(e,n,a){var i=e.invertX(n[0][0])-a[0][0],o=e.invertX(n[1][0])-a[1][0],c=e.invertY(n[0][1])-a[0][1],u=e.invertY(n[1][1])-a[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function lb(){var e=K2,n=Z2,a=F2,i=Q2,o=J2,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,g=yc,h=Hc("start","zoom","end"),p,v,y,b=500,T=150,S=0,C=10;function E(k){k.property("__zoom",F0).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",oe).filter(o).on("touchstart.zoom",ee).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",ne).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(k,P,M,L){var B=k.selection?k.selection():k;B.property("__zoom",F0),k!==B?$(k,P,M,L):B.interrupt().each(function(){j(this,arguments).event(L).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},E.scaleBy=function(k,P,M,L){E.scaleTo(k,function(){var B=this.__zoom.k,X=typeof P=="function"?P.apply(this,arguments):P;return B*X},M,L)},E.scaleTo=function(k,P,M,L){E.transform(k,function(){var B=n.apply(this,arguments),X=this.__zoom,z=M==null?A(B):typeof M=="function"?M.apply(this,arguments):M,O=X.invert(z),D=typeof P=="function"?P.apply(this,arguments):P;return a(w(R(X,D),z,O),B,u)},M,L)},E.translateBy=function(k,P,M,L){E.transform(k,function(){return a(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof M=="function"?M.apply(this,arguments):M),n.apply(this,arguments),u)},null,L)},E.translateTo=function(k,P,M,L,B){E.transform(k,function(){var X=n.apply(this,arguments),z=this.__zoom,O=L==null?A(X):typeof L=="function"?L.apply(this,arguments):L;return a(Vc.translate(O[0],O[1]).scale(z.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof M=="function"?-M.apply(this,arguments):-M),X,u)},L,B)};function R(k,P){return P=Math.max(c[0],Math.min(c[1],P)),P===k.k?k:new er(P,k.x,k.y)}function w(k,P,M){var L=P[0]-M[0]*k.k,B=P[1]-M[1]*k.k;return L===k.x&&B===k.y?k:new er(k.k,L,B)}function A(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function $(k,P,M,L){k.on("start.zoom",function(){j(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(L).end()}).tween("zoom",function(){var B=this,X=arguments,z=j(B,X).event(L),O=n.apply(B,X),D=M==null?A(O):typeof M=="function"?M.apply(B,X):M,K=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),Z=B.__zoom,se=typeof P=="function"?P.apply(B,X):P,ue=g(Z.invert(D).concat(K/Z.k),se.invert(D).concat(K/se.k));return function(ce){if(ce===1)ce=se;else{var le=ue(ce),de=K/le[2];ce=new er(de,D[0]-le[0]*de,D[1]-le[1]*de)}z.zoom(null,ce)}})}function j(k,P,M){return!M&&k.__zooming||new U(k,P)}function U(k,P){this.that=k,this.args=P,this.active=0,this.sourceEvent=null,this.extent=n.apply(k,P),this.taps=0}U.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,P){return this.mouse&&k!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var P=Zt(this.that).datum();h.call(k,this.that,new X2(k,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:h}),P)}};function V(k,...P){if(!e.apply(this,arguments))return;var M=j(this,P).event(k),L=this.__zoom,B=Math.max(c[0],Math.min(c[1],L.k*Math.pow(2,i.apply(this,arguments)))),X=mn(k);if(M.wheel)(M.mouse[0][0]!==X[0]||M.mouse[0][1]!==X[1])&&(M.mouse[1]=L.invert(M.mouse[0]=X)),clearTimeout(M.wheel);else{if(L.k===B)return;M.mouse=[X,L.invert(X)],wc(this),M.start()}Vs(k),M.wheel=setTimeout(z,T),M.zoom("mouse",a(w(R(L,B),M.mouse[0],M.mouse[1]),M.extent,u));function z(){M.wheel=null,M.end()}}function Y(k,...P){if(y||!e.apply(this,arguments))return;var M=k.currentTarget,L=j(this,P,!0).event(k),B=Zt(k.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",K,!0),X=mn(k,M),z=k.clientX,O=k.clientY;Gv(k.view),Of(k),L.mouse=[X,this.__zoom.invert(X)],wc(this),L.start();function D(Z){if(Vs(Z),!L.moved){var se=Z.clientX-z,ue=Z.clientY-O;L.moved=se*se+ue*ue>S}L.event(Z).zoom("mouse",a(w(L.that.__zoom,L.mouse[0]=mn(Z,M),L.mouse[1]),L.extent,u))}function K(Z){B.on("mousemove.zoom mouseup.zoom",null),Yv(Z.view,L.moved),Vs(Z),L.event(Z).end()}}function oe(k,...P){if(e.apply(this,arguments)){var M=this.__zoom,L=mn(k.changedTouches?k.changedTouches[0]:k,this),B=M.invert(L),X=M.k*(k.shiftKey?.5:2),z=a(w(R(M,X),L,B),n.apply(this,P),u);Vs(k),d>0?Zt(this).transition().duration(d).call($,z,L,k):Zt(this).call(E.transform,z,L,k)}}function ee(k,...P){if(e.apply(this,arguments)){var M=k.touches,L=M.length,B=j(this,P,k.changedTouches.length===L).event(k),X,z,O,D;for(Of(k),z=0;z<L;++z)O=M[z],D=mn(O,this),D=[D,this.__zoom.invert(D),O.identifier],B.touch0?!B.touch1&&B.touch0[2]!==D[2]&&(B.touch1=D,B.taps=0):(B.touch0=D,X=!0,B.taps=1+!!p);p&&(p=clearTimeout(p)),X&&(B.taps<2&&(v=D[0],p=setTimeout(function(){p=null},b)),wc(this),B.start())}}function W(k,...P){if(this.__zooming){var M=j(this,P).event(k),L=k.changedTouches,B=L.length,X,z,O,D;for(Vs(k),X=0;X<B;++X)z=L[X],O=mn(z,this),M.touch0&&M.touch0[2]===z.identifier?M.touch0[0]=O:M.touch1&&M.touch1[2]===z.identifier&&(M.touch1[0]=O);if(z=M.that.__zoom,M.touch1){var K=M.touch0[0],Z=M.touch0[1],se=M.touch1[0],ue=M.touch1[1],ce=(ce=se[0]-K[0])*ce+(ce=se[1]-K[1])*ce,le=(le=ue[0]-Z[0])*le+(le=ue[1]-Z[1])*le;z=R(z,Math.sqrt(ce/le)),O=[(K[0]+se[0])/2,(K[1]+se[1])/2],D=[(Z[0]+ue[0])/2,(Z[1]+ue[1])/2]}else if(M.touch0)O=M.touch0[0],D=M.touch0[1];else return;M.zoom("touch",a(w(z,O,D),M.extent,u))}}function ne(k,...P){if(this.__zooming){var M=j(this,P).event(k),L=k.changedTouches,B=L.length,X,z;for(Of(k),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),X=0;X<B;++X)z=L[X],M.touch0&&M.touch0[2]===z.identifier?delete M.touch0:M.touch1&&M.touch1[2]===z.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(z=mn(z,this),Math.hypot(v[0]-z[0],v[1]-z[1])<C)){var O=Zt(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return E.wheelDelta=function(k){return arguments.length?(i=typeof k=="function"?k:nc(+k),E):i},E.filter=function(k){return arguments.length?(e=typeof k=="function"?k:nc(!!k),E):e},E.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:nc(!!k),E):o},E.extent=function(k){return arguments.length?(n=typeof k=="function"?k:nc([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),E):n},E.scaleExtent=function(k){return arguments.length?(c[0]=+k[0],c[1]=+k[1],E):[c[0],c[1]]},E.translateExtent=function(k){return arguments.length?(u[0][0]=+k[0][0],u[1][0]=+k[1][0],u[0][1]=+k[0][1],u[1][1]=+k[1][1],E):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},E.constrain=function(k){return arguments.length?(a=k,E):a},E.duration=function(k){return arguments.length?(d=+k,E):d},E.interpolate=function(k){return arguments.length?(g=k,E):g},E.on=function(){var k=h.on.apply(h,arguments);return k===h?E:k},E.clickDistance=function(k){return arguments.length?(S=(k=+k)*k,E):Math.sqrt(S)},E.tapDistance=function(k){return arguments.length?(C=+k,E):C},E}const On={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:a,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?a:i}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},no=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],cb=["Enter"," ","Escape"],ub={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:a})=>`Moved selected node ${e}. New position, x: ${n}, y: ${a}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Bi;(function(e){e.Strict="strict",e.Loose="loose"})(Bi||(Bi={}));var Sa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Sa||(Sa={}));var ro;(function(e){e.Partial="partial",e.Full="full"})(ro||(ro={}));const db={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Lr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Lr||(Lr={}));var Ea;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ea||(Ea={}));var he;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(he||(he={}));const W0={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function fb(e){return e===null?null:e?"valid":"invalid"}const hb=e=>"id"in e&&"source"in e&&"target"in e,W2=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Rh=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),bo=(e,n=[0,0])=>{const{width:a,height:i}=nr(e),o=e.origin??n,c=a*o[0],u=i*o[1];return{x:e.position.x-c,y:e.position.y-u}},eT=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const a=e.reduce((i,o)=>{const c=typeof o=="string";let u=!n.nodeLookup&&!c?o:void 0;n.nodeLookup&&(u=c?n.nodeLookup.get(o):Rh(o)?o:n.nodeLookup.get(o.id));const d=u?Mc(u,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Pc(i,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Gc(a)},wo=(e,n={})=>{let a={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(o=>{(n.filter===void 0||n.filter(o))&&(a=Pc(a,Mc(o)),i=!0)}),i?Gc(a):{x:0,y:0,width:0,height:0}},Mh=(e,n,[a,i,o]=[0,0,1],c=!1,u=!1)=>{const d={..._o(n,[a,i,o]),width:n.width/o,height:n.height/o},g=[];for(const h of e.values()){const{measured:p,selectable:v=!0,hidden:y=!1}=h;if(u&&!v||y)continue;const b=p.width??h.width??h.initialWidth??null,T=p.height??h.height??h.initialHeight??null,S=ao(d,qi(h)),C=(b??0)*(T??0),E=c&&S>0;(!h.internals.handleBounds||E||S>=C||h.dragging)&&g.push(h)}return g},tT=(e,n)=>{const a=new Set;return e.forEach(i=>{a.add(i.id)}),n.filter(i=>a.has(i.source)||a.has(i.target))};function nT(e,n){const a=new Map,i=n?.nodes?new Set(n.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(n?.includeHiddenNodes||!o.hidden)&&(!i||i.has(o.id))&&a.set(o.id,o)}),a}async function rT({nodes:e,width:n,height:a,panZoom:i,minZoom:o,maxZoom:c},u){if(e.size===0)return Promise.resolve(!0);const d=nT(e,u),g=wo(d),h=kh(g,n,a,u?.minZoom??o,u?.maxZoom??c,u?.padding??.1);return await i.setViewport(h,{duration:u?.duration,ease:u?.ease,interpolate:u?.interpolate}),Promise.resolve(!0)}function gb({nodeId:e,nextPosition:n,nodeLookup:a,nodeOrigin:i=[0,0],nodeExtent:o,onError:c}){const u=a.get(e),d=u.parentId?a.get(u.parentId):void 0,{x:g,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},p=u.origin??i;let v=u.extent||o;if(u.extent==="parent"&&!u.expandParent)if(!d)c?.("005",On.error005());else{const b=d.measured.width,T=d.measured.height;b&&T&&(v=[[g,h],[g+b,h+T]])}else d&&Vi(u.extent)&&(v=[[u.extent[0][0]+g,u.extent[0][1]+h],[u.extent[1][0]+g,u.extent[1][1]+h]]);const y=Vi(v)?Aa(n,v,u.measured):n;return(u.measured.width===void 0||u.measured.height===void 0)&&c?.("015",On.error015()),{position:{x:y.x-g+(u.measured.width??0)*p[0],y:y.y-h+(u.measured.height??0)*p[1]},positionAbsolute:y}}async function aT({nodesToRemove:e=[],edgesToRemove:n=[],nodes:a,edges:i,onBeforeDelete:o}){const c=new Set(e.map(y=>y.id)),u=[];for(const y of a){if(y.deletable===!1)continue;const b=c.has(y.id),T=!b&&y.parentId&&u.find(S=>S.id===y.parentId);(b||T)&&u.push(y)}const d=new Set(n.map(y=>y.id)),g=i.filter(y=>y.deletable!==!1),p=tT(u,g);for(const y of g)d.has(y.id)&&!p.find(T=>T.id===y.id)&&p.push(y);if(!o)return{edges:p,nodes:u};const v=await o({nodes:u,edges:p});return typeof v=="boolean"?v?{edges:p,nodes:u}:{edges:[],nodes:[]}:v}const Ii=(e,n=0,a=1)=>Math.min(Math.max(e,n),a),Aa=(e={x:0,y:0},n,a)=>({x:Ii(e.x,n[0][0],n[1][0]-(a?.width??0)),y:Ii(e.y,n[0][1],n[1][1]-(a?.height??0))});function mb(e,n,a){const{width:i,height:o}=nr(a),{x:c,y:u}=a.internals.positionAbsolute;return Aa(e,[[c,u],[c+i,u+o]],n)}const ey=(e,n,a)=>e<n?Ii(Math.abs(e-n),1,n)/n:e>a?-Ii(Math.abs(e-a),1,n)/n:0,pb=(e,n,a=15,i=40)=>{const o=ey(e.x,i,n.width-i)*a,c=ey(e.y,i,n.height-i)*a;return[o,c]},Pc=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),ah=({x:e,y:n,width:a,height:i})=>({x:e,y:n,x2:e+a,y2:n+i}),Gc=({x:e,y:n,x2:a,y2:i})=>({x:e,y:n,width:a-e,height:i-n}),qi=(e,n=[0,0])=>{const{x:a,y:i}=Rh(e)?e.internals.positionAbsolute:bo(e,n);return{x:a,y:i,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Mc=(e,n=[0,0])=>{const{x:a,y:i}=Rh(e)?e.internals.positionAbsolute:bo(e,n);return{x:a,y:i,x2:a+(e.measured?.width??e.width??e.initialWidth??0),y2:i+(e.measured?.height??e.height??e.initialHeight??0)}},yb=(e,n)=>Gc(Pc(ah(e),ah(n))),ao=(e,n)=>{const a=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),i=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(a*i)},ty=e=>vn(e.width)&&vn(e.height)&&vn(e.x)&&vn(e.y),vn=e=>!isNaN(e)&&isFinite(e),iT=(e,n)=>{},xo=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),_o=({x:e,y:n},[a,i,o],c=!1,u=[1,1])=>{const d={x:(e-a)/o,y:(n-i)/o};return c?xo(d,u):d},kc=({x:e,y:n},[a,i,o])=>({x:e*o+a,y:n*o+i});function bi(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const a=parseFloat(e);if(!Number.isNaN(a))return Math.floor(a)}if(typeof e=="string"&&e.endsWith("%")){const a=parseFloat(e);if(!Number.isNaN(a))return Math.floor(n*a*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function sT(e,n,a){if(typeof e=="string"||typeof e=="number"){const i=bi(e,a),o=bi(e,n);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof e=="object"){const i=bi(e.top??e.y??0,a),o=bi(e.bottom??e.y??0,a),c=bi(e.left??e.x??0,n),u=bi(e.right??e.x??0,n);return{top:i,right:u,bottom:o,left:c,x:c+u,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function oT(e,n,a,i,o,c){const{x:u,y:d}=kc(e,[n,a,i]),{x:g,y:h}=kc({x:e.x+e.width,y:e.y+e.height},[n,a,i]),p=o-g,v=c-h;return{left:Math.floor(u),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(v)}}const kh=(e,n,a,i,o,c)=>{const u=sT(c,n,a),d=(n-u.x)/e.width,g=(a-u.y)/e.height,h=Math.min(d,g),p=Ii(h,i,o),v=e.x+e.width/2,y=e.y+e.height/2,b=n/2-v*p,T=a/2-y*p,S=oT(e,b,T,p,n,a),C={left:Math.min(S.left-u.left,0),top:Math.min(S.top-u.top,0),right:Math.min(S.right-u.right,0),bottom:Math.min(S.bottom-u.bottom,0)};return{x:b-C.left+C.right,y:T-C.top+C.bottom,zoom:p}},io=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Vi(e){return e!=null&&e!=="parent"}function nr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function vb(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function bb(e,n={width:0,height:0},a,i,o){const c={...e},u=i.get(a);if(u){const d=u.origin||o;c.x+=u.internals.positionAbsolute.x-(n.width??0)*d[0],c.y+=u.internals.positionAbsolute.y-(n.height??0)*d[1]}return c}function ny(e,n){if(e.size!==n.size)return!1;for(const a of e)if(!n.has(a))return!1;return!0}function lT(){let e,n;return{promise:new Promise((i,o)=>{e=i,n=o}),resolve:e,reject:n}}function cT(e){return{...ub,...e||{}}}function Zs(e,{snapGrid:n=[0,0],snapToGrid:a=!1,transform:i,containerBounds:o}){const{x:c,y:u}=bn(e),d=_o({x:c-(o?.left??0),y:u-(o?.top??0)},i),{x:g,y:h}=a?xo(d,n):d;return{xSnapped:g,ySnapped:h,...d}}const jh=e=>({width:e.offsetWidth,height:e.offsetHeight}),wb=e=>e?.getRootNode?.()||window?.document,uT=["INPUT","SELECT","TEXTAREA"];function xb(e){const n=e.composedPath?.()?.[0]||e.target;return n?.nodeType!==1?!1:uT.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const _b=e=>"clientX"in e,bn=(e,n)=>{const a=_b(e),i=a?e.clientX:e.touches?.[0].clientX,o=a?e.clientY:e.touches?.[0].clientY;return{x:i-(n?.left??0),y:o-(n?.top??0)}},ry=(e,n,a,i,o)=>{const c=n.querySelectorAll(`.${e}`);return!c||!c.length?null:Array.from(c).map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:o,position:u.getAttribute("data-handlepos"),x:(d.left-a.left)/i,y:(d.top-a.top)/i,...jh(u)}})};function Sb({sourceX:e,sourceY:n,targetX:a,targetY:i,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d}){const g=e*.125+o*.375+u*.375+a*.125,h=n*.125+c*.375+d*.375+i*.125,p=Math.abs(g-e),v=Math.abs(h-n);return[g,h,p,v]}function rc(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function ay({pos:e,x1:n,y1:a,x2:i,y2:o,c}){switch(e){case he.Left:return[n-rc(n-i,c),a];case he.Right:return[n+rc(i-n,c),a];case he.Top:return[n,a-rc(a-o,c)];case he.Bottom:return[n,a+rc(o-a,c)]}}function Eb({sourceX:e,sourceY:n,sourcePosition:a=he.Bottom,targetX:i,targetY:o,targetPosition:c=he.Top,curvature:u=.25}){const[d,g]=ay({pos:a,x1:e,y1:n,x2:i,y2:o,c:u}),[h,p]=ay({pos:c,x1:i,y1:o,x2:e,y2:n,c:u}),[v,y,b,T]=Sb({sourceX:e,sourceY:n,targetX:i,targetY:o,sourceControlX:d,sourceControlY:g,targetControlX:h,targetControlY:p});return[`M${e},${n} C${d},${g} ${h},${p} ${i},${o}`,v,y,b,T]}function Tb({sourceX:e,sourceY:n,targetX:a,targetY:i}){const o=Math.abs(a-e)/2,c=a<e?a+o:a-o,u=Math.abs(i-n)/2,d=i<n?i+u:i-u;return[c,d,o,u]}function dT({sourceNode:e,targetNode:n,selected:a=!1,zIndex:i,elevateOnSelect:o=!1}){if(i!==void 0)return i;const c=o&&a?1e3:0,u=Math.max(e.parentId||o&&e.selected?e.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return c+u}function fT({sourceNode:e,targetNode:n,width:a,height:i,transform:o}){const c=Pc(Mc(e),Mc(n));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u={x:-o[0]/o[2],y:-o[1]/o[2],width:a/o[2],height:i/o[2]};return ao(u,Gc(c))>0}const hT=({source:e,sourceHandle:n,target:a,targetHandle:i})=>`xy-edge__${e}${n||""}-${a}${i||""}`,gT=(e,n)=>n.some(a=>a.source===e.source&&a.target===e.target&&(a.sourceHandle===e.sourceHandle||!a.sourceHandle&&!e.sourceHandle)&&(a.targetHandle===e.targetHandle||!a.targetHandle&&!e.targetHandle)),Cb=(e,n)=>{if(!e.source||!e.target)return n;let a;return hb(e)?a={...e}:a={...e,id:hT(e)},gT(a,n)?n:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,n.concat(a))};function Ab({sourceX:e,sourceY:n,targetX:a,targetY:i}){const[o,c,u,d]=Tb({sourceX:e,sourceY:n,targetX:a,targetY:i});return[`M ${e},${n}L ${a},${i}`,o,c,u,d]}const iy={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},mT=({source:e,sourcePosition:n=he.Bottom,target:a})=>n===he.Left||n===he.Right?e.x<a.x?{x:1,y:0}:{x:-1,y:0}:e.y<a.y?{x:0,y:1}:{x:0,y:-1},sy=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function pT({source:e,sourcePosition:n=he.Bottom,target:a,targetPosition:i=he.Top,center:o,offset:c,stepPosition:u}){const d=iy[n],g=iy[i],h={x:e.x+d.x*c,y:e.y+d.y*c},p={x:a.x+g.x*c,y:a.y+g.y*c},v=mT({source:h,sourcePosition:n,target:p}),y=v.x!==0?"x":"y",b=v[y];let T=[],S,C;const E={x:0,y:0},R={x:0,y:0},[,,w,A]=Tb({sourceX:e.x,sourceY:e.y,targetX:a.x,targetY:a.y});if(d[y]*g[y]===-1){y==="x"?(S=o.x??h.x+(p.x-h.x)*u,C=o.y??(h.y+p.y)/2):(S=o.x??(h.x+p.x)/2,C=o.y??h.y+(p.y-h.y)*u);const j=[{x:S,y:h.y},{x:S,y:p.y}],U=[{x:h.x,y:C},{x:p.x,y:C}];d[y]===b?T=y==="x"?j:U:T=y==="x"?U:j}else{const j=[{x:h.x,y:p.y}],U=[{x:p.x,y:h.y}];if(y==="x"?T=d.x===b?U:j:T=d.y===b?j:U,n===i){const W=Math.abs(e[y]-a[y]);if(W<=c){const ne=Math.min(c-1,c-W);d[y]===b?E[y]=(h[y]>e[y]?-1:1)*ne:R[y]=(p[y]>a[y]?-1:1)*ne}}if(n!==i){const W=y==="x"?"y":"x",ne=d[y]===g[W],k=h[W]>p[W],P=h[W]<p[W];(d[y]===1&&(!ne&&k||ne&&P)||d[y]!==1&&(!ne&&P||ne&&k))&&(T=y==="x"?j:U)}const V={x:h.x+E.x,y:h.y+E.y},Y={x:p.x+R.x,y:p.y+R.y},oe=Math.max(Math.abs(V.x-T[0].x),Math.abs(Y.x-T[0].x)),ee=Math.max(Math.abs(V.y-T[0].y),Math.abs(Y.y-T[0].y));oe>=ee?(S=(V.x+Y.x)/2,C=T[0].y):(S=T[0].x,C=(V.y+Y.y)/2)}return[[e,{x:h.x+E.x,y:h.y+E.y},...T,{x:p.x+R.x,y:p.y+R.y},a],S,C,w,A]}function yT(e,n,a,i){const o=Math.min(sy(e,n)/2,sy(n,a)/2,i),{x:c,y:u}=n;if(e.x===c&&c===a.x||e.y===u&&u===a.y)return`L${c} ${u}`;if(e.y===u){const h=e.x<a.x?-1:1,p=e.y<a.y?1:-1;return`L ${c+o*h},${u}Q ${c},${u} ${c},${u+o*p}`}const d=e.x<a.x?1:-1,g=e.y<a.y?-1:1;return`L ${c},${u+o*g}Q ${c},${u} ${c+o*d},${u}`}function ih({sourceX:e,sourceY:n,sourcePosition:a=he.Bottom,targetX:i,targetY:o,targetPosition:c=he.Top,borderRadius:u=5,centerX:d,centerY:g,offset:h=20,stepPosition:p=.5}){const[v,y,b,T,S]=pT({source:{x:e,y:n},sourcePosition:a,target:{x:i,y:o},targetPosition:c,center:{x:d,y:g},offset:h,stepPosition:p});return[v.reduce((E,R,w)=>{let A="";return w>0&&w<v.length-1?A=yT(v[w-1],R,v[w+1],u):A=`${w===0?"M":"L"}${R.x} ${R.y}`,E+=A,E},""),y,b,T,S]}function oy(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function vT(e){const{sourceNode:n,targetNode:a}=e;if(!oy(n)||!oy(a))return null;const i=n.internals.handleBounds||ly(n.handles),o=a.internals.handleBounds||ly(a.handles),c=cy(i?.source??[],e.sourceHandle),u=cy(e.connectionMode===Bi.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!c||!u)return e.onError?.("008",On.error008(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=c?.position||he.Bottom,g=u?.position||he.Top,h=so(n,c,d),p=so(a,u,g);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:g}}function ly(e){if(!e)return null;const n=[],a=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?n.push(i):i.type==="target"&&a.push(i);return{source:n,target:a}}function so(e,n,a=he.Left,i=!1){const o=(n?.x??0)+e.internals.positionAbsolute.x,c=(n?.y??0)+e.internals.positionAbsolute.y,{width:u,height:d}=n??nr(e);if(i)return{x:o+u/2,y:c+d/2};switch(n?.position??a){case he.Top:return{x:o+u/2,y:c};case he.Right:return{x:o+u,y:c+d/2};case he.Bottom:return{x:o+u/2,y:c+d};case he.Left:return{x:o,y:c+d/2}}}function cy(e,n){return e&&(n?e.find(a=>a.id===n):e[0])||null}function sh(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function bT(e,{id:n,defaultColor:a,defaultMarkerStart:i,defaultMarkerEnd:o}){const c=new Set;return e.reduce((u,d)=>([d.markerStart||i,d.markerEnd||o].forEach(g=>{if(g&&typeof g=="object"){const h=sh(g,n);c.has(h)||(u.push({id:h,color:g.color||a,...g}),c.add(h))}}),u),[]).sort((u,d)=>u.id.localeCompare(d.id))}const Nb=1e3,wT=10,Dh={nodeOrigin:[0,0],nodeExtent:no,elevateNodesOnSelect:!0,defaults:{}},xT={...Dh,checkEquality:!0};function zh(e,n){const a={...e};for(const i in n)n[i]!==void 0&&(a[i]=n[i]);return a}function _T(e,n,a){const i=zh(Dh,a);for(const o of e.values())if(o.parentId)$h(o,e,n,i);else{const c=bo(o,i.nodeOrigin),u=Vi(o.extent)?o.extent:i.nodeExtent,d=Aa(c,u,nr(o));o.internals.positionAbsolute=d}}function ST(e,n){if(!e.handles)return e.measured?n?.internals.handleBounds:void 0;const a=[],i=[];for(const o of e.handles){const c={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?a.push(c):o.type==="target"&&i.push(c)}return{source:a,target:i}}function oh(e,n,a,i){const o=zh(xT,i);let c={i:-1},u=e.length>0;const d=new Map(n),g=o?.elevateNodesOnSelect?Nb:0;n.clear(),a.clear();for(const h of e){let p=d.get(h.id);if(o.checkEquality&&h===p?.internals.userNode)n.set(h.id,p);else{const v=bo(h,o.nodeOrigin),y=Vi(h.extent)?h.extent:o.nodeExtent,b=Aa(v,y,nr(h));p={...o.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:b,handleBounds:ST(h,p),z:Ob(h,g),userNode:h}},n.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(u=!1),h.parentId&&$h(p,n,a,i,c)}return u}function ET(e,n){if(!e.parentId)return;const a=n.get(e.parentId);a?a.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function $h(e,n,a,i,o){const{elevateNodesOnSelect:c,nodeOrigin:u,nodeExtent:d}=zh(Dh,i),g=e.parentId,h=n.get(g);if(!h){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}ET(e,a),o&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++o.i,h.internals.z=h.internals.z+o.i*wT),o&&h.internals.rootParentIndex!==void 0&&(o.i=h.internals.rootParentIndex);const p=c?Nb:0,{x:v,y,z:b}=TT(e,h,u,d,p),{positionAbsolute:T}=e.internals,S=v!==T.x||y!==T.y;(S||b!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:S?{x:v,y}:T,z:b}})}function Ob(e,n){return(vn(e.zIndex)?e.zIndex:0)+(e.selected?n:0)}function TT(e,n,a,i,o){const{x:c,y:u}=n.internals.positionAbsolute,d=nr(e),g=bo(e,a),h=Vi(e.extent)?Aa(g,e.extent,d):g;let p=Aa({x:c+h.x,y:u+h.y},i,d);e.extent==="parent"&&(p=mb(p,d,n));const v=Ob(e,o),y=n.internals.z??0;return{x:p.x,y:p.y,z:y>=v?y+1:v}}function Uh(e,n,a,i=[0,0]){const o=[],c=new Map;for(const u of e){const d=n.get(u.parentId);if(!d)continue;const g=c.get(u.parentId)?.expandedRect??qi(d),h=yb(g,u.rect);c.set(u.parentId,{expandedRect:h,parent:d})}return c.size>0&&c.forEach(({expandedRect:u,parent:d},g)=>{const h=d.internals.positionAbsolute,p=nr(d),v=d.origin??i,y=u.x<h.x?Math.round(Math.abs(h.x-u.x)):0,b=u.y<h.y?Math.round(Math.abs(h.y-u.y)):0,T=Math.max(p.width,Math.round(u.width)),S=Math.max(p.height,Math.round(u.height)),C=(T-p.width)*v[0],E=(S-p.height)*v[1];(y>0||b>0||C||E)&&(o.push({id:g,type:"position",position:{x:d.position.x-y+C,y:d.position.y-b+E}}),a.get(g)?.forEach(R=>{e.some(w=>w.id===R.id)||o.push({id:R.id,type:"position",position:{x:R.position.x+y,y:R.position.y+b}})})),(p.width<u.width||p.height<u.height||y||b)&&o.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:T+(y?v[0]*y-C:0),height:S+(b?v[1]*b-E:0)}})}),o}function CT(e,n,a,i,o,c){const u=i?.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const g=[],h=window.getComputedStyle(u),{m22:p}=new window.DOMMatrixReadOnly(h.transform),v=[];for(const y of e.values()){const b=n.get(y.id);if(!b)continue;if(b.hidden){n.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const T=jh(y.nodeElement),S=b.measured.width!==T.width||b.measured.height!==T.height;if(!!(T.width&&T.height&&(S||!b.internals.handleBounds||y.force))){const E=y.nodeElement.getBoundingClientRect(),R=Vi(b.extent)?b.extent:c;let{positionAbsolute:w}=b.internals;b.parentId&&b.extent==="parent"?w=mb(w,T,n.get(b.parentId)):R&&(w=Aa(w,R,T));const A={...b,measured:T,internals:{...b.internals,positionAbsolute:w,handleBounds:{source:ry("source",y.nodeElement,E,p,b.id),target:ry("target",y.nodeElement,E,p,b.id)}}};n.set(b.id,A),b.parentId&&$h(A,n,a,{nodeOrigin:o}),d=!0,S&&(g.push({id:b.id,type:"dimensions",dimensions:T}),b.expandParent&&b.parentId&&v.push({id:b.id,parentId:b.parentId,rect:qi(A,o)}))}}if(v.length>0){const y=Uh(v,n,a,o);g.push(...y)}return{changes:g,updatedInternals:d}}async function AT({delta:e,panZoom:n,transform:a,translateExtent:i,width:o,height:c}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const u=await n.setViewportConstrained({x:a[0]+e.x,y:a[1]+e.y,zoom:a[2]},[[0,0],[o,c]],i),d=!!u&&(u.x!==a[0]||u.y!==a[1]||u.k!==a[2]);return Promise.resolve(d)}function uy(e,n,a,i,o,c){let u=o;const d=i.get(u)||new Map;i.set(u,d.set(a,n)),u=`${o}-${e}`;const g=i.get(u)||new Map;if(i.set(u,g.set(a,n)),c){u=`${o}-${e}-${c}`;const h=i.get(u)||new Map;i.set(u,h.set(a,n))}}function Rb(e,n,a){e.clear(),n.clear();for(const i of a){const{source:o,target:c,sourceHandle:u=null,targetHandle:d=null}=i,g={edgeId:i.id,source:o,target:c,sourceHandle:u,targetHandle:d},h=`${o}-${u}--${c}-${d}`,p=`${c}-${d}--${o}-${u}`;uy("source",g,p,e,o,u),uy("target",g,h,e,c,d),n.set(i.id,i)}}function Mb(e,n){if(!e.parentId)return!1;const a=n.get(e.parentId);return a?a.selected?!0:Mb(a,n):!1}function dy(e,n,a){let i=e;do{if(i?.matches?.(n))return!0;if(i===a)return!1;i=i?.parentElement}while(i);return!1}function NT(e,n,a,i){const o=new Map;for(const[c,u]of e)if((u.selected||u.id===i)&&(!u.parentId||!Mb(u,e))&&(u.draggable||n&&typeof u.draggable>"u")){const d=e.get(c);d&&o.set(c,{id:c,position:d.position||{x:0,y:0},distance:{x:a.x-d.internals.positionAbsolute.x,y:a.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return o}function Rf({nodeId:e,dragItems:n,nodeLookup:a,dragging:i=!0}){const o=[];for(const[u,d]of n){const g=a.get(u)?.internals.userNode;g&&o.push({...g,position:d.position,dragging:i})}if(!e)return[o[0],o];const c=a.get(e)?.internals.userNode;return[c?{...c,position:n.get(e)?.position||c.position,dragging:i}:o[0],o]}function OT({dragItems:e,snapGrid:n,x:a,y:i}){const o=e.values().next().value;if(!o)return null;const c={x:a-o.distance.x,y:i-o.distance.y},u=xo(c,n);return{x:u.x-c.x,y:u.y-c.y}}function RT({onNodeMouseDown:e,getStoreItems:n,onDragStart:a,onDrag:i,onDragStop:o}){let c={x:null,y:null},u=0,d=new Map,g=!1,h={x:0,y:0},p=null,v=!1,y=null,b=!1,T=!1,S=null;function C({noDragClassName:R,handleSelector:w,domNode:A,isSelectable:$,nodeId:j,nodeClickDistance:U=0}){y=Zt(A);function V({x:W,y:ne}){const{nodeLookup:k,nodeExtent:P,snapGrid:M,snapToGrid:L,nodeOrigin:B,onNodeDrag:X,onSelectionDrag:z,onError:O,updateNodePositions:D}=n();c={x:W,y:ne};let K=!1;const Z=d.size>1,se=Z&&P?ah(wo(d)):null,ue=Z&&L?OT({dragItems:d,snapGrid:M,x:W,y:ne}):null;for(const[ce,le]of d){if(!k.has(ce))continue;let de={x:W-le.distance.x,y:ne-le.distance.y};L&&(de=ue?{x:Math.round(de.x+ue.x),y:Math.round(de.y+ue.y)}:xo(de,M));let Te=null;if(Z&&P&&!le.extent&&se){const{positionAbsolute:_e}=le.internals,Ce=_e.x-se.x+P[0][0],Ie=_e.x+le.measured.width-se.x2+P[1][0],Ge=_e.y-se.y+P[0][1],mt=_e.y+le.measured.height-se.y2+P[1][1];Te=[[Ce,Ge],[Ie,mt]]}const{position:Se,positionAbsolute:ye}=gb({nodeId:ce,nextPosition:de,nodeLookup:k,nodeExtent:Te||P,nodeOrigin:B,onError:O});K=K||le.position.x!==Se.x||le.position.y!==Se.y,le.position=Se,le.internals.positionAbsolute=ye}if(T=T||K,!!K&&(D(d,!0),S&&(i||X||!j&&z))){const[ce,le]=Rf({nodeId:j,dragItems:d,nodeLookup:k});i?.(S,d,ce,le),X?.(S,ce,le),j||z?.(S,le)}}async function Y(){if(!p)return;const{transform:W,panBy:ne,autoPanSpeed:k,autoPanOnNodeDrag:P}=n();if(!P){g=!1,cancelAnimationFrame(u);return}const[M,L]=pb(h,p,k);(M!==0||L!==0)&&(c.x=(c.x??0)-M/W[2],c.y=(c.y??0)-L/W[2],await ne({x:M,y:L})&&V(c)),u=requestAnimationFrame(Y)}function oe(W){const{nodeLookup:ne,multiSelectionActive:k,nodesDraggable:P,transform:M,snapGrid:L,snapToGrid:B,selectNodesOnDrag:X,onNodeDragStart:z,onSelectionDragStart:O,unselectNodesAndEdges:D}=n();v=!0,(!X||!$)&&!k&&j&&(ne.get(j)?.selected||D()),$&&X&&j&&e?.(j);const K=Zs(W.sourceEvent,{transform:M,snapGrid:L,snapToGrid:B,containerBounds:p});if(c=K,d=NT(ne,P,K,j),d.size>0&&(a||z||!j&&O)){const[Z,se]=Rf({nodeId:j,dragItems:d,nodeLookup:ne});a?.(W.sourceEvent,d,Z,se),z?.(W.sourceEvent,Z,se),j||O?.(W.sourceEvent,se)}}const ee=Xv().clickDistance(U).on("start",W=>{const{domNode:ne,nodeDragThreshold:k,transform:P,snapGrid:M,snapToGrid:L}=n();p=ne?.getBoundingClientRect()||null,b=!1,T=!1,S=W.sourceEvent,k===0&&oe(W),c=Zs(W.sourceEvent,{transform:P,snapGrid:M,snapToGrid:L,containerBounds:p}),h=bn(W.sourceEvent,p)}).on("drag",W=>{const{autoPanOnNodeDrag:ne,transform:k,snapGrid:P,snapToGrid:M,nodeDragThreshold:L,nodeLookup:B}=n(),X=Zs(W.sourceEvent,{transform:k,snapGrid:P,snapToGrid:M,containerBounds:p});if(S=W.sourceEvent,(W.sourceEvent.type==="touchmove"&&W.sourceEvent.touches.length>1||j&&!B.has(j))&&(b=!0),!b){if(!g&&ne&&v&&(g=!0,Y()),!v){const z=bn(W.sourceEvent,p),O=z.x-h.x,D=z.y-h.y;Math.sqrt(O*O+D*D)>L&&oe(W)}(c.x!==X.xSnapped||c.y!==X.ySnapped)&&d&&v&&(h=bn(W.sourceEvent,p),V(X))}}).on("end",W=>{if(!(!v||b)&&(g=!1,v=!1,cancelAnimationFrame(u),d.size>0)){const{nodeLookup:ne,updateNodePositions:k,onNodeDragStop:P,onSelectionDragStop:M}=n();if(T&&(k(d,!1),T=!1),o||P||!j&&M){const[L,B]=Rf({nodeId:j,dragItems:d,nodeLookup:ne,dragging:!1});o?.(W.sourceEvent,d,L,B),P?.(W.sourceEvent,L,B),j||M?.(W.sourceEvent,B)}}}).filter(W=>{const ne=W.target;return!W.button&&(!R||!dy(ne,`.${R}`,A))&&(!w||dy(ne,w,A))});y.call(ee)}function E(){y?.on(".drag",null)}return{update:C,destroy:E}}function MT(e,n,a){const i=[],o={x:e.x-a,y:e.y-a,width:a*2,height:a*2};for(const c of n.values())ao(o,qi(c))>0&&i.push(c);return i}const kT=250;function jT(e,n,a,i){let o=[],c=1/0;const u=MT(e,a,n+kT);for(const d of u){const g=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of g){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:p,y:v}=so(d,h,h.position,!0),y=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(v-e.y,2));y>n||(y<c?(o=[{...h,x:p,y:v}],c=y):y===c&&o.push({...h,x:p,y:v}))}}if(!o.length)return null;if(o.length>1){const d=i.type==="source"?"target":"source";return o.find(g=>g.type===d)??o[0]}return o[0]}function kb(e,n,a,i,o,c=!1){const u=i.get(e);if(!u)return null;const d=o==="strict"?u.internals.handleBounds?.[n]:[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]],g=(a?d?.find(h=>h.id===a):d?.[0])??null;return g&&c?{...g,...so(u,g,g.position,!0)}:g}function jb(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function DT(e,n){let a=null;return n?a=!0:e&&!n&&(a=!1),a}const Db=()=>!0;function zT(e,{connectionMode:n,connectionRadius:a,handleId:i,nodeId:o,edgeUpdaterType:c,isTarget:u,domNode:d,nodeLookup:g,lib:h,autoPanOnConnect:p,flowId:v,panBy:y,cancelConnection:b,onConnectStart:T,onConnect:S,onConnectEnd:C,isValidConnection:E=Db,onReconnectEnd:R,updateConnection:w,getTransform:A,getFromHandle:$,autoPanSpeed:j,dragThreshold:U=1,handleDomNode:V}){const Y=wb(e.target);let oe=0,ee;const{x:W,y:ne}=bn(e),k=jb(c,V),P=d?.getBoundingClientRect();let M=!1;if(!P||!k)return;const L=kb(o,k,i,g,n);if(!L)return;let B=bn(e,P),X=!1,z=null,O=!1,D=null;function K(){if(!p||!P)return;const[Se,ye]=pb(B,P,j);y({x:Se,y:ye}),oe=requestAnimationFrame(K)}const Z={...L,nodeId:o,type:k,position:L.position},se=g.get(o);let ce={inProgress:!0,isValid:null,from:so(se,Z,he.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:se,to:B,toHandle:null,toPosition:W0[Z.position],toNode:null};function le(){M=!0,w(ce),T?.(e,{nodeId:o,handleId:i,handleType:k})}U===0&&le();function de(Se){if(!M){const{x:Ie,y:Ge}=bn(Se),mt=Ie-W,Ft=Ge-ne;if(!(mt*mt+Ft*Ft>U*U))return;le()}if(!$()||!Z){Te(Se);return}const ye=A();B=bn(Se,P),ee=jT(_o(B,ye,!1,[1,1]),a,g,Z),X||(K(),X=!0);const _e=zb(Se,{handle:ee,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:u?"target":"source",isValidConnection:E,doc:Y,lib:h,flowId:v,nodeLookup:g});D=_e.handleDomNode,z=_e.connection,O=DT(!!ee,_e.isValid);const Ce={...ce,isValid:O,to:_e.toHandle&&O?kc({x:_e.toHandle.x,y:_e.toHandle.y},ye):B,toHandle:_e.toHandle,toPosition:O&&_e.toHandle?_e.toHandle.position:W0[Z.position],toNode:_e.toHandle?g.get(_e.toHandle.nodeId):null};O&&ee&&ce.toHandle&&Ce.toHandle&&ce.toHandle.type===Ce.toHandle.type&&ce.toHandle.nodeId===Ce.toHandle.nodeId&&ce.toHandle.id===Ce.toHandle.id&&ce.to.x===Ce.to.x&&ce.to.y===Ce.to.y||(w(Ce),ce=Ce)}function Te(Se){if(!("touches"in Se&&Se.touches.length>0)){if(M){(ee||D)&&z&&O&&S?.(z);const{inProgress:ye,..._e}=ce,Ce={..._e,toPosition:ce.toHandle?ce.toPosition:null};C?.(Se,Ce),c&&R?.(Se,Ce)}b(),cancelAnimationFrame(oe),X=!1,O=!1,z=null,D=null,Y.removeEventListener("mousemove",de),Y.removeEventListener("mouseup",Te),Y.removeEventListener("touchmove",de),Y.removeEventListener("touchend",Te)}}Y.addEventListener("mousemove",de),Y.addEventListener("mouseup",Te),Y.addEventListener("touchmove",de),Y.addEventListener("touchend",Te)}function zb(e,{handle:n,connectionMode:a,fromNodeId:i,fromHandleId:o,fromType:c,doc:u,lib:d,flowId:g,isValidConnection:h=Db,nodeLookup:p}){const v=c==="target",y=n?u.querySelector(`.${d}-flow__handle[data-id="${g}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:b,y:T}=bn(e),S=u.elementFromPoint(b,T),C=S?.classList.contains(`${d}-flow__handle`)?S:y,E={handleDomNode:C,isValid:!1,connection:null,toHandle:null};if(C){const R=jb(void 0,C),w=C.getAttribute("data-nodeid"),A=C.getAttribute("data-handleid"),$=C.classList.contains("connectable"),j=C.classList.contains("connectableend");if(!w||!R)return E;const U={source:v?w:i,sourceHandle:v?A:o,target:v?i:w,targetHandle:v?o:A};E.connection=U;const Y=$&&j&&(a===Bi.Strict?v&&R==="source"||!v&&R==="target":w!==i||A!==o);E.isValid=Y&&h(U),E.toHandle=kb(w,R,A,p,a,!0)}return E}const lh={onPointerDown:zT,isValid:zb};function $T({domNode:e,panZoom:n,getTransform:a,getViewScale:i}){const o=Zt(e);function c({translateExtent:d,width:g,height:h,zoomStep:p=1,pannable:v=!0,zoomable:y=!0,inversePan:b=!1}){const T=w=>{if(w.sourceEvent.type!=="wheel"||!n)return;const A=a(),$=w.sourceEvent.ctrlKey&&io()?10:1,j=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*p,U=A[2]*Math.pow(2,j*$);n.scaleTo(U)};let S=[0,0];const C=w=>{(w.sourceEvent.type==="mousedown"||w.sourceEvent.type==="touchstart")&&(S=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY])},E=w=>{const A=a();if(w.sourceEvent.type!=="mousemove"&&w.sourceEvent.type!=="touchmove"||!n)return;const $=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY],j=[$[0]-S[0],$[1]-S[1]];S=$;const U=i()*Math.max(A[2],Math.log(A[2]))*(b?-1:1),V={x:A[0]-j[0]*U,y:A[1]-j[1]*U},Y=[[0,0],[g,h]];n.setViewportConstrained({x:V.x,y:V.y,zoom:A[2]},Y,d)},R=lb().on("start",C).on("zoom",v?E:null).on("zoom.wheel",y?T:null);o.call(R,{})}function u(){o.on("zoom",null)}return{update:c,destroy:u,pointer:mn}}const Yc=e=>({x:e.x,y:e.y,zoom:e.k}),Mf=({x:e,y:n,zoom:a})=>Vc.translate(e,n).scale(a),ki=(e,n)=>e.target.closest(`.${n}`),$b=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),UT=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,kf=(e,n=0,a=UT,i=()=>{})=>{const o=typeof n=="number"&&n>0;return o||i(),o?e.transition().duration(n).ease(a).on("end",i):e},Ub=e=>{const n=e.ctrlKey&&io()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function LT({zoomPanValues:e,noWheelClassName:n,d3Selection:a,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:c,zoomOnPinch:u,onPanZoomStart:d,onPanZoom:g,onPanZoomEnd:h}){return p=>{if(ki(p,n))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const v=a.property("__zoom").k||1;if(p.ctrlKey&&u){const C=mn(p),E=Ub(p),R=v*Math.pow(2,E);i.scaleTo(a,R,C,p);return}const y=p.deltaMode===1?20:1;let b=o===Sa.Vertical?0:p.deltaX*y,T=o===Sa.Horizontal?0:p.deltaY*y;!io()&&p.shiftKey&&o!==Sa.Vertical&&(b=p.deltaY*y,T=0),i.translateBy(a,-(b/v)*c,-(T/v)*c,{internal:!0});const S=Yc(a.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(g?.(p,S),e.panScrollTimeout=setTimeout(()=>{h?.(p,S),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,d?.(p,S))}}function HT({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:a}){return function(i,o){const c=i.type==="wheel",u=!n&&c&&!i.ctrlKey,d=ki(i,e);if(i.ctrlKey&&c&&d&&i.preventDefault(),u||d)return null;i.preventDefault(),a.call(this,i,o)}}function BT({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:a}){return i=>{if(i.sourceEvent?.internal)return;const o=Yc(i.transform);e.mouseButton=i.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,i.sourceEvent?.type==="mousedown"&&n(!0),a&&a?.(i.sourceEvent,o)}}function IT({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:a,onTransformChange:i,onPanZoom:o}){return c=>{e.usedRightMouseButton=!!(a&&$b(n,e.mouseButton??0)),c.sourceEvent?.sync||i([c.transform.x,c.transform.y,c.transform.k]),o&&!c.sourceEvent?.internal&&o?.(c.sourceEvent,Yc(c.transform))}}function qT({zoomPanValues:e,panOnDrag:n,panOnScroll:a,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:c}){return u=>{if(!u.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,c&&$b(n,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&c(u.sourceEvent),e.usedRightMouseButton=!1,i(!1),o)){const d=Yc(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(u.sourceEvent,d)},a?150:0)}}}function VT({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:a,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:c,userSelectionActive:u,noWheelClassName:d,noPanClassName:g,lib:h,connectionInProgress:p}){return v=>{const y=e||n,b=a&&v.ctrlKey,T=v.type==="wheel";if(v.button===1&&v.type==="mousedown"&&(ki(v,`${h}-flow__node`)||ki(v,`${h}-flow__edge`)))return!0;if(!i&&!y&&!o&&!c&&!a||u||p&&!T||ki(v,d)&&T||ki(v,g)&&(!T||o&&T&&!e)||!a&&v.ctrlKey&&T)return!1;if(!a&&v.type==="touchstart"&&v.touches?.length>1)return v.preventDefault(),!1;if(!y&&!o&&!b&&T||!i&&(v.type==="mousedown"||v.type==="touchstart")||Array.isArray(i)&&!i.includes(v.button)&&v.type==="mousedown")return!1;const S=Array.isArray(i)&&i.includes(v.button)||!v.button||v.button<=1;return(!v.ctrlKey||T)&&S}}function PT({domNode:e,minZoom:n,maxZoom:a,translateExtent:i,viewport:o,onPanZoom:c,onPanZoomStart:u,onPanZoomEnd:d,onDraggingChange:g}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),v=lb().scaleExtent([n,a]).translateExtent(i),y=Zt(e).call(v);R({x:o.x,y:o.y,zoom:Ii(o.zoom,n,a)},[[0,0],[p.width,p.height]],i);const b=y.on("wheel.zoom"),T=y.on("dblclick.zoom");v.wheelDelta(Ub);function S(ee,W){return y?new Promise(ne=>{v?.interpolate(W?.interpolate==="linear"?Ks:yc).transform(kf(y,W?.duration,W?.ease,()=>ne(!0)),ee)}):Promise.resolve(!1)}function C({noWheelClassName:ee,noPanClassName:W,onPaneContextMenu:ne,userSelectionActive:k,panOnScroll:P,panOnDrag:M,panOnScrollMode:L,panOnScrollSpeed:B,preventScrolling:X,zoomOnPinch:z,zoomOnScroll:O,zoomOnDoubleClick:D,zoomActivationKeyPressed:K,lib:Z,onTransformChange:se,connectionInProgress:ue,paneClickDistance:ce,selectionOnDrag:le}){k&&!h.isZoomingOrPanning&&E();const de=P&&!K&&!k;v.clickDistance(le?1/0:!vn(ce)||ce<0?0:ce);const Te=de?LT({zoomPanValues:h,noWheelClassName:ee,d3Selection:y,d3Zoom:v,panOnScrollMode:L,panOnScrollSpeed:B,zoomOnPinch:z,onPanZoomStart:u,onPanZoom:c,onPanZoomEnd:d}):HT({noWheelClassName:ee,preventScrolling:X,d3ZoomHandler:b});if(y.on("wheel.zoom",Te,{passive:!1}),!k){const ye=BT({zoomPanValues:h,onDraggingChange:g,onPanZoomStart:u});v.on("start",ye);const _e=IT({zoomPanValues:h,panOnDrag:M,onPaneContextMenu:!!ne,onPanZoom:c,onTransformChange:se});v.on("zoom",_e);const Ce=qT({zoomPanValues:h,panOnDrag:M,panOnScroll:P,onPaneContextMenu:ne,onPanZoomEnd:d,onDraggingChange:g});v.on("end",Ce)}const Se=VT({zoomActivationKeyPressed:K,panOnDrag:M,zoomOnScroll:O,panOnScroll:P,zoomOnDoubleClick:D,zoomOnPinch:z,userSelectionActive:k,noPanClassName:W,noWheelClassName:ee,lib:Z,connectionInProgress:ue});v.filter(Se),D?y.on("dblclick.zoom",T):y.on("dblclick.zoom",null)}function E(){v.on("zoom",null)}async function R(ee,W,ne){const k=Mf(ee),P=v?.constrain()(k,W,ne);return P&&await S(P),new Promise(M=>M(P))}async function w(ee,W){const ne=Mf(ee);return await S(ne,W),new Promise(k=>k(ne))}function A(ee){if(y){const W=Mf(ee),ne=y.property("__zoom");(ne.k!==ee.zoom||ne.x!==ee.x||ne.y!==ee.y)&&v?.transform(y,W,null,{sync:!0})}}function $(){const ee=y?ob(y.node()):{x:0,y:0,k:1};return{x:ee.x,y:ee.y,zoom:ee.k}}function j(ee,W){return y?new Promise(ne=>{v?.interpolate(W?.interpolate==="linear"?Ks:yc).scaleTo(kf(y,W?.duration,W?.ease,()=>ne(!0)),ee)}):Promise.resolve(!1)}function U(ee,W){return y?new Promise(ne=>{v?.interpolate(W?.interpolate==="linear"?Ks:yc).scaleBy(kf(y,W?.duration,W?.ease,()=>ne(!0)),ee)}):Promise.resolve(!1)}function V(ee){v?.scaleExtent(ee)}function Y(ee){v?.translateExtent(ee)}function oe(ee){const W=!vn(ee)||ee<0?0:ee;v?.clickDistance(W)}return{update:C,destroy:E,setViewport:w,setViewportConstrained:R,getViewport:$,scaleTo:j,scaleBy:U,setScaleExtent:V,setTranslateExtent:Y,syncViewport:A,setClickDistance:oe}}var Pi;(function(e){e.Line="line",e.Handle="handle"})(Pi||(Pi={}));function GT({width:e,prevWidth:n,height:a,prevHeight:i,affectsX:o,affectsY:c}){const u=e-n,d=a-i,g=[u>0?1:u<0?-1:0,d>0?1:d<0?-1:0];return u&&o&&(g[0]=g[0]*-1),d&&c&&(g[1]=g[1]*-1),g}function fy(e){const n=e.includes("right")||e.includes("left"),a=e.includes("bottom")||e.includes("top"),i=e.includes("left"),o=e.includes("top");return{isHorizontal:n,isVertical:a,affectsX:i,affectsY:o}}function zr(e,n){return Math.max(0,n-e)}function $r(e,n){return Math.max(0,e-n)}function ac(e,n,a){return Math.max(0,n-e,e-a)}function hy(e,n){return e?!n:n}function YT(e,n,a,i,o,c,u,d){let{affectsX:g,affectsY:h}=n;const{isHorizontal:p,isVertical:v}=n,y=p&&v,{xSnapped:b,ySnapped:T}=a,{minWidth:S,maxWidth:C,minHeight:E,maxHeight:R}=i,{x:w,y:A,width:$,height:j,aspectRatio:U}=e;let V=Math.floor(p?b-e.pointerX:0),Y=Math.floor(v?T-e.pointerY:0);const oe=$+(g?-V:V),ee=j+(h?-Y:Y),W=-c[0]*$,ne=-c[1]*j;let k=ac(oe,S,C),P=ac(ee,E,R);if(u){let B=0,X=0;g&&V<0?B=zr(w+V+W,u[0][0]):!g&&V>0&&(B=$r(w+oe+W,u[1][0])),h&&Y<0?X=zr(A+Y+ne,u[0][1]):!h&&Y>0&&(X=$r(A+ee+ne,u[1][1])),k=Math.max(k,B),P=Math.max(P,X)}if(d){let B=0,X=0;g&&V>0?B=$r(w+V,d[0][0]):!g&&V<0&&(B=zr(w+oe,d[1][0])),h&&Y>0?X=$r(A+Y,d[0][1]):!h&&Y<0&&(X=zr(A+ee,d[1][1])),k=Math.max(k,B),P=Math.max(P,X)}if(o){if(p){const B=ac(oe/U,E,R)*U;if(k=Math.max(k,B),u){let X=0;!g&&!h||g&&!h&&y?X=$r(A+ne+oe/U,u[1][1])*U:X=zr(A+ne+(g?V:-V)/U,u[0][1])*U,k=Math.max(k,X)}if(d){let X=0;!g&&!h||g&&!h&&y?X=zr(A+oe/U,d[1][1])*U:X=$r(A+(g?V:-V)/U,d[0][1])*U,k=Math.max(k,X)}}if(v){const B=ac(ee*U,S,C)/U;if(P=Math.max(P,B),u){let X=0;!g&&!h||h&&!g&&y?X=$r(w+ee*U+W,u[1][0])/U:X=zr(w+(h?Y:-Y)*U+W,u[0][0])/U,P=Math.max(P,X)}if(d){let X=0;!g&&!h||h&&!g&&y?X=zr(w+ee*U,d[1][0])/U:X=$r(w+(h?Y:-Y)*U,d[0][0])/U,P=Math.max(P,X)}}}Y=Y+(Y<0?P:-P),V=V+(V<0?k:-k),o&&(y?oe>ee*U?Y=(hy(g,h)?-V:V)/U:V=(hy(g,h)?-Y:Y)*U:p?(Y=V/U,h=g):(V=Y*U,g=h));const M=g?w+V:w,L=h?A+Y:A;return{width:$+(g?-V:V),height:j+(h?-Y:Y),x:c[0]*V*(g?-1:1)+M,y:c[1]*Y*(h?-1:1)+L}}const Lb={width:0,height:0,x:0,y:0},XT={...Lb,pointerX:0,pointerY:0,aspectRatio:1};function KT(e){return[[0,0],[e.measured.width,e.measured.height]]}function ZT(e,n,a){const i=n.position.x+e.position.x,o=n.position.y+e.position.y,c=e.measured.width??0,u=e.measured.height??0,d=a[0]*c,g=a[1]*u;return[[i-d,o-g],[i+c-d,o+u-g]]}function QT({domNode:e,nodeId:n,getStoreItems:a,onChange:i,onEnd:o}){const c=Zt(e);let u={controlDirection:fy("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:p,keepAspectRatio:v,resizeDirection:y,onResizeStart:b,onResize:T,onResizeEnd:S,shouldResize:C}){let E={...Lb},R={...XT};u={boundaries:p,resizeDirection:y,keepAspectRatio:v,controlDirection:fy(h)};let w,A=null,$=[],j,U,V,Y=!1;const oe=Xv().on("start",ee=>{const{nodeLookup:W,transform:ne,snapGrid:k,snapToGrid:P,nodeOrigin:M,paneDomNode:L}=a();if(w=W.get(n),!w)return;A=L?.getBoundingClientRect()??null;const{xSnapped:B,ySnapped:X}=Zs(ee.sourceEvent,{transform:ne,snapGrid:k,snapToGrid:P,containerBounds:A});E={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},R={...E,pointerX:B,pointerY:X,aspectRatio:E.width/E.height},j=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(j=W.get(w.parentId),U=j&&w.extent==="parent"?KT(j):void 0),$=[],V=void 0;for(const[z,O]of W)if(O.parentId===n&&($.push({id:z,position:{...O.position},extent:O.extent}),O.extent==="parent"||O.expandParent)){const D=ZT(O,w,O.origin??M);V?V=[[Math.min(D[0][0],V[0][0]),Math.min(D[0][1],V[0][1])],[Math.max(D[1][0],V[1][0]),Math.max(D[1][1],V[1][1])]]:V=D}b?.(ee,{...E})}).on("drag",ee=>{const{transform:W,snapGrid:ne,snapToGrid:k,nodeOrigin:P}=a(),M=Zs(ee.sourceEvent,{transform:W,snapGrid:ne,snapToGrid:k,containerBounds:A}),L=[];if(!w)return;const{x:B,y:X,width:z,height:O}=E,D={},K=w.origin??P,{width:Z,height:se,x:ue,y:ce}=YT(R,u.controlDirection,M,u.boundaries,u.keepAspectRatio,K,U,V),le=Z!==z,de=se!==O,Te=ue!==B&&le,Se=ce!==X&&de;if(!Te&&!Se&&!le&&!de)return;if((Te||Se||K[0]===1||K[1]===1)&&(D.x=Te?ue:E.x,D.y=Se?ce:E.y,E.x=D.x,E.y=D.y,$.length>0)){const Ie=ue-B,Ge=ce-X;for(const mt of $)mt.position={x:mt.position.x-Ie+K[0]*(Z-z),y:mt.position.y-Ge+K[1]*(se-O)},L.push(mt)}if((le||de)&&(D.width=le&&(!u.resizeDirection||u.resizeDirection==="horizontal")?Z:E.width,D.height=de&&(!u.resizeDirection||u.resizeDirection==="vertical")?se:E.height,E.width=D.width,E.height=D.height),j&&w.expandParent){const Ie=K[0]*(D.width??0);D.x&&D.x<Ie&&(E.x=Ie,R.x=R.x-(D.x-Ie));const Ge=K[1]*(D.height??0);D.y&&D.y<Ge&&(E.y=Ge,R.y=R.y-(D.y-Ge))}const ye=GT({width:E.width,prevWidth:z,height:E.height,prevHeight:O,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),_e={...E,direction:ye};C?.(ee,_e)!==!1&&(Y=!0,T?.(ee,_e),i(D,L))}).on("end",ee=>{Y&&(S?.(ee,{...E}),o?.({...E}),Y=!1)});c.call(oe)}function g(){c.on(".drag",null)}return{update:d,destroy:g}}var jf={exports:{}},Df={},zf={exports:{}},$f={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function JT(){if(gy)return $f;gy=1;var e=po();function n(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var a=typeof Object.is=="function"?Object.is:n,i=e.useState,o=e.useEffect,c=e.useLayoutEffect,u=e.useDebugValue;function d(v,y){var b=y(),T=i({inst:{value:b,getSnapshot:y}}),S=T[0].inst,C=T[1];return c(function(){S.value=b,S.getSnapshot=y,g(S)&&C({inst:S})},[v,b,y]),o(function(){return g(S)&&C({inst:S}),v(function(){g(S)&&C({inst:S})})},[v]),u(b),b}function g(v){var y=v.getSnapshot;v=v.value;try{var b=y();return!a(v,b)}catch{return!0}}function h(v,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return $f.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,$f}var my;function FT(){return my||(my=1,zf.exports=JT()),zf.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function WT(){if(py)return Df;py=1;var e=po(),n=FT();function a(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var i=typeof Object.is=="function"?Object.is:a,o=n.useSyncExternalStore,c=e.useRef,u=e.useEffect,d=e.useMemo,g=e.useDebugValue;return Df.useSyncExternalStoreWithSelector=function(h,p,v,y,b){var T=c(null);if(T.current===null){var S={hasValue:!1,value:null};T.current=S}else S=T.current;T=d(function(){function E(j){if(!R){if(R=!0,w=j,j=y(j),b!==void 0&&S.hasValue){var U=S.value;if(b(U,j))return A=U}return A=j}if(U=A,i(w,j))return U;var V=y(j);return b!==void 0&&b(U,V)?(w=j,U):(w=j,A=V)}var R=!1,w,A,$=v===void 0?null:v;return[function(){return E(p())},$===null?void 0:function(){return E($())}]},[p,v,y,b]);var C=o(h,T[0],T[1]);return u(function(){S.hasValue=!0,S.value=C},[C]),g(C),C},Df}var yy;function eC(){return yy||(yy=1,jf.exports=WT()),jf.exports}var tC=eC();const Hb=Rv(tC),nC={},vy=e=>{let n;const a=new Set,i=(p,v)=>{const y=typeof p=="function"?p(n):p;if(!Object.is(y,n)){const b=n;n=v??(typeof y!="object"||y===null)?y:Object.assign({},n,y),a.forEach(T=>T(n,b))}},o=()=>n,g={setState:i,getState:o,getInitialState:()=>h,subscribe:p=>(a.add(p),()=>a.delete(p)),destroy:()=>{(nC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},h=n=e(i,o,g);return g},Bb=e=>e?vy(e):vy,{useDebugValue:rC}=Mv,{useSyncExternalStoreWithSelector:aC}=Hb,iC=e=>e;function Ib(e,n=iC,a){const i=aC(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,a);return rC(i),i}const by=(e,n)=>{const a=Bb(e),i=(o,c=n)=>Ib(a,o,c);return Object.assign(i,a),i},sC=(e,n)=>e?by(e,n):by;function Fe(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[i,o]of e)if(!Object.is(o,n.get(i)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const i of e)if(!n.has(i))return!1;return!0}const a=Object.keys(e);if(a.length!==Object.keys(n).length)return!1;for(const i of a)if(!Object.prototype.hasOwnProperty.call(n,i)||!Object.is(e[i],n[i]))return!1;return!0}kv();const Xc=q.createContext(null),oC=Xc.Provider,qb=On.error001();function De(e,n){const a=q.useContext(Xc);if(a===null)throw new Error(qb);return Ib(a,e,n)}function Je(){const e=q.useContext(Xc);if(e===null)throw new Error(qb);return q.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const wy={display:"none"},lC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Vb="react-flow__node-desc",Pb="react-flow__edge-desc",cC="react-flow__aria-live",uC=e=>e.ariaLiveMessage,dC=e=>e.ariaLabelConfig;function fC({rfId:e}){const n=De(uC);return _.jsx("div",{id:`${cC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:lC,children:n})}function hC({rfId:e,disableKeyboardA11y:n}){const a=De(dC);return _.jsxs(_.Fragment,{children:[_.jsx("div",{id:`${Vb}-${e}`,style:wy,children:n?a["node.a11yDescription.default"]:a["node.a11yDescription.keyboardDisabled"]}),_.jsx("div",{id:`${Pb}-${e}`,style:wy,children:a["edge.a11yDescription.default"]}),!n&&_.jsx(fC,{rfId:e})]})}const Kc=q.forwardRef(({position:e="top-left",children:n,className:a,style:i,...o},c)=>{const u=`${e}`.split("-");return _.jsx("div",{className:ut(["react-flow__panel",a,...u]),style:i,ref:c,...o,children:n})});Kc.displayName="Panel";function gC({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:_.jsx(Kc,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:_.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const mC=e=>{const n=[],a=[];for(const[,i]of e.nodeLookup)i.selected&&n.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&a.push(i);return{selectedNodes:n,selectedEdges:a}},ic=e=>e.id;function pC(e,n){return Fe(e.selectedNodes.map(ic),n.selectedNodes.map(ic))&&Fe(e.selectedEdges.map(ic),n.selectedEdges.map(ic))}function yC({onSelectionChange:e}){const n=Je(),{selectedNodes:a,selectedEdges:i}=De(mC,pC);return q.useEffect(()=>{const o={nodes:a,edges:i};e?.(o),n.getState().onSelectionChangeHandlers.forEach(c=>c(o))},[a,i,e]),null}const vC=e=>!!e.onSelectionChangeHandlers;function bC({onSelectionChange:e}){const n=De(vC);return e||n?_.jsx(yC,{onSelectionChange:e}):null}const Gb=[0,0],wC={x:0,y:0,zoom:1},xC=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],xy=[...xC,"rfId"],_C=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),_y={translateExtent:no,nodeOrigin:Gb,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function SC(e){const{setNodes:n,setEdges:a,setMinZoom:i,setMaxZoom:o,setTranslateExtent:c,setNodeExtent:u,reset:d,setDefaultNodesAndEdges:g}=De(_C,Fe),h=Je();q.useEffect(()=>(g(e.defaultNodes,e.defaultEdges),()=>{p.current=_y,d()}),[]);const p=q.useRef(_y);return q.useEffect(()=>{for(const v of xy){const y=e[v],b=p.current[v];y!==b&&(typeof e[v]>"u"||(v==="nodes"?n(y):v==="edges"?a(y):v==="minZoom"?i(y):v==="maxZoom"?o(y):v==="translateExtent"?c(y):v==="nodeExtent"?u(y):v==="ariaLabelConfig"?h.setState({ariaLabelConfig:cT(y)}):v==="fitView"?h.setState({fitViewQueued:y}):v==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[v]:y})))}p.current=e},xy.map(v=>e[v])),null}function Sy(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function EC(e){const[n,a]=q.useState(e==="system"?null:e);return q.useEffect(()=>{if(e!=="system"){a(e);return}const i=Sy(),o=()=>a(i?.matches?"dark":"light");return o(),i?.addEventListener("change",o),()=>{i?.removeEventListener("change",o)}},[e]),n!==null?n:Sy()?.matches?"dark":"light"}const Ey=typeof document<"u"?document:null;function oo(e=null,n={target:Ey,actInsideInputWithModifier:!0}){const[a,i]=q.useState(!1),o=q.useRef(!1),c=q.useRef(new Set([])),[u,d]=q.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((v,y)=>v.concat(...y),[]);return[h,p]}return[[],[]]},[e]);return q.useEffect(()=>{const g=n?.target??Ey,h=n?.actInsideInputWithModifier??!0;if(e!==null){const p=b=>{if(o.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!o.current||o.current&&!h)&&xb(b))return!1;const S=Cy(b.code,d);if(c.current.add(b[S]),Ty(u,c.current,!1)){const C=b.composedPath?.()?.[0]||b.target,E=C?.nodeName==="BUTTON"||C?.nodeName==="A";n.preventDefault!==!1&&(o.current||!E)&&b.preventDefault(),i(!0)}},v=b=>{const T=Cy(b.code,d);Ty(u,c.current,!0)?(i(!1),c.current.clear()):c.current.delete(b[T]),b.key==="Meta"&&c.current.clear(),o.current=!1},y=()=>{c.current.clear(),i(!1)};return g?.addEventListener("keydown",p),g?.addEventListener("keyup",v),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{g?.removeEventListener("keydown",p),g?.removeEventListener("keyup",v),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[e,i]),a}function Ty(e,n,a){return e.filter(i=>a||i.length===n.size).some(i=>i.every(o=>n.has(o)))}function Cy(e,n){return n.includes(e)?"code":"key"}const TC=()=>{const e=Je();return q.useMemo(()=>({zoomIn:n=>{const{panZoom:a}=e.getState();return a?a.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:a}=e.getState();return a?a.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,a)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(n,{duration:a?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,a)=>{const{transform:[i,o,c],panZoom:u}=e.getState();return u?(await u.setViewport({x:n.x??i,y:n.y??o,zoom:n.zoom??c},a),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,a,i]=e.getState().transform;return{x:n,y:a,zoom:i}},setCenter:async(n,a,i)=>e.getState().setCenter(n,a,i),fitBounds:async(n,a)=>{const{width:i,height:o,minZoom:c,maxZoom:u,panZoom:d}=e.getState(),g=kh(n,i,o,c,u,a?.padding??.1);return d?(await d.setViewport(g,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,a={})=>{const{transform:i,snapGrid:o,snapToGrid:c,domNode:u}=e.getState();if(!u)return n;const{x:d,y:g}=u.getBoundingClientRect(),h={x:n.x-d,y:n.y-g},p=a.snapGrid??o,v=a.snapToGrid??c;return _o(h,i,v,p)},flowToScreenPosition:n=>{const{transform:a,domNode:i}=e.getState();if(!i)return n;const{x:o,y:c}=i.getBoundingClientRect(),u=kc(n,a);return{x:u.x+o,y:u.y+c}}}),[])};function Yb(e,n){const a=[],i=new Map,o=[];for(const c of e)if(c.type==="add"){o.push(c);continue}else if(c.type==="remove"||c.type==="replace")i.set(c.id,[c]);else{const u=i.get(c.id);u?u.push(c):i.set(c.id,[c])}for(const c of n){const u=i.get(c.id);if(!u){a.push(c);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){a.push({...u[0].item});continue}const d={...c};for(const g of u)CC(g,d);a.push(d)}return o.length&&o.forEach(c=>{c.index!==void 0?a.splice(c.index,0,{...c.item}):a.push({...c.item})}),a}function CC(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured??={},n.measured.width=e.dimensions.width,n.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function Xb(e,n){return Yb(e,n)}function Kb(e,n){return Yb(e,n)}function ma(e,n){return{id:e,type:"select",selected:n}}function ji(e,n=new Set,a=!1){const i=[];for(const[o,c]of e){const u=n.has(o);!(c.selected===void 0&&!u)&&c.selected!==u&&(a&&(c.selected=u),i.push(ma(c.id,u)))}return i}function Ay({items:e=[],lookup:n}){const a=[],i=new Map(e.map(o=>[o.id,o]));for(const[o,c]of e.entries()){const u=n.get(c.id),d=u?.internals?.userNode??u;d!==void 0&&d!==c&&a.push({id:c.id,item:c,type:"replace"}),d===void 0&&a.push({item:c,type:"add",index:o})}for(const[o]of n)i.get(o)===void 0&&a.push({id:o,type:"remove"});return a}function Ny(e){return{id:e.id,type:"remove"}}const Oy=e=>W2(e),AC=e=>hb(e);function Zb(e){return q.forwardRef(e)}const NC=typeof window<"u"?q.useLayoutEffect:q.useEffect;function Ry(e){const[n,a]=q.useState(BigInt(0)),[i]=q.useState(()=>OC(()=>a(o=>o+BigInt(1))));return NC(()=>{const o=i.get();o.length&&(e(o),i.reset())},[n]),i}function OC(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:a=>{n.push(a),e()}}}const Qb=q.createContext(null);function RC({children:e}){const n=Je(),a=q.useCallback(d=>{const{nodes:g=[],setNodes:h,hasDefaultNodes:p,onNodesChange:v,nodeLookup:y,fitViewQueued:b}=n.getState();let T=g;for(const C of d)T=typeof C=="function"?C(T):C;const S=Ay({items:T,lookup:y});p&&h(T),S.length>0?v?.(S):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:C,nodes:E,setNodes:R}=n.getState();C&&R(E)})},[]),i=Ry(a),o=q.useCallback(d=>{const{edges:g=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:v,edgeLookup:y}=n.getState();let b=g;for(const T of d)b=typeof T=="function"?T(b):T;p?h(b):v&&v(Ay({items:b,lookup:y}))},[]),c=Ry(o),u=q.useMemo(()=>({nodeQueue:i,edgeQueue:c}),[]);return _.jsx(Qb.Provider,{value:u,children:e})}function MC(){const e=q.useContext(Qb);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const kC=e=>!!e.panZoom;function Lh(){const e=TC(),n=Je(),a=MC(),i=De(kC),o=q.useMemo(()=>{const c=v=>n.getState().nodeLookup.get(v),u=v=>{a.nodeQueue.push(v)},d=v=>{a.edgeQueue.push(v)},g=v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState(),T=Oy(v)?v:y.get(v.id),S=T.parentId?bb(T.position,T.measured,T.parentId,y,b):T.position,C={...T,position:S,width:T.measured?.width??T.width,height:T.measured?.height??T.height};return qi(C)},h=(v,y,b={replace:!1})=>{u(T=>T.map(S=>{if(S.id===v){const C=typeof y=="function"?y(S):y;return b.replace&&Oy(C)?C:{...S,...C}}return S}))},p=(v,y,b={replace:!1})=>{d(T=>T.map(S=>{if(S.id===v){const C=typeof y=="function"?y(S):y;return b.replace&&AC(C)?C:{...S,...C}}return S}))};return{getNodes:()=>n.getState().nodes.map(v=>({...v})),getNode:v=>c(v)?.internals.userNode,getInternalNode:c,getEdges:()=>{const{edges:v=[]}=n.getState();return v.map(y=>({...y}))},getEdge:v=>n.getState().edgeLookup.get(v),setNodes:u,setEdges:d,addNodes:v=>{const y=Array.isArray(v)?v:[v];a.nodeQueue.push(b=>[...b,...y])},addEdges:v=>{const y=Array.isArray(v)?v:[v];a.edgeQueue.push(b=>[...b,...y])},toObject:()=>{const{nodes:v=[],edges:y=[],transform:b}=n.getState(),[T,S,C]=b;return{nodes:v.map(E=>({...E})),edges:y.map(E=>({...E})),viewport:{x:T,y:S,zoom:C}}},deleteElements:async({nodes:v=[],edges:y=[]})=>{const{nodes:b,edges:T,onNodesDelete:S,onEdgesDelete:C,triggerNodeChanges:E,triggerEdgeChanges:R,onDelete:w,onBeforeDelete:A}=n.getState(),{nodes:$,edges:j}=await aT({nodesToRemove:v,edgesToRemove:y,nodes:b,edges:T,onBeforeDelete:A}),U=j.length>0,V=$.length>0;if(U){const Y=j.map(Ny);C?.(j),R(Y)}if(V){const Y=$.map(Ny);S?.($),E(Y)}return(V||U)&&w?.({nodes:$,edges:j}),{deletedNodes:$,deletedEdges:j}},getIntersectingNodes:(v,y=!0,b)=>{const T=ty(v),S=T?v:g(v),C=b!==void 0;return S?(b||n.getState().nodes).filter(E=>{const R=n.getState().nodeLookup.get(E.id);if(R&&!T&&(E.id===v.id||!R.internals.positionAbsolute))return!1;const w=qi(C?E:R),A=ao(w,S);return y&&A>0||A>=w.width*w.height||A>=S.width*S.height}):[]},isNodeIntersecting:(v,y,b=!0)=>{const S=ty(v)?v:g(v);if(!S)return!1;const C=ao(S,y);return b&&C>0||C>=y.width*y.height||C>=S.width*S.height},updateNode:h,updateNodeData:(v,y,b={replace:!1})=>{h(v,T=>{const S=typeof y=="function"?y(T):y;return b.replace?{...T,data:S}:{...T,data:{...T.data,...S}}},b)},updateEdge:p,updateEdgeData:(v,y,b={replace:!1})=>{p(v,T=>{const S=typeof y=="function"?y(T):y;return b.replace?{...T,data:S}:{...T,data:{...T.data,...S}}},b)},getNodesBounds:v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState();return eT(v,{nodeLookup:y,nodeOrigin:b})},getHandleConnections:({type:v,id:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}-${v}${y?`-${y}`:""}`)?.values()??[]),getNodeConnections:({type:v,handleId:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}${v?y?`-${v}-${y}`:`-${v}`:""}`)?.values()??[]),fitView:async v=>{const y=n.getState().fitViewResolver??lT();return n.setState({fitViewQueued:!0,fitViewOptions:v,fitViewResolver:y}),a.nodeQueue.push(b=>[...b]),y.promise}}},[]);return q.useMemo(()=>({...o,...e,viewportInitialized:i}),[i])}const My=e=>e.selected,jC=typeof window<"u"?window:void 0;function DC({deleteKeyCode:e,multiSelectionKeyCode:n}){const a=Je(),{deleteElements:i}=Lh(),o=oo(e,{actInsideInputWithModifier:!1}),c=oo(n,{target:jC});q.useEffect(()=>{if(o){const{edges:u,nodes:d}=a.getState();i({nodes:d.filter(My),edges:u.filter(My)}),a.setState({nodesSelectionActive:!1})}},[o]),q.useEffect(()=>{a.setState({multiSelectionActive:c})},[c])}function zC(e){const n=Je();q.useEffect(()=>{const a=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const i=jh(e.current);(i.height===0||i.width===0)&&n.getState().onError?.("004",On.error004()),n.setState({width:i.width||500,height:i.height||500})};if(e.current){a(),window.addEventListener("resize",a);const i=new ResizeObserver(()=>a());return i.observe(e.current),()=>{window.removeEventListener("resize",a),i&&e.current&&i.unobserve(e.current)}}},[])}const Zc={position:"absolute",width:"100%",height:"100%",top:0,left:0},$C=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function UC({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Sa.Free,zoomOnDoubleClick:u=!0,panOnDrag:d=!0,defaultViewport:g,translateExtent:h,minZoom:p,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:b=!0,children:T,noWheelClassName:S,noPanClassName:C,onViewportChange:E,isControlledViewport:R,paneClickDistance:w,selectionOnDrag:A}){const $=Je(),j=q.useRef(null),{userSelectionActive:U,lib:V,connectionInProgress:Y}=De($C,Fe),oe=oo(y),ee=q.useRef();zC(j);const W=q.useCallback(ne=>{E?.({x:ne[0],y:ne[1],zoom:ne[2]}),R||$.setState({transform:ne})},[E,R]);return q.useEffect(()=>{if(j.current){ee.current=PT({domNode:j.current,minZoom:p,maxZoom:v,translateExtent:h,viewport:g,onDraggingChange:M=>$.setState({paneDragging:M}),onPanZoomStart:(M,L)=>{const{onViewportChangeStart:B,onMoveStart:X}=$.getState();X?.(M,L),B?.(L)},onPanZoom:(M,L)=>{const{onViewportChange:B,onMove:X}=$.getState();X?.(M,L),B?.(L)},onPanZoomEnd:(M,L)=>{const{onViewportChangeEnd:B,onMoveEnd:X}=$.getState();X?.(M,L),B?.(L)}});const{x:ne,y:k,zoom:P}=ee.current.getViewport();return $.setState({panZoom:ee.current,transform:[ne,k,P],domNode:j.current.closest(".react-flow")}),()=>{ee.current?.destroy()}}},[]),q.useEffect(()=>{ee.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:a,panOnScroll:i,panOnScrollSpeed:o,panOnScrollMode:c,zoomOnDoubleClick:u,panOnDrag:d,zoomActivationKeyPressed:oe,preventScrolling:b,noPanClassName:C,userSelectionActive:U,noWheelClassName:S,lib:V,onTransformChange:W,connectionInProgress:Y,selectionOnDrag:A,paneClickDistance:w})},[e,n,a,i,o,c,u,d,oe,b,C,U,S,V,W,Y,A,w]),_.jsx("div",{className:"react-flow__renderer",ref:j,style:Zc,children:T})}const LC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function HC(){const{userSelectionActive:e,userSelectionRect:n}=De(LC,Fe);return e&&n?_.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const Uf=(e,n)=>a=>{a.target===n.current&&e?.(a)},BC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function IC({isSelecting:e,selectionKeyPressed:n,selectionMode:a=ro.Full,panOnDrag:i,paneClickDistance:o,selectionOnDrag:c,onSelectionStart:u,onSelectionEnd:d,onPaneClick:g,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:v,onPaneMouseMove:y,onPaneMouseLeave:b,children:T}){const S=Je(),{userSelectionActive:C,elementsSelectable:E,dragging:R,connectionInProgress:w}=De(BC,Fe),A=E&&(e||C),$=q.useRef(null),j=q.useRef(),U=q.useRef(new Set),V=q.useRef(new Set),Y=q.useRef(!1),oe=B=>{if(Y.current||w){Y.current=!1;return}g?.(B),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},ee=B=>{if(Array.isArray(i)&&i?.includes(2)){B.preventDefault();return}h?.(B)},W=p?B=>p(B):void 0,ne=B=>{Y.current&&(B.stopPropagation(),Y.current=!1)},k=B=>{const{resetSelectedElements:X,domNode:z}=S.getState();if(j.current=z?.getBoundingClientRect(),!j.current)return;const O=B.target===$.current;if(!O&&!!B.target.closest(".nokey")||!e||!(c&&O||n)||B.button!==0||!B.isPrimary)return;B.target?.setPointerCapture?.(B.pointerId),Y.current=!1;const{x:Z,y:se}=bn(B.nativeEvent,j.current);S.setState({userSelectionRect:{width:0,height:0,startX:Z,startY:se,x:Z,y:se}}),O||(B.stopPropagation(),B.preventDefault()),(o===0||n)&&(X(),u?.(B),Y.current=!0)},P=B=>{const{userSelectionRect:X,transform:z,nodeLookup:O,edgeLookup:D,connectionLookup:K,triggerNodeChanges:Z,triggerEdgeChanges:se,defaultEdgeOptions:ue,resetSelectedElements:ce}=S.getState();if(!j.current||!X)return;const{x:le,y:de}=bn(B.nativeEvent,j.current),{startX:Te,startY:Se}=X;if(!Y.current&&B.target===$.current&&!n&&o>0){if(Math.hypot(le-Te,de-Se)<=o)return;ce(),u?.(B)}Y.current=!0;const ye={startX:Te,startY:Se,x:le<Te?le:Te,y:de<Se?de:Se,width:Math.abs(le-Te),height:Math.abs(de-Se)},_e=U.current,Ce=V.current;U.current=new Set(Mh(O,ye,z,a===ro.Partial,!0).map(Ge=>Ge.id)),V.current=new Set;const Ie=ue?.selectable??!0;for(const Ge of U.current){const mt=K.get(Ge);if(mt)for(const{edgeId:Ft}of mt.values()){const ln=D.get(Ft);ln&&(ln.selectable??Ie)&&V.current.add(Ft)}}if(!ny(_e,U.current)){const Ge=ji(O,U.current,!0);Z(Ge)}if(!ny(Ce,V.current)){const Ge=ji(D,V.current);se(Ge)}S.setState({userSelectionRect:ye,userSelectionActive:!0,nodesSelectionActive:!1})},M=B=>{B.button===0&&(B.target?.releasePointerCapture?.(B.pointerId),!C&&B.target===$.current&&S.getState().userSelectionRect&&oe?.(B),S.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:U.current.size>0}),Y.current&&d?.(B))},L=i===!0||Array.isArray(i)&&i.includes(0);return _.jsxs("div",{className:ut(["react-flow__pane",{draggable:L,dragging:R,selection:e}]),onClick:A?void 0:Uf(oe,$),onContextMenu:Uf(ee,$),onWheel:Uf(W,$),onPointerEnter:A?void 0:v,onPointerMove:A?P:y,onPointerUp:A?M:void 0,onPointerDownCapture:A?k:void 0,onClickCapture:A?ne:void 0,onPointerLeave:b,ref:$,style:Zc,children:[T,_.jsx(HC,{})]})}function ch({id:e,store:n,unselect:a=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:c,multiSelectionActive:u,nodeLookup:d,onError:g}=n.getState(),h=d.get(e);if(!h){g?.("012",On.error012(e));return}n.setState({nodesSelectionActive:!1}),h.selected?(a||h.selected&&u)&&(c({nodes:[h],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([e])}function Jb({nodeRef:e,disabled:n=!1,noDragClassName:a,handleSelector:i,nodeId:o,isSelectable:c,nodeClickDistance:u}){const d=Je(),[g,h]=q.useState(!1),p=q.useRef();return q.useEffect(()=>{p.current=RT({getStoreItems:()=>d.getState(),onNodeMouseDown:v=>{ch({id:v,store:d,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),q.useEffect(()=>{if(n)p.current?.destroy();else if(e.current)return p.current?.update({noDragClassName:a,handleSelector:i,domNode:e.current,isSelectable:c,nodeId:o,nodeClickDistance:u}),()=>{p.current?.destroy()}},[a,i,n,c,e,o]),g}const qC=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function Fb(){const e=Je();return q.useCallback(a=>{const{nodeExtent:i,snapToGrid:o,snapGrid:c,nodesDraggable:u,onError:d,updateNodePositions:g,nodeLookup:h,nodeOrigin:p}=e.getState(),v=new Map,y=qC(u),b=o?c[0]:5,T=o?c[1]:5,S=a.direction.x*b*a.factor,C=a.direction.y*T*a.factor;for(const[,E]of h){if(!y(E))continue;let R={x:E.internals.positionAbsolute.x+S,y:E.internals.positionAbsolute.y+C};o&&(R=xo(R,c));const{position:w,positionAbsolute:A}=gb({nodeId:E.id,nextPosition:R,nodeLookup:h,nodeExtent:i,nodeOrigin:p,onError:d});E.position=w,E.internals.positionAbsolute=A,v.set(E.id,E)}g(v)},[])}const Hh=q.createContext(null),VC=Hh.Provider;Hh.Consumer;const Wb=()=>q.useContext(Hh),PC=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),GC=(e,n,a)=>i=>{const{connectionClickStartHandle:o,connectionMode:c,connection:u}=i,{fromHandle:d,toHandle:g,isValid:h}=u,p=g?.nodeId===e&&g?.id===n&&g?.type===a;return{connectingFrom:d?.nodeId===e&&d?.id===n&&d?.type===a,connectingTo:p,clickConnecting:o?.nodeId===e&&o?.id===n&&o?.type===a,isPossibleEndHandle:c===Bi.Strict?d?.type!==a:e!==d?.nodeId||n!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!o,valid:p&&h}};function YC({type:e="source",position:n=he.Top,isValidConnection:a,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:c=!0,id:u,onConnect:d,children:g,className:h,onMouseDown:p,onTouchStart:v,...y},b){const T=u||null,S=e==="target",C=Je(),E=Wb(),{connectOnClick:R,noPanClassName:w,rfId:A}=De(PC,Fe),{connectingFrom:$,connectingTo:j,clickConnecting:U,isPossibleEndHandle:V,connectionInProcess:Y,clickConnectionInProcess:oe,valid:ee}=De(GC(E,T,e),Fe);E||C.getState().onError?.("010",On.error010());const W=P=>{const{defaultEdgeOptions:M,onConnect:L,hasDefaultEdges:B}=C.getState(),X={...M,...P};if(B){const{edges:z,setEdges:O}=C.getState();O(Cb(X,z))}L?.(X),d?.(X)},ne=P=>{if(!E)return;const M=_b(P.nativeEvent);if(o&&(M&&P.button===0||!M)){const L=C.getState();lh.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:S,handleId:T,nodeId:E,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:W,isValidConnection:a||L.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed,dragThreshold:L.connectionDragThreshold})}M?p?.(P):v?.(P)},k=P=>{const{onClickConnectStart:M,onClickConnectEnd:L,connectionClickStartHandle:B,connectionMode:X,isValidConnection:z,lib:O,rfId:D,nodeLookup:K,connection:Z}=C.getState();if(!E||!B&&!o)return;if(!B){M?.(P.nativeEvent,{nodeId:E,handleId:T,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:E,type:e,id:T}});return}const se=wb(P.target),ue=a||z,{connection:ce,isValid:le}=lh.isValid(P.nativeEvent,{handle:{nodeId:E,id:T,type:e},connectionMode:X,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:ue,flowId:D,doc:se,lib:O,nodeLookup:K});le&&ce&&W(ce);const de=structuredClone(Z);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,L?.(P,de),C.setState({connectionClickStartHandle:null})};return _.jsx("div",{"data-handleid":T,"data-nodeid":E,"data-handlepos":n,"data-id":`${A}-${E}-${T}-${e}`,className:ut(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",w,h,{source:!S,target:S,connectable:i,connectablestart:o,connectableend:c,clickconnecting:U,connectingfrom:$,connectingto:j,valid:ee,connectionindicator:i&&(!Y||V)&&(Y||oe?c:o)}]),onMouseDown:ne,onTouchStart:ne,onClick:R?k:void 0,ref:b,...y,children:g})}const Lt=q.memo(Zb(YC));function XC({data:e,isConnectable:n,sourcePosition:a=he.Bottom}){return _.jsxs(_.Fragment,{children:[e?.label,_.jsx(Lt,{type:"source",position:a,isConnectable:n})]})}function KC({data:e,isConnectable:n,targetPosition:a=he.Top,sourcePosition:i=he.Bottom}){return _.jsxs(_.Fragment,{children:[_.jsx(Lt,{type:"target",position:a,isConnectable:n}),e?.label,_.jsx(Lt,{type:"source",position:i,isConnectable:n})]})}function ZC(){return null}function QC({data:e,isConnectable:n,targetPosition:a=he.Top}){return _.jsxs(_.Fragment,{children:[_.jsx(Lt,{type:"target",position:a,isConnectable:n}),e?.label]})}const jc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ky={input:XC,default:KC,output:QC,group:ZC};function JC(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const FC=e=>{const{width:n,height:a,x:i,y:o}=wo(e.nodeLookup,{filter:c=>!!c.selected});return{width:vn(n)?n:null,height:vn(a)?a:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${o}px)`}};function WC({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:a}){const i=Je(),{width:o,height:c,transformString:u,userSelectionActive:d}=De(FC,Fe),g=Fb(),h=q.useRef(null);if(q.useEffect(()=>{a||h.current?.focus({preventScroll:!0})},[a]),Jb({nodeRef:h}),d||!o||!c)return null;const p=e?y=>{const b=i.getState().nodes.filter(T=>T.selected);e(y,b)}:void 0,v=y=>{Object.prototype.hasOwnProperty.call(jc,y.key)&&(y.preventDefault(),g({direction:jc[y.key],factor:y.shiftKey?4:1}))};return _.jsx("div",{className:ut(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:_.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:a?void 0:-1,onKeyDown:a?void 0:v,style:{width:o,height:c}})})}const jy=typeof window<"u"?window:void 0,eA=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function ew({children:e,onPaneClick:n,onPaneMouseEnter:a,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,paneClickDistance:d,deleteKeyCode:g,selectionKeyCode:h,selectionOnDrag:p,selectionMode:v,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:T,panActivationKeyCode:S,zoomActivationKeyCode:C,elementsSelectable:E,zoomOnScroll:R,zoomOnPinch:w,panOnScroll:A,panOnScrollSpeed:$,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:V,defaultViewport:Y,translateExtent:oe,minZoom:ee,maxZoom:W,preventScrolling:ne,onSelectionContextMenu:k,noWheelClassName:P,noPanClassName:M,disableKeyboardA11y:L,onViewportChange:B,isControlledViewport:X}){const{nodesSelectionActive:z,userSelectionActive:O}=De(eA),D=oo(h,{target:jy}),K=oo(S,{target:jy}),Z=K||V,se=K||A,ue=p&&Z!==!0,ce=D||O||ue;return DC({deleteKeyCode:g,multiSelectionKeyCode:T}),_.jsx(UC,{onPaneContextMenu:c,elementsSelectable:E,zoomOnScroll:R,zoomOnPinch:w,panOnScroll:se,panOnScrollSpeed:$,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:!D&&Z,defaultViewport:Y,translateExtent:oe,minZoom:ee,maxZoom:W,zoomActivationKeyCode:C,preventScrolling:ne,noWheelClassName:P,noPanClassName:M,onViewportChange:B,isControlledViewport:X,paneClickDistance:d,selectionOnDrag:ue,children:_.jsxs(IC,{onSelectionStart:y,onSelectionEnd:b,onPaneClick:n,onPaneMouseEnter:a,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,panOnDrag:Z,isSelecting:!!ce,selectionMode:v,selectionKeyPressed:D,paneClickDistance:d,selectionOnDrag:ue,children:[e,z&&_.jsx(WC,{onSelectionContextMenu:k,noPanClassName:M,disableKeyboardA11y:L})]})})}ew.displayName="FlowRenderer";const tA=q.memo(ew),nA=e=>n=>e?Mh(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(a=>a.id):Array.from(n.nodeLookup.keys());function rA(e){return De(q.useCallback(nA(e),[e]),Fe)}const aA=e=>e.updateNodeInternals;function iA(){const e=De(aA),[n]=q.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(a=>{const i=new Map;a.forEach(o=>{const c=o.target.getAttribute("data-id");i.set(c,{id:c,nodeElement:o.target,force:!0})}),e(i)}));return q.useEffect(()=>()=>{n?.disconnect()},[n]),n}function sA({node:e,nodeType:n,hasDimensions:a,resizeObserver:i}){const o=Je(),c=q.useRef(null),u=q.useRef(null),d=q.useRef(e.sourcePosition),g=q.useRef(e.targetPosition),h=q.useRef(n),p=a&&!!e.internals.handleBounds;return q.useEffect(()=>{c.current&&!e.hidden&&(!p||u.current!==c.current)&&(u.current&&i?.unobserve(u.current),i?.observe(c.current),u.current=c.current)},[p,e.hidden]),q.useEffect(()=>()=>{u.current&&(i?.unobserve(u.current),u.current=null)},[]),q.useEffect(()=>{if(c.current){const v=h.current!==n,y=d.current!==e.sourcePosition,b=g.current!==e.targetPosition;(v||y||b)&&(h.current=n,d.current=e.sourcePosition,g.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:c.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),c}function oA({id:e,onClick:n,onMouseEnter:a,onMouseMove:i,onMouseLeave:o,onContextMenu:c,onDoubleClick:u,nodesDraggable:d,elementsSelectable:g,nodesConnectable:h,nodesFocusable:p,resizeObserver:v,noDragClassName:y,noPanClassName:b,disableKeyboardA11y:T,rfId:S,nodeTypes:C,nodeClickDistance:E,onError:R}){const{node:w,internals:A,isParent:$}=De(le=>{const de=le.nodeLookup.get(e),Te=le.parentLookup.has(e);return{node:de,internals:de.internals,isParent:Te}},Fe);let j=w.type||"default",U=C?.[j]||ky[j];U===void 0&&(R?.("003",On.error003(j)),j="default",U=C?.default||ky.default);const V=!!(w.draggable||d&&typeof w.draggable>"u"),Y=!!(w.selectable||g&&typeof w.selectable>"u"),oe=!!(w.connectable||h&&typeof w.connectable>"u"),ee=!!(w.focusable||p&&typeof w.focusable>"u"),W=Je(),ne=vb(w),k=sA({node:w,nodeType:j,hasDimensions:ne,resizeObserver:v}),P=Jb({nodeRef:k,disabled:w.hidden||!V,noDragClassName:y,handleSelector:w.dragHandle,nodeId:e,isSelectable:Y,nodeClickDistance:E}),M=Fb();if(w.hidden)return null;const L=nr(w),B=JC(w),X=Y||V||n||a||i||o,z=a?le=>a(le,{...A.userNode}):void 0,O=i?le=>i(le,{...A.userNode}):void 0,D=o?le=>o(le,{...A.userNode}):void 0,K=c?le=>c(le,{...A.userNode}):void 0,Z=u?le=>u(le,{...A.userNode}):void 0,se=le=>{const{selectNodesOnDrag:de,nodeDragThreshold:Te}=W.getState();Y&&(!de||!V||Te>0)&&ch({id:e,store:W,nodeRef:k}),n&&n(le,{...A.userNode})},ue=le=>{if(!(xb(le.nativeEvent)||T)){if(cb.includes(le.key)&&Y){const de=le.key==="Escape";ch({id:e,store:W,unselect:de,nodeRef:k})}else if(V&&w.selected&&Object.prototype.hasOwnProperty.call(jc,le.key)){le.preventDefault();const{ariaLabelConfig:de}=W.getState();W.setState({ariaLiveMessage:de["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),M({direction:jc[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(T||!k.current?.matches(":focus-visible"))return;const{transform:le,width:de,height:Te,autoPanOnNodeFocus:Se,setCenter:ye}=W.getState();if(!Se)return;Mh(new Map([[e,w]]),{x:0,y:0,width:de,height:Te},le,!0).length>0||ye(w.position.x+L.width/2,w.position.y+L.height/2,{zoom:le[2]})};return _.jsx("div",{className:ut(["react-flow__node",`react-flow__node-${j}`,{[b]:V},w.className,{selected:w.selected,selectable:Y,parent:$,draggable:V,dragging:P}]),ref:k,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:ne?"visible":"hidden",...w.style,...B},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:O,onMouseLeave:D,onContextMenu:K,onClick:se,onDoubleClick:Z,onKeyDown:ee?ue:void 0,tabIndex:ee?0:void 0,onFocus:ee?ce:void 0,role:w.ariaRole??(ee?"group":void 0),"aria-roledescription":"node","aria-describedby":T?void 0:`${Vb}-${S}`,"aria-label":w.ariaLabel,...w.domAttributes,children:_.jsx(VC,{value:e,children:_.jsx(U,{id:e,data:w.data,type:j,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:w.selected??!1,selectable:Y,draggable:V,deletable:w.deletable??!0,isConnectable:oe,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:P,dragHandle:w.dragHandle,zIndex:A.z,parentId:w.parentId,...L})})})}var lA=q.memo(oA);const cA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function tw(e){const{nodesDraggable:n,nodesConnectable:a,nodesFocusable:i,elementsSelectable:o,onError:c}=De(cA,Fe),u=rA(e.onlyRenderVisibleElements),d=iA();return _.jsx("div",{className:"react-flow__nodes",style:Zc,children:u.map(g=>_.jsx(lA,{id:g,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:d,nodesDraggable:n,nodesConnectable:a,nodesFocusable:i,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:c},g))})}tw.displayName="NodeRenderer";const uA=q.memo(tw);function dA(e){return De(q.useCallback(a=>{if(!e)return a.edges.map(o=>o.id);const i=[];if(a.width&&a.height)for(const o of a.edges){const c=a.nodeLookup.get(o.source),u=a.nodeLookup.get(o.target);c&&u&&fT({sourceNode:c,targetNode:u,width:a.width,height:a.height,transform:a.transform})&&i.push(o.id)}return i},[e]),Fe)}const fA=({color:e="none",strokeWidth:n=1})=>{const a={strokeWidth:n,...e&&{stroke:e}};return _.jsx("polyline",{className:"arrow",style:a,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},hA=({color:e="none",strokeWidth:n=1})=>{const a={strokeWidth:n,...e&&{stroke:e,fill:e}};return _.jsx("polyline",{className:"arrowclosed",style:a,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Dy={[Ea.Arrow]:fA,[Ea.ArrowClosed]:hA};function gA(e){const n=Je();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(Dy,e)?Dy[e]:(n.getState().onError?.("009",On.error009(e)),null),[e])}const mA=({id:e,type:n,color:a,width:i=12.5,height:o=12.5,markerUnits:c="strokeWidth",strokeWidth:u,orient:d="auto-start-reverse"})=>{const g=gA(n);return g?_.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:d,refX:"0",refY:"0",children:_.jsx(g,{color:a,strokeWidth:u})}):null},nw=({defaultColor:e,rfId:n})=>{const a=De(c=>c.edges),i=De(c=>c.defaultEdgeOptions),o=q.useMemo(()=>bT(a,{id:n,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[a,i,n,e]);return o.length?_.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:_.jsx("defs",{children:o.map(c=>_.jsx(mA,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};nw.displayName="MarkerDefinitions";var pA=q.memo(nw);function rw({x:e,y:n,label:a,labelStyle:i,labelShowBg:o=!0,labelBgStyle:c,labelBgPadding:u=[2,4],labelBgBorderRadius:d=2,children:g,className:h,...p}){const[v,y]=q.useState({x:1,y:0,width:0,height:0}),b=ut(["react-flow__edge-textwrapper",h]),T=q.useRef(null);return q.useEffect(()=>{if(T.current){const S=T.current.getBBox();y({x:S.x,y:S.y,width:S.width,height:S.height})}},[a]),a?_.jsxs("g",{transform:`translate(${e-v.width/2} ${n-v.height/2})`,className:b,visibility:v.width?"visible":"hidden",...p,children:[o&&_.jsx("rect",{width:v.width+2*u[0],x:-u[0],y:-u[1],height:v.height+2*u[1],className:"react-flow__edge-textbg",style:c,rx:d,ry:d}),_.jsx("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:T,style:i,children:a}),g]}):null}rw.displayName="EdgeText";const yA=q.memo(rw);function Qc({path:e,labelX:n,labelY:a,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g,interactionWidth:h=20,...p}){return _.jsxs(_.Fragment,{children:[_.jsx("path",{...p,d:e,fill:"none",className:ut(["react-flow__edge-path",p.className])}),h?_.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,i&&vn(n)&&vn(a)?_.jsx(yA,{x:n,y:a,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g}):null]})}function zy({pos:e,x1:n,y1:a,x2:i,y2:o}){return e===he.Left||e===he.Right?[.5*(n+i),a]:[n,.5*(a+o)]}function aw({sourceX:e,sourceY:n,sourcePosition:a=he.Bottom,targetX:i,targetY:o,targetPosition:c=he.Top}){const[u,d]=zy({pos:a,x1:e,y1:n,x2:i,y2:o}),[g,h]=zy({pos:c,x1:i,y1:o,x2:e,y2:n}),[p,v,y,b]=Sb({sourceX:e,sourceY:n,targetX:i,targetY:o,sourceControlX:u,sourceControlY:d,targetControlX:g,targetControlY:h});return[`M${e},${n} C${u},${d} ${g},${h} ${i},${o}`,p,v,y,b]}function iw(e){return q.memo(({id:n,sourceX:a,sourceY:i,targetX:o,targetY:c,sourcePosition:u,targetPosition:d,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:T,markerEnd:S,markerStart:C,interactionWidth:E})=>{const[R,w,A]=aw({sourceX:a,sourceY:i,sourcePosition:u,targetX:o,targetY:c,targetPosition:d}),$=e.isInternal?void 0:n;return _.jsx(Qc,{id:$,path:R,labelX:w,labelY:A,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:T,markerEnd:S,markerStart:C,interactionWidth:E})})}const vA=iw({isInternal:!1}),sw=iw({isInternal:!0});vA.displayName="SimpleBezierEdge";sw.displayName="SimpleBezierEdgeInternal";function ow(e){return q.memo(({id:n,sourceX:a,sourceY:i,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,sourcePosition:b=he.Bottom,targetPosition:T=he.Top,markerEnd:S,markerStart:C,pathOptions:E,interactionWidth:R})=>{const[w,A,$]=ih({sourceX:a,sourceY:i,sourcePosition:b,targetX:o,targetY:c,targetPosition:T,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),j=e.isInternal?void 0:n;return _.jsx(Qc,{id:j,path:w,labelX:A,labelY:$,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:S,markerStart:C,interactionWidth:R})})}const lw=ow({isInternal:!1}),cw=ow({isInternal:!0});lw.displayName="SmoothStepEdge";cw.displayName="SmoothStepEdgeInternal";function uw(e){return q.memo(({id:n,...a})=>{const i=e.isInternal?void 0:n;return _.jsx(lw,{...a,id:i,pathOptions:q.useMemo(()=>({borderRadius:0,offset:a.pathOptions?.offset}),[a.pathOptions?.offset])})})}const bA=uw({isInternal:!1}),dw=uw({isInternal:!0});bA.displayName="StepEdge";dw.displayName="StepEdgeInternal";function fw(e){return q.memo(({id:n,sourceX:a,sourceY:i,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:T,interactionWidth:S})=>{const[C,E,R]=Ab({sourceX:a,sourceY:i,targetX:o,targetY:c}),w=e.isInternal?void 0:n;return _.jsx(Qc,{id:w,path:C,labelX:E,labelY:R,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:T,interactionWidth:S})})}const wA=fw({isInternal:!1}),hw=fw({isInternal:!0});wA.displayName="StraightEdge";hw.displayName="StraightEdgeInternal";function gw(e){return q.memo(({id:n,sourceX:a,sourceY:i,targetX:o,targetY:c,sourcePosition:u=he.Bottom,targetPosition:d=he.Top,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:T,markerEnd:S,markerStart:C,pathOptions:E,interactionWidth:R})=>{const[w,A,$]=Eb({sourceX:a,sourceY:i,sourcePosition:u,targetX:o,targetY:c,targetPosition:d,curvature:E?.curvature}),j=e.isInternal?void 0:n;return _.jsx(Qc,{id:j,path:w,labelX:A,labelY:$,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:T,markerEnd:S,markerStart:C,interactionWidth:R})})}const xA=gw({isInternal:!1}),mw=gw({isInternal:!0});xA.displayName="BezierEdge";mw.displayName="BezierEdgeInternal";const $y={default:mw,straight:hw,step:dw,smoothstep:cw,simplebezier:sw},Uy={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_A=(e,n,a)=>a===he.Left?e-n:a===he.Right?e+n:e,SA=(e,n,a)=>a===he.Top?e-n:a===he.Bottom?e+n:e,Ly="react-flow__edgeupdater";function Hy({position:e,centerX:n,centerY:a,radius:i=10,onMouseDown:o,onMouseEnter:c,onMouseOut:u,type:d}){return _.jsx("circle",{onMouseDown:o,onMouseEnter:c,onMouseOut:u,className:ut([Ly,`${Ly}-${d}`]),cx:_A(n,i,e),cy:SA(a,i,e),r:i,stroke:"transparent",fill:"transparent"})}function EA({isReconnectable:e,reconnectRadius:n,edge:a,sourceX:i,sourceY:o,targetX:c,targetY:u,sourcePosition:d,targetPosition:g,onReconnect:h,onReconnectStart:p,onReconnectEnd:v,setReconnecting:y,setUpdateHover:b}){const T=Je(),S=(A,$)=>{if(A.button!==0)return;const{autoPanOnConnect:j,domNode:U,isValidConnection:V,connectionMode:Y,connectionRadius:oe,lib:ee,onConnectStart:W,onConnectEnd:ne,cancelConnection:k,nodeLookup:P,rfId:M,panBy:L,updateConnection:B}=T.getState(),X=$.type==="target",z=(K,Z)=>{y(!1),v?.(K,a,$.type,Z)},O=K=>h?.(a,K),D=(K,Z)=>{y(!0),p?.(A,a,$.type),W?.(K,Z)};lh.onPointerDown(A.nativeEvent,{autoPanOnConnect:j,connectionMode:Y,connectionRadius:oe,domNode:U,handleId:$.id,nodeId:$.nodeId,nodeLookup:P,isTarget:X,edgeUpdaterType:$.type,lib:ee,flowId:M,cancelConnection:k,panBy:L,isValidConnection:V,onConnect:O,onConnectStart:D,onConnectEnd:ne,onReconnectEnd:z,updateConnection:B,getTransform:()=>T.getState().transform,getFromHandle:()=>T.getState().connection.fromHandle,dragThreshold:T.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},C=A=>S(A,{nodeId:a.target,id:a.targetHandle??null,type:"target"}),E=A=>S(A,{nodeId:a.source,id:a.sourceHandle??null,type:"source"}),R=()=>b(!0),w=()=>b(!1);return _.jsxs(_.Fragment,{children:[(e===!0||e==="source")&&_.jsx(Hy,{position:d,centerX:i,centerY:o,radius:n,onMouseDown:C,onMouseEnter:R,onMouseOut:w,type:"source"}),(e===!0||e==="target")&&_.jsx(Hy,{position:g,centerX:c,centerY:u,radius:n,onMouseDown:E,onMouseEnter:R,onMouseOut:w,type:"target"})]})}function TA({id:e,edgesFocusable:n,edgesReconnectable:a,elementsSelectable:i,onClick:o,onDoubleClick:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,rfId:T,edgeTypes:S,noPanClassName:C,onError:E,disableKeyboardA11y:R}){let w=De(ye=>ye.edgeLookup.get(e));const A=De(ye=>ye.defaultEdgeOptions);w=A?{...A,...w}:w;let $=w.type||"default",j=S?.[$]||$y[$];j===void 0&&(E?.("011",On.error011($)),$="default",j=S?.default||$y.default);const U=!!(w.focusable||n&&typeof w.focusable>"u"),V=typeof v<"u"&&(w.reconnectable||a&&typeof w.reconnectable>"u"),Y=!!(w.selectable||i&&typeof w.selectable>"u"),oe=q.useRef(null),[ee,W]=q.useState(!1),[ne,k]=q.useState(!1),P=Je(),{zIndex:M,sourceX:L,sourceY:B,targetX:X,targetY:z,sourcePosition:O,targetPosition:D}=De(q.useCallback(ye=>{const _e=ye.nodeLookup.get(w.source),Ce=ye.nodeLookup.get(w.target);if(!_e||!Ce)return{zIndex:w.zIndex,...Uy};const Ie=vT({id:e,sourceNode:_e,targetNode:Ce,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:ye.connectionMode,onError:E});return{zIndex:dT({selected:w.selected,zIndex:w.zIndex,sourceNode:_e,targetNode:Ce,elevateOnSelect:ye.elevateEdgesOnSelect}),...Ie||Uy}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),Fe),K=q.useMemo(()=>w.markerStart?`url('#${sh(w.markerStart,T)}')`:void 0,[w.markerStart,T]),Z=q.useMemo(()=>w.markerEnd?`url('#${sh(w.markerEnd,T)}')`:void 0,[w.markerEnd,T]);if(w.hidden||L===null||B===null||X===null||z===null)return null;const se=ye=>{const{addSelectedEdges:_e,unselectNodesAndEdges:Ce,multiSelectionActive:Ie}=P.getState();Y&&(P.setState({nodesSelectionActive:!1}),w.selected&&Ie?(Ce({nodes:[],edges:[w]}),oe.current?.blur()):_e([e])),o&&o(ye,w)},ue=c?ye=>{c(ye,{...w})}:void 0,ce=u?ye=>{u(ye,{...w})}:void 0,le=d?ye=>{d(ye,{...w})}:void 0,de=g?ye=>{g(ye,{...w})}:void 0,Te=h?ye=>{h(ye,{...w})}:void 0,Se=ye=>{if(!R&&cb.includes(ye.key)&&Y){const{unselectNodesAndEdges:_e,addSelectedEdges:Ce}=P.getState();ye.key==="Escape"?(oe.current?.blur(),_e({edges:[w]})):Ce([e])}};return _.jsx("svg",{style:{zIndex:M},children:_.jsxs("g",{className:ut(["react-flow__edge",`react-flow__edge-${$}`,w.className,C,{selected:w.selected,animated:w.animated,inactive:!Y&&!o,updating:ee,selectable:Y}]),onClick:se,onDoubleClick:ue,onContextMenu:ce,onMouseEnter:le,onMouseMove:de,onMouseLeave:Te,onKeyDown:U?Se:void 0,tabIndex:U?0:void 0,role:w.ariaRole??(U?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":w.ariaLabel===null?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,"aria-describedby":U?`${Pb}-${T}`:void 0,ref:oe,...w.domAttributes,children:[!ne&&_.jsx(j,{id:e,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:Y,deletable:w.deletable??!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:L,sourceY:B,targetX:X,targetY:z,sourcePosition:O,targetPosition:D,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:K,markerEnd:Z,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),V&&_.jsx(EA,{edge:w,isReconnectable:V,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,sourceX:L,sourceY:B,targetX:X,targetY:z,sourcePosition:O,targetPosition:D,setUpdateHover:W,setReconnecting:k})]})})}var CA=q.memo(TA);const AA=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function pw({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:a,edgeTypes:i,noPanClassName:o,onReconnect:c,onEdgeContextMenu:u,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:v,onEdgeDoubleClick:y,onReconnectStart:b,onReconnectEnd:T,disableKeyboardA11y:S}){const{edgesFocusable:C,edgesReconnectable:E,elementsSelectable:R,onError:w}=De(AA,Fe),A=dA(n);return _.jsxs("div",{className:"react-flow__edges",children:[_.jsx(pA,{defaultColor:e,rfId:a}),A.map($=>_.jsx(CA,{id:$,edgesFocusable:C,edgesReconnectable:E,elementsSelectable:R,noPanClassName:o,onReconnect:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,onClick:p,reconnectRadius:v,onDoubleClick:y,onReconnectStart:b,onReconnectEnd:T,rfId:a,onError:w,edgeTypes:i,disableKeyboardA11y:S},$))]})}pw.displayName="EdgeRenderer";const NA=q.memo(pw),OA=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function RA({children:e}){const n=De(OA);return _.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function MA(e){const n=Lh(),a=q.useRef(!1);q.useEffect(()=>{!a.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),a.current=!0)},[e,n.viewportInitialized])}const kA=e=>e.panZoom?.syncViewport;function jA(e){const n=De(kA),a=Je();return q.useEffect(()=>{e&&(n?.(e),a.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function DA(e){return e.connection.inProgress?{...e.connection,to:_o(e.connection.to,e.transform)}:{...e.connection}}function zA(e){return DA}function $A(e){const n=zA();return De(n,Fe)}const UA=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function LA({containerStyle:e,style:n,type:a,component:i}){const{nodesConnectable:o,width:c,height:u,isValid:d,inProgress:g}=De(UA,Fe);return!(c&&o&&g)?null:_.jsx("svg",{style:e,width:c,height:u,className:"react-flow__connectionline react-flow__container",children:_.jsx("g",{className:ut(["react-flow__connection",fb(d)]),children:_.jsx(yw,{style:n,type:a,CustomComponent:i,isValid:d})})})}const yw=({style:e,type:n=Lr.Bezier,CustomComponent:a,isValid:i})=>{const{inProgress:o,from:c,fromNode:u,fromHandle:d,fromPosition:g,to:h,toNode:p,toHandle:v,toPosition:y}=$A();if(!o)return;if(a)return _.jsx(a,{connectionLineType:n,connectionLineStyle:e,fromNode:u,fromHandle:d,fromX:c.x,fromY:c.y,toX:h.x,toY:h.y,fromPosition:g,toPosition:y,connectionStatus:fb(i),toNode:p,toHandle:v});let b="";const T={sourceX:c.x,sourceY:c.y,sourcePosition:g,targetX:h.x,targetY:h.y,targetPosition:y};switch(n){case Lr.Bezier:[b]=Eb(T);break;case Lr.SimpleBezier:[b]=aw(T);break;case Lr.Step:[b]=ih({...T,borderRadius:0});break;case Lr.SmoothStep:[b]=ih(T);break;default:[b]=Ab(T)}return _.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};yw.displayName="ConnectionLine";const HA={};function By(e=HA){q.useRef(e),Je(),q.useEffect(()=>{},[e])}function BA(){Je(),q.useRef(!1),q.useEffect(()=>{},[])}function vw({nodeTypes:e,edgeTypes:n,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:b,connectionLineType:T,connectionLineStyle:S,connectionLineComponent:C,connectionLineContainerStyle:E,selectionKeyCode:R,selectionOnDrag:w,selectionMode:A,multiSelectionKeyCode:$,panActivationKeyCode:j,zoomActivationKeyCode:U,deleteKeyCode:V,onlyRenderVisibleElements:Y,elementsSelectable:oe,defaultViewport:ee,translateExtent:W,minZoom:ne,maxZoom:k,preventScrolling:P,defaultMarkerColor:M,zoomOnScroll:L,zoomOnPinch:B,panOnScroll:X,panOnScrollSpeed:z,panOnScrollMode:O,zoomOnDoubleClick:D,panOnDrag:K,onPaneClick:Z,onPaneMouseEnter:se,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:de,paneClickDistance:Te,nodeClickDistance:Se,onEdgeContextMenu:ye,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,noDragClassName:ar,noWheelClassName:ir,noPanClassName:Vr,disableKeyboardA11y:Pr,nodeExtent:yt,rfId:Na,viewport:Mn,onViewportChange:sr}){return By(e),By(n),BA(),MA(a),jA(Mn),_.jsx(tA,{onPaneClick:Z,onPaneMouseEnter:se,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneContextMenu:de,onPaneScroll:le,paneClickDistance:Te,deleteKeyCode:V,selectionKeyCode:R,selectionOnDrag:w,selectionMode:A,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:$,panActivationKeyCode:j,zoomActivationKeyCode:U,elementsSelectable:oe,zoomOnScroll:L,zoomOnPinch:B,zoomOnDoubleClick:D,panOnScroll:X,panOnScrollSpeed:z,panOnScrollMode:O,panOnDrag:K,defaultViewport:ee,translateExtent:W,minZoom:ne,maxZoom:k,onSelectionContextMenu:v,preventScrolling:P,noDragClassName:ar,noWheelClassName:ir,noPanClassName:Vr,disableKeyboardA11y:Pr,onViewportChange:sr,isControlledViewport:!!Mn,children:_.jsxs(RA,{children:[_.jsx(NA,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:u,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,onlyRenderVisibleElements:Y,onEdgeContextMenu:ye,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,defaultMarkerColor:M,noPanClassName:Vr,disableKeyboardA11y:Pr,rfId:Na}),_.jsx(LA,{style:S,type:T,component:C,containerStyle:E}),_.jsx("div",{className:"react-flow__edgelabel-renderer"}),_.jsx(uA,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:Se,onlyRenderVisibleElements:Y,noPanClassName:Vr,noDragClassName:ar,disableKeyboardA11y:Pr,nodeExtent:yt,rfId:Na}),_.jsx("div",{className:"react-flow__viewport-portal"})]})})}vw.displayName="GraphView";const IA=q.memo(vw),Iy=({nodes:e,edges:n,defaultNodes:a,defaultEdges:i,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:v}={})=>{const y=new Map,b=new Map,T=new Map,S=new Map,C=i??n??[],E=a??e??[],R=p??[0,0],w=v??no;Rb(T,S,C);const A=oh(E,y,b,{nodeOrigin:R,nodeExtent:w,elevateNodesOnSelect:!1});let $=[0,0,1];if(u&&o&&c){const j=wo(y,{filter:oe=>!!((oe.width||oe.initialWidth)&&(oe.height||oe.initialHeight))}),{x:U,y:V,zoom:Y}=kh(j,o,c,g,h,d?.padding??.1);$=[U,V,Y]}return{rfId:"1",width:o??0,height:c??0,transform:$,nodes:E,nodesInitialized:A,nodeLookup:y,parentLookup:b,edges:C,edgeLookup:S,connectionLookup:T,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:a!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:g,maxZoom:h,translateExtent:no,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Bi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:R,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:d,fitViewResolver:null,connection:{...db},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:iT,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:ub}},qA=({nodes:e,edges:n,defaultNodes:a,defaultEdges:i,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v})=>sC((y,b)=>{async function T(){const{nodeLookup:S,panZoom:C,fitViewOptions:E,fitViewResolver:R,width:w,height:A,minZoom:$,maxZoom:j}=b();C&&(await rT({nodes:S,width:w,height:A,panZoom:C,minZoom:$,maxZoom:j},E),R?.resolve(!0),y({fitViewResolver:null}))}return{...Iy({nodes:e,edges:n,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v,defaultNodes:a,defaultEdges:i}),setNodes:S=>{const{nodeLookup:C,parentLookup:E,nodeOrigin:R,elevateNodesOnSelect:w,fitViewQueued:A}=b(),$=oh(S,C,E,{nodeOrigin:R,nodeExtent:v,elevateNodesOnSelect:w,checkEquality:!0});A&&$?(T(),y({nodes:S,nodesInitialized:$,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:S,nodesInitialized:$})},setEdges:S=>{const{connectionLookup:C,edgeLookup:E}=b();Rb(C,E,S),y({edges:S})},setDefaultNodesAndEdges:(S,C)=>{if(S){const{setNodes:E}=b();E(S),y({hasDefaultNodes:!0})}if(C){const{setEdges:E}=b();E(C),y({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:C,nodeLookup:E,parentLookup:R,domNode:w,nodeOrigin:A,nodeExtent:$,debug:j,fitViewQueued:U}=b(),{changes:V,updatedInternals:Y}=CT(S,E,R,w,A,$);Y&&(_T(E,R,{nodeOrigin:A,nodeExtent:$}),U?(T(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),V?.length>0&&(j&&console.log("React Flow: trigger node changes",V),C?.(V)))},updateNodePositions:(S,C=!1)=>{const E=[],R=[],{nodeLookup:w,triggerNodeChanges:A}=b();for(const[$,j]of S){const U=w.get($),V=!!(U?.expandParent&&U?.parentId&&j?.position),Y={id:$,type:"position",position:V?{x:Math.max(0,j.position.x),y:Math.max(0,j.position.y)}:j.position,dragging:C};V&&U.parentId&&E.push({id:$,parentId:U.parentId,rect:{...j.internals.positionAbsolute,width:j.measured.width??0,height:j.measured.height??0}}),R.push(Y)}if(E.length>0){const{parentLookup:$,nodeOrigin:j}=b(),U=Uh(E,w,$,j);R.push(...U)}A(R)},triggerNodeChanges:S=>{const{onNodesChange:C,setNodes:E,nodes:R,hasDefaultNodes:w,debug:A}=b();if(S?.length){if(w){const $=Xb(S,R);E($)}A&&console.log("React Flow: trigger node changes",S),C?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:C,setEdges:E,edges:R,hasDefaultEdges:w,debug:A}=b();if(S?.length){if(w){const $=Kb(S,R);E($)}A&&console.log("React Flow: trigger edge changes",S),C?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:C,edgeLookup:E,nodeLookup:R,triggerNodeChanges:w,triggerEdgeChanges:A}=b();if(C){const $=S.map(j=>ma(j,!0));w($);return}w(ji(R,new Set([...S]),!0)),A(ji(E))},addSelectedEdges:S=>{const{multiSelectionActive:C,edgeLookup:E,nodeLookup:R,triggerNodeChanges:w,triggerEdgeChanges:A}=b();if(C){const $=S.map(j=>ma(j,!0));A($);return}A(ji(E,new Set([...S]))),w(ji(R,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:C}={})=>{const{edges:E,nodes:R,nodeLookup:w,triggerNodeChanges:A,triggerEdgeChanges:$}=b(),j=S||R,U=C||E,V=j.map(oe=>{const ee=w.get(oe.id);return ee&&(ee.selected=!1),ma(oe.id,!1)}),Y=U.map(oe=>ma(oe.id,!1));A(V),$(Y)},setMinZoom:S=>{const{panZoom:C,maxZoom:E}=b();C?.setScaleExtent([S,E]),y({minZoom:S})},setMaxZoom:S=>{const{panZoom:C,minZoom:E}=b();C?.setScaleExtent([E,S]),y({maxZoom:S})},setTranslateExtent:S=>{b().panZoom?.setTranslateExtent(S),y({translateExtent:S})},resetSelectedElements:()=>{const{edges:S,nodes:C,triggerNodeChanges:E,triggerEdgeChanges:R,elementsSelectable:w}=b();if(!w)return;const A=C.reduce((j,U)=>U.selected?[...j,ma(U.id,!1)]:j,[]),$=S.reduce((j,U)=>U.selected?[...j,ma(U.id,!1)]:j,[]);E(A),R($)},setNodeExtent:S=>{const{nodes:C,nodeLookup:E,parentLookup:R,nodeOrigin:w,elevateNodesOnSelect:A,nodeExtent:$}=b();S[0][0]===$[0][0]&&S[0][1]===$[0][1]&&S[1][0]===$[1][0]&&S[1][1]===$[1][1]||(oh(C,E,R,{nodeOrigin:w,nodeExtent:S,elevateNodesOnSelect:A,checkEquality:!1}),y({nodeExtent:S}))},panBy:S=>{const{transform:C,width:E,height:R,panZoom:w,translateExtent:A}=b();return AT({delta:S,panZoom:w,transform:C,translateExtent:A,width:E,height:R})},setCenter:async(S,C,E)=>{const{width:R,height:w,maxZoom:A,panZoom:$}=b();if(!$)return Promise.resolve(!1);const j=typeof E?.zoom<"u"?E.zoom:A;return await $.setViewport({x:R/2-S*j,y:w/2-C*j,zoom:j},{duration:E?.duration,ease:E?.ease,interpolate:E?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...db}})},updateConnection:S=>{y({connection:S})},reset:()=>y({...Iy()})}},Object.is);function VA({initialNodes:e,initialEdges:n,defaultNodes:a,defaultEdges:i,initialWidth:o,initialHeight:c,initialMinZoom:u,initialMaxZoom:d,initialFitViewOptions:g,fitView:h,nodeOrigin:p,nodeExtent:v,children:y}){const[b]=q.useState(()=>qA({nodes:e,edges:n,defaultNodes:a,defaultEdges:i,width:o,height:c,fitView:h,minZoom:u,maxZoom:d,fitViewOptions:g,nodeOrigin:p,nodeExtent:v}));return _.jsx(oC,{value:b,children:_.jsx(RC,{children:y})})}function PA({children:e,nodes:n,edges:a,defaultNodes:i,defaultEdges:o,width:c,height:u,fitView:d,fitViewOptions:g,minZoom:h,maxZoom:p,nodeOrigin:v,nodeExtent:y}){return q.useContext(Xc)?_.jsx(_.Fragment,{children:e}):_.jsx(VA,{initialNodes:n,initialEdges:a,defaultNodes:i,defaultEdges:o,initialWidth:c,initialHeight:u,fitView:d,initialFitViewOptions:g,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:v,nodeExtent:y,children:e})}const GA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function YA({nodes:e,edges:n,defaultNodes:a,defaultEdges:i,className:o,nodeTypes:c,edgeTypes:u,onNodeClick:d,onEdgeClick:g,onInit:h,onMove:p,onMoveStart:v,onMoveEnd:y,onConnect:b,onConnectStart:T,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:E,onNodeMouseEnter:R,onNodeMouseMove:w,onNodeMouseLeave:A,onNodeContextMenu:$,onNodeDoubleClick:j,onNodeDragStart:U,onNodeDrag:V,onNodeDragStop:Y,onNodesDelete:oe,onEdgesDelete:ee,onDelete:W,onSelectionChange:ne,onSelectionDragStart:k,onSelectionDrag:P,onSelectionDragStop:M,onSelectionContextMenu:L,onSelectionStart:B,onSelectionEnd:X,onBeforeDelete:z,connectionMode:O,connectionLineType:D=Lr.Bezier,connectionLineStyle:K,connectionLineComponent:Z,connectionLineContainerStyle:se,deleteKeyCode:ue="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:de=ro.Full,panActivationKeyCode:Te="Space",multiSelectionKeyCode:Se=io()?"Meta":"Control",zoomActivationKeyCode:ye=io()?"Meta":"Control",snapToGrid:_e,snapGrid:Ce,onlyRenderVisibleElements:Ie=!1,selectNodesOnDrag:Ge,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ar,nodeOrigin:ir=Gb,edgesFocusable:Vr,edgesReconnectable:Pr,elementsSelectable:yt=!0,defaultViewport:Na=wC,minZoom:Mn=.5,maxZoom:sr=2,translateExtent:Gr=no,preventScrolling:nu=!0,nodeExtent:Oa,defaultMarkerColor:ru="#b1b1b7",zoomOnScroll:au=!0,zoomOnPinch:Yr=!0,panOnScroll:At=!1,panOnScrollSpeed:xn=.5,panOnScrollMode:Nt=Sa.Free,zoomOnDoubleClick:iu=!0,panOnDrag:su=!0,onPaneClick:ou,onPaneMouseEnter:Ra,onPaneMouseMove:Ma,onPaneMouseLeave:ka,onPaneScroll:kn,onPaneContextMenu:ja,paneClickDistance:Xr=0,nodeClickDistance:lu=0,children:No,onReconnect:Xi,onReconnectStart:Kr,onReconnectEnd:cu,onEdgeContextMenu:Oo,onEdgeDoubleClick:Ro,onEdgeMouseEnter:Mo,onEdgeMouseMove:Ki,onEdgeMouseLeave:Zi,reconnectRadius:ko=10,onNodesChange:jo,onEdgesChange:_n,noDragClassName:dt="nodrag",noWheelClassName:Et="nowheel",noPanClassName:jn="nopan",fitView:Da,fitViewOptions:Do,connectOnClick:uu,attributionPosition:zo,proOptions:Zr,defaultEdgeOptions:Qi,elevateNodesOnSelect:or,elevateEdgesOnSelect:lr,disableKeyboardA11y:cr=!1,autoPanOnConnect:ur,autoPanOnNodeDrag:at,autoPanSpeed:$o,connectionRadius:Uo,isValidConnection:Dn,onError:dr,style:du,id:Ji,nodeDragThreshold:Lo,connectionDragThreshold:fu,viewport:za,onViewportChange:$a,width:cn,height:Rt,colorMode:Ho="light",debug:hu,onScroll:Ua,ariaLabelConfig:Bo,...La},gu){const Tt=Ji||"1",Fi=EC(Ho),Io=q.useCallback(Ha=>{Ha.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ua?.(Ha)},[Ua]);return _.jsx("div",{"data-testid":"rf__wrapper",...La,onScroll:Io,style:{...du,...GA},ref:gu,className:ut(["react-flow",o,Fi]),id:Ji,role:"application",children:_.jsxs(PA,{nodes:e,edges:n,width:cn,height:Rt,fitView:Da,fitViewOptions:Do,minZoom:Mn,maxZoom:sr,nodeOrigin:ir,nodeExtent:Oa,children:[_.jsx(IA,{onInit:h,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:R,onNodeMouseMove:w,onNodeMouseLeave:A,onNodeContextMenu:$,onNodeDoubleClick:j,nodeTypes:c,edgeTypes:u,connectionLineType:D,connectionLineStyle:K,connectionLineComponent:Z,connectionLineContainerStyle:se,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:de,deleteKeyCode:ue,multiSelectionKeyCode:Se,panActivationKeyCode:Te,zoomActivationKeyCode:ye,onlyRenderVisibleElements:Ie,defaultViewport:Na,translateExtent:Gr,minZoom:Mn,maxZoom:sr,preventScrolling:nu,zoomOnScroll:au,zoomOnPinch:Yr,zoomOnDoubleClick:iu,panOnScroll:At,panOnScrollSpeed:xn,panOnScrollMode:Nt,panOnDrag:su,onPaneClick:ou,onPaneMouseEnter:Ra,onPaneMouseMove:Ma,onPaneMouseLeave:ka,onPaneScroll:kn,onPaneContextMenu:ja,paneClickDistance:Xr,nodeClickDistance:lu,onSelectionContextMenu:L,onSelectionStart:B,onSelectionEnd:X,onReconnect:Xi,onReconnectStart:Kr,onReconnectEnd:cu,onEdgeContextMenu:Oo,onEdgeDoubleClick:Ro,onEdgeMouseEnter:Mo,onEdgeMouseMove:Ki,onEdgeMouseLeave:Zi,reconnectRadius:ko,defaultMarkerColor:ru,noDragClassName:dt,noWheelClassName:Et,noPanClassName:jn,rfId:Tt,disableKeyboardA11y:cr,nodeExtent:Oa,viewport:za,onViewportChange:$a}),_.jsx(SC,{nodes:e,edges:n,defaultNodes:a,defaultEdges:i,onConnect:b,onConnectStart:T,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:E,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ar,edgesFocusable:Vr,edgesReconnectable:Pr,elementsSelectable:yt,elevateNodesOnSelect:or,elevateEdgesOnSelect:lr,minZoom:Mn,maxZoom:sr,nodeExtent:Oa,onNodesChange:jo,onEdgesChange:_n,snapToGrid:_e,snapGrid:Ce,connectionMode:O,translateExtent:Gr,connectOnClick:uu,defaultEdgeOptions:Qi,fitView:Da,fitViewOptions:Do,onNodesDelete:oe,onEdgesDelete:ee,onDelete:W,onNodeDragStart:U,onNodeDrag:V,onNodeDragStop:Y,onSelectionDrag:P,onSelectionDragStart:k,onSelectionDragStop:M,onMove:p,onMoveStart:v,onMoveEnd:y,noPanClassName:jn,nodeOrigin:ir,rfId:Tt,autoPanOnConnect:ur,autoPanOnNodeDrag:at,autoPanSpeed:$o,onError:dr,connectionRadius:Uo,isValidConnection:Dn,selectNodesOnDrag:Ge,nodeDragThreshold:Lo,connectionDragThreshold:fu,onBeforeDelete:z,debug:hu,ariaLabelConfig:Bo}),_.jsx(bC,{onSelectionChange:ne}),No,_.jsx(gC,{proOptions:Zr,position:zo}),_.jsx(hC,{rfId:Tt,disableKeyboardA11y:cr})]})})}var bw=Zb(YA);function XA(e){const[n,a]=q.useState(e),i=q.useCallback(o=>a(c=>Xb(o,c)),[]);return[n,a,i]}function KA(e){const[n,a]=q.useState(e),i=q.useCallback(o=>a(c=>Kb(o,c)),[]);return[n,a,i]}function ZA({dimensions:e,lineWidth:n,variant:a,className:i}){return _.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ut(["react-flow__background-pattern",a,i])})}function QA({radius:e,className:n}){return _.jsx("circle",{cx:e,cy:e,r:e,className:ut(["react-flow__background-pattern","dots",n])})}var Br;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Br||(Br={}));const JA={[Br.Dots]:1,[Br.Lines]:1,[Br.Cross]:6},FA=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ww({id:e,variant:n=Br.Dots,gap:a=20,size:i,lineWidth:o=1,offset:c=0,color:u,bgColor:d,style:g,className:h,patternClassName:p}){const v=q.useRef(null),{transform:y,patternId:b}=De(FA,Fe),T=i||JA[n],S=n===Br.Dots,C=n===Br.Cross,E=Array.isArray(a)?a:[a,a],R=[E[0]*y[2]||1,E[1]*y[2]||1],w=T*y[2],A=Array.isArray(c)?c:[c,c],$=C?[w,w]:R,j=[A[0]*y[2]||1+$[0]/2,A[1]*y[2]||1+$[1]/2],U=`${b}${e||""}`;return _.jsxs("svg",{className:ut(["react-flow__background",h]),style:{...g,...Zc,"--xy-background-color-props":d,"--xy-background-pattern-color-props":u},ref:v,"data-testid":"rf__background",children:[_.jsx("pattern",{id:U,x:y[0]%R[0],y:y[1]%R[1],width:R[0],height:R[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:S?_.jsx(QA,{radius:w/2,className:p}):_.jsx(ZA,{dimensions:$,lineWidth:o,variant:n,className:p})}),_.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${U})`})]})}ww.displayName="Background";const xw=q.memo(ww);function WA(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:_.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function eN(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:_.jsx("path",{d:"M0 0h32v4.2H0z"})})}function tN(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:_.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function nN(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function rN(){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function sc({children:e,className:n,...a}){return _.jsx("button",{type:"button",className:ut(["react-flow__controls-button",n]),...a,children:e})}const aN=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function _w({style:e,showZoom:n=!0,showFitView:a=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:c,onZoomOut:u,onFitView:d,onInteractiveChange:g,className:h,children:p,position:v="bottom-left",orientation:y="vertical","aria-label":b}){const T=Je(),{isInteractive:S,minZoomReached:C,maxZoomReached:E,ariaLabelConfig:R}=De(aN,Fe),{zoomIn:w,zoomOut:A,fitView:$}=Lh(),j=()=>{w(),c?.()},U=()=>{A(),u?.()},V=()=>{$(o),d?.()},Y=()=>{T.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),g?.(!S)},oe=y==="horizontal"?"horizontal":"vertical";return _.jsxs(Kc,{className:ut(["react-flow__controls",oe,h]),position:v,style:e,"data-testid":"rf__controls","aria-label":b??R["controls.ariaLabel"],children:[n&&_.jsxs(_.Fragment,{children:[_.jsx(sc,{onClick:j,className:"react-flow__controls-zoomin",title:R["controls.zoomIn.ariaLabel"],"aria-label":R["controls.zoomIn.ariaLabel"],disabled:E,children:_.jsx(WA,{})}),_.jsx(sc,{onClick:U,className:"react-flow__controls-zoomout",title:R["controls.zoomOut.ariaLabel"],"aria-label":R["controls.zoomOut.ariaLabel"],disabled:C,children:_.jsx(eN,{})})]}),a&&_.jsx(sc,{className:"react-flow__controls-fitview",onClick:V,title:R["controls.fitView.ariaLabel"],"aria-label":R["controls.fitView.ariaLabel"],children:_.jsx(tN,{})}),i&&_.jsx(sc,{className:"react-flow__controls-interactive",onClick:Y,title:R["controls.interactive.ariaLabel"],"aria-label":R["controls.interactive.ariaLabel"],children:S?_.jsx(rN,{}):_.jsx(nN,{})}),p]})}_w.displayName="Controls";const Sw=q.memo(_w);function iN({id:e,x:n,y:a,width:i,height:o,style:c,color:u,strokeColor:d,strokeWidth:g,className:h,borderRadius:p,shapeRendering:v,selected:y,onClick:b}){const{background:T,backgroundColor:S}=c||{},C=u||T||S;return _.jsx("rect",{className:ut(["react-flow__minimap-node",{selected:y},h]),x:n,y:a,rx:p,ry:p,width:i,height:o,style:{fill:C,stroke:d,strokeWidth:g},shapeRendering:v,onClick:b?E=>b(E,e):void 0})}const sN=q.memo(iN),oN=e=>e.nodes.map(n=>n.id),Lf=e=>e instanceof Function?e:()=>e;function lN({nodeStrokeColor:e,nodeColor:n,nodeClassName:a="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:c=sN,onClick:u}){const d=De(oN,Fe),g=Lf(n),h=Lf(e),p=Lf(a),v=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return _.jsx(_.Fragment,{children:d.map(y=>_.jsx(uN,{id:y,nodeColorFunc:g,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:i,nodeStrokeWidth:o,NodeComponent:c,onClick:u,shapeRendering:v},y))})}function cN({id:e,nodeColorFunc:n,nodeStrokeColorFunc:a,nodeClassNameFunc:i,nodeBorderRadius:o,nodeStrokeWidth:c,shapeRendering:u,NodeComponent:d,onClick:g}){const{node:h,x:p,y:v,width:y,height:b}=De(T=>{const{internals:S}=T.nodeLookup.get(e),C=S.userNode,{x:E,y:R}=S.positionAbsolute,{width:w,height:A}=nr(C);return{node:C,x:E,y:R,width:w,height:A}},Fe);return!h||h.hidden||!vb(h)?null:_.jsx(d,{x:p,y:v,width:y,height:b,style:h.style,selected:!!h.selected,className:i(h),color:n(h),borderRadius:o,strokeColor:a(h),strokeWidth:c,shapeRendering:u,onClick:g,id:h.id})}const uN=q.memo(cN);var dN=q.memo(lN);const fN=200,hN=150,gN=e=>!e.hidden,mN=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?yb(wo(e.nodeLookup,{filter:gN}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},pN="react-flow__minimap-desc";function Ew({style:e,className:n,nodeStrokeColor:a,nodeColor:i,nodeClassName:o="",nodeBorderRadius:c=5,nodeStrokeWidth:u,nodeComponent:d,bgColor:g,maskColor:h,maskStrokeColor:p,maskStrokeWidth:v,position:y="bottom-right",onClick:b,onNodeClick:T,pannable:S=!1,zoomable:C=!1,ariaLabel:E,inversePan:R,zoomStep:w=1,offsetScale:A=5}){const $=Je(),j=q.useRef(null),{boundingRect:U,viewBB:V,rfId:Y,panZoom:oe,translateExtent:ee,flowWidth:W,flowHeight:ne,ariaLabelConfig:k}=De(mN,Fe),P=e?.width??fN,M=e?.height??hN,L=U.width/P,B=U.height/M,X=Math.max(L,B),z=X*P,O=X*M,D=A*X,K=U.x-(z-U.width)/2-D,Z=U.y-(O-U.height)/2-D,se=z+D*2,ue=O+D*2,ce=`${pN}-${Y}`,le=q.useRef(0),de=q.useRef();le.current=X,q.useEffect(()=>{if(j.current&&oe)return de.current=$T({domNode:j.current,panZoom:oe,getTransform:()=>$.getState().transform,getViewScale:()=>le.current}),()=>{de.current?.destroy()}},[oe]),q.useEffect(()=>{de.current?.update({translateExtent:ee,width:W,height:ne,inversePan:R,pannable:S,zoomStep:w,zoomable:C})},[S,C,R,w,ee,W,ne]);const Te=b?_e=>{const[Ce,Ie]=de.current?.pointer(_e)||[0,0];b(_e,{x:Ce,y:Ie})}:void 0,Se=T?q.useCallback((_e,Ce)=>{const Ie=$.getState().nodeLookup.get(Ce).internals.userNode;T(_e,Ie)},[]):void 0,ye=E??k["minimap.ariaLabel"];return _.jsx(Kc,{position:y,style:{...e,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof v=="number"?v*X:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:ut(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:_.jsxs("svg",{width:P,height:M,viewBox:`${K} ${Z} ${se} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:j,onClick:Te,children:[ye&&_.jsx("title",{id:ce,children:ye}),_.jsx(dN,{onClick:Se,nodeColor:i,nodeStrokeColor:a,nodeBorderRadius:c,nodeClassName:o,nodeStrokeWidth:u,nodeComponent:d}),_.jsx("path",{className:"react-flow__minimap-mask",d:`M${K-D},${Z-D}h${se+D*2}v${ue+D*2}h${-se-D*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ew.displayName="MiniMap";const Tw=q.memo(Ew),yN=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,vN={[Pi.Line]:"right",[Pi.Handle]:"bottom-right"};function bN({nodeId:e,position:n,variant:a=Pi.Handle,className:i,style:o=void 0,children:c,color:u,minWidth:d=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:v=!1,resizeDirection:y,autoScale:b=!0,shouldResize:T,onResizeStart:S,onResize:C,onResizeEnd:E}){const R=Wb(),w=typeof e=="string"?e:R,A=Je(),$=q.useRef(null),j=a===Pi.Handle,U=De(q.useCallback(yN(j&&b),[j,b]),Fe),V=q.useRef(null),Y=n??vN[a];q.useEffect(()=>{if(!(!$.current||!w))return V.current||(V.current=QT({domNode:$.current,nodeId:w,getStoreItems:()=>{const{nodeLookup:ee,transform:W,snapGrid:ne,snapToGrid:k,nodeOrigin:P,domNode:M}=A.getState();return{nodeLookup:ee,transform:W,snapGrid:ne,snapToGrid:k,nodeOrigin:P,paneDomNode:M}},onChange:(ee,W)=>{const{triggerNodeChanges:ne,nodeLookup:k,parentLookup:P,nodeOrigin:M}=A.getState(),L=[],B={x:ee.x,y:ee.y},X=k.get(w);if(X&&X.expandParent&&X.parentId){const z=X.origin??M,O=ee.width??X.measured.width??0,D=ee.height??X.measured.height??0,K={id:X.id,parentId:X.parentId,rect:{width:O,height:D,...bb({x:ee.x??X.position.x,y:ee.y??X.position.y},{width:O,height:D},X.parentId,k,z)}},Z=Uh([K],k,P,M);L.push(...Z),B.x=ee.x?Math.max(z[0]*O,ee.x):void 0,B.y=ee.y?Math.max(z[1]*D,ee.y):void 0}if(B.x!==void 0&&B.y!==void 0){const z={id:w,type:"position",position:{...B}};L.push(z)}if(ee.width!==void 0&&ee.height!==void 0){const O={id:w,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:ee.width,height:ee.height}};L.push(O)}for(const z of W){const O={...z,type:"position"};L.push(O)}ne(L)},onEnd:({width:ee,height:W})=>{const ne={id:w,type:"dimensions",resizing:!1,dimensions:{width:ee,height:W}};A.getState().triggerNodeChanges([ne])}})),V.current.update({controlPosition:Y,boundaries:{minWidth:d,minHeight:g,maxWidth:h,maxHeight:p},keepAspectRatio:v,resizeDirection:y,onResizeStart:S,onResize:C,onResizeEnd:E,shouldResize:T}),()=>{V.current?.destroy()}},[Y,d,g,h,p,v,S,C,E,T]);const oe=Y.split("-");return _.jsx("div",{className:ut(["react-flow__resize-control","nodrag",...oe,a,i]),ref:$,style:{...o,scale:U,...u&&{[j?"backgroundColor":"borderColor"]:u}},children:c})}q.memo(bN);const Cw={},{useDebugValue:wN}=Mv,{useSyncExternalStoreWithSelector:xN}=Hb;let qy=!1;const _N=e=>e;function SN(e,n=_N,a){(Cw?"production":void 0)!=="production"&&a&&!qy&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),qy=!0);const i=xN(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,a);return wN(i),i}const Vy=e=>{(Cw?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?Bb(e):e,a=(i,o)=>SN(n,i,o);return Object.assign(a,n),a},EN=e=>e?Vy(e):Vy,Hf=e=>({system:"systems",container:"containers",component:"components",person:"people",externalSystem:"externalSystems",shadow:"shadows"})[e]||`${e}s`,pe=EN((e,n)=>({debugMode:!1,metadata:{name:"New C4 Model",version:"1.0",author:"Solution Architect"},currentLevel:"context",viewMode:"edit",currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null,systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],warnings:[],setMetadata:a=>e({metadata:a}),setCurrentLevel:a=>e({currentLevel:a}),setViewMode:a=>e({viewMode:a}),navigateInto:a=>{const i=n();i.getElementById(a)&&e({currentParentId:a,navigationHistory:[...i.navigationHistory,i.currentParentId],selectedElement:null,selectedEdge:null})},navigateUp:()=>{const a=n();if(a.navigationHistory.length===0)return;const i=[...a.navigationHistory],o=i.pop();e({currentParentId:o,navigationHistory:i,selectedElement:null,selectedEdge:null})},navigateToRoot:()=>{e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},navigateTo:a=>{const i=n();if(a===null){e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null});return}const c=(u=>{const d=[];let g=i.getElementById(u);for(;g&&g.parentId;)d.unshift(g.parentId),g=i.getElementById(g.parentId);return d})(a);e({currentParentId:a,navigationHistory:[null,...c],selectedElement:null,selectedEdge:null})},getBreadcrumb:()=>{const a=n(),i=[];for(const o of a.navigationHistory)if(o!==null){const c=a.getElementById(o);c&&i.push(c)}if(a.currentParentId!==null){const o=a.getElementById(a.currentParentId);o&&i.push(o)}return i},getChildren:a=>{const o=n().getAllElements();return a===null?o.filter(c=>!c.parentId):o.filter(c=>c.parentId===a)},hasChildren:a=>n().getChildren(a).length>0,getChildCount:a=>n().getChildren(a).length,getElementPath:a=>{const i=n(),o=[];let c=i.getElementById(a);for(;c&&(o.unshift(c.name||c.id),c.parentId);)c=i.getElementById(c.parentId);return o.join(" / ")},setSelectedElement:a=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedElement called:",a?{id:a.id,type:a.type}:null),e({selectedElement:a,selectedEdge:null})},setSelectedEdge:a=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedEdge called:",a?{id:a.id}:null),e({selectedEdge:a,selectedElement:null})},addElement:(a,i)=>{const o=n(),c={id:`${a}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:a,parentId:o.currentParentId,phases:[],...i},u=Hf(a);return e(d=>({[u]:[...d[u],c]})),c},updateElement:(a,i,o)=>{n().debugMode&&console.log("[Diagrams Debug] updateElement called:",{type:a,id:i,updates:o});const u=Hf(a);e(d=>{const g=d[u].map(v=>v.id===i?{...v,...o}:v),h=g.find(v=>v.id===i),p=d.selectedElement?.id===i?h:d.selectedElement;return d.debugMode&&h&&console.log("[Diagrams Debug] Element updated:",h),{[u]:g,selectedElement:p}})},deleteElement:(a,i)=>{const o=n(),c=Hf(a);let u={};o.currentParentId===i?u={currentParentId:null,navigationHistory:[]}:o.navigationHistory.includes(i)&&(u={currentParentId:null,navigationHistory:[]}),e(d=>({[c]:d[c].filter(g=>g.id!==i),relationships:d.relationships.filter(g=>g.from!==i&&g.to!==i),...u}))},addRelationship:a=>{const i={id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...a};return e(o=>({relationships:[...o.relationships,i]})),i},updateRelationship:(a,i)=>{n().debugMode&&console.log("[Diagrams Debug] updateRelationship called:",{id:a,updates:i}),e(c=>{const u=c.relationships.map(h=>h.id===a?{...h,...i}:h),d=u.find(h=>h.id===a),g=c.selectedEdge?.id===a?d:c.selectedEdge;return c.debugMode&&d&&console.log("[Diagrams Debug] Relationship updated:",d),{relationships:u,selectedEdge:g}})},deleteRelationship:a=>{e(i=>({relationships:i.relationships.filter(o=>o.id!==a)}))},getAllElements:()=>{const a=n();return[...a.systems,...a.containers,...a.components,...a.people,...a.externalSystems,...a.shadows]},getElementById:a=>n().getAllElements().find(o=>o.id===a),clearAll:()=>{e({systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],selectedElement:null,selectedEdge:null,warnings:[],currentParentId:null,navigationHistory:[]})},importModel:a=>{e({metadata:a.metadata||n().metadata,systems:a.systems||[],containers:a.containers||[],components:a.components||[],people:a.people||[],externalSystems:a.externalSystems||[],shadows:a.shadows||[],relationships:a.relationships||[],currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},exportModel:()=>{const a=n();return{metadata:a.metadata,systems:a.systems,containers:a.containers,components:a.components,people:a.people,externalSystems:a.externalSystems,shadows:a.shadows,relationships:a.relationships}},validateModel:()=>{const a=n(),i=[];a.containers.forEach(d=>{d.parentSystem&&!a.systems.find(g=>g.id===d.parentSystem)&&i.push({type:"warning",message:`Container "${d.name}" references non-existent parent system`,elementId:d.id})}),a.components.forEach(d=>{d.parentContainer&&!a.containers.find(g=>g.id===d.parentContainer)&&i.push({type:"warning",message:`Component "${d.name}" references non-existent parent container`,elementId:d.id})});const o=a.getAllElements(),c=new Set(o.map(d=>d.id));a.relationships.forEach(d=>{c.has(d.from)||i.push({type:"error",message:`Relationship references non-existent source element: ${d.from}`,elementId:d.id}),c.has(d.to)||i.push({type:"error",message:`Relationship references non-existent target element: ${d.to}`,elementId:d.id})});const u=n().getVisibleElements();return u.length>15&&i.push({type:"info",message:`Current view has ${u.length} elements. Consider splitting into multiple diagrams for clarity.`}),e({warnings:i}),i},getVisibleElements:()=>{const a=n(),i=a.currentParentId;return a.getAllElements().filter(c=>i===null?!c.parentId:c.parentId===i)}}));typeof window<"u"&&(window.__ZUSTAND_STORE__=pe);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Aw=(...e)=>e.filter((n,a,i)=>!!n&&i.indexOf(n)===a).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=q.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:u,...d},g)=>q.createElement("svg",{ref:g,...CN,width:n,height:n,stroke:e,strokeWidth:i?Number(a)*24/Number(n):a,className:Aw("lucide",o),...d},[...u.map(([h,p])=>q.createElement(h,p)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(e,n)=>{const a=q.forwardRef(({className:i,...o},c)=>q.createElement(AN,{ref:c,iconNode:n,className:Aw(`lucide-${TN(e)}`,i),...o}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Ue("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=Ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=Ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=Ue("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Ue("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Ue("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Ue("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Ue("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Ue("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Ue("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Ue("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=Ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Ue("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Ue("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),qN=e=>{if(!e)return null;let n=0;for(let i=0;i<e.length;i++)n=e.charCodeAt(i)+((n<<5)-n);const a=Math.abs(n)%360;return{bg:`hsl(${a}, 70%, 90%)`,text:`hsl(${a}, 70%, 30%)`,border:`hsl(${a}, 70%, 70%)`}},Ky=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},VN=({data:e,selected:n})=>{const i=pe(h=>h.getChildCount)(e.id),o=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(h=>h.name).map(h=>({...h,initials:Ky(h.name),colors:qN(Ky(h.name))})),c=()=>{const h="px-4 py-3 rounded-lg border-2 min-w-[200px] shadow-lg transition-all";switch(e.type){case"system":return`${h} bg-blue-100 border-blue-500 hover:bg-blue-200`;case"container":return`${h} bg-green-100 border-green-500 hover:bg-green-200`;case"component":return`${h} bg-yellow-100 border-yellow-500 hover:bg-yellow-200`;case"person":return`${h} bg-purple-100 border-purple-500 hover:bg-purple-200`;case"externalSystem":return`${h} bg-gray-100 border-gray-500 hover:bg-gray-200`;default:return`${h} bg-white border-gray-300`}},u=()=>{const h="w-5 h-5";switch(e.type){case"system":return _.jsx(Eo,{className:h});case"container":return _.jsx(qr,{className:h});case"component":return _.jsx(So,{className:h});case"person":return _.jsx(To,{className:h});case"externalSystem":return _.jsx(Gi,{className:h});default:return _.jsx(qr,{className:h})}},d=()=>{switch(e.type){case"system":return"Software System";case"container":return"Container";case"component":return"Component";case"person":return"Person";case"externalSystem":return"External System";default:return e.type}},g="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return _.jsxs("div",{className:`${c()} ${n?"ring-4 ring-blue-400":""} relative`,children:[_.jsx(Lt,{type:"target",position:he.Top,id:"top",className:g}),_.jsxs("div",{className:"flex items-start gap-2",children:[_.jsx("div",{className:"mt-1",children:u()}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:d()}),_.jsx("div",{className:"font-bold text-gray-900 mb-1",children:e.label||e.name||"Unnamed"}),e.technology&&_.jsxs("div",{className:"text-xs text-gray-600 italic mb-1",children:["[",e.technology,"]"]}),e.description&&_.jsx("div",{className:"text-xs text-gray-700 mt-2",children:e.description})]})]}),o.length>0&&_.jsx("div",{className:"absolute bottom-2 left-2 flex items-center gap-1",children:o.map(h=>_.jsx("div",{className:"px-1.5 py-0.5 rounded text-xs font-medium border",style:{backgroundColor:h.colors.bg,color:h.colors.text,borderColor:h.colors.border},title:`${h.label}: ${h.name}`,children:h.initials},h.label))}),i>0&&_.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 text-xs text-gray-500 bg-white/80 px-1.5 py-0.5 rounded",children:[_.jsx(HN,{className:"w-3 h-3"}),_.jsx("span",{children:i})]}),_.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:g}),_.jsx(Lt,{type:"source",position:he.Right,id:"right",className:g}),_.jsx(Lt,{type:"target",position:he.Left,id:"left",className:g})]})},PN=q.memo(VN),GN=({data:e,selected:n})=>{const i=pe(d=>d.getElementById)(e.targetId),o=()=>{const d="w-5 h-5";if(!i)return _.jsx(xc,{className:d});switch(i.type){case"system":return _.jsx(Eo,{className:d});case"container":return _.jsx(qr,{className:d});case"component":return _.jsx(So,{className:d});case"person":return _.jsx(To,{className:d});case"externalSystem":return _.jsx(Gi,{className:d});default:return _.jsx(xc,{className:d})}},c=()=>i?`Shadow  ${{system:"Software System",container:"Container",component:"Component",person:"Person",externalSystem:"External System"}[i.type]||i.type}`:"Shadow (broken link)",u="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return _.jsxs("div",{className:`px-4 py-3 rounded-lg border-2 border-dashed min-w-[200px] shadow-lg transition-all
        ${i?"bg-slate-50/50 border-slate-400":"bg-red-50/50 border-red-400"}
        ${n?"ring-4 ring-blue-400":""} relative`,children:[_.jsx(Lt,{type:"target",position:he.Top,id:"top",className:u}),_.jsxs("div",{className:"flex items-start gap-2 opacity-70",children:[_.jsx("div",{className:"mt-1",children:o()}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:c()}),_.jsx("div",{className:"font-bold text-gray-700 mb-1",children:i?.name||"Select target..."}),i?.technology&&_.jsxs("div",{className:"text-xs text-gray-500 italic mb-1",children:["[",i.technology,"]"]}),i?.description&&_.jsx("div",{className:"text-xs text-gray-600 mt-2",children:i.description})]})]}),_.jsx("div",{className:"absolute top-2 right-2",children:_.jsx(xc,{className:"w-4 h-4 text-slate-400"})}),_.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:u}),_.jsx(Lt,{type:"source",position:he.Right,id:"right",className:u}),_.jsx(Lt,{type:"target",position:he.Left,id:"left",className:u})]})},YN=q.memo(GN),XN=e=>{if(!e)return null;let n=0;for(let i=0;i<e.length;i++)n=e.charCodeAt(i)+((n<<5)-n);const a=Math.abs(n)%360;return{bg:`hsl(${a}, 70%, 90%)`,text:`hsl(${a}, 70%, 30%)`,border:`hsl(${a}, 70%, 70%)`}},Zy=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},KN=({data:e})=>{const n=pe(d=>d.setViewMode),a=pe(d=>d.navigateTo),i=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(d=>d.name).map(d=>({...d,initials:Zy(d.name),colors:XN(Zy(d.name))})),o=()=>{const d="w-4 h-4";switch(e.type){case"system":return _.jsx(Eo,{className:d});case"container":return _.jsx(qr,{className:d});case"component":return _.jsx(So,{className:d});case"person":return _.jsx(To,{className:d});case"externalSystem":return _.jsx(Gi,{className:d});default:return _.jsx(qr,{className:d})}},c=()=>{const d="px-3 py-2 rounded border min-w-[150px] text-sm";switch(e.type){case"system":return`${d} bg-blue-50 border-blue-300`;case"container":return`${d} bg-green-50 border-green-300`;case"component":return`${d} bg-yellow-50 border-yellow-300`;case"person":return`${d} bg-purple-50 border-purple-300`;case"externalSystem":return`${d} bg-gray-50 border-gray-300`;default:return`${d} bg-white border-gray-200`}},u=d=>{d.stopPropagation();const g=e.parentId||null;g?a(g):pe.getState().navigateToRoot(),n("edit")};return _.jsxs("div",{className:`${c()} relative`,children:[_.jsx(Lt,{type:"target",position:he.Top,className:"!w-2 !h-2 !bg-gray-400 !border-0"}),_.jsxs("div",{className:"flex items-center gap-2",children:[o(),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("div",{className:"font-medium text-gray-900 truncate",children:e.name||"Unnamed"}),_.jsx("div",{className:"text-xs text-gray-500 capitalize",children:e.type})]}),_.jsx("button",{onClick:u,className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Go to this element in edit mode",children:_.jsx(Gi,{className:"w-3 h-3 text-gray-400 hover:text-blue-500"})})]}),i.length>0&&_.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:i.map(d=>_.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium border",style:{backgroundColor:d.colors?.bg||"#f3f4f6",color:d.colors?.text||"#374151",borderColor:d.colors?.border||"#d1d5db"},title:`${d.label}: ${d.name}`,children:[_.jsx("span",{className:"opacity-60",children:d.label}),_.jsx("span",{children:d.initials})]},d.label))}),_.jsx(Lt,{type:"source",position:he.Bottom,className:"!w-2 !h-2 !bg-gray-400 !border-0"})]})},ZN=q.memo(KN),QN={treeNode:ZN},JN=e=>{const n=new Map,a=[];e.forEach(S=>{S.parentId?(n.has(S.parentId)||n.set(S.parentId,[]),n.get(S.parentId).push(S)):a.push(S)});const i=[],o=[],c=180,u=70,d=40,g=120,h=3,p=S=>{const C=n.get(S)||[];if(C.length===0)return c;const E=Math.min(C.length,h),R=Math.ceil(C.length/E);let w=c;for(let A=0;A<R;A++){let $=0;const j=Math.min(E,C.length-A*E);for(let U=0;U<j;U++){const V=A*E+U,Y=p(C[V].id);$+=Y,U<j-1&&($+=d)}w=Math.max(w,$)}return w},v=S=>{const C=n.get(S)||[];if(C.length===0)return u;const E=Math.min(C.length,h),R=Math.ceil(C.length/E);let w=0;for(let A=0;A<R;A++){let $=u;for(let j=0;j<E;j++){const U=A*E+j;if(U<C.length){const V=v(C[U].id);$=Math.max($,V)}}w+=$,A<R-1&&(w+=g)}return u+g+w},y=(S,C,E)=>{let R=u;for(let w=0;w<C;w++){const A=E*C+w;if(A<S.length){const $=v(S[A].id);R=Math.max(R,$)}}return R},b=(S,C,E,R=0)=>{i.push({id:S.id,type:"treeNode",position:{x:C,y:E},data:{...S,label:S.name}});const w=n.get(S.id)||[];if(w.length===0)return;const A=Math.min(w.length,h),$=Math.ceil(w.length/A);p(S.id);const j=C+c/2;let U=E+g;for(let V=0;V<$;V++){const Y=Math.min(A,w.length-V*A),oe=[];for(let ne=0;ne<Y;ne++){const k=V*A+ne;oe.push(p(w[k].id))}const ee=oe.reduce((ne,k)=>ne+k,0)+(Y-1)*d;let W=j-ee/2;for(let ne=0;ne<Y;ne++){const k=V*A+ne,P=w[k],M=oe[ne],L=W+(M-c)/2;o.push({id:`edge-${S.id}-${P.id}`,source:S.id,target:P.id,type:"smoothstep",style:{stroke:"#94a3b8",strokeWidth:1}}),b(P,L,U,R+1),W+=M+d}U+=y(w,A,V)+g}};let T=50;return a.forEach(S=>{const C=p(S.id);b(S,T,50),T+=C+80}),{nodes:i,edges:o}},FN=()=>{const e=pe(g=>g.getAllElements),n=pe(g=>g.setViewMode);pe(g=>g.navigateInto);const a=pe(g=>g.navigateTo),i=pe(g=>g.navigateToRoot),o=e().filter(g=>g.type!=="shadow"),{nodes:c,edges:u}=q.useMemo(()=>JN(o),[o]),d=q.useCallback((g,h)=>{g.stopPropagation();const p=h.data;if(!p)return;const v=p.parentId||null;v?a(v):i(),n("edit")},[a,i,n]);return _.jsx("div",{className:"flex-1 h-full",children:_.jsxs(bw,{nodes:c,edges:u,nodeTypes:QN,onNodeDoubleClick:d,fitView:!0,fitViewOptions:{padding:.2},nodesDraggable:!1,nodesConnectable:!1,className:"bg-gray-50",children:[_.jsx(xw,{color:"#e2e8f0",gap:20}),_.jsx(Sw,{}),_.jsx(Tw,{nodeColor:g=>{switch(g.data?.type){case"system":return"#93c5fd";case"container":return"#86efac";case"component":return"#fde047";case"person":return"#c4b5fd";default:return"#e2e8f0"}}})]})})},WN={Discovery:"bg-blue-500",Design:"bg-purple-500",Build:"bg-green-500",Testing:"bg-orange-500",Deployment:"bg-teal-500",Maintenance:"bg-gray-500"},eO=e=>WN[e]||"bg-slate-500",tO=e=>{const n="w-4 h-4";switch(e){case"system":return _.jsx(Eo,{className:n});case"container":return _.jsx(qr,{className:n});case"component":return _.jsx(So,{className:n});case"person":return _.jsx(To,{className:n});case"externalSystem":return _.jsx(Gi,{className:n});default:return _.jsx(qr,{className:n})}},nO=()=>{const e=pe(E=>E.getAllElements),n=pe(E=>E.setSelectedElement),a=pe(E=>E.setViewMode),i=pe(E=>E.navigateTo),o=pe(E=>E.navigateToRoot),[c,u]=q.useState(new Set),d=e().filter(E=>E.type!=="shadow"),{tree:g,dateRange:h}=q.useMemo(()=>{const E=new Map,R=[];d.forEach(j=>{j.parentId?(E.has(j.parentId)||E.set(j.parentId,[]),E.get(j.parentId).push(j)):R.push(j)});let w=null,A=null;if(d.forEach(j=>{(j.phases||[]).forEach(U=>{(!w||U.startMonth<w)&&(w=U.startMonth),(!A||U.endMonth>A)&&(A=U.endMonth)})}),!w){const j=new Date;w=`${j.getFullYear()}-01`,A=`${j.getFullYear()}-12`}const $=(j,U=0)=>{let V=[];return j.forEach(Y=>{V.push({...Y,depth:U});const oe=E.get(Y.id)||[];oe.length>0&&!c.has(Y.id)&&(V=V.concat($(oe,U+1)))}),V};return{tree:$(R),dateRange:{minDate:w,maxDate:A}}},[d,c]),p=q.useMemo(()=>{if(!h.minDate||!h.maxDate)return[];const E=[];let[R,w]=h.minDate.split("-").map(Number);const[A,$]=h.maxDate.split("-").map(Number);for(;R<A||R===A&&w<=$;)E.push({year:R,month:w,key:`${R}-${String(w).padStart(2,"0")}`}),w++,w>12&&(w=1,R++);return E},[h]),v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y=E=>{u(R=>{const w=new Set(R);return w.has(E)?w.delete(E):w.add(E),w})},b=E=>{n(E)},T=E=>{const R=E.parentId||null;R?i(R):o(),a("edit")},S=E=>d.some(R=>R.parentId===E),C=E=>{if(!E.startMonth||!E.endMonth||p.length===0)return null;const R=p.findIndex(j=>j.key===E.startMonth),w=p.findIndex(j=>j.key===E.endMonth);if(R===-1||w===-1)return null;const A=R/p.length*100,$=(w-R+1)/p.length*100;return{left:`${A}%`,width:`${$}%`}};return _.jsx("div",{className:"flex-1 h-full bg-white overflow-auto",children:_.jsxs("div",{className:"min-w-[800px]",children:[_.jsxs("div",{className:"flex border-b border-gray-300 bg-gray-50 sticky top-0 z-10",children:[_.jsx("div",{className:"w-64 flex-shrink-0 px-4 py-2 font-semibold text-sm text-gray-700 border-r border-gray-300",children:"Element"}),_.jsx("div",{className:"flex-1 flex",children:p.map(E=>_.jsxs("div",{className:"flex-1 px-1 py-2 text-xs text-center text-gray-600 border-r border-gray-200",style:{minWidth:"40px"},children:[_.jsx("div",{children:v[E.month-1]}),_.jsx("div",{className:"text-gray-400",children:E.year})]},E.key))})]}),g.map(E=>_.jsxs("div",{className:"flex border-b border-gray-100 hover:bg-gray-50 cursor-pointer",onClick:()=>b(E),onDoubleClick:()=>T(E),children:[_.jsxs("div",{className:"w-64 flex-shrink-0 px-4 py-2 flex items-center gap-2 border-r border-gray-200",style:{paddingLeft:`${16+E.depth*16}px`},children:[S(E.id)?_.jsx("button",{onClick:R=>{R.stopPropagation(),y(E.id)},className:"p-0.5 hover:bg-gray-200 rounded",children:c.has(E.id)?_.jsx(Rw,{className:"w-3 h-3 text-gray-500"}):_.jsx(Ow,{className:"w-3 h-3 text-gray-500"})}):_.jsx("span",{className:"w-4"}),_.jsx("span",{className:"text-gray-500",children:tO(E.type)}),_.jsx("span",{className:"text-sm truncate",children:E.name||"Unnamed"})]}),_.jsx("div",{className:"flex-1 relative py-1",children:(E.phases||[]).map(R=>{const w=C(R);return w?_.jsx("div",{className:`absolute top-1 bottom-1 ${eO(R.name)} rounded text-xs text-white flex items-center px-2 overflow-hidden`,style:w,title:`${R.name}: ${R.startMonth}  ${R.endMonth}`,children:_.jsx("span",{className:"truncate",children:R.name})},R.id):null})})]},E.id)),g.length===0&&_.jsx("div",{className:"p-8 text-center text-gray-500",children:"No elements with timeline data. Add phases to elements in the Properties panel."})]})})},rO=()=>{const{addElement:e,currentLevel:n}=pe(),a=pe(p=>p.currentParentId),i=pe(p=>p.getElementById),o=[{type:"system",icon:Eo,label:"Software System",color:"bg-blue-100 hover:bg-blue-200 text-blue-700"},{type:"container",icon:qr,label:"Container",color:"bg-green-100 hover:bg-green-200 text-green-700"},{type:"component",icon:So,label:"Component",color:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700"},{type:"person",icon:To,label:"Person",color:"bg-purple-100 hover:bg-purple-200 text-purple-700"},{type:"externalSystem",icon:Gi,label:"External System",color:"bg-gray-100 hover:bg-gray-200 text-gray-700"},{type:"shadow",icon:xc,label:"Shadow (Reference)",color:"bg-slate-100 hover:bg-slate-200 text-slate-700 border-dashed"}],u=(()=>{if(a===null)return["system","person","externalSystem","shadow"];const p=i(a);if(!p)return["system","person","externalSystem","shadow"];switch(p.type){case"system":return["container","person","shadow"];case"container":return["component","shadow"];case"component":return["component","shadow"];default:return["shadow"]}})(),d=o.filter(p=>u.includes(p.type)),g=(p,v)=>{p.dataTransfer.setData("application/c4-element-type",v),p.dataTransfer.effectAllowed="move"},h=()=>({context:"Context",container:"Container",component:"Component",code:"Code"})[n]||n;return _.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 p-4",children:[_.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1",children:"Add Elements"}),_.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[h()," Level"]}),_.jsx("div",{className:"space-y-2",children:d.length>0?d.map(p=>{const v=p.icon;return _.jsxs("div",{draggable:!0,onDragStart:y=>g(y,p.type),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg border-2 transition-colors cursor-grab active:cursor-grabbing ${p.color}`,children:[_.jsx(v,{className:"w-5 h-5"}),_.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.type)}):_.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No elements can be added at this level"})}),_.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[_.jsx("h3",{className:"text-xs font-semibold text-blue-900 uppercase mb-2",children:"Quick Tips"}),_.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[_.jsx("li",{children:" Drag elements to canvas to add"}),_.jsx("li",{children:" Click elements to edit properties"}),_.jsx("li",{children:" Drag between elements to create relationships"}),_.jsx("li",{children:" Use mouse wheel to zoom"})]})]})]})},aO=["Discovery","Design","Build","Testing","Deployment","Maintenance"],iO=({phases:e=[],onChange:n})=>{const[a,i]=q.useState(!1),[o,c]=q.useState({name:"",startMonth:"",endMonth:""}),u=()=>{if(!o.name||!o.startMonth||!o.endMonth)return;const p={id:`phase-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:o.name,startMonth:o.startMonth,endMonth:o.endMonth};n([...e,p]),c({name:"",startMonth:"",endMonth:""}),i(!1)},d=p=>{n(e.filter(v=>v.id!==p))},g=p=>{if(!p)return"";const[v,y]=p.split("-");return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(y,10)-1]} ${v}`},h=o.startMonth&&o.endMonth&&o.startMonth<=o.endMonth;return _.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase",children:"Timeline"}),_.jsx("button",{onClick:()=>i(!0),className:"p-1 hover:bg-gray-100 rounded text-gray-500 hover:text-gray-700",title:"Add phase",children:_.jsx(UN,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"space-y-2 mb-3",children:[e.length===0&&!a&&_.jsx("p",{className:"text-xs text-gray-400 italic",children:"No phases defined"}),e.map(p=>_.jsxs("div",{className:"flex items-center justify-between px-2 py-1.5 bg-gray-50 rounded text-sm",children:[_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("div",{className:"font-medium text-gray-800 truncate",children:p.name}),_.jsxs("div",{className:"text-xs text-gray-500",children:[g(p.startMonth),"  ",g(p.endMonth)]})]}),_.jsx("button",{onClick:()=>d(p.id),className:"p-1 hover:bg-gray-200 rounded text-gray-400 hover:text-red-600",children:_.jsx(dh,{className:"w-3 h-3"})})]},p.id))]}),a&&_.jsxs("div",{className:"p-3 bg-blue-50 rounded-md border border-blue-200",children:[_.jsxs("div",{className:"mb-2",children:[_.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Phase Name"}),_.jsx("input",{type:"text",list:"phase-suggestions",value:o.name,onChange:p=>c({...o,name:p.target.value}),placeholder:"e.g., Discovery",className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.jsx("datalist",{id:"phase-suggestions",children:aO.map(p=>_.jsx("option",{value:p},p))})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Start"}),_.jsx("input",{type:"month",value:o.startMonth,onChange:p=>c({...o,startMonth:p.target.value}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"End"}),_.jsx("input",{type:"month",value:o.endMonth,onChange:p=>c({...o,endMonth:p.target.value}),className:"w-full px-2 py-1.5 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.startMonth&&o.endMonth&&!h&&_.jsx("p",{className:"text-xs text-red-600 mb-2",children:"End month must be after start month"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:u,disabled:!o.name||!h,className:"flex-1 px-3 py-1.5 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),_.jsx("button",{onClick:()=>{i(!1),c({name:"",startMonth:"",endMonth:""})},className:"px-3 py-1.5 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300",children:"Cancel"})]})]})]})},sO=()=>{const{selectedElement:e,selectedEdge:n,setSelectedElement:a,setSelectedEdge:i,updateElement:o,deleteElement:c,updateRelationship:u,deleteRelationship:d,getAllElements:g,getElementPath:h}=pe(),[p,v]=q.useState({name:"",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""}),[y,b]=q.useState({description:"",technology:"",arrowDirection:"right",lineStyle:"solid"}),[T,S]=q.useState(""),[C,E]=q.useState(!1),[R,w]=q.useState("");q.useEffect(()=>{if(e&&e.id)try{v({name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags.join(", "):"",ownerPM:e.ownerPM||"",ownerUX:e.ownerUX||"",ownerTech:e.ownerTech||""})}catch(k){console.error("[Diagrams] Error setting formData for element:",k,e),v({name:"Error loading element",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""})}},[e?.id]),q.useEffect(()=>{e&&e.type==="shadow"&&w(e.targetId||"")},[e?.id,e?.type]),q.useEffect(()=>{if(n&&n.id)try{b({description:n.description||"",technology:n.technology||"",arrowDirection:n.arrowDirection||"right",lineStyle:n.lineStyle||"solid"})}catch(k){console.error("[Diagrams] Error setting edgeFormData:",k,n),b({description:"Error loading relationship",technology:"",arrowDirection:"right",lineStyle:"solid"})}},[n?.id]),q.useEffect(()=>{const k=()=>E(!1);if(C){const P=setTimeout(()=>{document.addEventListener("click",k)},100);return()=>{clearTimeout(P),document.removeEventListener("click",k)}}},[C]);const A=(k,P)=>{v(M=>({...M,[k]:P}))},$=(k,P)=>{b(M=>({...M,[k]:P}))},j=()=>{if(e){const k={name:p.name,description:p.description,technology:p.technology,tags:p.tags.split(",").map(P=>P.trim()).filter(Boolean),ownerPM:p.ownerPM,ownerUX:p.ownerUX,ownerTech:p.ownerTech};o(e.type,e.id,k)}},U=k=>{e&&o(e.type,e.id,{phases:k})},V=()=>{n&&u(n.id,y)},Y=(k,P)=>{const M={...y,[k]:P};b(M),n&&u(n.id,M)},oe=()=>{e&&window.confirm("Are you sure you want to delete this element?")&&(c(e.type,e.id),a(null))},ee=()=>{n&&window.confirm("Are you sure you want to delete this relationship?")&&(d(n.id),i(null))},W=g().filter(k=>k.type!=="shadow"),ne=T?W.filter(k=>h(k.id).toLowerCase().includes(T.toLowerCase())):W;return n&&!e?_.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Relationship Properties"}),_.jsx("button",{onClick:()=>i(null),className:"p-1 hover:bg-gray-100 rounded",children:_.jsx(dh,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),_.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:n.id})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"edge-description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),_.jsx("input",{id:"edge-description",type:"text",value:y.description,onChange:k=>$("description",k.target.value),onBlur:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Makes API calls to"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"edge-technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology/Protocol"}),_.jsx("input",{id:"edge-technology",type:"text",value:y.technology,onChange:k=>$("technology",k.target.value),onBlur:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., REST/HTTPS, gRPC"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"arrow-direction",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Arrow Direction"}),_.jsxs("select",{id:"arrow-direction",value:y.arrowDirection,onChange:k=>Y("arrowDirection",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[_.jsx("option",{value:"right",children:"Right "}),_.jsx("option",{value:"left",children:"Left "}),_.jsx("option",{value:"both",children:"Both "}),_.jsx("option",{value:"none",children:"None "})]})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"line-style",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Line Style"}),_.jsxs("select",{id:"line-style",value:y.lineStyle,onChange:k=>Y("lineStyle",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[_.jsx("option",{value:"solid",children:"Solid "}),_.jsx("option",{value:"dashed",children:"Dashed   "}),_.jsx("option",{value:"dotted",children:"Dotted    "})]})]}),_.jsx("div",{className:"pt-4 border-t border-gray-200",children:_.jsxs("button",{onClick:ee,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[_.jsx(uh,{className:"w-4 h-4"}),"Delete Relationship"]})})]})]}):e?!e.id||!e.type?(console.error("[Diagrams] Invalid selectedElement:",e),_.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:_.jsxs("div",{className:"text-center text-red-500 mt-8",children:[_.jsx("p",{className:"text-sm",children:"Error: Invalid element data"}),_.jsx("button",{onClick:()=>a(null),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Clear Selection"})]})})):_.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Properties"}),_.jsx("button",{onClick:()=>a(null),className:"p-1 hover:bg-gray-100 rounded",children:_.jsx(dh,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Type"}),_.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:e.type||"Unknown"})]}),e.type==="shadow"&&_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Target Element"}),R&&_.jsxs("div",{className:"mb-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[_.jsx("div",{className:"font-medium text-blue-900",children:g().find(k=>k.id===R)?.name||"Unknown"}),_.jsx("div",{className:"text-xs text-blue-600",children:h(R)})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:"text",value:T,onChange:k=>{S(k.target.value),E(!0)},onFocus:()=>E(!0),placeholder:"Search elements by path...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),C&&_.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-48 overflow-y-auto",children:ne.length===0?_.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No elements found"}):ne.slice(0,20).map(k=>_.jsxs("div",{onClick:()=>{w(k.id),S(""),E(!1),o("shadow",e.id,{targetId:k.id})},className:`px-3 py-2 cursor-pointer hover:bg-gray-100 ${k.id===R?"bg-blue-50":""}`,children:[_.jsx("div",{className:"text-sm font-medium",children:k.name||k.id}),_.jsx("div",{className:"text-xs text-gray-500",children:h(k.id)})]},k.id))})]}),_.jsx("div",{className:"mt-2",children:_.jsx("input",{type:"text",value:R,onChange:k=>{w(k.target.value),o("shadow",e.id,{targetId:k.target.value})},placeholder:"Or paste element ID directly...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-xs font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),_.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:e.id})]}),e.type!=="shadow"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Name"}),_.jsx("input",{id:"name",type:"text",value:p.name,onChange:k=>A("name",k.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter element name"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology"}),_.jsx("input",{id:"technology",type:"text",value:p.technology,onChange:k=>A("technology",k.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Spring Boot, React, PostgreSQL"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),_.jsx("textarea",{id:"description",value:p.description,onChange:k=>A("description",k.target.value),onBlur:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the element's purpose and responsibilities"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"tags",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Tags"}),_.jsx("input",{id:"tags",type:"text",value:p.tags,onChange:k=>A("tags",k.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tag1, tag2, tag3"}),_.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated values"})]}),_.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-2",children:"Owners"}),_.jsxs("div",{className:"mb-2",children:[_.jsx("label",{htmlFor:"ownerPM",className:"block text-xs text-gray-500 mb-1",children:"PM"}),_.jsx("input",{id:"ownerPM",type:"text",value:p.ownerPM,onChange:k=>A("ownerPM",k.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product Manager name"})]}),_.jsxs("div",{className:"mb-2",children:[_.jsx("label",{htmlFor:"ownerUX",className:"block text-xs text-gray-500 mb-1",children:"UX"}),_.jsx("input",{id:"ownerUX",type:"text",value:p.ownerUX,onChange:k=>A("ownerUX",k.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"UX Designer name"})]}),_.jsxs("div",{children:[_.jsx("label",{htmlFor:"ownerTech",className:"block text-xs text-gray-500 mb-1",children:"Tech"}),_.jsx("input",{id:"ownerTech",type:"text",value:p.ownerTech,onChange:k=>A("ownerTech",k.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tech Lead name"})]})]}),_.jsx(iO,{phases:e.phases||[],onChange:U})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Position"}),_.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[_.jsxs("div",{children:[_.jsx("span",{className:"text-xs text-gray-500",children:"X:"}),_.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.x||0)})]}),_.jsxs("div",{children:[_.jsx("span",{className:"text-xs text-gray-500",children:"Y:"}),_.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.y||0)})]})]})]}),_.jsx("div",{className:"pt-4 border-t border-gray-200",children:_.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[_.jsx(uh,{className:"w-4 h-4"}),"Delete Element"]})})]})]}):_.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:_.jsx("div",{className:"text-center text-gray-500 mt-8",children:_.jsx("p",{className:"text-sm",children:"Select an element to view and edit its properties"})})})},oO=()=>{const e=pe(u=>u.getBreadcrumb),n=pe(u=>u.navigateToRoot),a=pe(u=>u.navigateTo),i=pe(u=>u.currentParentId),o=pe(u=>u.metadata),c=e();return _.jsxs("nav",{className:"flex items-center gap-1 text-sm",children:[_.jsxs("button",{onClick:n,className:`flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-200 transition-colors ${i===null?"text-blue-600 font-medium":"text-gray-600"}`,title:"Go to root view",children:[_.jsx(zN,{className:"w-4 h-4"}),_.jsx("span",{children:o.name||"Model"})]}),c.map((u,d)=>_.jsxs("div",{className:"flex items-center",children:[_.jsx(Rw,{className:"w-4 h-4 text-gray-400"}),_.jsx("button",{onClick:()=>a(u.id),className:`px-2 py-1 rounded hover:bg-gray-200 transition-colors ${d===c.length-1?"text-blue-600 font-medium":"text-gray-600"}`,children:u.name})]},u.id))]})};function lO(e,n){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const a=document.implementation.createHTMLDocument(),i=a.createElement("base"),o=a.createElement("a");return a.head.appendChild(i),a.body.appendChild(o),n&&(i.href=n),o.href=e,o.href}const cO=(()=>{let e=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)})();function Ir(e){const n=[];for(let a=0,i=e.length;a<i;a++)n.push(e[a]);return n}let wi=null;function kw(e={}){return wi||(e.includeStyleProperties?(wi=e.includeStyleProperties,wi):(wi=Ir(window.getComputedStyle(document.documentElement)),wi))}function Dc(e,n){const i=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(n);return i?parseFloat(i.replace("px","")):0}function uO(e){const n=Dc(e,"border-left-width"),a=Dc(e,"border-right-width");return e.clientWidth+n+a}function dO(e){const n=Dc(e,"border-top-width"),a=Dc(e,"border-bottom-width");return e.clientHeight+n+a}function jw(e,n={}){const a=n.width||uO(e),i=n.height||dO(e);return{width:a,height:i}}function fO(){let e,n;try{n=process}catch{}const a=n&&n.env?n.env.devicePixelRatio:null;return a&&(e=parseInt(a,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Xt=16384;function hO(e){(e.width>Xt||e.height>Xt)&&(e.width>Xt&&e.height>Xt?e.width>e.height?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt):e.width>Xt?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt))}function zc(e){return new Promise((n,a)=>{const i=new Image;i.onload=()=>{i.decode().then(()=>{requestAnimationFrame(()=>n(i))})},i.onerror=a,i.crossOrigin="anonymous",i.decoding="async",i.src=e})}async function gO(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function mO(e,n,a){const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),c=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${n}`),o.setAttribute("height",`${a}`),o.setAttribute("viewBox",`0 0 ${n} ${a}`),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("externalResourcesRequired","true"),o.appendChild(c),c.appendChild(e),gO(o)}const Ht=(e,n)=>{if(e instanceof n)return!0;const a=Object.getPrototypeOf(e);return a===null?!1:a.constructor.name===n.name||Ht(a,n)};function pO(e){const n=e.getPropertyValue("content");return`${e.cssText} content: '${n.replace(/'|"/g,"")}';`}function yO(e,n){return kw(n).map(a=>{const i=e.getPropertyValue(a),o=e.getPropertyPriority(a);return`${a}: ${i}${o?" !important":""};`}).join(" ")}function vO(e,n,a,i){const o=`.${e}:${n}`,c=a.cssText?pO(a):yO(a,i);return document.createTextNode(`${o}{${c}}`)}function Qy(e,n,a,i){const o=window.getComputedStyle(e,a),c=o.getPropertyValue("content");if(c===""||c==="none")return;const u=cO();try{n.className=`${n.className} ${u}`}catch{return}const d=document.createElement("style");d.appendChild(vO(u,a,o,i)),n.appendChild(d)}function bO(e,n,a){Qy(e,n,":before",a),Qy(e,n,":after",a)}const Jy="application/font-woff",Fy="image/jpeg",wO={woff:Jy,woff2:Jy,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Fy,jpeg:Fy,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function xO(e){const n=/\.([^./]*?)$/g.exec(e);return n?n[1]:""}function Bh(e){const n=xO(e).toLowerCase();return wO[n]||""}function _O(e){return e.split(/,/)[1]}function fh(e){return e.search(/^(data:)/)!==-1}function SO(e,n){return`data:${n};base64,${e}`}async function Dw(e,n,a){const i=await fetch(e,n);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const o=await i.blob();return new Promise((c,u)=>{const d=new FileReader;d.onerror=u,d.onloadend=()=>{try{c(a({res:i,result:d.result}))}catch(g){u(g)}},d.readAsDataURL(o)})}const qf={};function EO(e,n,a){let i=e.replace(/\?.*/,"");return a&&(i=e),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),n?`[${n}]${i}`:i}async function Ih(e,n,a){const i=EO(e,n,a.includeQueryParams);if(qf[i]!=null)return qf[i];a.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const c=await Dw(e,a.fetchRequestInit,({res:u,result:d})=>(n||(n=u.headers.get("Content-Type")||""),_O(d)));o=SO(c,n)}catch(c){o=a.imagePlaceholder||"";let u=`Failed to fetch resource: ${e}`;c&&(u=typeof c=="string"?c:c.message),u&&console.warn(u)}return qf[i]=o,o}async function TO(e){const n=e.toDataURL();return n==="data:,"?e.cloneNode(!1):zc(n)}async function CO(e,n){if(e.currentSrc){const c=document.createElement("canvas"),u=c.getContext("2d");c.width=e.clientWidth,c.height=e.clientHeight,u?.drawImage(e,0,0,c.width,c.height);const d=c.toDataURL();return zc(d)}const a=e.poster,i=Bh(a),o=await Ih(a,i,n);return zc(o)}async function AO(e,n){var a;try{if(!((a=e?.contentDocument)===null||a===void 0)&&a.body)return await Jc(e.contentDocument.body,n,!0)}catch{}return e.cloneNode(!1)}async function NO(e,n){return Ht(e,HTMLCanvasElement)?TO(e):Ht(e,HTMLVideoElement)?CO(e,n):Ht(e,HTMLIFrameElement)?AO(e,n):e.cloneNode(zw(e))}const OO=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",zw=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function RO(e,n,a){var i,o;if(zw(n))return n;let c=[];return OO(e)&&e.assignedNodes?c=Ir(e.assignedNodes()):Ht(e,HTMLIFrameElement)&&(!((i=e.contentDocument)===null||i===void 0)&&i.body)?c=Ir(e.contentDocument.body.childNodes):c=Ir(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),c.length===0||Ht(e,HTMLVideoElement)||await c.reduce((u,d)=>u.then(()=>Jc(d,a)).then(g=>{g&&n.appendChild(g)}),Promise.resolve()),n}function MO(e,n,a){const i=n.style;if(!i)return;const o=window.getComputedStyle(e);o.cssText?(i.cssText=o.cssText,i.transformOrigin=o.transformOrigin):kw(a).forEach(c=>{let u=o.getPropertyValue(c);c==="font-size"&&u.endsWith("px")&&(u=`${Math.floor(parseFloat(u.substring(0,u.length-2)))-.1}px`),Ht(e,HTMLIFrameElement)&&c==="display"&&u==="inline"&&(u="block"),c==="d"&&n.getAttribute("d")&&(u=`path(${n.getAttribute("d")})`),i.setProperty(c,u,o.getPropertyPriority(c))})}function kO(e,n){Ht(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),Ht(e,HTMLInputElement)&&n.setAttribute("value",e.value)}function jO(e,n){if(Ht(e,HTMLSelectElement)){const a=n,i=Array.from(a.children).find(o=>e.value===o.getAttribute("value"));i&&i.setAttribute("selected","")}}function DO(e,n,a){return Ht(n,Element)&&(MO(e,n,a),bO(e,n,a),kO(e,n),jO(e,n)),n}async function zO(e,n){const a=e.querySelectorAll?e.querySelectorAll("use"):[];if(a.length===0)return e;const i={};for(let c=0;c<a.length;c++){const d=a[c].getAttribute("xlink:href");if(d){const g=e.querySelector(d),h=document.querySelector(d);!g&&h&&!i[d]&&(i[d]=await Jc(h,n,!0))}}const o=Object.values(i);if(o.length){const c="http://www.w3.org/1999/xhtml",u=document.createElementNS(c,"svg");u.setAttribute("xmlns",c),u.style.position="absolute",u.style.width="0",u.style.height="0",u.style.overflow="hidden",u.style.display="none";const d=document.createElementNS(c,"defs");u.appendChild(d);for(let g=0;g<o.length;g++)d.appendChild(o[g]);e.appendChild(u)}return e}async function Jc(e,n,a){return!a&&n.filter&&!n.filter(e)?null:Promise.resolve(e).then(i=>NO(i,n)).then(i=>RO(e,i,n)).then(i=>DO(e,i,n)).then(i=>zO(i,n))}const $w=/url\((['"]?)([^'"]+?)\1\)/g,$O=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,UO=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function LO(e){const n=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function HO(e){const n=[];return e.replace($w,(a,i,o)=>(n.push(o),a)),n.filter(a=>!fh(a))}async function BO(e,n,a,i,o){try{const c=a?lO(n,a):n,u=Bh(n);let d;return o||(d=await Ih(c,u,i)),e.replace(LO(n),`$1${d}$3`)}catch{}return e}function IO(e,{preferredFontFormat:n}){return n?e.replace(UO,a=>{for(;;){const[i,,o]=$O.exec(a)||[];if(!o)return"";if(o===n)return`src: ${i};`}}):e}function Uw(e){return e.search($w)!==-1}async function Lw(e,n,a){if(!Uw(e))return e;const i=IO(e,a);return HO(i).reduce((c,u)=>c.then(d=>BO(d,u,n,a)),Promise.resolve(i))}async function xi(e,n,a){var i;const o=(i=n.style)===null||i===void 0?void 0:i.getPropertyValue(e);if(o){const c=await Lw(o,null,a);return n.style.setProperty(e,c,n.style.getPropertyPriority(e)),!0}return!1}async function qO(e,n){await xi("background",e,n)||await xi("background-image",e,n),await xi("mask",e,n)||await xi("-webkit-mask",e,n)||await xi("mask-image",e,n)||await xi("-webkit-mask-image",e,n)}async function VO(e,n){const a=Ht(e,HTMLImageElement);if(!(a&&!fh(e.src))&&!(Ht(e,SVGImageElement)&&!fh(e.href.baseVal)))return;const i=a?e.src:e.href.baseVal,o=await Ih(i,Bh(i),n);await new Promise((c,u)=>{e.onload=c,e.onerror=n.onImageErrorHandler?(...g)=>{try{c(n.onImageErrorHandler(...g))}catch(h){u(h)}}:u;const d=e;d.decode&&(d.decode=c),d.loading==="lazy"&&(d.loading="eager"),a?(e.srcset="",e.src=o):e.href.baseVal=o})}async function PO(e,n){const i=Ir(e.childNodes).map(o=>Hw(o,n));await Promise.all(i).then(()=>e)}async function Hw(e,n){Ht(e,Element)&&(await qO(e,n),await VO(e,n),await PO(e,n))}function GO(e,n){const{style:a}=e;n.backgroundColor&&(a.backgroundColor=n.backgroundColor),n.width&&(a.width=`${n.width}px`),n.height&&(a.height=`${n.height}px`);const i=n.style;return i!=null&&Object.keys(i).forEach(o=>{a[o]=i[o]}),e}const Wy={};async function ev(e){let n=Wy[e];if(n!=null)return n;const i=await(await fetch(e)).text();return n={url:e,cssText:i},Wy[e]=n,n}async function tv(e,n){let a=e.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,c=(a.match(/url\([^)]+\)/g)||[]).map(async u=>{let d=u.replace(i,"$1");return d.startsWith("https://")||(d=new URL(d,e.url).href),Dw(d,n.fetchRequestInit,({result:g})=>(a=a.replace(u,`url(${g})`),[u,g]))});return Promise.all(c).then(()=>a)}function nv(e){if(e==null)return[];const n=[],a=/(\/\*[\s\S]*?\*\/)/gi;let i=e.replace(a,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const g=o.exec(i);if(g===null)break;n.push(g[0])}i=i.replace(o,"");const c=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,u="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",d=new RegExp(u,"gi");for(;;){let g=c.exec(i);if(g===null){if(g=d.exec(i),g===null)break;c.lastIndex=d.lastIndex}else d.lastIndex=c.lastIndex;n.push(g[0])}return n}async function YO(e,n){const a=[],i=[];return e.forEach(o=>{if("cssRules"in o)try{Ir(o.cssRules||[]).forEach((c,u)=>{if(c.type===CSSRule.IMPORT_RULE){let d=u+1;const g=c.href,h=ev(g).then(p=>tv(p,n)).then(p=>nv(p).forEach(v=>{try{o.insertRule(v,v.startsWith("@import")?d+=1:o.cssRules.length)}catch(y){console.error("Error inserting rule from remote css",{rule:v,error:y})}})).catch(p=>{console.error("Error loading remote css",p.toString())});i.push(h)}})}catch(c){const u=e.find(d=>d.href==null)||document.styleSheets[0];o.href!=null&&i.push(ev(o.href).then(d=>tv(d,n)).then(d=>nv(d).forEach(g=>{u.insertRule(g,u.cssRules.length)})).catch(d=>{console.error("Error loading remote stylesheet",d)})),console.error("Error inlining remote css file",c)}}),Promise.all(i).then(()=>(e.forEach(o=>{if("cssRules"in o)try{Ir(o.cssRules||[]).forEach(c=>{a.push(c)})}catch(c){console.error(`Error while reading CSS rules from ${o.href}`,c)}}),a))}function XO(e){return e.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>Uw(n.style.getPropertyValue("src")))}async function KO(e,n){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const a=Ir(e.ownerDocument.styleSheets),i=await YO(a,n);return XO(i)}function Bw(e){return e.trim().replace(/["']/g,"")}function ZO(e){const n=new Set;function a(i){(i.style.fontFamily||getComputedStyle(i).fontFamily).split(",").forEach(c=>{n.add(Bw(c))}),Array.from(i.children).forEach(c=>{c instanceof HTMLElement&&a(c)})}return a(e),n}async function QO(e,n){const a=await KO(e,n),i=ZO(e);return(await Promise.all(a.filter(c=>i.has(Bw(c.style.fontFamily))).map(c=>{const u=c.parentStyleSheet?c.parentStyleSheet.href:null;return Lw(c.cssText,u,n)}))).join(`
`)}async function JO(e,n){const a=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await QO(e,n);if(a){const i=document.createElement("style"),o=document.createTextNode(a);i.appendChild(o),e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}}async function Iw(e,n={}){const{width:a,height:i}=jw(e,n),o=await Jc(e,n,!0);return await JO(o,n),await Hw(o,n),GO(o,n),await mO(o,a,i)}async function FO(e,n={}){const{width:a,height:i}=jw(e,n),o=await Iw(e,n),c=await zc(o),u=document.createElement("canvas"),d=u.getContext("2d"),g=n.pixelRatio||fO(),h=n.canvasWidth||a,p=n.canvasHeight||i;return u.width=h*g,u.height=p*g,n.skipAutoScale||hO(u),u.style.width=`${h}`,u.style.height=`${p}`,n.backgroundColor&&(d.fillStyle=n.backgroundColor,d.fillRect(0,0,u.width,u.height)),d.drawImage(c,0,0,u.width,u.height),u}async function WO(e,n={}){return(await FO(e,n)).toDataURL()}var _c={exports:{}},eR=_c.exports,rv;function tR(){return rv||(rv=1,(function(e,n){(function(a,i){i()})(eR,function(){function a(h,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,p,v){var y=new XMLHttpRequest;y.open("GET",h),y.responseType="blob",y.onload=function(){g(y.response,p,v)},y.onerror=function(){console.error("could not download file")},y.send()}function o(h){var p=new XMLHttpRequest;p.open("HEAD",h,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Jl=="object"&&Jl.global===Jl?Jl:void 0,d=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(h,p,v){var y=u.URL||u.webkitURL,b=document.createElement("a");p=p||h.name||"download",b.download=p,b.rel="noopener",typeof h=="string"?(b.href=h,b.origin===location.origin?c(b):o(b.href)?i(h,p,v):c(b,b.target="_blank")):(b.href=y.createObjectURL(h),setTimeout(function(){y.revokeObjectURL(b.href)},4e4),setTimeout(function(){c(b)},0))}:"msSaveOrOpenBlob"in navigator?function(h,p,v){if(p=p||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(a(h,v),p);else if(o(h))i(h,p,v);else{var y=document.createElement("a");y.href=h,y.target="_blank",setTimeout(function(){c(y)})}}:function(h,p,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof h=="string")return i(h,p,v);var b=h.type==="application/octet-stream",T=/constructor/i.test(u.HTMLElement)||u.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||b&&T||d)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var w=C.result;w=S?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=w:location=w,y=null},C.readAsDataURL(h)}else{var E=u.URL||u.webkitURL,R=E.createObjectURL(h);y?y.location=R:location.href=R,y=null,setTimeout(function(){E.revokeObjectURL(R)},4e4)}});u.saveAs=g.saveAs=g,e.exports=g})})(_c)),_c.exports}var Co=tR();const nR=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const a=await WO(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),i=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.png`;Co.saveAs(a,i)}catch(a){console.error("Error exporting PNG:",a),alert("Failed to export PNG: "+a.message)}},rR=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const a=await Iw(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),i=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.svg`;Co.saveAs(a,i)}catch(a){console.error("Error exporting SVG:",a),alert("Failed to export SVG: "+a.message)}},aR=e=>{let n="C4Context";e.components?.length>0?n="C4Component":e.containers?.length>0&&(n="C4Container");let a=`${n}
`;return a+=`  title ${e.metadata.name}

`,e.people?.forEach(i=>{const o=i.description||"";a+=`  Person(${gt(i.id)}, "${i.name}", "${o}")
`}),e.people?.length>0&&(a+=`
`),e.systems?.forEach(i=>{const o=i.description||"",c=i.technology||"";c?a+=`  System(${gt(i.id)}, "${i.name}", "${o}", "${c}")
`:a+=`  System(${gt(i.id)}, "${i.name}", "${o}")
`}),e.systems?.length>0&&(a+=`
`),e.externalSystems?.forEach(i=>{const o=i.description||"";a+=`  System_Ext(${gt(i.id)}, "${i.name}", "${o}")
`}),e.externalSystems?.length>0&&(a+=`
`),e.containers?.forEach(i=>{const o=i.description||"",c=i.technology||"";c?a+=`  Container(${gt(i.id)}, "${i.name}", "${c}", "${o}")
`:a+=`  Container(${gt(i.id)}, "${i.name}", "${o}")
`}),e.containers?.length>0&&(a+=`
`),e.components?.forEach(i=>{const o=i.description||"",c=i.technology||"";c?a+=`  Component(${gt(i.id)}, "${i.name}", "${c}", "${o}")
`:a+=`  Component(${gt(i.id)}, "${i.name}", "${o}")
`}),e.components?.length>0&&(a+=`
`),e.relationships?.forEach(i=>{const o=i.description||"uses",c=i.technology||"",u=i.arrowDirection==="left"?"Rel_Back":"Rel";c?a+=`  ${u}(${gt(i.from)}, ${gt(i.to)}, "${o}", "${c}")
`:a+=`  ${u}(${gt(i.from)}, ${gt(i.to)}, "${o}")
`}),a},qw=e=>{let n=`@startuml
`;return n+=`!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

`,n+=`title ${e.metadata.name}

`,e.people?.forEach(a=>{n+=`Person(${gt(a.id)}, "${a.name}", "${a.description||""}")
`}),e.systems?.forEach(a=>{n+=`System(${gt(a.id)}, "${a.name}", "${a.description||""}")
`}),e.externalSystems?.forEach(a=>{n+=`System_Ext(${gt(a.id)}, "${a.name}", "${a.description||""}")
`}),e.containers?.forEach(a=>{const i=a.technology?`, "${a.technology}"`:"";n+=`Container(${gt(a.id)}, "${a.name}", "${a.description||""}"${i})
`}),e.components?.forEach(a=>{const i=a.technology?`, "${a.technology}"`:"";n+=`Component(${gt(a.id)}, "${a.name}", "${a.description||""}"${i})
`}),n+=`
`,e.relationships?.forEach(a=>{const i=a.description||"uses",o=a.technology?`, "${a.technology}"`:"";n+=`Rel(${gt(a.from)}, ${gt(a.to)}, "${i}"${o})
`}),n+=`
@enduml`,n},Vw=e=>{let n=`# ${e.metadata.name}

`;return n+=`**Version:** ${e.metadata.version}
`,n+=`**Author:** ${e.metadata.author}

`,n+=`---

`,e.systems?.length>0&&(n+=`## Software Systems

`,e.systems.forEach(a=>{n+=`### ${a.name}

`,a.description&&(n+=`${a.description}

`),a.technology&&(n+=`**Technology:** ${a.technology}

`);const i=e.containers?.filter(o=>o.parentSystem===a.id)||[];i.length>0&&(n+=`#### Containers

`,i.forEach(o=>{n+=`- **${o.name}**`,o.technology&&(n+=` (${o.technology})`),o.description&&(n+=`: ${o.description}`),n+=`
`}),n+=`
`)})),e.externalSystems?.length>0&&(n+=`## External Systems

`,e.externalSystems.forEach(a=>{n+=`### ${a.name}

`,a.description&&(n+=`${a.description}

`)})),e.people?.length>0&&(n+=`## People / Actors

`,e.people.forEach(a=>{n+=`### ${a.name}

`,a.description&&(n+=`${a.description}

`)})),e.relationships?.length>0&&(n+=`## Relationships

`,n+=`| From | To | Description | Technology |
`,n+=`|------|-----|-------------|------------|
`,e.relationships.forEach(a=>{const i=av(e,a.from),o=av(e,a.to),c=i?.name||a.from,u=o?.name||a.to;n+=`| ${c} | ${u} | ${a.description||"-"} | ${a.technology||"-"} |
`}),n+=`
`),n},iR=e=>{const n=Vw(e),a=qw(e),i=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e.metadata.name} - C4 Model</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        h1, h2, h3, h4 { color: #1e293b; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: left;
        }
        th { background-color: #f1f5f9; font-weight: 600; }
        pre {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
        }
        code {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .metadata {
            background-color: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="metadata">
        <h1>${e.metadata.name}</h1>
        <p><strong>Version:</strong> ${e.metadata.version}</p>
        <p><strong>Author:</strong> ${e.metadata.author}</p>
    </div>

    ${sR(n)}

    <h2>PlantUML Diagram Code</h2>
    <pre><code>${a}</code></pre>

    <h2>JSON Model</h2>
    <pre><code>${JSON.stringify(e,null,2)}</code></pre>
</body>
</html>`,o=new Blob([i],{type:"text/html"});Co.saveAs(o,`${(e.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.html`)},gt=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),av=(e,n)=>[...e.systems||[],...e.containers||[],...e.components||[],...e.people||[],...e.externalSystems||[]].find(i=>i.id===n),sR=e=>e.split(`
`).map(n=>n.startsWith("# ")?`<h1>${n.substring(2)}</h1>`:n.startsWith("## ")?`<h2>${n.substring(3)}</h2>`:n.startsWith("### ")?`<h3>${n.substring(4)}</h3>`:n.startsWith("#### ")?`<h4>${n.substring(5)}</h4>`:n.startsWith("- ")?`<li>${n.substring(2)}</li>`:n.startsWith("**")&&n.endsWith("**")?`<p><strong>${n.substring(2,n.length-2)}</strong></p>`:n.trim()==="---"?"<hr>":n.trim()===""?"<br>":`<p>${n}</p>`).join(`
`),fa=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",oR=e=>{const n="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;align=center;spacingTop=8;";switch(e){case"person":return`${n}fillColor=#e1d5e7;strokeColor=#9673a6;`;case"system":return`${n}fillColor=#dae8fc;strokeColor=#6c8ebf;`;case"externalSystem":return`${n}fillColor=#f5f5f5;strokeColor=#666666;dashed=1;`;case"container":return`${n}fillColor=#d5e8d4;strokeColor=#82b366;`;case"component":return`${n}fillColor=#fff2cc;strokeColor=#d6b656;`;default:return`${n}fillColor=#ffffff;strokeColor=#000000;`}},lR=e=>{let n="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;";return e.lineStyle==="dashed"?n+="dashed=1;dashPattern=8 8;":e.lineStyle==="dotted"&&(n+="dashed=1;dashPattern=2 2;"),e.arrowDirection==="left"?n+="startArrow=classic;endArrow=none;":e.arrowDirection==="both"?n+="startArrow=classic;endArrow=classic;":n+="startArrow=none;endArrow=classic;",n+="strokeColor=#666666;",n},cR=e=>{const n=new Date().toISOString(),a=`diagram-${Date.now()}`,i=[...e.people||[],...e.systems||[],...e.externalSystems||[],...e.containers||[],...e.components||[]];let o=1/0,c=1/0,u=-1/0,d=-1/0;i.forEach(C=>{const E=C.position?.x||0,R=C.position?.y||0;o=Math.min(o,E),c=Math.min(c,R),u=Math.max(u,E+220),d=Math.max(d,R+120)});const g=o<50?50-o:0,h=c<50?50-c:0,p=Math.max(1100,u+g+100),v=Math.max(850,d+h+100);let y=`<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="Diagrams" modified="${n}" agent="Diagrams C4 Modelling Tool" version="1.0" type="device">
  <diagram name="${fa(e.metadata?.name||"C4 Diagram")}" id="${a}">
    <mxGraphModel dx="0" dy="0" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="${p}" pageHeight="${v}" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
`;const b=new Map;let T=2;const S=C=>{switch(C){case"person":return"[Person]";case"system":return"[Software System]";case"externalSystem":return"[External System]";case"container":return"[Container]";case"component":return"[Component]";default:return""}};return i.forEach(C=>{const E=`cell-${T++}`;b.set(C.id,E);const R=(C.position?.x||0)+g,w=(C.position?.y||0)+h,A=220,$=120,j=oR(C.type),U=S(C.type),V=C.technology?`[${fa(C.technology)}]`:"",Y=C.description?`&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;${fa(C.description)}&lt;/font&gt;`:"",oe=`&lt;b&gt;${fa(C.name)}&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px; color: #666666;&quot;&gt;${U}${V?"&lt;br&gt;"+V:""}&lt;/font&gt;${Y}`;y+=`        <mxCell id="${E}" value="${oe}" style="${j}" vertex="1" parent="1">
          <mxGeometry x="${R}" y="${w}" width="${A}" height="${$}" as="geometry" />
        </mxCell>
`}),(e.relationships||[]).forEach(C=>{const E=`edge-${T++}`,R=b.get(C.from),w=b.get(C.to);if(!R||!w)return;const A=lR(C),$=C.description||"",j=C.technology?`[${fa(C.technology)}]`:"",U=j?`${fa($)}&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;${j}&lt;/font&gt;`:fa($);y+=`        <mxCell id="${E}" value="${U}" style="${A}" edge="1" parent="1" source="${R}" target="${w}">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
`}),y+=`      </root>
    </mxGraphModel>
  </diagram>
</mxfile>`,y},uR=e=>{const n=cR(e),a=new Blob([n],{type:"application/xml"}),i=`${(e.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.drawio`;Co.saveAs(a,i)},dR=e=>{const n=[...(e.systems||[]).map(b=>({...b,type:"system"})),...(e.containers||[]).map(b=>({...b,type:"container"})),...(e.components||[]).map(b=>({...b,type:"component"})),...(e.people||[]).map(b=>({...b,type:"person"})),...(e.externalSystems||[]).map(b=>({...b,type:"externalSystem"}))],a=new Map(n.map(b=>[b.id,b])),i=b=>{const T=[b];let S=b;for(;S.parentId&&a.has(S.parentId);)S=a.get(S.parentId),T.unshift(S);return T};let o=0;const c=n.map(b=>{const T=i(b);return o=Math.max(o,T.length),{element:b,chain:T}});c.sort((b,T)=>{const S=Math.min(b.chain.length,T.chain.length);for(let C=0;C<S;C++){const E=(b.chain[C].name||"").localeCompare(T.chain[C].name||"");if(E!==0)return E}return b.chain.length-T.chain.length});const u=[];for(let b=0;b<o;b++)b===0?u.push("Level 1 (System)"):b===1?u.push("Level 2 (Container)"):u.push(`Level ${b+1}`);const d=["ID",...u,"Type","PM","UX","Tech","Technology","Description"],g=c.map(({element:b,chain:T})=>{const S=[];for(let C=0;C<o;C++)C<T.length?S.push(T[C].name||""):S.push(b.name||"");return[b.id||"",...S,b.type||"",b.ownerPM||"",b.ownerUX||"",b.ownerTech||"",b.technology||"",b.description||""]}),h=b=>{const T=String(b||"");return T.includes(",")||T.includes('"')||T.includes(`
`)?`"${T.replace(/"/g,'""')}"`:T},p=[d.map(h).join(","),...g.map(b=>b.map(h).join(","))].join(`
`),v=new Blob([p],{type:"text/csv;charset=utf-8"}),y=`${(e.metadata?.name||"architecture").replace(/\s+/g,"-").toLowerCase()}.csv`;Co.saveAs(v,y)},fR=e=>{const n=[];let a=[],i="",o=!1;for(let c=0;c<e.length;c++){const u=e[c],d=e[c+1];o?u==='"'&&d==='"'?(i+='"',c++):u==='"'?o=!1:i+=u:u==='"'?o=!0:u===","?(a.push(i),i=""):u===`
`||u==="\r"&&d===`
`?(a.push(i),n.push(a),a=[],i="",u==="\r"&&c++):u!=="\r"&&(i+=u)}return(i||a.length>0)&&(a.push(i),n.push(a)),n},hR=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)}),gR=e=>{const n=fR(e);if(n.length<2)throw new Error("CSV must have at least a header row and one data row");const a=n[0].map(w=>w.trim()),i=n.slice(1).filter(w=>w.some(A=>A.trim())),o=a.findIndex(w=>w.toLowerCase()==="id"),c=a.findIndex(w=>w.toLowerCase()==="type"),u=a.findIndex(w=>w.toLowerCase()==="pm"),d=a.findIndex(w=>w.toLowerCase()==="ux"),g=a.findIndex(w=>w.toLowerCase()==="tech"),h=a.findIndex(w=>w.toLowerCase()==="technology"),p=a.findIndex(w=>w.toLowerCase()==="description"),v=[];if(a.forEach((w,A)=>{w.toLowerCase().startsWith("level")&&v.push(A)}),v.length===0)throw new Error('No Level columns found in CSV. Expected columns like "Level 1", "Level 2", etc.');if(c===-1)throw new Error("Type column is required");const y=new Map,b={systems:[],containers:[],components:[],people:[],externalSystems:[]};i.forEach(w=>{const A=z=>z>=0&&z<w.length&&w[z]?.trim()||"",$=A(o),j=A(c).toLowerCase(),U=A(u),V=A(d),Y=A(g),oe=A(h),ee=A(p),W=v.map(z=>A(z));let ne=0;for(let z=0;z<W.length;z++){const O=W[z];if(!O)break;(z===0||O!==W[z-1])&&(ne=z)}const k=[];for(let z=0;z<=ne;z++)W[z]&&(z===0||W[z]!==W[z-1])&&k.push(W[z]);const P=k.join("/"),M=k[k.length-1],L=k.slice(0,-1).join("/");if(y.has(P)){const z=y.get(P);U&&!z.ownerPM&&(z.ownerPM=U),V&&!z.ownerUX&&(z.ownerUX=V),Y&&!z.ownerTech&&(z.ownerTech=Y),oe&&!z.technology&&(z.technology=oe),ee&&!z.description&&(z.description=ee);return}let B=j;(!B||!["system","container","component","person","externalsystem"].includes(B))&&(ne===0?B="system":ne===1?B="container":B="component"),B==="externalsystem"&&(B="externalSystem");const X={id:$||hR(),name:M,type:B,description:ee||"",technology:oe||"",ownerPM:U||"",ownerUX:V||"",ownerTech:Y||"",position:{x:100,y:100}};switch(y.set(P,X),L&&y.has(L)&&(X.parentId=y.get(L).id),B){case"system":b.systems.push(X);break;case"container":b.containers.push(X);break;case"component":b.components.push(X);break;case"person":b.people.push(X);break;case"externalSystem":b.externalSystems.push(X);break}});const T=250,S=4,C=[...b.systems,...b.containers,...b.components,...b.people,...b.externalSystems],E=new Map;C.forEach(w=>{const A=w.parentId||"root";E.has(A)||E.set(A,[]),E.get(A).push(w)});const R=(w,A,$)=>{const j=E.get(w||"root")||[];let U=A,V=$,Y=0;j.forEach(oe=>{oe.position={x:U,y:V},Y++,Y>=S?(Y=0,U=A,V+=T):U+=T})};return R(null,100,100),E.forEach((w,A)=>{A!=="root"&&R(A,100,100)}),{metadata:{name:"Imported Model",version:"1.0",author:""},...b,relationships:[],shadows:[]}},mR=e=>{let n=1;const a=new Map,i=h=>(a.has(h)||a.set(h,String(n++)),a.get(h)),o=(e.people||[]).map(h=>({id:i(h.id),name:h.name||"Unnamed Person",description:h.description||"",tags:(h.tags||[]).join(",")||"Person",location:"Unspecified",relationships:[]})),c=[];(e.systems||[]).forEach(h=>{const p=i(h.id);c.push({id:p,name:h.name||"Unnamed System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System",location:"Unspecified",containers:[],relationships:[]})}),(e.externalSystems||[]).forEach(h=>{const p=i(h.id);c.push({id:p,name:h.name||"Unnamed External System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System,External",location:"External",containers:[],relationships:[]})}),(e.containers||[]).forEach(h=>{const v={id:i(h.id),name:h.name||"Unnamed Container",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Container",components:[],relationships:[]},y=c.find(b=>i(h.parentSystem)===b.id);y?y.containers.push(v):c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned containers",tags:"Software System",location:"Unspecified",containers:[v],relationships:[]}):c[0].containers.push(v)}),(e.components||[]).forEach(h=>{const v={id:i(h.id),name:h.name||"Unnamed Component",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Component",relationships:[]};let y=!1;for(const b of c){const T=b.containers.find(S=>i(h.parentContainer)===S.id);if(T){T.components.push(v),y=!0;break}}if(!y){for(const b of c)if(b.containers.length>0){b.containers[0].components.push(v),y=!0;break}}y||(c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned components",tags:"Software System",location:"Unspecified",containers:[{id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}],relationships:[]}):c[0].containers.length===0?c[0].containers.push({id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}):c[0].containers[0].components.push(v))});const u=h=>{const p=i(h.from),v=i(h.to),y={sourceId:p,destinationId:v,description:h.description||"",technology:h.technology||"",tags:h.tags||""},b=o.find(T=>T.id===p);if(b){b.relationships.push(y);return}for(const T of c){if(T.id===p){T.relationships.push(y);return}for(const S of T.containers){if(S.id===p){S.relationships.push(y);return}for(const C of S.components)if(C.id===p){C.relationships.push(y);return}}}};(e.relationships||[]).forEach(h=>{u(h)});const d={systemLandscapeViews:[],systemContextViews:[],containerViews:[],componentViews:[],configuration:{styles:{elements:[{tag:"Person",shape:"Person",background:"#08427b",color:"#ffffff"},{tag:"Software System",background:"#1168bd",color:"#ffffff"},{tag:"External",background:"#999999",color:"#ffffff"},{tag:"Container",background:"#438dd5",color:"#ffffff"},{tag:"Component",background:"#85bbf0",color:"#000000"}],relationships:[]}}};if(c.length>0||o.length>0){const h=[];let p=100,v=100;o.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),c.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),d.systemLandscapeViews.push({key:"SystemLandscape",description:"System Landscape view",elements:h,relationships:[],automaticLayout:{rankDirection:"TopBottom",rankSeparation:200,nodeSeparation:200}})}return{id:1,name:e.metadata?.name||"Architecture Model",description:`Exported from Diagrams on ${new Date().toISOString()}`,version:e.metadata?.version||"1.0",model:{people:o,softwareSystems:c},views:d,documentation:{},properties:{exportedFrom:"Diagrams",author:e.metadata?.author||""}}},pR=e=>{const n={metadata:{name:e.name||"Imported Model",version:e.version||"1.0",author:e.properties?.author||e.lastModifiedUser||"Unknown"},systems:[],containers:[],components:[],people:[],externalSystems:[],relationships:[]},a=new Map;[...e.views?.systemLandscapeViews||[],...e.views?.systemContextViews||[],...e.views?.containerViews||[],...e.views?.componentViews||[]].forEach(d=>{(d.elements||[]).forEach(g=>{g.x!==void 0&&g.y!==void 0&&a.set(g.id,{x:g.x,y:g.y})})});const o=d=>a.get(d)||{x:100,y:100},c=(d,g)=>`${d}-${Date.now()}-${g}-${Math.random().toString(36).substr(2,5)}`,u=new Map;return(e.model?.people||[]).forEach(d=>{const g=c("person",d.id);u.set(d.id,g);const h=o(d.id);n.people.push({id:g,type:"person",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(p=>p.trim()).filter(p=>p!=="Person"):[],position:h})}),(e.model?.softwareSystems||[]).forEach(d=>{const g=d.location==="External"||d.tags&&d.tags.includes("External"),h=c(g?"externalSystem":"system",d.id);u.set(d.id,h);const p=o(d.id),v={id:h,type:g?"externalSystem":"system",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(y=>y.trim()).filter(y=>y!=="Software System"&&y!=="External"):[],position:p};g?n.externalSystems.push(v):n.systems.push(v),(d.containers||[]).forEach(y=>{const b=c("container",y.id);u.set(y.id,b);const T=o(y.id);n.containers.push({id:b,type:"container",name:y.name,description:y.description||"",technology:y.technology||"",tags:y.tags?y.tags.split(",").map(S=>S.trim()).filter(S=>S!=="Container"):[],position:T,parentSystem:h}),(y.components||[]).forEach(S=>{const C=c("component",S.id);u.set(S.id,C);const E=o(S.id);n.components.push({id:C,type:"component",name:S.name,description:S.description||"",technology:S.technology||"",tags:S.tags?S.tags.split(",").map(R=>R.trim()).filter(R=>R!=="Component"):[],position:E,parentContainer:b}),(S.relationships||[]).forEach(R=>{const w=u.get(R.sourceId),A=u.get(R.destinationId);w&&A&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:w,to:A,description:R.description||"",technology:R.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(y.relationships||[]).forEach(S=>{const C=u.get(S.sourceId),E=u.get(S.destinationId);C&&E&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:C,to:E,description:S.description||"",technology:S.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(d.relationships||[]).forEach(y=>{const b=u.get(y.sourceId),T=u.get(y.destinationId);b&&T&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:b,to:T,description:y.description||"",technology:y.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(e.model?.people||[]).forEach(d=>{(d.relationships||[]).forEach(g=>{const h=u.get(g.sourceId),p=u.get(g.destinationId);h&&p&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:h,to:p,description:g.description||"",technology:g.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),n},yR=8e3,vR=e=>{try{const n=JSON.stringify(e);return btoa(encodeURIComponent(n))}catch(n){return console.error("Error encoding model:",n),null}},bR=e=>{try{const n=decodeURIComponent(atob(e));return JSON.parse(n)}catch(n){return console.error("Error decoding model:",n),null}},wR=e=>{const n=vR(e);if(!n)return{url:null,error:"Failed to encode model"};const i=`${window.location.origin+window.location.pathname}#model=${n}`;return i.length>yR?{url:null,error:`Model too large for URL sharing (${Math.round(i.length/1024)}KB). Use JSON export instead.`}:{url:i,error:null}},xR=()=>{const e=window.location.hash;if(!e||!e.startsWith("#model="))return null;const n=e.substring(7);return bR(n)},_R=()=>{history.replaceState(null,"",window.location.pathname)},SR=()=>window.location.hash.startsWith("#model=");function Fc(e,n){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(a[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(a[i[o]]=e[i[o]]);return a}function ER(e,n,a,i){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function d(p){try{h(i.next(p))}catch(v){u(v)}}function g(p){try{h(i.throw(p))}catch(v){u(v)}}function h(p){p.done?c(p.value):o(p.value).then(d,g)}h((i=i.apply(e,n||[])).next())})}const TR=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);class qh extends Error{constructor(n,a="FunctionsError",i){super(n),this.name=a,this.context=i}}class CR extends qh{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class iv extends qh{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class sv extends qh{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var hh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(hh||(hh={}));class AR{constructor(n,{headers:a={},customFetch:i,region:o=hh.Any}={}){this.url=n,this.headers=a,this.region=o,this.fetch=TR(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return ER(this,arguments,void 0,function*(a,i={}){var o;let c,u;try{const{headers:d,method:g,body:h,signal:p,timeout:v}=i;let y={},{region:b}=i;b||(b=this.region);const T=new URL(`${this.url}/${a}`);b&&b!=="any"&&(y["x-region"]=b,T.searchParams.set("forceFunctionRegion",b));let S;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",S=h):typeof h=="string"?(y["Content-Type"]="text/plain",S=h):typeof FormData<"u"&&h instanceof FormData?S=h:(y["Content-Type"]="application/json",S=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?S=JSON.stringify(h):S=h;let C=p;v&&(u=new AbortController,c=setTimeout(()=>u.abort(),v),p?(C=u.signal,p.addEventListener("abort",()=>u.abort())):C=u.signal);const E=yield this.fetch(T.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:S,signal:C}).catch($=>{throw new CR($)}),R=E.headers.get("x-relay-error");if(R&&R==="true")throw new iv(E);if(!E.ok)throw new sv(E);let w=((o=E.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),A;return w==="application/json"?A=yield E.json():w==="application/octet-stream"||w==="application/pdf"?A=yield E.blob():w==="text/event-stream"?A=E:w==="multipart/form-data"?A=yield E.formData():A=yield E.text(),{data:A,error:null,response:E}}catch(d){return{data:null,error:d,response:d instanceof sv||d instanceof iv?d.context:void 0}}finally{c&&clearTimeout(c)}})}}var NR=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},OR=class{constructor(e){var n,a,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(a=e.isMaybeSingle)!==null&&a!==void 0?a:!1,this.urlLengthLimit=(i=e.urlLengthLimit)!==null&&i!==void 0?i:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,d=null,g=null,h=c.status,p=c.statusText;if(c.ok){var v,y;if(a.method!=="HEAD"){var b;const E=await c.text();E===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((b=a.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=E:d=JSON.parse(E))}const S=(v=a.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),C=(y=c.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");S&&C&&C.length>1&&(g=parseInt(C[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var T;const S=await c.text();try{u=JSON.parse(S),Array.isArray(u)&&c.status===404&&(d=[],u=null,h=200,p="OK")}catch{c.status===404&&S===""?(h=204,p="No Content"):u={message:S}}if(u&&a.isMaybeSingle&&(!(u==null||(T=u.details)===null||T===void 0)&&T.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&a.shouldThrowOnError)throw new NR(u)}return{error:u,data:d,count:g,status:h,statusText:p}});return this.shouldThrowOnError||(o=o.catch(c=>{var u;let d="",g="",h="";const p=c?.cause;if(p){var v,y,b,T;const E=(v=p?.message)!==null&&v!==void 0?v:"",R=(y=p?.code)!==null&&y!==void 0?y:"";d=`${(b=c?.name)!==null&&b!==void 0?b:"FetchError"}: ${c?.message}`,d+=`

Caused by: ${(T=p?.name)!==null&&T!==void 0?T:"Error"}: ${E}`,R&&(d+=` (${R})`),p?.stack&&(d+=`
${p.stack}`)}else{var S;d=(S=c?.stack)!==null&&S!==void 0?S:""}const C=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(h="",g="Request was aborted (timeout or manual cancellation)",C>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${C} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(p?.name==="HeadersOverflowError"||p?.code==="UND_ERR_HEADERS_OVERFLOW")&&(h="",g="HTTP headers exceeded server limits (typically 16KB)",C>this.urlLengthLimit&&(g+=`. Your request URL is ${C} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:d,hint:g,code:h},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}},RR=class extends OR{select(e){let n=!1;const a=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:a,foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:a,referencedTable:i=a}={}){const o=typeof i>"u"?"offset":`${i}.offset`,c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(c,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:a=!1,buffers:i=!1,wal:o=!1,format:c="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,a?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const ov=new RegExp("[,()]");var Oi=class extends RR{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}regexMatch(e,n){return this.url.searchParams.append(e,`match.${n}`),this}regexIMatch(e,n){return this.url.searchParams.append(e,`imatch.${n}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}isDistinct(e,n){return this.url.searchParams.append(e,`isdistinct.${n}`),this}in(e,n){const a=Array.from(new Set(n)).map(i=>typeof i=="string"&&ov.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${a})`),this}notIn(e,n){const a=Array.from(new Set(n)).map(i=>typeof i=="string"&&ov.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`not.in.(${a})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:a,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(e,`${o}fts${c}.${n}`),this}match(e){return Object.entries(e).forEach(([n,a])=>{this.url.searchParams.append(n,`eq.${a}`)}),this}not(e,n,a){return this.url.searchParams.append(e,`not.${n}.${a}`),this}or(e,{foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,a){return this.url.searchParams.append(e,`${n}.${a}`),this}},MR=class{constructor(e,{headers:n={},schema:a,fetch:i,urlLengthLimit:o=8e3}){this.url=e,this.headers=new Headers(n),this.schema=a,this.fetch=i,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,n){const{head:a=!1,count:i}=n??{},o=a?"HEAD":"GET";let c=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join(""),{url:d,headers:g}=this.cloneRequestState();return d.searchParams.set("select",u),i&&g.append("Prefer",`count=${i}`),new Oi({method:o,url:d,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(n&&u.append("Prefer",`count=${n}`),a||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((g,h)=>g.concat(Object.keys(h)),[]);if(d.length>0){const g=[...new Set(d)].map(h=>`"${h}"`);c.searchParams.set("columns",g.join(","))}}return new Oi({method:o,url:c,headers:u,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:n,ignoreDuplicates:a=!1,count:i,defaultToNull:o=!0}={}){var c;const u="POST",{url:d,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),n!==void 0&&d.searchParams.set("on_conflict",n),i&&g.append("Prefer",`count=${i}`),o||g.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(h.length>0){const p=[...new Set(h)].map(v=>`"${v}"`);d.searchParams.set("columns",p.join(","))}}return new Oi({method:u,url:d,headers:g,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:n}={}){var a;const i="PATCH",{url:o,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Oi({method:i,url:o,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var n;const a="DELETE",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Oi({method:a,url:i,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function lo(e){"@babel/helpers - typeof";return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lo(e)}function kR(e,n){if(lo(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,n);if(lo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function jR(e){var n=kR(e,"string");return lo(n)=="symbol"?n:n+""}function DR(e,n,a){return(n=jR(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function lv(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,i)}return a}function oc(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?lv(Object(a),!0).forEach(function(i){DR(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lv(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}var zR=class Pw{constructor(n,{headers:a={},schema:i,fetch:o,timeout:c,urlLengthLimit:u=8e3}={}){this.url=n,this.headers=new Headers(a),this.schemaName=i,this.urlLengthLimit=u;const d=o??globalThis.fetch;c!==void 0&&c>0?this.fetch=(g,h)=>{const p=new AbortController,v=setTimeout(()=>p.abort(),c),y=h?.signal;if(y){if(y.aborted)return clearTimeout(v),d(g,h);const b=()=>{clearTimeout(v),p.abort()};return y.addEventListener("abort",b,{once:!0}),d(g,oc(oc({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(v),y.removeEventListener("abort",b)})}return d(g,oc(oc({},h),{},{signal:p.signal})).finally(()=>clearTimeout(v))}:this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new MR(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Pw(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,a={},{head:i=!1,get:o=!1,count:c}={}){var u;let d;const g=new URL(`${this.url}/rpc/${n}`);let h;const p=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(p)),v=i&&Object.values(a).some(p);v?(d="POST",h=a):i||o?(d=i?"HEAD":"GET",Object.entries(a).filter(([b,T])=>T!==void 0).map(([b,T])=>[b,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([b,T])=>{g.searchParams.append(b,T)})):(d="POST",h=a);const y=new Headers(this.headers);return v?y.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&y.set("Prefer",`count=${c}`),new Oi({method:d,url:g,headers:y,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class $R{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const a=globalThis.process;if(a){const i=a.versions;if(i&&i.node){const o=i.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const i=this.getWebSocketConstructor();return new i(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const UR="2.97.0",LR=`realtime-js/${UR}`,HR="1.0.0",Gw="2.0.0",cv=Gw,gh=1e4,BR=1e3,IR=100;var Ur;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ur||(Ur={}));var ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ht||(ht={}));var pn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pn||(pn={}));var mh;(function(e){e.websocket="websocket"})(mh||(mh={}));var va;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(va||(va={}));class qR{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,a){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(n));let i=[n.join_ref,n.ref,n.topic,n.event,n.payload];return a(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(n){var a;return this._isArrayBuffer((a=n.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var a,i;const o=(i=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var a,i;const o=(i=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(n,a,i){var o,c;const u=n.topic,d=(o=n.ref)!==null&&o!==void 0?o:"",g=(c=n.join_ref)!==null&&c!==void 0?c:"",h=n.payload.event,p=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},v=Object.keys(p).length===0?"":JSON.stringify(p);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+d.length+u.length+h.length+v.length,b=new ArrayBuffer(this.HEADER_LENGTH+y);let T=new DataView(b),S=0;T.setUint8(S++,this.KINDS.userBroadcastPush),T.setUint8(S++,g.length),T.setUint8(S++,d.length),T.setUint8(S++,u.length),T.setUint8(S++,h.length),T.setUint8(S++,v.length),T.setUint8(S++,a),Array.from(g,E=>T.setUint8(S++,E.charCodeAt(0))),Array.from(d,E=>T.setUint8(S++,E.charCodeAt(0))),Array.from(u,E=>T.setUint8(S++,E.charCodeAt(0))),Array.from(h,E=>T.setUint8(S++,E.charCodeAt(0))),Array.from(v,E=>T.setUint8(S++,E.charCodeAt(0)));var C=new Uint8Array(b.byteLength+i.byteLength);return C.set(new Uint8Array(b),0),C.set(new Uint8Array(i),b.byteLength),C.buffer}decode(n,a){if(this._isArrayBuffer(n)){let i=this._binaryDecode(n);return a(i)}if(typeof n=="string"){const i=JSON.parse(n),[o,c,u,d,g]=i;return a({join_ref:o,ref:c,topic:u,event:d,payload:g})}return a({})}_binaryDecode(n){const a=new DataView(n),i=a.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,a,o)}}_decodeUserBroadcast(n,a,i){const o=a.getUint8(1),c=a.getUint8(2),u=a.getUint8(3),d=a.getUint8(4);let g=this.HEADER_LENGTH+4;const h=i.decode(n.slice(g,g+o));g=g+o;const p=i.decode(n.slice(g,g+c));g=g+c;const v=i.decode(n.slice(g,g+u));g=g+u;const y=n.slice(g,n.byteLength),b=d===this.JSON_ENCODING?JSON.parse(i.decode(y)):y,T={type:this.BROADCAST_EVENT,event:p,payload:b};return u>0&&(T.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(n){var a;return n instanceof ArrayBuffer||((a=n?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(n,a){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([i])=>a.includes(i)))}}class Yw{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Xe||(Xe={}));const uv=(e,n,a={})=>{var i;const o=(i=a.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((c,u)=>(c[u]=VR(u,e,n,o),c),{}):{}},VR=(e,n,a,i)=>{const o=n.find(d=>d.name===e),c=o?.type,u=a[e];return c&&!i.includes(c)?Xw(c,u):ph(u)},Xw=(e,n)=>{if(e.charAt(0)==="_"){const a=e.slice(1,e.length);return XR(n,a)}switch(e){case Xe.bool:return PR(n);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return GR(n);case Xe.json:case Xe.jsonb:return YR(n);case Xe.timestamp:return KR(n);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return ph(n);default:return ph(n)}},ph=e=>e,PR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},GR=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},YR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},XR=(e,n)=>{if(typeof e!="string")return e;const a=e.length-1,i=e[a];if(e[0]==="{"&&i==="}"){let c;const u=e.slice(1,a);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(d=>Xw(n,d))}return e},KR=e=>typeof e=="string"?e.replace(" ","T"):e,Kw=e=>{const n=new URL(e);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Vf{constructor(n,a,i={},o=gh){this.channel=n,this.event=a,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var i;return this._hasReceived(n)&&a((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var dv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(dv||(dv={}));class Qs{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qs.syncState(this.state,o,c,u),this.pendingDiffs.forEach(g=>{this.state=Qs.syncDiff(this.state,g,c,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Qs.syncDiff(this.state,o,c,u),d())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,i,o){const c=this.cloneDeep(n),u=this.transformState(a),d={},g={};return this.map(c,(h,p)=>{u[h]||(g[h]=p)}),this.map(u,(h,p)=>{const v=c[h];if(v){const y=p.map(C=>C.presence_ref),b=v.map(C=>C.presence_ref),T=p.filter(C=>b.indexOf(C.presence_ref)<0),S=v.filter(C=>y.indexOf(C.presence_ref)<0);T.length>0&&(d[h]=T),S.length>0&&(g[h]=S)}else d[h]=p}),this.syncDiff(c,{joins:d,leaves:g},i,o)}static syncDiff(n,a,i,o){const{joins:c,leaves:u}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(c,(d,g)=>{var h;const p=(h=n[d])!==null&&h!==void 0?h:[];if(n[d]=this.cloneDeep(g),p.length>0){const v=n[d].map(b=>b.presence_ref),y=p.filter(b=>v.indexOf(b.presence_ref)<0);n[d].unshift(...y)}i(d,p,g)}),this.map(u,(d,g)=>{let h=n[d];if(!h)return;const p=g.map(v=>v.presence_ref);h=h.filter(v=>p.indexOf(v.presence_ref)<0),n[d]=h,o(d,h,g),h.length===0&&delete n[d]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(i=>a(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,i)=>{const o=n[i];return"metas"in o?a[i]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):a[i]=o,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(fv||(fv={}));var Js;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Js||(Js={}));var Wn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wn||(Wn={}));class Di{constructor(n,a={config:{}},i){var o,c;if(this.topic=n,this.params=a,this.socket=i,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Vf(this,pn.join,this.params,this.timeout),this.rejoinTimer=new Yw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Qs(this),this.broadcastEndpointURL=Kw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,a=this.timeout){var i,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:u,presence:d,private:g}}=this.params,h=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&o!==void 0?o:[],p=!!this.bindings[Js.PRESENCE]&&this.bindings[Js.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,v={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:g};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(b=>n?.(Wn.CHANNEL_ERROR,b)),this._onClose(()=>n?.(Wn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:b})=>{var T;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){n?.(Wn.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,C=(T=S?.length)!==null&&T!==void 0?T:0,E=[];for(let R=0;R<C;R++){const w=S[R],{filter:{event:A,schema:$,table:j,filter:U}}=w,V=b&&b[R];if(V&&V.event===A&&Di.isFilterValueEqual(V.schema,$)&&Di.isFilterValueEqual(V.table,j)&&Di.isFilterValueEqual(V.filter,U))E.push(Object.assign(Object.assign({},w),{id:V.id}));else{this.unsubscribe(),this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,n&&n(Wn.SUBSCRIBED);return}}).receive("error",b=>{this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{n?.(Wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,i){return this.state===ht.joined&&n===Js.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,a,i)}async httpSend(n,a,i={}){var o;if(a==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let g=d.statusText;try{const h=await d.json();g=h.error||h.message||g}catch{}return Promise.reject(new Error(g))}async send(n,a={}){var i,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=n,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,d,g;const h=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),h.receive("ok",()=>c("ok")),h.receive("error",()=>c("error")),h.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ht.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Vf(this,pn.leave,{},n),i.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(n,a,i){const o=new AbortController,c=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(c),u}_push(n,a,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Vf(this,n,a,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>IR){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,i){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,i){var o,c;const u=n.toLocaleLowerCase(),{close:d,error:g,leave:h,join:p}=pn;if(i&&[d,g,h,p].indexOf(u)>=0&&i!==this._joinRef())return;let y=this._onMessage(u,a,i);if(a&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var T,S,C;return((T=b.filter)===null||T===void 0?void 0:T.event)==="*"||((C=(S=b.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(b=>b.callback(y,i)):(c=this.bindings[u])===null||c===void 0||c.filter(b=>{var T,S,C,E,R,w;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const A=b.id,$=(T=b.filter)===null||T===void 0?void 0:T.event;return A&&((S=a.ids)===null||S===void 0?void 0:S.includes(A))&&($==="*"||$?.toLocaleLowerCase()===((C=a.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const A=(R=(E=b?.filter)===null||E===void 0?void 0:E.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return A==="*"||A===((w=a?.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof y=="object"&&"ids"in y){const T=y.data,{schema:S,table:C,commit_timestamp:E,type:R,errors:w}=T;y=Object.assign(Object.assign({},{schema:S,table:C,commit_timestamp:E,eventType:R,new:{},old:{},errors:w}),this._getPayloadRecords(T))}b.callback(y,i)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,i){const o=n.toLocaleLowerCase(),c={type:o,filter:a,callback:i};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,a){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&Di.isEqual(o.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const i in n)if(n[i]!==a[i])return!1;return!0}static isFilterValueEqual(n,a){return(n??void 0)===(a??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(pn.close,{},n)}_onError(n){this._on(pn.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=uv(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=uv(n.columns,n.old_record)),a}}const Pf=()=>{},lc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZR=[1e3,2e3,5e3,1e4],QR=1e4,JR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class FR{constructor(n,a){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gh,this.transport=null,this.heartbeatIntervalMs=lc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pf,this.ref=0,this.reconnectTimer=null,this.vsn=cv,this.logger=Pf,this.conn=null,this.sendBuffer=[],this.serializer=new qR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((i=a?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${mh.websocket}`,this.httpEndpoint=Kw(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$R.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,i){this.logger(n,a,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ur.connecting:return va.Connecting;case Ur.open:return va.Open;case Ur.closing:return va.Closing;default:return va.Closed}}isConnected(){return this.connectionState()===va.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const i=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===i);if(o)return o;{const c=new Di(`realtime:${n}`,a,this);return this.channels.push(c),c}}push(n){const{topic:a,event:i,payload:o,ref:c}=n,u=()=>{this.encode(n,d=>{var g;(g=this.conn)===null||g===void 0||g.send(d)})};this.log("push",`${a} ${i} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(BR,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},lc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply"&&a.ref&&a.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:c,ref:u}=a,d=u?`(${u})`:"",g=c.status||"";this.log("receive",`${g} ${i} ${o} ${d}`.trim(),c),this.channels.filter(h=>h._isMember(i)).forEach(h=>h._trigger(o,c,u)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Ur.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ur.open||this.conn.readyState===Ur.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(a){this.log("error","error in heartbeat callback",a)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(pn.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const i=n.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${n}${i}${o}`}_workerObjectUrl(n){let a;if(n)a=n;else{const i=new Blob([JR],{type:"application/javascript"});a=URL.createObjectURL(i)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a,i=!1;if(n)a=n,i=!0;else if(this.accessToken)try{a=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),a=this.accessTokenValue}else a=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const c={access_token:a,version:LR};a&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(pn.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(a)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Yw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},lc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,i,o,c,u,d,g,h,p,v,y,b;switch(this.transport=(a=n?.transport)!==null&&a!==void 0?a:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:gh,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:lc.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=n?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=n?.heartbeatCallback)!==null&&d!==void 0?d:Pf,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:cv,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=n?.reconnectAfterMs)!==null&&h!==void 0?h:(T=>ZR[T-1]||QR),this.vsn){case HR:this.encode=(p=n?.encode)!==null&&p!==void 0?p:((T,S)=>S(JSON.stringify(T))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:((T,S)=>S(JSON.parse(T)));break;case Gw:this.encode=(y=n?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(b=n?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var co=class extends Error{constructor(e,n){super(e),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function WR(e,n,a){const i=new URL(n,e);if(a)for(const[o,c]of Object.entries(a))c!==void 0&&i.searchParams.set(o,c);return i.toString()}async function eM(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function tM(e){const n=e.fetchImpl??globalThis.fetch;return{async request({method:a,path:i,query:o,body:c,headers:u}){const d=WR(e.baseUrl,i,o),g=await eM(e.auth),h=await n(d,{method:a,headers:{...c?{"Content-Type":"application/json"}:{},...g,...u},body:c?JSON.stringify(c):void 0}),p=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),y=v&&p?JSON.parse(p):p;if(!h.ok){const b=v?y:void 0,T=b?.error;throw new co(T?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:T?.type,icebergCode:T?.code,details:b})}return{status:h.status,headers:h.headers,data:y}}}}function cc(e){return e.join("")}var nM=class{constructor(e,n=""){this.client=e,this.prefix=n}async listNamespaces(e){const n=e?{parent:cc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(e,n){const a={namespace:e.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${cc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${cc(e.namespace)}`}),!0}catch(n){if(n instanceof co&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(e,n){try{return await this.createNamespace(e,n)}catch(a){if(a instanceof co&&a.status===409)return;throw a}}};function _i(e){return e.join("")}var rM=class{constructor(e,n="",a){this.client=e,this.prefix=n,this.accessDelegation=a}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_i(e.namespace)}/tables`})).data.identifiers}async createTable(e,n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_i(e.namespace)}/tables`,body:n,headers:a})).data.metadata}async updateTable(e,n){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_i(e.namespace)}/tables/${e.name}`,body:n});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(e,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_i(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_i(e.namespace)}/tables/${e.name}`,headers:n})).data.metadata}async tableExists(e){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_i(e.namespace)}/tables/${e.name}`,headers:n}),!0}catch(a){if(a instanceof co&&a.status===404)return!1;throw a}}async createTableIfNotExists(e,n){try{return await this.createTable(e,n)}catch(a){if(a instanceof co&&a.status===409)return await this.loadTable({namespace:e.namespace,name:n.name});throw a}}},aM=class{constructor(e){let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const a=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=tM({baseUrl:a,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new nM(this.client,n),this.tableOps=new rM(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,n){return this.namespaceOps.createNamespace(e,n)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,n){return this.tableOps.createTable(e,n)}async updateTable(e,n){return this.tableOps.updateTable(e,n)}async dropTable(e,n){await this.tableOps.dropTable(e,n)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,n){return this.namespaceOps.createNamespaceIfNotExists(e,n)}async createTableIfNotExists(e,n){return this.tableOps.createTableIfNotExists(e,n)}},Wc=class extends Error{constructor(e,n="storage",a,i){super(e),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=a,this.statusCode=i}};function eu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var uc=class extends Wc{constructor(e,n,a,i="storage"){super(e,i,n,a),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Zw=class extends Wc{constructor(e,n,a="storage"){super(e,a),this.name=a==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const iM=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),sM=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yh=e=>{if(Array.isArray(e))return e.map(a=>yh(a));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([a,i])=>{const o=a.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=yh(i)}),n},oM=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function uo(e){"@babel/helpers - typeof";return uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uo(e)}function lM(e,n){if(uo(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,n);if(uo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function cM(e){var n=lM(e,"string");return uo(n)=="symbol"?n:n+""}function uM(e,n,a){return(n=cM(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function hv(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,i)}return a}function we(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?hv(Object(a),!0).forEach(function(i){uM(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hv(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}const gv=e=>{var n;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(n=e.error)===null||n===void 0?void 0:n.message)||JSON.stringify(e)},dM=async(e,n,a,i)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!a?.noResolveJson){const o=e,c=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const d=u?.statusCode||u?.code||c+"";n(new uc(gv(u),c,d,i))}).catch(()=>{if(i==="vectors"){const u=c+"";n(new uc(o.statusText||`HTTP ${c} error`,c,u,i))}else{const u=c+"";n(new uc(o.statusText||`HTTP ${c} error`,c,u,i))}});else{const u=c+"";n(new uc(o.statusText||`HTTP ${c} error`,c,u,i))}}else n(new Zw(gv(e),e,i))},fM=(e,n,a,i)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"||e==="HEAD"||!i?we(we({},o),a):(sM(i)?(o.headers=we({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(i)):o.body=i,n?.duplex&&(o.duplex=n.duplex),we(we({},o),a))};async function Ps(e,n,a,i,o,c,u){return new Promise((d,g)=>{e(a,fM(n,i,o,c)).then(h=>{if(!h.ok)throw h;if(i?.noResolveJson)return h;if(u==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>d(h)).catch(h=>dM(h,g,i,u))})}function Qw(e="storage"){return{get:async(n,a,i,o)=>Ps(n,"GET",a,i,o,void 0,e),post:async(n,a,i,o,c)=>Ps(n,"POST",a,o,c,i,e),put:async(n,a,i,o,c)=>Ps(n,"PUT",a,o,c,i,e),head:async(n,a,i,o)=>Ps(n,"HEAD",a,we(we({},i),{},{noResolveJson:!0}),o,void 0,e),remove:async(n,a,i,o,c)=>Ps(n,"DELETE",a,o,c,i,e)}}const hM=Qw("storage"),{get:fo,post:gn,put:vh,head:gM,remove:Vh}=hM,Qt=Qw("vectors");var Yi=class{constructor(e,n={},a,i="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.fetch=iM(a),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=we(we({},this.headers),{},{[e]:n}),this}async handleOperation(e){var n=this;try{return{data:await e(),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(eu(a))return{data:null,error:a};throw a}}},mM=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(eu(n))return{data:null,error:n};throw n}}};let Jw;Jw=Symbol.toStringTag;var pM=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Jw]="BlobDownloadBuilder",this.promise=null}asStream(){return new mM(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(eu(n))return{data:null,error:n};throw n}}};const yM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var vM=class extends Yi{constructor(e,n={},a,i){super(e,n,i,"storage"),this.bucketId=a}async uploadOrUpdate(e,n,a,i){var o=this;return o.handleOperation(async()=>{let c;const u=we(we({},mv),i);let d=we(we({},o.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",o.encodeMetadata(g)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),g&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(g))):(c=a,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,g&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),i?.headers&&(d=we(we({},d),i.headers));const h=o._removeEmptyFolders(n),p=o._getFinalPath(h),v=await(e=="PUT"?vh:gn)(o.fetch,`${o.url}/object/${p}`,c,we({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{path:h,id:v.Id,fullPath:v.Key}})}async upload(e,n,a){return this.uploadOrUpdate("POST",e,n,a)}async uploadToSignedUrl(e,n,a,i){var o=this;const c=o._removeEmptyFolders(e),u=o._getFinalPath(c),d=new URL(o.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",n),o.handleOperation(async()=>{let g;const h=we({upsert:mv.upsert},i),p=we(we({},o.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&a instanceof Blob?(g=new FormData,g.append("cacheControl",h.cacheControl),g.append("",a)):typeof FormData<"u"&&a instanceof FormData?(g=a,g.append("cacheControl",h.cacheControl)):(g=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:c,fullPath:(await vh(o.fetch,d.toString(),g,{headers:p})).Key}})}async createSignedUploadUrl(e,n){var a=this;return a.handleOperation(async()=>{let i=a._getFinalPath(e);const o=we({},a.headers);n?.upsert&&(o["x-upsert"]="true");const c=await gn(a.fetch,`${a.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(a.url+c.url),d=u.searchParams.get("token");if(!d)throw new Wc("No token returned by API");return{signedUrl:u.toString(),path:e,token:d}})}async update(e,n,a){return this.uploadOrUpdate("PUT",e,n,a)}async move(e,n,a){var i=this;return i.handleOperation(async()=>await gn(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:e,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:i.headers}))}async copy(e,n,a){var i=this;return i.handleOperation(async()=>({path:(await gn(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:e,destinationKey:n,destinationBucket:a?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(e,n,a){var i=this;return i.handleOperation(async()=>{let o=i._getFinalPath(e),c=await gn(i.fetch,`${i.url}/object/sign/${o}`,we({expiresIn:n},a?.transform?{transform:a.transform}:{}),{headers:i.headers});const u=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{signedUrl:encodeURI(`${i.url}${c.signedURL}${u}`)}})}async createSignedUrls(e,n,a){var i=this;return i.handleOperation(async()=>{const o=await gn(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:n,paths:e},{headers:i.headers}),c=a?.download?`&download=${a.download===!0?"":a.download}`:"";return o.map(u=>we(we({},u),{},{signedUrl:u.signedURL?encodeURI(`${i.url}${u.signedURL}${c}`):null}))})}download(e,n,a){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"",u=this._getFinalPath(e),d=()=>fo(this.fetch,`${this.url}/${i}/${u}${c}`,{headers:this.headers,noResolveJson:!0},a);return new pM(d,this.shouldThrowOnError)}async info(e){var n=this;const a=n._getFinalPath(e);return n.handleOperation(async()=>yh(await fo(n.fetch,`${n.url}/object/info/${a}`,{headers:n.headers})))}async exists(e){var n=this;const a=n._getFinalPath(e);try{return await gM(n.fetch,`${n.url}/object/${a}`,{headers:n.headers}),{data:!0,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(eu(i)&&i instanceof Zw){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}}getPublicUrl(e,n){const a=this._getFinalPath(e),i=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const c=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${a}${d}`)}}}async remove(e){var n=this;return n.handleOperation(async()=>await Vh(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:e},{headers:n.headers}))}async list(e,n,a){var i=this;return i.handleOperation(async()=>{const o=we(we(we({},yM),n),{},{prefix:e||""});return await gn(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},a)})}async listV2(e,n){var a=this;return a.handleOperation(async()=>{const i=we({},e);return await gn(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,i,{headers:a.headers},n)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}};const bM="2.97.0",Ao={"X-Client-Info":`storage-js/${bM}`};var wM=class extends Yi{constructor(e,n={},a,i){const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),u=we(we({},Ao),n);super(c,u,a,"storage")}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const a=n.listBucketOptionsToQueryString(e);return await fo(n.fetch,`${n.url}/bucket${a}`,{headers:n.headers})})}async getBucket(e){var n=this;return n.handleOperation(async()=>await fo(n.fetch,`${n.url}/bucket/${e}`,{headers:n.headers}))}async createBucket(e,n={public:!1}){var a=this;return a.handleOperation(async()=>await gn(a.fetch,`${a.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}))}async updateBucket(e,n){var a=this;return a.handleOperation(async()=>await vh(a.fetch,`${a.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}))}async emptyBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket/${e}/empty`,{},{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Vh(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},xM=class extends Yi{constructor(e,n={},a){const i=e.replace(/\/$/,""),o=we(we({},Ao),n);super(i,o,a,"storage")}async createBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket`,{name:e},{headers:n.headers}))}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const a=new URLSearchParams;e?.limit!==void 0&&a.set("limit",e.limit.toString()),e?.offset!==void 0&&a.set("offset",e.offset.toString()),e?.sortColumn&&a.set("sortColumn",e.sortColumn),e?.sortOrder&&a.set("sortOrder",e.sortOrder),e?.search&&a.set("search",e.search);const i=a.toString(),o=i?`${n.url}/bucket?${i}`:`${n.url}/bucket`;return await fo(n.fetch,o,{headers:n.headers})})}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Vh(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}from(e){var n=this;if(!oM(e))throw new Wc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new aM({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(a,{get(o,c){const u=o[c];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(g){if(i)throw g;return{data:null,error:g}}}}})}},_M=class extends Yi{constructor(e,n={},a){const i=e.replace(/\/$/,""),o=we(we({},Ao),{},{"Content-Type":"application/json"},n);super(i,o,a,"vectors")}async createIndex(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateIndex`,e,{headers:n.headers})||{})}async getIndex(e,n){var a=this;return a.handleOperation(async()=>await Qt.post(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:a.headers}))}async listIndexes(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListIndexes`,e,{headers:n.headers}))}async deleteIndex(e,n){var a=this;return a.handleOperation(async()=>await Qt.post(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:a.headers})||{})}},SM=class extends Yi{constructor(e,n={},a){const i=e.replace(/\/$/,""),o=we(we({},Ao),{},{"Content-Type":"application/json"},n);super(i,o,a,"vectors")}async putVectors(e){var n=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/PutVectors`,e,{headers:n.headers})||{})}async getVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectors`,e,{headers:n.headers}))}async listVectors(e){var n=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectors`,e,{headers:n.headers}))}async queryVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/QueryVectors`,e,{headers:n.headers}))}async deleteVectors(e){var n=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectors`,e,{headers:n.headers})||{})}},EM=class extends Yi{constructor(e,n={},a){const i=e.replace(/\/$/,""),o=we(we({},Ao),{},{"Content-Type":"application/json"},n);super(i,o,a,"vectors")}async createBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}async getBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:e},{headers:n.headers}))}async listBuckets(e={}){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectorBuckets`,e,{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}},TM=class extends EM{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new CM(this.url,this.headers,e,this.fetch)}async createBucket(e){var n=()=>super.createBucket,a=this;return n().call(a,e)}async getBucket(e){var n=()=>super.getBucket,a=this;return n().call(a,e)}async listBuckets(e={}){var n=()=>super.listBuckets,a=this;return n().call(a,e)}async deleteBucket(e){var n=()=>super.deleteBucket,a=this;return n().call(a,e)}},CM=class extends _M{constructor(e,n,a,i){super(e,n,i),this.vectorBucketName=a}async createIndex(e){var n=()=>super.createIndex,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName}))}async listIndexes(e={}){var n=()=>super.listIndexes,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName}))}async getIndex(e){var n=()=>super.getIndex,a=this;return n().call(a,a.vectorBucketName,e)}async deleteIndex(e){var n=()=>super.deleteIndex,a=this;return n().call(a,a.vectorBucketName,e)}index(e){return new AM(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},AM=class extends SM{constructor(e,n,a,i,o){super(e,n,o),this.vectorBucketName=a,this.indexName=i}async putVectors(e){var n=()=>super.putVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async getVectors(e){var n=()=>super.getVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async listVectors(e={}){var n=()=>super.listVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async queryVectors(e){var n=()=>super.queryVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async deleteVectors(e){var n=()=>super.deleteVectors,a=this;return n().call(a,we(we({},e),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}},NM=class extends wM{constructor(e,n={},a,i){super(e,n,a,i)}from(e){return new vM(this.url,this.headers,e,this.fetch)}get vectors(){return new TM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xM(this.url+"/iceberg",this.headers,this.fetch)}};const Fw="2.97.0",Ri=30*1e3,bh=3,Gf=bh*Ri,OM="http://localhost:9999",RM="supabase.auth.token",MM={"X-Client-Info":`gotrue-js/${Fw}`},wh="X-Supabase-Api-Version",Ww={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jM=600*1e3;class ho extends Error{constructor(n,a,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=i}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class DM extends ho{constructor(n,a,i){super(n,a,i),this.name="AuthApiError",this.status=a,this.code=i}}function zM(e){return me(e)&&e.name==="AuthApiError"}class ba extends ho{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class rr extends ho{constructor(n,a,i,o){super(n,i,o),this.name=a,this.status=i}}class Kt extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yf(e){return me(e)&&e.name==="AuthSessionMissingError"}class Si extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dc extends rr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class fc extends rr{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $M(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class pv extends rr{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class UM extends rr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class xh extends rr{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function Xf(e){return me(e)&&e.name==="AuthRetryableFetchError"}class yv extends rr{constructor(n,a,i){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=i}}class _h extends rr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const $c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vv=` 	
\r=`.split(""),LM=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<vv.length;n+=1)e[vv[n].charCodeAt(0)]=-2;for(let n=0;n<$c.length;n+=1)e[$c[n].charCodeAt(0)]=n;return e})();function bv(e,n,a){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;a($c[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;a($c[i]),n.queuedBits-=6}}function ex(e,n,a){const i=LM[e];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function wv(e){const n=[],a=u=>{n.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{IM(u,i,a)};for(let u=0;u<e.length;u+=1)ex(e.charCodeAt(u),o,c);return n.join("")}function HM(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function BM(e,n){for(let a=0;a<e.length;a+=1){let i=e.charCodeAt(a);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(e.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}HM(i,n)}}function IM(e,n,a){if(n.utf8seq===0){if(e<=127){a(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function Ui(e){const n=[],a={queue:0,queuedBits:0},i=o=>{n.push(o)};for(let o=0;o<e.length;o+=1)ex(e.charCodeAt(o),a,i);return new Uint8Array(n)}function qM(e){const n=[];return BM(e,a=>n.push(a)),new Uint8Array(n)}function xa(e){const n=[],a={queue:0,queuedBits:0},i=o=>{n.push(o)};return e.forEach(o=>bv(o,a,i)),bv(null,a,i),n.join("")}function VM(e){return Math.round(Date.now()/1e3)+e}function PM(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",ha={tested:!1,writable:!1},tx=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ha.tested)return ha.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ha.tested=!0,ha.writable=!0}catch{ha.tested=!0,ha.writable=!1}return ha.writable};function GM(e){const n={},a=new URL(e);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return a.searchParams.forEach((i,o)=>{n[o]=i}),n}const nx=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),YM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Mi=async(e,n,a)=>{await e.setItem(n,JSON.stringify(a))},ga=async(e,n)=>{const a=await e.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},_t=async(e,n)=>{await e.removeItem(n)};class tu{constructor(){this.promise=new tu.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}tu.promiseConstructor=Promise;function hc(e){const n=e.split(".");if(n.length!==3)throw new _h("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!kM.test(n[i]))throw new _h("JWT not in base64url format");return{header:JSON.parse(wv(n[0])),payload:JSON.parse(wv(n[1])),signature:Ui(n[2]),raw:{header:n[0],payload:n[1]}}}async function XM(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function KM(e,n){return new Promise((i,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await e(c);if(!n(c,null,u)){i(u);return}}catch(u){if(!n(c,u)){o(u);return}}})()})}function ZM(e){return("0"+e.toString(16)).substr(-2)}function QM(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=a.length;let o="";for(let c=0;c<56;c++)o+=a.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(n),Array.from(n,ZM).join("")}async function JM(e){const a=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(i);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function FM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const a=await JM(e);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ei(e,n,a=!1){const i=QM();let o=i;a&&(o+="/PASSWORD_RECOVERY"),await Mi(e,`${n}-code-verifier`,o);const c=await FM(i);return[c,i===c?"plain":"s256"]}const WM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ek(e){const n=e.headers.get(wh);if(!n||!n.match(WM))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function tk(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function nk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ti(e){if(!rk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kf(){const e={};return new Proxy(e,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ak(e,n){return new Proxy(e,{get:(a,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const c=i.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,i,o)}return!n.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(a,i,o)}})}function xv(e){return JSON.parse(JSON.stringify(e))}const pa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ik=[502,503,504];async function _v(e){var n;if(!YM(e))throw new xh(pa(e),0);if(ik.includes(e.status))throw new xh(pa(e),e.status);let a;try{a=await e.json()}catch(c){throw new ba(pa(c),c)}let i;const o=ek(e);if(o&&o.getTime()>=Ww["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?i=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(i=a.error_code),i){if(i==="weak_password")throw new yv(pa(a),e.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new Kt}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new yv(pa(a),e.status,a.weak_password.reasons);throw new DM(pa(a),e.status||500,i)}const sk=(e,n,a,i)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),a))};async function xe(e,n,a,i){var o;const c=Object.assign({},i?.headers);c[wh]||(c[wh]=Ww["2024-01-01"].name),i?.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await ok(e,n,a+d,{headers:c,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(g):{data:Object.assign({},g),error:null}}async function ok(e,n,a,i,o,c){const u=sk(n,i,o,c);let d;try{d=await e(a,Object.assign({},u))}catch(g){throw console.error(g),new xh(pa(g),0)}if(d.ok||await _v(d),i?.noResolveJson)return d;try{return await d.json()}catch(g){await _v(g)}}function hn(e){var n;let a=null;uk(e)&&(a=Object.assign({},e),e.expires_at||(a.expires_at=VM(e.expires_in)));const i=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:a,user:i},error:null}}function Sv(e){const n=hn(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0)&&(n.data.weak_password=e.weak_password),n}function Hr(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function lk(e){return{data:e,error:null}}function ck(e){const{action_link:n,email_otp:a,hashed_token:i,redirect_to:o,verification_type:c}=e,u=Fc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:n,email_otp:a,hashed_token:i,redirect_to:o,verification_type:c},g=Object.assign({},u);return{data:{properties:d,user:g},error:null}}function Ev(e){return e}function uk(e){return e.access_token&&e.refresh_token&&e.expires_in}const Zf=["global","local","others"];class dk{constructor({url:n="",headers:a={},fetch:i}){this.url=n,this.headers=a,this.fetch=nx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,a=Zf[0]){if(Zf.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zf.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,a={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Hr})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:a}=n,i=Fc(n,["options"]),o=Object.assign(Object.assign({},i),a);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:ck,redirectTo:a?.redirectTo})}catch(a){if(me(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Hr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,i,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Ev});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(T=>{const S=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(T.split(";")[1].split("=")[1]);h[`${C}Page`]=S}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{users:[]},error:h};throw h}}async getUserById(n){Ti(n);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Hr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){Ti(n);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:Hr})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,a=!1){Ti(n);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:Hr})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){Ti(n.userId);try{const{data:a,error:i}=await xe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:i}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _deleteFactor(n){Ti(n.userId),Ti(n.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _listOAuthClients(n){var a,i,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Ev});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(T=>{const S=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(T.split(";")[1].split("=")[1]);h[`${C}Page`]=S}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _getOAuthClient(n){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _updateOAuthClient(n,a){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:a,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(me(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(n){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}}function Tv(e={}){return{getItem:n=>e[n]||null,setItem:(n,a)=>{e[n]=a},removeItem:n=>{delete e[n]}}}const Ci={debug:!!(globalThis&&tx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rx extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Cv extends rx{}async function fk(e,n,a){Ci.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const i=new globalThis.AbortController;n>0&&setTimeout(()=>{i.abort(),Ci.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Ci.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await a()}finally{Ci.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(n===0)throw Ci.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Cv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ci.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}})}catch(o){throw o?.name==="AbortError"?new Cv(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${n}ms`):o}}function hk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ax(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function gk(e){return parseInt(e,16)}function mk(e){const n=new TextEncoder().encode(e);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function pk(e){var n;const{chainId:a,domain:i,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:d,requestId:g,resources:h,scheme:p,uri:v,version:y}=e;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((n=e.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=ax(e.address),T=p?`${p}://${i}`:i,S=e.statement?`${e.statement}
`:"",C=`${T} wants you to sign in with your Ethereum account:
${b}

${S}`;let E=`URI: ${v}
Version: ${y}
Chain ID: ${a}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(E+=`
Expiration Time: ${o.toISOString()}`),d&&(E+=`
Not Before: ${d.toISOString()}`),g&&(E+=`
Request ID: ${g}`),h){let R=`
Resources:`;for(const w of h){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);R+=`
- ${w}`}E+=R}return`${C}
${E}`}class ct extends Error{constructor({message:n,code:a,cause:i,name:o}){var c;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(c=o??(i instanceof Error?i.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=a}}class Uc extends ct{constructor(n,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:n}),this.name="WebAuthnUnknownError",this.originalError=a}}function yk({error:e,options:n}){var a,i,o;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((a=c.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(n.mediation==="conditional"&&((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(ix(u)){if(c.rp.id!==u)return new ct({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function vk({error:e,options:n}){const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(ix(i)){if(a.rpId!==i)return new ct({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class bk{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const wk=new bk;function xk(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:n,user:a,excludeCredentials:i}=e,o=Fc(e,["challenge","user","excludeCredentials"]),c=Ui(n).buffer,u=Object.assign(Object.assign({},a),{id:Ui(a.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:c,user:u});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let g=0;g<i.length;g++){const h=i[g];d.excludeCredentials[g]=Object.assign(Object.assign({},h),{id:Ui(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function _k(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:n,allowCredentials:a}=e,i=Fc(e,["challenge","allowCredentials"]),o=Ui(n).buffer,c=Object.assign(Object.assign({},i),{challenge:o});if(a&&a.length>0){c.allowCredentials=new Array(a.length);for(let u=0;u<a.length;u++){const d=a[u];c.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Ui(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function Sk(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const a=e;return{id:e.id,rawId:e.id,response:{attestationObject:xa(new Uint8Array(e.response.attestationObject)),clientDataJSON:xa(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Ek(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const a=e,i=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:xa(new Uint8Array(o.authenticatorData)),clientDataJSON:xa(new Uint8Array(o.clientDataJSON)),signature:xa(new Uint8Array(o.signature)),userHandle:o.userHandle?xa(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function ix(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Av(){var e,n;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Tk(e){try{const n=await navigator.credentials.create(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Uc("Browser returned unexpected credential type",n)}:{data:null,error:new Uc("Empty credential response",n)}}catch(n){return{data:null,error:yk({error:n,options:e})}}}async function Ck(e){try{const n=await navigator.credentials.get(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Uc("Browser returned unexpected credential type",n)}:{data:null,error:new Uc("Empty credential response",n)}}catch(n){return{data:null,error:vk({error:n,options:e})}}}const Ak={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Nk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Lc(...e){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),a=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of e)if(o)for(const c in o){const u=o[c];if(u!==void 0)if(Array.isArray(u))i[c]=u;else if(a(u))i[c]=u;else if(n(u)){const d=i[c];n(d)?i[c]=Lc(d,u):i[c]=Lc(u)}else i[c]=u}return i}function Ok(e,n){return Lc(Ak,e,n||{})}function Rk(e,n){return Lc(Nk,e,n||{})}class Mk{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:a,friendlyName:i,signal:o},c){var u;try{const{data:d,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:a});if(!d)return{data:null,error:g};const h=o??wk.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;if(!p.name){const v=i;if(v)p.name=`${p.id}:${v}`;else{const b=(await this.client.getUser()).data.user,T=((u=b?.user_metadata)===null||u===void 0?void 0:u.name)||b?.email||b?.id||"User";p.name=`${p.id}:${T}`}}p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=Ok(d.webauthn.credential_options.publicKey,c?.create),{data:v,error:y}=await Tk({publicKey:p,signal:h});return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const p=Rk(d.webauthn.credential_options.publicKey,c?.request),{data:v,error:y}=await Ck(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(d){return me(d)?{data:null,error:d}:{data:null,error:new ba("Unexpected error in challenge",d)}}}async _verify({challengeId:n,factorId:a,webauthn:i}){return this.client.mfa.verify({factorId:a,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!a)return{data:null,error:new ho("rpId is required for WebAuthn authentication")};try{if(!Av())return{data:null,error:new ba("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:n,webauthn:{rpId:a,rpOrigins:i},signal:o},{request:c});if(!u)return{data:null,error:d};const{webauthn:g}=u;return this._verify({factorId:n,challengeId:u.challengeId,webauthn:{type:g.type,rpId:a,rpOrigins:i,credential_response:g.credential_response}})}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new ba("Unexpected error in authenticate",u)}}}async _register({friendlyName:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!a)return{data:null,error:new ho("rpId is required for WebAuthn registration")};try{if(!Av())return{data:null,error:new ba("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:n});if(!u)return await this.client.mfa.listFactors().then(p=>{var v;return(v=p.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===n&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:d};const{data:g,error:h}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:a,rpOrigins:i},signal:o},{create:c});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:a,rpOrigins:i,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:h}}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new ba("Unexpected error in register",u)}}}}hk();const kk={url:OM,storageKey:RM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Nv(e,n,a){return await a()}const Ai={};class go{get jwks(){var n,a;return(a=(n=Ai[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){Ai[this.storageKey]=Object.assign(Object.assign({},Ai[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=Ai[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ai[this.storageKey]=Object.assign(Object.assign({},Ai[this.storageKey]),{cachedAt:n})}constructor(n){var a,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},kk),n);if(this.storageKey=c.storageKey,this.instanceID=(a=go.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,go.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&St()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new dk({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=nx(c.fetch),this.lock=c.lock||Nv,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&St()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=fk:this.lock=Nv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Mk(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:tx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tv(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Tv(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}c.skipAutoInitialize||this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Fw}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let a={},i="none";if(St()&&(a=GM(window.location.href),this._isImplicitGrantCallback(a)?i="implicit":await this._isPKCECallback(a)&&(i="pkce")),St()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:c}=await this._getSessionFromURL(a,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),$M(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return me(a)?this._returnResult({error:a}):this._returnResult({error:new ba("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,i,o;try{const c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(a=n?.options)===null||a===void 0?void 0:a.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:hn}),{data:u,error:d}=c;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var a,i,o;try{let c;if("email"in n){const{email:p,password:v,options:y}=n;let b=null,T=null;this.flowType==="pkce"&&([b,T]=await Ei(this.storage,this.storageKey)),c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:v,data:(a=y?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:T},xform:hn})}else if("phone"in n){const{phone:p,password:v,options:y}=n;c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(i=y?.data)!==null&&i!==void 0?i:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:hn})}else throw new dc("You must provide either an email or phone number and a password");const{data:u,error:d}=c;if(d||!u)return await _t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let a;if("email"in n){const{email:c,password:u,options:d}=n;a=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Sv})}else if("phone"in n){const{phone:c,password:u,options:d}=n;a=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Sv})}else throw new dc("You must provide either an email or phone number and a password");const{data:i,error:o}=a;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const c=new Si;return this._returnResult({data:{user:null,session:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(n){var a,i,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;switch(a){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(n){var a,i,o,c,u,d,g,h,p,v,y;let b,T;if("message"in n)b=n.message,T=n.signature;else{const{chain:S,wallet:C,statement:E,options:R}=n;let w;if(St())if(typeof C=="object")w=C;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")w=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=C}const A=new URL((a=R?.url)!==null&&a!==void 0?a:window.location.href),$=await w.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=ax($[0]);let U=(i=R?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!U){const Y=await w.request({method:"eth_chainId"});U=gk(Y)}const V={domain:A.host,address:j,statement:E,uri:A.href,version:"1",chainId:U,nonce:(o=R?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=R?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=R?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(g=R?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(h=R?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=R?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=pk(V),T=await w.request({method:"personal_sign",params:[mk(b),j]})}try{const{data:S,error:C}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:T},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=n.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:hn});if(C)throw C;if(!S||!S.session||!S.user){const E=new Si;return this._returnResult({data:{user:null,session:null},error:E})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:C})}catch(S){if(me(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(n){var a,i,o,c,u,d,g,h,p,v,y,b;let T,S;if("message"in n)T=n.message,S=n.signature;else{const{chain:C,wallet:E,statement:R,options:w}=n;let A;if(St())if(typeof E=="object")A=E;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))A=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=E}const $=new URL((a=w?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in A&&A.signIn){const j=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),R?{statement:R}:null));let U;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")U=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)U=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)T=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),S=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${$.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(o=(i=w?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=w?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((d=w?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((g=w?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((h=w?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((v=(p=w?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",...w.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const j=await A.signMessage(new TextEncoder().encode(T),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=j}}try{const{data:C,error:E}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:xa(S)},!((y=n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:hn});if(E)throw E;if(!C||!C.session||!C.user){const R=new Si;return this._returnResult({data:{user:null,session:null},error:R})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:E})}catch(C){if(me(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(n){const a=await ga(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(a??"").split("/");try{if(!i&&this.flowType==="pkce")throw new UM;const{data:c,error:u}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:hn});if(await _t(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const d=new Si;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:a,provider:i,token:o,access_token:c,nonce:u}=n,d=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:hn}),{data:g,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g||!g.session||!g.user){const p=new Si;return this._returnResult({data:{user:null,session:null},error:p})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:h})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(n){var a,i,o,c,u;try{if("email"in n){const{email:d,options:g}=n;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Ei(this.storage,this.storageKey));const{error:v}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(a=g?.data)!==null&&a!==void 0?a:{},create_user:(i=g?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in n){const{phone:d,options:g}=n,{data:h,error:p}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new dc("You must provide either an email or phone number.")}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(n){var a,i;try{let o,c;"options"in n&&(o=(a=n.options)===null||a===void 0?void 0:a.redirectTo,c=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:hn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,h=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(o){if(me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var a,i,o,c,u;try{let d=null,g=null;this.flowType==="pkce"&&([d,g]=await Ei(this.storage,this.storageKey));const h=await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:g}),headers:this.headers,xform:lk});return!((c=h.data)===null||c===void 0)&&c.url&&St()&&!(!((u=n.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)throw i;if(!a)throw new Kt;const{error:o}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:i,type:o,options:c}=n,{error:u}=await xe(this.fetch,"POST",a,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in n){const{phone:i,type:o,options:c}=n,{data:u,error:d}=await xe(this.fetch,"POST",a,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new dc("You must provide either an email or phone number and a type")}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=a();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await ga(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<Gf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const u=await ga(this.userStorage,this.storageKey+"-user");u?.user?n.user=u.user:n.user=Kf()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};n.user=ak(n.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const a=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(n){try{return n?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Hr}):await this._useSession(async a=>{var i,o,c;const{data:u,error:d}=a;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kt}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Hr})})}catch(a){if(me(a))return Yf(a)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async i=>{const{data:o,error:c}=i;if(c)throw c;if(!o.session)throw new Kt;const u=o.session;let d=null,g=null;this.flowType==="pkce"&&n.email!=null&&([d,g]=await Ei(this.storage,this.storageKey));const{data:h,error:p}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:d,code_challenge_method:g}),jwt:u.access_token,xform:Hr});if(p)throw p;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Kt;const a=Date.now()/1e3;let i=a,o=!0,c=null;const{payload:u}=hc(n.access_token);if(u.exp&&(i=u.exp,o=i<=a),o){const{data:d,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:g}=await this._getUser(n.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});c={access_token:n.access_token,refresh_token:n.refresh_token,user:d.user,token_type:"bearer",expires_in:i-a,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(a){if(me(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var i;if(!n){const{data:u,error:d}=a;if(d)throw d;n=(i=u.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Kt;const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(n,a){try{if(!St())throw new fc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new fc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new pv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fc("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new pv("No code detected.");const{data:R,error:w}=await this._exchangeCodeForSession(n.code);if(w)throw w;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:d,expires_at:g,token_type:h}=n;if(!c||!d||!u||!h)throw new fc("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(d);let y=p+v;g&&(y=parseInt(g));const b=y-p;b*1e3<=Ri&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const T=y-v;p-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,y,p):p-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,y,p);const{data:S,error:C}=await this._getUser(c);if(C)throw C;const E={provider_token:i,provider_refresh_token:o,access_token:c,expires_in:v,expires_at:y,refresh_token:u,token_type:h,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:n.type},error:null})}catch(i){if(me(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await ga(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var i;const{data:o,error:c}=a;if(c&&!Yf(c))return this._returnResult({error:c});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,n);if(d&&!(zM(d)&&(d.status===404||d.status===401||d.status===403)||Yf(d)))return this._returnResult({error:d})}return n!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const a=PM(),i={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async a=>{var i,o;try{const{data:{session:c},error:u}=a;if(u)throw u;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,a={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Ei(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:a,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var a;try{const{data:i,error:o}=await this._useSession(async c=>{var u,d,g,h,p;const{data:v,error:y}=c;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(u=n.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=n.options)===null||d===void 0?void 0:d.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return St()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(me(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async a=>{var i;try{const{error:o,data:{session:c}}=a;if(o)throw o;const{options:u,provider:d,token:g,access_token:h,nonce:p}=n,v=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=c?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:g,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hn}),{data:y,error:b}=v;return b?this._returnResult({data:{user:null,session:null},error:b}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Si}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:b}))}catch(o){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async a=>{var i,o;const{data:c,error:u}=a;if(u)throw u;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const i=Date.now();return await KM(async o=>(o>0&&await XM(200*Math.pow(2,o-1)),this._debug(a,"refreshing attempt",o),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:hn})),(o,c)=>{const u=200*Math.pow(2,o);return c&&Xf(c)&&Date.now()+u-i<Ri})}catch(i){if(this._debug(a,"error",i),me(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",i),St()&&!a.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,a;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await ga(this.storage,this.storageKey);if(o&&this.userStorage){let u=await ga(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Mi(this.userStorage,this.storageKey+"-user",u)),o.user=(n=u?.user)!==null&&n!==void 0?n:Kf()}else if(o&&!o.user&&!o.user){const u=await ga(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await _t(this.storage,this.storageKey+"-user"),await Mi(this.storage,this.storageKey,o)):o.user=Kf()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const c=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Gf;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${Gf}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Xf(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var a,i;if(!n)throw new Kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new tu;const{data:c,error:u}=await this._refreshAccessToken(n);if(u)throw u;if(!c.session)throw new Kt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(o,"error",c),me(c)){const u={data:null,error:c};return Xf(c)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,a,i=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",a,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:a});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(n,a)}catch(g){c.push(g)}});if(await Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await _t(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},n),i=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&a.user&&await Mi(this.userStorage,this.storageKey+"-user",{user:a.user});const o=Object.assign({},a);delete o.user;const c=xv(o);await Mi(this.storage,this.storageKey,c)}else{const o=xv(a);await Mi(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ri);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const a=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const a=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,a&&clearTimeout(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:i}}=a;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-n)/Ri);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ri}ms, refresh threshold is ${bh} ticks`),o<=bh&&await this._callRefreshToken(i.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof rx)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,i){const o=[`provider=${encodeURIComponent(a)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await Ei(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(i?.queryParams){const c=new URLSearchParams(i.queryParams);o.push(c.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;return c?this._returnResult({data:null,error:c}):await xe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(n){try{return await this._useSession(async a=>{var i,o;const{data:c,error:u}=a;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:h}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return h?this._returnResult({data:null,error:h}):(n.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Sk(n.webauthn.credential_response):Ek(n.webauthn.credential_response)})}:{code:n.code}),{data:d,error:g}=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:g}))})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var i;const{data:o,error:c}=a;if(c)return this._returnResult({data:null,error:c});const u=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:xk(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:_k(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(n){const{data:a,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){var n;const{data:{user:a},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=a?.factors)!==null&&n!==void 0?n:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var a,i,o,c;if(n)try{const{payload:b}=hc(n);let T=null;b.aal&&(T=b.aal);let S=T;const{data:{user:C},error:E}=await this.getUser(n);if(E)return this._returnResult({data:null,error:E});((i=(a=C?.factors)===null||a===void 0?void 0:a.filter(A=>A.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(S="aal2");const w=b.amr||[];return{data:{currentLevel:T,nextLevel:S,currentAuthenticationMethods:w},error:null}}catch(b){if(me(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=hc(u.access_token);let h=null;g.aal&&(h=g.aal);let p=h;((c=(o=u.user.factors)===null||o===void 0?void 0:o.filter(b=>b.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(p="aal2");const y=g.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async a=>{const{data:{session:i},error:o}=a;return o?this._returnResult({data:null,error:o}):i?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(n,a){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!a?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,a){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!a?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;return i?this._returnResult({data:null,error:i}):a?await xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async a=>{const{data:{session:i},error:o}=a;return o?this._returnResult({data:null,error:o}):i?(await xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kt})})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(n,a={keys:[]}){let i=a.keys.find(d=>d.kid===n);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===n),i&&this.jwks_cached_at+jM>o)return i;const{data:c,error:u}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,i=c.keys.find(d=>d.kid===n),!i)?null:i}async getClaims(n,a={}){try{let i=n;if(!i){const{data:b,error:T}=await this.getSession();if(T||!b.session)return this._returnResult({data:null,error:T});i=b.session.access_token}const{header:o,payload:c,signature:u,raw:{header:d,payload:g}}=hc(i);a?.allowExpired||tk(c.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!h){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:c,header:o,signature:u},error:null}}const p=nk(o.alg),v=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,u,qM(`${d}.${g}`)))throw new _h("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}}go.nextInstanceID={};const jk=go,Dk="2.97.0";let Xs="";typeof Deno<"u"?Xs="deno":typeof document<"u"?Xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xs="react-native":Xs="node";const zk={"X-Client-Info":`supabase-js-${Xs}/${Dk}`},$k={headers:zk},Uk={schema:"public"},Lk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hk={};function mo(e){"@babel/helpers - typeof";return mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mo(e)}function Bk(e,n){if(mo(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,n);if(mo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Ik(e){var n=Bk(e,"string");return mo(n)=="symbol"?n:n+""}function qk(e,n,a){return(n=Ik(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function Ov(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,i)}return a}function tt(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Ov(Object(a),!0).forEach(function(i){qk(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ov(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}const Vk=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),Pk=()=>Headers,Gk=(e,n,a)=>{const i=Vk(a),o=Pk();return async(c,u)=>{var d;const g=(d=await n())!==null&&d!==void 0?d:e;let h=new o(u?.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${g}`),i(c,tt(tt({},u),{},{headers:h}))}};function Yk(e){return e.endsWith("/")?e:e+"/"}function Xk(e,n){var a,i;const{db:o,auth:c,realtime:u,global:d}=e,{db:g,auth:h,realtime:p,global:v}=n,y={db:tt(tt({},g),o),auth:tt(tt({},h),c),realtime:tt(tt({},p),u),storage:{},global:tt(tt(tt({},v),d),{},{headers:tt(tt({},(a=v?.headers)!==null&&a!==void 0?a:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function Kk(e){const n=e?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Yk(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Zk=class extends jk{constructor(e){super(e)}},Qk=class{constructor(e,n,a){var i,o;this.supabaseUrl=e,this.supabaseKey=n;const c=Kk(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Uk,realtime:Hk,auth:tt(tt({},Lk),{},{storageKey:u}),global:$k},g=Xk(a??{},d);if(this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=g.auth)!==null&&h!==void 0?h:{},this.headers,g.global.fetch)}this.fetch=Gk(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new zR(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new NM(this.storageUrl.href,this.headers,this.fetch,a?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new AR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,a)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,n,a;if(e.accessToken)return await e.accessToken();const{data:i}=await e.auth.getSession();return(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:c,flowType:u,lock:d,debug:g,throwOnError:h},p,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zk({url:this.authUrl.href,headers:tt(tt({},y),p),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:o,flowType:u,lock:d,debug:g,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new FR(this.realtimeUrl.href,tt(tt({},e),{},{params:tt(tt({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n?.access_token)})}_handleTokenChanged(e,n,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Jk=(e,n,a)=>new Qk(e,n,a);function Fk(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const n=e.version;if(n==null)return!1;const a=n.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}Fk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Wk="https://nlavjplhryynbdyubumj.supabase.co",ej="sb_publishable_RvhGSkpc-ILlK7mi_uHxcg_WGoonOjj",ya=Jk(Wk,ej),tj=()=>!0,Sc="c4-last-model-id",nj=()=>{const[e,n]=q.useState([]),[a,i]=q.useState(!1),[o,c]=q.useState(null),[u,d]=q.useState(null),g=q.useRef(!1),h=pe(C=>C.importModel),p=q.useCallback(async()=>{i(!0),c(null);try{const{data:C,error:E}=await ya.from("models").select("id, name, updated_at").order("updated_at",{ascending:!1});if(E)throw E;n(C||[])}catch(C){c(C.message),console.error("Error fetching models:",C)}finally{i(!1)}},[]),v=q.useCallback(async(C,E=!1)=>{i(!0),c(null);try{const{data:R,error:w}=await ya.from("models").select("*").eq("id",C).single();if(w)throw w;return d(C),localStorage.setItem(Sc,C),!E&&R?.data&&h(R.data),R}catch(R){return c(R.message),console.error("Error loading model:",R),(R.message?.includes("not found")||R.code==="PGRST116")&&localStorage.removeItem(Sc),null}finally{i(!1)}},[h]),y=q.useCallback(async(C,E)=>{i(!0),c(null);try{const R={name:C,data:E,updated_at:new Date().toISOString()};let w;if(u){const{data:A,error:$}=await ya.from("models").update(R).eq("id",u).select().single();if($)throw $;w=A}else{const{data:A,error:$}=await ya.from("models").insert(R).select().single();if($)throw $;w=A,d(w.id)}return await p(),w}catch(R){return c(R.message),console.error("Error saving model:",R),null}finally{i(!1)}},[u,p]),b=q.useCallback(async(C,E)=>{i(!0),c(null);try{const{data:R,error:w}=await ya.from("models").insert({name:C,data:E,updated_at:new Date().toISOString()}).select().single();if(w)throw w;return d(R.id),await p(),R}catch(R){return c(R.message),console.error("Error saving model:",R),null}finally{i(!1)}},[p]),T=q.useCallback(async C=>{i(!0),c(null);try{const{error:E}=await ya.from("models").delete().eq("id",C);if(E)throw E;return u===C&&d(null),await p(),!0}catch(E){return c(E.message),console.error("Error deleting model:",E),!1}finally{i(!1)}},[u,p]),S=q.useCallback(()=>{d(null)},[]);return q.useEffect(()=>{(async()=>{if(await p(),g.current)return;g.current=!0;const E=localStorage.getItem(Sc);E&&(console.log("Auto-loading last accessed model:",E),await v(E))})()},[p,v]),{models:e,loading:a,error:o,currentModelId:u,setCurrentModelId:d,isConfigured:tj(),fetchModels:p,loadModel:v,saveModel:y,saveAsModel:b,deleteModel:T,newModel:S}},rj=()=>localStorage.getItem(Sc)!==null,aj=2e3,ij=(e,n)=>{const[a,i]=q.useState(()=>localStorage.getItem("c4-autosave-enabled")==="true"),[o,c]=q.useState("idle"),u=q.useRef(null),d=q.useRef(null),g=pe(w=>w.systems),h=pe(w=>w.containers),p=pe(w=>w.components),v=pe(w=>w.people),y=pe(w=>w.externalSystems),b=pe(w=>w.shadows),T=pe(w=>w.relationships),S=pe(w=>w.metadata),C=pe(w=>w.exportModel),E=q.useCallback(w=>{i(w),localStorage.setItem("c4-autosave-enabled",w?"true":"false")},[]),R=q.useCallback(async()=>{if(!e)return;const w=C(),A=JSON.stringify(w);if(A!==d.current){c("saving");try{const{error:$}=await ya.from("models").update({name:S.name,data:w,updated_at:new Date().toISOString()}).eq("id",e);if($)throw $;d.current=A,c("saved"),n?.(),setTimeout(()=>c("idle"),2e3)}catch($){console.error("Auto-save error:",$),c("error"),setTimeout(()=>c("idle"),3e3)}}},[e,C,S.name,n]);return q.useEffect(()=>{if(!(!a||!e))return u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{R()},aj),()=>{u.current&&clearTimeout(u.current)}},[a,e,R,g,h,p,v,y,b,T]),q.useEffect(()=>{d.current=null},[e]),{autoSaveEnabled:a,toggleAutoSave:E,saveStatus:o}},sj=()=>{const[e,n]=q.useState(!1),[a,i]=q.useState(!1),[o,c]=q.useState(""),u=q.useRef(null),{models:d,loading:g,error:h,currentModelId:p,loadModel:v,saveModel:y,saveAsModel:b,deleteModel:T,newModel:S,fetchModels:C}=nj(),{metadata:E,exportModel:R,importModel:w,clearAll:A,setMetadata:$}=pe(),{autoSaveEnabled:j,toggleAutoSave:U,saveStatus:V}=ij(p,C);q.useEffect(()=>{const M=L=>{u.current&&!u.current.contains(L.target)&&(n(!1),i(!1))};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]);const Y=async()=>{const M=R();p?await y(E.name,M):(i(!0),c(E.name)),n(!1)},oe=async()=>{if(!o.trim())return;const M=R();$({...E,name:o.trim()}),await b(o.trim(),{...M,metadata:{...M.metadata,name:o.trim()}}),i(!1),c("")},ee=async M=>{const L=await v(M);L?.data&&w(L.data),n(!1)},W=async(M,L)=>{M.stopPropagation(),window.confirm("Delete this model? This cannot be undone.")&&await T(L)},ne=()=>{A(),S(),$({name:"New C4 Model",version:"1.0",author:"Solution Architect"}),n(!1)},k=d.find(M=>M.id===p),P=()=>g?_.jsx($N,{className:"w-4 h-4 animate-spin"}):V==="saving"?_.jsx(LN,{className:"w-4 h-4 animate-spin"}):V==="saved"?_.jsx(Nw,{className:"w-4 h-4 text-green-300"}):V==="error"?_.jsx(Mw,{className:"w-4 h-4 text-red-300"}):_.jsx(ON,{className:"w-4 h-4"});return _.jsxs("div",{className:"relative",ref:u,children:[_.jsxs("button",{onClick:()=>n(!e),className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm transition-colors",title:j&&p?"Auto-save enabled":"Cloud models",children:[P(),_.jsx("span",{className:"max-w-[120px] truncate",children:k?k.name:"Models"}),_.jsx(Ow,{className:"w-3 h-3"})]}),e&&_.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:a?_.jsxs("div",{className:"p-3",children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Name"}),_.jsx("input",{type:"text",value:o,onChange:M=>c(M.target.value),onKeyDown:M=>M.key==="Enter"&&oe(),placeholder:"Enter model name",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),_.jsxs("div",{className:"flex gap-2 mt-2",children:[_.jsx("button",{onClick:oe,disabled:!o.trim(),className:"flex-1 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"}),_.jsx("button",{onClick:()=>i(!1),className:"px-3 py-1.5 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm",children:"Cancel"})]})]}):_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"p-2 border-b border-gray-100",children:[_.jsxs("button",{onClick:ne,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[_.jsx(kN,{className:"w-4 h-4"}),"New Model"]}),_.jsxs("button",{onClick:Y,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[_.jsx(Yy,{className:"w-4 h-4"}),p?"Save":"Save As..."]}),p&&_.jsxs("button",{onClick:()=>{i(!0),c(E.name)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[_.jsx(Yy,{className:"w-4 h-4"}),"Save As..."]}),_.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[_.jsx("span",{className:"text-sm text-gray-700",children:"Auto-save"}),_.jsx("button",{onClick:()=>U(!j),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${j?"bg-indigo-600":"bg-gray-300"} ${p?"":"opacity-50 cursor-not-allowed"}`,disabled:!p,title:p?"":"Save a model first to enable auto-save",children:_.jsx("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform ${j?"translate-x-5":"translate-x-1"}`})})]})]}),_.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[h&&_.jsxs("div",{className:"px-3 py-2 text-sm text-red-600 bg-red-50 border-b border-red-100",children:["Error: ",h,_.jsx("button",{onClick:()=>C(),className:"ml-2 underline hover:no-underline",children:"Retry"})]}),d.length===0&&!h?_.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 text-center",children:"No saved models"}):d.map(M=>_.jsxs("div",{onClick:()=>ee(M.id),className:`flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer ${M.id===p?"bg-indigo-50":""}`,children:[_.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[_.jsx(jN,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),_.jsx("span",{className:"truncate",children:M.name})]}),_.jsx("button",{onClick:L=>W(L,M.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete model",children:_.jsx(uh,{className:"w-3 h-3"})})]},M.id))]})]})})]})},oj=()=>{const{metadata:e,setMetadata:n,exportModel:a,importModel:i,clearAll:o}=pe(),c=pe(z=>z.viewMode),u=pe(z=>z.setViewMode),[d,g]=q.useState(!1),[h,p]=q.useState(!1),[v,y]=q.useState(!1),[b,T]=q.useState(!1),[S,C]=q.useState(e.name),[E,R]=q.useState(null),w=async()=>{const z=a(),{url:O,error:D}=wR(z);if(D){R("error"),alert(D),setTimeout(()=>R(null),2e3);return}try{await navigator.clipboard.writeText(O),R("copied"),setTimeout(()=>R(null),2e3)}catch{const Z=document.createElement("textarea");Z.value=O,document.body.appendChild(Z),Z.select(),document.execCommand("copy"),document.body.removeChild(Z),R("copied"),setTimeout(()=>R(null),2e3)}},A=()=>{const z=a(),O=JSON.stringify(z,null,2),D="data:application/json;charset=utf-8,"+encodeURIComponent(O),K=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.json`,Z=document.createElement("a");Z.setAttribute("href",D),Z.setAttribute("download",K),Z.click()},$=z=>{const O=z.target.files?.[0];if(O){const D=new FileReader;D.onload=K=>{try{const Z=JSON.parse(K.target.result);if(Z.model&&(Z.views||Z.documentation)){const se=pR(Z);i(se),alert("Structurizr workspace imported successfully!")}else i(Z),alert("Model imported successfully!")}catch(Z){alert("Error importing model: "+Z.message)}},D.readAsText(O)}y(!1),z.target.value=""},j=z=>{const O=z.target.files?.[0];if(O){const D=new FileReader;D.onload=K=>{try{const Z=K.target.result,se=gR(Z);i(se),alert(`Spreadsheet imported successfully! Created ${se.systems?.length||0} systems, ${se.containers?.length||0} containers, ${se.components?.length||0} components.`)}catch(Z){alert("Error importing spreadsheet: "+Z.message)}},D.readAsText(O)}y(!1),z.target.value=""},U=()=>{const z=a(),O=mR(z),D=JSON.stringify(O,null,2),K="data:application/json;charset=utf-8,"+encodeURIComponent(D),Z=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}-structurizr.json`,se=document.createElement("a");se.setAttribute("href",K),se.setAttribute("download",Z),se.click(),p(!1)},V=()=>{window.confirm("Are you sure you want to clear all elements? This cannot be undone.")&&o()},Y=()=>{const z=a(),O=qw(z),D=new Blob([O],{type:"text/plain"}),K=URL.createObjectURL(D),Z=document.createElement("a");Z.href=K,Z.download=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.puml`,Z.click(),URL.revokeObjectURL(K),p(!1)},oe=()=>{const z=a(),O=aR(z),D=new Blob([O],{type:"text/plain"}),K=URL.createObjectURL(D),Z=document.createElement("a");Z.href=K,Z.download=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.mmd`,Z.click(),URL.revokeObjectURL(K),p(!1)},ee=()=>{const z=a(),O=Vw(z),D=new Blob([O],{type:"text/markdown"}),K=URL.createObjectURL(D),Z=document.createElement("a");Z.href=K,Z.download=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.md`,Z.click(),URL.revokeObjectURL(K),p(!1)},W=()=>{const z=a();iR(z),p(!1)},ne=async()=>{const z=a();await nR(z),p(!1)},k=async()=>{const z=a();await rR(z),p(!1)},P=()=>{const z=a();uR(z),p(!1)},M=()=>{const z=a();dR(z),p(!1)},L=()=>{C(e.name),T(!0)},B=()=>{const z=S.trim();z?n({...e,name:z}):C(e.name),T(!1)},X=z=>{z.key==="Enter"?B():z.key==="Escape"&&(C(e.name),T(!1))};return _.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Diagrams"}),_.jsx("span",{className:"text-gray-400",children:"|"}),b?_.jsx("input",{type:"text",value:S,onChange:z=>C(z.target.value),onBlur:B,onKeyDown:X,autoFocus:!0,className:"text-sm text-gray-900 font-medium px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[200px]"}):_.jsx("button",{onClick:L,className:"text-sm text-gray-600 cursor-text hover:text-gray-900 hover:bg-gray-100 px-2 py-1 rounded transition-colors border border-transparent hover:border-gray-300",title:"Click to edit model name",children:e.name})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx(oO,{}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(sj,{}),_.jsxs("button",{onClick:w,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm transition-colors ${E==="copied"?"bg-green-600 text-white":E==="error"?"bg-red-600 text-white":"bg-gray-600 text-white hover:bg-gray-700"}`,title:"Copy shareable link to clipboard",children:[E==="copied"?_.jsx(Nw,{className:"w-4 h-4"}):E==="error"?_.jsx(Mw,{className:"w-4 h-4"}):_.jsx(BN,{className:"w-4 h-4"}),E==="copied"?"Copied!":"Share"]}),_.jsxs("div",{className:"relative",children:[_.jsxs("button",{onClick:()=>p(!h),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm transition-colors",title:"Export model",children:[_.jsx(RN,{className:"w-4 h-4"}),"Export"]}),h&&_.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:_.jsxs("div",{className:"py-1",children:[_.jsxs("button",{onClick:A,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(If,{className:"w-4 h-4"}),"JSON"]}),_.jsxs("button",{onClick:U,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(If,{className:"w-4 h-4"}),"Structurizr JSON"]}),_.jsx("hr",{className:"my-1"}),_.jsxs("button",{onClick:Y,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(Bf,{className:"w-4 h-4"}),"PlantUML"]}),_.jsxs("button",{onClick:oe,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(Bf,{className:"w-4 h-4"}),"Mermaid"]}),_.jsxs("button",{onClick:ee,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(Gy,{className:"w-4 h-4"}),"Markdown"]}),_.jsxs("button",{onClick:W,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(Gy,{className:"w-4 h-4"}),"HTML Document"]}),_.jsx("hr",{className:"my-1"}),_.jsxs("button",{onClick:ne,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(Py,{className:"w-4 h-4"}),"PNG Image"]}),_.jsxs("button",{onClick:k,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(Py,{className:"w-4 h-4"}),"SVG Image"]}),_.jsx("hr",{className:"my-1"}),_.jsxs("button",{onClick:P,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(Bf,{className:"w-4 h-4"}),"Draw.io (.drawio)"]}),_.jsx("hr",{className:"my-1"}),_.jsxs("button",{onClick:M,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[_.jsx(Xy,{className:"w-4 h-4"}),"Spreadsheet (.csv)"]})]})})]}),_.jsxs("div",{className:"relative",children:[_.jsxs("button",{onClick:()=>y(!v),className:"flex items-center gap-2 px-3 py-1.5 bg-green-700 text-white rounded-md hover:bg-green-800 text-sm transition-colors",title:"Import model",children:[_.jsx(IN,{className:"w-4 h-4"}),"Import"]}),v&&_.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:_.jsxs("div",{className:"py-1",children:[_.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[_.jsx(If,{className:"w-4 h-4"}),"JSON / Structurizr",_.jsx("input",{type:"file",accept:".json",onChange:$,className:"hidden","aria-label":"Import JSON model file"})]}),_.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[_.jsx(Xy,{className:"w-4 h-4"}),"Spreadsheet (.csv)",_.jsx("input",{type:"file",accept:".csv",onChange:j,className:"hidden","aria-label":"Import CSV spreadsheet"})]})]})})]}),_.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-md p-1",children:[_.jsxs("button",{onClick:()=>u("edit"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="edit"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Edit mode - navigate and edit elements",children:[_.jsx(MN,{className:"w-4 h-4"}),"Edit"]}),_.jsxs("button",{onClick:()=>u("tree"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="tree"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Tree view - see full hierarchy",children:[_.jsx(DN,{className:"w-4 h-4"}),"Tree"]}),_.jsxs("button",{onClick:()=>u("gantt"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="gantt"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Gantt view - see project timeline",children:[_.jsx(NN,{className:"w-4 h-4"}),"Gantt"]})]}),_.jsx("button",{onClick:V,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm transition-colors",title:"Clear all elements",children:"Clear All"})]})]})]})})},gc="c4-model-autosave",lj=3e4,Ni=e=>!e||typeof e!="object"?null:{id:e.id,type:e.type,name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags:[],parentId:e.parentId||null,position:e.position&&typeof e.position=="object"?{x:Number(e.position.x)||0,y:Number(e.position.y)||0}:{x:0,y:0},width:e.width?Number(e.width):void 0,height:e.height?Number(e.height):void 0},cj=e=>!e||typeof e!="object"?null:{id:e.id,from:e.from,to:e.to,description:e.description||"",technology:e.technology||"",arrowDirection:e.arrowDirection||"right",lineStyle:e.lineStyle||"solid",animated:!!e.animated},mc=e=>{if(!e||typeof e!="object")return null;const n=(a,i)=>Array.isArray(a)?a.map(i).filter(o=>o!==null):[];return{metadata:e.metadata||{name:"New C4 Model",version:"1.0",author:"Solution Architect"},systems:n(e.systems,Ni),containers:n(e.containers,Ni),components:n(e.components,Ni),people:n(e.people,Ni),externalSystems:n(e.externalSystems,Ni),shadows:(e.shadows||[]).map(Ni),relationships:n(e.relationships,cj)}},uj=()=>{const{exportModel:e,importModel:n}=pe();q.useEffect(()=>{if(SR())try{const i=xR();if(i){const o=mc(i);if(o){n(o),console.log("Model loaded from shared URL"),_R();return}}}catch(i){console.error("Error loading shared model from URL:",i)}if(rj()){console.log("Supabase model will be auto-loaded, skipping localStorage restore");return}const a=localStorage.getItem(gc);if(a)try{const i=JSON.parse(a),o=mc(i);o&&window.confirm("Found a previously saved model. Would you like to restore it?")&&(n(o),console.log("Model restored from local storage (sanitized)"))}catch(i){console.error("Error loading saved model:",i),console.warn("Clearing corrupted localStorage data"),localStorage.removeItem(gc)}},[n]),q.useEffect(()=>{const a=setInterval(()=>{const i=e(),o=mc(i);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(gc,JSON.stringify(o)),console.log("Model auto-saved to local storage")}catch(c){console.error("Error saving model to localStorage:",c)}},lj);return()=>clearInterval(a)},[e]),q.useEffect(()=>{const a=()=>{const i=e(),o=mc(i);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(gc,JSON.stringify(o))}catch(c){console.error("Error saving model on unload:",c)}};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[e])},dj=()=>{const e=pe(d=>d.currentParentId),n=pe(d=>d.viewMode),a=pe(d=>d.navigateTo),i=pe(d=>d.navigateToRoot),o=pe(d=>d.setViewMode),c=q.useRef(!1),u=q.useRef(null);q.useEffect(()=>{if(c.current){c.current=!1;return}const d=`${e||"root"}-${n}`;if(u.current===d)return;const g={currentParentId:e,viewMode:n};u.current===null?window.history.replaceState(g,""):window.history.pushState(g,""),u.current=d},[e,n]),q.useEffect(()=>{const d=g=>{c.current=!0;const h=g.state;h?(h.currentParentId===null?i():a(h.currentParentId),h.viewMode&&o(h.viewMode),u.current=`${h.currentParentId||"root"}-${h.viewMode||"edit"}`):(i(),o("edit"),u.current="root-edit")};if(window.addEventListener("popstate",d),!window.history.state){const g={currentParentId:e,viewMode:n};window.history.replaceState(g,""),u.current=`${e||"root"}-${n}`}return()=>{window.removeEventListener("popstate",d)}},[a,i,o])},fj={c4Node:PN,shadowNode:YN},hj=(e,n)=>{if(!e?.position||!n?.position)return{sourceHandle:"bottom",targetHandle:"top"};const a=n.position.x-e.position.x,i=n.position.y-e.position.y;return Math.abs(a)>Math.abs(i)?a>0?{sourceHandle:"right",targetHandle:"left"}:{sourceHandle:"left",targetHandle:"right"}:i>0?{sourceHandle:"bottom",targetHandle:"top"}:{sourceHandle:"top",targetHandle:"bottom"}};function gj(){const[e,n,a]=XA([]),[i,o,c]=KA([]),[u,d]=q.useState(null),{getAllElements:g,relationships:h,updateElement:p,setSelectedElement:v,setSelectedEdge:y,selectedElement:b,currentParentId:T,navigateInto:S,navigateTo:C}=pe(),E=pe(z=>z.navigateUp),R=pe(z=>z.navigateToRoot),w=pe(z=>z.viewMode),A=q.useCallback(z=>{a(z)},[a]),$=pe(z=>z.systems),j=pe(z=>z.containers),U=pe(z=>z.components),V=pe(z=>z.people),Y=pe(z=>z.externalSystems),oe=pe(z=>z.shadows),ee=pe(z=>z.getVisibleElements);uj(),dj(),q.useEffect(()=>{const O=ee().map(D=>({id:D.id,type:D.type==="shadow"?"shadowNode":"c4Node",position:D.position||{x:Math.random()*400,y:Math.random()*300},data:{...D,label:D.name}}));n(O)},[$,j,U,V,Y,oe,T,ee,n]),q.useEffect(()=>{const z=ee(),O=h.map(D=>{const K=D.arrowDirection||"right";let Z,se;(K==="left"||K==="both")&&(Z={type:Ea.ArrowClosed}),(K==="right"||K==="both")&&(se={type:Ea.ArrowClosed});const ue=D.lineStyle||"solid";let ce;ue==="dashed"?ce="5,5":ue==="dotted"&&(ce="2,2");const le=z.find(ye=>ye.id===D.from),de=z.find(ye=>ye.id===D.to),{sourceHandle:Te,targetHandle:Se}=hj(le,de);return{id:D.id,source:D.from,target:D.to,sourceHandle:Te,targetHandle:Se,label:D.description||"",type:"smoothstep",animated:D.animated||!1,markerStart:Z,markerEnd:se,style:{stroke:"#64748b",strokeWidth:2,strokeDasharray:ce},labelStyle:{fill:"#334155",fontSize:12,fontWeight:500},labelBgStyle:{fill:"#f8fafc",fillOpacity:.9}}});o(O)},[h,o,ee,$,j,U,V,Y,oe,T]);const W=q.useCallback((z,O)=>{const D=g().find(K=>K.id===O.id);D&&p(D.type,D.id,{position:{x:O.position.x,y:O.position.y}})},[g,p]),ne=q.useCallback(z=>{const O={...z,type:"smoothstep",animated:!1,markerEnd:{type:Ea.ArrowClosed}};o(Z=>Cb(O,Z));const{source:D,target:K}=z;pe.getState().addRelationship({from:D,to:K,description:"New relationship",technology:""})},[o]);q.useEffect(()=>(typeof window<"u"&&(window.__CREATE_CONNECTION__=ne),()=>{typeof window<"u"&&delete window.__CREATE_CONNECTION__}),[ne]),q.useEffect(()=>{const z=O=>{O.target.tagName==="INPUT"||O.target.tagName==="TEXTAREA"||(O.key==="Escape"&&(b?v(null):E()),O.key==="Home"&&!O.ctrlKey&&!O.metaKey&&R(),O.key==="Enter"&&b&&b.type!=="person"&&b.type!=="externalSystem"&&S(b.id))};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[b,v,E,R,S]);const k=q.useCallback((z,O)=>{try{const D=g().find(K=>K.id===O.id);D?(console.log("[Diagrams] Node clicked:",D.type,D.id),v(D)):(console.error("[Diagrams] Element not found for node:",O.id),v(null))}catch(D){console.error("[Diagrams] Error in onNodeClick:",D),v(null)}},[g,v]),P=q.useCallback((z,O)=>{z.stopPropagation();const D=g().find(K=>K.id===O.id);if(D){if(D.type==="shadow"&&D.targetId){const K=g().find(Z=>Z.id===D.targetId);if(K&&K.type!=="person"&&K.type!=="externalSystem"){S(K.id);return}}D.type!=="person"&&D.type!=="externalSystem"&&S(D.id)}},[g,S]),M=q.useCallback((z,O)=>{const D=h.find(K=>K.id===O.id);y(D)},[h,y]),L=q.useCallback(()=>{v(null),y(null)},[v,y]),B=q.useCallback(z=>{z.preventDefault(),z.dataTransfer.dropEffect="move"},[]),X=q.useCallback(z=>{z.preventDefault();const O=z.dataTransfer.getData("application/c4-element-type");if(!O||!u)return;const D=u.screenToFlowPosition({x:z.clientX,y:z.clientY}),K={name:`New ${O.charAt(0).toUpperCase()+O.slice(1)}`,description:"",technology:"",position:D};pe.getState().addElement(O,K)},[u]);return _.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[_.jsx(oj,{}),_.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[w==="edit"&&_.jsx(rO,{}),_.jsx("div",{className:"flex-1 relative",children:w==="tree"?_.jsx(FN,{}):w==="gantt"?_.jsx(nO,{}):_.jsxs(bw,{nodes:e,edges:i,onNodesChange:A,onEdgesChange:c,onConnect:ne,onNodeDragStop:W,onNodeClick:k,onNodeDoubleClick:P,onEdgeClick:M,onPaneClick:L,onDrop:X,onDragOver:B,onInit:d,nodeTypes:fj,fitView:!0,className:"bg-gray-50",children:[_.jsx(xw,{color:"#cbd5e1",gap:16}),_.jsx(Sw,{}),_.jsx(Tw,{nodeColor:z=>{switch(z.data.type){case"system":return"#3b82f6";case"container":return"#22c55e";case"component":return"#eab308";case"person":return"#a855f7";case"externalSystem":return"#6b7280";default:return"#94a3b8"}}})]})}),(w==="edit"||w==="gantt")&&_.jsx(sO,{})]})]})}bS.createRoot(document.getElementById("root")).render(_.jsx(q.StrictMode,{children:_.jsx(gj,{})}));
