<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23646cff' d='M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z'/%3E%3C/svg%3E" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>C4 Navigator - Interactive C4 Diagramming Tool</title>
    <script type="module">(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var Zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wf={exports:{}},Bs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function oS(){if(Ty)return Bs;Ty=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(a,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:e,type:a,key:u,ref:o!==void 0?o:null,props:c}}return Bs.Fragment=n,Bs.jsx=r,Bs.jsxs=r,Bs}var Cy;function lS(){return Cy||(Cy=1,wf.exports=oS()),wf.exports}var S=lS(),xf={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function cS(){if(Ay)return Se;Ay=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),y=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,T={};function C(O,M,K){this.props=O,this.context=M,this.refs=T,this.updater=K||E}C.prototype.isReactComponent={},C.prototype.setState=function(O,M){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,M,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function k(){}k.prototype=C.prototype;function _(O,M,K){this.props=O,this.context=M,this.refs=T,this.updater=K||E}var N=_.prototype=new k;N.constructor=_,x(N,C.prototype),N.isPureReactComponent=!0;var L=Array.isArray;function j(){}var U={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function J(O,M,K){var Q=K.ref;return{$$typeof:e,type:O,key:M,ref:Q!==void 0?Q:null,props:K}}function oe(O,M){return J(O.type,M,O.props)}function Z(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function ee(O){var M={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(K){return M[K]})}var G=/\/+/g;function z(O,M){return typeof O=="object"&&O!==null&&O.key!=null?ee(""+O.key):M.toString(36)}function P(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(j,j):(O.status="pending",O.then(function(M){O.status==="pending"&&(O.status="fulfilled",O.value=M)},function(M){O.status==="pending"&&(O.status="rejected",O.reason=M)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function R(O,M,K,Q,se){var ue=typeof O;(ue==="undefined"||ue==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(ue){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case e:case n:ce=!0;break;case p:return ce=O._init,R(ce(O._payload),M,K,Q,se)}}if(ce)return se=se(O),ce=Q===""?"."+z(O,0):Q,L(se)?(K="",ce!=null&&(K=ce.replace(G,"$&/")+"/"),R(se,M,K,"",function(Ee){return Ee})):se!=null&&(Z(se)&&(se=oe(se,K+(se.key==null||O&&O.key===se.key?"":(""+se.key).replace(G,"$&/")+"/")+ce)),M.push(se)),1;ce=0;var le=Q===""?".":Q+":";if(L(O))for(var de=0;de<O.length;de++)Q=O[de],ue=le+z(Q,de),ce+=R(Q,M,K,ue,se);else if(de=b(O),typeof de=="function")for(O=de.call(O),de=0;!(Q=O.next()).done;)Q=Q.value,ue=le+z(Q,de++),ce+=R(Q,M,K,ue,se);else if(ue==="object"){if(typeof O.then=="function")return R(P(O),M,K,Q,se);throw M=String(O),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return ce}function H(O,M,K){if(O==null)return O;var Q=[],se=0;return R(O,Q,"","",function(ue){return M.call(K,ue,se++)}),Q}function B(O){if(O._status===-1){var M=O._result;M=M(),M.then(function(K){(O._status===0||O._status===-1)&&(O._status=1,O._result=K)},function(K){(O._status===0||O._status===-1)&&(O._status=2,O._result=K)}),O._status===-1&&(O._status=0,O._result=M)}if(O._status===1)return O._result.default;throw O._result}var X=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},D={map:H,forEach:function(O,M,K){H(O,function(){M.apply(this,arguments)},K)},count:function(O){var M=0;return H(O,function(){M++}),M},toArray:function(O){return H(O,function(M){return M})||[]},only:function(O){if(!Z(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Se.Activity=v,Se.Children=D,Se.Component=C,Se.Fragment=r,Se.Profiler=o,Se.PureComponent=_,Se.StrictMode=a,Se.Suspense=g,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Se.__COMPILER_RUNTIME={__proto__:null,c:function(O){return U.H.useMemoCache(O)}},Se.cache=function(O){return function(){return O.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(O,M,K){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Q=x({},O.props),se=O.key;if(M!=null)for(ue in M.key!==void 0&&(se=""+M.key),M)!V.call(M,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&M.ref===void 0||(Q[ue]=M[ue]);var ue=arguments.length-2;if(ue===1)Q.children=K;else if(1<ue){for(var ce=Array(ue),le=0;le<ue;le++)ce[le]=arguments[le+2];Q.children=ce}return J(O.type,se,Q)},Se.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Se.createElement=function(O,M,K){var Q,se={},ue=null;if(M!=null)for(Q in M.key!==void 0&&(ue=""+M.key),M)V.call(M,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=M[Q]);var ce=arguments.length-2;if(ce===1)se.children=K;else if(1<ce){for(var le=Array(ce),de=0;de<ce;de++)le[de]=arguments[de+2];se.children=le}if(O&&O.defaultProps)for(Q in ce=O.defaultProps,ce)se[Q]===void 0&&(se[Q]=ce[Q]);return J(O,ue,se)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(O){return{$$typeof:d,render:O}},Se.isValidElement=Z,Se.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:B}},Se.memo=function(O,M){return{$$typeof:h,type:O,compare:M===void 0?null:M}},Se.startTransition=function(O){var M=U.T,K={};U.T=K;try{var Q=O(),se=U.S;se!==null&&se(K,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(j,X)}catch(ue){X(ue)}finally{M!==null&&K.types!==null&&(M.types=K.types),U.T=M}},Se.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Se.use=function(O){return U.H.use(O)},Se.useActionState=function(O,M,K){return U.H.useActionState(O,M,K)},Se.useCallback=function(O,M){return U.H.useCallback(O,M)},Se.useContext=function(O){return U.H.useContext(O)},Se.useDebugValue=function(){},Se.useDeferredValue=function(O,M){return U.H.useDeferredValue(O,M)},Se.useEffect=function(O,M){return U.H.useEffect(O,M)},Se.useEffectEvent=function(O){return U.H.useEffectEvent(O)},Se.useId=function(){return U.H.useId()},Se.useImperativeHandle=function(O,M,K){return U.H.useImperativeHandle(O,M,K)},Se.useInsertionEffect=function(O,M){return U.H.useInsertionEffect(O,M)},Se.useLayoutEffect=function(O,M){return U.H.useLayoutEffect(O,M)},Se.useMemo=function(O,M){return U.H.useMemo(O,M)},Se.useOptimistic=function(O,M){return U.H.useOptimistic(O,M)},Se.useReducer=function(O,M,K){return U.H.useReducer(O,M,K)},Se.useRef=function(O){return U.H.useRef(O)},Se.useState=function(O){return U.H.useState(O)},Se.useSyncExternalStore=function(O,M,K){return U.H.useSyncExternalStore(O,M,K)},Se.useTransition=function(){return U.H.useTransition()},Se.version="19.2.0",Se}var Ny;function yo(){return Ny||(Ny=1,xf.exports=cS()),xf.exports}var q=yo();const kv=Rv(q);var _f={exports:{}},Is={},Sf={exports:{}},Ef={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function uS(){return Oy||(Oy=1,(function(e){function n(R,H){var B=R.length;R.push(H);e:for(;0<B;){var X=B-1>>>1,D=R[X];if(0<o(D,H))R[X]=H,R[B]=D,B=X;else break e}}function r(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var H=R[0],B=R.pop();if(B!==H){R[0]=B;e:for(var X=0,D=R.length,O=D>>>1;X<O;){var M=2*(X+1)-1,K=R[M],Q=M+1,se=R[Q];if(0>o(K,B))Q<D&&0>o(se,K)?(R[X]=se,R[Q]=B,X=Q):(R[X]=K,R[M]=B,X=M);else if(Q<D&&0>o(se,B))R[X]=se,R[Q]=B,X=Q;else break e}}return H}function o(R,H){var B=R.sortIndex-H.sortIndex;return B!==0?B:R.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var g=[],h=[],p=1,v=null,y=3,b=!1,E=!1,x=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function N(R){for(var H=r(h);H!==null;){if(H.callback===null)a(h);else if(H.startTime<=R)a(h),H.sortIndex=H.expirationTime,n(g,H);else break;H=r(h)}}function L(R){if(x=!1,N(R),!E)if(r(g)!==null)E=!0,j||(j=!0,ee());else{var H=r(h);H!==null&&P(L,H.startTime-R)}}var j=!1,U=-1,V=5,J=-1;function oe(){return T?!0:!(e.unstable_now()-J<V)}function Z(){if(T=!1,j){var R=e.unstable_now();J=R;var H=!0;try{e:{E=!1,x&&(x=!1,k(U),U=-1),b=!0;var B=y;try{t:{for(N(R),v=r(g);v!==null&&!(v.expirationTime>R&&oe());){var X=v.callback;if(typeof X=="function"){v.callback=null,y=v.priorityLevel;var D=X(v.expirationTime<=R);if(R=e.unstable_now(),typeof D=="function"){v.callback=D,N(R),H=!0;break t}v===r(g)&&a(g),N(R)}else a(g);v=r(g)}if(v!==null)H=!0;else{var O=r(h);O!==null&&P(L,O.startTime-R),H=!1}}break e}finally{v=null,y=B,b=!1}H=void 0}}finally{H?ee():j=!1}}}var ee;if(typeof _=="function")ee=function(){_(Z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,z=G.port2;G.port1.onmessage=Z,ee=function(){z.postMessage(null)}}else ee=function(){C(Z,0)};function P(R,H){U=C(function(){R(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(R){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var B=y;y=H;try{return R()}finally{y=B}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(R,H){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=y;y=R;try{return H()}finally{y=B}},e.unstable_scheduleCallback=function(R,H,B){var X=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,R){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=B+D,R={id:p++,callback:H,priorityLevel:R,startTime:B,expirationTime:D,sortIndex:-1},B>X?(R.sortIndex=B,n(h,R),r(g)===null&&R===r(h)&&(x?(k(U),U=-1):x=!0,P(L,B-X))):(R.sortIndex=D,n(g,R),E||b||(E=!0,j||(j=!0,ee()))),R},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(R){var H=y;return function(){var B=y;y=H;try{return R.apply(this,arguments)}finally{y=B}}}})(Ef)),Ef}var Ry;function dS(){return Ry||(Ry=1,Sf.exports=uS()),Sf.exports}var Tf={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function fS(){if(ky)return Ct;ky=1;var e=yo();function n(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:h,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ct.createPortal=function(g,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(n(299));return c(g,h,null,p)},Ct.flushSync=function(g){var h=u.T,p=a.p;try{if(u.T=null,a.p=2,g)return g()}finally{u.T=h,a.p=p,a.d.f()}},Ct.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(g,h))},Ct.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Ct.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?a.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:b}):p==="script"&&a.d.X(g,{crossOrigin:v,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ct.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);a.d.M(g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(g)},Ct.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin);a.d.L(g,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ct.preloadModule=function(g,h){if(typeof g=="string")if(h){var p=d(h.as,h.crossOrigin);a.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(g)},Ct.requestFormReset=function(g){a.d.r(g)},Ct.unstable_batchedUpdates=function(g,h){return g(h)},Ct.useFormState=function(g,h,p){return u.H.useFormState(g,h,p)},Ct.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ct.version="19.2.0",Ct}var My;function Mv(){if(My)return Tf.exports;My=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Tf.exports=fS(),Tf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function hS(){if(jy)return Is;jy=1;var e=dS(),n=yo(),r=Mv();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function u(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function d(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(a(188))}function h(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(a(188));return i!==t?null:t}for(var s=t,l=i;;){var f=s.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===s)return g(f),t;if(m===l)return g(f),i;m=m.sibling}throw Error(a(188))}if(s.return!==l.return)s=f,l=m;else{for(var w=!1,A=f.child;A;){if(A===s){w=!0,s=f,l=m;break}if(A===l){w=!0,l=f,s=m;break}A=A.sibling}if(!w){for(A=m.child;A;){if(A===s){w=!0,s=m,l=f;break}if(A===l){w=!0,l=m,s=f;break}A=A.sibling}if(!w)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:i}function p(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=p(t),i!==null)return i;t=t.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),_=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ee(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function z(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case C:return"Profiler";case T:return"StrictMode";case L:return"Suspense";case j:return"SuspenseList";case J:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case _:return t.displayName||"Context";case k:return(t._context.displayName||"Context")+".Consumer";case N:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return i=t.displayName||null,i!==null?i:z(t.type)||"Memo";case V:i=t._payload,t=t._init;try{return z(t(i))}catch{}}return null}var P=Array.isArray,R=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},X=[],D=-1;function O(t){return{current:t}}function M(t){0>D||(t.current=X[D],X[D]=null,D--)}function K(t,i){D++,X[D]=t.current,t.current=i}var Q=O(null),se=O(null),ue=O(null),ce=O(null);function le(t,i){switch(K(ue,i),K(se,t),K(Q,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Kp(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Kp(i),t=Zp(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}M(Q),K(Q,t)}function de(){M(Q),M(se),M(ue)}function Ee(t){t.memoizedState!==null&&K(ce,t);var i=Q.current,s=Zp(i,t.type);i!==s&&(K(se,t),K(Q,s))}function _e(t){se.current===t&&(M(Q),M(se)),ce.current===t&&(M(ce),Us._currentValue=B)}var pe,xe;function Ce(t){if(pe===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);pe=i&&i[1]||"",xe=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+t+xe}var Ie=!1;function Ge(t,i){if(!t||Ie)return"";Ie=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ne){var te=ne}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(ne){te=ne}t.call(ae.prototype)}}else{try{throw Error()}catch(ne){te=ne}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),w=m[0],A=m[1];if(w&&A){var $=w.split(`
`),W=A.split(`
`);for(f=l=0;l<$.length&&!$[l].includes("DetermineComponentFrameRoot");)l++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(l===$.length||f===W.length)for(l=$.length-1,f=W.length-1;1<=l&&0<=f&&$[l]!==W[f];)f--;for(;1<=l&&0<=f;l--,f--)if($[l]!==W[f]){if(l!==1||f!==1)do if(l--,f--,0>f||$[l]!==W[f]){var ie=`
`+$[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=f);break}}}finally{Ie=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Ce(s):""}function mt(t,i){switch(t.tag){case 26:case 27:case 5:return Ce(t.type);case 16:return Ce("Lazy");case 13:return t.child!==i&&i!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Ge(t.type,!1);case 11:return Ge(t.type.render,!1);case 1:return Ge(t.type,!0);case 31:return Ce("Activity");default:return""}}function Ft(t){try{var i="",s=null;do i+=mt(t,s),s=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ln=Object.prototype.hasOwnProperty,ri=e.unstable_scheduleCallback,ai=e.unstable_cancelCallback,qi=e.unstable_shouldYield,Vi=e.unstable_requestPaint,yt=e.unstable_now,Ar=e.unstable_getCurrentPriorityLevel,kn=e.unstable_ImmediatePriority,si=e.unstable_UserBlockingPriority,Pi=e.unstable_NormalPriority,nu=e.unstable_LowPriority,Nr=e.unstable_IdlePriority,iu=e.log,ru=e.unstable_setDisableYieldValue,Gi=null,At=null;function xn(t){if(typeof iu=="function"&&ru(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Gi,t)}catch{}}var Nt=Math.clz32?Math.clz32:ou,au=Math.log,su=Math.LN2;function ou(t){return t>>>=0,t===0?32:31-(au(t)/su|0)|0}var Or=256,Rr=262144,kr=4194304;function Mn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Mr(t,i,s){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~m,l!==0?f=Mn(l):(w&=A,w!==0?f=Mn(w):s||(s=A&~t,s!==0&&(f=Mn(s))))):(A=l&~m,A!==0?f=Mn(A):w!==0?f=Mn(w):s||(s=l&~t,s!==0&&(f=Mn(s)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,s=i&-i,m>=s||m===32&&(s&4194048)!==0)?i:f}function Yi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function lu(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Co(){var t=kr;return kr<<=1,(kr&62914560)===0&&(kr=4194304),t}function Xa(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function Xi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function cu(t,i,s,l,f,m){var w=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var A=t.entanglements,$=t.expirationTimes,W=t.hiddenUpdates;for(s=w&~s;0<s;){var ie=31-Nt(s),ae=1<<ie;A[ie]=0,$[ie]=-1;var te=W[ie];if(te!==null)for(W[ie]=null,ie=0;ie<te.length;ie++){var ne=te[ie];ne!==null&&(ne.lane&=-536870913)}s&=~ae}l!==0&&Ao(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(w&~i))}function Ao(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Nt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function No(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var l=31-Nt(s),f=1<<l;f&i|t[l]&i&&(t[l]|=i),s&=~f}}function Oo(t,i){var s=i&-i;return s=(s&42)!==0?1:Ka(s),(s&(t.suspendedLanes|i))!==0?0:s}function Ka(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Za(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ro(){var t=H.p;return t!==0?t:(t=window.event,t===void 0?32:vy(t.type))}function ko(t,i){var s=H.p;try{return H.p=t,i()}finally{H.p=s}}var _n=Math.random().toString(36).slice(2),dt="__reactFiber$"+_n,Et="__reactProps$"+_n,jn="__reactContainer$"+_n,jr="__reactEvents$"+_n,Mo="__reactListeners$"+_n,uu="__reactHandles$"+_n,jo="__reactResources$"+_n,Ki="__reactMarker$"+_n;function Qa(t){delete t[dt],delete t[Et],delete t[jr],delete t[Mo],delete t[uu]}function oi(t){var i=t[dt];if(i)return i;for(var s=t.parentNode;s;){if(i=s[jn]||s[dt]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=ny(t);t!==null;){if(s=t[dt])return s;t=ny(t)}return i}t=s,s=t.parentNode}return null}function li(t){if(t=t[dt]||t[jn]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function ci(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function ui(t){var i=t[jo];return i||(i=t[jo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function rt(t){t[Ki]=!0}var Do=new Set,zo={};function Dn(t,i){di(t,i),di(t+"Capture",i)}function di(t,i){for(zo[t]=i,t=0;t<i.length;t++)Do.add(i[t])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ja={},Uo={};function fu(t){return ln.call(Uo,t)?!0:ln.call(Ja,t)?!1:du.test(t)?Uo[t]=!0:(Ja[t]=!0,!1)}function Dr(t,i,s){if(fu(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function zr(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function cn(t,i,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+l)}}function Rt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $o(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function hu(t,i,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){s=""+w,m.call(this,w)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(w){s=""+w},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ur(t){if(!t._valueTracker){var i=$o(t)?"checked":"value";t._valueTracker=hu(t,i,""+t[i])}}function Lo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),l="";return t&&(l=$o(t)?t.checked?"true":"false":t.value),t=l,t!==s?(i.setValue(t),!0):!1}function $r(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gu=/[\n"\\]/g;function Tt(t){return t.replace(gu,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Fa(t,i,s,l,f,m,w,A){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),i!=null?w==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Rt(i)):t.value!==""+Rt(i)&&(t.value=""+Rt(i)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),i!=null?Lr(t,w,Rt(i)):s!=null?Lr(t,w,Rt(s)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Rt(A):t.removeAttribute("name")}function Ho(t,i,s,l,f,m,w,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Ur(t);return}s=s!=null?""+Rt(s):"",i=i!=null?""+Rt(i):s,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w),Ur(t)}function Lr(t,i,s){i==="number"&&$r(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Hr(t,i,s,l){if(t=t.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=i.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Rt(s),i=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function Vh(t,i,s){if(i!=null&&(i=""+Rt(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+Rt(s):""}function Ph(t,i,s,l){if(i==null){if(l!=null){if(s!=null)throw Error(a(92));if(P(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),i=s}s=Rt(i),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),Ur(t)}function Br(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var nx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gh(t,i,s){var l=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,s):typeof s!="number"||s===0||nx.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function Yh(t,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&s[f]!==l&&Gh(t,f,l)}else for(var m in i)i.hasOwnProperty(m)&&Gh(t,m,i[m])}function mu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ix=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bo(t){return rx.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function zn(){}var pu=null;function yu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ir=null,qr=null;function Xh(t){var i=li(t);if(i&&(t=i.stateNode)){var s=t[Et]||null;e:switch(t=i.stateNode,i.type){case"input":if(Fa(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Tt(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var l=s[i];if(l!==t&&l.form===t.form){var f=l[Et]||null;if(!f)throw Error(a(90));Fa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)l=s[i],l.form===t.form&&Lo(l)}break e;case"textarea":Vh(t,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&Hr(t,!!s.multiple,i,!1)}}}var vu=!1;function Kh(t,i,s){if(vu)return t(i,s);vu=!0;try{var l=t(i);return l}finally{if(vu=!1,(Ir!==null||qr!==null)&&(Al(),Ir&&(i=Ir,t=qr,qr=Ir=null,Xh(i),t)))for(i=0;i<t.length;i++)Xh(t[i])}}function Wa(t,i){var s=t.stateNode;if(s===null)return null;var l=s[Et]||null;if(l===null)return null;s=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=!1;if(Un)try{var es={};Object.defineProperty(es,"passive",{get:function(){bu=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{bu=!1}var fi=null,wu=null,Io=null;function Zh(){if(Io)return Io;var t,i=wu,s=i.length,l,f="value"in fi?fi.value:fi.textContent,m=f.length;for(t=0;t<s&&i[t]===f[t];t++);var w=s-t;for(l=1;l<=w&&i[s-l]===f[m-l];l++);return Io=f.slice(t,1<l?1-l:void 0)}function qo(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Vo(){return!0}function Qh(){return!1}function kt(t){function i(s,l,f,m,w){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Vo:Qh,this.isPropagationStopped=Qh,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Vo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Vo)},persist:function(){},isPersistent:Vo}),i}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=kt(Zi),ts=v({},Zi,{view:0,detail:0}),ax=kt(ts),xu,_u,ns,Go=v({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(xu=t.screenX-ns.screenX,_u=t.screenY-ns.screenY):_u=xu=0,ns=t),xu)},movementY:function(t){return"movementY"in t?t.movementY:_u}}),Jh=kt(Go),sx=v({},Go,{dataTransfer:0}),ox=kt(sx),lx=v({},ts,{relatedTarget:0}),Su=kt(lx),cx=v({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),ux=kt(cx),dx=v({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fx=kt(dx),hx=v({},Zi,{data:0}),Fh=kt(hx),gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},px={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yx(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=px[t])?!!i[t]:!1}function Eu(){return yx}var vx=v({},ts,{key:function(t){if(t.key){var i=gx[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=qo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eu,charCode:function(t){return t.type==="keypress"?qo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bx=kt(vx),wx=v({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wh=kt(wx),xx=v({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eu}),_x=kt(xx),Sx=v({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ex=kt(Sx),Tx=v({},Go,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cx=kt(Tx),Ax=v({},Zi,{newState:0,oldState:0}),Nx=kt(Ax),Ox=[9,13,27,32],Tu=Un&&"CompositionEvent"in window,is=null;Un&&"documentMode"in document&&(is=document.documentMode);var Rx=Un&&"TextEvent"in window&&!is,eg=Un&&(!Tu||is&&8<is&&11>=is),tg=" ",ng=!1;function ig(t,i){switch(t){case"keyup":return Ox.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vr=!1;function kx(t,i){switch(t){case"compositionend":return rg(i);case"keypress":return i.which!==32?null:(ng=!0,tg);case"textInput":return t=i.data,t===tg&&ng?null:t;default:return null}}function Mx(t,i){if(Vr)return t==="compositionend"||!Tu&&ig(t,i)?(t=Zh(),Io=wu=fi=null,Vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return eg&&i.locale!=="ko"?null:i.data;default:return null}}var jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ag(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!jx[t.type]:i==="textarea"}function sg(t,i,s,l){Ir?qr?qr.push(l):qr=[l]:Ir=l,i=Dl(i,"onChange"),0<i.length&&(s=new Po("onChange","change",null,s,l),t.push({event:s,listeners:i}))}var rs=null,as=null;function Dx(t){qp(t,0)}function Yo(t){var i=ci(t);if(Lo(i))return t}function og(t,i){if(t==="change")return i}var lg=!1;if(Un){var Cu;if(Un){var Au="oninput"in document;if(!Au){var cg=document.createElement("div");cg.setAttribute("oninput","return;"),Au=typeof cg.oninput=="function"}Cu=Au}else Cu=!1;lg=Cu&&(!document.documentMode||9<document.documentMode)}function ug(){rs&&(rs.detachEvent("onpropertychange",dg),as=rs=null)}function dg(t){if(t.propertyName==="value"&&Yo(as)){var i=[];sg(i,as,t,yu(t)),Kh(Dx,i)}}function zx(t,i,s){t==="focusin"?(ug(),rs=i,as=s,rs.attachEvent("onpropertychange",dg)):t==="focusout"&&ug()}function Ux(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yo(as)}function $x(t,i){if(t==="click")return Yo(i)}function Lx(t,i){if(t==="input"||t==="change")return Yo(i)}function Hx(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Bt=typeof Object.is=="function"?Object.is:Hx;function ss(t,i){if(Bt(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),l=Object.keys(i);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!ln.call(i,f)||!Bt(t[f],i[f]))return!1}return!0}function fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hg(t,i){var s=fg(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=i&&l>=i)return{node:s,offset:i-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=fg(s)}}function gg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?gg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function mg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=$r(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=$r(t.document)}return i}function Nu(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Bx=Un&&"documentMode"in document&&11>=document.documentMode,Pr=null,Ou=null,os=null,Ru=!1;function pg(t,i,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ru||Pr==null||Pr!==$r(l)||(l=Pr,"selectionStart"in l&&Nu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),os&&ss(os,l)||(os=l,l=Dl(Ou,"onSelect"),0<l.length&&(i=new Po("onSelect","select",null,i,s),t.push({event:i,listeners:l}),i.target=Pr)))}function Qi(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var Gr={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionrun:Qi("Transition","TransitionRun"),transitionstart:Qi("Transition","TransitionStart"),transitioncancel:Qi("Transition","TransitionCancel"),transitionend:Qi("Transition","TransitionEnd")},ku={},yg={};Un&&(yg=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function Ji(t){if(ku[t])return ku[t];if(!Gr[t])return t;var i=Gr[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in yg)return ku[t]=i[s];return t}var vg=Ji("animationend"),bg=Ji("animationiteration"),wg=Ji("animationstart"),Ix=Ji("transitionrun"),qx=Ji("transitionstart"),Vx=Ji("transitioncancel"),xg=Ji("transitionend"),_g=new Map,Mu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mu.push("scrollEnd");function un(t,i){_g.set(t,i),Dn(i,[t])}var Xo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Wt=[],Yr=0,ju=0;function Ko(){for(var t=Yr,i=ju=Yr=0;i<t;){var s=Wt[i];Wt[i++]=null;var l=Wt[i];Wt[i++]=null;var f=Wt[i];Wt[i++]=null;var m=Wt[i];if(Wt[i++]=null,l!==null&&f!==null){var w=l.pending;w===null?f.next=f:(f.next=w.next,w.next=f),l.pending=f}m!==0&&Sg(s,f,m)}}function Zo(t,i,s,l){Wt[Yr++]=t,Wt[Yr++]=i,Wt[Yr++]=s,Wt[Yr++]=l,ju|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Du(t,i,s,l){return Zo(t,i,s,l),Qo(t)}function Fi(t,i){return Zo(t,null,null,i),Qo(t)}function Sg(t,i,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var f=!1,m=t.return;m!==null;)m.childLanes|=s,l=m.alternate,l!==null&&(l.childLanes|=s),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&i!==null&&(f=31-Nt(s),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=s|536870912),m):null}function Qo(t){if(50<Os)throw Os=0,Vd=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Xr={};function Px(t,i,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,i,s,l){return new Px(t,i,s,l)}function zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $n(t,i){var s=t.alternate;return s===null?(s=It(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Eg(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Jo(t,i,s,l,f,m){var w=0;if(l=t,typeof t=="function")zu(t)&&(w=1);else if(typeof t=="string")w=Z_(t,s,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case J:return t=It(31,s,i,f),t.elementType=J,t.lanes=m,t;case x:return Wi(s.children,f,m,i);case T:w=8,f|=24;break;case C:return t=It(12,s,i,f|2),t.elementType=C,t.lanes=m,t;case L:return t=It(13,s,i,f),t.elementType=L,t.lanes=m,t;case j:return t=It(19,s,i,f),t.elementType=j,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:w=10;break e;case k:w=9;break e;case N:w=11;break e;case U:w=14;break e;case V:w=16,l=null;break e}w=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=It(w,s,i,f),i.elementType=t,i.type=l,i.lanes=m,i}function Wi(t,i,s,l){return t=It(7,t,l,i),t.lanes=s,t}function Uu(t,i,s){return t=It(6,t,null,i),t.lanes=s,t}function Tg(t){var i=It(18,null,null,0);return i.stateNode=t,i}function $u(t,i,s){return i=It(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Cg=new WeakMap;function en(t,i){if(typeof t=="object"&&t!==null){var s=Cg.get(t);return s!==void 0?s:(i={value:t,source:i,stack:Ft(i)},Cg.set(t,i),i)}return{value:t,source:i,stack:Ft(i)}}var Kr=[],Zr=0,Fo=null,ls=0,tn=[],nn=0,hi=null,Sn=1,En="";function Ln(t,i){Kr[Zr++]=ls,Kr[Zr++]=Fo,Fo=t,ls=i}function Ag(t,i,s){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hi,hi=t;var l=Sn;t=En;var f=32-Nt(l)-1;l&=~(1<<f),s+=1;var m=32-Nt(i)+f;if(30<m){var w=f-f%5;m=(l&(1<<w)-1).toString(32),l>>=w,f-=w,Sn=1<<32-Nt(i)+f|s<<f|l,En=m+t}else Sn=1<<m|s<<f|l,En=t}function Lu(t){t.return!==null&&(Ln(t,1),Ag(t,1,0))}function Hu(t){for(;t===Fo;)Fo=Kr[--Zr],Kr[Zr]=null,ls=Kr[--Zr],Kr[Zr]=null;for(;t===hi;)hi=tn[--nn],tn[nn]=null,En=tn[--nn],tn[nn]=null,Sn=tn[--nn],tn[nn]=null}function Ng(t,i){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hi,Sn=i.id,En=i.overflow,hi=t}var vt=null,Ke=null,je=!1,gi=null,rn=!1,Bu=Error(a(519));function mi(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cs(en(i,t)),Bu}function Og(t){var i=t.stateNode,s=t.type,l=t.memoizedProps;switch(i[dt]=t,i[Et]=l,s){case"dialog":Re("cancel",i),Re("close",i);break;case"iframe":case"object":case"embed":Re("load",i);break;case"video":case"audio":for(s=0;s<ks.length;s++)Re(ks[s],i);break;case"source":Re("error",i);break;case"img":case"image":case"link":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"input":Re("invalid",i),Ho(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Re("invalid",i);break;case"textarea":Re("invalid",i),Ph(i,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||l.suppressHydrationWarning===!0||Yp(i.textContent,s)?(l.popover!=null&&(Re("beforetoggle",i),Re("toggle",i)),l.onScroll!=null&&Re("scroll",i),l.onScrollEnd!=null&&Re("scrollend",i),l.onClick!=null&&(i.onclick=zn),i=!0):i=!1,i||mi(t,!0)}function Rg(t){for(vt=t.return;vt;)switch(vt.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:vt=vt.return}}function Qr(t){if(t!==vt)return!1;if(!je)return Rg(t),je=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||af(t.type,t.memoizedProps)),s=!s),s&&Ke&&mi(t),Rg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ke=ty(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ke=ty(t)}else i===27?(i=Ke,Oi(t.type)?(t=uf,uf=null,Ke=t):Ke=i):Ke=vt?sn(t.stateNode.nextSibling):null;return!0}function er(){Ke=vt=null,je=!1}function Iu(){var t=gi;return t!==null&&(zt===null?zt=t:zt.push.apply(zt,t),gi=null),t}function cs(t){gi===null?gi=[t]:gi.push(t)}var qu=O(null),tr=null,Hn=null;function pi(t,i,s){K(qu,i._currentValue),i._currentValue=s}function Bn(t){t._currentValue=qu.current,M(qu)}function Vu(t,i,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===s)break;t=t.return}}function Pu(t,i,s,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var w=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var $=0;$<i.length;$++)if(A.context===i[$]){m.lanes|=s,A=m.alternate,A!==null&&(A.lanes|=s),Vu(m.return,s,t),l||(w=null);break e}m=A.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(a(341));w.lanes|=s,m=w.alternate,m!==null&&(m.lanes|=s),Vu(w,s,t),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===t){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Jr(t,i,s,l){t=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(a(387));if(w=w.memoizedProps,w!==null){var A=f.type;Bt(f.pendingProps.value,w.value)||(t!==null?t.push(A):t=[A])}}else if(f===ce.current){if(w=f.alternate,w===null)throw Error(a(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Us):t=[Us])}f=f.return}t!==null&&Pu(i,t,s,l),i.flags|=262144}function Wo(t){for(t=t.firstContext;t!==null;){if(!Bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function nr(t){tr=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return kg(tr,t)}function el(t,i){return tr===null&&nr(t),kg(t,i)}function kg(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Hn===null){if(t===null)throw Error(a(308));Hn=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Hn=Hn.next=i;return s}var Gx=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},Yx=e.unstable_scheduleCallback,Xx=e.unstable_NormalPriority,at={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gu(){return{controller:new Gx,data:new Map,refCount:0}}function us(t){t.refCount--,t.refCount===0&&Yx(Xx,function(){t.controller.abort()})}var ds=null,Yu=0,Fr=0,Wr=null;function Kx(t,i){if(ds===null){var s=ds=[];Yu=0,Fr=Zd(),Wr={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Yu++,i.then(Mg,Mg),i}function Mg(){if(--Yu===0&&ds!==null){Wr!==null&&(Wr.status="fulfilled");var t=ds;ds=null,Fr=0,Wr=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Zx(t,i){var s=[],l={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),l}var jg=R.S;R.S=function(t,i){pp=yt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Kx(t,i),jg!==null&&jg(t,i)};var ir=O(null);function Xu(){var t=ir.current;return t!==null?t:Ye.pooledCache}function tl(t,i){i===null?K(ir,ir.current):K(ir,i.pool)}function Dg(){var t=Xu();return t===null?null:{parent:at._currentValue,pool:t}}var ea=Error(a(460)),Ku=Error(a(474)),nl=Error(a(542)),il={then:function(){}};function zg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ug(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(zn,zn),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Lg(t),t;default:if(typeof i.status=="string")i.then(zn,zn);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Lg(t),t}throw ar=i,ea}}function rr(t){try{var i=t._init;return i(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ar=s,ea):s}}var ar=null;function $g(){if(ar===null)throw Error(a(459));var t=ar;return ar=null,t}function Lg(t){if(t===ea||t===nl)throw Error(a(483))}var ta=null,fs=0;function rl(t){var i=fs;return fs+=1,ta===null&&(ta=[]),Ug(ta,t,i)}function hs(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function al(t,i){throw i.$$typeof===y?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Hg(t){function i(Y,I){if(t){var F=Y.deletions;F===null?(Y.deletions=[I],Y.flags|=16):F.push(I)}}function s(Y,I){if(!t)return null;for(;I!==null;)i(Y,I),I=I.sibling;return null}function l(Y){for(var I=new Map;Y!==null;)Y.key!==null?I.set(Y.key,Y):I.set(Y.index,Y),Y=Y.sibling;return I}function f(Y,I){return Y=$n(Y,I),Y.index=0,Y.sibling=null,Y}function m(Y,I,F){return Y.index=F,t?(F=Y.alternate,F!==null?(F=F.index,F<I?(Y.flags|=67108866,I):F):(Y.flags|=67108866,I)):(Y.flags|=1048576,I)}function w(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function A(Y,I,F,re){return I===null||I.tag!==6?(I=Uu(F,Y.mode,re),I.return=Y,I):(I=f(I,F),I.return=Y,I)}function $(Y,I,F,re){var ye=F.type;return ye===x?ie(Y,I,F.props.children,re,F.key):I!==null&&(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===V&&rr(ye)===I.type)?(I=f(I,F.props),hs(I,F),I.return=Y,I):(I=Jo(F.type,F.key,F.props,null,Y.mode,re),hs(I,F),I.return=Y,I)}function W(Y,I,F,re){return I===null||I.tag!==4||I.stateNode.containerInfo!==F.containerInfo||I.stateNode.implementation!==F.implementation?(I=$u(F,Y.mode,re),I.return=Y,I):(I=f(I,F.children||[]),I.return=Y,I)}function ie(Y,I,F,re,ye){return I===null||I.tag!==7?(I=Wi(F,Y.mode,re,ye),I.return=Y,I):(I=f(I,F),I.return=Y,I)}function ae(Y,I,F){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Uu(""+I,Y.mode,F),I.return=Y,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return F=Jo(I.type,I.key,I.props,null,Y.mode,F),hs(F,I),F.return=Y,F;case E:return I=$u(I,Y.mode,F),I.return=Y,I;case V:return I=rr(I),ae(Y,I,F)}if(P(I)||ee(I))return I=Wi(I,Y.mode,F,null),I.return=Y,I;if(typeof I.then=="function")return ae(Y,rl(I),F);if(I.$$typeof===_)return ae(Y,el(Y,I),F);al(Y,I)}return null}function te(Y,I,F,re){var ye=I!==null?I.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ye!==null?null:A(Y,I,""+F,re);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return F.key===ye?$(Y,I,F,re):null;case E:return F.key===ye?W(Y,I,F,re):null;case V:return F=rr(F),te(Y,I,F,re)}if(P(F)||ee(F))return ye!==null?null:ie(Y,I,F,re,null);if(typeof F.then=="function")return te(Y,I,rl(F),re);if(F.$$typeof===_)return te(Y,I,el(Y,F),re);al(Y,F)}return null}function ne(Y,I,F,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Y=Y.get(F)||null,A(I,Y,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return Y=Y.get(re.key===null?F:re.key)||null,$(I,Y,re,ye);case E:return Y=Y.get(re.key===null?F:re.key)||null,W(I,Y,re,ye);case V:return re=rr(re),ne(Y,I,F,re,ye)}if(P(re)||ee(re))return Y=Y.get(F)||null,ie(I,Y,re,ye,null);if(typeof re.then=="function")return ne(Y,I,F,rl(re),ye);if(re.$$typeof===_)return ne(Y,I,F,el(I,re),ye);al(I,re)}return null}function fe(Y,I,F,re){for(var ye=null,ze=null,ge=I,Ne=I=0,Me=null;ge!==null&&Ne<F.length;Ne++){ge.index>Ne?(Me=ge,ge=null):Me=ge.sibling;var Ue=te(Y,ge,F[Ne],re);if(Ue===null){ge===null&&(ge=Me);break}t&&ge&&Ue.alternate===null&&i(Y,ge),I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue,ge=Me}if(Ne===F.length)return s(Y,ge),je&&Ln(Y,Ne),ye;if(ge===null){for(;Ne<F.length;Ne++)ge=ae(Y,F[Ne],re),ge!==null&&(I=m(ge,I,Ne),ze===null?ye=ge:ze.sibling=ge,ze=ge);return je&&Ln(Y,Ne),ye}for(ge=l(ge);Ne<F.length;Ne++)Me=ne(ge,Y,Ne,F[Ne],re),Me!==null&&(t&&Me.alternate!==null&&ge.delete(Me.key===null?Ne:Me.key),I=m(Me,I,Ne),ze===null?ye=Me:ze.sibling=Me,ze=Me);return t&&ge.forEach(function(Di){return i(Y,Di)}),je&&Ln(Y,Ne),ye}function ve(Y,I,F,re){if(F==null)throw Error(a(151));for(var ye=null,ze=null,ge=I,Ne=I=0,Me=null,Ue=F.next();ge!==null&&!Ue.done;Ne++,Ue=F.next()){ge.index>Ne?(Me=ge,ge=null):Me=ge.sibling;var Di=te(Y,ge,Ue.value,re);if(Di===null){ge===null&&(ge=Me);break}t&&ge&&Di.alternate===null&&i(Y,ge),I=m(Di,I,Ne),ze===null?ye=Di:ze.sibling=Di,ze=Di,ge=Me}if(Ue.done)return s(Y,ge),je&&Ln(Y,Ne),ye;if(ge===null){for(;!Ue.done;Ne++,Ue=F.next())Ue=ae(Y,Ue.value,re),Ue!==null&&(I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue);return je&&Ln(Y,Ne),ye}for(ge=l(ge);!Ue.done;Ne++,Ue=F.next())Ue=ne(ge,Y,Ne,Ue.value,re),Ue!==null&&(t&&Ue.alternate!==null&&ge.delete(Ue.key===null?Ne:Ue.key),I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue);return t&&ge.forEach(function(sS){return i(Y,sS)}),je&&Ln(Y,Ne),ye}function Pe(Y,I,F,re){if(typeof F=="object"&&F!==null&&F.type===x&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case b:e:{for(var ye=F.key;I!==null;){if(I.key===ye){if(ye=F.type,ye===x){if(I.tag===7){s(Y,I.sibling),re=f(I,F.props.children),re.return=Y,Y=re;break e}}else if(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===V&&rr(ye)===I.type){s(Y,I.sibling),re=f(I,F.props),hs(re,F),re.return=Y,Y=re;break e}s(Y,I);break}else i(Y,I);I=I.sibling}F.type===x?(re=Wi(F.props.children,Y.mode,re,F.key),re.return=Y,Y=re):(re=Jo(F.type,F.key,F.props,null,Y.mode,re),hs(re,F),re.return=Y,Y=re)}return w(Y);case E:e:{for(ye=F.key;I!==null;){if(I.key===ye)if(I.tag===4&&I.stateNode.containerInfo===F.containerInfo&&I.stateNode.implementation===F.implementation){s(Y,I.sibling),re=f(I,F.children||[]),re.return=Y,Y=re;break e}else{s(Y,I);break}else i(Y,I);I=I.sibling}re=$u(F,Y.mode,re),re.return=Y,Y=re}return w(Y);case V:return F=rr(F),Pe(Y,I,F,re)}if(P(F))return fe(Y,I,F,re);if(ee(F)){if(ye=ee(F),typeof ye!="function")throw Error(a(150));return F=ye.call(F),ve(Y,I,F,re)}if(typeof F.then=="function")return Pe(Y,I,rl(F),re);if(F.$$typeof===_)return Pe(Y,I,el(Y,F),re);al(Y,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,I!==null&&I.tag===6?(s(Y,I.sibling),re=f(I,F),re.return=Y,Y=re):(s(Y,I),re=Uu(F,Y.mode,re),re.return=Y,Y=re),w(Y)):s(Y,I)}return function(Y,I,F,re){try{fs=0;var ye=Pe(Y,I,F,re);return ta=null,ye}catch(ge){if(ge===ea||ge===nl)throw ge;var ze=It(29,ge,null,Y.mode);return ze.lanes=re,ze.return=Y,ze}finally{}}}var sr=Hg(!0),Bg=Hg(!1),yi=!1;function Zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qu(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function bi(t,i,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Qo(t),Sg(t,null,s),i}return Zo(t,l,i,s),Qo(t)}function gs(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,No(t,s)}}function Ju(t,i){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var w={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?f=m=w:m=m.next=w,s=s.next}while(s!==null);m===null?f=m=i:m=m.next=i}else f=m=i;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var Fu=!1;function ms(){if(Fu){var t=Wr;if(t!==null)throw t}}function ps(t,i,s,l){Fu=!1;var f=t.updateQueue;yi=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var $=A,W=$.next;$.next=null,w===null?m=W:w.next=W,w=$;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==w&&(A===null?ie.firstBaseUpdate=W:A.next=W,ie.lastBaseUpdate=$))}if(m!==null){var ae=f.baseState;w=0,ie=W=$=null,A=m;do{var te=A.lane&-536870913,ne=te!==A.lane;if(ne?(ke&te)===te:(l&te)===te){te!==0&&te===Fr&&(Fu=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var fe=t,ve=A;te=i;var Pe=s;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){ae=fe.call(Pe,ae,te);break e}ae=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,te=typeof fe=="function"?fe.call(Pe,ae,te):fe,te==null)break e;ae=v({},ae,te);break e;case 2:yi=!0}}te=A.callback,te!==null&&(t.flags|=64,ne&&(t.flags|=8192),ne=f.callbacks,ne===null?f.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(W=ie=ne,$=ae):ie=ie.next=ne,w|=te;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ne=A,A=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);ie===null&&($=ae),f.baseState=$,f.firstBaseUpdate=W,f.lastBaseUpdate=ie,m===null&&(f.shared.lanes=0),Ei|=w,t.lanes=w,t.memoizedState=ae}}function Ig(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function qg(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Ig(s[t],i)}var na=O(null),sl=O(0);function Vg(t,i){t=Zn,K(sl,t),K(na,i),Zn=t|i.baseLanes}function Wu(){K(sl,Zn),K(na,na.current)}function ed(){Zn=sl.current,M(na),M(sl)}var qt=O(null),an=null;function wi(t){var i=t.alternate;K(nt,nt.current&1),K(qt,t),an===null&&(i===null||na.current!==null||i.memoizedState!==null)&&(an=t)}function td(t){K(nt,nt.current),K(qt,t),an===null&&(an=t)}function Pg(t){t.tag===22?(K(nt,nt.current),K(qt,t),an===null&&(an=t)):xi()}function xi(){K(nt,nt.current),K(qt,qt.current)}function Vt(t){M(qt),an===t&&(an=null),M(nt)}var nt=O(0);function ol(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||lf(s)||cf(s)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var In=0,Ae=null,qe=null,st=null,ll=!1,ia=!1,or=!1,cl=0,ys=0,ra=null,Qx=0;function We(){throw Error(a(321))}function nd(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!Bt(t[s],i[s]))return!1;return!0}function id(t,i,s,l,f,m){return In=m,Ae=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=t===null||t.memoizedState===null?Am:vd,or=!1,m=s(l,f),or=!1,ia&&(m=Yg(i,s,l,f)),Gg(t),m}function Gg(t){R.H=ws;var i=qe!==null&&qe.next!==null;if(In=0,st=qe=Ae=null,ll=!1,ys=0,ra=null,i)throw Error(a(300));t===null||ot||(t=t.dependencies,t!==null&&Wo(t)&&(ot=!0))}function Yg(t,i,s,l){Ae=t;var f=0;do{if(ia&&(ra=null),ys=0,ia=!1,25<=f)throw Error(a(301));if(f+=1,st=qe=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}R.H=Nm,m=i(s,l)}while(ia);return m}function Jx(){var t=R.H,i=t.useState()[0];return i=typeof i.then=="function"?vs(i):i,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(Ae.flags|=1024),i}function rd(){var t=cl!==0;return cl=0,t}function ad(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function sd(t){if(ll){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ll=!1}In=0,st=qe=Ae=null,ia=!1,ys=cl=0,ra=null}function Ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ae.memoizedState=st=t:st=st.next=t,st}function it(){if(qe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var i=st===null?Ae.memoizedState:st.next;if(i!==null)st=i,qe=t;else{if(t===null)throw Ae.alternate===null?Error(a(467)):Error(a(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},st===null?Ae.memoizedState=st=t:st=st.next=t}return st}function ul(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vs(t){var i=ys;return ys+=1,ra===null&&(ra=[]),t=Ug(ra,t,i),i=Ae,(st===null?i.memoizedState:st.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?Am:vd),t}function dl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vs(t);if(t.$$typeof===_)return bt(t)}throw Error(a(438,String(t)))}function od(t){var i=null,s=Ae.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var l=Ae.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=ul(),Ae.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),l=0;l<t;l++)s[l]=oe;return i.index++,s}function qn(t,i){return typeof i=="function"?i(t):i}function fl(t){var i=it();return ld(i,qe,t)}function ld(t,i,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}i.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{i=f.next;var A=w=null,$=null,W=i,ie=!1;do{var ae=W.lane&-536870913;if(ae!==W.lane?(ke&ae)===ae:(In&ae)===ae){var te=W.revertLane;if(te===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ae===Fr&&(ie=!0);else if((In&te)===te){W=W.next,te===Fr&&(ie=!0);continue}else ae={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},$===null?(A=$=ae,w=m):$=$.next=ae,Ae.lanes|=te,Ei|=te;ae=W.action,or&&s(m,ae),m=W.hasEagerState?W.eagerState:s(m,ae)}else te={lane:ae,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},$===null?(A=$=te,w=m):$=$.next=te,Ae.lanes|=ae,Ei|=ae;W=W.next}while(W!==null&&W!==i);if($===null?w=m:$.next=A,!Bt(m,t.memoizedState)&&(ot=!0,ie&&(s=Wr,s!==null)))throw s;t.memoizedState=m,t.baseState=w,t.baseQueue=$,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function cd(t){var i=it(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,f=s.pending,m=i.memoizedState;if(f!==null){s.pending=null;var w=f=f.next;do m=t(m,w.action),w=w.next;while(w!==f);Bt(m,i.memoizedState)||(ot=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),s.lastRenderedState=m}return[m,l]}function Xg(t,i,s){var l=Ae,f=it(),m=je;if(m){if(s===void 0)throw Error(a(407));s=s()}else s=i();var w=!Bt((qe||f).memoizedState,s);if(w&&(f.memoizedState=s,ot=!0),f=f.queue,fd(Qg.bind(null,l,f,t),[t]),f.getSnapshot!==i||w||st!==null&&st.memoizedState.tag&1){if(l.flags|=2048,aa(9,{destroy:void 0},Zg.bind(null,l,f,s,i),null),Ye===null)throw Error(a(349));m||(In&127)!==0||Kg(l,i,s)}return s}function Kg(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=Ae.updateQueue,i===null?(i=ul(),Ae.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function Zg(t,i,s,l){i.value=s,i.getSnapshot=l,Jg(i)&&Fg(t)}function Qg(t,i,s){return s(function(){Jg(i)&&Fg(t)})}function Jg(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!Bt(t,s)}catch{return!0}}function Fg(t){var i=Fi(t,2);i!==null&&Ut(i,t,2)}function ud(t){var i=Ot();if(typeof t=="function"){var s=t;if(t=s(),or){xn(!0);try{s()}finally{xn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:t},i}function Wg(t,i,s,l){return t.baseState=s,ld(t,qe,typeof l=="function"?l:qn)}function Fx(t,i,s,l,f){if(ml(t))throw Error(a(485));if(t=i.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};R.T!==null?s(!0):m.isTransition=!1,l(m),s=i.pending,s===null?(m.next=i.pending=m,em(i,m)):(m.next=s.next,i.pending=s.next=m)}}function em(t,i){var s=i.action,l=i.payload,f=t.state;if(i.isTransition){var m=R.T,w={};R.T=w;try{var A=s(f,l),$=R.S;$!==null&&$(w,A),tm(t,i,A)}catch(W){dd(t,i,W)}finally{m!==null&&w.types!==null&&(m.types=w.types),R.T=m}}else try{m=s(f,l),tm(t,i,m)}catch(W){dd(t,i,W)}}function tm(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){nm(t,i,l)},function(l){return dd(t,i,l)}):nm(t,i,s)}function nm(t,i,s){i.status="fulfilled",i.value=s,im(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,em(t,s)))}function dd(t,i,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=s,im(i),i=i.next;while(i!==l)}t.action=null}function im(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function rm(t,i){return i}function am(t,i){if(je){var s=Ye.formState;if(s!==null){e:{var l=Ae;if(je){if(Ke){t:{for(var f=Ke,m=rn;f.nodeType!==8;){if(!m){f=null;break t}if(f=sn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ke=sn(f.nextSibling),l=f.data==="F!";break e}}mi(l)}l=!1}l&&(i=s[0])}}return s=Ot(),s.memoizedState=s.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:i},s.queue=l,s=Em.bind(null,Ae,l),l.dispatch=s,l=ud(!1),m=yd.bind(null,Ae,!1,l.queue),l=Ot(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,s=Fx.bind(null,Ae,f,m,s),f.dispatch=s,l.memoizedState=t,[i,s,!1]}function sm(t){var i=it();return om(i,qe,t)}function om(t,i,s){if(i=ld(t,i,rm)[0],t=fl(qn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=vs(i)}catch(w){throw w===ea?nl:w}else l=i;i=it();var f=i.queue,m=f.dispatch;return s!==i.memoizedState&&(Ae.flags|=2048,aa(9,{destroy:void 0},Wx.bind(null,f,s),null)),[l,m,t]}function Wx(t,i){t.action=i}function lm(t){var i=it(),s=qe;if(s!==null)return om(i,s,t);it(),i=i.memoizedState,s=it();var l=s.queue.dispatch;return s.memoizedState=t,[i,l,!1]}function aa(t,i,s,l){return t={tag:t,create:s,deps:l,inst:i,next:null},i=Ae.updateQueue,i===null&&(i=ul(),Ae.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,i.lastEffect=t),t}function cm(){return it().memoizedState}function hl(t,i,s,l){var f=Ot();Ae.flags|=t,f.memoizedState=aa(1|i,{destroy:void 0},s,l===void 0?null:l)}function gl(t,i,s,l){var f=it();l=l===void 0?null:l;var m=f.memoizedState.inst;qe!==null&&l!==null&&nd(l,qe.memoizedState.deps)?f.memoizedState=aa(i,m,s,l):(Ae.flags|=t,f.memoizedState=aa(1|i,m,s,l))}function um(t,i){hl(8390656,8,t,i)}function fd(t,i){gl(2048,8,t,i)}function e_(t){Ae.flags|=4;var i=Ae.updateQueue;if(i===null)i=ul(),Ae.updateQueue=i,i.events=[t];else{var s=i.events;s===null?i.events=[t]:s.push(t)}}function dm(t){var i=it().memoizedState;return e_({ref:i,nextImpl:t}),function(){if(($e&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function fm(t,i){return gl(4,2,t,i)}function hm(t,i){return gl(4,4,t,i)}function gm(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function mm(t,i,s){s=s!=null?s.concat([t]):null,gl(4,4,gm.bind(null,i,t),s)}function hd(){}function pm(t,i){var s=it();i=i===void 0?null:i;var l=s.memoizedState;return i!==null&&nd(i,l[1])?l[0]:(s.memoizedState=[t,i],t)}function ym(t,i){var s=it();i=i===void 0?null:i;var l=s.memoizedState;if(i!==null&&nd(i,l[1]))return l[0];if(l=t(),or){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,i],l}function gd(t,i,s){return s===void 0||(In&1073741824)!==0&&(ke&261930)===0?t.memoizedState=i:(t.memoizedState=s,t=vp(),Ae.lanes|=t,Ei|=t,s)}function vm(t,i,s,l){return Bt(s,i)?s:na.current!==null?(t=gd(t,s,l),Bt(t,i)||(ot=!0),t):(In&42)===0||(In&1073741824)!==0&&(ke&261930)===0?(ot=!0,t.memoizedState=s):(t=vp(),Ae.lanes|=t,Ei|=t,i)}function bm(t,i,s,l,f){var m=H.p;H.p=m!==0&&8>m?m:8;var w=R.T,A={};R.T=A,yd(t,!1,i,s);try{var $=f(),W=R.S;if(W!==null&&W(A,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ie=Zx($,l);bs(t,i,ie,Yt(t))}else bs(t,i,l,Yt(t))}catch(ae){bs(t,i,{then:function(){},status:"rejected",reason:ae},Yt())}finally{H.p=m,w!==null&&A.types!==null&&(w.types=A.types),R.T=w}}function t_(){}function md(t,i,s,l){if(t.tag!==5)throw Error(a(476));var f=wm(t).queue;bm(t,f,i,B,s===null?t_:function(){return xm(t),s(l)})}function wm(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:B},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function xm(t){var i=wm(t);i.next===null&&(i=t.alternate.memoizedState),bs(t,i.next.queue,{},Yt())}function pd(){return bt(Us)}function _m(){return it().memoizedState}function Sm(){return it().memoizedState}function n_(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=Yt();t=vi(s);var l=bi(i,t,s);l!==null&&(Ut(l,i,s),gs(l,i,s)),i={cache:Gu()},t.payload=i;return}i=i.return}}function i_(t,i,s){var l=Yt();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ml(t)?Tm(i,s):(s=Du(t,i,s,l),s!==null&&(Ut(s,t,l),Cm(s,i,l)))}function Em(t,i,s){var l=Yt();bs(t,i,s,l)}function bs(t,i,s,l){var f={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(ml(t))Tm(i,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,A=m(w,s);if(f.hasEagerState=!0,f.eagerState=A,Bt(A,w))return Zo(t,i,f,0),Ye===null&&Ko(),!1}catch{}finally{}if(s=Du(t,i,f,l),s!==null)return Ut(s,t,l),Cm(s,i,l),!0}return!1}function yd(t,i,s,l){if(l={lane:2,revertLane:Zd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ml(t)){if(i)throw Error(a(479))}else i=Du(t,s,l,2),i!==null&&Ut(i,t,2)}function ml(t){var i=t.alternate;return t===Ae||i!==null&&i===Ae}function Tm(t,i){ia=ll=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Cm(t,i,s){if((s&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,No(t,s)}}var ws={readContext:bt,use:dl,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};ws.useEffectEvent=We;var Am={readContext:bt,use:dl,useCallback:function(t,i){return Ot().memoizedState=[t,i===void 0?null:i],t},useContext:bt,useEffect:um,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,hl(4194308,4,gm.bind(null,i,t),s)},useLayoutEffect:function(t,i){return hl(4194308,4,t,i)},useInsertionEffect:function(t,i){hl(4,2,t,i)},useMemo:function(t,i){var s=Ot();i=i===void 0?null:i;var l=t();if(or){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,i],l},useReducer:function(t,i,s){var l=Ot();if(s!==void 0){var f=s(i);if(or){xn(!0);try{s(i)}finally{xn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=i_.bind(null,Ae,t),[l.memoizedState,t]},useRef:function(t){var i=Ot();return t={current:t},i.memoizedState=t},useState:function(t){t=ud(t);var i=t.queue,s=Em.bind(null,Ae,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:hd,useDeferredValue:function(t,i){var s=Ot();return gd(s,t,i)},useTransition:function(){var t=ud(!1);return t=bm.bind(null,Ae,t.queue,!0,!1),Ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var l=Ae,f=Ot();if(je){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),Ye===null)throw Error(a(349));(ke&127)!==0||Kg(l,i,s)}f.memoizedState=s;var m={value:s,getSnapshot:i};return f.queue=m,um(Qg.bind(null,l,m,t),[t]),l.flags|=2048,aa(9,{destroy:void 0},Zg.bind(null,l,m,s,i),null),s},useId:function(){var t=Ot(),i=Ye.identifierPrefix;if(je){var s=En,l=Sn;s=(l&~(1<<32-Nt(l)-1)).toString(32)+s,i="_"+i+"R_"+s,s=cl++,0<s&&(i+="H"+s.toString(32)),i+="_"}else s=Qx++,i="_"+i+"r_"+s.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:pd,useFormState:am,useActionState:am,useOptimistic:function(t){var i=Ot();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=yd.bind(null,Ae,!0,s),s.dispatch=i,[t,i]},useMemoCache:od,useCacheRefresh:function(){return Ot().memoizedState=n_.bind(null,Ae)},useEffectEvent:function(t){var i=Ot(),s={impl:t};return i.memoizedState=s,function(){if(($e&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},vd={readContext:bt,use:dl,useCallback:pm,useContext:bt,useEffect:fd,useImperativeHandle:mm,useInsertionEffect:fm,useLayoutEffect:hm,useMemo:ym,useReducer:fl,useRef:cm,useState:function(){return fl(qn)},useDebugValue:hd,useDeferredValue:function(t,i){var s=it();return vm(s,qe.memoizedState,t,i)},useTransition:function(){var t=fl(qn)[0],i=it().memoizedState;return[typeof t=="boolean"?t:vs(t),i]},useSyncExternalStore:Xg,useId:_m,useHostTransitionStatus:pd,useFormState:sm,useActionState:sm,useOptimistic:function(t,i){var s=it();return Wg(s,qe,t,i)},useMemoCache:od,useCacheRefresh:Sm};vd.useEffectEvent=dm;var Nm={readContext:bt,use:dl,useCallback:pm,useContext:bt,useEffect:fd,useImperativeHandle:mm,useInsertionEffect:fm,useLayoutEffect:hm,useMemo:ym,useReducer:cd,useRef:cm,useState:function(){return cd(qn)},useDebugValue:hd,useDeferredValue:function(t,i){var s=it();return qe===null?gd(s,t,i):vm(s,qe.memoizedState,t,i)},useTransition:function(){var t=cd(qn)[0],i=it().memoizedState;return[typeof t=="boolean"?t:vs(t),i]},useSyncExternalStore:Xg,useId:_m,useHostTransitionStatus:pd,useFormState:lm,useActionState:lm,useOptimistic:function(t,i){var s=it();return qe!==null?Wg(s,qe,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:od,useCacheRefresh:Sm};Nm.useEffectEvent=dm;function bd(t,i,s,l){i=t.memoizedState,s=s(l,i),s=s==null?i:v({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var wd={enqueueSetState:function(t,i,s){t=t._reactInternals;var l=Yt(),f=vi(l);f.payload=i,s!=null&&(f.callback=s),i=bi(t,f,l),i!==null&&(Ut(i,t,l),gs(i,t,l))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var l=Yt(),f=vi(l);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=bi(t,f,l),i!==null&&(Ut(i,t,l),gs(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Yt(),l=vi(s);l.tag=2,i!=null&&(l.callback=i),i=bi(t,l,s),i!==null&&(Ut(i,t,s),gs(i,t,s))}};function Om(t,i,s,l,f,m,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,w):i.prototype&&i.prototype.isPureReactComponent?!ss(s,l)||!ss(f,m):!0}function Rm(t,i,s,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,l),i.state!==t&&wd.enqueueReplaceState(i,i.state,null)}function lr(t,i){var s=i;if("ref"in i){s={};for(var l in i)l!=="ref"&&(s[l]=i[l])}if(t=t.defaultProps){s===i&&(s=v({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}function km(t){Xo(t)}function Mm(t){console.error(t)}function jm(t){Xo(t)}function pl(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Dm(t,i,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xd(t,i,s){return s=vi(s),s.tag=3,s.payload={element:null},s.callback=function(){pl(t,i)},s}function zm(t){return t=vi(t),t.tag=3,t}function Um(t,i,s,l){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Dm(i,s,l)}}var w=s.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){Dm(i,s,l),typeof f!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function r_(t,i,s,l,f){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=s.alternate,i!==null&&Jr(i,s,f,!0),s=qt.current,s!==null){switch(s.tag){case 31:case 13:return an===null?Nl():s.alternate===null&&et===0&&(et=3),s.flags&=-257,s.flags|=65536,s.lanes=f,l===il?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([l]):i.add(l),Yd(t,l,f)),!1;case 22:return s.flags|=65536,l===il?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([l]):s.add(l)),Yd(t,l,f)),!1}throw Error(a(435,s.tag))}return Yd(t,l,f),Nl(),!1}if(je)return i=qt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Bu&&(t=Error(a(422),{cause:l}),cs(en(t,s)))):(l!==Bu&&(i=Error(a(423),{cause:l}),cs(en(i,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=en(l,s),f=xd(t.stateNode,l,f),Ju(t,f),et!==4&&(et=2)),!1;var m=Error(a(520),{cause:l});if(m=en(m,s),Ns===null?Ns=[m]:Ns.push(m),et!==4&&(et=2),i===null)return!0;l=en(l,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=xd(s.stateNode,l,t),Ju(s,t),!1;case 1:if(i=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ti===null||!Ti.has(m))))return s.flags|=65536,f&=-f,s.lanes|=f,f=zm(f),Um(f,t,s,l),Ju(s,f),!1}s=s.return}while(s!==null);return!1}var _d=Error(a(461)),ot=!1;function wt(t,i,s,l){i.child=t===null?Bg(i,null,s,l):sr(i,t.child,s,l)}function $m(t,i,s,l,f){s=s.render;var m=i.ref;if("ref"in l){var w={};for(var A in l)A!=="ref"&&(w[A]=l[A])}else w=l;return nr(i),l=id(t,i,s,w,m,f),A=rd(),t!==null&&!ot?(ad(t,i,f),Vn(t,i,f)):(je&&A&&Lu(i),i.flags|=1,wt(t,i,l,f),i.child)}function Lm(t,i,s,l,f){if(t===null){var m=s.type;return typeof m=="function"&&!zu(m)&&m.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=m,Hm(t,i,m,l,f)):(t=Jo(s.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!Rd(t,f)){var w=m.memoizedProps;if(s=s.compare,s=s!==null?s:ss,s(w,l)&&t.ref===i.ref)return Vn(t,i,f)}return i.flags|=1,t=$n(m,l),t.ref=i.ref,t.return=i,i.child=t}function Hm(t,i,s,l,f){if(t!==null){var m=t.memoizedProps;if(ss(m,l)&&t.ref===i.ref)if(ot=!1,i.pendingProps=l=m,Rd(t,f))(t.flags&131072)!==0&&(ot=!0);else return i.lanes=t.lanes,Vn(t,i,f)}return Sd(t,i,s,l,f)}function Bm(t,i,s,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|s:s,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,i.child=null;return Im(t,i,m,s,l)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&tl(i,m!==null?m.cachePool:null),m!==null?Vg(i,m):Wu(),Pg(i);else return l=i.lanes=536870912,Im(t,i,m!==null?m.baseLanes|s:s,s,l)}else m!==null?(tl(i,m.cachePool),Vg(i,m),xi(),i.memoizedState=null):(t!==null&&tl(i,null),Wu(),xi());return wt(t,i,f,s),i.child}function xs(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Im(t,i,s,l,f){var m=Xu();return m=m===null?null:{parent:at._currentValue,pool:m},i.memoizedState={baseLanes:s,cachePool:m},t!==null&&tl(i,null),Wu(),Pg(i),t!==null&&Jr(t,i,l,!0),i.childLanes=f,null}function yl(t,i){return i=bl({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function qm(t,i,s){return sr(i,t.child,null,s),t=yl(i,i.pendingProps),t.flags|=2,Vt(i),i.memoizedState=null,t}function a_(t,i,s){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(je){if(l.mode==="hidden")return t=yl(i,l),i.lanes=536870912,xs(null,t);if(td(i),(t=Ke)?(t=ey(t,rn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:hi!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},s=Tg(t),s.return=i,i.child=s,vt=i,Ke=null)):t=null,t===null)throw mi(i);return i.lanes=536870912,null}return yl(i,l)}var m=t.memoizedState;if(m!==null){var w=m.dehydrated;if(td(i),f)if(i.flags&256)i.flags&=-257,i=qm(t,i,s);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(ot||Jr(t,i,s,!1),f=(s&t.childLanes)!==0,ot||f){if(l=Ye,l!==null&&(w=Oo(l,s),w!==0&&w!==m.retryLane))throw m.retryLane=w,Fi(t,w),Ut(l,t,w),_d;Nl(),i=qm(t,i,s)}else t=m.treeContext,Ke=sn(w.nextSibling),vt=i,je=!0,gi=null,rn=!1,t!==null&&Ng(i,t),i=yl(i,l),i.flags|=4096;return i}return t=$n(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function vl(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function Sd(t,i,s,l,f){return nr(i),s=id(t,i,s,l,void 0,f),l=rd(),t!==null&&!ot?(ad(t,i,f),Vn(t,i,f)):(je&&l&&Lu(i),i.flags|=1,wt(t,i,s,f),i.child)}function Vm(t,i,s,l,f,m){return nr(i),i.updateQueue=null,s=Yg(i,l,s,f),Gg(t),l=rd(),t!==null&&!ot?(ad(t,i,m),Vn(t,i,m)):(je&&l&&Lu(i),i.flags|=1,wt(t,i,s,m),i.child)}function Pm(t,i,s,l,f){if(nr(i),i.stateNode===null){var m=Xr,w=s.contextType;typeof w=="object"&&w!==null&&(m=bt(w)),m=new s(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=wd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},Zu(i),w=s.contextType,m.context=typeof w=="object"&&w!==null?bt(w):Xr,m.state=i.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(bd(i,s,w,l),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&wd.enqueueReplaceState(m,m.state,null),ps(i,l,m,f),ms(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){m=i.stateNode;var A=i.memoizedProps,$=lr(s,A);m.props=$;var W=m.context,ie=s.contextType;w=Xr,typeof ie=="object"&&ie!==null&&(w=bt(ie));var ae=s.getDerivedStateFromProps;ie=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||W!==w)&&Rm(i,m,l,w),yi=!1;var te=i.memoizedState;m.state=te,ps(i,l,m,f),ms(),W=i.memoizedState,A||te!==W||yi?(typeof ae=="function"&&(bd(i,s,ae,l),W=i.memoizedState),($=yi||Om(i,s,$,l,te,W,w))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=W),m.props=l,m.state=W,m.context=w,l=$):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,Qu(t,i),w=i.memoizedProps,ie=lr(s,w),m.props=ie,ae=i.pendingProps,te=m.context,W=s.contextType,$=Xr,typeof W=="object"&&W!==null&&($=bt(W)),A=s.getDerivedStateFromProps,(W=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==ae||te!==$)&&Rm(i,m,l,$),yi=!1,te=i.memoizedState,m.state=te,ps(i,l,m,f),ms();var ne=i.memoizedState;w!==ae||te!==ne||yi||t!==null&&t.dependencies!==null&&Wo(t.dependencies)?(typeof A=="function"&&(bd(i,s,A,l),ne=i.memoizedState),(ie=yi||Om(i,s,ie,l,te,ne,$)||t!==null&&t.dependencies!==null&&Wo(t.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ne,$),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ne,$)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&te===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&te===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=ne),m.props=l,m.state=ne,m.context=$,l=ie):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&te===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&te===t.memoizedState||(i.flags|=1024),l=!1)}return m=l,vl(t,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&l?(i.child=sr(i,t.child,null,f),i.child=sr(i,null,s,f)):wt(t,i,s,f),i.memoizedState=m.state,t=i.child):t=Vn(t,i,f),t}function Gm(t,i,s,l){return er(),i.flags|=256,wt(t,i,s,l),i.child}var Ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Td(t){return{baseLanes:t,cachePool:Dg()}}function Cd(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=Gt),t}function Ym(t,i,s){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,w;if((w=m)||(w=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),w&&(f=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,t===null){if(je){if(f?wi(i):xi(),(t=Ke)?(t=ey(t,rn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:hi!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},s=Tg(t),s.return=i,i.child=s,vt=i,Ke=null)):t=null,t===null)throw mi(i);return cf(t)?i.lanes=32:i.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(xi(),f=i.mode,A=bl({mode:"hidden",children:A},f),l=Wi(l,f,s,null),A.return=i,l.return=i,A.sibling=l,i.child=A,l=i.child,l.memoizedState=Td(s),l.childLanes=Cd(t,w,s),i.memoizedState=Ed,xs(null,l)):(wi(i),Ad(i,A))}var $=t.memoizedState;if($!==null&&(A=$.dehydrated,A!==null)){if(m)i.flags&256?(wi(i),i.flags&=-257,i=Nd(t,i,s)):i.memoizedState!==null?(xi(),i.child=t.child,i.flags|=128,i=null):(xi(),A=l.fallback,f=i.mode,l=bl({mode:"visible",children:l.children},f),A=Wi(A,f,s,null),A.flags|=2,l.return=i,A.return=i,l.sibling=A,i.child=l,sr(i,t.child,null,s),l=i.child,l.memoizedState=Td(s),l.childLanes=Cd(t,w,s),i.memoizedState=Ed,i=xs(null,l));else if(wi(i),cf(A)){if(w=A.nextSibling&&A.nextSibling.dataset,w)var W=w.dgst;w=W,l=Error(a(419)),l.stack="",l.digest=w,cs({value:l,source:null,stack:null}),i=Nd(t,i,s)}else if(ot||Jr(t,i,s,!1),w=(s&t.childLanes)!==0,ot||w){if(w=Ye,w!==null&&(l=Oo(w,s),l!==0&&l!==$.retryLane))throw $.retryLane=l,Fi(t,l),Ut(w,t,l),_d;lf(A)||Nl(),i=Nd(t,i,s)}else lf(A)?(i.flags|=192,i.child=t.child,i=null):(t=$.treeContext,Ke=sn(A.nextSibling),vt=i,je=!0,gi=null,rn=!1,t!==null&&Ng(i,t),i=Ad(i,l.children),i.flags|=4096);return i}return f?(xi(),A=l.fallback,f=i.mode,$=t.child,W=$.sibling,l=$n($,{mode:"hidden",children:l.children}),l.subtreeFlags=$.subtreeFlags&65011712,W!==null?A=$n(W,A):(A=Wi(A,f,s,null),A.flags|=2),A.return=i,l.return=i,l.sibling=A,i.child=l,xs(null,l),l=i.child,A=t.child.memoizedState,A===null?A=Td(s):(f=A.cachePool,f!==null?($=at._currentValue,f=f.parent!==$?{parent:$,pool:$}:f):f=Dg(),A={baseLanes:A.baseLanes|s,cachePool:f}),l.memoizedState=A,l.childLanes=Cd(t,w,s),i.memoizedState=Ed,xs(t.child,l)):(wi(i),s=t.child,t=s.sibling,s=$n(s,{mode:"visible",children:l.children}),s.return=i,s.sibling=null,t!==null&&(w=i.deletions,w===null?(i.deletions=[t],i.flags|=16):w.push(t)),i.child=s,i.memoizedState=null,s)}function Ad(t,i){return i=bl({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function bl(t,i){return t=It(22,t,null,i),t.lanes=0,t}function Nd(t,i,s){return sr(i,t.child,null,s),t=Ad(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Xm(t,i,s){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Vu(t.return,i,s)}function Od(t,i,s,l,f,m){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f,treeForkCount:m}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=l,w.tail=s,w.tailMode=f,w.treeForkCount=m)}function Km(t,i,s){var l=i.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var w=nt.current,A=(w&2)!==0;if(A?(w=w&1|2,i.flags|=128):w&=1,K(nt,w),wt(t,i,l,s),l=je?ls:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xm(t,s,i);else if(t.tag===19)Xm(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(s=i.child,f=null;s!==null;)t=s.alternate,t!==null&&ol(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),Od(i,!1,f,s,m,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&ol(t)===null){i.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}Od(i,!0,s,null,m,l);break;case"together":Od(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Vn(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),Ei|=i.lanes,(s&i.childLanes)===0)if(t!==null){if(Jr(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,s=$n(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=$n(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Rd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Wo(t)))}function s_(t,i,s){switch(i.tag){case 3:le(i,i.stateNode.containerInfo),pi(i,at,t.memoizedState.cache),er();break;case 27:case 5:Ee(i);break;case 4:le(i,i.stateNode.containerInfo);break;case 10:pi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,td(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(wi(i),i.flags|=128,null):(s&i.child.childLanes)!==0?Ym(t,i,s):(wi(i),t=Vn(t,i,s),t!==null?t.sibling:null);wi(i);break;case 19:var f=(t.flags&128)!==0;if(l=(s&i.childLanes)!==0,l||(Jr(t,i,s,!1),l=(s&i.childLanes)!==0),f){if(l)return Km(t,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),K(nt,nt.current),l)break;return null;case 22:return i.lanes=0,Bm(t,i,s,i.pendingProps);case 24:pi(i,at,t.memoizedState.cache)}return Vn(t,i,s)}function Zm(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)ot=!0;else{if(!Rd(t,s)&&(i.flags&128)===0)return ot=!1,s_(t,i,s);ot=(t.flags&131072)!==0}else ot=!1,je&&(i.flags&1048576)!==0&&Ag(i,ls,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=rr(i.elementType),i.type=t,typeof t=="function")zu(t)?(l=lr(t,l),i.tag=1,i=Pm(null,i,t,l,s)):(i.tag=0,i=Sd(null,i,t,l,s));else{if(t!=null){var f=t.$$typeof;if(f===N){i.tag=11,i=$m(null,i,t,l,s);break e}else if(f===U){i.tag=14,i=Lm(null,i,t,l,s);break e}}throw i=z(t)||t,Error(a(306,i,""))}}return i;case 0:return Sd(t,i,i.type,i.pendingProps,s);case 1:return l=i.type,f=lr(l,i.pendingProps),Pm(t,i,l,f,s);case 3:e:{if(le(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var m=i.memoizedState;f=m.element,Qu(t,i),ps(i,l,null,s);var w=i.memoizedState;if(l=w.cache,pi(i,at,l),l!==m.cache&&Pu(i,[at],s,!0),ms(),l=w.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Gm(t,i,l,s);break e}else if(l!==f){f=en(Error(a(424)),i),cs(f),i=Gm(t,i,l,s);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ke=sn(t.firstChild),vt=i,je=!0,gi=null,rn=!0,s=Bg(i,null,l,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(er(),l===f){i=Vn(t,i,s);break e}wt(t,i,l,s)}i=i.child}return i;case 26:return vl(t,i),t===null?(s=sy(i.type,null,i.pendingProps,null))?i.memoizedState=s:je||(s=i.type,t=i.pendingProps,l=zl(ue.current).createElement(s),l[dt]=i,l[Et]=t,xt(l,s,t),rt(l),i.stateNode=l):i.memoizedState=sy(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ee(i),t===null&&je&&(l=i.stateNode=iy(i.type,i.pendingProps,ue.current),vt=i,rn=!0,f=Ke,Oi(i.type)?(uf=f,Ke=sn(l.firstChild)):Ke=f),wt(t,i,i.pendingProps.children,s),vl(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&je&&((f=l=Ke)&&(l=U_(l,i.type,i.pendingProps,rn),l!==null?(i.stateNode=l,vt=i,Ke=sn(l.firstChild),rn=!1,f=!0):f=!1),f||mi(i)),Ee(i),f=i.type,m=i.pendingProps,w=t!==null?t.memoizedProps:null,l=m.children,af(f,m)?l=null:w!==null&&af(f,w)&&(i.flags|=32),i.memoizedState!==null&&(f=id(t,i,Jx,null,null,s),Us._currentValue=f),vl(t,i),wt(t,i,l,s),i.child;case 6:return t===null&&je&&((t=s=Ke)&&(s=$_(s,i.pendingProps,rn),s!==null?(i.stateNode=s,vt=i,Ke=null,t=!0):t=!1),t||mi(i)),null;case 13:return Ym(t,i,s);case 4:return le(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=sr(i,null,l,s):wt(t,i,l,s),i.child;case 11:return $m(t,i,i.type,i.pendingProps,s);case 7:return wt(t,i,i.pendingProps,s),i.child;case 8:return wt(t,i,i.pendingProps.children,s),i.child;case 12:return wt(t,i,i.pendingProps.children,s),i.child;case 10:return l=i.pendingProps,pi(i,i.type,l.value),wt(t,i,l.children,s),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,nr(i),f=bt(f),l=l(f),i.flags|=1,wt(t,i,l,s),i.child;case 14:return Lm(t,i,i.type,i.pendingProps,s);case 15:return Hm(t,i,i.type,i.pendingProps,s);case 19:return Km(t,i,s);case 31:return a_(t,i,s);case 22:return Bm(t,i,s,i.pendingProps);case 24:return nr(i),l=bt(at),t===null?(f=Xu(),f===null&&(f=Ye,m=Gu(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=s),f=m),i.memoizedState={parent:l,cache:f},Zu(i),pi(i,at,f)):((t.lanes&s)!==0&&(Qu(t,i),ps(i,null,null,s),ms()),f=t.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),pi(i,at,l)):(l=m.cache,pi(i,at,l),l!==f.cache&&Pu(i,[at],s,!0))),wt(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Pn(t){t.flags|=4}function kd(t,i,s,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(_p())t.flags|=8192;else throw ar=il,Ku}else t.flags&=-16777217}function Qm(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!dy(i))if(_p())t.flags|=8192;else throw ar=il,Ku}function wl(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Co():536870912,t.lanes|=i,ca|=i)}function _s(t,i){if(!je)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ze(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(i)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=s,i}function o_(t,i,s){var l=i.pendingProps;switch(Hu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(i),null;case 1:return Ze(i),null;case 3:return s=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Bn(at),de(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Qr(i)?Pn(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Iu())),Ze(i),null;case 26:var f=i.type,m=i.memoizedState;return t===null?(Pn(i),m!==null?(Ze(i),Qm(i,m)):(Ze(i),kd(i,f,null,l,s))):m?m!==t.memoizedState?(Pn(i),Ze(i),Qm(i,m)):(Ze(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Pn(i),Ze(i),kd(i,f,t,l,s)),null;case 27:if(_e(i),s=ue.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Pn(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Ze(i),null}t=Q.current,Qr(i)?Og(i):(t=iy(f,l,s),i.stateNode=t,Pn(i))}return Ze(i),null;case 5:if(_e(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Pn(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Ze(i),null}if(m=Q.current,Qr(i))Og(i);else{var w=zl(ue.current);switch(m){case 1:m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=w.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?w.createElement("select",{is:l.is}):w.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?w.createElement(f,{is:l.is}):w.createElement(f)}}m[dt]=i,m[Et]=l;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=m;e:switch(xt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Pn(i)}}return Ze(i),kd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,s),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Pn(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=ue.current,Qr(i)){if(t=i.stateNode,s=i.memoizedProps,l=null,f=vt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=i,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Yp(t.nodeValue,s)),t||mi(i,!0)}else t=zl(t).createTextNode(l),t[dt]=i,i.stateNode=t}return Ze(i),null;case 31:if(s=i.memoizedState,t===null||t.memoizedState!==null){if(l=Qr(i),s!==null){if(t===null){if(!l)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[dt]=i}else er(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ze(i),t=!1}else s=Iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return i.flags&256?(Vt(i),i):(Vt(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Ze(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Qr(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[dt]=i}else er(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ze(i),f=!1}else f=Iu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Vt(i),i):(Vt(i),null)}return Vt(i),(i.flags&128)!==0?(i.lanes=s,i):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),s!==t&&s&&(i.child.flags|=8192),wl(i,i.updateQueue),Ze(i),null);case 4:return de(),t===null&&Wd(i.stateNode.containerInfo),Ze(i),null;case 10:return Bn(i.type),Ze(i),null;case 19:if(M(nt),l=i.memoizedState,l===null)return Ze(i),null;if(f=(i.flags&128)!==0,m=l.rendering,m===null)if(f)_s(l,!1);else{if(et!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=ol(t),m!==null){for(i.flags|=128,_s(l,!1),t=m.updateQueue,i.updateQueue=t,wl(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)Eg(s,t),s=s.sibling;return K(nt,nt.current&1|2),je&&Ln(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&yt()>Tl&&(i.flags|=128,f=!0,_s(l,!1),i.lanes=4194304)}else{if(!f)if(t=ol(m),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,wl(i,t),_s(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!je)return Ze(i),null}else 2*yt()-l.renderingStartTime>Tl&&s!==536870912&&(i.flags|=128,f=!0,_s(l,!1),i.lanes=4194304);l.isBackwards?(m.sibling=i.child,i.child=m):(t=l.last,t!==null?t.sibling=m:i.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=yt(),t.sibling=null,s=nt.current,K(nt,f?s&1|2:s&1),je&&Ln(i,l.treeForkCount),t):(Ze(i),null);case 22:case 23:return Vt(i),ed(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(s&536870912)!==0&&(i.flags&128)===0&&(Ze(i),i.subtreeFlags&6&&(i.flags|=8192)):Ze(i),s=i.updateQueue,s!==null&&wl(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==s&&(i.flags|=2048),t!==null&&M(ir),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Bn(at),Ze(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function l_(t,i){switch(Hu(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Bn(at),de(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return _e(i),null;case 31:if(i.memoizedState!==null){if(Vt(i),i.alternate===null)throw Error(a(340));er()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Vt(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));er()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return M(nt),null;case 4:return de(),null;case 10:return Bn(i.type),null;case 22:case 23:return Vt(i),ed(),t!==null&&M(ir),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Bn(at),null;case 25:return null;default:return null}}function Jm(t,i){switch(Hu(i),i.tag){case 3:Bn(at),de();break;case 26:case 27:case 5:_e(i);break;case 4:de();break;case 31:i.memoizedState!==null&&Vt(i);break;case 13:Vt(i);break;case 19:M(nt);break;case 10:Bn(i.type);break;case 22:case 23:Vt(i),ed(),t!==null&&M(ir);break;case 24:Bn(at)}}function Ss(t,i){try{var s=i.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var f=l.next;s=f;do{if((s.tag&t)===t){l=void 0;var m=s.create,w=s.inst;l=m(),w.destroy=l}s=s.next}while(s!==f)}}catch(A){He(i,i.return,A)}}function _i(t,i,s){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var w=l.inst,A=w.destroy;if(A!==void 0){w.destroy=void 0,f=i;var $=s,W=A;try{W()}catch(ie){He(f,$,ie)}}}l=l.next}while(l!==m)}}catch(ie){He(i,i.return,ie)}}function Fm(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{qg(i,s)}catch(l){He(t,t.return,l)}}}function Wm(t,i,s){s.props=lr(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){He(t,i,l)}}function Es(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(f){He(t,i,f)}}function Tn(t,i){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(f){He(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){He(t,i,f)}else s.current=null}function ep(t){var i=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(f){He(t,t.return,f)}}function Md(t,i,s){try{var l=t.stateNode;R_(l,t.type,s,i),l[Et]=i}catch(f){He(t,t.return,f)}}function tp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Oi(t.type)||t.tag===4}function jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Oi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dd(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=zn));else if(l!==4&&(l===27&&Oi(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(Dd(t,i,s),t=t.sibling;t!==null;)Dd(t,i,s),t=t.sibling}function xl(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(l!==4&&(l===27&&Oi(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(xl(t,i,s),t=t.sibling;t!==null;)xl(t,i,s),t=t.sibling}function np(t){var i=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);xt(i,l,s),i[dt]=t,i[Et]=s}catch(m){He(t,t.return,m)}}var Gn=!1,lt=!1,zd=!1,ip=typeof WeakSet=="function"?WeakSet:Set,pt=null;function c_(t,i){if(t=t.containerInfo,nf=ql,t=mg(t),Nu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var w=0,A=-1,$=-1,W=0,ie=0,ae=t,te=null;t:for(;;){for(var ne;ae!==s||f!==0&&ae.nodeType!==3||(A=w+f),ae!==m||l!==0&&ae.nodeType!==3||($=w+l),ae.nodeType===3&&(w+=ae.nodeValue.length),(ne=ae.firstChild)!==null;)te=ae,ae=ne;for(;;){if(ae===t)break t;if(te===s&&++W===f&&(A=w),te===m&&++ie===l&&($=w),(ne=ae.nextSibling)!==null)break;ae=te,te=ae.parentNode}ae=ne}s=A===-1||$===-1?null:{start:A,end:$}}else s=null}s=s||{start:0,end:0}}else s=null;for(rf={focusedElem:t,selectionRange:s},ql=!1,pt=i;pt!==null;)if(i=pt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,pt=t;else for(;pt!==null;){switch(i=pt,m=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)f=t[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,s=i,f=m.memoizedProps,m=m.memoizedState,l=s.stateNode;try{var fe=lr(s.type,f);t=l.getSnapshotBeforeUpdate(fe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){He(s,s.return,ve)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)of(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":of(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,pt=t;break}pt=i.return}}function rp(t,i,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Xn(t,s),l&4&&Ss(5,s);break;case 1:if(Xn(t,s),l&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(w){He(s,s.return,w)}else{var f=lr(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(w){He(s,s.return,w)}}l&64&&Fm(s),l&512&&Es(s,s.return);break;case 3:if(Xn(t,s),l&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{qg(t,i)}catch(w){He(s,s.return,w)}}break;case 27:i===null&&l&4&&np(s);case 26:case 5:Xn(t,s),i===null&&l&4&&ep(s),l&512&&Es(s,s.return);break;case 12:Xn(t,s);break;case 31:Xn(t,s),l&4&&op(t,s);break;case 13:Xn(t,s),l&4&&lp(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=v_.bind(null,s),L_(t,s))));break;case 22:if(l=s.memoizedState!==null||Gn,!l){i=i!==null&&i.memoizedState!==null||lt,f=Gn;var m=lt;Gn=l,(lt=i)&&!m?Kn(t,s,(s.subtreeFlags&8772)!==0):Xn(t,s),Gn=f,lt=m}break;case 30:break;default:Xn(t,s)}}function ap(t){var i=t.alternate;i!==null&&(t.alternate=null,ap(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Qa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,Mt=!1;function Yn(t,i,s){for(s=s.child;s!==null;)sp(t,i,s),s=s.sibling}function sp(t,i,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Gi,s)}catch{}switch(s.tag){case 26:lt||Tn(s,i),Yn(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:lt||Tn(s,i);var l=Qe,f=Mt;Oi(s.type)&&(Qe=s.stateNode,Mt=!1),Yn(t,i,s),js(s.stateNode),Qe=l,Mt=f;break;case 5:lt||Tn(s,i);case 6:if(l=Qe,f=Mt,Qe=null,Yn(t,i,s),Qe=l,Mt=f,Qe!==null)if(Mt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(s.stateNode)}catch(m){He(s,i,m)}else try{Qe.removeChild(s.stateNode)}catch(m){He(s,i,m)}break;case 18:Qe!==null&&(Mt?(t=Qe,Fp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),ya(t)):Fp(Qe,s.stateNode));break;case 4:l=Qe,f=Mt,Qe=s.stateNode.containerInfo,Mt=!0,Yn(t,i,s),Qe=l,Mt=f;break;case 0:case 11:case 14:case 15:_i(2,s,i),lt||_i(4,s,i),Yn(t,i,s);break;case 1:lt||(Tn(s,i),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Wm(s,i,l)),Yn(t,i,s);break;case 21:Yn(t,i,s);break;case 22:lt=(l=lt)||s.memoizedState!==null,Yn(t,i,s),lt=l;break;default:Yn(t,i,s)}}function op(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ya(t)}catch(s){He(i,i.return,s)}}}function lp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ya(t)}catch(s){He(i,i.return,s)}}function u_(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new ip),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new ip),i;default:throw Error(a(435,t.tag))}}function _l(t,i){var s=u_(t);i.forEach(function(l){if(!s.has(l)){s.add(l);var f=b_.bind(null,t,l);l.then(f,f)}})}function jt(t,i){var s=i.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l],m=t,w=i,A=w;e:for(;A!==null;){switch(A.tag){case 27:if(Oi(A.type)){Qe=A.stateNode,Mt=!1;break e}break;case 5:Qe=A.stateNode,Mt=!1;break e;case 3:case 4:Qe=A.stateNode.containerInfo,Mt=!0;break e}A=A.return}if(Qe===null)throw Error(a(160));sp(m,w,f),Qe=null,Mt=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)cp(i,t),i=i.sibling}var dn=null;function cp(t,i){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jt(i,t),Dt(t),l&4&&(_i(3,t,t.return),Ss(3,t),_i(5,t,t.return));break;case 1:jt(i,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),l&64&&Gn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var f=dn;if(jt(i,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),l&4){var m=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ki]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),xt(m,l,s),m[dt]=t,rt(m),l=m;break e;case"link":var w=cy("link","href",f).get(l+(s.href||""));if(w){for(var A=0;A<w.length;A++)if(m=w[A],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){w.splice(A,1);break t}}m=f.createElement(l),xt(m,l,s),f.head.appendChild(m);break;case"meta":if(w=cy("meta","content",f).get(l+(s.content||""))){for(A=0;A<w.length;A++)if(m=w[A],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){w.splice(A,1);break t}}m=f.createElement(l),xt(m,l,s),f.head.appendChild(m);break;default:throw Error(a(468,l))}m[dt]=t,rt(m),l=m}t.stateNode=l}else uy(f,t.type,t.stateNode);else t.stateNode=ly(f,l,t.memoizedProps);else m!==l?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,l===null?uy(f,t.type,t.stateNode):ly(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Md(t,t.memoizedProps,s.memoizedProps)}break;case 27:jt(i,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),s!==null&&l&4&&Md(t,t.memoizedProps,s.memoizedProps);break;case 5:if(jt(i,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),t.flags&32){f=t.stateNode;try{Br(f,"")}catch(fe){He(t,t.return,fe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Md(t,f,s!==null?s.memoizedProps:f)),l&1024&&(zd=!0);break;case 6:if(jt(i,t),Dt(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(fe){He(t,t.return,fe)}}break;case 3:if(Ll=null,f=dn,dn=Ul(i.containerInfo),jt(i,t),dn=f,Dt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ya(i.containerInfo)}catch(fe){He(t,t.return,fe)}zd&&(zd=!1,up(t));break;case 4:l=dn,dn=Ul(t.stateNode.containerInfo),jt(i,t),Dt(t),dn=l;break;case 12:jt(i,t),Dt(t);break;case 31:jt(i,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_l(t,l)));break;case 13:jt(i,t),Dt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(El=yt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_l(t,l)));break;case 22:f=t.memoizedState!==null;var $=s!==null&&s.memoizedState!==null,W=Gn,ie=lt;if(Gn=W||f,lt=ie||$,jt(i,t),lt=ie,Gn=W,Dt(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||$||Gn||lt||cr(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){$=s=i;try{if(m=$.stateNode,f)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{A=$.stateNode;var ae=$.memoizedProps.style,te=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;A.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(fe){He($,$.return,fe)}}}else if(i.tag===6){if(s===null){$=i;try{$.stateNode.nodeValue=f?"":$.memoizedProps}catch(fe){He($,$.return,fe)}}}else if(i.tag===18){if(s===null){$=i;try{var ne=$.stateNode;f?Wp(ne,!0):Wp($.stateNode,!1)}catch(fe){He($,$.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,_l(t,s))));break;case 19:jt(i,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_l(t,l)));break;case 30:break;case 21:break;default:jt(i,t),Dt(t)}}function Dt(t){var i=t.flags;if(i&2){try{for(var s,l=t.return;l!==null;){if(tp(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var f=s.stateNode,m=jd(t);xl(t,m,f);break;case 5:var w=s.stateNode;s.flags&32&&(Br(w,""),s.flags&=-33);var A=jd(t);xl(t,A,w);break;case 3:case 4:var $=s.stateNode.containerInfo,W=jd(t);Dd(t,W,$);break;default:throw Error(a(161))}}catch(ie){He(t,t.return,ie)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function up(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;up(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Xn(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)rp(t,i.alternate,i),i=i.sibling}function cr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:_i(4,i,i.return),cr(i);break;case 1:Tn(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&Wm(i,i.return,s),cr(i);break;case 27:js(i.stateNode);case 26:case 5:Tn(i,i.return),cr(i);break;case 22:i.memoizedState===null&&cr(i);break;case 30:cr(i);break;default:cr(i)}t=t.sibling}}function Kn(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,m=i,w=m.flags;switch(m.tag){case 0:case 11:case 15:Kn(f,m,s),Ss(4,m);break;case 1:if(Kn(f,m,s),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){He(l,l.return,W)}if(l=m,f=l.updateQueue,f!==null){var A=l.stateNode;try{var $=f.shared.hiddenCallbacks;if($!==null)for(f.shared.hiddenCallbacks=null,f=0;f<$.length;f++)Ig($[f],A)}catch(W){He(l,l.return,W)}}s&&w&64&&Fm(m),Es(m,m.return);break;case 27:np(m);case 26:case 5:Kn(f,m,s),s&&l===null&&w&4&&ep(m),Es(m,m.return);break;case 12:Kn(f,m,s);break;case 31:Kn(f,m,s),s&&w&4&&op(f,m);break;case 13:Kn(f,m,s),s&&w&4&&lp(f,m);break;case 22:m.memoizedState===null&&Kn(f,m,s),Es(m,m.return);break;case 30:break;default:Kn(f,m,s)}i=i.sibling}}function Ud(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&us(s))}function $d(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&us(t))}function fn(t,i,s,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dp(t,i,s,l),i=i.sibling}function dp(t,i,s,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:fn(t,i,s,l),f&2048&&Ss(9,i);break;case 1:fn(t,i,s,l);break;case 3:fn(t,i,s,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&us(t)));break;case 12:if(f&2048){fn(t,i,s,l),t=i.stateNode;try{var m=i.memoizedProps,w=m.id,A=m.onPostCommit;typeof A=="function"&&A(w,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch($){He(i,i.return,$)}}else fn(t,i,s,l);break;case 31:fn(t,i,s,l);break;case 13:fn(t,i,s,l);break;case 23:break;case 22:m=i.stateNode,w=i.alternate,i.memoizedState!==null?m._visibility&2?fn(t,i,s,l):Ts(t,i):m._visibility&2?fn(t,i,s,l):(m._visibility|=2,sa(t,i,s,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Ud(w,i);break;case 24:fn(t,i,s,l),f&2048&&$d(i.alternate,i);break;default:fn(t,i,s,l)}}function sa(t,i,s,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=t,w=i,A=s,$=l,W=w.flags;switch(w.tag){case 0:case 11:case 15:sa(m,w,A,$,f),Ss(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?sa(m,w,A,$,f):Ts(m,w):(ie._visibility|=2,sa(m,w,A,$,f)),f&&W&2048&&Ud(w.alternate,w);break;case 24:sa(m,w,A,$,f),f&&W&2048&&$d(w.alternate,w);break;default:sa(m,w,A,$,f)}i=i.sibling}}function Ts(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,l=i,f=l.flags;switch(l.tag){case 22:Ts(s,l),f&2048&&Ud(l.alternate,l);break;case 24:Ts(s,l),f&2048&&$d(l.alternate,l);break;default:Ts(s,l)}i=i.sibling}}var Cs=8192;function oa(t,i,s){if(t.subtreeFlags&Cs)for(t=t.child;t!==null;)fp(t,i,s),t=t.sibling}function fp(t,i,s){switch(t.tag){case 26:oa(t,i,s),t.flags&Cs&&t.memoizedState!==null&&Q_(s,dn,t.memoizedState,t.memoizedProps);break;case 5:oa(t,i,s);break;case 3:case 4:var l=dn;dn=Ul(t.stateNode.containerInfo),oa(t,i,s),dn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Cs,Cs=16777216,oa(t,i,s),Cs=l):oa(t,i,s));break;default:oa(t,i,s)}}function hp(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function As(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];pt=l,mp(l,t)}hp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gp(t),t=t.sibling}function gp(t){switch(t.tag){case 0:case 11:case 15:As(t),t.flags&2048&&_i(9,t,t.return);break;case 3:As(t);break;case 12:As(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Sl(t)):As(t);break;default:As(t)}}function Sl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];pt=l,mp(l,t)}hp(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:_i(8,i,i.return),Sl(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Sl(i));break;default:Sl(i)}t=t.sibling}}function mp(t,i){for(;pt!==null;){var s=pt;switch(s.tag){case 0:case 11:case 15:_i(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:us(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,pt=l;else e:for(s=t;pt!==null;){l=pt;var f=l.sibling,m=l.return;if(ap(l),l===s){pt=null;break e}if(f!==null){f.return=m,pt=f;break e}pt=m}}}var d_={getCacheForType:function(t){var i=bt(at),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s},cacheSignal:function(){return bt(at).controller.signal}},f_=typeof WeakMap=="function"?WeakMap:Map,$e=0,Ye=null,Oe=null,ke=0,Le=0,Pt=null,Si=!1,la=!1,Ld=!1,Zn=0,et=0,Ei=0,ur=0,Hd=0,Gt=0,ca=0,Ns=null,zt=null,Bd=!1,El=0,pp=0,Tl=1/0,Cl=null,Ti=null,ft=0,Ci=null,ua=null,Qn=0,Id=0,qd=null,yp=null,Os=0,Vd=null;function Yt(){return($e&2)!==0&&ke!==0?ke&-ke:R.T!==null?Zd():Ro()}function vp(){if(Gt===0)if((ke&536870912)===0||je){var t=Rr;Rr<<=1,(Rr&3932160)===0&&(Rr=262144),Gt=t}else Gt=536870912;return t=qt.current,t!==null&&(t.flags|=32),Gt}function Ut(t,i,s){(t===Ye&&(Le===2||Le===9)||t.cancelPendingCommit!==null)&&(da(t,0),Ai(t,ke,Gt,!1)),Xi(t,s),(($e&2)===0||t!==Ye)&&(t===Ye&&(($e&2)===0&&(ur|=s),et===4&&Ai(t,ke,Gt,!1)),Cn(t))}function bp(t,i,s){if(($e&6)!==0)throw Error(a(327));var l=!s&&(i&127)===0&&(i&t.expiredLanes)===0||Yi(t,i),f=l?m_(t,i):Gd(t,i,!0),m=l;do{if(f===0){la&&!l&&Ai(t,i,0,!1);break}else{if(s=t.current.alternate,m&&!h_(s)){f=Gd(t,i,!1),m=!1;continue}if(f===2){if(m=i,t.errorRecoveryDisabledLanes&m)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var A=t;f=Ns;var $=A.current.memoizedState.isDehydrated;if($&&(da(A,w).flags|=256),w=Gd(A,w,!1),w!==2){if(Ld&&!$){A.errorRecoveryDisabledLanes|=m,ur|=m,f=4;break e}m=zt,zt=f,m!==null&&(zt===null?zt=m:zt.push.apply(zt,m))}f=w}if(m=!1,f!==2)continue}}if(f===1){da(t,0),Ai(t,i,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ai(l,i,Gt,!Si);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=El+300-yt(),10<f)){if(Ai(l,i,Gt,!Si),Mr(l,0,!0)!==0)break e;Qn=i,l.timeoutHandle=Qp(wp.bind(null,l,s,zt,Cl,Bd,i,Gt,ur,ca,Si,m,"Throttled",-0,0),f);break e}wp(l,s,zt,Cl,Bd,i,Gt,ur,ca,Si,m,null,-0,0)}}break}while(!0);Cn(t)}function wp(t,i,s,l,f,m,w,A,$,W,ie,ae,te,ne){if(t.timeoutHandle=-1,ae=i.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},fp(i,m,ae);var fe=(m&62914560)===m?El-yt():(m&4194048)===m?pp-yt():0;if(fe=J_(ae,fe),fe!==null){Qn=m,t.cancelPendingCommit=fe(Np.bind(null,t,i,m,s,l,f,w,A,$,ie,ae,null,te,ne)),Ai(t,m,w,!W);return}}Np(t,i,m,s,l,f,w,A,$)}function h_(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var f=s[l],m=f.getSnapshot;f=f.value;try{if(!Bt(m(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ai(t,i,s,l){i&=~Hd,i&=~ur,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var m=31-Nt(f),w=1<<m;l[m]=-1,f&=~w}s!==0&&Ao(t,s,i)}function Al(){return($e&6)===0?(Rs(0),!1):!0}function Pd(){if(Oe!==null){if(Le===0)var t=Oe.return;else t=Oe,Hn=tr=null,sd(t),ta=null,fs=0,t=Oe;for(;t!==null;)Jm(t.alternate,t),t=t.return;Oe=null}}function da(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,j_(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Qn=0,Pd(),Ye=t,Oe=s=$n(t.current,null),ke=i,Le=0,Pt=null,Si=!1,la=Yi(t,i),Ld=!1,ca=Gt=Hd=ur=Ei=et=0,zt=Ns=null,Bd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-Nt(l),m=1<<f;i|=t[f],l&=~m}return Zn=i,Ko(),s}function xp(t,i){Ae=null,R.H=ws,i===ea||i===nl?(i=$g(),Le=3):i===Ku?(i=$g(),Le=4):Le=i===_d?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pt=i,Oe===null&&(et=1,pl(t,en(i,t.current)))}function _p(){var t=qt.current;return t===null?!0:(ke&4194048)===ke?an===null:(ke&62914560)===ke||(ke&536870912)!==0?t===an:!1}function Sp(){var t=R.H;return R.H=ws,t===null?ws:t}function Ep(){var t=R.A;return R.A=d_,t}function Nl(){et=4,Si||(ke&4194048)!==ke&&qt.current!==null||(la=!0),(Ei&134217727)===0&&(ur&134217727)===0||Ye===null||Ai(Ye,ke,Gt,!1)}function Gd(t,i,s){var l=$e;$e|=2;var f=Sp(),m=Ep();(Ye!==t||ke!==i)&&(Cl=null,da(t,i)),i=!1;var w=et;e:do try{if(Le!==0&&Oe!==null){var A=Oe,$=Pt;switch(Le){case 8:Pd(),w=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(i=!0);var W=Le;if(Le=0,Pt=null,fa(t,A,$,W),s&&la){w=0;break e}break;default:W=Le,Le=0,Pt=null,fa(t,A,$,W)}}g_(),w=et;break}catch(ie){xp(t,ie)}while(!0);return i&&t.shellSuspendCounter++,Hn=tr=null,$e=l,R.H=f,R.A=m,Oe===null&&(Ye=null,ke=0,Ko()),w}function g_(){for(;Oe!==null;)Tp(Oe)}function m_(t,i){var s=$e;$e|=2;var l=Sp(),f=Ep();Ye!==t||ke!==i?(Cl=null,Tl=yt()+500,da(t,i)):la=Yi(t,i);e:do try{if(Le!==0&&Oe!==null){i=Oe;var m=Pt;t:switch(Le){case 1:Le=0,Pt=null,fa(t,i,m,1);break;case 2:case 9:if(zg(m)){Le=0,Pt=null,Cp(i);break}i=function(){Le!==2&&Le!==9||Ye!==t||(Le=7),Cn(t)},m.then(i,i);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:zg(m)?(Le=0,Pt=null,Cp(i)):(Le=0,Pt=null,fa(t,i,m,7));break;case 5:var w=null;switch(Oe.tag){case 26:w=Oe.memoizedState;case 5:case 27:var A=Oe;if(w?dy(w):A.stateNode.complete){Le=0,Pt=null;var $=A.sibling;if($!==null)Oe=$;else{var W=A.return;W!==null?(Oe=W,Ol(W)):Oe=null}break t}}Le=0,Pt=null,fa(t,i,m,5);break;case 6:Le=0,Pt=null,fa(t,i,m,6);break;case 8:Pd(),et=6;break e;default:throw Error(a(462))}}p_();break}catch(ie){xp(t,ie)}while(!0);return Hn=tr=null,R.H=l,R.A=f,$e=s,Oe!==null?0:(Ye=null,ke=0,Ko(),et)}function p_(){for(;Oe!==null&&!qi();)Tp(Oe)}function Tp(t){var i=Zm(t.alternate,t,Zn);t.memoizedProps=t.pendingProps,i===null?Ol(t):Oe=i}function Cp(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=Vm(s,i,i.pendingProps,i.type,void 0,ke);break;case 11:i=Vm(s,i,i.pendingProps,i.type.render,i.ref,ke);break;case 5:sd(i);default:Jm(s,i),i=Oe=Eg(i,Zn),i=Zm(s,i,Zn)}t.memoizedProps=t.pendingProps,i===null?Ol(t):Oe=i}function fa(t,i,s,l){Hn=tr=null,sd(i),ta=null,fs=0;var f=i.return;try{if(r_(t,f,i,s,ke)){et=1,pl(t,en(s,t.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;et=1,pl(t,en(s,t.current)),Oe=null;return}i.flags&32768?(je||l===1?t=!0:la||(ke&536870912)!==0?t=!1:(Si=t=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ap(i,t)):Ol(i)}function Ol(t){var i=t;do{if((i.flags&32768)!==0){Ap(i,Si);return}t=i.return;var s=o_(i.alternate,i,Zn);if(s!==null){Oe=s;return}if(i=i.sibling,i!==null){Oe=i;return}Oe=i=t}while(i!==null);et===0&&(et=5)}function Ap(t,i){do{var s=l_(t.alternate,t);if(s!==null){s.flags&=32767,Oe=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=s}while(t!==null);et=6,Oe=null}function Np(t,i,s,l,f,m,w,A,$){t.cancelPendingCommit=null;do Rl();while(ft!==0);if(($e&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=ju,cu(t,s,m,w,A,$),t===Ye&&(Oe=Ye=null,ke=0),ua=i,Ci=t,Qn=s,Id=m,qd=f,yp=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,w_(Pi,function(){return jp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=R.T,R.T=null,f=H.p,H.p=2,w=$e,$e|=4;try{c_(t,i,s)}finally{$e=w,H.p=f,R.T=l}}ft=1,Op(),Rp(),kp()}}function Op(){if(ft===1){ft=0;var t=Ci,i=ua,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=R.T,R.T=null;var l=H.p;H.p=2;var f=$e;$e|=4;try{cp(i,t);var m=rf,w=mg(t.containerInfo),A=m.focusedElem,$=m.selectionRange;if(w!==A&&A&&A.ownerDocument&&gg(A.ownerDocument.documentElement,A)){if($!==null&&Nu(A)){var W=$.start,ie=$.end;if(ie===void 0&&(ie=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(ie,A.value.length);else{var ae=A.ownerDocument||document,te=ae&&ae.defaultView||window;if(te.getSelection){var ne=te.getSelection(),fe=A.textContent.length,ve=Math.min($.start,fe),Pe=$.end===void 0?ve:Math.min($.end,fe);!ne.extend&&ve>Pe&&(w=Pe,Pe=ve,ve=w);var Y=hg(A,ve),I=hg(A,Pe);if(Y&&I&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==I.node||ne.focusOffset!==I.offset)){var F=ae.createRange();F.setStart(Y.node,Y.offset),ne.removeAllRanges(),ve>Pe?(ne.addRange(F),ne.extend(I.node,I.offset)):(F.setEnd(I.node,I.offset),ne.addRange(F))}}}}for(ae=[],ne=A;ne=ne.parentNode;)ne.nodeType===1&&ae.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ae.length;A++){var re=ae[A];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}ql=!!nf,rf=nf=null}finally{$e=f,H.p=l,R.T=s}}t.current=i,ft=2}}function Rp(){if(ft===2){ft=0;var t=Ci,i=ua,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=R.T,R.T=null;var l=H.p;H.p=2;var f=$e;$e|=4;try{rp(t,i.alternate,i)}finally{$e=f,H.p=l,R.T=s}}ft=3}}function kp(){if(ft===4||ft===3){ft=0,Vi();var t=Ci,i=ua,s=Qn,l=yp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ft=5:(ft=0,ua=Ci=null,Mp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ti=null),Za(s),i=i.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Gi,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=R.T,f=H.p,H.p=2,R.T=null;try{for(var m=t.onRecoverableError,w=0;w<l.length;w++){var A=l[w];m(A.value,{componentStack:A.stack})}}finally{R.T=i,H.p=f}}(Qn&3)!==0&&Rl(),Cn(t),f=t.pendingLanes,(s&261930)!==0&&(f&42)!==0?t===Vd?Os++:(Os=0,Vd=t):Os=0,Rs(0)}}function Mp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,us(i)))}function Rl(){return Op(),Rp(),kp(),jp()}function jp(){if(ft!==5)return!1;var t=Ci,i=Id;Id=0;var s=Za(Qn),l=R.T,f=H.p;try{H.p=32>s?32:s,R.T=null,s=qd,qd=null;var m=Ci,w=Qn;if(ft=0,ua=Ci=null,Qn=0,($e&6)!==0)throw Error(a(331));var A=$e;if($e|=4,gp(m.current),dp(m,m.current,w,s),$e=A,Rs(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Gi,m)}catch{}return!0}finally{H.p=f,R.T=l,Mp(t,i)}}function Dp(t,i,s){i=en(s,i),i=xd(t.stateNode,i,2),t=bi(t,i,2),t!==null&&(Xi(t,2),Cn(t))}function He(t,i,s){if(t.tag===3)Dp(t,t,s);else for(;i!==null;){if(i.tag===3){Dp(i,t,s);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ti===null||!Ti.has(l))){t=en(s,t),s=zm(2),l=bi(i,s,2),l!==null&&(Um(s,l,i,t),Xi(l,2),Cn(l));break}}i=i.return}}function Yd(t,i,s){var l=t.pingCache;if(l===null){l=t.pingCache=new f_;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(s)||(Ld=!0,f.add(s),t=y_.bind(null,t,i,s),i.then(t,t))}function y_(t,i,s){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Ye===t&&(ke&s)===s&&(et===4||et===3&&(ke&62914560)===ke&&300>yt()-El?($e&2)===0&&da(t,0):Hd|=s,ca===ke&&(ca=0)),Cn(t)}function zp(t,i){i===0&&(i=Co()),t=Fi(t,i),t!==null&&(Xi(t,i),Cn(t))}function v_(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),zp(t,s)}function b_(t,i){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),zp(t,s)}function w_(t,i){return ri(t,i)}var kl=null,ha=null,Xd=!1,Ml=!1,Kd=!1,Ni=0;function Cn(t){t!==ha&&t.next===null&&(ha===null?kl=ha=t:ha=ha.next=t),Ml=!0,Xd||(Xd=!0,__())}function Rs(t,i){if(!Kd&&Ml){Kd=!0;do for(var s=!1,l=kl;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var w=l.suspendedLanes,A=l.pingedLanes;m=(1<<31-Nt(42|t)+1)-1,m&=f&~(w&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,Hp(l,m))}else m=ke,m=Mr(l,l===Ye?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Yi(l,m)||(s=!0,Hp(l,m));l=l.next}while(s);Kd=!1}}function x_(){Up()}function Up(){Ml=Xd=!1;var t=0;Ni!==0&&M_()&&(t=Ni);for(var i=yt(),s=null,l=kl;l!==null;){var f=l.next,m=$p(l,i);m===0?(l.next=null,s===null?kl=f:s.next=f,f===null&&(ha=s)):(s=l,(t!==0||(m&3)!==0)&&(Ml=!0)),l=f}ft!==0&&ft!==5||Rs(t),Ni!==0&&(Ni=0)}function $p(t,i){for(var s=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var w=31-Nt(m),A=1<<w,$=f[w];$===-1?((A&s)===0||(A&l)!==0)&&(f[w]=lu(A,i)):$<=i&&(t.expiredLanes|=A),m&=~A}if(i=Ye,s=ke,s=Mr(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===i&&(Le===2||Le===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ai(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Yi(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(l!==null&&ai(l),Za(s)){case 2:case 8:s=si;break;case 32:s=Pi;break;case 268435456:s=Nr;break;default:s=Pi}return l=Lp.bind(null,t),s=ri(s,l),t.callbackPriority=i,t.callbackNode=s,i}return l!==null&&l!==null&&ai(l),t.callbackPriority=2,t.callbackNode=null,2}function Lp(t,i){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Rl()&&t.callbackNode!==s)return null;var l=ke;return l=Mr(t,t===Ye?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(bp(t,l,i),$p(t,yt()),t.callbackNode!=null&&t.callbackNode===s?Lp.bind(null,t):null)}function Hp(t,i){if(Rl())return null;bp(t,i,!0)}function __(){D_(function(){($e&6)!==0?ri(kn,x_):Up()})}function Zd(){if(Ni===0){var t=Fr;t===0&&(t=Or,Or<<=1,(Or&261888)===0&&(Or=256)),Ni=t}return Ni}function Bp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Bo(""+t)}function Ip(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function S_(t,i,s,l,f){if(i==="submit"&&s&&s.stateNode===f){var m=Bp((f[Et]||null).action),w=l.submitter;w&&(i=(i=w[Et]||null)?Bp(i.formAction):w.getAttribute("formAction"),i!==null&&(m=i,w=null));var A=new Po("action","action",null,l,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ni!==0){var $=w?Ip(f,w):new FormData(f);md(s,{pending:!0,data:$,method:f.method,action:m},null,$)}}else typeof m=="function"&&(A.preventDefault(),$=w?Ip(f,w):new FormData(f),md(s,{pending:!0,data:$,method:f.method,action:m},m,$))},currentTarget:f}]})}}for(var Qd=0;Qd<Mu.length;Qd++){var Jd=Mu[Qd],E_=Jd.toLowerCase(),T_=Jd[0].toUpperCase()+Jd.slice(1);un(E_,"on"+T_)}un(vg,"onAnimationEnd"),un(bg,"onAnimationIteration"),un(wg,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(Ix,"onTransitionRun"),un(qx,"onTransitionStart"),un(Vx,"onTransitionCancel"),un(xg,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ks));function qp(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],f=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var w=l.length-1;0<=w;w--){var A=l[w],$=A.instance,W=A.currentTarget;if(A=A.listener,$!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=W;try{m(f)}catch(ie){Xo(ie)}f.currentTarget=null,m=$}else for(w=0;w<l.length;w++){if(A=l[w],$=A.instance,W=A.currentTarget,A=A.listener,$!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=W;try{m(f)}catch(ie){Xo(ie)}f.currentTarget=null,m=$}}}}function Re(t,i){var s=i[jr];s===void 0&&(s=i[jr]=new Set);var l=t+"__bubble";s.has(l)||(Vp(i,t,2,!1),s.add(l))}function Fd(t,i,s){var l=0;i&&(l|=4),Vp(s,t,l,i)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Wd(t){if(!t[jl]){t[jl]=!0,Do.forEach(function(s){s!=="selectionchange"&&(C_.has(s)||Fd(s,!1,t),Fd(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[jl]||(i[jl]=!0,Fd("selectionchange",!1,i))}}function Vp(t,i,s,l){switch(vy(i)){case 2:var f=eS;break;case 8:f=tS;break;default:f=mf}s=f.bind(null,i,s,t),f=void 0,!bu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,s,{capture:!0,passive:f}):t.addEventListener(i,s,!0):f!==void 0?t.addEventListener(i,s,{passive:f}):t.addEventListener(i,s,!1)}function ef(t,i,s,l,f){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var A=l.stateNode.containerInfo;if(A===f)break;if(w===4)for(w=l.return;w!==null;){var $=w.tag;if(($===3||$===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;A!==null;){if(w=oi(A),w===null)return;if($=w.tag,$===5||$===6||$===26||$===27){l=m=w;continue e}A=A.parentNode}}l=l.return}Kh(function(){var W=m,ie=yu(s),ae=[];e:{var te=_g.get(t);if(te!==void 0){var ne=Po,fe=t;switch(t){case"keypress":if(qo(s)===0)break e;case"keydown":case"keyup":ne=bx;break;case"focusin":fe="focus",ne=Su;break;case"focusout":fe="blur",ne=Su;break;case"beforeblur":case"afterblur":ne=Su;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=ox;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=_x;break;case vg:case bg:case wg:ne=ux;break;case xg:ne=Ex;break;case"scroll":case"scrollend":ne=ax;break;case"wheel":ne=Cx;break;case"copy":case"cut":case"paste":ne=fx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Wh;break;case"toggle":case"beforetoggle":ne=Nx}var ve=(i&4)!==0,Pe=!ve&&(t==="scroll"||t==="scrollend"),Y=ve?te!==null?te+"Capture":null:te;ve=[];for(var I=W,F;I!==null;){var re=I;if(F=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||F===null||Y===null||(re=Wa(I,Y),re!=null&&ve.push(Ms(I,re,F))),Pe)break;I=I.return}0<ve.length&&(te=new ne(te,fe,null,s,ie),ae.push({event:te,listeners:ve}))}}if((i&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",te&&s!==pu&&(fe=s.relatedTarget||s.fromElement)&&(oi(fe)||fe[jn]))break e;if((ne||te)&&(te=ie.window===ie?ie:(te=ie.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(fe=s.relatedTarget||s.toElement,ne=W,fe=fe?oi(fe):null,fe!==null&&(Pe=c(fe),ve=fe.tag,fe!==Pe||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(ne=null,fe=W),ne!==fe)){if(ve=Jh,re="onMouseLeave",Y="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(ve=Wh,re="onPointerLeave",Y="onPointerEnter",I="pointer"),Pe=ne==null?te:ci(ne),F=fe==null?te:ci(fe),te=new ve(re,I+"leave",ne,s,ie),te.target=Pe,te.relatedTarget=F,re=null,oi(ie)===W&&(ve=new ve(Y,I+"enter",fe,s,ie),ve.target=F,ve.relatedTarget=Pe,re=ve),Pe=re,ne&&fe)t:{for(ve=A_,Y=ne,I=fe,F=0,re=Y;re;re=ve(re))F++;re=0;for(var ye=I;ye;ye=ve(ye))re++;for(;0<F-re;)Y=ve(Y),F--;for(;0<re-F;)I=ve(I),re--;for(;F--;){if(Y===I||I!==null&&Y===I.alternate){ve=Y;break t}Y=ve(Y),I=ve(I)}ve=null}else ve=null;ne!==null&&Pp(ae,te,ne,ve,!1),fe!==null&&Pe!==null&&Pp(ae,Pe,fe,ve,!0)}}e:{if(te=W?ci(W):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var ze=og;else if(ag(te))if(lg)ze=Lx;else{ze=Ux;var ge=zx}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?W&&mu(W.elementType)&&(ze=og):ze=$x;if(ze&&(ze=ze(t,W))){sg(ae,ze,s,ie);break e}ge&&ge(t,te,W),t==="focusout"&&W&&te.type==="number"&&W.memoizedProps.value!=null&&Lr(te,"number",te.value)}switch(ge=W?ci(W):window,t){case"focusin":(ag(ge)||ge.contentEditable==="true")&&(Pr=ge,Ou=W,os=null);break;case"focusout":os=Ou=Pr=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,pg(ae,s,ie);break;case"selectionchange":if(Bx)break;case"keydown":case"keyup":pg(ae,s,ie)}var Ne;if(Tu)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Vr?ig(t,s)&&(Me="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Me="onCompositionStart");Me&&(eg&&s.locale!=="ko"&&(Vr||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Vr&&(Ne=Zh()):(fi=ie,wu="value"in fi?fi.value:fi.textContent,Vr=!0)),ge=Dl(W,Me),0<ge.length&&(Me=new Fh(Me,t,null,s,ie),ae.push({event:Me,listeners:ge}),Ne?Me.data=Ne:(Ne=rg(s),Ne!==null&&(Me.data=Ne)))),(Ne=Rx?kx(t,s):Mx(t,s))&&(Me=Dl(W,"onBeforeInput"),0<Me.length&&(ge=new Fh("onBeforeInput","beforeinput",null,s,ie),ae.push({event:ge,listeners:Me}),ge.data=Ne)),S_(ae,t,W,s,ie)}qp(ae,i)})}function Ms(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Dl(t,i){for(var s=i+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Wa(t,s),f!=null&&l.unshift(Ms(t,f,m)),f=Wa(t,i),f!=null&&l.push(Ms(t,f,m))),t.tag===3)return l;t=t.return}return[]}function A_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Pp(t,i,s,l,f){for(var m=i._reactName,w=[];s!==null&&s!==l;){var A=s,$=A.alternate,W=A.stateNode;if(A=A.tag,$!==null&&$===l)break;A!==5&&A!==26&&A!==27||W===null||($=W,f?(W=Wa(s,m),W!=null&&w.unshift(Ms(s,W,$))):f||(W=Wa(s,m),W!=null&&w.push(Ms(s,W,$)))),s=s.return}w.length!==0&&t.push({event:i,listeners:w})}var N_=/\r\n?/g,O_=/\u0000|\uFFFD/g;function Gp(t){return(typeof t=="string"?t:""+t).replace(N_,`
`).replace(O_,"")}function Yp(t,i){return i=Gp(i),Gp(t)===i}function Ve(t,i,s,l,f,m){switch(s){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Br(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Br(t,""+l);break;case"className":zr(t,"class",l);break;case"tabIndex":zr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zr(t,s,l);break;case"style":Yh(t,l,m);break;case"data":if(i!=="object"){zr(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Bo(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(i!=="input"&&Ve(t,i,"name",f.name,f,null),Ve(t,i,"formEncType",f.formEncType,f,null),Ve(t,i,"formMethod",f.formMethod,f,null),Ve(t,i,"formTarget",f.formTarget,f,null)):(Ve(t,i,"encType",f.encType,f,null),Ve(t,i,"method",f.method,f,null),Ve(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Bo(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=zn);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Bo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Re("beforetoggle",t),Re("toggle",t),Dr(t,"popover",l);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Dr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ix.get(s)||s,Dr(t,s,l))}}function tf(t,i,s,l,f,m){switch(s){case"style":Yh(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Br(t,l):(typeof l=="number"||typeof l=="bigint")&&Br(t,""+l);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),m=t[Et]||null,m=m!=null?m[s]:null,typeof m=="function"&&t.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,l,f);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Dr(t,s,l)}}}function xt(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",t),Re("load",t);var l=!1,f=!1,m;for(m in s)if(s.hasOwnProperty(m)){var w=s[m];if(w!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ve(t,i,m,w,s,null)}}f&&Ve(t,i,"srcSet",s.srcSet,s,null),l&&Ve(t,i,"src",s.src,s,null);return;case"input":Re("invalid",t);var A=m=w=f=null,$=null,W=null;for(l in s)if(s.hasOwnProperty(l)){var ie=s[l];if(ie!=null)switch(l){case"name":f=ie;break;case"type":w=ie;break;case"checked":$=ie;break;case"defaultChecked":W=ie;break;case"value":m=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:Ve(t,i,l,ie,s,null)}}Ho(t,m,A,$,W,w,f,!1);return;case"select":Re("invalid",t),l=w=m=null;for(f in s)if(s.hasOwnProperty(f)&&(A=s[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":w=A;break;case"multiple":l=A;default:Ve(t,i,f,A,s,null)}i=m,s=w,t.multiple=!!l,i!=null?Hr(t,!!l,i,!1):s!=null&&Hr(t,!!l,s,!0);return;case"textarea":Re("invalid",t),m=f=l=null;for(w in s)if(s.hasOwnProperty(w)&&(A=s[w],A!=null))switch(w){case"value":l=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:Ve(t,i,w,A,s,null)}Ph(t,l,f,m);return;case"option":for($ in s)if(s.hasOwnProperty($)&&(l=s[$],l!=null))switch($){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ve(t,i,$,l,s,null)}return;case"dialog":Re("beforetoggle",t),Re("toggle",t),Re("cancel",t),Re("close",t);break;case"iframe":case"object":Re("load",t);break;case"video":case"audio":for(l=0;l<ks.length;l++)Re(ks[l],t);break;case"image":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"embed":case"source":case"link":Re("error",t),Re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in s)if(s.hasOwnProperty(W)&&(l=s[W],l!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ve(t,i,W,l,s,null)}return;default:if(mu(i)){for(ie in s)s.hasOwnProperty(ie)&&(l=s[ie],l!==void 0&&tf(t,i,ie,l,s,void 0));return}}for(A in s)s.hasOwnProperty(A)&&(l=s[A],l!=null&&Ve(t,i,A,l,s,null))}function R_(t,i,s,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,w=null,A=null,$=null,W=null,ie=null;for(ne in s){var ae=s[ne];if(s.hasOwnProperty(ne)&&ae!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":$=ae;default:l.hasOwnProperty(ne)||Ve(t,i,ne,null,l,ae)}}for(var te in l){var ne=l[te];if(ae=s[te],l.hasOwnProperty(te)&&(ne!=null||ae!=null))switch(te){case"type":m=ne;break;case"name":f=ne;break;case"checked":W=ne;break;case"defaultChecked":ie=ne;break;case"value":w=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,i));break;default:ne!==ae&&Ve(t,i,te,ne,l,ae)}}Fa(t,w,A,$,W,ie,m,f);return;case"select":ne=w=A=te=null;for(m in s)if($=s[m],s.hasOwnProperty(m)&&$!=null)switch(m){case"value":break;case"multiple":ne=$;default:l.hasOwnProperty(m)||Ve(t,i,m,null,l,$)}for(f in l)if(m=l[f],$=s[f],l.hasOwnProperty(f)&&(m!=null||$!=null))switch(f){case"value":te=m;break;case"defaultValue":A=m;break;case"multiple":w=m;default:m!==$&&Ve(t,i,f,m,l,$)}i=A,s=w,l=ne,te!=null?Hr(t,!!s,te,!1):!!l!=!!s&&(i!=null?Hr(t,!!s,i,!0):Hr(t,!!s,s?[]:"",!1));return;case"textarea":ne=te=null;for(A in s)if(f=s[A],s.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Ve(t,i,A,null,l,f)}for(w in l)if(f=l[w],m=s[w],l.hasOwnProperty(w)&&(f!=null||m!=null))switch(w){case"value":te=f;break;case"defaultValue":ne=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Ve(t,i,w,f,l,m)}Vh(t,te,ne);return;case"option":for(var fe in s)if(te=s[fe],s.hasOwnProperty(fe)&&te!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ve(t,i,fe,null,l,te)}for($ in l)if(te=l[$],ne=s[$],l.hasOwnProperty($)&&te!==ne&&(te!=null||ne!=null))switch($){case"selected":t.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Ve(t,i,$,te,l,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in s)te=s[ve],s.hasOwnProperty(ve)&&te!=null&&!l.hasOwnProperty(ve)&&Ve(t,i,ve,null,l,te);for(W in l)if(te=l[W],ne=s[W],l.hasOwnProperty(W)&&te!==ne&&(te!=null||ne!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:Ve(t,i,W,te,l,ne)}return;default:if(mu(i)){for(var Pe in s)te=s[Pe],s.hasOwnProperty(Pe)&&te!==void 0&&!l.hasOwnProperty(Pe)&&tf(t,i,Pe,void 0,l,te);for(ie in l)te=l[ie],ne=s[ie],!l.hasOwnProperty(ie)||te===ne||te===void 0&&ne===void 0||tf(t,i,ie,te,l,ne);return}}for(var Y in s)te=s[Y],s.hasOwnProperty(Y)&&te!=null&&!l.hasOwnProperty(Y)&&Ve(t,i,Y,null,l,te);for(ae in l)te=l[ae],ne=s[ae],!l.hasOwnProperty(ae)||te===ne||te==null&&ne==null||Ve(t,i,ae,te,l,ne)}function Xp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var f=s[l],m=f.transferSize,w=f.initiatorType,A=f.duration;if(m&&A&&Xp(w)){for(w=0,A=f.responseEnd,l+=1;l<s.length;l++){var $=s[l],W=$.startTime;if(W>A)break;var ie=$.transferSize,ae=$.initiatorType;ie&&Xp(ae)&&($=$.responseEnd,w+=ie*($<A?1:(A-W)/($-W)))}if(--l,i+=8*(m+w)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var nf=null,rf=null;function zl(t){return t.nodeType===9?t:t.ownerDocument}function Kp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zp(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function af(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sf=null;function M_(){var t=window.event;return t&&t.type==="popstate"?t===sf?!1:(sf=t,!0):(sf=null,!1)}var Qp=typeof setTimeout=="function"?setTimeout:void 0,j_=typeof clearTimeout=="function"?clearTimeout:void 0,Jp=typeof Promise=="function"?Promise:void 0,D_=typeof queueMicrotask=="function"?queueMicrotask:typeof Jp<"u"?function(t){return Jp.resolve(null).then(t).catch(z_)}:Qp;function z_(t){setTimeout(function(){throw t})}function Oi(t){return t==="head"}function Fp(t,i){var s=i,l=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(f),ya(i);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")js(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,js(s);for(var m=s.firstChild;m;){var w=m.nextSibling,A=m.nodeName;m[Ki]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||s.removeChild(m),m=w}}else s==="body"&&js(t.ownerDocument.body);s=f}while(s);ya(i)}function Wp(t,i){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?i?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(i?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function of(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":of(s),Qa(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function U_(t,i,s,l){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ki])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=sn(t.nextSibling),t===null)break}return null}function $_(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=sn(t.nextSibling),t===null))return null;return t}function ey(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=sn(t.nextSibling),t===null))return null;return t}function lf(t){return t.data==="$?"||t.data==="$~"}function cf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function L_(t,i){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||s.readyState!=="loading")i();else{var l=function(){i(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function sn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var uf=null;function ty(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(i===0)return sn(t.nextSibling);i--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||i++}t=t.nextSibling}return null}function ny(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(i===0)return t;i--}else s!=="/$"&&s!=="/&"||i++}t=t.previousSibling}return null}function iy(t,i,s){switch(i=zl(s),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function js(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Qa(t)}var on=new Map,ry=new Set;function Ul(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jn=H.d;H.d={f:H_,r:B_,D:I_,C:q_,L:V_,m:P_,X:Y_,S:G_,M:X_};function H_(){var t=Jn.f(),i=Al();return t||i}function B_(t){var i=li(t);i!==null&&i.tag===5&&i.type==="form"?xm(i):Jn.r(t)}var ga=typeof document>"u"?null:document;function ay(t,i,s){var l=ga;if(l&&typeof i=="string"&&i){var f=Tt(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),ry.has(f)||(ry.add(f),t={rel:t,crossOrigin:s,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),xt(i,"link",t),rt(i),l.head.appendChild(i)))}}function I_(t){Jn.D(t),ay("dns-prefetch",t,null)}function q_(t,i){Jn.C(t,i),ay("preconnect",t,i)}function V_(t,i,s){Jn.L(t,i,s);var l=ga;if(l&&t&&i){var f='link[rel="preload"][as="'+Tt(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Tt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Tt(s.imageSizes)+'"]')):f+='[href="'+Tt(t)+'"]';var m=f;switch(i){case"style":m=ma(t);break;case"script":m=pa(t)}on.has(m)||(t=v({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),on.set(m,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(Ds(m))||i==="script"&&l.querySelector(zs(m))||(i=l.createElement("link"),xt(i,"link",t),rt(i),l.head.appendChild(i)))}}function P_(t,i){Jn.m(t,i);var s=ga;if(s&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=pa(t)}if(!on.has(m)&&(t=v({rel:"modulepreload",href:t},i),on.set(m,t),s.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(zs(m)))return}l=s.createElement("link"),xt(l,"link",t),rt(l),s.head.appendChild(l)}}}function G_(t,i,s){Jn.S(t,i,s);var l=ga;if(l&&t){var f=ui(l).hoistableStyles,m=ma(t);i=i||"default";var w=f.get(m);if(!w){var A={loading:0,preload:null};if(w=l.querySelector(Ds(m)))A.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":i},s),(s=on.get(m))&&df(t,s);var $=w=l.createElement("link");rt($),xt($,"link",t),$._p=new Promise(function(W,ie){$.onload=W,$.onerror=ie}),$.addEventListener("load",function(){A.loading|=1}),$.addEventListener("error",function(){A.loading|=2}),A.loading|=4,$l(w,i,l)}w={type:"stylesheet",instance:w,count:1,state:A},f.set(m,w)}}}function Y_(t,i){Jn.X(t,i);var s=ga;if(s&&t){var l=ui(s).hoistableScripts,f=pa(t),m=l.get(f);m||(m=s.querySelector(zs(f)),m||(t=v({src:t,async:!0},i),(i=on.get(f))&&ff(t,i),m=s.createElement("script"),rt(m),xt(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function X_(t,i){Jn.M(t,i);var s=ga;if(s&&t){var l=ui(s).hoistableScripts,f=pa(t),m=l.get(f);m||(m=s.querySelector(zs(f)),m||(t=v({src:t,async:!0,type:"module"},i),(i=on.get(f))&&ff(t,i),m=s.createElement("script"),rt(m),xt(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function sy(t,i,s,l){var f=(f=ue.current)?Ul(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=ma(s.href),s=ui(f).hoistableStyles,l=s.get(i),l||(l={type:"style",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=ma(s.href);var m=ui(f).hoistableStyles,w=m.get(t);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,w),(m=f.querySelector(Ds(t)))&&!m._p&&(w.instance=m,w.state.loading=5),on.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},on.set(t,s),m||K_(f,t,s,w.state))),i&&l===null)throw Error(a(528,""));return w}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=pa(s),s=ui(f).hoistableScripts,l=s.get(i),l||(l={type:"script",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ma(t){return'href="'+Tt(t)+'"'}function Ds(t){return'link[rel="stylesheet"]['+t+"]"}function oy(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function K_(t,i,s,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),xt(i,"link",s),rt(i),t.head.appendChild(i))}function pa(t){return'[src="'+Tt(t)+'"]'}function zs(t){return"script[async]"+t}function ly(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(s.href)+'"]');if(l)return i.instance=l,rt(l),l;var f=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),rt(l),xt(l,"style",f),$l(l,s.precedence,t),i.instance=l;case"stylesheet":f=ma(s.href);var m=t.querySelector(Ds(f));if(m)return i.state.loading|=4,i.instance=m,rt(m),m;l=oy(s),(f=on.get(f))&&df(l,f),m=(t.ownerDocument||t).createElement("link"),rt(m);var w=m;return w._p=new Promise(function(A,$){w.onload=A,w.onerror=$}),xt(m,"link",l),i.state.loading|=4,$l(m,s.precedence,t),i.instance=m;case"script":return m=pa(s.src),(f=t.querySelector(zs(m)))?(i.instance=f,rt(f),f):(l=s,(f=on.get(m))&&(l=v({},s),ff(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),rt(f),xt(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,$l(l,s.precedence,t));return i.instance}function $l(t,i,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,w=0;w<l.length;w++){var A=l[w];if(A.dataset.precedence===i)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function df(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function ff(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Ll=null;function cy(t,i,s){if(Ll===null){var l=new Map,f=Ll=new Map;f.set(s,l)}else f=Ll,l=f.get(s),l||(l=new Map,f.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var m=s[f];if(!(m[Ki]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(i)||"";w=t+w;var A=l.get(w);A?A.push(m):l.set(w,[m])}}return l}function uy(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function Z_(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function dy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Q_(t,i,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=ma(l.href),m=i.querySelector(Ds(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Hl.bind(t),i.then(t,t)),s.state.loading|=4,s.instance=m,rt(m);return}m=i.ownerDocument||i,l=oy(l),(f=on.get(f))&&df(l,f),m=m.createElement("link"),rt(m);var w=m;w._p=new Promise(function(A,$){w.onload=A,w.onerror=$}),xt(m,"link",l),s.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Hl.bind(t),i.addEventListener("load",s),i.addEventListener("error",s))}}var hf=0;function J_(t,i){return t.stylesheets&&t.count===0&&Il(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&Il(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+i);0<t.imgBytes&&hf===0&&(hf=62500*k_());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Il(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>hf?50:800)+i);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Hl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Il(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Bl=null;function Il(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Bl=new Map,i.forEach(F_,t),Bl=null,Hl.call(t))}function F_(t,i){if(!(i.state.loading&4)){var s=Bl.get(t);if(s)var l=s.get(null);else{s=new Map,Bl.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var w=f[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(s.set(w.dataset.precedence,w),l=w)}l&&s.set(null,l)}f=i.instance,w=f.getAttribute("data-precedence"),m=s.get(w)||l,m===l&&s.set(null,f),s.set(w,f),this.count++,l=Hl.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var Us={$$typeof:_,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function W_(t,i,s,l,f,m,w,A,$){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xa(0),this.hiddenUpdates=Xa(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function fy(t,i,s,l,f,m,w,A,$,W,ie,ae){return t=new W_(t,i,s,w,$,W,ie,ae,A),i=1,m===!0&&(i|=24),m=It(3,null,null,i),t.current=m,m.stateNode=t,i=Gu(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:s,cache:i},Zu(m),t}function hy(t){return t?(t=Xr,t):Xr}function gy(t,i,s,l,f,m){f=hy(f),l.context===null?l.context=f:l.pendingContext=f,l=vi(i),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=bi(t,l,i),s!==null&&(Ut(s,t,i),gs(s,t,i))}function my(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function gf(t,i){my(t,i),(t=t.alternate)&&my(t,i)}function py(t){if(t.tag===13||t.tag===31){var i=Fi(t,67108864);i!==null&&Ut(i,t,67108864),gf(t,67108864)}}function yy(t){if(t.tag===13||t.tag===31){var i=Yt();i=Ka(i);var s=Fi(t,i);s!==null&&Ut(s,t,i),gf(t,i)}}var ql=!0;function eS(t,i,s,l){var f=R.T;R.T=null;var m=H.p;try{H.p=2,mf(t,i,s,l)}finally{H.p=m,R.T=f}}function tS(t,i,s,l){var f=R.T;R.T=null;var m=H.p;try{H.p=8,mf(t,i,s,l)}finally{H.p=m,R.T=f}}function mf(t,i,s,l){if(ql){var f=pf(l);if(f===null)ef(t,i,l,Vl,s),by(t,l);else if(iS(f,t,i,s,l))l.stopPropagation();else if(by(t,l),i&4&&-1<nS.indexOf(t)){for(;f!==null;){var m=li(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Mn(m.pendingLanes);if(w!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;w;){var $=1<<31-Nt(w);A.entanglements[1]|=$,w&=~$}Cn(m),($e&6)===0&&(Tl=yt()+500,Rs(0))}}break;case 31:case 13:A=Fi(m,2),A!==null&&Ut(A,m,2),Al(),gf(m,2)}if(m=pf(l),m===null&&ef(t,i,l,Vl,s),m===f)break;f=m}f!==null&&l.stopPropagation()}else ef(t,i,l,null,s)}}function pf(t){return t=yu(t),yf(t)}var Vl=null;function yf(t){if(Vl=null,t=oi(t),t!==null){var i=c(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=u(i),t!==null)return t;t=null}else if(s===31){if(t=d(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Vl=t,null}function vy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ar()){case kn:return 2;case si:return 8;case Pi:case nu:return 32;case Nr:return 268435456;default:return 32}default:return 32}}var vf=!1,Ri=null,ki=null,Mi=null,$s=new Map,Ls=new Map,ji=[],nS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function by(t,i){switch(t){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":$s.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ls.delete(i.pointerId)}}function Hs(t,i,s,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:s,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=li(i),i!==null&&py(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function iS(t,i,s,l,f){switch(i){case"focusin":return Ri=Hs(Ri,t,i,s,l,f),!0;case"dragenter":return ki=Hs(ki,t,i,s,l,f),!0;case"mouseover":return Mi=Hs(Mi,t,i,s,l,f),!0;case"pointerover":var m=f.pointerId;return $s.set(m,Hs($s.get(m)||null,t,i,s,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Ls.set(m,Hs(Ls.get(m)||null,t,i,s,l,f)),!0}return!1}function wy(t){var i=oi(t.target);if(i!==null){var s=c(i);if(s!==null){if(i=s.tag,i===13){if(i=u(s),i!==null){t.blockedOn=i,ko(t.priority,function(){yy(s)});return}}else if(i===31){if(i=d(s),i!==null){t.blockedOn=i,ko(t.priority,function(){yy(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=pf(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);pu=l,s.target.dispatchEvent(l),pu=null}else return i=li(s),i!==null&&py(i),t.blockedOn=s,!1;i.shift()}return!0}function xy(t,i,s){Pl(t)&&s.delete(i)}function rS(){vf=!1,Ri!==null&&Pl(Ri)&&(Ri=null),ki!==null&&Pl(ki)&&(ki=null),Mi!==null&&Pl(Mi)&&(Mi=null),$s.forEach(xy),Ls.forEach(xy)}function Gl(t,i){t.blockedOn===i&&(t.blockedOn=null,vf||(vf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rS)))}var Yl=null;function _y(t){Yl!==t&&(Yl=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Yl===t&&(Yl=null);for(var i=0;i<t.length;i+=3){var s=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(yf(l||s)===null)continue;break}var m=li(s);m!==null&&(t.splice(i,3),i-=3,md(m,{pending:!0,data:f,method:s.method,action:l},l,f))}}))}function ya(t){function i($){return Gl($,t)}Ri!==null&&Gl(Ri,t),ki!==null&&Gl(ki,t),Mi!==null&&Gl(Mi,t),$s.forEach(i),Ls.forEach(i);for(var s=0;s<ji.length;s++){var l=ji[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ji.length&&(s=ji[0],s.blockedOn===null);)wy(s),s.blockedOn===null&&ji.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var f=s[l],m=s[l+1],w=f[Et]||null;if(typeof m=="function")w||_y(s);else if(w){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,w=m[Et]||null)A=w.formAction;else if(yf(f)!==null)continue}else A=w.action;typeof A=="function"?s[l+1]=A:(s.splice(l,3),l-=3),_y(s)}}}function Sy(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function bf(t){this._internalRoot=t}Xl.prototype.render=bf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,l=Yt();gy(s,l,t,i,null,null)},Xl.prototype.unmount=bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;gy(t.current,2,null,t,null,null),Al(),i[jn]=null}};function Xl(t){this._internalRoot=t}Xl.prototype.unstable_scheduleHydration=function(t){if(t){var i=Ro();t={blockedOn:null,target:t,priority:i};for(var s=0;s<ji.length&&i!==0&&i<ji[s].priority;s++);ji.splice(s,0,t),s===0&&wy(t)}};var Ey=n.version;if(Ey!=="19.2.0")throw Error(a(527,Ey,"19.2.0"));H.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=h(i),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var aS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Gi=Kl.inject(aS),At=Kl}catch{}}return Is.createRoot=function(t,i){if(!o(t))throw Error(a(299));var s=!1,l="",f=km,m=Mm,w=jm;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=fy(t,1,!1,null,null,s,l,null,f,m,w,Sy),t[jn]=i.current,Wd(t),new bf(i)},Is.hydrateRoot=function(t,i,s){if(!o(t))throw Error(a(299));var l=!1,f="",m=km,w=Mm,A=jm,$=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.formState!==void 0&&($=s.formState)),i=fy(t,1,!0,i,s??null,l,f,$,m,w,A,Sy),i.context=hy(null),s=i.current,l=Yt(),l=Ka(l),f=vi(l),f.callback=null,bi(s,f,l),s=l,i.current.lanes=s,Xi(i,s),Cn(i),t[jn]=i.current,Wd(t),new Xl(i)},Is.version="19.2.0",Is}var Dy;function gS(){if(Dy)return _f.exports;Dy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),_f.exports=hS(),_f.exports}var mS=gS();function ut(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,a;r<e.length;r++)(a=ut(e[r]))!==""&&(n+=(n&&" ")+a);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}var pS={value:()=>{}};function Uc(){for(var e=0,n=arguments.length,r={},a;e<n;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new gc(r)}function gc(e){this._=e}function yS(e,n){return e.trim().split(/^|\s+/).map(function(r){var a="",o=r.indexOf(".");if(o>=0&&(a=r.slice(o+1),r=r.slice(0,o)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}gc.prototype=Uc.prototype={constructor:gc,on:function(e,n){var r=this._,a=yS(e+"",r),o,c=-1,u=a.length;if(arguments.length<2){for(;++c<u;)if((o=(e=a[c]).type)&&(o=vS(r[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<u;)if(o=(e=a[c]).type)r[o]=zy(r[o],e.name,n);else if(n==null)for(o in r)r[o]=zy(r[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new gc(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var r=new Array(o),a=0,o,c;a<o;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],a=0,o=c.length;a<o;++a)c[a].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],o=0,c=a.length;o<c;++o)a[o].value.apply(n,r)}};function vS(e,n){for(var r=0,a=e.length,o;r<a;++r)if((o=e[r]).name===n)return o.value}function zy(e,n,r){for(var a=0,o=e.length;a<o;++a)if(e[a].name===n){e[a]=pS,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:n,value:r}),e}var Qf="http://www.w3.org/1999/xhtml";const Uy={svg:"http://www.w3.org/2000/svg",xhtml:Qf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $c(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Uy.hasOwnProperty(n)?{space:Uy[n],local:e}:e}function bS(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Qf&&n.documentElement.namespaceURI===Qf?n.createElement(e):n.createElementNS(r,e)}}function wS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jv(e){var n=$c(e);return(n.local?wS:bS)(n)}function xS(){}function _h(e){return e==null?xS:function(){return this.querySelector(e)}}function _S(e){typeof e!="function"&&(e=_h(e));for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o)for(var c=n[o],u=c.length,d=a[o]=new Array(u),g,h,p=0;p<u;++p)(g=c[p])&&(h=e.call(g,g.__data__,p,c))&&("__data__"in g&&(h.__data__=g.__data__),d[p]=h);return new Jt(a,this._parents)}function SS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ES(){return[]}function Dv(e){return e==null?ES:function(){return this.querySelectorAll(e)}}function TS(e){return function(){return SS(e.apply(this,arguments))}}function CS(e){typeof e=="function"?e=TS(e):e=Dv(e);for(var n=this._groups,r=n.length,a=[],o=[],c=0;c<r;++c)for(var u=n[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&(a.push(e.call(g,g.__data__,h,u)),o.push(g));return new Jt(a,o)}function zv(e){return function(){return this.matches(e)}}function Uv(e){return function(n){return n.matches(e)}}var AS=Array.prototype.find;function NS(e){return function(){return AS.call(this.children,e)}}function OS(){return this.firstElementChild}function RS(e){return this.select(e==null?OS:NS(typeof e=="function"?e:Uv(e)))}var kS=Array.prototype.filter;function MS(){return Array.from(this.children)}function jS(e){return function(){return kS.call(this.children,e)}}function DS(e){return this.selectAll(e==null?MS:jS(typeof e=="function"?e:Uv(e)))}function zS(e){typeof e!="function"&&(e=zv(e));for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o)for(var c=n[o],u=c.length,d=a[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new Jt(a,this._parents)}function $v(e){return new Array(e.length)}function US(){return new Jt(this._enter||this._groups.map($v),this._parents)}function xc(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}xc.prototype={constructor:xc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $S(e){return function(){return e}}function LS(e,n,r,a,o,c){for(var u=0,d,g=n.length,h=c.length;u<h;++u)(d=n[u])?(d.__data__=c[u],a[u]=d):r[u]=new xc(e,c[u]);for(;u<g;++u)(d=n[u])&&(o[u]=d)}function HS(e,n,r,a,o,c,u){var d,g,h=new Map,p=n.length,v=c.length,y=new Array(p),b;for(d=0;d<p;++d)(g=n[d])&&(y[d]=b=u.call(g,g.__data__,d,n)+"",h.has(b)?o[d]=g:h.set(b,g));for(d=0;d<v;++d)b=u.call(e,c[d],d,c)+"",(g=h.get(b))?(a[d]=g,g.__data__=c[d],h.delete(b)):r[d]=new xc(e,c[d]);for(d=0;d<p;++d)(g=n[d])&&h.get(y[d])===g&&(o[d]=g)}function BS(e){return e.__data__}function IS(e,n){if(!arguments.length)return Array.from(this,BS);var r=n?HS:LS,a=this._parents,o=this._groups;typeof e!="function"&&(e=$S(e));for(var c=o.length,u=new Array(c),d=new Array(c),g=new Array(c),h=0;h<c;++h){var p=a[h],v=o[h],y=v.length,b=qS(e.call(p,p&&p.__data__,h,a)),E=b.length,x=d[h]=new Array(E),T=u[h]=new Array(E),C=g[h]=new Array(y);r(p,v,x,T,C,b,n);for(var k=0,_=0,N,L;k<E;++k)if(N=x[k]){for(k>=_&&(_=k+1);!(L=T[_])&&++_<E;);N._next=L||null}}return u=new Jt(u,a),u._enter=d,u._exit=g,u}function qS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function VS(){return new Jt(this._exit||this._groups.map($v),this._parents)}function PS(e,n,r){var a=this.enter(),o=this,c=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),n!=null&&(o=n(o),o&&(o=o.selection())),r==null?c.remove():r(c),a&&o?a.merge(o).order():o}function GS(e){for(var n=e.selection?e.selection():e,r=this._groups,a=n._groups,o=r.length,c=a.length,u=Math.min(o,c),d=new Array(o),g=0;g<u;++g)for(var h=r[g],p=a[g],v=h.length,y=d[g]=new Array(v),b,E=0;E<v;++E)(b=h[E]||p[E])&&(y[E]=b);for(;g<o;++g)d[g]=r[g];return new Jt(d,this._parents)}function YS(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var a=e[n],o=a.length-1,c=a[o],u;--o>=0;)(u=a[o])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function XS(e){e||(e=KS);function n(v,y){return v&&y?e(v.__data__,y.__data__):!v-!y}for(var r=this._groups,a=r.length,o=new Array(a),c=0;c<a;++c){for(var u=r[c],d=u.length,g=o[c]=new Array(d),h,p=0;p<d;++p)(h=u[p])&&(g[p]=h);g.sort(n)}return new Jt(o,this._parents).order()}function KS(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function ZS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function QS(){return Array.from(this)}function JS(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],o=0,c=a.length;o<c;++o){var u=a[o];if(u)return u}return null}function FS(){let e=0;for(const n of this)++e;return e}function WS(){return!this.node()}function e1(e){for(var n=this._groups,r=0,a=n.length;r<a;++r)for(var o=n[r],c=0,u=o.length,d;c<u;++c)(d=o[c])&&e.call(d,d.__data__,c,o);return this}function t1(e){return function(){this.removeAttribute(e)}}function n1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i1(e,n){return function(){this.setAttribute(e,n)}}function r1(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function a1(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function s1(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function o1(e,n){var r=$c(e);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((n==null?r.local?n1:t1:typeof n=="function"?r.local?s1:a1:r.local?r1:i1)(r,n))}function Lv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function l1(e){return function(){this.style.removeProperty(e)}}function c1(e,n,r){return function(){this.style.setProperty(e,n,r)}}function u1(e,n,r){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,r)}}function d1(e,n,r){return arguments.length>1?this.each((n==null?l1:typeof n=="function"?u1:c1)(e,n,r??"")):La(this.node(),e)}function La(e,n){return e.style.getPropertyValue(n)||Lv(e).getComputedStyle(e,null).getPropertyValue(n)}function f1(e){return function(){delete this[e]}}function h1(e,n){return function(){this[e]=n}}function g1(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function m1(e,n){return arguments.length>1?this.each((n==null?f1:typeof n=="function"?g1:h1)(e,n)):this.node()[e]}function Hv(e){return e.trim().split(/^|\s+/)}function Sh(e){return e.classList||new Bv(e)}function Bv(e){this._node=e,this._names=Hv(e.getAttribute("class")||"")}Bv.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Iv(e,n){for(var r=Sh(e),a=-1,o=n.length;++a<o;)r.add(n[a])}function qv(e,n){for(var r=Sh(e),a=-1,o=n.length;++a<o;)r.remove(n[a])}function p1(e){return function(){Iv(this,e)}}function y1(e){return function(){qv(this,e)}}function v1(e,n){return function(){(n.apply(this,arguments)?Iv:qv)(this,e)}}function b1(e,n){var r=Hv(e+"");if(arguments.length<2){for(var a=Sh(this.node()),o=-1,c=r.length;++o<c;)if(!a.contains(r[o]))return!1;return!0}return this.each((typeof n=="function"?v1:n?p1:y1)(r,n))}function w1(){this.textContent=""}function x1(e){return function(){this.textContent=e}}function _1(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function S1(e){return arguments.length?this.each(e==null?w1:(typeof e=="function"?_1:x1)(e)):this.node().textContent}function E1(){this.innerHTML=""}function T1(e){return function(){this.innerHTML=e}}function C1(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function A1(e){return arguments.length?this.each(e==null?E1:(typeof e=="function"?C1:T1)(e)):this.node().innerHTML}function N1(){this.nextSibling&&this.parentNode.appendChild(this)}function O1(){return this.each(N1)}function R1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function k1(){return this.each(R1)}function M1(e){var n=typeof e=="function"?e:jv(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function j1(){return null}function D1(e,n){var r=typeof e=="function"?e:jv(e),a=n==null?j1:typeof n=="function"?n:_h(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function z1(){var e=this.parentNode;e&&e.removeChild(this)}function U1(){return this.each(z1)}function $1(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function L1(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function H1(e){return this.select(e?L1:$1)}function B1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function I1(e){return function(n){e.call(this,n,this.__data__)}}function q1(e){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");return a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),{type:n,name:r}})}function V1(e){return function(){var n=this.__on;if(n){for(var r=0,a=-1,o=n.length,c;r<o;++r)c=n[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++a]=c;++a?n.length=a:delete this.__on}}}function P1(e,n,r){return function(){var a=this.__on,o,c=I1(n);if(a){for(var u=0,d=a.length;u<d;++u)if((o=a[u]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=c,o.options=r),o.value=n;return}}this.addEventListener(e.type,c,r),o={type:e.type,name:e.name,value:n,listener:c,options:r},a?a.push(o):this.__on=[o]}}function G1(e,n,r){var a=q1(e+""),o,c=a.length,u;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,h=d.length,p;g<h;++g)for(o=0,p=d[g];o<c;++o)if((u=a[o]).type===p.type&&u.name===p.name)return p.value}return}for(d=n?P1:V1,o=0;o<c;++o)this.each(d(a[o],n,r));return this}function Vv(e,n,r){var a=Lv(e),o=a.CustomEvent;typeof o=="function"?o=new o(n,r):(o=a.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function Y1(e,n){return function(){return Vv(this,e,n)}}function X1(e,n){return function(){return Vv(this,e,n.apply(this,arguments))}}function K1(e,n){return this.each((typeof n=="function"?X1:Y1)(e,n))}function*Z1(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],o=0,c=a.length,u;o<c;++o)(u=a[o])&&(yield u)}var Pv=[null];function Jt(e,n){this._groups=e,this._parents=n}function vo(){return new Jt([[document.documentElement]],Pv)}function Q1(){return this}Jt.prototype=vo.prototype={constructor:Jt,select:_S,selectAll:CS,selectChild:RS,selectChildren:DS,filter:zS,data:IS,enter:US,exit:VS,join:PS,merge:GS,selection:Q1,order:YS,sort:XS,call:ZS,nodes:QS,node:JS,size:FS,empty:WS,each:e1,attr:o1,style:d1,property:m1,classed:b1,text:S1,html:A1,raise:O1,lower:k1,append:M1,insert:D1,remove:U1,clone:H1,datum:B1,on:G1,dispatch:K1,[Symbol.iterator]:Z1};function Zt(e){return typeof e=="string"?new Jt([[document.querySelector(e)]],[document.documentElement]):new Jt([[e]],Pv)}function J1(e){let n;for(;n=e.sourceEvent;)e=n;return e}function mn(e,n){if(e=J1(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var a=r.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(n.getScreenCTM().inverse()),[a.x,a.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}const F1={passive:!1},Fs={capture:!0,passive:!1};function Cf(e){e.stopImmediatePropagation()}function za(e){e.preventDefault(),e.stopImmediatePropagation()}function Gv(e){var n=e.document.documentElement,r=Zt(e).on("dragstart.drag",za,Fs);"onselectstart"in n?r.on("selectstart.drag",za,Fs):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Yv(e,n){var r=e.document.documentElement,a=Zt(e).on("dragstart.drag",null);n&&(a.on("click.drag",za,Fs),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Ql=e=>()=>e;function Jf(e,{sourceEvent:n,subject:r,target:a,identifier:o,active:c,x:u,y:d,dx:g,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Jf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function W1(e){return!e.ctrlKey&&!e.button}function eE(){return this.parentNode}function tE(e,n){return n??{x:e.x,y:e.y}}function nE(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xv(){var e=W1,n=eE,r=tE,a=nE,o={},c=Uc("start","drag","end"),u=0,d,g,h,p,v=0;function y(N){N.on("mousedown.drag",b).filter(a).on("touchstart.drag",T).on("touchmove.drag",C,F1).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(N,L){if(!(p||!e.call(this,N,L))){var j=_(this,n.call(this,N,L),N,L,"mouse");j&&(Zt(N.view).on("mousemove.drag",E,Fs).on("mouseup.drag",x,Fs),Gv(N.view),Cf(N),h=!1,d=N.clientX,g=N.clientY,j("start",N))}}function E(N){if(za(N),!h){var L=N.clientX-d,j=N.clientY-g;h=L*L+j*j>v}o.mouse("drag",N)}function x(N){Zt(N.view).on("mousemove.drag mouseup.drag",null),Yv(N.view,h),za(N),o.mouse("end",N)}function T(N,L){if(e.call(this,N,L)){var j=N.changedTouches,U=n.call(this,N,L),V=j.length,J,oe;for(J=0;J<V;++J)(oe=_(this,U,N,L,j[J].identifier,j[J]))&&(Cf(N),oe("start",N,j[J]))}}function C(N){var L=N.changedTouches,j=L.length,U,V;for(U=0;U<j;++U)(V=o[L[U].identifier])&&(za(N),V("drag",N,L[U]))}function k(N){var L=N.changedTouches,j=L.length,U,V;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),U=0;U<j;++U)(V=o[L[U].identifier])&&(Cf(N),V("end",N,L[U]))}function _(N,L,j,U,V,J){var oe=c.copy(),Z=mn(J||j,L),ee,G,z;if((z=r.call(N,new Jf("beforestart",{sourceEvent:j,target:y,identifier:V,active:u,x:Z[0],y:Z[1],dx:0,dy:0,dispatch:oe}),U))!=null)return ee=z.x-Z[0]||0,G=z.y-Z[1]||0,function P(R,H,B){var X=Z,D;switch(R){case"start":o[V]=P,D=u++;break;case"end":delete o[V],--u;case"drag":Z=mn(B||H,L),D=u;break}oe.call(R,N,new Jf(R,{sourceEvent:H,subject:z,target:y,identifier:V,active:D,x:Z[0]+ee,y:Z[1]+G,dx:Z[0]-X[0],dy:Z[1]-X[1],dispatch:oe}),U)}}return y.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Ql(!!N),y):e},y.container=function(N){return arguments.length?(n=typeof N=="function"?N:Ql(N),y):n},y.subject=function(N){return arguments.length?(r=typeof N=="function"?N:Ql(N),y):r},y.touchable=function(N){return arguments.length?(a=typeof N=="function"?N:Ql(!!N),y):a},y.on=function(){var N=c.on.apply(c,arguments);return N===c?y:N},y.clickDistance=function(N){return arguments.length?(v=(N=+N)*N,y):Math.sqrt(v)},y}function Eh(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function Kv(e,n){var r=Object.create(e.prototype);for(var a in n)r[a]=n[a];return r}function bo(){}var Ws=.7,_c=1/Ws,Ua="\\s*([+-]?\\d+)\\s*",eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iE=/^#([0-9a-f]{3,8})$/,rE=new RegExp(`^rgb\\(${Ua},${Ua},${Ua}\\)$`),aE=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),sE=new RegExp(`^rgba\\(${Ua},${Ua},${Ua},${eo}\\)$`),oE=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${eo}\\)$`),lE=new RegExp(`^hsl\\(${eo},${Nn},${Nn}\\)$`),cE=new RegExp(`^hsla\\(${eo},${Nn},${Nn},${eo}\\)$`),$y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Eh(bo,Er,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ly,formatHex:Ly,formatHex8:uE,formatHsl:dE,formatRgb:Hy,toString:Hy});function Ly(){return this.rgb().formatHex()}function uE(){return this.rgb().formatHex8()}function dE(){return Zv(this).formatHsl()}function Hy(){return this.rgb().formatRgb()}function Er(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=iE.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?By(n):r===3?new $t(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Jl(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Jl(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=rE.exec(e))?new $t(n[1],n[2],n[3],1):(n=aE.exec(e))?new $t(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=sE.exec(e))?Jl(n[1],n[2],n[3],n[4]):(n=oE.exec(e))?Jl(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=lE.exec(e))?Vy(n[1],n[2]/100,n[3]/100,1):(n=cE.exec(e))?Vy(n[1],n[2]/100,n[3]/100,n[4]):$y.hasOwnProperty(e)?By($y[e]):e==="transparent"?new $t(NaN,NaN,NaN,0):null}function By(e){return new $t(e>>16&255,e>>8&255,e&255,1)}function Jl(e,n,r,a){return a<=0&&(e=n=r=NaN),new $t(e,n,r,a)}function fE(e){return e instanceof bo||(e=Er(e)),e?(e=e.rgb(),new $t(e.r,e.g,e.b,e.opacity)):new $t}function Ff(e,n,r,a){return arguments.length===1?fE(e):new $t(e,n,r,a??1)}function $t(e,n,r,a){this.r=+e,this.g=+n,this.b=+r,this.opacity=+a}Eh($t,Ff,Kv(bo,{brighter(e){return e=e==null?_c:Math.pow(_c,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ws:Math.pow(Ws,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $t(xr(this.r),xr(this.g),xr(this.b),Sc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Iy,formatHex:Iy,formatHex8:hE,formatRgb:qy,toString:qy}));function Iy(){return`#${br(this.r)}${br(this.g)}${br(this.b)}`}function hE(){return`#${br(this.r)}${br(this.g)}${br(this.b)}${br((isNaN(this.opacity)?1:this.opacity)*255)}`}function qy(){const e=Sc(this.opacity);return`${e===1?"rgb(":"rgba("}${xr(this.r)}, ${xr(this.g)}, ${xr(this.b)}${e===1?")":`, ${e})`}`}function Sc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function br(e){return e=xr(e),(e<16?"0":"")+e.toString(16)}function Vy(e,n,r,a){return a<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new yn(e,n,r,a)}function Zv(e){if(e instanceof yn)return new yn(e.h,e.s,e.l,e.opacity);if(e instanceof bo||(e=Er(e)),!e)return new yn;if(e instanceof yn)return e;e=e.rgb();var n=e.r/255,r=e.g/255,a=e.b/255,o=Math.min(n,r,a),c=Math.max(n,r,a),u=NaN,d=c-o,g=(c+o)/2;return d?(n===c?u=(r-a)/d+(r<a)*6:r===c?u=(a-n)/d+2:u=(n-r)/d+4,d/=g<.5?c+o:2-c-o,u*=60):d=g>0&&g<1?0:u,new yn(u,d,g,e.opacity)}function gE(e,n,r,a){return arguments.length===1?Zv(e):new yn(e,n,r,a??1)}function yn(e,n,r,a){this.h=+e,this.s=+n,this.l=+r,this.opacity=+a}Eh(yn,gE,Kv(bo,{brighter(e){return e=e==null?_c:Math.pow(_c,e),new yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ws:Math.pow(Ws,e),new yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*n,o=2*r-a;return new $t(Af(e>=240?e-240:e+120,o,a),Af(e,o,a),Af(e<120?e+240:e-120,o,a),this.opacity)},clamp(){return new yn(Py(this.h),Fl(this.s),Fl(this.l),Sc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sc(this.opacity);return`${e===1?"hsl(":"hsla("}${Py(this.h)}, ${Fl(this.s)*100}%, ${Fl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Py(e){return e=(e||0)%360,e<0?e+360:e}function Fl(e){return Math.max(0,Math.min(1,e||0))}function Af(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const Th=e=>()=>e;function mE(e,n){return function(r){return e+r*n}}function pE(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(a){return Math.pow(e+a*n,r)}}function yE(e){return(e=+e)==1?Qv:function(n,r){return r-n?pE(n,r,e):Th(isNaN(n)?r:n)}}function Qv(e,n){var r=n-e;return r?mE(e,r):Th(isNaN(e)?n:e)}const Ec=(function e(n){var r=yE(n);function a(o,c){var u=r((o=Ff(o)).r,(c=Ff(c)).r),d=r(o.g,c.g),g=r(o.b,c.b),h=Qv(o.opacity,c.opacity);return function(p){return o.r=u(p),o.g=d(p),o.b=g(p),o.opacity=h(p),o+""}}return a.gamma=e,a})(1);function vE(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,a=n.slice(),o;return function(c){for(o=0;o<r;++o)a[o]=e[o]*(1-c)+n[o]*c;return a}}function bE(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wE(e,n){var r=n?n.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),c=new Array(r),u;for(u=0;u<a;++u)o[u]=Ks(e[u],n[u]);for(;u<r;++u)c[u]=n[u];return function(d){for(u=0;u<a;++u)c[u]=o[u](d);return c}}function xE(e,n){var r=new Date;return e=+e,n=+n,function(a){return r.setTime(e*(1-a)+n*a),r}}function An(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function _E(e,n){var r={},a={},o;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in e?r[o]=Ks(e[o],n[o]):a[o]=n[o];return function(c){for(o in r)a[o]=r[o](c);return a}}var Wf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nf=new RegExp(Wf.source,"g");function SE(e){return function(){return e}}function EE(e){return function(n){return e(n)+""}}function Jv(e,n){var r=Wf.lastIndex=Nf.lastIndex=0,a,o,c,u=-1,d=[],g=[];for(e=e+"",n=n+"";(a=Wf.exec(e))&&(o=Nf.exec(n));)(c=o.index)>r&&(c=n.slice(r,c),d[u]?d[u]+=c:d[++u]=c),(a=a[0])===(o=o[0])?d[u]?d[u]+=o:d[++u]=o:(d[++u]=null,g.push({i:u,x:An(a,o)})),r=Nf.lastIndex;return r<n.length&&(c=n.slice(r),d[u]?d[u]+=c:d[++u]=c),d.length<2?g[0]?EE(g[0].x):SE(n):(n=g.length,function(h){for(var p=0,v;p<n;++p)d[(v=g[p]).i]=v.x(h);return d.join("")})}function Ks(e,n){var r=typeof n,a;return n==null||r==="boolean"?Th(n):(r==="number"?An:r==="string"?(a=Er(n))?(n=a,Ec):Jv:n instanceof Er?Ec:n instanceof Date?xE:bE(n)?vE:Array.isArray(n)?wE:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?_E:An)(e,n)}var Gy=180/Math.PI,eh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fv(e,n,r,a,o,c){var u,d,g;return(u=Math.sqrt(e*e+n*n))&&(e/=u,n/=u),(g=e*r+n*a)&&(r-=e*g,a-=n*g),(d=Math.sqrt(r*r+a*a))&&(r/=d,a/=d,g/=d),e*a<n*r&&(e=-e,n=-n,g=-g,u=-u),{translateX:o,translateY:c,rotate:Math.atan2(n,e)*Gy,skewX:Math.atan(g)*Gy,scaleX:u,scaleY:d}}var Wl;function TE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?eh:Fv(n.a,n.b,n.c,n.d,n.e,n.f)}function CE(e){return e==null||(Wl||(Wl=document.createElementNS("http://www.w3.org/2000/svg","g")),Wl.setAttribute("transform",e),!(e=Wl.transform.baseVal.consolidate()))?eh:(e=e.matrix,Fv(e.a,e.b,e.c,e.d,e.e,e.f))}function Wv(e,n,r,a){function o(h){return h.length?h.pop()+" ":""}function c(h,p,v,y,b,E){if(h!==v||p!==y){var x=b.push("translate(",null,n,null,r);E.push({i:x-4,x:An(h,v)},{i:x-2,x:An(p,y)})}else(v||y)&&b.push("translate("+v+n+y+r)}function u(h,p,v,y){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),y.push({i:v.push(o(v)+"rotate(",null,a)-2,x:An(h,p)})):p&&v.push(o(v)+"rotate("+p+a)}function d(h,p,v,y){h!==p?y.push({i:v.push(o(v)+"skewX(",null,a)-2,x:An(h,p)}):p&&v.push(o(v)+"skewX("+p+a)}function g(h,p,v,y,b,E){if(h!==v||p!==y){var x=b.push(o(b)+"scale(",null,",",null,")");E.push({i:x-4,x:An(h,v)},{i:x-2,x:An(p,y)})}else(v!==1||y!==1)&&b.push(o(b)+"scale("+v+","+y+")")}return function(h,p){var v=[],y=[];return h=e(h),p=e(p),c(h.translateX,h.translateY,p.translateX,p.translateY,v,y),u(h.rotate,p.rotate,v,y),d(h.skewX,p.skewX,v,y),g(h.scaleX,h.scaleY,p.scaleX,p.scaleY,v,y),h=p=null,function(b){for(var E=-1,x=y.length,T;++E<x;)v[(T=y[E]).i]=T.x(b);return v.join("")}}}var AE=Wv(TE,"px, ","px)","deg)"),NE=Wv(CE,", ",")",")"),OE=1e-12;function Yy(e){return((e=Math.exp(e))+1/e)/2}function RE(e){return((e=Math.exp(e))-1/e)/2}function kE(e){return((e=Math.exp(2*e))-1)/(e+1)}const mc=(function e(n,r,a){function o(c,u){var d=c[0],g=c[1],h=c[2],p=u[0],v=u[1],y=u[2],b=p-d,E=v-g,x=b*b+E*E,T,C;if(x<OE)C=Math.log(y/h)/n,T=function(U){return[d+U*b,g+U*E,h*Math.exp(n*U*C)]};else{var k=Math.sqrt(x),_=(y*y-h*h+a*x)/(2*h*r*k),N=(y*y-h*h-a*x)/(2*y*r*k),L=Math.log(Math.sqrt(_*_+1)-_),j=Math.log(Math.sqrt(N*N+1)-N);C=(j-L)/n,T=function(U){var V=U*C,J=Yy(L),oe=h/(r*k)*(J*kE(n*V+L)-RE(L));return[d+oe*b,g+oe*E,h*J/Yy(n*V+L)]}}return T.duration=C*1e3*n/Math.SQRT2,T}return o.rho=function(c){var u=Math.max(.001,+c),d=u*u,g=d*d;return e(u,d,g)},o})(Math.SQRT2,2,4);var Ha=0,Gs=0,qs=0,eb=1e3,Tc,Ys,Cc=0,Tr=0,Lc=0,to=typeof performance=="object"&&performance.now?performance:Date,tb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ch(){return Tr||(tb(ME),Tr=to.now()+Lc)}function ME(){Tr=0}function Ac(){this._call=this._time=this._next=null}Ac.prototype=nb.prototype={constructor:Ac,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Ch():+r)+(n==null?0:+n),!this._next&&Ys!==this&&(Ys?Ys._next=this:Tc=this,Ys=this),this._call=e,this._time=r,th()},stop:function(){this._call&&(this._call=null,this._time=1/0,th())}};function nb(e,n,r){var a=new Ac;return a.restart(e,n,r),a}function jE(){Ch(),++Ha;for(var e=Tc,n;e;)(n=Tr-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Ha}function Xy(){Tr=(Cc=to.now())+Lc,Ha=Gs=0;try{jE()}finally{Ha=0,zE(),Tr=0}}function DE(){var e=to.now(),n=e-Cc;n>eb&&(Lc-=n,Cc=e)}function zE(){for(var e,n=Tc,r,a=1/0;n;)n._call?(a>n._time&&(a=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Tc=r);Ys=e,th(a)}function th(e){if(!Ha){Gs&&(Gs=clearTimeout(Gs));var n=e-Tr;n>24?(e<1/0&&(Gs=setTimeout(Xy,e-to.now()-Lc)),qs&&(qs=clearInterval(qs))):(qs||(Cc=to.now(),qs=setInterval(DE,eb)),Ha=1,tb(Xy))}}function Ky(e,n,r){var a=new Ac;return n=n==null?0:+n,a.restart(o=>{a.stop(),e(o+n)},n,r),a}var UE=Uc("start","end","cancel","interrupt"),$E=[],ib=0,Zy=1,nh=2,pc=3,Qy=4,ih=5,yc=6;function Hc(e,n,r,a,o,c){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;LE(e,r,{name:n,index:a,group:o,on:UE,tween:$E,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:ib})}function Ah(e,n){var r=wn(e,n);if(r.state>ib)throw new Error("too late; already scheduled");return r}function Rn(e,n){var r=wn(e,n);if(r.state>pc)throw new Error("too late; already running");return r}function wn(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function LE(e,n,r){var a=e.__transition,o;a[n]=r,r.timer=nb(c,0,r.time);function c(h){r.state=Zy,r.timer.restart(u,r.delay,r.time),r.delay<=h&&u(h-r.delay)}function u(h){var p,v,y,b;if(r.state!==Zy)return g();for(p in a)if(b=a[p],b.name===r.name){if(b.state===pc)return Ky(u);b.state===Qy?(b.state=yc,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete a[p]):+p<n&&(b.state=yc,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete a[p])}if(Ky(function(){r.state===pc&&(r.state=Qy,r.timer.restart(d,r.delay,r.time),d(h))}),r.state=nh,r.on.call("start",e,e.__data__,r.index,r.group),r.state===nh){for(r.state=pc,o=new Array(y=r.tween.length),p=0,v=-1;p<y;++p)(b=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(o[++v]=b);o.length=v+1}}function d(h){for(var p=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(g),r.state=ih,1),v=-1,y=o.length;++v<y;)o[v].call(e,p);r.state===ih&&(r.on.call("end",e,e.__data__,r.index,r.group),g())}function g(){r.state=yc,r.timer.stop(),delete a[n];for(var h in a)return;delete e.__transition}}function vc(e,n){var r=e.__transition,a,o,c=!0,u;if(r){n=n==null?null:n+"";for(u in r){if((a=r[u]).name!==n){c=!1;continue}o=a.state>nh&&a.state<ih,a.state=yc,a.timer.stop(),a.on.call(o?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete r[u]}c&&delete e.__transition}}function HE(e){return this.each(function(){vc(this,e)})}function BE(e,n){var r,a;return function(){var o=Rn(this,e),c=o.tween;if(c!==r){a=r=c;for(var u=0,d=a.length;u<d;++u)if(a[u].name===n){a=a.slice(),a.splice(u,1);break}}o.tween=a}}function IE(e,n,r){var a,o;if(typeof r!="function")throw new Error;return function(){var c=Rn(this,e),u=c.tween;if(u!==a){o=(a=u).slice();for(var d={name:n,value:r},g=0,h=o.length;g<h;++g)if(o[g].name===n){o[g]=d;break}g===h&&o.push(d)}c.tween=o}}function qE(e,n){var r=this._id;if(e+="",arguments.length<2){for(var a=wn(this.node(),r).tween,o=0,c=a.length,u;o<c;++o)if((u=a[o]).name===e)return u.value;return null}return this.each((n==null?BE:IE)(r,e,n))}function Nh(e,n,r){var a=e._id;return e.each(function(){var o=Rn(this,a);(o.value||(o.value={}))[n]=r.apply(this,arguments)}),function(o){return wn(o,a).value[n]}}function rb(e,n){var r;return(typeof n=="number"?An:n instanceof Er?Ec:(r=Er(n))?(n=r,Ec):Jv)(e,n)}function VE(e){return function(){this.removeAttribute(e)}}function PE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function GE(e,n,r){var a,o=r+"",c;return function(){var u=this.getAttribute(e);return u===o?null:u===a?c:c=n(a=u,r)}}function YE(e,n,r){var a,o=r+"",c;return function(){var u=this.getAttributeNS(e.space,e.local);return u===o?null:u===a?c:c=n(a=u,r)}}function XE(e,n,r){var a,o,c;return function(){var u,d=r(this),g;return d==null?void this.removeAttribute(e):(u=this.getAttribute(e),g=d+"",u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d)))}}function KE(e,n,r){var a,o,c;return function(){var u,d=r(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),g=d+"",u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d)))}}function ZE(e,n){var r=$c(e),a=r==="transform"?NE:rb;return this.attrTween(e,typeof n=="function"?(r.local?KE:XE)(r,a,Nh(this,"attr."+e,n)):n==null?(r.local?PE:VE)(r):(r.local?YE:GE)(r,a,n))}function QE(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function JE(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function FE(e,n){var r,a;function o(){var c=n.apply(this,arguments);return c!==a&&(r=(a=c)&&JE(e,c)),r}return o._value=n,o}function WE(e,n){var r,a;function o(){var c=n.apply(this,arguments);return c!==a&&(r=(a=c)&&QE(e,c)),r}return o._value=n,o}function e2(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var a=$c(e);return this.tween(r,(a.local?FE:WE)(a,n))}function t2(e,n){return function(){Ah(this,e).delay=+n.apply(this,arguments)}}function n2(e,n){return n=+n,function(){Ah(this,e).delay=n}}function i2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?t2:n2)(n,e)):wn(this.node(),n).delay}function r2(e,n){return function(){Rn(this,e).duration=+n.apply(this,arguments)}}function a2(e,n){return n=+n,function(){Rn(this,e).duration=n}}function s2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?r2:a2)(n,e)):wn(this.node(),n).duration}function o2(e,n){if(typeof n!="function")throw new Error;return function(){Rn(this,e).ease=n}}function l2(e){var n=this._id;return arguments.length?this.each(o2(n,e)):wn(this.node(),n).ease}function c2(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;Rn(this,e).ease=r}}function u2(e){if(typeof e!="function")throw new Error;return this.each(c2(this._id,e))}function d2(e){typeof e!="function"&&(e=zv(e));for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o)for(var c=n[o],u=c.length,d=a[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new ti(a,this._parents,this._name,this._id)}function f2(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,a=n.length,o=r.length,c=Math.min(a,o),u=new Array(a),d=0;d<c;++d)for(var g=n[d],h=r[d],p=g.length,v=u[d]=new Array(p),y,b=0;b<p;++b)(y=g[b]||h[b])&&(v[b]=y);for(;d<a;++d)u[d]=n[d];return new ti(u,this._parents,this._name,this._id)}function h2(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function g2(e,n,r){var a,o,c=h2(n)?Ah:Rn;return function(){var u=c(this,e),d=u.on;d!==a&&(o=(a=d).copy()).on(n,r),u.on=o}}function m2(e,n){var r=this._id;return arguments.length<2?wn(this.node(),r).on.on(e):this.each(g2(r,e,n))}function p2(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function y2(){return this.on("end.remove",p2(this._id))}function v2(e){var n=this._name,r=this._id;typeof e!="function"&&(e=_h(e));for(var a=this._groups,o=a.length,c=new Array(o),u=0;u<o;++u)for(var d=a[u],g=d.length,h=c[u]=new Array(g),p,v,y=0;y<g;++y)(p=d[y])&&(v=e.call(p,p.__data__,y,d))&&("__data__"in p&&(v.__data__=p.__data__),h[y]=v,Hc(h[y],n,r,y,h,wn(p,r)));return new ti(c,this._parents,n,r)}function b2(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Dv(e));for(var a=this._groups,o=a.length,c=[],u=[],d=0;d<o;++d)for(var g=a[d],h=g.length,p,v=0;v<h;++v)if(p=g[v]){for(var y=e.call(p,p.__data__,v,g),b,E=wn(p,r),x=0,T=y.length;x<T;++x)(b=y[x])&&Hc(b,n,r,x,y,E);c.push(y),u.push(p)}return new ti(c,u,n,r)}var w2=vo.prototype.constructor;function x2(){return new w2(this._groups,this._parents)}function _2(e,n){var r,a,o;return function(){var c=La(this,e),u=(this.style.removeProperty(e),La(this,e));return c===u?null:c===r&&u===a?o:o=n(r=c,a=u)}}function ab(e){return function(){this.style.removeProperty(e)}}function S2(e,n,r){var a,o=r+"",c;return function(){var u=La(this,e);return u===o?null:u===a?c:c=n(a=u,r)}}function E2(e,n,r){var a,o,c;return function(){var u=La(this,e),d=r(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),La(this,e))),u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d))}}function T2(e,n){var r,a,o,c="style."+n,u="end."+c,d;return function(){var g=Rn(this,e),h=g.on,p=g.value[c]==null?d||(d=ab(n)):void 0;(h!==r||o!==p)&&(a=(r=h).copy()).on(u,o=p),g.on=a}}function C2(e,n,r){var a=(e+="")=="transform"?AE:rb;return n==null?this.styleTween(e,_2(e,a)).on("end.style."+e,ab(e)):typeof n=="function"?this.styleTween(e,E2(e,a,Nh(this,"style."+e,n))).each(T2(this._id,e)):this.styleTween(e,S2(e,a,n),r).on("end.style."+e,null)}function A2(e,n,r){return function(a){this.style.setProperty(e,n.call(this,a),r)}}function N2(e,n,r){var a,o;function c(){var u=n.apply(this,arguments);return u!==o&&(a=(o=u)&&A2(e,u,r)),a}return c._value=n,c}function O2(e,n,r){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;return this.tween(a,N2(e,n,r??""))}function R2(e){return function(){this.textContent=e}}function k2(e){return function(){var n=e(this);this.textContent=n??""}}function M2(e){return this.tween("text",typeof e=="function"?k2(Nh(this,"text",e)):R2(e==null?"":e+""))}function j2(e){return function(n){this.textContent=e.call(this,n)}}function D2(e){var n,r;function a(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&j2(o)),n}return a._value=e,a}function z2(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,D2(e))}function U2(){for(var e=this._name,n=this._id,r=sb(),a=this._groups,o=a.length,c=0;c<o;++c)for(var u=a[c],d=u.length,g,h=0;h<d;++h)if(g=u[h]){var p=wn(g,n);Hc(g,e,r,h,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ti(a,this._parents,e,r)}function $2(){var e,n,r=this,a=r._id,o=r.size();return new Promise(function(c,u){var d={value:u},g={value:function(){--o===0&&c()}};r.each(function(){var h=Rn(this,a),p=h.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(g)),h.on=n}),o===0&&c()})}var L2=0;function ti(e,n,r,a){this._groups=e,this._parents=n,this._name=r,this._id=a}function sb(){return++L2}var Fn=vo.prototype;ti.prototype={constructor:ti,select:v2,selectAll:b2,selectChild:Fn.selectChild,selectChildren:Fn.selectChildren,filter:d2,merge:f2,selection:x2,transition:U2,call:Fn.call,nodes:Fn.nodes,node:Fn.node,size:Fn.size,empty:Fn.empty,each:Fn.each,on:m2,attr:ZE,attrTween:e2,style:C2,styleTween:O2,text:M2,textTween:z2,remove:y2,tween:qE,delay:i2,duration:s2,ease:l2,easeVarying:u2,end:$2,[Symbol.iterator]:Fn[Symbol.iterator]};function H2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var B2={time:null,delay:0,duration:250,ease:H2};function I2(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function q2(e){var n,r;e instanceof ti?(n=e._id,e=e._name):(n=sb(),(r=B2).time=Ch(),e=e==null?null:e+"");for(var a=this._groups,o=a.length,c=0;c<o;++c)for(var u=a[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&Hc(g,e,n,h,u,r||I2(g,n));return new ti(a,this._parents,e,n)}vo.prototype.interrupt=HE;vo.prototype.transition=q2;const ec=e=>()=>e;function V2(e,{sourceEvent:n,target:r,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function ei(e,n,r){this.k=e,this.x=n,this.y=r}ei.prototype={constructor:ei,scale:function(e){return e===1?this:new ei(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new ei(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bc=new ei(1,0,0);ob.prototype=ei.prototype;function ob(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Bc;return e.__zoom}function Of(e){e.stopImmediatePropagation()}function Vs(e){e.preventDefault(),e.stopImmediatePropagation()}function P2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function G2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Jy(){return this.__zoom||Bc}function Y2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function X2(){return navigator.maxTouchPoints||"ontouchstart"in this}function K2(e,n,r){var a=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],c=e.invertY(n[0][1])-r[0][1],u=e.invertY(n[1][1])-r[1][1];return e.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function lb(){var e=P2,n=G2,r=K2,a=Y2,o=X2,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,g=mc,h=Uc("start","zoom","end"),p,v,y,b=500,E=150,x=0,T=10;function C(z){z.property("__zoom",Jy).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",J).on("dblclick.zoom",oe).filter(o).on("touchstart.zoom",Z).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(z,P,R,H){var B=z.selection?z.selection():z;B.property("__zoom",Jy),z!==B?L(z,P,R,H):B.interrupt().each(function(){j(this,arguments).event(H).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},C.scaleBy=function(z,P,R,H){C.scaleTo(z,function(){var B=this.__zoom.k,X=typeof P=="function"?P.apply(this,arguments):P;return B*X},R,H)},C.scaleTo=function(z,P,R,H){C.transform(z,function(){var B=n.apply(this,arguments),X=this.__zoom,D=R==null?N(B):typeof R=="function"?R.apply(this,arguments):R,O=X.invert(D),M=typeof P=="function"?P.apply(this,arguments):P;return r(_(k(X,M),D,O),B,u)},R,H)},C.translateBy=function(z,P,R,H){C.transform(z,function(){return r(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof R=="function"?R.apply(this,arguments):R),n.apply(this,arguments),u)},null,H)},C.translateTo=function(z,P,R,H,B){C.transform(z,function(){var X=n.apply(this,arguments),D=this.__zoom,O=H==null?N(X):typeof H=="function"?H.apply(this,arguments):H;return r(Bc.translate(O[0],O[1]).scale(D.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof R=="function"?-R.apply(this,arguments):-R),X,u)},H,B)};function k(z,P){return P=Math.max(c[0],Math.min(c[1],P)),P===z.k?z:new ei(P,z.x,z.y)}function _(z,P,R){var H=P[0]-R[0]*z.k,B=P[1]-R[1]*z.k;return H===z.x&&B===z.y?z:new ei(z.k,H,B)}function N(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function L(z,P,R,H){z.on("start.zoom",function(){j(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(H).end()}).tween("zoom",function(){var B=this,X=arguments,D=j(B,X).event(H),O=n.apply(B,X),M=R==null?N(O):typeof R=="function"?R.apply(B,X):R,K=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),Q=B.__zoom,se=typeof P=="function"?P.apply(B,X):P,ue=g(Q.invert(M).concat(K/Q.k),se.invert(M).concat(K/se.k));return function(ce){if(ce===1)ce=se;else{var le=ue(ce),de=K/le[2];ce=new ei(de,M[0]-le[0]*de,M[1]-le[1]*de)}D.zoom(null,ce)}})}function j(z,P,R){return!R&&z.__zooming||new U(z,P)}function U(z,P){this.that=z,this.args=P,this.active=0,this.sourceEvent=null,this.extent=n.apply(z,P),this.taps=0}U.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,P){return this.mouse&&z!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var P=Zt(this.that).datum();h.call(z,this.that,new V2(z,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:h}),P)}};function V(z,...P){if(!e.apply(this,arguments))return;var R=j(this,P).event(z),H=this.__zoom,B=Math.max(c[0],Math.min(c[1],H.k*Math.pow(2,a.apply(this,arguments)))),X=mn(z);if(R.wheel)(R.mouse[0][0]!==X[0]||R.mouse[0][1]!==X[1])&&(R.mouse[1]=H.invert(R.mouse[0]=X)),clearTimeout(R.wheel);else{if(H.k===B)return;R.mouse=[X,H.invert(X)],vc(this),R.start()}Vs(z),R.wheel=setTimeout(D,E),R.zoom("mouse",r(_(k(H,B),R.mouse[0],R.mouse[1]),R.extent,u));function D(){R.wheel=null,R.end()}}function J(z,...P){if(y||!e.apply(this,arguments))return;var R=z.currentTarget,H=j(this,P,!0).event(z),B=Zt(z.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",K,!0),X=mn(z,R),D=z.clientX,O=z.clientY;Gv(z.view),Of(z),H.mouse=[X,this.__zoom.invert(X)],vc(this),H.start();function M(Q){if(Vs(Q),!H.moved){var se=Q.clientX-D,ue=Q.clientY-O;H.moved=se*se+ue*ue>x}H.event(Q).zoom("mouse",r(_(H.that.__zoom,H.mouse[0]=mn(Q,R),H.mouse[1]),H.extent,u))}function K(Q){B.on("mousemove.zoom mouseup.zoom",null),Yv(Q.view,H.moved),Vs(Q),H.event(Q).end()}}function oe(z,...P){if(e.apply(this,arguments)){var R=this.__zoom,H=mn(z.changedTouches?z.changedTouches[0]:z,this),B=R.invert(H),X=R.k*(z.shiftKey?.5:2),D=r(_(k(R,X),H,B),n.apply(this,P),u);Vs(z),d>0?Zt(this).transition().duration(d).call(L,D,H,z):Zt(this).call(C.transform,D,H,z)}}function Z(z,...P){if(e.apply(this,arguments)){var R=z.touches,H=R.length,B=j(this,P,z.changedTouches.length===H).event(z),X,D,O,M;for(Of(z),D=0;D<H;++D)O=R[D],M=mn(O,this),M=[M,this.__zoom.invert(M),O.identifier],B.touch0?!B.touch1&&B.touch0[2]!==M[2]&&(B.touch1=M,B.taps=0):(B.touch0=M,X=!0,B.taps=1+!!p);p&&(p=clearTimeout(p)),X&&(B.taps<2&&(v=M[0],p=setTimeout(function(){p=null},b)),vc(this),B.start())}}function ee(z,...P){if(this.__zooming){var R=j(this,P).event(z),H=z.changedTouches,B=H.length,X,D,O,M;for(Vs(z),X=0;X<B;++X)D=H[X],O=mn(D,this),R.touch0&&R.touch0[2]===D.identifier?R.touch0[0]=O:R.touch1&&R.touch1[2]===D.identifier&&(R.touch1[0]=O);if(D=R.that.__zoom,R.touch1){var K=R.touch0[0],Q=R.touch0[1],se=R.touch1[0],ue=R.touch1[1],ce=(ce=se[0]-K[0])*ce+(ce=se[1]-K[1])*ce,le=(le=ue[0]-Q[0])*le+(le=ue[1]-Q[1])*le;D=k(D,Math.sqrt(ce/le)),O=[(K[0]+se[0])/2,(K[1]+se[1])/2],M=[(Q[0]+ue[0])/2,(Q[1]+ue[1])/2]}else if(R.touch0)O=R.touch0[0],M=R.touch0[1];else return;R.zoom("touch",r(_(D,O,M),R.extent,u))}}function G(z,...P){if(this.__zooming){var R=j(this,P).event(z),H=z.changedTouches,B=H.length,X,D;for(Of(z),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),X=0;X<B;++X)D=H[X],R.touch0&&R.touch0[2]===D.identifier?delete R.touch0:R.touch1&&R.touch1[2]===D.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(D=mn(D,this),Math.hypot(v[0]-D[0],v[1]-D[1])<T)){var O=Zt(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return C.wheelDelta=function(z){return arguments.length?(a=typeof z=="function"?z:ec(+z),C):a},C.filter=function(z){return arguments.length?(e=typeof z=="function"?z:ec(!!z),C):e},C.touchable=function(z){return arguments.length?(o=typeof z=="function"?z:ec(!!z),C):o},C.extent=function(z){return arguments.length?(n=typeof z=="function"?z:ec([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),C):n},C.scaleExtent=function(z){return arguments.length?(c[0]=+z[0],c[1]=+z[1],C):[c[0],c[1]]},C.translateExtent=function(z){return arguments.length?(u[0][0]=+z[0][0],u[1][0]=+z[1][0],u[0][1]=+z[0][1],u[1][1]=+z[1][1],C):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},C.constrain=function(z){return arguments.length?(r=z,C):r},C.duration=function(z){return arguments.length?(d=+z,C):d},C.interpolate=function(z){return arguments.length?(g=z,C):g},C.on=function(){var z=h.on.apply(h,arguments);return z===h?C:z},C.clickDistance=function(z){return arguments.length?(x=(z=+z)*z,C):Math.sqrt(x)},C.tapDistance=function(z){return arguments.length?(T=+z,C):T},C}const On={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:r,targetHandle:a})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:a}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},no=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],cb=["Enter"," ","Escape"],ub={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:r})=>`Moved selected node ${e}. New position, x: ${n}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ba;(function(e){e.Strict="strict",e.Loose="loose"})(Ba||(Ba={}));var _r;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(_r||(_r={}));var io;(function(e){e.Partial="partial",e.Full="full"})(io||(io={}));const db={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Li;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Li||(Li={}));var Sr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Sr||(Sr={}));var he;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(he||(he={}));const Fy={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function fb(e){return e===null?null:e?"valid":"invalid"}const hb=e=>"id"in e&&"source"in e&&"target"in e,Z2=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Oh=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),wo=(e,n=[0,0])=>{const{width:r,height:a}=ni(e),o=e.origin??n,c=r*o[0],u=a*o[1];return{x:e.position.x-c,y:e.position.y-u}},Q2=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((a,o)=>{const c=typeof o=="string";let u=!n.nodeLookup&&!c?o:void 0;n.nodeLookup&&(u=c?n.nodeLookup.get(o):Oh(o)?o:n.nodeLookup.get(o.id));const d=u?Nc(u,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ic(a,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return qc(r)},xo=(e,n={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return e.forEach(o=>{(n.filter===void 0||n.filter(o))&&(r=Ic(r,Nc(o)),a=!0)}),a?qc(r):{x:0,y:0,width:0,height:0}},Rh=(e,n,[r,a,o]=[0,0,1],c=!1,u=!1)=>{const d={...So(n,[r,a,o]),width:n.width/o,height:n.height/o},g=[];for(const h of e.values()){const{measured:p,selectable:v=!0,hidden:y=!1}=h;if(u&&!v||y)continue;const b=p.width??h.width??h.initialWidth??null,E=p.height??h.height??h.initialHeight??null,x=ro(d,qa(h)),T=(b??0)*(E??0),C=c&&x>0;(!h.internals.handleBounds||C||x>=T||h.dragging)&&g.push(h)}return g},J2=(e,n)=>{const r=new Set;return e.forEach(a=>{r.add(a.id)}),n.filter(a=>r.has(a.source)||r.has(a.target))};function F2(e,n){const r=new Map,a=n?.nodes?new Set(n.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(n?.includeHiddenNodes||!o.hidden)&&(!a||a.has(o.id))&&r.set(o.id,o)}),r}async function W2({nodes:e,width:n,height:r,panZoom:a,minZoom:o,maxZoom:c},u){if(e.size===0)return Promise.resolve(!0);const d=F2(e,u),g=xo(d),h=kh(g,n,r,u?.minZoom??o,u?.maxZoom??c,u?.padding??.1);return await a.setViewport(h,{duration:u?.duration,ease:u?.ease,interpolate:u?.interpolate}),Promise.resolve(!0)}function gb({nodeId:e,nextPosition:n,nodeLookup:r,nodeOrigin:a=[0,0],nodeExtent:o,onError:c}){const u=r.get(e),d=u.parentId?r.get(u.parentId):void 0,{x:g,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},p=u.origin??a;let v=u.extent||o;if(u.extent==="parent"&&!u.expandParent)if(!d)c?.("005",On.error005());else{const b=d.measured.width,E=d.measured.height;b&&E&&(v=[[g,h],[g+b,h+E]])}else d&&Va(u.extent)&&(v=[[u.extent[0][0]+g,u.extent[0][1]+h],[u.extent[1][0]+g,u.extent[1][1]+h]]);const y=Va(v)?Cr(n,v,u.measured):n;return(u.measured.width===void 0||u.measured.height===void 0)&&c?.("015",On.error015()),{position:{x:y.x-g+(u.measured.width??0)*p[0],y:y.y-h+(u.measured.height??0)*p[1]},positionAbsolute:y}}async function eT({nodesToRemove:e=[],edgesToRemove:n=[],nodes:r,edges:a,onBeforeDelete:o}){const c=new Set(e.map(y=>y.id)),u=[];for(const y of r){if(y.deletable===!1)continue;const b=c.has(y.id),E=!b&&y.parentId&&u.find(x=>x.id===y.parentId);(b||E)&&u.push(y)}const d=new Set(n.map(y=>y.id)),g=a.filter(y=>y.deletable!==!1),p=J2(u,g);for(const y of g)d.has(y.id)&&!p.find(E=>E.id===y.id)&&p.push(y);if(!o)return{edges:p,nodes:u};const v=await o({nodes:u,edges:p});return typeof v=="boolean"?v?{edges:p,nodes:u}:{edges:[],nodes:[]}:v}const Ia=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),Cr=(e={x:0,y:0},n,r)=>({x:Ia(e.x,n[0][0],n[1][0]-(r?.width??0)),y:Ia(e.y,n[0][1],n[1][1]-(r?.height??0))});function mb(e,n,r){const{width:a,height:o}=ni(r),{x:c,y:u}=r.internals.positionAbsolute;return Cr(e,[[c,u],[c+a,u+o]],n)}const Wy=(e,n,r)=>e<n?Ia(Math.abs(e-n),1,n)/n:e>r?-Ia(Math.abs(e-r),1,n)/n:0,pb=(e,n,r=15,a=40)=>{const o=Wy(e.x,a,n.width-a)*r,c=Wy(e.y,a,n.height-a)*r;return[o,c]},Ic=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),rh=({x:e,y:n,width:r,height:a})=>({x:e,y:n,x2:e+r,y2:n+a}),qc=({x:e,y:n,x2:r,y2:a})=>({x:e,y:n,width:r-e,height:a-n}),qa=(e,n=[0,0])=>{const{x:r,y:a}=Oh(e)?e.internals.positionAbsolute:wo(e,n);return{x:r,y:a,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Nc=(e,n=[0,0])=>{const{x:r,y:a}=Oh(e)?e.internals.positionAbsolute:wo(e,n);return{x:r,y:a,x2:r+(e.measured?.width??e.width??e.initialWidth??0),y2:a+(e.measured?.height??e.height??e.initialHeight??0)}},yb=(e,n)=>qc(Ic(rh(e),rh(n))),ro=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),a=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*a)},e0=e=>vn(e.width)&&vn(e.height)&&vn(e.x)&&vn(e.y),vn=e=>!isNaN(e)&&isFinite(e),tT=(e,n)=>{},_o=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),So=({x:e,y:n},[r,a,o],c=!1,u=[1,1])=>{const d={x:(e-r)/o,y:(n-a)/o};return c?_o(d,u):d},Oc=({x:e,y:n},[r,a,o])=>({x:e*o+r,y:n*o+a});function va(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(n*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function nT(e,n,r){if(typeof e=="string"||typeof e=="number"){const a=va(e,r),o=va(e,n);return{top:a,right:o,bottom:a,left:o,x:o*2,y:a*2}}if(typeof e=="object"){const a=va(e.top??e.y??0,r),o=va(e.bottom??e.y??0,r),c=va(e.left??e.x??0,n),u=va(e.right??e.x??0,n);return{top:a,right:u,bottom:o,left:c,x:c+u,y:a+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function iT(e,n,r,a,o,c){const{x:u,y:d}=Oc(e,[n,r,a]),{x:g,y:h}=Oc({x:e.x+e.width,y:e.y+e.height},[n,r,a]),p=o-g,v=c-h;return{left:Math.floor(u),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(v)}}const kh=(e,n,r,a,o,c)=>{const u=nT(c,n,r),d=(n-u.x)/e.width,g=(r-u.y)/e.height,h=Math.min(d,g),p=Ia(h,a,o),v=e.x+e.width/2,y=e.y+e.height/2,b=n/2-v*p,E=r/2-y*p,x=iT(e,b,E,p,n,r),T={left:Math.min(x.left-u.left,0),top:Math.min(x.top-u.top,0),right:Math.min(x.right-u.right,0),bottom:Math.min(x.bottom-u.bottom,0)};return{x:b-T.left+T.right,y:E-T.top+T.bottom,zoom:p}},ao=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Va(e){return e!=null&&e!=="parent"}function ni(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function vb(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function bb(e,n={width:0,height:0},r,a,o){const c={...e},u=a.get(r);if(u){const d=u.origin||o;c.x+=u.internals.positionAbsolute.x-(n.width??0)*d[0],c.y+=u.internals.positionAbsolute.y-(n.height??0)*d[1]}return c}function t0(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function rT(){let e,n;return{promise:new Promise((a,o)=>{e=a,n=o}),resolve:e,reject:n}}function aT(e){return{...ub,...e||{}}}function Zs(e,{snapGrid:n=[0,0],snapToGrid:r=!1,transform:a,containerBounds:o}){const{x:c,y:u}=bn(e),d=So({x:c-(o?.left??0),y:u-(o?.top??0)},a),{x:g,y:h}=r?_o(d,n):d;return{xSnapped:g,ySnapped:h,...d}}const Mh=e=>({width:e.offsetWidth,height:e.offsetHeight}),wb=e=>e?.getRootNode?.()||window?.document,sT=["INPUT","SELECT","TEXTAREA"];function xb(e){const n=e.composedPath?.()?.[0]||e.target;return n?.nodeType!==1?!1:sT.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const _b=e=>"clientX"in e,bn=(e,n)=>{const r=_b(e),a=r?e.clientX:e.touches?.[0].clientX,o=r?e.clientY:e.touches?.[0].clientY;return{x:a-(n?.left??0),y:o-(n?.top??0)}},n0=(e,n,r,a,o)=>{const c=n.querySelectorAll(`.${e}`);return!c||!c.length?null:Array.from(c).map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:o,position:u.getAttribute("data-handlepos"),x:(d.left-r.left)/a,y:(d.top-r.top)/a,...Mh(u)}})};function Sb({sourceX:e,sourceY:n,targetX:r,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d}){const g=e*.125+o*.375+u*.375+r*.125,h=n*.125+c*.375+d*.375+a*.125,p=Math.abs(g-e),v=Math.abs(h-n);return[g,h,p,v]}function tc(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function i0({pos:e,x1:n,y1:r,x2:a,y2:o,c}){switch(e){case he.Left:return[n-tc(n-a,c),r];case he.Right:return[n+tc(a-n,c),r];case he.Top:return[n,r-tc(r-o,c)];case he.Bottom:return[n,r+tc(o-r,c)]}}function Eb({sourceX:e,sourceY:n,sourcePosition:r=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top,curvature:u=.25}){const[d,g]=i0({pos:r,x1:e,y1:n,x2:a,y2:o,c:u}),[h,p]=i0({pos:c,x1:a,y1:o,x2:e,y2:n,c:u}),[v,y,b,E]=Sb({sourceX:e,sourceY:n,targetX:a,targetY:o,sourceControlX:d,sourceControlY:g,targetControlX:h,targetControlY:p});return[`M${e},${n} C${d},${g} ${h},${p} ${a},${o}`,v,y,b,E]}function Tb({sourceX:e,sourceY:n,targetX:r,targetY:a}){const o=Math.abs(r-e)/2,c=r<e?r+o:r-o,u=Math.abs(a-n)/2,d=a<n?a+u:a-u;return[c,d,o,u]}function oT({sourceNode:e,targetNode:n,selected:r=!1,zIndex:a,elevateOnSelect:o=!1}){if(a!==void 0)return a;const c=o&&r?1e3:0,u=Math.max(e.parentId||o&&e.selected?e.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return c+u}function lT({sourceNode:e,targetNode:n,width:r,height:a,transform:o}){const c=Ic(Nc(e),Nc(n));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u={x:-o[0]/o[2],y:-o[1]/o[2],width:r/o[2],height:a/o[2]};return ro(u,qc(c))>0}const cT=({source:e,sourceHandle:n,target:r,targetHandle:a})=>`xy-edge__${e}${n||""}-${r}${a||""}`,uT=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Cb=(e,n)=>{if(!e.source||!e.target)return n;let r;return hb(e)?r={...e}:r={...e,id:cT(e)},uT(r,n)?n:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,n.concat(r))};function Ab({sourceX:e,sourceY:n,targetX:r,targetY:a}){const[o,c,u,d]=Tb({sourceX:e,sourceY:n,targetX:r,targetY:a});return[`M ${e},${n}L ${r},${a}`,o,c,u,d]}const r0={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},dT=({source:e,sourcePosition:n=he.Bottom,target:r})=>n===he.Left||n===he.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},a0=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function fT({source:e,sourcePosition:n=he.Bottom,target:r,targetPosition:a=he.Top,center:o,offset:c,stepPosition:u}){const d=r0[n],g=r0[a],h={x:e.x+d.x*c,y:e.y+d.y*c},p={x:r.x+g.x*c,y:r.y+g.y*c},v=dT({source:h,sourcePosition:n,target:p}),y=v.x!==0?"x":"y",b=v[y];let E=[],x,T;const C={x:0,y:0},k={x:0,y:0},[,,_,N]=Tb({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(d[y]*g[y]===-1){y==="x"?(x=o.x??h.x+(p.x-h.x)*u,T=o.y??(h.y+p.y)/2):(x=o.x??(h.x+p.x)/2,T=o.y??h.y+(p.y-h.y)*u);const j=[{x,y:h.y},{x,y:p.y}],U=[{x:h.x,y:T},{x:p.x,y:T}];d[y]===b?E=y==="x"?j:U:E=y==="x"?U:j}else{const j=[{x:h.x,y:p.y}],U=[{x:p.x,y:h.y}];if(y==="x"?E=d.x===b?U:j:E=d.y===b?j:U,n===a){const ee=Math.abs(e[y]-r[y]);if(ee<=c){const G=Math.min(c-1,c-ee);d[y]===b?C[y]=(h[y]>e[y]?-1:1)*G:k[y]=(p[y]>r[y]?-1:1)*G}}if(n!==a){const ee=y==="x"?"y":"x",G=d[y]===g[ee],z=h[ee]>p[ee],P=h[ee]<p[ee];(d[y]===1&&(!G&&z||G&&P)||d[y]!==1&&(!G&&P||G&&z))&&(E=y==="x"?j:U)}const V={x:h.x+C.x,y:h.y+C.y},J={x:p.x+k.x,y:p.y+k.y},oe=Math.max(Math.abs(V.x-E[0].x),Math.abs(J.x-E[0].x)),Z=Math.max(Math.abs(V.y-E[0].y),Math.abs(J.y-E[0].y));oe>=Z?(x=(V.x+J.x)/2,T=E[0].y):(x=E[0].x,T=(V.y+J.y)/2)}return[[e,{x:h.x+C.x,y:h.y+C.y},...E,{x:p.x+k.x,y:p.y+k.y},r],x,T,_,N]}function hT(e,n,r,a){const o=Math.min(a0(e,n)/2,a0(n,r)/2,a),{x:c,y:u}=n;if(e.x===c&&c===r.x||e.y===u&&u===r.y)return`L${c} ${u}`;if(e.y===u){const h=e.x<r.x?-1:1,p=e.y<r.y?1:-1;return`L ${c+o*h},${u}Q ${c},${u} ${c},${u+o*p}`}const d=e.x<r.x?1:-1,g=e.y<r.y?-1:1;return`L ${c},${u+o*g}Q ${c},${u} ${c+o*d},${u}`}function ah({sourceX:e,sourceY:n,sourcePosition:r=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top,borderRadius:u=5,centerX:d,centerY:g,offset:h=20,stepPosition:p=.5}){const[v,y,b,E,x]=fT({source:{x:e,y:n},sourcePosition:r,target:{x:a,y:o},targetPosition:c,center:{x:d,y:g},offset:h,stepPosition:p});return[v.reduce((C,k,_)=>{let N="";return _>0&&_<v.length-1?N=hT(v[_-1],k,v[_+1],u):N=`${_===0?"M":"L"}${k.x} ${k.y}`,C+=N,C},""),y,b,E,x]}function s0(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function gT(e){const{sourceNode:n,targetNode:r}=e;if(!s0(n)||!s0(r))return null;const a=n.internals.handleBounds||o0(n.handles),o=r.internals.handleBounds||o0(r.handles),c=l0(a?.source??[],e.sourceHandle),u=l0(e.connectionMode===Ba.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!c||!u)return e.onError?.("008",On.error008(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=c?.position||he.Bottom,g=u?.position||he.Top,h=so(n,c,d),p=so(r,u,g);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:g}}function o0(e){if(!e)return null;const n=[],r=[];for(const a of e)a.width=a.width??1,a.height=a.height??1,a.type==="source"?n.push(a):a.type==="target"&&r.push(a);return{source:n,target:r}}function so(e,n,r=he.Left,a=!1){const o=(n?.x??0)+e.internals.positionAbsolute.x,c=(n?.y??0)+e.internals.positionAbsolute.y,{width:u,height:d}=n??ni(e);if(a)return{x:o+u/2,y:c+d/2};switch(n?.position??r){case he.Top:return{x:o+u/2,y:c};case he.Right:return{x:o+u,y:c+d/2};case he.Bottom:return{x:o+u/2,y:c+d};case he.Left:return{x:o,y:c+d/2}}}function l0(e,n){return e&&(n?e.find(r=>r.id===n):e[0])||null}function sh(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`:""}function mT(e,{id:n,defaultColor:r,defaultMarkerStart:a,defaultMarkerEnd:o}){const c=new Set;return e.reduce((u,d)=>([d.markerStart||a,d.markerEnd||o].forEach(g=>{if(g&&typeof g=="object"){const h=sh(g,n);c.has(h)||(u.push({id:h,color:g.color||r,...g}),c.add(h))}}),u),[]).sort((u,d)=>u.id.localeCompare(d.id))}const Nb=1e3,pT=10,jh={nodeOrigin:[0,0],nodeExtent:no,elevateNodesOnSelect:!0,defaults:{}},yT={...jh,checkEquality:!0};function Dh(e,n){const r={...e};for(const a in n)n[a]!==void 0&&(r[a]=n[a]);return r}function vT(e,n,r){const a=Dh(jh,r);for(const o of e.values())if(o.parentId)zh(o,e,n,a);else{const c=wo(o,a.nodeOrigin),u=Va(o.extent)?o.extent:a.nodeExtent,d=Cr(c,u,ni(o));o.internals.positionAbsolute=d}}function bT(e,n){if(!e.handles)return e.measured?n?.internals.handleBounds:void 0;const r=[],a=[];for(const o of e.handles){const c={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?r.push(c):o.type==="target"&&a.push(c)}return{source:r,target:a}}function oh(e,n,r,a){const o=Dh(yT,a);let c={i:-1},u=e.length>0;const d=new Map(n),g=o?.elevateNodesOnSelect?Nb:0;n.clear(),r.clear();for(const h of e){let p=d.get(h.id);if(o.checkEquality&&h===p?.internals.userNode)n.set(h.id,p);else{const v=wo(h,o.nodeOrigin),y=Va(h.extent)?h.extent:o.nodeExtent,b=Cr(v,y,ni(h));p={...o.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:b,handleBounds:bT(h,p),z:Ob(h,g),userNode:h}},n.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(u=!1),h.parentId&&zh(p,n,r,a,c)}return u}function wT(e,n){if(!e.parentId)return;const r=n.get(e.parentId);r?r.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function zh(e,n,r,a,o){const{elevateNodesOnSelect:c,nodeOrigin:u,nodeExtent:d}=Dh(jh,a),g=e.parentId,h=n.get(g);if(!h){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}wT(e,r),o&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++o.i,h.internals.z=h.internals.z+o.i*pT),o&&h.internals.rootParentIndex!==void 0&&(o.i=h.internals.rootParentIndex);const p=c?Nb:0,{x:v,y,z:b}=xT(e,h,u,d,p),{positionAbsolute:E}=e.internals,x=v!==E.x||y!==E.y;(x||b!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:v,y}:E,z:b}})}function Ob(e,n){return(vn(e.zIndex)?e.zIndex:0)+(e.selected?n:0)}function xT(e,n,r,a,o){const{x:c,y:u}=n.internals.positionAbsolute,d=ni(e),g=wo(e,r),h=Va(e.extent)?Cr(g,e.extent,d):g;let p=Cr({x:c+h.x,y:u+h.y},a,d);e.extent==="parent"&&(p=mb(p,d,n));const v=Ob(e,o),y=n.internals.z??0;return{x:p.x,y:p.y,z:y>=v?y+1:v}}function Uh(e,n,r,a=[0,0]){const o=[],c=new Map;for(const u of e){const d=n.get(u.parentId);if(!d)continue;const g=c.get(u.parentId)?.expandedRect??qa(d),h=yb(g,u.rect);c.set(u.parentId,{expandedRect:h,parent:d})}return c.size>0&&c.forEach(({expandedRect:u,parent:d},g)=>{const h=d.internals.positionAbsolute,p=ni(d),v=d.origin??a,y=u.x<h.x?Math.round(Math.abs(h.x-u.x)):0,b=u.y<h.y?Math.round(Math.abs(h.y-u.y)):0,E=Math.max(p.width,Math.round(u.width)),x=Math.max(p.height,Math.round(u.height)),T=(E-p.width)*v[0],C=(x-p.height)*v[1];(y>0||b>0||T||C)&&(o.push({id:g,type:"position",position:{x:d.position.x-y+T,y:d.position.y-b+C}}),r.get(g)?.forEach(k=>{e.some(_=>_.id===k.id)||o.push({id:k.id,type:"position",position:{x:k.position.x+y,y:k.position.y+b}})})),(p.width<u.width||p.height<u.height||y||b)&&o.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:E+(y?v[0]*y-T:0),height:x+(b?v[1]*b-C:0)}})}),o}function _T(e,n,r,a,o,c){const u=a?.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const g=[],h=window.getComputedStyle(u),{m22:p}=new window.DOMMatrixReadOnly(h.transform),v=[];for(const y of e.values()){const b=n.get(y.id);if(!b)continue;if(b.hidden){n.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const E=Mh(y.nodeElement),x=b.measured.width!==E.width||b.measured.height!==E.height;if(!!(E.width&&E.height&&(x||!b.internals.handleBounds||y.force))){const C=y.nodeElement.getBoundingClientRect(),k=Va(b.extent)?b.extent:c;let{positionAbsolute:_}=b.internals;b.parentId&&b.extent==="parent"?_=mb(_,E,n.get(b.parentId)):k&&(_=Cr(_,k,E));const N={...b,measured:E,internals:{...b.internals,positionAbsolute:_,handleBounds:{source:n0("source",y.nodeElement,C,p,b.id),target:n0("target",y.nodeElement,C,p,b.id)}}};n.set(b.id,N),b.parentId&&zh(N,n,r,{nodeOrigin:o}),d=!0,x&&(g.push({id:b.id,type:"dimensions",dimensions:E}),b.expandParent&&b.parentId&&v.push({id:b.id,parentId:b.parentId,rect:qa(N,o)}))}}if(v.length>0){const y=Uh(v,n,r,o);g.push(...y)}return{changes:g,updatedInternals:d}}async function ST({delta:e,panZoom:n,transform:r,translateExtent:a,width:o,height:c}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const u=await n.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[o,c]],a),d=!!u&&(u.x!==r[0]||u.y!==r[1]||u.k!==r[2]);return Promise.resolve(d)}function c0(e,n,r,a,o,c){let u=o;const d=a.get(u)||new Map;a.set(u,d.set(r,n)),u=`${o}-${e}`;const g=a.get(u)||new Map;if(a.set(u,g.set(r,n)),c){u=`${o}-${e}-${c}`;const h=a.get(u)||new Map;a.set(u,h.set(r,n))}}function Rb(e,n,r){e.clear(),n.clear();for(const a of r){const{source:o,target:c,sourceHandle:u=null,targetHandle:d=null}=a,g={edgeId:a.id,source:o,target:c,sourceHandle:u,targetHandle:d},h=`${o}-${u}--${c}-${d}`,p=`${c}-${d}--${o}-${u}`;c0("source",g,p,e,o,u),c0("target",g,h,e,c,d),n.set(a.id,a)}}function kb(e,n){if(!e.parentId)return!1;const r=n.get(e.parentId);return r?r.selected?!0:kb(r,n):!1}function u0(e,n,r){let a=e;do{if(a?.matches?.(n))return!0;if(a===r)return!1;a=a?.parentElement}while(a);return!1}function ET(e,n,r,a){const o=new Map;for(const[c,u]of e)if((u.selected||u.id===a)&&(!u.parentId||!kb(u,e))&&(u.draggable||n&&typeof u.draggable>"u")){const d=e.get(c);d&&o.set(c,{id:c,position:d.position||{x:0,y:0},distance:{x:r.x-d.internals.positionAbsolute.x,y:r.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return o}function Rf({nodeId:e,dragItems:n,nodeLookup:r,dragging:a=!0}){const o=[];for(const[u,d]of n){const g=r.get(u)?.internals.userNode;g&&o.push({...g,position:d.position,dragging:a})}if(!e)return[o[0],o];const c=r.get(e)?.internals.userNode;return[c?{...c,position:n.get(e)?.position||c.position,dragging:a}:o[0],o]}function TT({dragItems:e,snapGrid:n,x:r,y:a}){const o=e.values().next().value;if(!o)return null;const c={x:r-o.distance.x,y:a-o.distance.y},u=_o(c,n);return{x:u.x-c.x,y:u.y-c.y}}function CT({onNodeMouseDown:e,getStoreItems:n,onDragStart:r,onDrag:a,onDragStop:o}){let c={x:null,y:null},u=0,d=new Map,g=!1,h={x:0,y:0},p=null,v=!1,y=null,b=!1,E=!1,x=null;function T({noDragClassName:k,handleSelector:_,domNode:N,isSelectable:L,nodeId:j,nodeClickDistance:U=0}){y=Zt(N);function V({x:ee,y:G}){const{nodeLookup:z,nodeExtent:P,snapGrid:R,snapToGrid:H,nodeOrigin:B,onNodeDrag:X,onSelectionDrag:D,onError:O,updateNodePositions:M}=n();c={x:ee,y:G};let K=!1;const Q=d.size>1,se=Q&&P?rh(xo(d)):null,ue=Q&&H?TT({dragItems:d,snapGrid:R,x:ee,y:G}):null;for(const[ce,le]of d){if(!z.has(ce))continue;let de={x:ee-le.distance.x,y:G-le.distance.y};H&&(de=ue?{x:Math.round(de.x+ue.x),y:Math.round(de.y+ue.y)}:_o(de,R));let Ee=null;if(Q&&P&&!le.extent&&se){const{positionAbsolute:xe}=le.internals,Ce=xe.x-se.x+P[0][0],Ie=xe.x+le.measured.width-se.x2+P[1][0],Ge=xe.y-se.y+P[0][1],mt=xe.y+le.measured.height-se.y2+P[1][1];Ee=[[Ce,Ge],[Ie,mt]]}const{position:_e,positionAbsolute:pe}=gb({nodeId:ce,nextPosition:de,nodeLookup:z,nodeExtent:Ee||P,nodeOrigin:B,onError:O});K=K||le.position.x!==_e.x||le.position.y!==_e.y,le.position=_e,le.internals.positionAbsolute=pe}if(E=E||K,!!K&&(M(d,!0),x&&(a||X||!j&&D))){const[ce,le]=Rf({nodeId:j,dragItems:d,nodeLookup:z});a?.(x,d,ce,le),X?.(x,ce,le),j||D?.(x,le)}}async function J(){if(!p)return;const{transform:ee,panBy:G,autoPanSpeed:z,autoPanOnNodeDrag:P}=n();if(!P){g=!1,cancelAnimationFrame(u);return}const[R,H]=pb(h,p,z);(R!==0||H!==0)&&(c.x=(c.x??0)-R/ee[2],c.y=(c.y??0)-H/ee[2],await G({x:R,y:H})&&V(c)),u=requestAnimationFrame(J)}function oe(ee){const{nodeLookup:G,multiSelectionActive:z,nodesDraggable:P,transform:R,snapGrid:H,snapToGrid:B,selectNodesOnDrag:X,onNodeDragStart:D,onSelectionDragStart:O,unselectNodesAndEdges:M}=n();v=!0,(!X||!L)&&!z&&j&&(G.get(j)?.selected||M()),L&&X&&j&&e?.(j);const K=Zs(ee.sourceEvent,{transform:R,snapGrid:H,snapToGrid:B,containerBounds:p});if(c=K,d=ET(G,P,K,j),d.size>0&&(r||D||!j&&O)){const[Q,se]=Rf({nodeId:j,dragItems:d,nodeLookup:G});r?.(ee.sourceEvent,d,Q,se),D?.(ee.sourceEvent,Q,se),j||O?.(ee.sourceEvent,se)}}const Z=Xv().clickDistance(U).on("start",ee=>{const{domNode:G,nodeDragThreshold:z,transform:P,snapGrid:R,snapToGrid:H}=n();p=G?.getBoundingClientRect()||null,b=!1,E=!1,x=ee.sourceEvent,z===0&&oe(ee),c=Zs(ee.sourceEvent,{transform:P,snapGrid:R,snapToGrid:H,containerBounds:p}),h=bn(ee.sourceEvent,p)}).on("drag",ee=>{const{autoPanOnNodeDrag:G,transform:z,snapGrid:P,snapToGrid:R,nodeDragThreshold:H,nodeLookup:B}=n(),X=Zs(ee.sourceEvent,{transform:z,snapGrid:P,snapToGrid:R,containerBounds:p});if(x=ee.sourceEvent,(ee.sourceEvent.type==="touchmove"&&ee.sourceEvent.touches.length>1||j&&!B.has(j))&&(b=!0),!b){if(!g&&G&&v&&(g=!0,J()),!v){const D=bn(ee.sourceEvent,p),O=D.x-h.x,M=D.y-h.y;Math.sqrt(O*O+M*M)>H&&oe(ee)}(c.x!==X.xSnapped||c.y!==X.ySnapped)&&d&&v&&(h=bn(ee.sourceEvent,p),V(X))}}).on("end",ee=>{if(!(!v||b)&&(g=!1,v=!1,cancelAnimationFrame(u),d.size>0)){const{nodeLookup:G,updateNodePositions:z,onNodeDragStop:P,onSelectionDragStop:R}=n();if(E&&(z(d,!1),E=!1),o||P||!j&&R){const[H,B]=Rf({nodeId:j,dragItems:d,nodeLookup:G,dragging:!1});o?.(ee.sourceEvent,d,H,B),P?.(ee.sourceEvent,H,B),j||R?.(ee.sourceEvent,B)}}}).filter(ee=>{const G=ee.target;return!ee.button&&(!k||!u0(G,`.${k}`,N))&&(!_||u0(G,_,N))});y.call(Z)}function C(){y?.on(".drag",null)}return{update:T,destroy:C}}function AT(e,n,r){const a=[],o={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const c of n.values())ro(o,qa(c))>0&&a.push(c);return a}const NT=250;function OT(e,n,r,a){let o=[],c=1/0;const u=AT(e,r,n+NT);for(const d of u){const g=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of g){if(a.nodeId===h.nodeId&&a.type===h.type&&a.id===h.id)continue;const{x:p,y:v}=so(d,h,h.position,!0),y=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(v-e.y,2));y>n||(y<c?(o=[{...h,x:p,y:v}],c=y):y===c&&o.push({...h,x:p,y:v}))}}if(!o.length)return null;if(o.length>1){const d=a.type==="source"?"target":"source";return o.find(g=>g.type===d)??o[0]}return o[0]}function Mb(e,n,r,a,o,c=!1){const u=a.get(e);if(!u)return null;const d=o==="strict"?u.internals.handleBounds?.[n]:[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]],g=(r?d?.find(h=>h.id===r):d?.[0])??null;return g&&c?{...g,...so(u,g,g.position,!0)}:g}function jb(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function RT(e,n){let r=null;return n?r=!0:e&&!n&&(r=!1),r}const Db=()=>!0;function kT(e,{connectionMode:n,connectionRadius:r,handleId:a,nodeId:o,edgeUpdaterType:c,isTarget:u,domNode:d,nodeLookup:g,lib:h,autoPanOnConnect:p,flowId:v,panBy:y,cancelConnection:b,onConnectStart:E,onConnect:x,onConnectEnd:T,isValidConnection:C=Db,onReconnectEnd:k,updateConnection:_,getTransform:N,getFromHandle:L,autoPanSpeed:j,dragThreshold:U=1,handleDomNode:V}){const J=wb(e.target);let oe=0,Z;const{x:ee,y:G}=bn(e),z=jb(c,V),P=d?.getBoundingClientRect();let R=!1;if(!P||!z)return;const H=Mb(o,z,a,g,n);if(!H)return;let B=bn(e,P),X=!1,D=null,O=!1,M=null;function K(){if(!p||!P)return;const[_e,pe]=pb(B,P,j);y({x:_e,y:pe}),oe=requestAnimationFrame(K)}const Q={...H,nodeId:o,type:z,position:H.position},se=g.get(o);let ce={inProgress:!0,isValid:null,from:so(se,Q,he.Left,!0),fromHandle:Q,fromPosition:Q.position,fromNode:se,to:B,toHandle:null,toPosition:Fy[Q.position],toNode:null};function le(){R=!0,_(ce),E?.(e,{nodeId:o,handleId:a,handleType:z})}U===0&&le();function de(_e){if(!R){const{x:Ie,y:Ge}=bn(_e),mt=Ie-ee,Ft=Ge-G;if(!(mt*mt+Ft*Ft>U*U))return;le()}if(!L()||!Q){Ee(_e);return}const pe=N();B=bn(_e,P),Z=OT(So(B,pe,!1,[1,1]),r,g,Q),X||(K(),X=!0);const xe=zb(_e,{handle:Z,connectionMode:n,fromNodeId:o,fromHandleId:a,fromType:u?"target":"source",isValidConnection:C,doc:J,lib:h,flowId:v,nodeLookup:g});M=xe.handleDomNode,D=xe.connection,O=RT(!!Z,xe.isValid);const Ce={...ce,isValid:O,to:xe.toHandle&&O?Oc({x:xe.toHandle.x,y:xe.toHandle.y},pe):B,toHandle:xe.toHandle,toPosition:O&&xe.toHandle?xe.toHandle.position:Fy[Q.position],toNode:xe.toHandle?g.get(xe.toHandle.nodeId):null};O&&Z&&ce.toHandle&&Ce.toHandle&&ce.toHandle.type===Ce.toHandle.type&&ce.toHandle.nodeId===Ce.toHandle.nodeId&&ce.toHandle.id===Ce.toHandle.id&&ce.to.x===Ce.to.x&&ce.to.y===Ce.to.y||(_(Ce),ce=Ce)}function Ee(_e){if(!("touches"in _e&&_e.touches.length>0)){if(R){(Z||M)&&D&&O&&x?.(D);const{inProgress:pe,...xe}=ce,Ce={...xe,toPosition:ce.toHandle?ce.toPosition:null};T?.(_e,Ce),c&&k?.(_e,Ce)}b(),cancelAnimationFrame(oe),X=!1,O=!1,D=null,M=null,J.removeEventListener("mousemove",de),J.removeEventListener("mouseup",Ee),J.removeEventListener("touchmove",de),J.removeEventListener("touchend",Ee)}}J.addEventListener("mousemove",de),J.addEventListener("mouseup",Ee),J.addEventListener("touchmove",de),J.addEventListener("touchend",Ee)}function zb(e,{handle:n,connectionMode:r,fromNodeId:a,fromHandleId:o,fromType:c,doc:u,lib:d,flowId:g,isValidConnection:h=Db,nodeLookup:p}){const v=c==="target",y=n?u.querySelector(`.${d}-flow__handle[data-id="${g}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:b,y:E}=bn(e),x=u.elementFromPoint(b,E),T=x?.classList.contains(`${d}-flow__handle`)?x:y,C={handleDomNode:T,isValid:!1,connection:null,toHandle:null};if(T){const k=jb(void 0,T),_=T.getAttribute("data-nodeid"),N=T.getAttribute("data-handleid"),L=T.classList.contains("connectable"),j=T.classList.contains("connectableend");if(!_||!k)return C;const U={source:v?_:a,sourceHandle:v?N:o,target:v?a:_,targetHandle:v?o:N};C.connection=U;const J=L&&j&&(r===Ba.Strict?v&&k==="source"||!v&&k==="target":_!==a||N!==o);C.isValid=J&&h(U),C.toHandle=Mb(_,k,N,p,r,!0)}return C}const lh={onPointerDown:kT,isValid:zb};function MT({domNode:e,panZoom:n,getTransform:r,getViewScale:a}){const o=Zt(e);function c({translateExtent:d,width:g,height:h,zoomStep:p=1,pannable:v=!0,zoomable:y=!0,inversePan:b=!1}){const E=_=>{if(_.sourceEvent.type!=="wheel"||!n)return;const N=r(),L=_.sourceEvent.ctrlKey&&ao()?10:1,j=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*p,U=N[2]*Math.pow(2,j*L);n.scaleTo(U)};let x=[0,0];const T=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(x=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},C=_=>{const N=r();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!n)return;const L=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],j=[L[0]-x[0],L[1]-x[1]];x=L;const U=a()*Math.max(N[2],Math.log(N[2]))*(b?-1:1),V={x:N[0]-j[0]*U,y:N[1]-j[1]*U},J=[[0,0],[g,h]];n.setViewportConstrained({x:V.x,y:V.y,zoom:N[2]},J,d)},k=lb().on("start",T).on("zoom",v?C:null).on("zoom.wheel",y?E:null);o.call(k,{})}function u(){o.on("zoom",null)}return{update:c,destroy:u,pointer:mn}}const Vc=e=>({x:e.x,y:e.y,zoom:e.k}),kf=({x:e,y:n,zoom:r})=>Bc.translate(e,n).scale(r),Ma=(e,n)=>e.target.closest(`.${n}`),Ub=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),jT=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Mf=(e,n=0,r=jT,a=()=>{})=>{const o=typeof n=="number"&&n>0;return o||a(),o?e.transition().duration(n).ease(r).on("end",a):e},$b=e=>{const n=e.ctrlKey&&ao()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function DT({zoomPanValues:e,noWheelClassName:n,d3Selection:r,d3Zoom:a,panOnScrollMode:o,panOnScrollSpeed:c,zoomOnPinch:u,onPanZoomStart:d,onPanZoom:g,onPanZoomEnd:h}){return p=>{if(Ma(p,n))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const v=r.property("__zoom").k||1;if(p.ctrlKey&&u){const T=mn(p),C=$b(p),k=v*Math.pow(2,C);a.scaleTo(r,k,T,p);return}const y=p.deltaMode===1?20:1;let b=o===_r.Vertical?0:p.deltaX*y,E=o===_r.Horizontal?0:p.deltaY*y;!ao()&&p.shiftKey&&o!==_r.Vertical&&(b=p.deltaY*y,E=0),a.translateBy(r,-(b/v)*c,-(E/v)*c,{internal:!0});const x=Vc(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(g?.(p,x),e.panScrollTimeout=setTimeout(()=>{h?.(p,x),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,d?.(p,x))}}function zT({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:r}){return function(a,o){const c=a.type==="wheel",u=!n&&c&&!a.ctrlKey,d=Ma(a,e);if(a.ctrlKey&&c&&d&&a.preventDefault(),u||d)return null;a.preventDefault(),r.call(this,a,o)}}function UT({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:r}){return a=>{if(a.sourceEvent?.internal)return;const o=Vc(a.transform);e.mouseButton=a.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,a.sourceEvent?.type==="mousedown"&&n(!0),r&&r?.(a.sourceEvent,o)}}function $T({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:r,onTransformChange:a,onPanZoom:o}){return c=>{e.usedRightMouseButton=!!(r&&Ub(n,e.mouseButton??0)),c.sourceEvent?.sync||a([c.transform.x,c.transform.y,c.transform.k]),o&&!c.sourceEvent?.internal&&o?.(c.sourceEvent,Vc(c.transform))}}function LT({zoomPanValues:e,panOnDrag:n,panOnScroll:r,onDraggingChange:a,onPanZoomEnd:o,onPaneContextMenu:c}){return u=>{if(!u.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,c&&Ub(n,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&c(u.sourceEvent),e.usedRightMouseButton=!1,a(!1),o)){const d=Vc(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(u.sourceEvent,d)},r?150:0)}}}function HT({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:a,panOnScroll:o,zoomOnDoubleClick:c,userSelectionActive:u,noWheelClassName:d,noPanClassName:g,lib:h,connectionInProgress:p}){return v=>{const y=e||n,b=r&&v.ctrlKey,E=v.type==="wheel";if(v.button===1&&v.type==="mousedown"&&(Ma(v,`${h}-flow__node`)||Ma(v,`${h}-flow__edge`)))return!0;if(!a&&!y&&!o&&!c&&!r||u||p&&!E||Ma(v,d)&&E||Ma(v,g)&&(!E||o&&E&&!e)||!r&&v.ctrlKey&&E)return!1;if(!r&&v.type==="touchstart"&&v.touches?.length>1)return v.preventDefault(),!1;if(!y&&!o&&!b&&E||!a&&(v.type==="mousedown"||v.type==="touchstart")||Array.isArray(a)&&!a.includes(v.button)&&v.type==="mousedown")return!1;const x=Array.isArray(a)&&a.includes(v.button)||!v.button||v.button<=1;return(!v.ctrlKey||E)&&x}}function BT({domNode:e,minZoom:n,maxZoom:r,translateExtent:a,viewport:o,onPanZoom:c,onPanZoomStart:u,onPanZoomEnd:d,onDraggingChange:g}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),v=lb().scaleExtent([n,r]).translateExtent(a),y=Zt(e).call(v);k({x:o.x,y:o.y,zoom:Ia(o.zoom,n,r)},[[0,0],[p.width,p.height]],a);const b=y.on("wheel.zoom"),E=y.on("dblclick.zoom");v.wheelDelta($b);function x(Z,ee){return y?new Promise(G=>{v?.interpolate(ee?.interpolate==="linear"?Ks:mc).transform(Mf(y,ee?.duration,ee?.ease,()=>G(!0)),Z)}):Promise.resolve(!1)}function T({noWheelClassName:Z,noPanClassName:ee,onPaneContextMenu:G,userSelectionActive:z,panOnScroll:P,panOnDrag:R,panOnScrollMode:H,panOnScrollSpeed:B,preventScrolling:X,zoomOnPinch:D,zoomOnScroll:O,zoomOnDoubleClick:M,zoomActivationKeyPressed:K,lib:Q,onTransformChange:se,connectionInProgress:ue,paneClickDistance:ce,selectionOnDrag:le}){z&&!h.isZoomingOrPanning&&C();const de=P&&!K&&!z;v.clickDistance(le?1/0:!vn(ce)||ce<0?0:ce);const Ee=de?DT({zoomPanValues:h,noWheelClassName:Z,d3Selection:y,d3Zoom:v,panOnScrollMode:H,panOnScrollSpeed:B,zoomOnPinch:D,onPanZoomStart:u,onPanZoom:c,onPanZoomEnd:d}):zT({noWheelClassName:Z,preventScrolling:X,d3ZoomHandler:b});if(y.on("wheel.zoom",Ee,{passive:!1}),!z){const pe=UT({zoomPanValues:h,onDraggingChange:g,onPanZoomStart:u});v.on("start",pe);const xe=$T({zoomPanValues:h,panOnDrag:R,onPaneContextMenu:!!G,onPanZoom:c,onTransformChange:se});v.on("zoom",xe);const Ce=LT({zoomPanValues:h,panOnDrag:R,panOnScroll:P,onPaneContextMenu:G,onPanZoomEnd:d,onDraggingChange:g});v.on("end",Ce)}const _e=HT({zoomActivationKeyPressed:K,panOnDrag:R,zoomOnScroll:O,panOnScroll:P,zoomOnDoubleClick:M,zoomOnPinch:D,userSelectionActive:z,noPanClassName:ee,noWheelClassName:Z,lib:Q,connectionInProgress:ue});v.filter(_e),M?y.on("dblclick.zoom",E):y.on("dblclick.zoom",null)}function C(){v.on("zoom",null)}async function k(Z,ee,G){const z=kf(Z),P=v?.constrain()(z,ee,G);return P&&await x(P),new Promise(R=>R(P))}async function _(Z,ee){const G=kf(Z);return await x(G,ee),new Promise(z=>z(G))}function N(Z){if(y){const ee=kf(Z),G=y.property("__zoom");(G.k!==Z.zoom||G.x!==Z.x||G.y!==Z.y)&&v?.transform(y,ee,null,{sync:!0})}}function L(){const Z=y?ob(y.node()):{x:0,y:0,k:1};return{x:Z.x,y:Z.y,zoom:Z.k}}function j(Z,ee){return y?new Promise(G=>{v?.interpolate(ee?.interpolate==="linear"?Ks:mc).scaleTo(Mf(y,ee?.duration,ee?.ease,()=>G(!0)),Z)}):Promise.resolve(!1)}function U(Z,ee){return y?new Promise(G=>{v?.interpolate(ee?.interpolate==="linear"?Ks:mc).scaleBy(Mf(y,ee?.duration,ee?.ease,()=>G(!0)),Z)}):Promise.resolve(!1)}function V(Z){v?.scaleExtent(Z)}function J(Z){v?.translateExtent(Z)}function oe(Z){const ee=!vn(Z)||Z<0?0:Z;v?.clickDistance(ee)}return{update:T,destroy:C,setViewport:_,setViewportConstrained:k,getViewport:L,scaleTo:j,scaleBy:U,setScaleExtent:V,setTranslateExtent:J,syncViewport:N,setClickDistance:oe}}var Pa;(function(e){e.Line="line",e.Handle="handle"})(Pa||(Pa={}));function IT({width:e,prevWidth:n,height:r,prevHeight:a,affectsX:o,affectsY:c}){const u=e-n,d=r-a,g=[u>0?1:u<0?-1:0,d>0?1:d<0?-1:0];return u&&o&&(g[0]=g[0]*-1),d&&c&&(g[1]=g[1]*-1),g}function d0(e){const n=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),a=e.includes("left"),o=e.includes("top");return{isHorizontal:n,isVertical:r,affectsX:a,affectsY:o}}function zi(e,n){return Math.max(0,n-e)}function Ui(e,n){return Math.max(0,e-n)}function nc(e,n,r){return Math.max(0,n-e,e-r)}function f0(e,n){return e?!n:n}function qT(e,n,r,a,o,c,u,d){let{affectsX:g,affectsY:h}=n;const{isHorizontal:p,isVertical:v}=n,y=p&&v,{xSnapped:b,ySnapped:E}=r,{minWidth:x,maxWidth:T,minHeight:C,maxHeight:k}=a,{x:_,y:N,width:L,height:j,aspectRatio:U}=e;let V=Math.floor(p?b-e.pointerX:0),J=Math.floor(v?E-e.pointerY:0);const oe=L+(g?-V:V),Z=j+(h?-J:J),ee=-c[0]*L,G=-c[1]*j;let z=nc(oe,x,T),P=nc(Z,C,k);if(u){let B=0,X=0;g&&V<0?B=zi(_+V+ee,u[0][0]):!g&&V>0&&(B=Ui(_+oe+ee,u[1][0])),h&&J<0?X=zi(N+J+G,u[0][1]):!h&&J>0&&(X=Ui(N+Z+G,u[1][1])),z=Math.max(z,B),P=Math.max(P,X)}if(d){let B=0,X=0;g&&V>0?B=Ui(_+V,d[0][0]):!g&&V<0&&(B=zi(_+oe,d[1][0])),h&&J>0?X=Ui(N+J,d[0][1]):!h&&J<0&&(X=zi(N+Z,d[1][1])),z=Math.max(z,B),P=Math.max(P,X)}if(o){if(p){const B=nc(oe/U,C,k)*U;if(z=Math.max(z,B),u){let X=0;!g&&!h||g&&!h&&y?X=Ui(N+G+oe/U,u[1][1])*U:X=zi(N+G+(g?V:-V)/U,u[0][1])*U,z=Math.max(z,X)}if(d){let X=0;!g&&!h||g&&!h&&y?X=zi(N+oe/U,d[1][1])*U:X=Ui(N+(g?V:-V)/U,d[0][1])*U,z=Math.max(z,X)}}if(v){const B=nc(Z*U,x,T)/U;if(P=Math.max(P,B),u){let X=0;!g&&!h||h&&!g&&y?X=Ui(_+Z*U+ee,u[1][0])/U:X=zi(_+(h?J:-J)*U+ee,u[0][0])/U,P=Math.max(P,X)}if(d){let X=0;!g&&!h||h&&!g&&y?X=zi(_+Z*U,d[1][0])/U:X=Ui(_+(h?J:-J)*U,d[0][0])/U,P=Math.max(P,X)}}}J=J+(J<0?P:-P),V=V+(V<0?z:-z),o&&(y?oe>Z*U?J=(f0(g,h)?-V:V)/U:V=(f0(g,h)?-J:J)*U:p?(J=V/U,h=g):(V=J*U,g=h));const R=g?_+V:_,H=h?N+J:N;return{width:L+(g?-V:V),height:j+(h?-J:J),x:c[0]*V*(g?-1:1)+R,y:c[1]*J*(h?-1:1)+H}}const Lb={width:0,height:0,x:0,y:0},VT={...Lb,pointerX:0,pointerY:0,aspectRatio:1};function PT(e){return[[0,0],[e.measured.width,e.measured.height]]}function GT(e,n,r){const a=n.position.x+e.position.x,o=n.position.y+e.position.y,c=e.measured.width??0,u=e.measured.height??0,d=r[0]*c,g=r[1]*u;return[[a-d,o-g],[a+c-d,o+u-g]]}function YT({domNode:e,nodeId:n,getStoreItems:r,onChange:a,onEnd:o}){const c=Zt(e);let u={controlDirection:d0("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:p,keepAspectRatio:v,resizeDirection:y,onResizeStart:b,onResize:E,onResizeEnd:x,shouldResize:T}){let C={...Lb},k={...VT};u={boundaries:p,resizeDirection:y,keepAspectRatio:v,controlDirection:d0(h)};let _,N=null,L=[],j,U,V,J=!1;const oe=Xv().on("start",Z=>{const{nodeLookup:ee,transform:G,snapGrid:z,snapToGrid:P,nodeOrigin:R,paneDomNode:H}=r();if(_=ee.get(n),!_)return;N=H?.getBoundingClientRect()??null;const{xSnapped:B,ySnapped:X}=Zs(Z.sourceEvent,{transform:G,snapGrid:z,snapToGrid:P,containerBounds:N});C={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},k={...C,pointerX:B,pointerY:X,aspectRatio:C.width/C.height},j=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(j=ee.get(_.parentId),U=j&&_.extent==="parent"?PT(j):void 0),L=[],V=void 0;for(const[D,O]of ee)if(O.parentId===n&&(L.push({id:D,position:{...O.position},extent:O.extent}),O.extent==="parent"||O.expandParent)){const M=GT(O,_,O.origin??R);V?V=[[Math.min(M[0][0],V[0][0]),Math.min(M[0][1],V[0][1])],[Math.max(M[1][0],V[1][0]),Math.max(M[1][1],V[1][1])]]:V=M}b?.(Z,{...C})}).on("drag",Z=>{const{transform:ee,snapGrid:G,snapToGrid:z,nodeOrigin:P}=r(),R=Zs(Z.sourceEvent,{transform:ee,snapGrid:G,snapToGrid:z,containerBounds:N}),H=[];if(!_)return;const{x:B,y:X,width:D,height:O}=C,M={},K=_.origin??P,{width:Q,height:se,x:ue,y:ce}=qT(k,u.controlDirection,R,u.boundaries,u.keepAspectRatio,K,U,V),le=Q!==D,de=se!==O,Ee=ue!==B&&le,_e=ce!==X&&de;if(!Ee&&!_e&&!le&&!de)return;if((Ee||_e||K[0]===1||K[1]===1)&&(M.x=Ee?ue:C.x,M.y=_e?ce:C.y,C.x=M.x,C.y=M.y,L.length>0)){const Ie=ue-B,Ge=ce-X;for(const mt of L)mt.position={x:mt.position.x-Ie+K[0]*(Q-D),y:mt.position.y-Ge+K[1]*(se-O)},H.push(mt)}if((le||de)&&(M.width=le&&(!u.resizeDirection||u.resizeDirection==="horizontal")?Q:C.width,M.height=de&&(!u.resizeDirection||u.resizeDirection==="vertical")?se:C.height,C.width=M.width,C.height=M.height),j&&_.expandParent){const Ie=K[0]*(M.width??0);M.x&&M.x<Ie&&(C.x=Ie,k.x=k.x-(M.x-Ie));const Ge=K[1]*(M.height??0);M.y&&M.y<Ge&&(C.y=Ge,k.y=k.y-(M.y-Ge))}const pe=IT({width:C.width,prevWidth:D,height:C.height,prevHeight:O,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),xe={...C,direction:pe};T?.(Z,xe)!==!1&&(J=!0,E?.(Z,xe),a(M,H))}).on("end",Z=>{J&&(x?.(Z,{...C}),o?.({...C}),J=!1)});c.call(oe)}function g(){c.on(".drag",null)}return{update:d,destroy:g}}var jf={exports:{}},Df={},zf={exports:{}},Uf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function XT(){if(h0)return Uf;h0=1;var e=yo();function n(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=e.useState,o=e.useEffect,c=e.useLayoutEffect,u=e.useDebugValue;function d(v,y){var b=y(),E=a({inst:{value:b,getSnapshot:y}}),x=E[0].inst,T=E[1];return c(function(){x.value=b,x.getSnapshot=y,g(x)&&T({inst:x})},[v,b,y]),o(function(){return g(x)&&T({inst:x}),v(function(){g(x)&&T({inst:x})})},[v]),u(b),b}function g(v){var y=v.getSnapshot;v=v.value;try{var b=y();return!r(v,b)}catch{return!0}}function h(v,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return Uf.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,Uf}var g0;function KT(){return g0||(g0=1,zf.exports=XT()),zf.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function ZT(){if(m0)return Df;m0=1;var e=yo(),n=KT();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var a=typeof Object.is=="function"?Object.is:r,o=n.useSyncExternalStore,c=e.useRef,u=e.useEffect,d=e.useMemo,g=e.useDebugValue;return Df.useSyncExternalStoreWithSelector=function(h,p,v,y,b){var E=c(null);if(E.current===null){var x={hasValue:!1,value:null};E.current=x}else x=E.current;E=d(function(){function C(j){if(!k){if(k=!0,_=j,j=y(j),b!==void 0&&x.hasValue){var U=x.value;if(b(U,j))return N=U}return N=j}if(U=N,a(_,j))return U;var V=y(j);return b!==void 0&&b(U,V)?(_=j,U):(_=j,N=V)}var k=!1,_,N,L=v===void 0?null:v;return[function(){return C(p())},L===null?void 0:function(){return C(L())}]},[p,v,y,b]);var T=o(h,E[0],E[1]);return u(function(){x.hasValue=!0,x.value=T},[T]),g(T),T},Df}var p0;function QT(){return p0||(p0=1,jf.exports=ZT()),jf.exports}var JT=QT();const Hb=Rv(JT),FT={},y0=e=>{let n;const r=new Set,a=(p,v)=>{const y=typeof p=="function"?p(n):p;if(!Object.is(y,n)){const b=n;n=v??(typeof y!="object"||y===null)?y:Object.assign({},n,y),r.forEach(E=>E(n,b))}},o=()=>n,g={setState:a,getState:o,getInitialState:()=>h,subscribe:p=>(r.add(p),()=>r.delete(p)),destroy:()=>{(FT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},h=n=e(a,o,g);return g},Bb=e=>e?y0(e):y0,{useDebugValue:WT}=kv,{useSyncExternalStoreWithSelector:eC}=Hb,tC=e=>e;function Ib(e,n=tC,r){const a=eC(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return WT(a),a}const v0=(e,n)=>{const r=Bb(e),a=(o,c=n)=>Ib(r,o,c);return Object.assign(a,r),a},nC=(e,n)=>e?v0(e,n):v0;function Fe(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[a,o]of e)if(!Object.is(o,n.get(a)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const a of e)if(!n.has(a))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const a of r)if(!Object.prototype.hasOwnProperty.call(n,a)||!Object.is(e[a],n[a]))return!1;return!0}Mv();const Pc=q.createContext(null),iC=Pc.Provider,qb=On.error001();function De(e,n){const r=q.useContext(Pc);if(r===null)throw new Error(qb);return Ib(r,e,n)}function Je(){const e=q.useContext(Pc);if(e===null)throw new Error(qb);return q.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const b0={display:"none"},rC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Vb="react-flow__node-desc",Pb="react-flow__edge-desc",aC="react-flow__aria-live",sC=e=>e.ariaLiveMessage,oC=e=>e.ariaLabelConfig;function lC({rfId:e}){const n=De(sC);return S.jsx("div",{id:`${aC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rC,children:n})}function cC({rfId:e,disableKeyboardA11y:n}){const r=De(oC);return S.jsxs(S.Fragment,{children:[S.jsx("div",{id:`${Vb}-${e}`,style:b0,children:n?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),S.jsx("div",{id:`${Pb}-${e}`,style:b0,children:r["edge.a11yDescription.default"]}),!n&&S.jsx(lC,{rfId:e})]})}const Gc=q.forwardRef(({position:e="top-left",children:n,className:r,style:a,...o},c)=>{const u=`${e}`.split("-");return S.jsx("div",{className:ut(["react-flow__panel",r,...u]),style:a,ref:c,...o,children:n})});Gc.displayName="Panel";function uC({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:S.jsx(Gc,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:S.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const dC=e=>{const n=[],r=[];for(const[,a]of e.nodeLookup)a.selected&&n.push(a.internals.userNode);for(const[,a]of e.edgeLookup)a.selected&&r.push(a);return{selectedNodes:n,selectedEdges:r}},ic=e=>e.id;function fC(e,n){return Fe(e.selectedNodes.map(ic),n.selectedNodes.map(ic))&&Fe(e.selectedEdges.map(ic),n.selectedEdges.map(ic))}function hC({onSelectionChange:e}){const n=Je(),{selectedNodes:r,selectedEdges:a}=De(dC,fC);return q.useEffect(()=>{const o={nodes:r,edges:a};e?.(o),n.getState().onSelectionChangeHandlers.forEach(c=>c(o))},[r,a,e]),null}const gC=e=>!!e.onSelectionChangeHandlers;function mC({onSelectionChange:e}){const n=De(gC);return e||n?S.jsx(hC,{onSelectionChange:e}):null}const Gb=[0,0],pC={x:0,y:0,zoom:1},yC=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],w0=[...yC,"rfId"],vC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),x0={translateExtent:no,nodeOrigin:Gb,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function bC(e){const{setNodes:n,setEdges:r,setMinZoom:a,setMaxZoom:o,setTranslateExtent:c,setNodeExtent:u,reset:d,setDefaultNodesAndEdges:g}=De(vC,Fe),h=Je();q.useEffect(()=>(g(e.defaultNodes,e.defaultEdges),()=>{p.current=x0,d()}),[]);const p=q.useRef(x0);return q.useEffect(()=>{for(const v of w0){const y=e[v],b=p.current[v];y!==b&&(typeof e[v]>"u"||(v==="nodes"?n(y):v==="edges"?r(y):v==="minZoom"?a(y):v==="maxZoom"?o(y):v==="translateExtent"?c(y):v==="nodeExtent"?u(y):v==="ariaLabelConfig"?h.setState({ariaLabelConfig:aT(y)}):v==="fitView"?h.setState({fitViewQueued:y}):v==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[v]:y})))}p.current=e},w0.map(v=>e[v])),null}function _0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function wC(e){const[n,r]=q.useState(e==="system"?null:e);return q.useEffect(()=>{if(e!=="system"){r(e);return}const a=_0(),o=()=>r(a?.matches?"dark":"light");return o(),a?.addEventListener("change",o),()=>{a?.removeEventListener("change",o)}},[e]),n!==null?n:_0()?.matches?"dark":"light"}const S0=typeof document<"u"?document:null;function oo(e=null,n={target:S0,actInsideInputWithModifier:!0}){const[r,a]=q.useState(!1),o=q.useRef(!1),c=q.useRef(new Set([])),[u,d]=q.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((v,y)=>v.concat(...y),[]);return[h,p]}return[[],[]]},[e]);return q.useEffect(()=>{const g=n?.target??S0,h=n?.actInsideInputWithModifier??!0;if(e!==null){const p=b=>{if(o.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!o.current||o.current&&!h)&&xb(b))return!1;const x=T0(b.code,d);if(c.current.add(b[x]),E0(u,c.current,!1)){const T=b.composedPath?.()?.[0]||b.target,C=T?.nodeName==="BUTTON"||T?.nodeName==="A";n.preventDefault!==!1&&(o.current||!C)&&b.preventDefault(),a(!0)}},v=b=>{const E=T0(b.code,d);E0(u,c.current,!0)?(a(!1),c.current.clear()):c.current.delete(b[E]),b.key==="Meta"&&c.current.clear(),o.current=!1},y=()=>{c.current.clear(),a(!1)};return g?.addEventListener("keydown",p),g?.addEventListener("keyup",v),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{g?.removeEventListener("keydown",p),g?.removeEventListener("keyup",v),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[e,a]),r}function E0(e,n,r){return e.filter(a=>r||a.length===n.size).some(a=>a.every(o=>n.has(o)))}function T0(e,n){return n.includes(e)?"code":"key"}const xC=()=>{const e=Je();return q.useMemo(()=>({zoomIn:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,r)=>{const{panZoom:a}=e.getState();return a?a.scaleTo(n,{duration:r?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,r)=>{const{transform:[a,o,c],panZoom:u}=e.getState();return u?(await u.setViewport({x:n.x??a,y:n.y??o,zoom:n.zoom??c},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,r,a]=e.getState().transform;return{x:n,y:r,zoom:a}},setCenter:async(n,r,a)=>e.getState().setCenter(n,r,a),fitBounds:async(n,r)=>{const{width:a,height:o,minZoom:c,maxZoom:u,panZoom:d}=e.getState(),g=kh(n,a,o,c,u,r?.padding??.1);return d?(await d.setViewport(g,{duration:r?.duration,ease:r?.ease,interpolate:r?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,r={})=>{const{transform:a,snapGrid:o,snapToGrid:c,domNode:u}=e.getState();if(!u)return n;const{x:d,y:g}=u.getBoundingClientRect(),h={x:n.x-d,y:n.y-g},p=r.snapGrid??o,v=r.snapToGrid??c;return So(h,a,v,p)},flowToScreenPosition:n=>{const{transform:r,domNode:a}=e.getState();if(!a)return n;const{x:o,y:c}=a.getBoundingClientRect(),u=Oc(n,r);return{x:u.x+o,y:u.y+c}}}),[])};function Yb(e,n){const r=[],a=new Map,o=[];for(const c of e)if(c.type==="add"){o.push(c);continue}else if(c.type==="remove"||c.type==="replace")a.set(c.id,[c]);else{const u=a.get(c.id);u?u.push(c):a.set(c.id,[c])}for(const c of n){const u=a.get(c.id);if(!u){r.push(c);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){r.push({...u[0].item});continue}const d={...c};for(const g of u)_C(g,d);r.push(d)}return o.length&&o.forEach(c=>{c.index!==void 0?r.splice(c.index,0,{...c.item}):r.push({...c.item})}),r}function _C(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured??={},n.measured.width=e.dimensions.width,n.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function Xb(e,n){return Yb(e,n)}function Kb(e,n){return Yb(e,n)}function gr(e,n){return{id:e,type:"select",selected:n}}function ja(e,n=new Set,r=!1){const a=[];for(const[o,c]of e){const u=n.has(o);!(c.selected===void 0&&!u)&&c.selected!==u&&(r&&(c.selected=u),a.push(gr(c.id,u)))}return a}function C0({items:e=[],lookup:n}){const r=[],a=new Map(e.map(o=>[o.id,o]));for(const[o,c]of e.entries()){const u=n.get(c.id),d=u?.internals?.userNode??u;d!==void 0&&d!==c&&r.push({id:c.id,item:c,type:"replace"}),d===void 0&&r.push({item:c,type:"add",index:o})}for(const[o]of n)a.get(o)===void 0&&r.push({id:o,type:"remove"});return r}function A0(e){return{id:e.id,type:"remove"}}const N0=e=>Z2(e),SC=e=>hb(e);function Zb(e){return q.forwardRef(e)}const EC=typeof window<"u"?q.useLayoutEffect:q.useEffect;function O0(e){const[n,r]=q.useState(BigInt(0)),[a]=q.useState(()=>TC(()=>r(o=>o+BigInt(1))));return EC(()=>{const o=a.get();o.length&&(e(o),a.reset())},[n]),a}function TC(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:r=>{n.push(r),e()}}}const Qb=q.createContext(null);function CC({children:e}){const n=Je(),r=q.useCallback(d=>{const{nodes:g=[],setNodes:h,hasDefaultNodes:p,onNodesChange:v,nodeLookup:y,fitViewQueued:b}=n.getState();let E=g;for(const T of d)E=typeof T=="function"?T(E):T;const x=C0({items:E,lookup:y});p&&h(E),x.length>0?v?.(x):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:T,nodes:C,setNodes:k}=n.getState();T&&k(C)})},[]),a=O0(r),o=q.useCallback(d=>{const{edges:g=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:v,edgeLookup:y}=n.getState();let b=g;for(const E of d)b=typeof E=="function"?E(b):E;p?h(b):v&&v(C0({items:b,lookup:y}))},[]),c=O0(o),u=q.useMemo(()=>({nodeQueue:a,edgeQueue:c}),[]);return S.jsx(Qb.Provider,{value:u,children:e})}function AC(){const e=q.useContext(Qb);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const NC=e=>!!e.panZoom;function $h(){const e=xC(),n=Je(),r=AC(),a=De(NC),o=q.useMemo(()=>{const c=v=>n.getState().nodeLookup.get(v),u=v=>{r.nodeQueue.push(v)},d=v=>{r.edgeQueue.push(v)},g=v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState(),E=N0(v)?v:y.get(v.id),x=E.parentId?bb(E.position,E.measured,E.parentId,y,b):E.position,T={...E,position:x,width:E.measured?.width??E.width,height:E.measured?.height??E.height};return qa(T)},h=(v,y,b={replace:!1})=>{u(E=>E.map(x=>{if(x.id===v){const T=typeof y=="function"?y(x):y;return b.replace&&N0(T)?T:{...x,...T}}return x}))},p=(v,y,b={replace:!1})=>{d(E=>E.map(x=>{if(x.id===v){const T=typeof y=="function"?y(x):y;return b.replace&&SC(T)?T:{...x,...T}}return x}))};return{getNodes:()=>n.getState().nodes.map(v=>({...v})),getNode:v=>c(v)?.internals.userNode,getInternalNode:c,getEdges:()=>{const{edges:v=[]}=n.getState();return v.map(y=>({...y}))},getEdge:v=>n.getState().edgeLookup.get(v),setNodes:u,setEdges:d,addNodes:v=>{const y=Array.isArray(v)?v:[v];r.nodeQueue.push(b=>[...b,...y])},addEdges:v=>{const y=Array.isArray(v)?v:[v];r.edgeQueue.push(b=>[...b,...y])},toObject:()=>{const{nodes:v=[],edges:y=[],transform:b}=n.getState(),[E,x,T]=b;return{nodes:v.map(C=>({...C})),edges:y.map(C=>({...C})),viewport:{x:E,y:x,zoom:T}}},deleteElements:async({nodes:v=[],edges:y=[]})=>{const{nodes:b,edges:E,onNodesDelete:x,onEdgesDelete:T,triggerNodeChanges:C,triggerEdgeChanges:k,onDelete:_,onBeforeDelete:N}=n.getState(),{nodes:L,edges:j}=await eT({nodesToRemove:v,edgesToRemove:y,nodes:b,edges:E,onBeforeDelete:N}),U=j.length>0,V=L.length>0;if(U){const J=j.map(A0);T?.(j),k(J)}if(V){const J=L.map(A0);x?.(L),C(J)}return(V||U)&&_?.({nodes:L,edges:j}),{deletedNodes:L,deletedEdges:j}},getIntersectingNodes:(v,y=!0,b)=>{const E=e0(v),x=E?v:g(v),T=b!==void 0;return x?(b||n.getState().nodes).filter(C=>{const k=n.getState().nodeLookup.get(C.id);if(k&&!E&&(C.id===v.id||!k.internals.positionAbsolute))return!1;const _=qa(T?C:k),N=ro(_,x);return y&&N>0||N>=_.width*_.height||N>=x.width*x.height}):[]},isNodeIntersecting:(v,y,b=!0)=>{const x=e0(v)?v:g(v);if(!x)return!1;const T=ro(x,y);return b&&T>0||T>=y.width*y.height||T>=x.width*x.height},updateNode:h,updateNodeData:(v,y,b={replace:!1})=>{h(v,E=>{const x=typeof y=="function"?y(E):y;return b.replace?{...E,data:x}:{...E,data:{...E.data,...x}}},b)},updateEdge:p,updateEdgeData:(v,y,b={replace:!1})=>{p(v,E=>{const x=typeof y=="function"?y(E):y;return b.replace?{...E,data:x}:{...E,data:{...E.data,...x}}},b)},getNodesBounds:v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState();return Q2(v,{nodeLookup:y,nodeOrigin:b})},getHandleConnections:({type:v,id:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}-${v}${y?`-${y}`:""}`)?.values()??[]),getNodeConnections:({type:v,handleId:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}${v?y?`-${v}-${y}`:`-${v}`:""}`)?.values()??[]),fitView:async v=>{const y=n.getState().fitViewResolver??rT();return n.setState({fitViewQueued:!0,fitViewOptions:v,fitViewResolver:y}),r.nodeQueue.push(b=>[...b]),y.promise}}},[]);return q.useMemo(()=>({...o,...e,viewportInitialized:a}),[a])}const R0=e=>e.selected,OC=typeof window<"u"?window:void 0;function RC({deleteKeyCode:e,multiSelectionKeyCode:n}){const r=Je(),{deleteElements:a}=$h(),o=oo(e,{actInsideInputWithModifier:!1}),c=oo(n,{target:OC});q.useEffect(()=>{if(o){const{edges:u,nodes:d}=r.getState();a({nodes:d.filter(R0),edges:u.filter(R0)}),r.setState({nodesSelectionActive:!1})}},[o]),q.useEffect(()=>{r.setState({multiSelectionActive:c})},[c])}function kC(e){const n=Je();q.useEffect(()=>{const r=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const a=Mh(e.current);(a.height===0||a.width===0)&&n.getState().onError?.("004",On.error004()),n.setState({width:a.width||500,height:a.height||500})};if(e.current){r(),window.addEventListener("resize",r);const a=new ResizeObserver(()=>r());return a.observe(e.current),()=>{window.removeEventListener("resize",r),a&&e.current&&a.unobserve(e.current)}}},[])}const Yc={position:"absolute",width:"100%",height:"100%",top:0,left:0},MC=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function jC({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:a=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=_r.Free,zoomOnDoubleClick:u=!0,panOnDrag:d=!0,defaultViewport:g,translateExtent:h,minZoom:p,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:b=!0,children:E,noWheelClassName:x,noPanClassName:T,onViewportChange:C,isControlledViewport:k,paneClickDistance:_,selectionOnDrag:N}){const L=Je(),j=q.useRef(null),{userSelectionActive:U,lib:V,connectionInProgress:J}=De(MC,Fe),oe=oo(y),Z=q.useRef();kC(j);const ee=q.useCallback(G=>{C?.({x:G[0],y:G[1],zoom:G[2]}),k||L.setState({transform:G})},[C,k]);return q.useEffect(()=>{if(j.current){Z.current=BT({domNode:j.current,minZoom:p,maxZoom:v,translateExtent:h,viewport:g,onDraggingChange:R=>L.setState({paneDragging:R}),onPanZoomStart:(R,H)=>{const{onViewportChangeStart:B,onMoveStart:X}=L.getState();X?.(R,H),B?.(H)},onPanZoom:(R,H)=>{const{onViewportChange:B,onMove:X}=L.getState();X?.(R,H),B?.(H)},onPanZoomEnd:(R,H)=>{const{onViewportChangeEnd:B,onMoveEnd:X}=L.getState();X?.(R,H),B?.(H)}});const{x:G,y:z,zoom:P}=Z.current.getViewport();return L.setState({panZoom:Z.current,transform:[G,z,P],domNode:j.current.closest(".react-flow")}),()=>{Z.current?.destroy()}}},[]),q.useEffect(()=>{Z.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:a,panOnScrollSpeed:o,panOnScrollMode:c,zoomOnDoubleClick:u,panOnDrag:d,zoomActivationKeyPressed:oe,preventScrolling:b,noPanClassName:T,userSelectionActive:U,noWheelClassName:x,lib:V,onTransformChange:ee,connectionInProgress:J,selectionOnDrag:N,paneClickDistance:_})},[e,n,r,a,o,c,u,d,oe,b,T,U,x,V,ee,J,N,_]),S.jsx("div",{className:"react-flow__renderer",ref:j,style:Yc,children:E})}const DC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function zC(){const{userSelectionActive:e,userSelectionRect:n}=De(DC,Fe);return e&&n?S.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const $f=(e,n)=>r=>{r.target===n.current&&e?.(r)},UC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function $C({isSelecting:e,selectionKeyPressed:n,selectionMode:r=io.Full,panOnDrag:a,paneClickDistance:o,selectionOnDrag:c,onSelectionStart:u,onSelectionEnd:d,onPaneClick:g,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:v,onPaneMouseMove:y,onPaneMouseLeave:b,children:E}){const x=Je(),{userSelectionActive:T,elementsSelectable:C,dragging:k,connectionInProgress:_}=De(UC,Fe),N=C&&(e||T),L=q.useRef(null),j=q.useRef(),U=q.useRef(new Set),V=q.useRef(new Set),J=q.useRef(!1),oe=B=>{if(J.current||_){J.current=!1;return}g?.(B),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},Z=B=>{if(Array.isArray(a)&&a?.includes(2)){B.preventDefault();return}h?.(B)},ee=p?B=>p(B):void 0,G=B=>{J.current&&(B.stopPropagation(),J.current=!1)},z=B=>{const{resetSelectedElements:X,domNode:D}=x.getState();if(j.current=D?.getBoundingClientRect(),!j.current)return;const O=B.target===L.current;if(!O&&!!B.target.closest(".nokey")||!e||!(c&&O||n)||B.button!==0||!B.isPrimary)return;B.target?.setPointerCapture?.(B.pointerId),J.current=!1;const{x:Q,y:se}=bn(B.nativeEvent,j.current);x.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:se,x:Q,y:se}}),O||(B.stopPropagation(),B.preventDefault()),(o===0||n)&&(X(),u?.(B),J.current=!0)},P=B=>{const{userSelectionRect:X,transform:D,nodeLookup:O,edgeLookup:M,connectionLookup:K,triggerNodeChanges:Q,triggerEdgeChanges:se,defaultEdgeOptions:ue,resetSelectedElements:ce}=x.getState();if(!j.current||!X)return;const{x:le,y:de}=bn(B.nativeEvent,j.current),{startX:Ee,startY:_e}=X;if(!J.current&&B.target===L.current&&!n&&o>0){if(Math.hypot(le-Ee,de-_e)<=o)return;ce(),u?.(B)}J.current=!0;const pe={startX:Ee,startY:_e,x:le<Ee?le:Ee,y:de<_e?de:_e,width:Math.abs(le-Ee),height:Math.abs(de-_e)},xe=U.current,Ce=V.current;U.current=new Set(Rh(O,pe,D,r===io.Partial,!0).map(Ge=>Ge.id)),V.current=new Set;const Ie=ue?.selectable??!0;for(const Ge of U.current){const mt=K.get(Ge);if(mt)for(const{edgeId:Ft}of mt.values()){const ln=M.get(Ft);ln&&(ln.selectable??Ie)&&V.current.add(Ft)}}if(!t0(xe,U.current)){const Ge=ja(O,U.current,!0);Q(Ge)}if(!t0(Ce,V.current)){const Ge=ja(M,V.current);se(Ge)}x.setState({userSelectionRect:pe,userSelectionActive:!0,nodesSelectionActive:!1})},R=B=>{B.button===0&&(B.target?.releasePointerCapture?.(B.pointerId),!T&&B.target===L.current&&x.getState().userSelectionRect&&oe?.(B),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:U.current.size>0}),J.current&&d?.(B))},H=a===!0||Array.isArray(a)&&a.includes(0);return S.jsxs("div",{className:ut(["react-flow__pane",{draggable:H,dragging:k,selection:e}]),onClick:N?void 0:$f(oe,L),onContextMenu:$f(Z,L),onWheel:$f(ee,L),onPointerEnter:N?void 0:v,onPointerMove:N?P:y,onPointerUp:N?R:void 0,onPointerDownCapture:N?z:void 0,onClickCapture:N?G:void 0,onPointerLeave:b,ref:L,style:Yc,children:[E,S.jsx(zC,{})]})}function ch({id:e,store:n,unselect:r=!1,nodeRef:a}){const{addSelectedNodes:o,unselectNodesAndEdges:c,multiSelectionActive:u,nodeLookup:d,onError:g}=n.getState(),h=d.get(e);if(!h){g?.("012",On.error012(e));return}n.setState({nodesSelectionActive:!1}),h.selected?(r||h.selected&&u)&&(c({nodes:[h],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):o([e])}function Jb({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:a,nodeId:o,isSelectable:c,nodeClickDistance:u}){const d=Je(),[g,h]=q.useState(!1),p=q.useRef();return q.useEffect(()=>{p.current=CT({getStoreItems:()=>d.getState(),onNodeMouseDown:v=>{ch({id:v,store:d,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),q.useEffect(()=>{if(n)p.current?.destroy();else if(e.current)return p.current?.update({noDragClassName:r,handleSelector:a,domNode:e.current,isSelectable:c,nodeId:o,nodeClickDistance:u}),()=>{p.current?.destroy()}},[r,a,n,c,e,o]),g}const LC=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function Fb(){const e=Je();return q.useCallback(r=>{const{nodeExtent:a,snapToGrid:o,snapGrid:c,nodesDraggable:u,onError:d,updateNodePositions:g,nodeLookup:h,nodeOrigin:p}=e.getState(),v=new Map,y=LC(u),b=o?c[0]:5,E=o?c[1]:5,x=r.direction.x*b*r.factor,T=r.direction.y*E*r.factor;for(const[,C]of h){if(!y(C))continue;let k={x:C.internals.positionAbsolute.x+x,y:C.internals.positionAbsolute.y+T};o&&(k=_o(k,c));const{position:_,positionAbsolute:N}=gb({nodeId:C.id,nextPosition:k,nodeLookup:h,nodeExtent:a,nodeOrigin:p,onError:d});C.position=_,C.internals.positionAbsolute=N,v.set(C.id,C)}g(v)},[])}const Lh=q.createContext(null),HC=Lh.Provider;Lh.Consumer;const Wb=()=>q.useContext(Lh),BC=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),IC=(e,n,r)=>a=>{const{connectionClickStartHandle:o,connectionMode:c,connection:u}=a,{fromHandle:d,toHandle:g,isValid:h}=u,p=g?.nodeId===e&&g?.id===n&&g?.type===r;return{connectingFrom:d?.nodeId===e&&d?.id===n&&d?.type===r,connectingTo:p,clickConnecting:o?.nodeId===e&&o?.id===n&&o?.type===r,isPossibleEndHandle:c===Ba.Strict?d?.type!==r:e!==d?.nodeId||n!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!o,valid:p&&h}};function qC({type:e="source",position:n=he.Top,isValidConnection:r,isConnectable:a=!0,isConnectableStart:o=!0,isConnectableEnd:c=!0,id:u,onConnect:d,children:g,className:h,onMouseDown:p,onTouchStart:v,...y},b){const E=u||null,x=e==="target",T=Je(),C=Wb(),{connectOnClick:k,noPanClassName:_,rfId:N}=De(BC,Fe),{connectingFrom:L,connectingTo:j,clickConnecting:U,isPossibleEndHandle:V,connectionInProcess:J,clickConnectionInProcess:oe,valid:Z}=De(IC(C,E,e),Fe);C||T.getState().onError?.("010",On.error010());const ee=P=>{const{defaultEdgeOptions:R,onConnect:H,hasDefaultEdges:B}=T.getState(),X={...R,...P};if(B){const{edges:D,setEdges:O}=T.getState();O(Cb(X,D))}H?.(X),d?.(X)},G=P=>{if(!C)return;const R=_b(P.nativeEvent);if(o&&(R&&P.button===0||!R)){const H=T.getState();lh.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:H.autoPanOnConnect,connectionMode:H.connectionMode,connectionRadius:H.connectionRadius,domNode:H.domNode,nodeLookup:H.nodeLookup,lib:H.lib,isTarget:x,handleId:E,nodeId:C,flowId:H.rfId,panBy:H.panBy,cancelConnection:H.cancelConnection,onConnectStart:H.onConnectStart,onConnectEnd:H.onConnectEnd,updateConnection:H.updateConnection,onConnect:ee,isValidConnection:r||H.isValidConnection,getTransform:()=>T.getState().transform,getFromHandle:()=>T.getState().connection.fromHandle,autoPanSpeed:H.autoPanSpeed,dragThreshold:H.connectionDragThreshold})}R?p?.(P):v?.(P)},z=P=>{const{onClickConnectStart:R,onClickConnectEnd:H,connectionClickStartHandle:B,connectionMode:X,isValidConnection:D,lib:O,rfId:M,nodeLookup:K,connection:Q}=T.getState();if(!C||!B&&!o)return;if(!B){R?.(P.nativeEvent,{nodeId:C,handleId:E,handleType:e}),T.setState({connectionClickStartHandle:{nodeId:C,type:e,id:E}});return}const se=wb(P.target),ue=r||D,{connection:ce,isValid:le}=lh.isValid(P.nativeEvent,{handle:{nodeId:C,id:E,type:e},connectionMode:X,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:ue,flowId:M,doc:se,lib:O,nodeLookup:K});le&&ce&&ee(ce);const de=structuredClone(Q);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,H?.(P,de),T.setState({connectionClickStartHandle:null})};return S.jsx("div",{"data-handleid":E,"data-nodeid":C,"data-handlepos":n,"data-id":`${N}-${C}-${E}-${e}`,className:ut(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",_,h,{source:!x,target:x,connectable:a,connectablestart:o,connectableend:c,clickconnecting:U,connectingfrom:L,connectingto:j,valid:Z,connectionindicator:a&&(!J||V)&&(J||oe?c:o)}]),onMouseDown:G,onTouchStart:G,onClick:k?z:void 0,ref:b,...y,children:g})}const Lt=q.memo(Zb(qC));function VC({data:e,isConnectable:n,sourcePosition:r=he.Bottom}){return S.jsxs(S.Fragment,{children:[e?.label,S.jsx(Lt,{type:"source",position:r,isConnectable:n})]})}function PC({data:e,isConnectable:n,targetPosition:r=he.Top,sourcePosition:a=he.Bottom}){return S.jsxs(S.Fragment,{children:[S.jsx(Lt,{type:"target",position:r,isConnectable:n}),e?.label,S.jsx(Lt,{type:"source",position:a,isConnectable:n})]})}function GC(){return null}function YC({data:e,isConnectable:n,targetPosition:r=he.Top}){return S.jsxs(S.Fragment,{children:[S.jsx(Lt,{type:"target",position:r,isConnectable:n}),e?.label]})}const Rc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},k0={input:VC,default:PC,output:YC,group:GC};function XC(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const KC=e=>{const{width:n,height:r,x:a,y:o}=xo(e.nodeLookup,{filter:c=>!!c.selected});return{width:vn(n)?n:null,height:vn(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${a}px,${o}px)`}};function ZC({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const a=Je(),{width:o,height:c,transformString:u,userSelectionActive:d}=De(KC,Fe),g=Fb(),h=q.useRef(null);if(q.useEffect(()=>{r||h.current?.focus({preventScroll:!0})},[r]),Jb({nodeRef:h}),d||!o||!c)return null;const p=e?y=>{const b=a.getState().nodes.filter(E=>E.selected);e(y,b)}:void 0,v=y=>{Object.prototype.hasOwnProperty.call(Rc,y.key)&&(y.preventDefault(),g({direction:Rc[y.key],factor:y.shiftKey?4:1}))};return S.jsx("div",{className:ut(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:S.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:r?void 0:-1,onKeyDown:r?void 0:v,style:{width:o,height:c}})})}const M0=typeof window<"u"?window:void 0,QC=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function ew({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,paneClickDistance:d,deleteKeyCode:g,selectionKeyCode:h,selectionOnDrag:p,selectionMode:v,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:E,panActivationKeyCode:x,zoomActivationKeyCode:T,elementsSelectable:C,zoomOnScroll:k,zoomOnPinch:_,panOnScroll:N,panOnScrollSpeed:L,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:V,defaultViewport:J,translateExtent:oe,minZoom:Z,maxZoom:ee,preventScrolling:G,onSelectionContextMenu:z,noWheelClassName:P,noPanClassName:R,disableKeyboardA11y:H,onViewportChange:B,isControlledViewport:X}){const{nodesSelectionActive:D,userSelectionActive:O}=De(QC),M=oo(h,{target:M0}),K=oo(x,{target:M0}),Q=K||V,se=K||N,ue=p&&Q!==!0,ce=M||O||ue;return RC({deleteKeyCode:g,multiSelectionKeyCode:E}),S.jsx(jC,{onPaneContextMenu:c,elementsSelectable:C,zoomOnScroll:k,zoomOnPinch:_,panOnScroll:se,panOnScrollSpeed:L,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:!M&&Q,defaultViewport:J,translateExtent:oe,minZoom:Z,maxZoom:ee,zoomActivationKeyCode:T,preventScrolling:G,noWheelClassName:P,noPanClassName:R,onViewportChange:B,isControlledViewport:X,paneClickDistance:d,selectionOnDrag:ue,children:S.jsxs($C,{onSelectionStart:y,onSelectionEnd:b,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,panOnDrag:Q,isSelecting:!!ce,selectionMode:v,selectionKeyPressed:M,paneClickDistance:d,selectionOnDrag:ue,children:[e,D&&S.jsx(ZC,{onSelectionContextMenu:z,noPanClassName:R,disableKeyboardA11y:H})]})})}ew.displayName="FlowRenderer";const JC=q.memo(ew),FC=e=>n=>e?Rh(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(r=>r.id):Array.from(n.nodeLookup.keys());function WC(e){return De(q.useCallback(FC(e),[e]),Fe)}const eA=e=>e.updateNodeInternals;function tA(){const e=De(eA),[n]=q.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const a=new Map;r.forEach(o=>{const c=o.target.getAttribute("data-id");a.set(c,{id:c,nodeElement:o.target,force:!0})}),e(a)}));return q.useEffect(()=>()=>{n?.disconnect()},[n]),n}function nA({node:e,nodeType:n,hasDimensions:r,resizeObserver:a}){const o=Je(),c=q.useRef(null),u=q.useRef(null),d=q.useRef(e.sourcePosition),g=q.useRef(e.targetPosition),h=q.useRef(n),p=r&&!!e.internals.handleBounds;return q.useEffect(()=>{c.current&&!e.hidden&&(!p||u.current!==c.current)&&(u.current&&a?.unobserve(u.current),a?.observe(c.current),u.current=c.current)},[p,e.hidden]),q.useEffect(()=>()=>{u.current&&(a?.unobserve(u.current),u.current=null)},[]),q.useEffect(()=>{if(c.current){const v=h.current!==n,y=d.current!==e.sourcePosition,b=g.current!==e.targetPosition;(v||y||b)&&(h.current=n,d.current=e.sourcePosition,g.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:c.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),c}function iA({id:e,onClick:n,onMouseEnter:r,onMouseMove:a,onMouseLeave:o,onContextMenu:c,onDoubleClick:u,nodesDraggable:d,elementsSelectable:g,nodesConnectable:h,nodesFocusable:p,resizeObserver:v,noDragClassName:y,noPanClassName:b,disableKeyboardA11y:E,rfId:x,nodeTypes:T,nodeClickDistance:C,onError:k}){const{node:_,internals:N,isParent:L}=De(le=>{const de=le.nodeLookup.get(e),Ee=le.parentLookup.has(e);return{node:de,internals:de.internals,isParent:Ee}},Fe);let j=_.type||"default",U=T?.[j]||k0[j];U===void 0&&(k?.("003",On.error003(j)),j="default",U=T?.default||k0.default);const V=!!(_.draggable||d&&typeof _.draggable>"u"),J=!!(_.selectable||g&&typeof _.selectable>"u"),oe=!!(_.connectable||h&&typeof _.connectable>"u"),Z=!!(_.focusable||p&&typeof _.focusable>"u"),ee=Je(),G=vb(_),z=nA({node:_,nodeType:j,hasDimensions:G,resizeObserver:v}),P=Jb({nodeRef:z,disabled:_.hidden||!V,noDragClassName:y,handleSelector:_.dragHandle,nodeId:e,isSelectable:J,nodeClickDistance:C}),R=Fb();if(_.hidden)return null;const H=ni(_),B=XC(_),X=J||V||n||r||a||o,D=r?le=>r(le,{...N.userNode}):void 0,O=a?le=>a(le,{...N.userNode}):void 0,M=o?le=>o(le,{...N.userNode}):void 0,K=c?le=>c(le,{...N.userNode}):void 0,Q=u?le=>u(le,{...N.userNode}):void 0,se=le=>{const{selectNodesOnDrag:de,nodeDragThreshold:Ee}=ee.getState();J&&(!de||!V||Ee>0)&&ch({id:e,store:ee,nodeRef:z}),n&&n(le,{...N.userNode})},ue=le=>{if(!(xb(le.nativeEvent)||E)){if(cb.includes(le.key)&&J){const de=le.key==="Escape";ch({id:e,store:ee,unselect:de,nodeRef:z})}else if(V&&_.selected&&Object.prototype.hasOwnProperty.call(Rc,le.key)){le.preventDefault();const{ariaLabelConfig:de}=ee.getState();ee.setState({ariaLiveMessage:de["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),R({direction:Rc[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(E||!z.current?.matches(":focus-visible"))return;const{transform:le,width:de,height:Ee,autoPanOnNodeFocus:_e,setCenter:pe}=ee.getState();if(!_e)return;Rh(new Map([[e,_]]),{x:0,y:0,width:de,height:Ee},le,!0).length>0||pe(_.position.x+H.width/2,_.position.y+H.height/2,{zoom:le[2]})};return S.jsx("div",{className:ut(["react-flow__node",`react-flow__node-${j}`,{[b]:V},_.className,{selected:_.selected,selectable:J,parent:L,draggable:V,dragging:P}]),ref:z,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:G?"visible":"hidden",..._.style,...B},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:D,onMouseMove:O,onMouseLeave:M,onContextMenu:K,onClick:se,onDoubleClick:Q,onKeyDown:Z?ue:void 0,tabIndex:Z?0:void 0,onFocus:Z?ce:void 0,role:_.ariaRole??(Z?"group":void 0),"aria-roledescription":"node","aria-describedby":E?void 0:`${Vb}-${x}`,"aria-label":_.ariaLabel,..._.domAttributes,children:S.jsx(HC,{value:e,children:S.jsx(U,{id:e,data:_.data,type:j,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:_.selected??!1,selectable:J,draggable:V,deletable:_.deletable??!0,isConnectable:oe,sourcePosition:_.sourcePosition,targetPosition:_.targetPosition,dragging:P,dragHandle:_.dragHandle,zIndex:N.z,parentId:_.parentId,...H})})})}var rA=q.memo(iA);const aA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function tw(e){const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:a,elementsSelectable:o,onError:c}=De(aA,Fe),u=WC(e.onlyRenderVisibleElements),d=tA();return S.jsx("div",{className:"react-flow__nodes",style:Yc,children:u.map(g=>S.jsx(rA,{id:g,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:d,nodesDraggable:n,nodesConnectable:r,nodesFocusable:a,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:c},g))})}tw.displayName="NodeRenderer";const sA=q.memo(tw);function oA(e){return De(q.useCallback(r=>{if(!e)return r.edges.map(o=>o.id);const a=[];if(r.width&&r.height)for(const o of r.edges){const c=r.nodeLookup.get(o.source),u=r.nodeLookup.get(o.target);c&&u&&lT({sourceNode:c,targetNode:u,width:r.width,height:r.height,transform:r.transform})&&a.push(o.id)}return a},[e]),Fe)}const lA=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e}};return S.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},cA=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e,fill:e}};return S.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},j0={[Sr.Arrow]:lA,[Sr.ArrowClosed]:cA};function uA(e){const n=Je();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(j0,e)?j0[e]:(n.getState().onError?.("009",On.error009(e)),null),[e])}const dA=({id:e,type:n,color:r,width:a=12.5,height:o=12.5,markerUnits:c="strokeWidth",strokeWidth:u,orient:d="auto-start-reverse"})=>{const g=uA(n);return g?S.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:d,refX:"0",refY:"0",children:S.jsx(g,{color:r,strokeWidth:u})}):null},nw=({defaultColor:e,rfId:n})=>{const r=De(c=>c.edges),a=De(c=>c.defaultEdgeOptions),o=q.useMemo(()=>mT(r,{id:n,defaultColor:e,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[r,a,n,e]);return o.length?S.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:S.jsx("defs",{children:o.map(c=>S.jsx(dA,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};nw.displayName="MarkerDefinitions";var fA=q.memo(nw);function iw({x:e,y:n,label:r,labelStyle:a,labelShowBg:o=!0,labelBgStyle:c,labelBgPadding:u=[2,4],labelBgBorderRadius:d=2,children:g,className:h,...p}){const[v,y]=q.useState({x:1,y:0,width:0,height:0}),b=ut(["react-flow__edge-textwrapper",h]),E=q.useRef(null);return q.useEffect(()=>{if(E.current){const x=E.current.getBBox();y({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),r?S.jsxs("g",{transform:`translate(${e-v.width/2} ${n-v.height/2})`,className:b,visibility:v.width?"visible":"hidden",...p,children:[o&&S.jsx("rect",{width:v.width+2*u[0],x:-u[0],y:-u[1],height:v.height+2*u[1],className:"react-flow__edge-textbg",style:c,rx:d,ry:d}),S.jsx("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:E,style:a,children:r}),g]}):null}iw.displayName="EdgeText";const hA=q.memo(iw);function Xc({path:e,labelX:n,labelY:r,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g,interactionWidth:h=20,...p}){return S.jsxs(S.Fragment,{children:[S.jsx("path",{...p,d:e,fill:"none",className:ut(["react-flow__edge-path",p.className])}),h?S.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,a&&vn(n)&&vn(r)?S.jsx(hA,{x:n,y:r,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g}):null]})}function D0({pos:e,x1:n,y1:r,x2:a,y2:o}){return e===he.Left||e===he.Right?[.5*(n+a),r]:[n,.5*(r+o)]}function rw({sourceX:e,sourceY:n,sourcePosition:r=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top}){const[u,d]=D0({pos:r,x1:e,y1:n,x2:a,y2:o}),[g,h]=D0({pos:c,x1:a,y1:o,x2:e,y2:n}),[p,v,y,b]=Sb({sourceX:e,sourceY:n,targetX:a,targetY:o,sourceControlX:u,sourceControlY:d,targetControlX:g,targetControlY:h});return[`M${e},${n} C${u},${d} ${g},${h} ${a},${o}`,p,v,y,b]}function aw(e){return q.memo(({id:n,sourceX:r,sourceY:a,targetX:o,targetY:c,sourcePosition:u,targetPosition:d,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:T,interactionWidth:C})=>{const[k,_,N]=rw({sourceX:r,sourceY:a,sourcePosition:u,targetX:o,targetY:c,targetPosition:d}),L=e.isInternal?void 0:n;return S.jsx(Xc,{id:L,path:k,labelX:_,labelY:N,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:T,interactionWidth:C})})}const gA=aw({isInternal:!1}),sw=aw({isInternal:!0});gA.displayName="SimpleBezierEdge";sw.displayName="SimpleBezierEdgeInternal";function ow(e){return q.memo(({id:n,sourceX:r,sourceY:a,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,sourcePosition:b=he.Bottom,targetPosition:E=he.Top,markerEnd:x,markerStart:T,pathOptions:C,interactionWidth:k})=>{const[_,N,L]=ah({sourceX:r,sourceY:a,sourcePosition:b,targetX:o,targetY:c,targetPosition:E,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),j=e.isInternal?void 0:n;return S.jsx(Xc,{id:j,path:_,labelX:N,labelY:L,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:T,interactionWidth:k})})}const lw=ow({isInternal:!1}),cw=ow({isInternal:!0});lw.displayName="SmoothStepEdge";cw.displayName="SmoothStepEdgeInternal";function uw(e){return q.memo(({id:n,...r})=>{const a=e.isInternal?void 0:n;return S.jsx(lw,{...r,id:a,pathOptions:q.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])})})}const mA=uw({isInternal:!1}),dw=uw({isInternal:!0});mA.displayName="StepEdge";dw.displayName="StepEdgeInternal";function fw(e){return q.memo(({id:n,sourceX:r,sourceY:a,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:E,interactionWidth:x})=>{const[T,C,k]=Ab({sourceX:r,sourceY:a,targetX:o,targetY:c}),_=e.isInternal?void 0:n;return S.jsx(Xc,{id:_,path:T,labelX:C,labelY:k,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:E,interactionWidth:x})})}const pA=fw({isInternal:!1}),hw=fw({isInternal:!0});pA.displayName="StraightEdge";hw.displayName="StraightEdgeInternal";function gw(e){return q.memo(({id:n,sourceX:r,sourceY:a,targetX:o,targetY:c,sourcePosition:u=he.Bottom,targetPosition:d=he.Top,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:T,pathOptions:C,interactionWidth:k})=>{const[_,N,L]=Eb({sourceX:r,sourceY:a,sourcePosition:u,targetX:o,targetY:c,targetPosition:d,curvature:C?.curvature}),j=e.isInternal?void 0:n;return S.jsx(Xc,{id:j,path:_,labelX:N,labelY:L,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:T,interactionWidth:k})})}const yA=gw({isInternal:!1}),mw=gw({isInternal:!0});yA.displayName="BezierEdge";mw.displayName="BezierEdgeInternal";const z0={default:mw,straight:hw,step:dw,smoothstep:cw,simplebezier:sw},U0={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},vA=(e,n,r)=>r===he.Left?e-n:r===he.Right?e+n:e,bA=(e,n,r)=>r===he.Top?e-n:r===he.Bottom?e+n:e,$0="react-flow__edgeupdater";function L0({position:e,centerX:n,centerY:r,radius:a=10,onMouseDown:o,onMouseEnter:c,onMouseOut:u,type:d}){return S.jsx("circle",{onMouseDown:o,onMouseEnter:c,onMouseOut:u,className:ut([$0,`${$0}-${d}`]),cx:vA(n,a,e),cy:bA(r,a,e),r:a,stroke:"transparent",fill:"transparent"})}function wA({isReconnectable:e,reconnectRadius:n,edge:r,sourceX:a,sourceY:o,targetX:c,targetY:u,sourcePosition:d,targetPosition:g,onReconnect:h,onReconnectStart:p,onReconnectEnd:v,setReconnecting:y,setUpdateHover:b}){const E=Je(),x=(N,L)=>{if(N.button!==0)return;const{autoPanOnConnect:j,domNode:U,isValidConnection:V,connectionMode:J,connectionRadius:oe,lib:Z,onConnectStart:ee,onConnectEnd:G,cancelConnection:z,nodeLookup:P,rfId:R,panBy:H,updateConnection:B}=E.getState(),X=L.type==="target",D=(K,Q)=>{y(!1),v?.(K,r,L.type,Q)},O=K=>h?.(r,K),M=(K,Q)=>{y(!0),p?.(N,r,L.type),ee?.(K,Q)};lh.onPointerDown(N.nativeEvent,{autoPanOnConnect:j,connectionMode:J,connectionRadius:oe,domNode:U,handleId:L.id,nodeId:L.nodeId,nodeLookup:P,isTarget:X,edgeUpdaterType:L.type,lib:Z,flowId:R,cancelConnection:z,panBy:H,isValidConnection:V,onConnect:O,onConnectStart:M,onConnectEnd:G,onReconnectEnd:D,updateConnection:B,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,dragThreshold:E.getState().connectionDragThreshold,handleDomNode:N.currentTarget})},T=N=>x(N,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),C=N=>x(N,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),k=()=>b(!0),_=()=>b(!1);return S.jsxs(S.Fragment,{children:[(e===!0||e==="source")&&S.jsx(L0,{position:d,centerX:a,centerY:o,radius:n,onMouseDown:T,onMouseEnter:k,onMouseOut:_,type:"source"}),(e===!0||e==="target")&&S.jsx(L0,{position:g,centerX:c,centerY:u,radius:n,onMouseDown:C,onMouseEnter:k,onMouseOut:_,type:"target"})]})}function xA({id:e,edgesFocusable:n,edgesReconnectable:r,elementsSelectable:a,onClick:o,onDoubleClick:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,rfId:E,edgeTypes:x,noPanClassName:T,onError:C,disableKeyboardA11y:k}){let _=De(pe=>pe.edgeLookup.get(e));const N=De(pe=>pe.defaultEdgeOptions);_=N?{...N,..._}:_;let L=_.type||"default",j=x?.[L]||z0[L];j===void 0&&(C?.("011",On.error011(L)),L="default",j=x?.default||z0.default);const U=!!(_.focusable||n&&typeof _.focusable>"u"),V=typeof v<"u"&&(_.reconnectable||r&&typeof _.reconnectable>"u"),J=!!(_.selectable||a&&typeof _.selectable>"u"),oe=q.useRef(null),[Z,ee]=q.useState(!1),[G,z]=q.useState(!1),P=Je(),{zIndex:R,sourceX:H,sourceY:B,targetX:X,targetY:D,sourcePosition:O,targetPosition:M}=De(q.useCallback(pe=>{const xe=pe.nodeLookup.get(_.source),Ce=pe.nodeLookup.get(_.target);if(!xe||!Ce)return{zIndex:_.zIndex,...U0};const Ie=gT({id:e,sourceNode:xe,targetNode:Ce,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:pe.connectionMode,onError:C});return{zIndex:oT({selected:_.selected,zIndex:_.zIndex,sourceNode:xe,targetNode:Ce,elevateOnSelect:pe.elevateEdgesOnSelect}),...Ie||U0}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Fe),K=q.useMemo(()=>_.markerStart?`url('#${sh(_.markerStart,E)}')`:void 0,[_.markerStart,E]),Q=q.useMemo(()=>_.markerEnd?`url('#${sh(_.markerEnd,E)}')`:void 0,[_.markerEnd,E]);if(_.hidden||H===null||B===null||X===null||D===null)return null;const se=pe=>{const{addSelectedEdges:xe,unselectNodesAndEdges:Ce,multiSelectionActive:Ie}=P.getState();J&&(P.setState({nodesSelectionActive:!1}),_.selected&&Ie?(Ce({nodes:[],edges:[_]}),oe.current?.blur()):xe([e])),o&&o(pe,_)},ue=c?pe=>{c(pe,{..._})}:void 0,ce=u?pe=>{u(pe,{..._})}:void 0,le=d?pe=>{d(pe,{..._})}:void 0,de=g?pe=>{g(pe,{..._})}:void 0,Ee=h?pe=>{h(pe,{..._})}:void 0,_e=pe=>{if(!k&&cb.includes(pe.key)&&J){const{unselectNodesAndEdges:xe,addSelectedEdges:Ce}=P.getState();pe.key==="Escape"?(oe.current?.blur(),xe({edges:[_]})):Ce([e])}};return S.jsx("svg",{style:{zIndex:R},children:S.jsxs("g",{className:ut(["react-flow__edge",`react-flow__edge-${L}`,_.className,T,{selected:_.selected,animated:_.animated,inactive:!J&&!o,updating:Z,selectable:J}]),onClick:se,onDoubleClick:ue,onContextMenu:ce,onMouseEnter:le,onMouseMove:de,onMouseLeave:Ee,onKeyDown:U?_e:void 0,tabIndex:U?0:void 0,role:_.ariaRole??(U?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":U?`${Pb}-${E}`:void 0,ref:oe,..._.domAttributes,children:[!G&&S.jsx(j,{id:e,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:J,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:H,sourceY:B,targetX:X,targetY:D,sourcePosition:O,targetPosition:M,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:K,markerEnd:Q,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),V&&S.jsx(wA,{edge:_,isReconnectable:V,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,sourceX:H,sourceY:B,targetX:X,targetY:D,sourcePosition:O,targetPosition:M,setUpdateHover:ee,setReconnecting:z})]})})}var _A=q.memo(xA);const SA=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function pw({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:r,edgeTypes:a,noPanClassName:o,onReconnect:c,onEdgeContextMenu:u,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:v,onEdgeDoubleClick:y,onReconnectStart:b,onReconnectEnd:E,disableKeyboardA11y:x}){const{edgesFocusable:T,edgesReconnectable:C,elementsSelectable:k,onError:_}=De(SA,Fe),N=oA(n);return S.jsxs("div",{className:"react-flow__edges",children:[S.jsx(fA,{defaultColor:e,rfId:r}),N.map(L=>S.jsx(_A,{id:L,edgesFocusable:T,edgesReconnectable:C,elementsSelectable:k,noPanClassName:o,onReconnect:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,onClick:p,reconnectRadius:v,onDoubleClick:y,onReconnectStart:b,onReconnectEnd:E,rfId:r,onError:_,edgeTypes:a,disableKeyboardA11y:x},L))]})}pw.displayName="EdgeRenderer";const EA=q.memo(pw),TA=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function CA({children:e}){const n=De(TA);return S.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function AA(e){const n=$h(),r=q.useRef(!1);q.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const NA=e=>e.panZoom?.syncViewport;function OA(e){const n=De(NA),r=Je();return q.useEffect(()=>{e&&(n?.(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function RA(e){return e.connection.inProgress?{...e.connection,to:So(e.connection.to,e.transform)}:{...e.connection}}function kA(e){return RA}function MA(e){const n=kA();return De(n,Fe)}const jA=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function DA({containerStyle:e,style:n,type:r,component:a}){const{nodesConnectable:o,width:c,height:u,isValid:d,inProgress:g}=De(jA,Fe);return!(c&&o&&g)?null:S.jsx("svg",{style:e,width:c,height:u,className:"react-flow__connectionline react-flow__container",children:S.jsx("g",{className:ut(["react-flow__connection",fb(d)]),children:S.jsx(yw,{style:n,type:r,CustomComponent:a,isValid:d})})})}const yw=({style:e,type:n=Li.Bezier,CustomComponent:r,isValid:a})=>{const{inProgress:o,from:c,fromNode:u,fromHandle:d,fromPosition:g,to:h,toNode:p,toHandle:v,toPosition:y}=MA();if(!o)return;if(r)return S.jsx(r,{connectionLineType:n,connectionLineStyle:e,fromNode:u,fromHandle:d,fromX:c.x,fromY:c.y,toX:h.x,toY:h.y,fromPosition:g,toPosition:y,connectionStatus:fb(a),toNode:p,toHandle:v});let b="";const E={sourceX:c.x,sourceY:c.y,sourcePosition:g,targetX:h.x,targetY:h.y,targetPosition:y};switch(n){case Li.Bezier:[b]=Eb(E);break;case Li.SimpleBezier:[b]=rw(E);break;case Li.Step:[b]=ah({...E,borderRadius:0});break;case Li.SmoothStep:[b]=ah(E);break;default:[b]=Ab(E)}return S.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};yw.displayName="ConnectionLine";const zA={};function H0(e=zA){q.useRef(e),Je(),q.useEffect(()=>{},[e])}function UA(){Je(),q.useRef(!1),q.useEffect(()=>{},[])}function vw({nodeTypes:e,edgeTypes:n,onInit:r,onNodeClick:a,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:b,connectionLineType:E,connectionLineStyle:x,connectionLineComponent:T,connectionLineContainerStyle:C,selectionKeyCode:k,selectionOnDrag:_,selectionMode:N,multiSelectionKeyCode:L,panActivationKeyCode:j,zoomActivationKeyCode:U,deleteKeyCode:V,onlyRenderVisibleElements:J,elementsSelectable:oe,defaultViewport:Z,translateExtent:ee,minZoom:G,maxZoom:z,preventScrolling:P,defaultMarkerColor:R,zoomOnScroll:H,zoomOnPinch:B,panOnScroll:X,panOnScrollSpeed:D,panOnScrollMode:O,zoomOnDoubleClick:M,panOnDrag:K,onPaneClick:Q,onPaneMouseEnter:se,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:de,paneClickDistance:Ee,nodeClickDistance:_e,onEdgeContextMenu:pe,onEdgeMouseEnter:xe,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,noDragClassName:ri,noWheelClassName:ai,noPanClassName:qi,disableKeyboardA11y:Vi,nodeExtent:yt,rfId:Ar,viewport:kn,onViewportChange:si}){return H0(e),H0(n),UA(),AA(r),OA(kn),S.jsx(JC,{onPaneClick:Q,onPaneMouseEnter:se,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneContextMenu:de,onPaneScroll:le,paneClickDistance:Ee,deleteKeyCode:V,selectionKeyCode:k,selectionOnDrag:_,selectionMode:N,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:L,panActivationKeyCode:j,zoomActivationKeyCode:U,elementsSelectable:oe,zoomOnScroll:H,zoomOnPinch:B,zoomOnDoubleClick:M,panOnScroll:X,panOnScrollSpeed:D,panOnScrollMode:O,panOnDrag:K,defaultViewport:Z,translateExtent:ee,minZoom:G,maxZoom:z,onSelectionContextMenu:v,preventScrolling:P,noDragClassName:ri,noWheelClassName:ai,noPanClassName:qi,disableKeyboardA11y:Vi,onViewportChange:si,isControlledViewport:!!kn,children:S.jsxs(CA,{children:[S.jsx(EA,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:u,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,onlyRenderVisibleElements:J,onEdgeContextMenu:pe,onEdgeMouseEnter:xe,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,defaultMarkerColor:R,noPanClassName:qi,disableKeyboardA11y:Vi,rfId:Ar}),S.jsx(DA,{style:x,type:E,component:T,containerStyle:C}),S.jsx("div",{className:"react-flow__edgelabel-renderer"}),S.jsx(sA,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:_e,onlyRenderVisibleElements:J,noPanClassName:qi,noDragClassName:ri,disableKeyboardA11y:Vi,nodeExtent:yt,rfId:Ar}),S.jsx("div",{className:"react-flow__viewport-portal"})]})})}vw.displayName="GraphView";const $A=q.memo(vw),B0=({nodes:e,edges:n,defaultNodes:r,defaultEdges:a,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:v}={})=>{const y=new Map,b=new Map,E=new Map,x=new Map,T=a??n??[],C=r??e??[],k=p??[0,0],_=v??no;Rb(E,x,T);const N=oh(C,y,b,{nodeOrigin:k,nodeExtent:_,elevateNodesOnSelect:!1});let L=[0,0,1];if(u&&o&&c){const j=xo(y,{filter:oe=>!!((oe.width||oe.initialWidth)&&(oe.height||oe.initialHeight))}),{x:U,y:V,zoom:J}=kh(j,o,c,g,h,d?.padding??.1);L=[U,V,J]}return{rfId:"1",width:o??0,height:c??0,transform:L,nodes:C,nodesInitialized:N,nodeLookup:y,parentLookup:b,edges:T,edgeLookup:x,connectionLookup:E,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:a!==void 0,panZoom:null,minZoom:g,maxZoom:h,translateExtent:no,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ba.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:d,fitViewResolver:null,connection:{...db},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:tT,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:ub}},LA=({nodes:e,edges:n,defaultNodes:r,defaultEdges:a,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v})=>nC((y,b)=>{async function E(){const{nodeLookup:x,panZoom:T,fitViewOptions:C,fitViewResolver:k,width:_,height:N,minZoom:L,maxZoom:j}=b();T&&(await W2({nodes:x,width:_,height:N,panZoom:T,minZoom:L,maxZoom:j},C),k?.resolve(!0),y({fitViewResolver:null}))}return{...B0({nodes:e,edges:n,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v,defaultNodes:r,defaultEdges:a}),setNodes:x=>{const{nodeLookup:T,parentLookup:C,nodeOrigin:k,elevateNodesOnSelect:_,fitViewQueued:N}=b(),L=oh(x,T,C,{nodeOrigin:k,nodeExtent:v,elevateNodesOnSelect:_,checkEquality:!0});N&&L?(E(),y({nodes:x,nodesInitialized:L,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:x,nodesInitialized:L})},setEdges:x=>{const{connectionLookup:T,edgeLookup:C}=b();Rb(T,C,x),y({edges:x})},setDefaultNodesAndEdges:(x,T)=>{if(x){const{setNodes:C}=b();C(x),y({hasDefaultNodes:!0})}if(T){const{setEdges:C}=b();C(T),y({hasDefaultEdges:!0})}},updateNodeInternals:x=>{const{triggerNodeChanges:T,nodeLookup:C,parentLookup:k,domNode:_,nodeOrigin:N,nodeExtent:L,debug:j,fitViewQueued:U}=b(),{changes:V,updatedInternals:J}=_T(x,C,k,_,N,L);J&&(vT(C,k,{nodeOrigin:N,nodeExtent:L}),U?(E(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),V?.length>0&&(j&&console.log("React Flow: trigger node changes",V),T?.(V)))},updateNodePositions:(x,T=!1)=>{const C=[],k=[],{nodeLookup:_,triggerNodeChanges:N}=b();for(const[L,j]of x){const U=_.get(L),V=!!(U?.expandParent&&U?.parentId&&j?.position),J={id:L,type:"position",position:V?{x:Math.max(0,j.position.x),y:Math.max(0,j.position.y)}:j.position,dragging:T};V&&U.parentId&&C.push({id:L,parentId:U.parentId,rect:{...j.internals.positionAbsolute,width:j.measured.width??0,height:j.measured.height??0}}),k.push(J)}if(C.length>0){const{parentLookup:L,nodeOrigin:j}=b(),U=Uh(C,_,L,j);k.push(...U)}N(k)},triggerNodeChanges:x=>{const{onNodesChange:T,setNodes:C,nodes:k,hasDefaultNodes:_,debug:N}=b();if(x?.length){if(_){const L=Xb(x,k);C(L)}N&&console.log("React Flow: trigger node changes",x),T?.(x)}},triggerEdgeChanges:x=>{const{onEdgesChange:T,setEdges:C,edges:k,hasDefaultEdges:_,debug:N}=b();if(x?.length){if(_){const L=Kb(x,k);C(L)}N&&console.log("React Flow: trigger edge changes",x),T?.(x)}},addSelectedNodes:x=>{const{multiSelectionActive:T,edgeLookup:C,nodeLookup:k,triggerNodeChanges:_,triggerEdgeChanges:N}=b();if(T){const L=x.map(j=>gr(j,!0));_(L);return}_(ja(k,new Set([...x]),!0)),N(ja(C))},addSelectedEdges:x=>{const{multiSelectionActive:T,edgeLookup:C,nodeLookup:k,triggerNodeChanges:_,triggerEdgeChanges:N}=b();if(T){const L=x.map(j=>gr(j,!0));N(L);return}N(ja(C,new Set([...x]))),_(ja(k,new Set,!0))},unselectNodesAndEdges:({nodes:x,edges:T}={})=>{const{edges:C,nodes:k,nodeLookup:_,triggerNodeChanges:N,triggerEdgeChanges:L}=b(),j=x||k,U=T||C,V=j.map(oe=>{const Z=_.get(oe.id);return Z&&(Z.selected=!1),gr(oe.id,!1)}),J=U.map(oe=>gr(oe.id,!1));N(V),L(J)},setMinZoom:x=>{const{panZoom:T,maxZoom:C}=b();T?.setScaleExtent([x,C]),y({minZoom:x})},setMaxZoom:x=>{const{panZoom:T,minZoom:C}=b();T?.setScaleExtent([C,x]),y({maxZoom:x})},setTranslateExtent:x=>{b().panZoom?.setTranslateExtent(x),y({translateExtent:x})},resetSelectedElements:()=>{const{edges:x,nodes:T,triggerNodeChanges:C,triggerEdgeChanges:k,elementsSelectable:_}=b();if(!_)return;const N=T.reduce((j,U)=>U.selected?[...j,gr(U.id,!1)]:j,[]),L=x.reduce((j,U)=>U.selected?[...j,gr(U.id,!1)]:j,[]);C(N),k(L)},setNodeExtent:x=>{const{nodes:T,nodeLookup:C,parentLookup:k,nodeOrigin:_,elevateNodesOnSelect:N,nodeExtent:L}=b();x[0][0]===L[0][0]&&x[0][1]===L[0][1]&&x[1][0]===L[1][0]&&x[1][1]===L[1][1]||(oh(T,C,k,{nodeOrigin:_,nodeExtent:x,elevateNodesOnSelect:N,checkEquality:!1}),y({nodeExtent:x}))},panBy:x=>{const{transform:T,width:C,height:k,panZoom:_,translateExtent:N}=b();return ST({delta:x,panZoom:_,transform:T,translateExtent:N,width:C,height:k})},setCenter:async(x,T,C)=>{const{width:k,height:_,maxZoom:N,panZoom:L}=b();if(!L)return Promise.resolve(!1);const j=typeof C?.zoom<"u"?C.zoom:N;return await L.setViewport({x:k/2-x*j,y:_/2-T*j,zoom:j},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...db}})},updateConnection:x=>{y({connection:x})},reset:()=>y({...B0()})}},Object.is);function HA({initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:a,initialWidth:o,initialHeight:c,initialMinZoom:u,initialMaxZoom:d,initialFitViewOptions:g,fitView:h,nodeOrigin:p,nodeExtent:v,children:y}){const[b]=q.useState(()=>LA({nodes:e,edges:n,defaultNodes:r,defaultEdges:a,width:o,height:c,fitView:h,minZoom:u,maxZoom:d,fitViewOptions:g,nodeOrigin:p,nodeExtent:v}));return S.jsx(iC,{value:b,children:S.jsx(CC,{children:y})})}function BA({children:e,nodes:n,edges:r,defaultNodes:a,defaultEdges:o,width:c,height:u,fitView:d,fitViewOptions:g,minZoom:h,maxZoom:p,nodeOrigin:v,nodeExtent:y}){return q.useContext(Pc)?S.jsx(S.Fragment,{children:e}):S.jsx(HA,{initialNodes:n,initialEdges:r,defaultNodes:a,defaultEdges:o,initialWidth:c,initialHeight:u,fitView:d,initialFitViewOptions:g,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:v,nodeExtent:y,children:e})}const IA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qA({nodes:e,edges:n,defaultNodes:r,defaultEdges:a,className:o,nodeTypes:c,edgeTypes:u,onNodeClick:d,onEdgeClick:g,onInit:h,onMove:p,onMoveStart:v,onMoveEnd:y,onConnect:b,onConnectStart:E,onConnectEnd:x,onClickConnectStart:T,onClickConnectEnd:C,onNodeMouseEnter:k,onNodeMouseMove:_,onNodeMouseLeave:N,onNodeContextMenu:L,onNodeDoubleClick:j,onNodeDragStart:U,onNodeDrag:V,onNodeDragStop:J,onNodesDelete:oe,onEdgesDelete:Z,onDelete:ee,onSelectionChange:G,onSelectionDragStart:z,onSelectionDrag:P,onSelectionDragStop:R,onSelectionContextMenu:H,onSelectionStart:B,onSelectionEnd:X,onBeforeDelete:D,connectionMode:O,connectionLineType:M=Li.Bezier,connectionLineStyle:K,connectionLineComponent:Q,connectionLineContainerStyle:se,deleteKeyCode:ue="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:de=io.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:_e=ao()?"Meta":"Control",zoomActivationKeyCode:pe=ao()?"Meta":"Control",snapToGrid:xe,snapGrid:Ce,onlyRenderVisibleElements:Ie=!1,selectNodesOnDrag:Ge,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ri,nodeOrigin:ai=Gb,edgesFocusable:qi,edgesReconnectable:Vi,elementsSelectable:yt=!0,defaultViewport:Ar=pC,minZoom:kn=.5,maxZoom:si=2,translateExtent:Pi=no,preventScrolling:nu=!0,nodeExtent:Nr,defaultMarkerColor:iu="#b1b1b7",zoomOnScroll:ru=!0,zoomOnPinch:Gi=!0,panOnScroll:At=!1,panOnScrollSpeed:xn=.5,panOnScrollMode:Nt=_r.Free,zoomOnDoubleClick:au=!0,panOnDrag:su=!0,onPaneClick:ou,onPaneMouseEnter:Or,onPaneMouseMove:Rr,onPaneMouseLeave:kr,onPaneScroll:Mn,onPaneContextMenu:Mr,paneClickDistance:Yi=0,nodeClickDistance:lu=0,children:Co,onReconnect:Xa,onReconnectStart:Xi,onReconnectEnd:cu,onEdgeContextMenu:Ao,onEdgeDoubleClick:No,onEdgeMouseEnter:Oo,onEdgeMouseMove:Ka,onEdgeMouseLeave:Za,reconnectRadius:Ro=10,onNodesChange:ko,onEdgesChange:_n,noDragClassName:dt="nodrag",noWheelClassName:Et="nowheel",noPanClassName:jn="nopan",fitView:jr,fitViewOptions:Mo,connectOnClick:uu,attributionPosition:jo,proOptions:Ki,defaultEdgeOptions:Qa,elevateNodesOnSelect:oi,elevateEdgesOnSelect:li,disableKeyboardA11y:ci=!1,autoPanOnConnect:ui,autoPanOnNodeDrag:rt,autoPanSpeed:Do,connectionRadius:zo,isValidConnection:Dn,onError:di,style:du,id:Ja,nodeDragThreshold:Uo,connectionDragThreshold:fu,viewport:Dr,onViewportChange:zr,width:cn,height:Rt,colorMode:$o="light",debug:hu,onScroll:Ur,ariaLabelConfig:Lo,...$r},gu){const Tt=Ja||"1",Fa=wC($o),Ho=q.useCallback(Lr=>{Lr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ur?.(Lr)},[Ur]);return S.jsx("div",{"data-testid":"rf__wrapper",...$r,onScroll:Ho,style:{...du,...IA},ref:gu,className:ut(["react-flow",o,Fa]),id:Ja,role:"application",children:S.jsxs(BA,{nodes:e,edges:n,width:cn,height:Rt,fitView:jr,fitViewOptions:Mo,minZoom:kn,maxZoom:si,nodeOrigin:ai,nodeExtent:Nr,children:[S.jsx($A,{onInit:h,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:k,onNodeMouseMove:_,onNodeMouseLeave:N,onNodeContextMenu:L,onNodeDoubleClick:j,nodeTypes:c,edgeTypes:u,connectionLineType:M,connectionLineStyle:K,connectionLineComponent:Q,connectionLineContainerStyle:se,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:de,deleteKeyCode:ue,multiSelectionKeyCode:_e,panActivationKeyCode:Ee,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Ie,defaultViewport:Ar,translateExtent:Pi,minZoom:kn,maxZoom:si,preventScrolling:nu,zoomOnScroll:ru,zoomOnPinch:Gi,zoomOnDoubleClick:au,panOnScroll:At,panOnScrollSpeed:xn,panOnScrollMode:Nt,panOnDrag:su,onPaneClick:ou,onPaneMouseEnter:Or,onPaneMouseMove:Rr,onPaneMouseLeave:kr,onPaneScroll:Mn,onPaneContextMenu:Mr,paneClickDistance:Yi,nodeClickDistance:lu,onSelectionContextMenu:H,onSelectionStart:B,onSelectionEnd:X,onReconnect:Xa,onReconnectStart:Xi,onReconnectEnd:cu,onEdgeContextMenu:Ao,onEdgeDoubleClick:No,onEdgeMouseEnter:Oo,onEdgeMouseMove:Ka,onEdgeMouseLeave:Za,reconnectRadius:Ro,defaultMarkerColor:iu,noDragClassName:dt,noWheelClassName:Et,noPanClassName:jn,rfId:Tt,disableKeyboardA11y:ci,nodeExtent:Nr,viewport:Dr,onViewportChange:zr}),S.jsx(bC,{nodes:e,edges:n,defaultNodes:r,defaultEdges:a,onConnect:b,onConnectStart:E,onConnectEnd:x,onClickConnectStart:T,onClickConnectEnd:C,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ri,edgesFocusable:qi,edgesReconnectable:Vi,elementsSelectable:yt,elevateNodesOnSelect:oi,elevateEdgesOnSelect:li,minZoom:kn,maxZoom:si,nodeExtent:Nr,onNodesChange:ko,onEdgesChange:_n,snapToGrid:xe,snapGrid:Ce,connectionMode:O,translateExtent:Pi,connectOnClick:uu,defaultEdgeOptions:Qa,fitView:jr,fitViewOptions:Mo,onNodesDelete:oe,onEdgesDelete:Z,onDelete:ee,onNodeDragStart:U,onNodeDrag:V,onNodeDragStop:J,onSelectionDrag:P,onSelectionDragStart:z,onSelectionDragStop:R,onMove:p,onMoveStart:v,onMoveEnd:y,noPanClassName:jn,nodeOrigin:ai,rfId:Tt,autoPanOnConnect:ui,autoPanOnNodeDrag:rt,autoPanSpeed:Do,onError:di,connectionRadius:zo,isValidConnection:Dn,selectNodesOnDrag:Ge,nodeDragThreshold:Uo,connectionDragThreshold:fu,onBeforeDelete:D,debug:hu,ariaLabelConfig:Lo}),S.jsx(mC,{onSelectionChange:G}),Co,S.jsx(uC,{proOptions:Ki,position:jo}),S.jsx(cC,{rfId:Tt,disableKeyboardA11y:ci})]})})}var bw=Zb(qA);function VA(e){const[n,r]=q.useState(e),a=q.useCallback(o=>r(c=>Xb(o,c)),[]);return[n,r,a]}function PA(e){const[n,r]=q.useState(e),a=q.useCallback(o=>r(c=>Kb(o,c)),[]);return[n,r,a]}function GA({dimensions:e,lineWidth:n,variant:r,className:a}){return S.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ut(["react-flow__background-pattern",r,a])})}function YA({radius:e,className:n}){return S.jsx("circle",{cx:e,cy:e,r:e,className:ut(["react-flow__background-pattern","dots",n])})}var Bi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Bi||(Bi={}));const XA={[Bi.Dots]:1,[Bi.Lines]:1,[Bi.Cross]:6},KA=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ww({id:e,variant:n=Bi.Dots,gap:r=20,size:a,lineWidth:o=1,offset:c=0,color:u,bgColor:d,style:g,className:h,patternClassName:p}){const v=q.useRef(null),{transform:y,patternId:b}=De(KA,Fe),E=a||XA[n],x=n===Bi.Dots,T=n===Bi.Cross,C=Array.isArray(r)?r:[r,r],k=[C[0]*y[2]||1,C[1]*y[2]||1],_=E*y[2],N=Array.isArray(c)?c:[c,c],L=T?[_,_]:k,j=[N[0]*y[2]||1+L[0]/2,N[1]*y[2]||1+L[1]/2],U=`${b}${e||""}`;return S.jsxs("svg",{className:ut(["react-flow__background",h]),style:{...g,...Yc,"--xy-background-color-props":d,"--xy-background-pattern-color-props":u},ref:v,"data-testid":"rf__background",children:[S.jsx("pattern",{id:U,x:y[0]%k[0],y:y[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:x?S.jsx(YA,{radius:_/2,className:p}):S.jsx(GA,{dimensions:L,lineWidth:o,variant:n,className:p})}),S.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${U})`})]})}ww.displayName="Background";const xw=q.memo(ww);function ZA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:S.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function QA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:S.jsx("path",{d:"M0 0h32v4.2H0z"})})}function JA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:S.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function FA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:S.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function WA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:S.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function rc({children:e,className:n,...r}){return S.jsx("button",{type:"button",className:ut(["react-flow__controls-button",n]),...r,children:e})}const eN=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function _w({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:a=!0,fitViewOptions:o,onZoomIn:c,onZoomOut:u,onFitView:d,onInteractiveChange:g,className:h,children:p,position:v="bottom-left",orientation:y="vertical","aria-label":b}){const E=Je(),{isInteractive:x,minZoomReached:T,maxZoomReached:C,ariaLabelConfig:k}=De(eN,Fe),{zoomIn:_,zoomOut:N,fitView:L}=$h(),j=()=>{_(),c?.()},U=()=>{N(),u?.()},V=()=>{L(o),d?.()},J=()=>{E.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),g?.(!x)},oe=y==="horizontal"?"horizontal":"vertical";return S.jsxs(Gc,{className:ut(["react-flow__controls",oe,h]),position:v,style:e,"data-testid":"rf__controls","aria-label":b??k["controls.ariaLabel"],children:[n&&S.jsxs(S.Fragment,{children:[S.jsx(rc,{onClick:j,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:C,children:S.jsx(ZA,{})}),S.jsx(rc,{onClick:U,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:T,children:S.jsx(QA,{})})]}),r&&S.jsx(rc,{className:"react-flow__controls-fitview",onClick:V,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:S.jsx(JA,{})}),a&&S.jsx(rc,{className:"react-flow__controls-interactive",onClick:J,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:x?S.jsx(WA,{}):S.jsx(FA,{})}),p]})}_w.displayName="Controls";const Sw=q.memo(_w);function tN({id:e,x:n,y:r,width:a,height:o,style:c,color:u,strokeColor:d,strokeWidth:g,className:h,borderRadius:p,shapeRendering:v,selected:y,onClick:b}){const{background:E,backgroundColor:x}=c||{},T=u||E||x;return S.jsx("rect",{className:ut(["react-flow__minimap-node",{selected:y},h]),x:n,y:r,rx:p,ry:p,width:a,height:o,style:{fill:T,stroke:d,strokeWidth:g},shapeRendering:v,onClick:b?C=>b(C,e):void 0})}const nN=q.memo(tN),iN=e=>e.nodes.map(n=>n.id),Lf=e=>e instanceof Function?e:()=>e;function rN({nodeStrokeColor:e,nodeColor:n,nodeClassName:r="",nodeBorderRadius:a=5,nodeStrokeWidth:o,nodeComponent:c=nN,onClick:u}){const d=De(iN,Fe),g=Lf(n),h=Lf(e),p=Lf(r),v=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return S.jsx(S.Fragment,{children:d.map(y=>S.jsx(sN,{id:y,nodeColorFunc:g,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:a,nodeStrokeWidth:o,NodeComponent:c,onClick:u,shapeRendering:v},y))})}function aN({id:e,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:a,nodeBorderRadius:o,nodeStrokeWidth:c,shapeRendering:u,NodeComponent:d,onClick:g}){const{node:h,x:p,y:v,width:y,height:b}=De(E=>{const{internals:x}=E.nodeLookup.get(e),T=x.userNode,{x:C,y:k}=x.positionAbsolute,{width:_,height:N}=ni(T);return{node:T,x:C,y:k,width:_,height:N}},Fe);return!h||h.hidden||!vb(h)?null:S.jsx(d,{x:p,y:v,width:y,height:b,style:h.style,selected:!!h.selected,className:a(h),color:n(h),borderRadius:o,strokeColor:r(h),strokeWidth:c,shapeRendering:u,onClick:g,id:h.id})}const sN=q.memo(aN);var oN=q.memo(rN);const lN=200,cN=150,uN=e=>!e.hidden,dN=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?yb(xo(e.nodeLookup,{filter:uN}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},fN="react-flow__minimap-desc";function Ew({style:e,className:n,nodeStrokeColor:r,nodeColor:a,nodeClassName:o="",nodeBorderRadius:c=5,nodeStrokeWidth:u,nodeComponent:d,bgColor:g,maskColor:h,maskStrokeColor:p,maskStrokeWidth:v,position:y="bottom-right",onClick:b,onNodeClick:E,pannable:x=!1,zoomable:T=!1,ariaLabel:C,inversePan:k,zoomStep:_=1,offsetScale:N=5}){const L=Je(),j=q.useRef(null),{boundingRect:U,viewBB:V,rfId:J,panZoom:oe,translateExtent:Z,flowWidth:ee,flowHeight:G,ariaLabelConfig:z}=De(dN,Fe),P=e?.width??lN,R=e?.height??cN,H=U.width/P,B=U.height/R,X=Math.max(H,B),D=X*P,O=X*R,M=N*X,K=U.x-(D-U.width)/2-M,Q=U.y-(O-U.height)/2-M,se=D+M*2,ue=O+M*2,ce=`${fN}-${J}`,le=q.useRef(0),de=q.useRef();le.current=X,q.useEffect(()=>{if(j.current&&oe)return de.current=MT({domNode:j.current,panZoom:oe,getTransform:()=>L.getState().transform,getViewScale:()=>le.current}),()=>{de.current?.destroy()}},[oe]),q.useEffect(()=>{de.current?.update({translateExtent:Z,width:ee,height:G,inversePan:k,pannable:x,zoomStep:_,zoomable:T})},[x,T,k,_,Z,ee,G]);const Ee=b?xe=>{const[Ce,Ie]=de.current?.pointer(xe)||[0,0];b(xe,{x:Ce,y:Ie})}:void 0,_e=E?q.useCallback((xe,Ce)=>{const Ie=L.getState().nodeLookup.get(Ce).internals.userNode;E(xe,Ie)},[]):void 0,pe=C??z["minimap.ariaLabel"];return S.jsx(Gc,{position:y,style:{...e,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof v=="number"?v*X:void 0,"--xy-minimap-node-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:ut(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:S.jsxs("svg",{width:P,height:R,viewBox:`${K} ${Q} ${se} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:j,onClick:Ee,children:[pe&&S.jsx("title",{id:ce,children:pe}),S.jsx(oN,{onClick:_e,nodeColor:a,nodeStrokeColor:r,nodeBorderRadius:c,nodeClassName:o,nodeStrokeWidth:u,nodeComponent:d}),S.jsx("path",{className:"react-flow__minimap-mask",d:`M${K-M},${Q-M}h${se+M*2}v${ue+M*2}h${-se-M*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ew.displayName="MiniMap";const Tw=q.memo(Ew),hN=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,gN={[Pa.Line]:"right",[Pa.Handle]:"bottom-right"};function mN({nodeId:e,position:n,variant:r=Pa.Handle,className:a,style:o=void 0,children:c,color:u,minWidth:d=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:v=!1,resizeDirection:y,autoScale:b=!0,shouldResize:E,onResizeStart:x,onResize:T,onResizeEnd:C}){const k=Wb(),_=typeof e=="string"?e:k,N=Je(),L=q.useRef(null),j=r===Pa.Handle,U=De(q.useCallback(hN(j&&b),[j,b]),Fe),V=q.useRef(null),J=n??gN[r];q.useEffect(()=>{if(!(!L.current||!_))return V.current||(V.current=YT({domNode:L.current,nodeId:_,getStoreItems:()=>{const{nodeLookup:Z,transform:ee,snapGrid:G,snapToGrid:z,nodeOrigin:P,domNode:R}=N.getState();return{nodeLookup:Z,transform:ee,snapGrid:G,snapToGrid:z,nodeOrigin:P,paneDomNode:R}},onChange:(Z,ee)=>{const{triggerNodeChanges:G,nodeLookup:z,parentLookup:P,nodeOrigin:R}=N.getState(),H=[],B={x:Z.x,y:Z.y},X=z.get(_);if(X&&X.expandParent&&X.parentId){const D=X.origin??R,O=Z.width??X.measured.width??0,M=Z.height??X.measured.height??0,K={id:X.id,parentId:X.parentId,rect:{width:O,height:M,...bb({x:Z.x??X.position.x,y:Z.y??X.position.y},{width:O,height:M},X.parentId,z,D)}},Q=Uh([K],z,P,R);H.push(...Q),B.x=Z.x?Math.max(D[0]*O,Z.x):void 0,B.y=Z.y?Math.max(D[1]*M,Z.y):void 0}if(B.x!==void 0&&B.y!==void 0){const D={id:_,type:"position",position:{...B}};H.push(D)}if(Z.width!==void 0&&Z.height!==void 0){const O={id:_,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:Z.width,height:Z.height}};H.push(O)}for(const D of ee){const O={...D,type:"position"};H.push(O)}G(H)},onEnd:({width:Z,height:ee})=>{const G={id:_,type:"dimensions",resizing:!1,dimensions:{width:Z,height:ee}};N.getState().triggerNodeChanges([G])}})),V.current.update({controlPosition:J,boundaries:{minWidth:d,minHeight:g,maxWidth:h,maxHeight:p},keepAspectRatio:v,resizeDirection:y,onResizeStart:x,onResize:T,onResizeEnd:C,shouldResize:E}),()=>{V.current?.destroy()}},[J,d,g,h,p,v,x,T,C,E]);const oe=J.split("-");return S.jsx("div",{className:ut(["react-flow__resize-control","nodrag",...oe,r,a]),ref:L,style:{...o,scale:U,...u&&{[j?"backgroundColor":"borderColor"]:u}},children:c})}q.memo(mN);const Cw={},{useDebugValue:pN}=kv,{useSyncExternalStoreWithSelector:yN}=Hb;let I0=!1;const vN=e=>e;function bN(e,n=vN,r){(Cw?"production":void 0)!=="production"&&r&&!I0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),I0=!0);const a=yN(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return pN(a),a}const q0=e=>{(Cw?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?Bb(e):e,r=(a,o)=>bN(n,a,o);return Object.assign(r,n),r},wN=e=>e?q0(e):q0,Hf=e=>({system:"systems",container:"containers",component:"components",person:"people",externalSystem:"externalSystems",shadow:"shadows"})[e]||`${e}s`,Te=wN((e,n)=>({debugMode:!1,metadata:{name:"New C4 Model",version:"1.0",author:"Solution Architect"},currentLevel:"context",viewMode:"edit",currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null,systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],warnings:[],setMetadata:r=>e({metadata:r}),setCurrentLevel:r=>e({currentLevel:r}),setViewMode:r=>e({viewMode:r}),navigateInto:r=>{const a=n();a.getElementById(r)&&e({currentParentId:r,navigationHistory:[...a.navigationHistory,a.currentParentId],selectedElement:null,selectedEdge:null})},navigateUp:()=>{const r=n();if(r.navigationHistory.length===0)return;const a=[...r.navigationHistory],o=a.pop();e({currentParentId:o,navigationHistory:a,selectedElement:null,selectedEdge:null})},navigateToRoot:()=>{e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},navigateTo:r=>{const a=n();if(r===null){e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null});return}const c=(u=>{const d=[];let g=a.getElementById(u);for(;g&&g.parentId;)d.unshift(g.parentId),g=a.getElementById(g.parentId);return d})(r);e({currentParentId:r,navigationHistory:[null,...c],selectedElement:null,selectedEdge:null})},getBreadcrumb:()=>{const r=n(),a=[];for(const o of r.navigationHistory)if(o!==null){const c=r.getElementById(o);c&&a.push(c)}if(r.currentParentId!==null){const o=r.getElementById(r.currentParentId);o&&a.push(o)}return a},getChildren:r=>{const o=n().getAllElements();return r===null?o.filter(c=>!c.parentId):o.filter(c=>c.parentId===r)},hasChildren:r=>n().getChildren(r).length>0,getChildCount:r=>n().getChildren(r).length,getElementPath:r=>{const a=n(),o=[];let c=a.getElementById(r);for(;c&&(o.unshift(c.name||c.id),c.parentId);)c=a.getElementById(c.parentId);return o.join(" / ")},setSelectedElement:r=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedElement called:",r?{id:r.id,type:r.type}:null),e({selectedElement:r,selectedEdge:null})},setSelectedEdge:r=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedEdge called:",r?{id:r.id}:null),e({selectedEdge:r,selectedElement:null})},addElement:(r,a)=>{const o=n(),c={id:`${r}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:r,parentId:o.currentParentId,...a},u=Hf(r);return e(d=>({[u]:[...d[u],c]})),c},updateElement:(r,a,o)=>{n().debugMode&&console.log("[Diagrams Debug] updateElement called:",{type:r,id:a,updates:o});const u=Hf(r);e(d=>{const g=d[u].map(v=>v.id===a?{...v,...o}:v),h=g.find(v=>v.id===a),p=d.selectedElement?.id===a?h:d.selectedElement;return d.debugMode&&h&&console.log("[Diagrams Debug] Element updated:",h),{[u]:g,selectedElement:p}})},deleteElement:(r,a)=>{const o=n(),c=Hf(r);let u={};o.currentParentId===a?u={currentParentId:null,navigationHistory:[]}:o.navigationHistory.includes(a)&&(u={currentParentId:null,navigationHistory:[]}),e(d=>({[c]:d[c].filter(g=>g.id!==a),relationships:d.relationships.filter(g=>g.from!==a&&g.to!==a),...u}))},addRelationship:r=>{const a={id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...r};return e(o=>({relationships:[...o.relationships,a]})),a},updateRelationship:(r,a)=>{n().debugMode&&console.log("[Diagrams Debug] updateRelationship called:",{id:r,updates:a}),e(c=>{const u=c.relationships.map(h=>h.id===r?{...h,...a}:h),d=u.find(h=>h.id===r),g=c.selectedEdge?.id===r?d:c.selectedEdge;return c.debugMode&&d&&console.log("[Diagrams Debug] Relationship updated:",d),{relationships:u,selectedEdge:g}})},deleteRelationship:r=>{e(a=>({relationships:a.relationships.filter(o=>o.id!==r)}))},getAllElements:()=>{const r=n();return[...r.systems,...r.containers,...r.components,...r.people,...r.externalSystems,...r.shadows]},getElementById:r=>n().getAllElements().find(o=>o.id===r),clearAll:()=>{e({systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],selectedElement:null,selectedEdge:null,warnings:[],currentParentId:null,navigationHistory:[]})},importModel:r=>{e({metadata:r.metadata||n().metadata,systems:r.systems||[],containers:r.containers||[],components:r.components||[],people:r.people||[],externalSystems:r.externalSystems||[],shadows:r.shadows||[],relationships:r.relationships||[],currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},exportModel:()=>{const r=n();return{metadata:r.metadata,systems:r.systems,containers:r.containers,components:r.components,people:r.people,externalSystems:r.externalSystems,shadows:r.shadows,relationships:r.relationships}},validateModel:()=>{const r=n(),a=[];r.containers.forEach(d=>{d.parentSystem&&!r.systems.find(g=>g.id===d.parentSystem)&&a.push({type:"warning",message:`Container "${d.name}" references non-existent parent system`,elementId:d.id})}),r.components.forEach(d=>{d.parentContainer&&!r.containers.find(g=>g.id===d.parentContainer)&&a.push({type:"warning",message:`Component "${d.name}" references non-existent parent container`,elementId:d.id})});const o=r.getAllElements(),c=new Set(o.map(d=>d.id));r.relationships.forEach(d=>{c.has(d.from)||a.push({type:"error",message:`Relationship references non-existent source element: ${d.from}`,elementId:d.id}),c.has(d.to)||a.push({type:"error",message:`Relationship references non-existent target element: ${d.to}`,elementId:d.id})});const u=n().getVisibleElements();return u.length>15&&a.push({type:"info",message:`Current view has ${u.length} elements. Consider splitting into multiple diagrams for clarity.`}),e({warnings:a}),a},getVisibleElements:()=>{const r=n(),a=r.currentParentId;return r.getAllElements().filter(c=>a===null?!c.parentId:c.parentId===a)}}));typeof window<"u"&&(window.__ZUSTAND_STORE__=Te);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Aw=(...e)=>e.filter((n,r,a)=>!!n&&a.indexOf(n)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=q.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:u,...d},g)=>q.createElement("svg",{ref:g,..._N,width:n,height:n,stroke:e,strokeWidth:a?Number(r)*24/Number(n):r,className:Aw("lucide",o),...d},[...u.map(([h,p])=>q.createElement(h,p)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(e,n)=>{const r=q.forwardRef(({className:a,...o},c)=>q.createElement(SN,{ref:c,iconNode:n,className:Aw(`lucide-${xN(e)}`,a),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Be("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Be("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Be("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Be("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Be("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Be("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Be("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Be("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Be("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Be("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Be("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Be("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),HN=e=>{if(!e)return null;let n=0;for(let a=0;a<e.length;a++)n=e.charCodeAt(a)+((n<<5)-n);const r=Math.abs(n)%360;return{bg:`hsl(${r}, 70%, 90%)`,text:`hsl(${r}, 70%, 30%)`,border:`hsl(${r}, 70%, 70%)`}},K0=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},BN=({data:e,selected:n})=>{const a=Te(h=>h.getChildCount)(e.id),o=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(h=>h.name).map(h=>({...h,initials:K0(h.name),colors:HN(K0(h.name))})),c=()=>{const h="px-4 py-3 rounded-lg border-2 min-w-[200px] shadow-lg transition-all";switch(e.type){case"system":return`${h} bg-blue-100 border-blue-500 hover:bg-blue-200`;case"container":return`${h} bg-green-100 border-green-500 hover:bg-green-200`;case"component":return`${h} bg-yellow-100 border-yellow-500 hover:bg-yellow-200`;case"person":return`${h} bg-purple-100 border-purple-500 hover:bg-purple-200`;case"externalSystem":return`${h} bg-gray-100 border-gray-500 hover:bg-gray-200`;default:return`${h} bg-white border-gray-300`}},u=()=>{const h="w-5 h-5";switch(e.type){case"system":return S.jsx(Zc,{className:h});case"container":return S.jsx(Ga,{className:h});case"component":return S.jsx(Kc,{className:h});case"person":return S.jsx(Qc,{className:h});case"externalSystem":return S.jsx(lo,{className:h});default:return S.jsx(Ga,{className:h})}},d=()=>{switch(e.type){case"system":return"Software System";case"container":return"Container";case"component":return"Component";case"person":return"Person";case"externalSystem":return"External System";default:return e.type}},g="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return S.jsxs("div",{className:`${c()} ${n?"ring-4 ring-blue-400":""} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,id:"top",className:g}),S.jsxs("div",{className:"flex items-start gap-2",children:[S.jsx("div",{className:"mt-1",children:u()}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:d()}),S.jsx("div",{className:"font-bold text-gray-900 mb-1",children:e.label||e.name||"Unnamed"}),e.technology&&S.jsxs("div",{className:"text-xs text-gray-600 italic mb-1",children:["[",e.technology,"]"]}),e.description&&S.jsx("div",{className:"text-xs text-gray-700 mt-2",children:e.description})]})]}),o.length>0&&S.jsx("div",{className:"absolute bottom-2 left-2 flex items-center gap-1",children:o.map(h=>S.jsx("div",{className:"px-1.5 py-0.5 rounded text-xs font-medium border",style:{backgroundColor:h.colors.bg,color:h.colors.text,borderColor:h.colors.border},title:`${h.label}: ${h.name}`,children:h.initials},h.label))}),a>0&&S.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 text-xs text-gray-500 bg-white/80 px-1.5 py-0.5 rounded",children:[S.jsx(UN,{className:"w-3 h-3"}),S.jsx("span",{children:a})]}),S.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:g}),S.jsx(Lt,{type:"source",position:he.Right,id:"right",className:g}),S.jsx(Lt,{type:"target",position:he.Left,id:"left",className:g})]})},IN=q.memo(BN),qN=({data:e,selected:n})=>{const a=Te(d=>d.getElementById)(e.targetId),o=()=>{const d="w-5 h-5";if(!a)return S.jsx(bc,{className:d});switch(a.type){case"system":return S.jsx(Zc,{className:d});case"container":return S.jsx(Ga,{className:d});case"component":return S.jsx(Kc,{className:d});case"person":return S.jsx(Qc,{className:d});case"externalSystem":return S.jsx(lo,{className:d});default:return S.jsx(bc,{className:d})}},c=()=>a?`Shadow  ${{system:"Software System",container:"Container",component:"Component",person:"Person",externalSystem:"External System"}[a.type]||a.type}`:"Shadow (broken link)",u="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return S.jsxs("div",{className:`px-4 py-3 rounded-lg border-2 border-dashed min-w-[200px] shadow-lg transition-all
        ${a?"bg-slate-50/50 border-slate-400":"bg-red-50/50 border-red-400"}
        ${n?"ring-4 ring-blue-400":""} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,id:"top",className:u}),S.jsxs("div",{className:"flex items-start gap-2 opacity-70",children:[S.jsx("div",{className:"mt-1",children:o()}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:c()}),S.jsx("div",{className:"font-bold text-gray-700 mb-1",children:a?.name||"Select target..."}),a?.technology&&S.jsxs("div",{className:"text-xs text-gray-500 italic mb-1",children:["[",a.technology,"]"]}),a?.description&&S.jsx("div",{className:"text-xs text-gray-600 mt-2",children:a.description})]})]}),S.jsx("div",{className:"absolute top-2 right-2",children:S.jsx(bc,{className:"w-4 h-4 text-slate-400"})}),S.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:u}),S.jsx(Lt,{type:"source",position:he.Right,id:"right",className:u}),S.jsx(Lt,{type:"target",position:he.Left,id:"left",className:u})]})},VN=q.memo(qN),PN=e=>{if(!e)return null;let n=0;for(let a=0;a<e.length;a++)n=e.charCodeAt(a)+((n<<5)-n);const r=Math.abs(n)%360;return{bg:`hsl(${r}, 70%, 90%)`,text:`hsl(${r}, 70%, 30%)`,border:`hsl(${r}, 70%, 70%)`}},Z0=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},GN=({data:e})=>{const n=Te(d=>d.setViewMode),r=Te(d=>d.navigateTo),a=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(d=>d.name).map(d=>({...d,initials:Z0(d.name),colors:PN(Z0(d.name))})),o=()=>{const d="w-4 h-4";switch(e.type){case"system":return S.jsx(Zc,{className:d});case"container":return S.jsx(Ga,{className:d});case"component":return S.jsx(Kc,{className:d});case"person":return S.jsx(Qc,{className:d});case"externalSystem":return S.jsx(lo,{className:d});default:return S.jsx(Ga,{className:d})}},c=()=>{const d="px-3 py-2 rounded border min-w-[150px] text-sm";switch(e.type){case"system":return`${d} bg-blue-50 border-blue-300`;case"container":return`${d} bg-green-50 border-green-300`;case"component":return`${d} bg-yellow-50 border-yellow-300`;case"person":return`${d} bg-purple-50 border-purple-300`;case"externalSystem":return`${d} bg-gray-50 border-gray-300`;default:return`${d} bg-white border-gray-200`}},u=d=>{d.stopPropagation();const g=e.parentId||null;g?r(g):Te.getState().navigateToRoot(),n("edit")};return S.jsxs("div",{className:`${c()} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,className:"!w-2 !h-2 !bg-gray-400 !border-0"}),S.jsxs("div",{className:"flex items-center gap-2",children:[o(),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"font-medium text-gray-900 truncate",children:e.name||"Unnamed"}),S.jsx("div",{className:"text-xs text-gray-500 capitalize",children:e.type})]}),S.jsx("button",{onClick:u,className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Go to this element in edit mode",children:S.jsx(lo,{className:"w-3 h-3 text-gray-400 hover:text-blue-500"})})]}),a.length>0&&S.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:a.map(d=>S.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium border",style:{backgroundColor:d.colors?.bg||"#f3f4f6",color:d.colors?.text||"#374151",borderColor:d.colors?.border||"#d1d5db"},title:`${d.label}: ${d.name}`,children:[S.jsx("span",{className:"opacity-60",children:d.label}),S.jsx("span",{children:d.initials})]},d.label))}),S.jsx(Lt,{type:"source",position:he.Bottom,className:"!w-2 !h-2 !bg-gray-400 !border-0"})]})},YN=q.memo(GN),XN={treeNode:YN},KN=e=>{const n=new Map,r=[];e.forEach(x=>{x.parentId?(n.has(x.parentId)||n.set(x.parentId,[]),n.get(x.parentId).push(x)):r.push(x)});const a=[],o=[],c=180,u=70,d=40,g=120,h=3,p=x=>{const T=n.get(x)||[];if(T.length===0)return c;const C=Math.min(T.length,h),k=Math.ceil(T.length/C);let _=c;for(let N=0;N<k;N++){let L=0;const j=Math.min(C,T.length-N*C);for(let U=0;U<j;U++){const V=N*C+U,J=p(T[V].id);L+=J,U<j-1&&(L+=d)}_=Math.max(_,L)}return _},v=x=>{const T=n.get(x)||[];if(T.length===0)return u;const C=Math.min(T.length,h),k=Math.ceil(T.length/C);let _=0;for(let N=0;N<k;N++){let L=u;for(let j=0;j<C;j++){const U=N*C+j;if(U<T.length){const V=v(T[U].id);L=Math.max(L,V)}}_+=L,N<k-1&&(_+=g)}return u+g+_},y=(x,T,C)=>{let k=u;for(let _=0;_<T;_++){const N=C*T+_;if(N<x.length){const L=v(x[N].id);k=Math.max(k,L)}}return k},b=(x,T,C,k=0)=>{a.push({id:x.id,type:"treeNode",position:{x:T,y:C},data:{...x,label:x.name}});const _=n.get(x.id)||[];if(_.length===0)return;const N=Math.min(_.length,h),L=Math.ceil(_.length/N);p(x.id);const j=T+c/2;let U=C+g;for(let V=0;V<L;V++){const J=Math.min(N,_.length-V*N),oe=[];for(let G=0;G<J;G++){const z=V*N+G;oe.push(p(_[z].id))}const Z=oe.reduce((G,z)=>G+z,0)+(J-1)*d;let ee=j-Z/2;for(let G=0;G<J;G++){const z=V*N+G,P=_[z],R=oe[G],H=ee+(R-c)/2;o.push({id:`edge-${x.id}-${P.id}`,source:x.id,target:P.id,type:"smoothstep",style:{stroke:"#94a3b8",strokeWidth:1}}),b(P,H,U,k+1),ee+=R+d}U+=y(_,N,V)+g}};let E=50;return r.forEach(x=>{const T=p(x.id);b(x,E,50),E+=T+80}),{nodes:a,edges:o}},ZN=()=>{const e=Te(g=>g.getAllElements),n=Te(g=>g.setViewMode);Te(g=>g.navigateInto);const r=Te(g=>g.navigateTo),a=Te(g=>g.navigateToRoot),o=e().filter(g=>g.type!=="shadow"),{nodes:c,edges:u}=q.useMemo(()=>KN(o),[o]),d=q.useCallback((g,h)=>{g.stopPropagation();const p=h.data;if(!p)return;const v=p.parentId||null;v?r(v):a(),n("edit")},[r,a,n]);return S.jsx("div",{className:"flex-1 h-full",children:S.jsxs(bw,{nodes:c,edges:u,nodeTypes:XN,onNodeDoubleClick:d,fitView:!0,fitViewOptions:{padding:.2},nodesDraggable:!1,nodesConnectable:!1,className:"bg-gray-50",children:[S.jsx(xw,{color:"#e2e8f0",gap:20}),S.jsx(Sw,{}),S.jsx(Tw,{nodeColor:g=>{switch(g.data?.type){case"system":return"#93c5fd";case"container":return"#86efac";case"component":return"#fde047";case"person":return"#c4b5fd";default:return"#e2e8f0"}}})]})})},QN=()=>{const{addElement:e,currentLevel:n}=Te(),r=Te(p=>p.currentParentId),a=Te(p=>p.getElementById),o=[{type:"system",icon:Zc,label:"Software System",color:"bg-blue-100 hover:bg-blue-200 text-blue-700"},{type:"container",icon:Ga,label:"Container",color:"bg-green-100 hover:bg-green-200 text-green-700"},{type:"component",icon:Kc,label:"Component",color:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700"},{type:"person",icon:Qc,label:"Person",color:"bg-purple-100 hover:bg-purple-200 text-purple-700"},{type:"externalSystem",icon:lo,label:"External System",color:"bg-gray-100 hover:bg-gray-200 text-gray-700"},{type:"shadow",icon:bc,label:"Shadow (Reference)",color:"bg-slate-100 hover:bg-slate-200 text-slate-700 border-dashed"}],u=(()=>{if(r===null)return["system","person","externalSystem","shadow"];const p=a(r);if(!p)return["system","person","externalSystem","shadow"];switch(p.type){case"system":return["container","person","shadow"];case"container":return["component","shadow"];case"component":return["component","shadow"];default:return["shadow"]}})(),d=o.filter(p=>u.includes(p.type)),g=(p,v)=>{p.dataTransfer.setData("application/c4-element-type",v),p.dataTransfer.effectAllowed="move"},h=()=>({context:"Context",container:"Container",component:"Component",code:"Code"})[n]||n;return S.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 p-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1",children:"Add Elements"}),S.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[h()," Level"]}),S.jsx("div",{className:"space-y-2",children:d.length>0?d.map(p=>{const v=p.icon;return S.jsxs("div",{draggable:!0,onDragStart:y=>g(y,p.type),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg border-2 transition-colors cursor-grab active:cursor-grabbing ${p.color}`,children:[S.jsx(v,{className:"w-5 h-5"}),S.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.type)}):S.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No elements can be added at this level"})}),S.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[S.jsx("h3",{className:"text-xs font-semibold text-blue-900 uppercase mb-2",children:"Quick Tips"}),S.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[S.jsx("li",{children:" Drag elements to canvas to add"}),S.jsx("li",{children:" Click elements to edit properties"}),S.jsx("li",{children:" Drag between elements to create relationships"}),S.jsx("li",{children:" Use mouse wheel to zoom"})]})]})]})},JN=()=>{const{selectedElement:e,selectedEdge:n,setSelectedElement:r,setSelectedEdge:a,updateElement:o,deleteElement:c,updateRelationship:u,deleteRelationship:d,getAllElements:g,getElementPath:h}=Te(),[p,v]=q.useState({name:"",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""}),[y,b]=q.useState({description:"",technology:"",arrowDirection:"right",lineStyle:"solid"}),[E,x]=q.useState(""),[T,C]=q.useState(!1),[k,_]=q.useState("");q.useEffect(()=>{if(e&&e.id)try{v({name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags.join(", "):"",ownerPM:e.ownerPM||"",ownerUX:e.ownerUX||"",ownerTech:e.ownerTech||""})}catch(G){console.error("[Diagrams] Error setting formData for element:",G,e),v({name:"Error loading element",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""})}},[e?.id]),q.useEffect(()=>{e&&e.type==="shadow"&&_(e.targetId||"")},[e?.id,e?.type]),q.useEffect(()=>{if(n&&n.id)try{b({description:n.description||"",technology:n.technology||"",arrowDirection:n.arrowDirection||"right",lineStyle:n.lineStyle||"solid"})}catch(G){console.error("[Diagrams] Error setting edgeFormData:",G,n),b({description:"Error loading relationship",technology:"",arrowDirection:"right",lineStyle:"solid"})}},[n?.id]),q.useEffect(()=>{const G=()=>C(!1);if(T){const z=setTimeout(()=>{document.addEventListener("click",G)},100);return()=>{clearTimeout(z),document.removeEventListener("click",G)}}},[T]);const N=(G,z)=>{v(P=>({...P,[G]:z}))},L=(G,z)=>{b(P=>({...P,[G]:z}))},j=()=>{if(e){const G={name:p.name,description:p.description,technology:p.technology,tags:p.tags.split(",").map(z=>z.trim()).filter(Boolean),ownerPM:p.ownerPM,ownerUX:p.ownerUX,ownerTech:p.ownerTech};o(e.type,e.id,G)}},U=()=>{n&&u(n.id,y)},V=(G,z)=>{const P={...y,[G]:z};b(P),n&&u(n.id,P)},J=()=>{e&&window.confirm("Are you sure you want to delete this element?")&&(c(e.type,e.id),r(null))},oe=()=>{n&&window.confirm("Are you sure you want to delete this relationship?")&&(d(n.id),a(null))},Z=g().filter(G=>G.type!=="shadow"),ee=E?Z.filter(G=>h(G.id).toLowerCase().includes(E.toLowerCase())):Z;return n&&!e?S.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Relationship Properties"}),S.jsx("button",{onClick:()=>a(null),className:"p-1 hover:bg-gray-100 rounded",children:S.jsx(X0,{className:"w-4 h-4"})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:n.id})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"edge-description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),S.jsx("input",{id:"edge-description",type:"text",value:y.description,onChange:G=>L("description",G.target.value),onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Makes API calls to"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"edge-technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology/Protocol"}),S.jsx("input",{id:"edge-technology",type:"text",value:y.technology,onChange:G=>L("technology",G.target.value),onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., REST/HTTPS, gRPC"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"arrow-direction",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Arrow Direction"}),S.jsxs("select",{id:"arrow-direction",value:y.arrowDirection,onChange:G=>V("arrowDirection",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"right",children:"Right "}),S.jsx("option",{value:"left",children:"Left "}),S.jsx("option",{value:"both",children:"Both "}),S.jsx("option",{value:"none",children:"None "})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"line-style",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Line Style"}),S.jsxs("select",{id:"line-style",value:y.lineStyle,onChange:G=>V("lineStyle",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"solid",children:"Solid "}),S.jsx("option",{value:"dashed",children:"Dashed   "}),S.jsx("option",{value:"dotted",children:"Dotted    "})]})]}),S.jsx("div",{className:"pt-4 border-t border-gray-200",children:S.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[S.jsx(uh,{className:"w-4 h-4"}),"Delete Relationship"]})})]})]}):e?!e.id||!e.type?(console.error("[Diagrams] Invalid selectedElement:",e),S.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:S.jsxs("div",{className:"text-center text-red-500 mt-8",children:[S.jsx("p",{className:"text-sm",children:"Error: Invalid element data"}),S.jsx("button",{onClick:()=>r(null),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Clear Selection"})]})})):S.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Properties"}),S.jsx("button",{onClick:()=>r(null),className:"p-1 hover:bg-gray-100 rounded",children:S.jsx(X0,{className:"w-4 h-4"})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Type"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:e.type||"Unknown"})]}),e.type==="shadow"&&S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Target Element"}),k&&S.jsxs("div",{className:"mb-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[S.jsx("div",{className:"font-medium text-blue-900",children:g().find(G=>G.id===k)?.name||"Unknown"}),S.jsx("div",{className:"text-xs text-blue-600",children:h(k)})]}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"text",value:E,onChange:G=>{x(G.target.value),C(!0)},onFocus:()=>C(!0),placeholder:"Search elements by path...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),T&&S.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-48 overflow-y-auto",children:ee.length===0?S.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No elements found"}):ee.slice(0,20).map(G=>S.jsxs("div",{onClick:()=>{_(G.id),x(""),C(!1),o("shadow",e.id,{targetId:G.id})},className:`px-3 py-2 cursor-pointer hover:bg-gray-100 ${G.id===k?"bg-blue-50":""}`,children:[S.jsx("div",{className:"text-sm font-medium",children:G.name||G.id}),S.jsx("div",{className:"text-xs text-gray-500",children:h(G.id)})]},G.id))})]}),S.jsx("div",{className:"mt-2",children:S.jsx("input",{type:"text",value:k,onChange:G=>{_(G.target.value),o("shadow",e.id,{targetId:G.target.value})},placeholder:"Or paste element ID directly...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-xs font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:e.id})]}),e.type!=="shadow"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Name"}),S.jsx("input",{id:"name",type:"text",value:p.name,onChange:G=>N("name",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter element name"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology"}),S.jsx("input",{id:"technology",type:"text",value:p.technology,onChange:G=>N("technology",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Spring Boot, React, PostgreSQL"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),S.jsx("textarea",{id:"description",value:p.description,onChange:G=>N("description",G.target.value),onBlur:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the element's purpose and responsibilities"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tags",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Tags"}),S.jsx("input",{id:"tags",type:"text",value:p.tags,onChange:G=>N("tags",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tag1, tag2, tag3"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated values"})]}),S.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-2",children:"Owners"}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{htmlFor:"ownerPM",className:"block text-xs text-gray-500 mb-1",children:"PM"}),S.jsx("input",{id:"ownerPM",type:"text",value:p.ownerPM,onChange:G=>N("ownerPM",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product Manager name"})]}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{htmlFor:"ownerUX",className:"block text-xs text-gray-500 mb-1",children:"UX"}),S.jsx("input",{id:"ownerUX",type:"text",value:p.ownerUX,onChange:G=>N("ownerUX",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"UX Designer name"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"ownerTech",className:"block text-xs text-gray-500 mb-1",children:"Tech"}),S.jsx("input",{id:"ownerTech",type:"text",value:p.ownerTech,onChange:G=>N("ownerTech",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tech Lead name"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Position"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-xs text-gray-500",children:"X:"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.x||0)})]}),S.jsxs("div",{children:[S.jsx("span",{className:"text-xs text-gray-500",children:"Y:"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.y||0)})]})]})]}),S.jsx("div",{className:"pt-4 border-t border-gray-200",children:S.jsxs("button",{onClick:J,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[S.jsx(uh,{className:"w-4 h-4"}),"Delete Element"]})})]})]}):S.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:S.jsx("div",{className:"text-center text-gray-500 mt-8",children:S.jsx("p",{className:"text-sm",children:"Select an element to view and edit its properties"})})})},FN=()=>{const e=Te(u=>u.getBreadcrumb),n=Te(u=>u.navigateToRoot),r=Te(u=>u.navigateTo),a=Te(u=>u.currentParentId),o=Te(u=>u.metadata),c=e();return S.jsxs("nav",{className:"flex items-center gap-1 text-sm",children:[S.jsxs("button",{onClick:n,className:`flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-200 transition-colors ${a===null?"text-blue-600 font-medium":"text-gray-600"}`,title:"Go to root view",children:[S.jsx(DN,{className:"w-4 h-4"}),S.jsx("span",{children:o.name||"Model"})]}),c.map((u,d)=>S.jsxs("div",{className:"flex items-center",children:[S.jsx(CN,{className:"w-4 h-4 text-gray-400"}),S.jsx("button",{onClick:()=>r(u.id),className:`px-2 py-1 rounded hover:bg-gray-200 transition-colors ${d===c.length-1?"text-blue-600 font-medium":"text-gray-600"}`,children:u.name})]},u.id))]})};function WN(e,n){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),a=r.createElement("base"),o=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(o),n&&(a.href=n),o.href=e,o.href}const eO=(()=>{let e=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)})();function Ii(e){const n=[];for(let r=0,a=e.length;r<a;r++)n.push(e[r]);return n}let ba=null;function Nw(e={}){return ba||(e.includeStyleProperties?(ba=e.includeStyleProperties,ba):(ba=Ii(window.getComputedStyle(document.documentElement)),ba))}function kc(e,n){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(n);return a?parseFloat(a.replace("px","")):0}function tO(e){const n=kc(e,"border-left-width"),r=kc(e,"border-right-width");return e.clientWidth+n+r}function nO(e){const n=kc(e,"border-top-width"),r=kc(e,"border-bottom-width");return e.clientHeight+n+r}function Ow(e,n={}){const r=n.width||tO(e),a=n.height||nO(e);return{width:r,height:a}}function iO(){let e,n;try{n=process}catch{}const r=n&&n.env?n.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Xt=16384;function rO(e){(e.width>Xt||e.height>Xt)&&(e.width>Xt&&e.height>Xt?e.width>e.height?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt):e.width>Xt?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt))}function Mc(e){return new Promise((n,r)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>n(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function aO(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function sO(e,n,r){const a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg"),c=document.createElementNS(a,"foreignObject");return o.setAttribute("width",`${n}`),o.setAttribute("height",`${r}`),o.setAttribute("viewBox",`0 0 ${n} ${r}`),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("externalResourcesRequired","true"),o.appendChild(c),c.appendChild(e),aO(o)}const Ht=(e,n)=>{if(e instanceof n)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===n.name||Ht(r,n)};function oO(e){const n=e.getPropertyValue("content");return`${e.cssText} content: '${n.replace(/'|"/g,"")}';`}function lO(e,n){return Nw(n).map(r=>{const a=e.getPropertyValue(r),o=e.getPropertyPriority(r);return`${r}: ${a}${o?" !important":""};`}).join(" ")}function cO(e,n,r,a){const o=`.${e}:${n}`,c=r.cssText?oO(r):lO(r,a);return document.createTextNode(`${o}{${c}}`)}function Q0(e,n,r,a){const o=window.getComputedStyle(e,r),c=o.getPropertyValue("content");if(c===""||c==="none")return;const u=eO();try{n.className=`${n.className} ${u}`}catch{return}const d=document.createElement("style");d.appendChild(cO(u,r,o,a)),n.appendChild(d)}function uO(e,n,r){Q0(e,n,":before",r),Q0(e,n,":after",r)}const J0="application/font-woff",F0="image/jpeg",dO={woff:J0,woff2:J0,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:F0,jpeg:F0,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function fO(e){const n=/\.([^./]*?)$/g.exec(e);return n?n[1]:""}function Hh(e){const n=fO(e).toLowerCase();return dO[n]||""}function hO(e){return e.split(/,/)[1]}function dh(e){return e.search(/^(data:)/)!==-1}function gO(e,n){return`data:${n};base64,${e}`}async function Rw(e,n,r){const a=await fetch(e,n);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const o=await a.blob();return new Promise((c,u)=>{const d=new FileReader;d.onerror=u,d.onloadend=()=>{try{c(r({res:a,result:d.result}))}catch(g){u(g)}},d.readAsDataURL(o)})}const qf={};function mO(e,n,r){let a=e.replace(/\?.*/,"");return r&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),n?`[${n}]${a}`:a}async function Bh(e,n,r){const a=mO(e,n,r.includeQueryParams);if(qf[a]!=null)return qf[a];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const c=await Rw(e,r.fetchRequestInit,({res:u,result:d})=>(n||(n=u.headers.get("Content-Type")||""),hO(d)));o=gO(c,n)}catch(c){o=r.imagePlaceholder||"";let u=`Failed to fetch resource: ${e}`;c&&(u=typeof c=="string"?c:c.message),u&&console.warn(u)}return qf[a]=o,o}async function pO(e){const n=e.toDataURL();return n==="data:,"?e.cloneNode(!1):Mc(n)}async function yO(e,n){if(e.currentSrc){const c=document.createElement("canvas"),u=c.getContext("2d");c.width=e.clientWidth,c.height=e.clientHeight,u?.drawImage(e,0,0,c.width,c.height);const d=c.toDataURL();return Mc(d)}const r=e.poster,a=Hh(r),o=await Bh(r,a,n);return Mc(o)}async function vO(e,n){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await Jc(e.contentDocument.body,n,!0)}catch{}return e.cloneNode(!1)}async function bO(e,n){return Ht(e,HTMLCanvasElement)?pO(e):Ht(e,HTMLVideoElement)?yO(e,n):Ht(e,HTMLIFrameElement)?vO(e,n):e.cloneNode(kw(e))}const wO=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",kw=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function xO(e,n,r){var a,o;if(kw(n))return n;let c=[];return wO(e)&&e.assignedNodes?c=Ii(e.assignedNodes()):Ht(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?c=Ii(e.contentDocument.body.childNodes):c=Ii(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),c.length===0||Ht(e,HTMLVideoElement)||await c.reduce((u,d)=>u.then(()=>Jc(d,r)).then(g=>{g&&n.appendChild(g)}),Promise.resolve()),n}function _O(e,n,r){const a=n.style;if(!a)return;const o=window.getComputedStyle(e);o.cssText?(a.cssText=o.cssText,a.transformOrigin=o.transformOrigin):Nw(r).forEach(c=>{let u=o.getPropertyValue(c);c==="font-size"&&u.endsWith("px")&&(u=`${Math.floor(parseFloat(u.substring(0,u.length-2)))-.1}px`),Ht(e,HTMLIFrameElement)&&c==="display"&&u==="inline"&&(u="block"),c==="d"&&n.getAttribute("d")&&(u=`path(${n.getAttribute("d")})`),a.setProperty(c,u,o.getPropertyPriority(c))})}function SO(e,n){Ht(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),Ht(e,HTMLInputElement)&&n.setAttribute("value",e.value)}function EO(e,n){if(Ht(e,HTMLSelectElement)){const r=n,a=Array.from(r.children).find(o=>e.value===o.getAttribute("value"));a&&a.setAttribute("selected","")}}function TO(e,n,r){return Ht(n,Element)&&(_O(e,n,r),uO(e,n,r),SO(e,n),EO(e,n)),n}async function CO(e,n){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const a={};for(let c=0;c<r.length;c++){const d=r[c].getAttribute("xlink:href");if(d){const g=e.querySelector(d),h=document.querySelector(d);!g&&h&&!a[d]&&(a[d]=await Jc(h,n,!0))}}const o=Object.values(a);if(o.length){const c="http://www.w3.org/1999/xhtml",u=document.createElementNS(c,"svg");u.setAttribute("xmlns",c),u.style.position="absolute",u.style.width="0",u.style.height="0",u.style.overflow="hidden",u.style.display="none";const d=document.createElementNS(c,"defs");u.appendChild(d);for(let g=0;g<o.length;g++)d.appendChild(o[g]);e.appendChild(u)}return e}async function Jc(e,n,r){return!r&&n.filter&&!n.filter(e)?null:Promise.resolve(e).then(a=>bO(a,n)).then(a=>xO(e,a,n)).then(a=>TO(e,a,n)).then(a=>CO(a,n))}const Mw=/url\((['"]?)([^'"]+?)\1\)/g,AO=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,NO=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function OO(e){const n=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function RO(e){const n=[];return e.replace(Mw,(r,a,o)=>(n.push(o),r)),n.filter(r=>!dh(r))}async function kO(e,n,r,a,o){try{const c=r?WN(n,r):n,u=Hh(n);let d;return o||(d=await Bh(c,u,a)),e.replace(OO(n),`$1${d}$3`)}catch{}return e}function MO(e,{preferredFontFormat:n}){return n?e.replace(NO,r=>{for(;;){const[a,,o]=AO.exec(r)||[];if(!o)return"";if(o===n)return`src: ${a};`}}):e}function jw(e){return e.search(Mw)!==-1}async function Dw(e,n,r){if(!jw(e))return e;const a=MO(e,r);return RO(a).reduce((c,u)=>c.then(d=>kO(d,u,n,r)),Promise.resolve(a))}async function wa(e,n,r){var a;const o=(a=n.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(o){const c=await Dw(o,null,r);return n.style.setProperty(e,c,n.style.getPropertyPriority(e)),!0}return!1}async function jO(e,n){await wa("background",e,n)||await wa("background-image",e,n),await wa("mask",e,n)||await wa("-webkit-mask",e,n)||await wa("mask-image",e,n)||await wa("-webkit-mask-image",e,n)}async function DO(e,n){const r=Ht(e,HTMLImageElement);if(!(r&&!dh(e.src))&&!(Ht(e,SVGImageElement)&&!dh(e.href.baseVal)))return;const a=r?e.src:e.href.baseVal,o=await Bh(a,Hh(a),n);await new Promise((c,u)=>{e.onload=c,e.onerror=n.onImageErrorHandler?(...g)=>{try{c(n.onImageErrorHandler(...g))}catch(h){u(h)}}:u;const d=e;d.decode&&(d.decode=c),d.loading==="lazy"&&(d.loading="eager"),r?(e.srcset="",e.src=o):e.href.baseVal=o})}async function zO(e,n){const a=Ii(e.childNodes).map(o=>zw(o,n));await Promise.all(a).then(()=>e)}async function zw(e,n){Ht(e,Element)&&(await jO(e,n),await DO(e,n),await zO(e,n))}function UO(e,n){const{style:r}=e;n.backgroundColor&&(r.backgroundColor=n.backgroundColor),n.width&&(r.width=`${n.width}px`),n.height&&(r.height=`${n.height}px`);const a=n.style;return a!=null&&Object.keys(a).forEach(o=>{r[o]=a[o]}),e}const W0={};async function ev(e){let n=W0[e];if(n!=null)return n;const a=await(await fetch(e)).text();return n={url:e,cssText:a},W0[e]=n,n}async function tv(e,n){let r=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,c=(r.match(/url\([^)]+\)/g)||[]).map(async u=>{let d=u.replace(a,"$1");return d.startsWith("https://")||(d=new URL(d,e.url).href),Rw(d,n.fetchRequestInit,({result:g})=>(r=r.replace(u,`url(${g})`),[u,g]))});return Promise.all(c).then(()=>r)}function nv(e){if(e==null)return[];const n=[],r=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(r,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const g=o.exec(a);if(g===null)break;n.push(g[0])}a=a.replace(o,"");const c=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,u="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",d=new RegExp(u,"gi");for(;;){let g=c.exec(a);if(g===null){if(g=d.exec(a),g===null)break;c.lastIndex=d.lastIndex}else d.lastIndex=c.lastIndex;n.push(g[0])}return n}async function $O(e,n){const r=[],a=[];return e.forEach(o=>{if("cssRules"in o)try{Ii(o.cssRules||[]).forEach((c,u)=>{if(c.type===CSSRule.IMPORT_RULE){let d=u+1;const g=c.href,h=ev(g).then(p=>tv(p,n)).then(p=>nv(p).forEach(v=>{try{o.insertRule(v,v.startsWith("@import")?d+=1:o.cssRules.length)}catch(y){console.error("Error inserting rule from remote css",{rule:v,error:y})}})).catch(p=>{console.error("Error loading remote css",p.toString())});a.push(h)}})}catch(c){const u=e.find(d=>d.href==null)||document.styleSheets[0];o.href!=null&&a.push(ev(o.href).then(d=>tv(d,n)).then(d=>nv(d).forEach(g=>{u.insertRule(g,u.cssRules.length)})).catch(d=>{console.error("Error loading remote stylesheet",d)})),console.error("Error inlining remote css file",c)}}),Promise.all(a).then(()=>(e.forEach(o=>{if("cssRules"in o)try{Ii(o.cssRules||[]).forEach(c=>{r.push(c)})}catch(c){console.error(`Error while reading CSS rules from ${o.href}`,c)}}),r))}function LO(e){return e.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>jw(n.style.getPropertyValue("src")))}async function HO(e,n){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Ii(e.ownerDocument.styleSheets),a=await $O(r,n);return LO(a)}function Uw(e){return e.trim().replace(/["']/g,"")}function BO(e){const n=new Set;function r(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(c=>{n.add(Uw(c))}),Array.from(a.children).forEach(c=>{c instanceof HTMLElement&&r(c)})}return r(e),n}async function IO(e,n){const r=await HO(e,n),a=BO(e);return(await Promise.all(r.filter(c=>a.has(Uw(c.style.fontFamily))).map(c=>{const u=c.parentStyleSheet?c.parentStyleSheet.href:null;return Dw(c.cssText,u,n)}))).join(`
`)}async function qO(e,n){const r=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await IO(e,n);if(r){const a=document.createElement("style"),o=document.createTextNode(r);a.appendChild(o),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function $w(e,n={}){const{width:r,height:a}=Ow(e,n),o=await Jc(e,n,!0);return await qO(o,n),await zw(o,n),UO(o,n),await sO(o,r,a)}async function VO(e,n={}){const{width:r,height:a}=Ow(e,n),o=await $w(e,n),c=await Mc(o),u=document.createElement("canvas"),d=u.getContext("2d"),g=n.pixelRatio||iO(),h=n.canvasWidth||r,p=n.canvasHeight||a;return u.width=h*g,u.height=p*g,n.skipAutoScale||rO(u),u.style.width=`${h}`,u.style.height=`${p}`,n.backgroundColor&&(d.fillStyle=n.backgroundColor,d.fillRect(0,0,u.width,u.height)),d.drawImage(c,0,0,u.width,u.height),u}async function PO(e,n={}){return(await VO(e,n)).toDataURL()}var wc={exports:{}},GO=wc.exports,iv;function YO(){return iv||(iv=1,(function(e,n){(function(r,a){a()})(GO,function(){function r(h,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function a(h,p,v){var y=new XMLHttpRequest;y.open("GET",h),y.responseType="blob",y.onload=function(){g(y.response,p,v)},y.onerror=function(){console.error("could not download file")},y.send()}function o(h){var p=new XMLHttpRequest;p.open("HEAD",h,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Zl=="object"&&Zl.global===Zl?Zl:void 0,d=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(h,p,v){var y=u.URL||u.webkitURL,b=document.createElement("a");p=p||h.name||"download",b.download=p,b.rel="noopener",typeof h=="string"?(b.href=h,b.origin===location.origin?c(b):o(b.href)?a(h,p,v):c(b,b.target="_blank")):(b.href=y.createObjectURL(h),setTimeout(function(){y.revokeObjectURL(b.href)},4e4),setTimeout(function(){c(b)},0))}:"msSaveOrOpenBlob"in navigator?function(h,p,v){if(p=p||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,v),p);else if(o(h))a(h,p,v);else{var y=document.createElement("a");y.href=h,y.target="_blank",setTimeout(function(){c(y)})}}:function(h,p,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof h=="string")return a(h,p,v);var b=h.type==="application/octet-stream",E=/constructor/i.test(u.HTMLElement)||u.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||b&&E||d)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var _=T.result;_=x?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=_:location=_,y=null},T.readAsDataURL(h)}else{var C=u.URL||u.webkitURL,k=C.createObjectURL(h);y?y.location=k:location.href=k,y=null,setTimeout(function(){C.revokeObjectURL(k)},4e4)}});u.saveAs=g.saveAs=g,e.exports=g})})(wc)),wc.exports}var Eo=YO();const XO=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const r=await PO(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),a=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.png`;Eo.saveAs(r,a)}catch(r){console.error("Error exporting PNG:",r),alert("Failed to export PNG: "+r.message)}},KO=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const r=await $w(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),a=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.svg`;Eo.saveAs(r,a)}catch(r){console.error("Error exporting SVG:",r),alert("Failed to export SVG: "+r.message)}},ZO=e=>{let n="C4Context";e.components?.length>0?n="C4Component":e.containers?.length>0&&(n="C4Container");let r=`${n}
`;return r+=`  title ${e.metadata.name}

`,e.people?.forEach(a=>{const o=a.description||"";r+=`  Person(${gt(a.id)}, "${a.name}", "${o}")
`}),e.people?.length>0&&(r+=`
`),e.systems?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?r+=`  System(${gt(a.id)}, "${a.name}", "${o}", "${c}")
`:r+=`  System(${gt(a.id)}, "${a.name}", "${o}")
`}),e.systems?.length>0&&(r+=`
`),e.externalSystems?.forEach(a=>{const o=a.description||"";r+=`  System_Ext(${gt(a.id)}, "${a.name}", "${o}")
`}),e.externalSystems?.length>0&&(r+=`
`),e.containers?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?r+=`  Container(${gt(a.id)}, "${a.name}", "${c}", "${o}")
`:r+=`  Container(${gt(a.id)}, "${a.name}", "${o}")
`}),e.containers?.length>0&&(r+=`
`),e.components?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?r+=`  Component(${gt(a.id)}, "${a.name}", "${c}", "${o}")
`:r+=`  Component(${gt(a.id)}, "${a.name}", "${o}")
`}),e.components?.length>0&&(r+=`
`),e.relationships?.forEach(a=>{const o=a.description||"uses",c=a.technology||"",u=a.arrowDirection==="left"?"Rel_Back":"Rel";c?r+=`  ${u}(${gt(a.from)}, ${gt(a.to)}, "${o}", "${c}")
`:r+=`  ${u}(${gt(a.from)}, ${gt(a.to)}, "${o}")
`}),r},Lw=e=>{let n=`@startuml
`;return n+=`!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

`,n+=`title ${e.metadata.name}

`,e.people?.forEach(r=>{n+=`Person(${gt(r.id)}, "${r.name}", "${r.description||""}")
`}),e.systems?.forEach(r=>{n+=`System(${gt(r.id)}, "${r.name}", "${r.description||""}")
`}),e.externalSystems?.forEach(r=>{n+=`System_Ext(${gt(r.id)}, "${r.name}", "${r.description||""}")
`}),e.containers?.forEach(r=>{const a=r.technology?`, "${r.technology}"`:"";n+=`Container(${gt(r.id)}, "${r.name}", "${r.description||""}"${a})
`}),e.components?.forEach(r=>{const a=r.technology?`, "${r.technology}"`:"";n+=`Component(${gt(r.id)}, "${r.name}", "${r.description||""}"${a})
`}),n+=`
`,e.relationships?.forEach(r=>{const a=r.description||"uses",o=r.technology?`, "${r.technology}"`:"";n+=`Rel(${gt(r.from)}, ${gt(r.to)}, "${a}"${o})
`}),n+=`
@enduml`,n},Hw=e=>{let n=`# ${e.metadata.name}

`;return n+=`**Version:** ${e.metadata.version}
`,n+=`**Author:** ${e.metadata.author}

`,n+=`---

`,e.systems?.length>0&&(n+=`## Software Systems

`,e.systems.forEach(r=>{n+=`### ${r.name}

`,r.description&&(n+=`${r.description}

`),r.technology&&(n+=`**Technology:** ${r.technology}

`);const a=e.containers?.filter(o=>o.parentSystem===r.id)||[];a.length>0&&(n+=`#### Containers

`,a.forEach(o=>{n+=`- **${o.name}**`,o.technology&&(n+=` (${o.technology})`),o.description&&(n+=`: ${o.description}`),n+=`
`}),n+=`
`)})),e.externalSystems?.length>0&&(n+=`## External Systems

`,e.externalSystems.forEach(r=>{n+=`### ${r.name}

`,r.description&&(n+=`${r.description}

`)})),e.people?.length>0&&(n+=`## People / Actors

`,e.people.forEach(r=>{n+=`### ${r.name}

`,r.description&&(n+=`${r.description}

`)})),e.relationships?.length>0&&(n+=`## Relationships

`,n+=`| From | To | Description | Technology |
`,n+=`|------|-----|-------------|------------|
`,e.relationships.forEach(r=>{const a=rv(e,r.from),o=rv(e,r.to),c=a?.name||r.from,u=o?.name||r.to;n+=`| ${c} | ${u} | ${r.description||"-"} | ${r.technology||"-"} |
`}),n+=`
`),n},QO=e=>{const n=Hw(e),r=Lw(e),a=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e.metadata.name} - C4 Model</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        h1, h2, h3, h4 { color: #1e293b; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: left;
        }
        th { background-color: #f1f5f9; font-weight: 600; }
        pre {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
        }
        code {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .metadata {
            background-color: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="metadata">
        <h1>${e.metadata.name}</h1>
        <p><strong>Version:</strong> ${e.metadata.version}</p>
        <p><strong>Author:</strong> ${e.metadata.author}</p>
    </div>

    ${JO(n)}

    <h2>PlantUML Diagram Code</h2>
    <pre><code>${r}</code></pre>

    <h2>JSON Model</h2>
    <pre><code>${JSON.stringify(e,null,2)}</code></pre>
</body>
</html>`,o=new Blob([a],{type:"text/html"});Eo.saveAs(o,`${(e.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.html`)},gt=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),rv=(e,n)=>[...e.systems||[],...e.containers||[],...e.components||[],...e.people||[],...e.externalSystems||[]].find(a=>a.id===n),JO=e=>e.split(`
`).map(n=>n.startsWith("# ")?`<h1>${n.substring(2)}</h1>`:n.startsWith("## ")?`<h2>${n.substring(3)}</h2>`:n.startsWith("### ")?`<h3>${n.substring(4)}</h3>`:n.startsWith("#### ")?`<h4>${n.substring(5)}</h4>`:n.startsWith("- ")?`<li>${n.substring(2)}</li>`:n.startsWith("**")&&n.endsWith("**")?`<p><strong>${n.substring(2,n.length-2)}</strong></p>`:n.trim()==="---"?"<hr>":n.trim()===""?"<br>":`<p>${n}</p>`).join(`
`),dr=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",FO=e=>{const n="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;align=center;spacingTop=8;";switch(e){case"person":return`${n}fillColor=#e1d5e7;strokeColor=#9673a6;`;case"system":return`${n}fillColor=#dae8fc;strokeColor=#6c8ebf;`;case"externalSystem":return`${n}fillColor=#f5f5f5;strokeColor=#666666;dashed=1;`;case"container":return`${n}fillColor=#d5e8d4;strokeColor=#82b366;`;case"component":return`${n}fillColor=#fff2cc;strokeColor=#d6b656;`;default:return`${n}fillColor=#ffffff;strokeColor=#000000;`}},WO=e=>{let n="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;";return e.lineStyle==="dashed"?n+="dashed=1;dashPattern=8 8;":e.lineStyle==="dotted"&&(n+="dashed=1;dashPattern=2 2;"),e.arrowDirection==="left"?n+="startArrow=classic;endArrow=none;":e.arrowDirection==="both"?n+="startArrow=classic;endArrow=classic;":n+="startArrow=none;endArrow=classic;",n+="strokeColor=#666666;",n},eR=e=>{const n=new Date().toISOString(),r=`diagram-${Date.now()}`,a=[...e.people||[],...e.systems||[],...e.externalSystems||[],...e.containers||[],...e.components||[]];let o=1/0,c=1/0,u=-1/0,d=-1/0;a.forEach(T=>{const C=T.position?.x||0,k=T.position?.y||0;o=Math.min(o,C),c=Math.min(c,k),u=Math.max(u,C+220),d=Math.max(d,k+120)});const g=o<50?50-o:0,h=c<50?50-c:0,p=Math.max(1100,u+g+100),v=Math.max(850,d+h+100);let y=`<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="Diagrams" modified="${n}" agent="Diagrams C4 Modelling Tool" version="1.0" type="device">
  <diagram name="${dr(e.metadata?.name||"C4 Diagram")}" id="${r}">
    <mxGraphModel dx="0" dy="0" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="${p}" pageHeight="${v}" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
`;const b=new Map;let E=2;const x=T=>{switch(T){case"person":return"[Person]";case"system":return"[Software System]";case"externalSystem":return"[External System]";case"container":return"[Container]";case"component":return"[Component]";default:return""}};return a.forEach(T=>{const C=`cell-${E++}`;b.set(T.id,C);const k=(T.position?.x||0)+g,_=(T.position?.y||0)+h,N=220,L=120,j=FO(T.type),U=x(T.type),V=T.technology?`[${dr(T.technology)}]`:"",J=T.description?`&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;${dr(T.description)}&lt;/font&gt;`:"",oe=`&lt;b&gt;${dr(T.name)}&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px; color: #666666;&quot;&gt;${U}${V?"&lt;br&gt;"+V:""}&lt;/font&gt;${J}`;y+=`        <mxCell id="${C}" value="${oe}" style="${j}" vertex="1" parent="1">
          <mxGeometry x="${k}" y="${_}" width="${N}" height="${L}" as="geometry" />
        </mxCell>
`}),(e.relationships||[]).forEach(T=>{const C=`edge-${E++}`,k=b.get(T.from),_=b.get(T.to);if(!k||!_)return;const N=WO(T),L=T.description||"",j=T.technology?`[${dr(T.technology)}]`:"",U=j?`${dr(L)}&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;${j}&lt;/font&gt;`:dr(L);y+=`        <mxCell id="${C}" value="${U}" style="${N}" edge="1" parent="1" source="${k}" target="${_}">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
`}),y+=`      </root>
    </mxGraphModel>
  </diagram>
</mxfile>`,y},tR=e=>{const n=eR(e),r=new Blob([n],{type:"application/xml"}),a=`${(e.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.drawio`;Eo.saveAs(r,a)},nR=e=>{const n=[...(e.systems||[]).map(b=>({...b,type:"system"})),...(e.containers||[]).map(b=>({...b,type:"container"})),...(e.components||[]).map(b=>({...b,type:"component"})),...(e.people||[]).map(b=>({...b,type:"person"})),...(e.externalSystems||[]).map(b=>({...b,type:"externalSystem"}))],r=new Map(n.map(b=>[b.id,b])),a=b=>{const E=[b];let x=b;for(;x.parentId&&r.has(x.parentId);)x=r.get(x.parentId),E.unshift(x);return E};let o=0;const c=n.map(b=>{const E=a(b);return o=Math.max(o,E.length),{element:b,chain:E}});c.sort((b,E)=>{const x=Math.min(b.chain.length,E.chain.length);for(let T=0;T<x;T++){const C=(b.chain[T].name||"").localeCompare(E.chain[T].name||"");if(C!==0)return C}return b.chain.length-E.chain.length});const u=[];for(let b=0;b<o;b++)b===0?u.push("Level 1 (System)"):b===1?u.push("Level 2 (Container)"):u.push(`Level ${b+1}`);const d=["ID",...u,"Type","PM","UX","Tech","Technology","Description"],g=c.map(({element:b,chain:E})=>{const x=[];for(let T=0;T<o;T++)T<E.length?x.push(E[T].name||""):x.push(b.name||"");return[b.id||"",...x,b.type||"",b.ownerPM||"",b.ownerUX||"",b.ownerTech||"",b.technology||"",b.description||""]}),h=b=>{const E=String(b||"");return E.includes(",")||E.includes('"')||E.includes(`
`)?`"${E.replace(/"/g,'""')}"`:E},p=[d.map(h).join(","),...g.map(b=>b.map(h).join(","))].join(`
`),v=new Blob([p],{type:"text/csv;charset=utf-8"}),y=`${(e.metadata?.name||"architecture").replace(/\s+/g,"-").toLowerCase()}.csv`;Eo.saveAs(v,y)},iR=e=>{const n=[];let r=[],a="",o=!1;for(let c=0;c<e.length;c++){const u=e[c],d=e[c+1];o?u==='"'&&d==='"'?(a+='"',c++):u==='"'?o=!1:a+=u:u==='"'?o=!0:u===","?(r.push(a),a=""):u===`
`||u==="\r"&&d===`
`?(r.push(a),n.push(r),r=[],a="",u==="\r"&&c++):u!=="\r"&&(a+=u)}return(a||r.length>0)&&(r.push(a),n.push(r)),n},rR=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)}),aR=e=>{const n=iR(e);if(n.length<2)throw new Error("CSV must have at least a header row and one data row");const r=n[0].map(_=>_.trim()),a=n.slice(1).filter(_=>_.some(N=>N.trim())),o=r.findIndex(_=>_.toLowerCase()==="id"),c=r.findIndex(_=>_.toLowerCase()==="type"),u=r.findIndex(_=>_.toLowerCase()==="pm"),d=r.findIndex(_=>_.toLowerCase()==="ux"),g=r.findIndex(_=>_.toLowerCase()==="tech"),h=r.findIndex(_=>_.toLowerCase()==="technology"),p=r.findIndex(_=>_.toLowerCase()==="description"),v=[];if(r.forEach((_,N)=>{_.toLowerCase().startsWith("level")&&v.push(N)}),v.length===0)throw new Error('No Level columns found in CSV. Expected columns like "Level 1", "Level 2", etc.');if(c===-1)throw new Error("Type column is required");const y=new Map,b={systems:[],containers:[],components:[],people:[],externalSystems:[]};a.forEach(_=>{const N=D=>D>=0&&D<_.length&&_[D]?.trim()||"",L=N(o),j=N(c).toLowerCase(),U=N(u),V=N(d),J=N(g),oe=N(h),Z=N(p),ee=v.map(D=>N(D));let G=0;for(let D=0;D<ee.length;D++){const O=ee[D];if(!O)break;(D===0||O!==ee[D-1])&&(G=D)}const z=[];for(let D=0;D<=G;D++)ee[D]&&(D===0||ee[D]!==ee[D-1])&&z.push(ee[D]);const P=z.join("/"),R=z[z.length-1],H=z.slice(0,-1).join("/");if(y.has(P)){const D=y.get(P);U&&!D.ownerPM&&(D.ownerPM=U),V&&!D.ownerUX&&(D.ownerUX=V),J&&!D.ownerTech&&(D.ownerTech=J),oe&&!D.technology&&(D.technology=oe),Z&&!D.description&&(D.description=Z);return}let B=j;(!B||!["system","container","component","person","externalsystem"].includes(B))&&(G===0?B="system":G===1?B="container":B="component"),B==="externalsystem"&&(B="externalSystem");const X={id:L||rR(),name:R,type:B,description:Z||"",technology:oe||"",ownerPM:U||"",ownerUX:V||"",ownerTech:J||"",position:{x:100,y:100}};switch(y.set(P,X),H&&y.has(H)&&(X.parentId=y.get(H).id),B){case"system":b.systems.push(X);break;case"container":b.containers.push(X);break;case"component":b.components.push(X);break;case"person":b.people.push(X);break;case"externalSystem":b.externalSystems.push(X);break}});const E=250,x=4,T=[...b.systems,...b.containers,...b.components,...b.people,...b.externalSystems],C=new Map;T.forEach(_=>{const N=_.parentId||"root";C.has(N)||C.set(N,[]),C.get(N).push(_)});const k=(_,N,L)=>{const j=C.get(_||"root")||[];let U=N,V=L,J=0;j.forEach(oe=>{oe.position={x:U,y:V},J++,J>=x?(J=0,U=N,V+=E):U+=E})};return k(null,100,100),C.forEach((_,N)=>{N!=="root"&&k(N,100,100)}),{metadata:{name:"Imported Model",version:"1.0",author:""},...b,relationships:[],shadows:[]}},sR=e=>{let n=1;const r=new Map,a=h=>(r.has(h)||r.set(h,String(n++)),r.get(h)),o=(e.people||[]).map(h=>({id:a(h.id),name:h.name||"Unnamed Person",description:h.description||"",tags:(h.tags||[]).join(",")||"Person",location:"Unspecified",relationships:[]})),c=[];(e.systems||[]).forEach(h=>{const p=a(h.id);c.push({id:p,name:h.name||"Unnamed System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System",location:"Unspecified",containers:[],relationships:[]})}),(e.externalSystems||[]).forEach(h=>{const p=a(h.id);c.push({id:p,name:h.name||"Unnamed External System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System,External",location:"External",containers:[],relationships:[]})}),(e.containers||[]).forEach(h=>{const v={id:a(h.id),name:h.name||"Unnamed Container",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Container",components:[],relationships:[]},y=c.find(b=>a(h.parentSystem)===b.id);y?y.containers.push(v):c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned containers",tags:"Software System",location:"Unspecified",containers:[v],relationships:[]}):c[0].containers.push(v)}),(e.components||[]).forEach(h=>{const v={id:a(h.id),name:h.name||"Unnamed Component",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Component",relationships:[]};let y=!1;for(const b of c){const E=b.containers.find(x=>a(h.parentContainer)===x.id);if(E){E.components.push(v),y=!0;break}}if(!y){for(const b of c)if(b.containers.length>0){b.containers[0].components.push(v),y=!0;break}}y||(c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned components",tags:"Software System",location:"Unspecified",containers:[{id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}],relationships:[]}):c[0].containers.length===0?c[0].containers.push({id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}):c[0].containers[0].components.push(v))});const u=h=>{const p=a(h.from),v=a(h.to),y={sourceId:p,destinationId:v,description:h.description||"",technology:h.technology||"",tags:h.tags||""},b=o.find(E=>E.id===p);if(b){b.relationships.push(y);return}for(const E of c){if(E.id===p){E.relationships.push(y);return}for(const x of E.containers){if(x.id===p){x.relationships.push(y);return}for(const T of x.components)if(T.id===p){T.relationships.push(y);return}}}};(e.relationships||[]).forEach(h=>{u(h)});const d={systemLandscapeViews:[],systemContextViews:[],containerViews:[],componentViews:[],configuration:{styles:{elements:[{tag:"Person",shape:"Person",background:"#08427b",color:"#ffffff"},{tag:"Software System",background:"#1168bd",color:"#ffffff"},{tag:"External",background:"#999999",color:"#ffffff"},{tag:"Container",background:"#438dd5",color:"#ffffff"},{tag:"Component",background:"#85bbf0",color:"#000000"}],relationships:[]}}};if(c.length>0||o.length>0){const h=[];let p=100,v=100;o.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),c.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),d.systemLandscapeViews.push({key:"SystemLandscape",description:"System Landscape view",elements:h,relationships:[],automaticLayout:{rankDirection:"TopBottom",rankSeparation:200,nodeSeparation:200}})}return{id:1,name:e.metadata?.name||"Architecture Model",description:`Exported from Diagrams on ${new Date().toISOString()}`,version:e.metadata?.version||"1.0",model:{people:o,softwareSystems:c},views:d,documentation:{},properties:{exportedFrom:"Diagrams",author:e.metadata?.author||""}}},oR=e=>{const n={metadata:{name:e.name||"Imported Model",version:e.version||"1.0",author:e.properties?.author||e.lastModifiedUser||"Unknown"},systems:[],containers:[],components:[],people:[],externalSystems:[],relationships:[]},r=new Map;[...e.views?.systemLandscapeViews||[],...e.views?.systemContextViews||[],...e.views?.containerViews||[],...e.views?.componentViews||[]].forEach(d=>{(d.elements||[]).forEach(g=>{g.x!==void 0&&g.y!==void 0&&r.set(g.id,{x:g.x,y:g.y})})});const o=d=>r.get(d)||{x:100,y:100},c=(d,g)=>`${d}-${Date.now()}-${g}-${Math.random().toString(36).substr(2,5)}`,u=new Map;return(e.model?.people||[]).forEach(d=>{const g=c("person",d.id);u.set(d.id,g);const h=o(d.id);n.people.push({id:g,type:"person",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(p=>p.trim()).filter(p=>p!=="Person"):[],position:h})}),(e.model?.softwareSystems||[]).forEach(d=>{const g=d.location==="External"||d.tags&&d.tags.includes("External"),h=c(g?"externalSystem":"system",d.id);u.set(d.id,h);const p=o(d.id),v={id:h,type:g?"externalSystem":"system",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(y=>y.trim()).filter(y=>y!=="Software System"&&y!=="External"):[],position:p};g?n.externalSystems.push(v):n.systems.push(v),(d.containers||[]).forEach(y=>{const b=c("container",y.id);u.set(y.id,b);const E=o(y.id);n.containers.push({id:b,type:"container",name:y.name,description:y.description||"",technology:y.technology||"",tags:y.tags?y.tags.split(",").map(x=>x.trim()).filter(x=>x!=="Container"):[],position:E,parentSystem:h}),(y.components||[]).forEach(x=>{const T=c("component",x.id);u.set(x.id,T);const C=o(x.id);n.components.push({id:T,type:"component",name:x.name,description:x.description||"",technology:x.technology||"",tags:x.tags?x.tags.split(",").map(k=>k.trim()).filter(k=>k!=="Component"):[],position:C,parentContainer:b}),(x.relationships||[]).forEach(k=>{const _=u.get(k.sourceId),N=u.get(k.destinationId);_&&N&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:_,to:N,description:k.description||"",technology:k.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(y.relationships||[]).forEach(x=>{const T=u.get(x.sourceId),C=u.get(x.destinationId);T&&C&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:T,to:C,description:x.description||"",technology:x.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(d.relationships||[]).forEach(y=>{const b=u.get(y.sourceId),E=u.get(y.destinationId);b&&E&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:b,to:E,description:y.description||"",technology:y.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(e.model?.people||[]).forEach(d=>{(d.relationships||[]).forEach(g=>{const h=u.get(g.sourceId),p=u.get(g.destinationId);h&&p&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:h,to:p,description:g.description||"",technology:g.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),n},lR=8e3,cR=e=>{try{const n=JSON.stringify(e);return btoa(encodeURIComponent(n))}catch(n){return console.error("Error encoding model:",n),null}},uR=e=>{try{const n=decodeURIComponent(atob(e));return JSON.parse(n)}catch(n){return console.error("Error decoding model:",n),null}},dR=e=>{const n=cR(e);if(!n)return{url:null,error:"Failed to encode model"};const a=`${window.location.origin+window.location.pathname}#model=${n}`;return a.length>lR?{url:null,error:`Model too large for URL sharing (${Math.round(a.length/1024)}KB). Use JSON export instead.`}:{url:a,error:null}},fR=()=>{const e=window.location.hash;if(!e||!e.startsWith("#model="))return null;const n=e.substring(7);return uR(n)},hR=()=>{history.replaceState(null,"",window.location.pathname)},gR=()=>window.location.hash.startsWith("#model=");function Fc(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]]);return r}function mR(e,n,r,a){function o(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function d(p){try{h(a.next(p))}catch(v){u(v)}}function g(p){try{h(a.throw(p))}catch(v){u(v)}}function h(p){p.done?c(p.value):o(p.value).then(d,g)}h((a=a.apply(e,n||[])).next())})}const pR=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);class Ih extends Error{constructor(n,r="FunctionsError",a){super(n),this.name=r,this.context=a}}class yR extends Ih{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class av extends Ih{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class sv extends Ih{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var fh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(fh||(fh={}));class vR{constructor(n,{headers:r={},customFetch:a,region:o=fh.Any}={}){this.url=n,this.headers=r,this.region=o,this.fetch=pR(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return mR(this,arguments,void 0,function*(r,a={}){var o;let c,u;try{const{headers:d,method:g,body:h,signal:p,timeout:v}=a;let y={},{region:b}=a;b||(b=this.region);const E=new URL(`${this.url}/${r}`);b&&b!=="any"&&(y["x-region"]=b,E.searchParams.set("forceFunctionRegion",b));let x;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(y["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(y["Content-Type"]="application/json",x=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?x=JSON.stringify(h):x=h;let T=p;v&&(u=new AbortController,c=setTimeout(()=>u.abort(),v),p?(T=u.signal,p.addEventListener("abort",()=>u.abort())):T=u.signal);const C=yield this.fetch(E.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:x,signal:T}).catch(L=>{throw new yR(L)}),k=C.headers.get("x-relay-error");if(k&&k==="true")throw new av(C);if(!C.ok)throw new sv(C);let _=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),N;return _==="application/json"?N=yield C.json():_==="application/octet-stream"||_==="application/pdf"?N=yield C.blob():_==="text/event-stream"?N=C:_==="multipart/form-data"?N=yield C.formData():N=yield C.text(),{data:N,error:null,response:C}}catch(d){return{data:null,error:d,response:d instanceof sv||d instanceof av?d.context:void 0}}finally{c&&clearTimeout(c)}})}}var bR=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},wR=class{constructor(e){var n,r,a;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(a=e.urlLengthLimit)!==null&&a!==void 0?a:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,d=null,g=null,h=c.status,p=c.statusText;if(c.ok){var v,y;if(r.method!=="HEAD"){var b;const C=await c.text();C===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((b=r.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=C:d=JSON.parse(C))}const x=(v=r.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),T=(y=c.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");x&&T&&T.length>1&&(g=parseInt(T[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var E;const x=await c.text();try{u=JSON.parse(x),Array.isArray(u)&&c.status===404&&(d=[],u=null,h=200,p="OK")}catch{c.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&r.isMaybeSingle&&(!(u==null||(E=u.details)===null||E===void 0)&&E.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&r.shouldThrowOnError)throw new bR(u)}return{error:u,data:d,count:g,status:h,statusText:p}});return this.shouldThrowOnError||(o=o.catch(c=>{var u;let d="",g="",h="";const p=c?.cause;if(p){var v,y,b,E;const C=(v=p?.message)!==null&&v!==void 0?v:"",k=(y=p?.code)!==null&&y!==void 0?y:"";d=`${(b=c?.name)!==null&&b!==void 0?b:"FetchError"}: ${c?.message}`,d+=`

Caused by: ${(E=p?.name)!==null&&E!==void 0?E:"Error"}: ${C}`,k&&(d+=` (${k})`),p?.stack&&(d+=`
${p.stack}`)}else{var x;d=(x=c?.stack)!==null&&x!==void 0?x:""}const T=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(h="",g="Request was aborted (timeout or manual cancellation)",T>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${T} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(p?.name==="HeadersOverflowError"||p?.code==="UND_ERR_HEADERS_OVERFLOW")&&(h="",g="HTTP headers exceeded server limits (typically 16KB)",T>this.urlLengthLimit&&(g+=`. Your request URL is ${T} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:d,hint:g,code:h},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}},xR=class extends wR{select(e){let n=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:a=r}={}){const o=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(c,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:o=!1,format:c="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const ov=new RegExp("[,()]");var Oa=class extends xR{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}regexMatch(e,n){return this.url.searchParams.append(e,`match.${n}`),this}regexIMatch(e,n){return this.url.searchParams.append(e,`imatch.${n}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}isDistinct(e,n){return this.url.searchParams.append(e,`isdistinct.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&ov.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&ov.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${c}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}},_R=class{constructor(e,{headers:n={},schema:r,fetch:a,urlLengthLimit:o=8e3}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=a,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,n){const{head:r=!1,count:a}=n??{},o=r?"HEAD":"GET";let c=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join(""),{url:d,headers:g}=this.cloneRequestState();return d.searchParams.set("select",u),a&&g.append("Prefer",`count=${a}`),new Oa({method:o,url:d,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:n,defaultToNull:r=!0}={}){var a;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(n&&u.append("Prefer",`count=${n}`),r||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((g,h)=>g.concat(Object.keys(h)),[]);if(d.length>0){const g=[...new Set(d)].map(h=>`"${h}"`);c.searchParams.set("columns",g.join(","))}}return new Oa({method:o,url:c,headers:u,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:o=!0}={}){var c;const u="POST",{url:d,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&d.searchParams.set("on_conflict",n),a&&g.append("Prefer",`count=${a}`),o||g.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(h.length>0){const p=[...new Set(h)].map(v=>`"${v}"`);d.searchParams.set("columns",p.join(","))}}return new Oa({method:u,url:d,headers:g,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:n}={}){var r;const a="PATCH",{url:o,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Oa({method:a,url:o,headers:c,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var n;const r="DELETE",{url:a,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Oa({method:r,url:a,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function co(e){"@babel/helpers - typeof";return co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},co(e)}function SR(e,n){if(co(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,n);if(co(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function ER(e){var n=SR(e,"string");return co(n)=="symbol"?n:n+""}function TR(e,n,r){return(n=ER(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function lv(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function ac(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?lv(Object(r),!0).forEach(function(a){TR(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lv(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var CR=class Bw{constructor(n,{headers:r={},schema:a,fetch:o,timeout:c,urlLengthLimit:u=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=a,this.urlLengthLimit=u;const d=o??globalThis.fetch;c!==void 0&&c>0?this.fetch=(g,h)=>{const p=new AbortController,v=setTimeout(()=>p.abort(),c),y=h?.signal;if(y){if(y.aborted)return clearTimeout(v),d(g,h);const b=()=>{clearTimeout(v),p.abort()};return y.addEventListener("abort",b,{once:!0}),d(g,ac(ac({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(v),y.removeEventListener("abort",b)})}return d(g,ac(ac({},h),{},{signal:p.signal})).finally(()=>clearTimeout(v))}:this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _R(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Bw(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:a=!1,get:o=!1,count:c}={}){var u;let d;const g=new URL(`${this.url}/rpc/${n}`);let h;const p=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(p)),v=a&&Object.values(r).some(p);v?(d="POST",h=r):a||o?(d=a?"HEAD":"GET",Object.entries(r).filter(([b,E])=>E!==void 0).map(([b,E])=>[b,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([b,E])=>{g.searchParams.append(b,E)})):(d="POST",h=r);const y=new Headers(this.headers);return v?y.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&y.set("Prefer",`count=${c}`),new Oa({method:d,url:g,headers:y,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class AR{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const a=r.versions;if(a&&a.node){const o=a.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const a=this.getWebSocketConstructor();return new a(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const NR="2.97.0",OR=`realtime-js/${NR}`,RR="1.0.0",Iw="2.0.0",cv=Iw,hh=1e4,kR=1e3,MR=100;var $i;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($i||($i={}));var ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ht||(ht={}));var pn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pn||(pn={}));var gh;(function(e){e.websocket="websocket"})(gh||(gh={}));var yr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yr||(yr={}));class jR{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let a=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,a;const o=(a=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var r,a;const o=(a=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(n,r,a){var o,c;const u=n.topic,d=(o=n.ref)!==null&&o!==void 0?o:"",g=(c=n.join_ref)!==null&&c!==void 0?c:"",h=n.payload.event,p=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},v=Object.keys(p).length===0?"":JSON.stringify(p);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+d.length+u.length+h.length+v.length,b=new ArrayBuffer(this.HEADER_LENGTH+y);let E=new DataView(b),x=0;E.setUint8(x++,this.KINDS.userBroadcastPush),E.setUint8(x++,g.length),E.setUint8(x++,d.length),E.setUint8(x++,u.length),E.setUint8(x++,h.length),E.setUint8(x++,v.length),E.setUint8(x++,r),Array.from(g,C=>E.setUint8(x++,C.charCodeAt(0))),Array.from(d,C=>E.setUint8(x++,C.charCodeAt(0))),Array.from(u,C=>E.setUint8(x++,C.charCodeAt(0))),Array.from(h,C=>E.setUint8(x++,C.charCodeAt(0))),Array.from(v,C=>E.setUint8(x++,C.charCodeAt(0)));var T=new Uint8Array(b.byteLength+a.byteLength);return T.set(new Uint8Array(b),0),T.set(new Uint8Array(a),b.byteLength),T.buffer}decode(n,r){if(this._isArrayBuffer(n)){let a=this._binaryDecode(n);return r(a)}if(typeof n=="string"){const a=JSON.parse(n),[o,c,u,d,g]=a;return r({join_ref:o,ref:c,topic:u,event:d,payload:g})}return r({})}_binaryDecode(n){const r=new DataView(n),a=r.getUint8(0),o=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,o)}}_decodeUserBroadcast(n,r,a){const o=r.getUint8(1),c=r.getUint8(2),u=r.getUint8(3),d=r.getUint8(4);let g=this.HEADER_LENGTH+4;const h=a.decode(n.slice(g,g+o));g=g+o;const p=a.decode(n.slice(g,g+c));g=g+c;const v=a.decode(n.slice(g,g+u));g=g+u;const y=n.slice(g,n.byteLength),b=d===this.JSON_ENCODING?JSON.parse(a.decode(y)):y,E={type:this.BROADCAST_EVENT,event:p,payload:b};return u>0&&(E.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([a])=>r.includes(a)))}}class qw{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Xe||(Xe={}));const uv=(e,n,r={})=>{var a;const o=(a=r.skipTypes)!==null&&a!==void 0?a:[];return n?Object.keys(n).reduce((c,u)=>(c[u]=DR(u,e,n,o),c),{}):{}},DR=(e,n,r,a)=>{const o=n.find(d=>d.name===e),c=o?.type,u=r[e];return c&&!a.includes(c)?Vw(c,u):mh(u)},Vw=(e,n)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return LR(n,r)}switch(e){case Xe.bool:return zR(n);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return UR(n);case Xe.json:case Xe.jsonb:return $R(n);case Xe.timestamp:return HR(n);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return mh(n);default:return mh(n)}},mh=e=>e,zR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},UR=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},$R=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},LR=(e,n)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let c;const u=e.slice(1,r);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(d=>Vw(n,d))}return e},HR=e=>typeof e=="string"?e.replace(" ","T"):e,Pw=e=>{const n=new URL(e);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Vf{constructor(n,r,a={},o=hh){this.channel=n,this.event=r,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var a;return this._hasReceived(n)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var dv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(dv||(dv={}));class Qs{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qs.syncState(this.state,o,c,u),this.pendingDiffs.forEach(g=>{this.state=Qs.syncDiff(this.state,g,c,u)}),this.pendingDiffs=[],d()}),this.channel._on(a.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Qs.syncDiff(this.state,o,c,u),d())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,a,o){const c=this.cloneDeep(n),u=this.transformState(r),d={},g={};return this.map(c,(h,p)=>{u[h]||(g[h]=p)}),this.map(u,(h,p)=>{const v=c[h];if(v){const y=p.map(T=>T.presence_ref),b=v.map(T=>T.presence_ref),E=p.filter(T=>b.indexOf(T.presence_ref)<0),x=v.filter(T=>y.indexOf(T.presence_ref)<0);E.length>0&&(d[h]=E),x.length>0&&(g[h]=x)}else d[h]=p}),this.syncDiff(c,{joins:d,leaves:g},a,o)}static syncDiff(n,r,a,o){const{joins:c,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(c,(d,g)=>{var h;const p=(h=n[d])!==null&&h!==void 0?h:[];if(n[d]=this.cloneDeep(g),p.length>0){const v=n[d].map(b=>b.presence_ref),y=p.filter(b=>v.indexOf(b.presence_ref)<0);n[d].unshift(...y)}a(d,p,g)}),this.map(u,(d,g)=>{let h=n[d];if(!h)return;const p=g.map(v=>v.presence_ref);h=h.filter(v=>p.indexOf(v.presence_ref)<0),n[d]=h,o(d,h,g),h.length===0&&delete n[d]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(a=>r(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,a)=>{const o=n[a];return"metas"in o?r[a]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=o,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(fv||(fv={}));var Js;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Js||(Js={}));var Wn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wn||(Wn={}));class Da{constructor(n,r={config:{}},a){var o,c;if(this.topic=n,this.params=r,this.socket=a,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Vf(this,pn.join,this.params,this.timeout),this.rejoinTimer=new qw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Qs(this),this.broadcastEndpointURL=Pw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var a,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:u,presence:d,private:g}}=this.params,h=(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&o!==void 0?o:[],p=!!this.bindings[Js.PRESENCE]&&this.bindings[Js.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,v={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:g};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(b=>n?.(Wn.CHANNEL_ERROR,b)),this._onClose(()=>n?.(Wn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){n?.(Wn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,T=(E=x?.length)!==null&&E!==void 0?E:0,C=[];for(let k=0;k<T;k++){const _=x[k],{filter:{event:N,schema:L,table:j,filter:U}}=_,V=b&&b[k];if(V&&V.event===N&&Da.isFilterValueEqual(V.schema,L)&&Da.isFilterValueEqual(V.table,j)&&Da.isFilterValueEqual(V.filter,U))C.push(Object.assign(Object.assign({},_),{id:V.id}));else{this.unsubscribe(),this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,n&&n(Wn.SUBSCRIBED);return}}).receive("error",b=>{this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{n?.(Wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,a){return this.state===ht.joined&&n===Js.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,a)}async httpSend(n,r,a={}){var o;if(r==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let g=d.statusText;try{const h=await d.json();g=h.error||h.message||g}catch{}return Promise.reject(new Error(g))}async send(n,r={}){var a,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=n,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,d,g;const h=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),h.receive("ok",()=>c("ok")),h.receive("error",()=>c("error")),h.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ht.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(o=>{a=new Vf(this,pn.leave,{},n),a.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(n,r,a){const o=new AbortController,c=setTimeout(()=>o.abort(),a),u=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(c),u}_push(n,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Vf(this,n,r,a);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>MR){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,a){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,a){var o,c;const u=n.toLocaleLowerCase(),{close:d,error:g,leave:h,join:p}=pn;if(a&&[d,g,h,p].indexOf(u)>=0&&a!==this._joinRef())return;let y=this._onMessage(u,r,a);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var E,x,T;return((E=b.filter)===null||E===void 0?void 0:E.event)==="*"||((T=(x=b.filter)===null||x===void 0?void 0:x.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(b=>b.callback(y,a)):(c=this.bindings[u])===null||c===void 0||c.filter(b=>{var E,x,T,C,k,_;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const N=b.id,L=(E=b.filter)===null||E===void 0?void 0:E.event;return N&&((x=r.ids)===null||x===void 0?void 0:x.includes(N))&&(L==="*"||L?.toLocaleLowerCase()===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const N=(k=(C=b?.filter)===null||C===void 0?void 0:C.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return N==="*"||N===((_=r?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof y=="object"&&"ids"in y){const E=y.data,{schema:x,table:T,commit_timestamp:C,type:k,errors:_}=E;y=Object.assign(Object.assign({},{schema:x,table:T,commit_timestamp:C,eventType:k,new:{},old:{},errors:_}),this._getPayloadRecords(E))}b.callback(y,a)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,a){const o=n.toLocaleLowerCase(),c={type:o,filter:r,callback:a};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,r){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&Da.isEqual(o.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const a in n)if(n[a]!==r[a])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(pn.close,{},n)}_onError(n){this._on(pn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=uv(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=uv(n.columns,n.old_record)),r}}const Pf=()=>{},sc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BR=[1e3,2e3,5e3,1e4],IR=1e4,qR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class VR{constructor(n,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hh,this.transport=null,this.heartbeatIntervalMs=sc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pf,this.ref=0,this.reconnectTimer=null,this.vsn=cv,this.logger=Pf,this.conn=null,this.sendBuffer=[],this.serializer=new jR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${gh.websocket}`,this.httpEndpoint=Pw(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=AR.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,a){this.logger(n,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case $i.connecting:return yr.Connecting;case $i.open:return yr.Open;case $i.closing:return yr.Closing;default:return yr.Closed}}isConnected(){return this.connectionState()===yr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const a=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===a);if(o)return o;{const c=new Da(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:a,payload:o,ref:c}=n,u=()=>{this.encode(n,d=>{var g;(g=this.conn)===null||g===void 0||g.send(d)})};this.log("push",`${r} ${a} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(kR,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},sc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:o,payload:c,ref:u}=r,d=u?`(${u})`:"",g=c.status||"";this.log("receive",`${g} ${a} ${o} ${d}`.trim(),c),this.channels.filter(h=>h._isMember(a)).forEach(h=>h._trigger(o,c,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===$i.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$i.open||this.conn.readyState===$i.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(pn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const a=n.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${n}${a}${o}`}_workerObjectUrl(n){let r;if(n)r=n;else{const a=new Blob([qR],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,a=!1;if(n)r=n,a=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const c={access_token:r,version:OR};r&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(pn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(r)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new qw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,a,o,c,u,d,g,h,p,v,y,b;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=n?.timeout)!==null&&a!==void 0?a:hh,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:sc.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=n?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=n?.heartbeatCallback)!==null&&d!==void 0?d:Pf,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:cv,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=n?.reconnectAfterMs)!==null&&h!==void 0?h:(E=>BR[E-1]||IR),this.vsn){case RR:this.encode=(p=n?.encode)!==null&&p!==void 0?p:((E,x)=>x(JSON.stringify(E))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:((E,x)=>x(JSON.parse(E)));break;case Iw:this.encode=(y=n?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(b=n?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var uo=class extends Error{constructor(e,n){super(e),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function PR(e,n,r){const a=new URL(n,e);if(r)for(const[o,c]of Object.entries(r))c!==void 0&&a.searchParams.set(o,c);return a.toString()}async function GR(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function YR(e){const n=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:a,query:o,body:c,headers:u}){const d=PR(e.baseUrl,a,o),g=await GR(e.auth),h=await n(d,{method:r,headers:{...c?{"Content-Type":"application/json"}:{},...g,...u},body:c?JSON.stringify(c):void 0}),p=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),y=v&&p?JSON.parse(p):p;if(!h.ok){const b=v?y:void 0,E=b?.error;throw new uo(E?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:E?.type,icebergCode:E?.code,details:b})}return{status:h.status,headers:h.headers,data:y}}}}function oc(e){return e.join("")}var XR=class{constructor(e,n=""){this.client=e,this.prefix=n}async listNamespaces(e){const n=e?{parent:oc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(e,n){const r={namespace:e.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oc(e.namespace)}`}),!0}catch(n){if(n instanceof uo&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(e,n){try{return await this.createNamespace(e,n)}catch(r){if(r instanceof uo&&r.status===409)return;throw r}}};function xa(e){return e.join("")}var KR=class{constructor(e,n="",r){this.client=e,this.prefix=n,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables`})).data.identifiers}async createTable(e,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(e,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables/${e.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables/${e.name}`,headers:n})).data.metadata}async tableExists(e){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables/${e.name}`,headers:n}),!0}catch(r){if(r instanceof uo&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,n){try{return await this.createTable(e,n)}catch(r){if(r instanceof uo&&r.status===409)return await this.loadTable({namespace:e.namespace,name:n.name});throw r}}},ZR=class{constructor(e){let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=YR({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new XR(this.client,n),this.tableOps=new KR(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,n){return this.namespaceOps.createNamespace(e,n)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,n){return this.tableOps.createTable(e,n)}async updateTable(e,n){return this.tableOps.updateTable(e,n)}async dropTable(e,n){await this.tableOps.dropTable(e,n)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,n){return this.namespaceOps.createNamespaceIfNotExists(e,n)}async createTableIfNotExists(e,n){return this.tableOps.createTableIfNotExists(e,n)}},Wc=class extends Error{constructor(e,n="storage",r,a){super(e),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=a}};function eu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var lc=class extends Wc{constructor(e,n,r,a="storage"){super(e,a,n,r),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Gw=class extends Wc{constructor(e,n,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const QR=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),JR=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ph=e=>{if(Array.isArray(e))return e.map(r=>ph(r));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([r,a])=>{const o=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=ph(a)}),n},FR=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function fo(e){"@babel/helpers - typeof";return fo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fo(e)}function WR(e,n){if(fo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,n);if(fo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function ek(e){var n=WR(e,"string");return fo(n)=="symbol"?n:n+""}function tk(e,n,r){return(n=ek(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function hv(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function be(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?hv(Object(r),!0).forEach(function(a){tk(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hv(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const gv=e=>{var n;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(n=e.error)===null||n===void 0?void 0:n.message)||JSON.stringify(e)},nk=async(e,n,r,a)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const o=e,c=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const d=u?.statusCode||u?.code||c+"";n(new lc(gv(u),c,d,a))}).catch(()=>{if(a==="vectors"){const u=c+"";n(new lc(o.statusText||`HTTP ${c} error`,c,u,a))}else{const u=c+"";n(new lc(o.statusText||`HTTP ${c} error`,c,u,a))}});else{const u=c+"";n(new lc(o.statusText||`HTTP ${c} error`,c,u,a))}}else n(new Gw(gv(e),e,a))},ik=(e,n,r,a)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"||e==="HEAD"||!a?be(be({},o),r):(JR(a)?(o.headers=be({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(a)):o.body=a,n?.duplex&&(o.duplex=n.duplex),be(be({},o),r))};async function Ps(e,n,r,a,o,c,u){return new Promise((d,g)=>{e(r,ik(n,a,o,c)).then(h=>{if(!h.ok)throw h;if(a?.noResolveJson)return h;if(u==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>d(h)).catch(h=>nk(h,g,a,u))})}function Yw(e="storage"){return{get:async(n,r,a,o)=>Ps(n,"GET",r,a,o,void 0,e),post:async(n,r,a,o,c)=>Ps(n,"POST",r,o,c,a,e),put:async(n,r,a,o,c)=>Ps(n,"PUT",r,o,c,a,e),head:async(n,r,a,o)=>Ps(n,"HEAD",r,be(be({},a),{},{noResolveJson:!0}),o,void 0,e),remove:async(n,r,a,o,c)=>Ps(n,"DELETE",r,o,c,a,e)}}const rk=Yw("storage"),{get:ho,post:gn,put:yh,head:ak,remove:qh}=rk,Qt=Yw("vectors");var Ya=class{constructor(e,n={},r,a="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.fetch=QR(r),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=be(be({},this.headers),{},{[e]:n}),this}async handleOperation(e){var n=this;try{return{data:await e(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(eu(r))return{data:null,error:r};throw r}}},sk=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(eu(n))return{data:null,error:n};throw n}}};let Xw;Xw=Symbol.toStringTag;var ok=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Xw]="BlobDownloadBuilder",this.promise=null}asStream(){return new sk(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(eu(n))return{data:null,error:n};throw n}}};const lk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ck=class extends Ya{constructor(e,n={},r,a){super(e,n,a,"storage"),this.bucketId=r}async uploadOrUpdate(e,n,r,a){var o=this;return o.handleOperation(async()=>{let c;const u=be(be({},mv),a);let d=be(be({},o.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",o.encodeMetadata(g)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),g&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(g))):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,g&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),a?.headers&&(d=be(be({},d),a.headers));const h=o._removeEmptyFolders(n),p=o._getFinalPath(h),v=await(e=="PUT"?yh:gn)(o.fetch,`${o.url}/object/${p}`,c,be({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{path:h,id:v.Id,fullPath:v.Key}})}async upload(e,n,r){return this.uploadOrUpdate("POST",e,n,r)}async uploadToSignedUrl(e,n,r,a){var o=this;const c=o._removeEmptyFolders(e),u=o._getFinalPath(c),d=new URL(o.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",n),o.handleOperation(async()=>{let g;const h=be({upsert:mv.upsert},a),p=be(be({},o.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",h.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",h.cacheControl)):(g=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:c,fullPath:(await yh(o.fetch,d.toString(),g,{headers:p})).Key}})}async createSignedUploadUrl(e,n){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(e);const o=be({},r.headers);n?.upsert&&(o["x-upsert"]="true");const c=await gn(r.fetch,`${r.url}/object/upload/sign/${a}`,{},{headers:o}),u=new URL(r.url+c.url),d=u.searchParams.get("token");if(!d)throw new Wc("No token returned by API");return{signedUrl:u.toString(),path:e,token:d}})}async update(e,n,r){return this.uploadOrUpdate("PUT",e,n,r)}async move(e,n,r){var a=this;return a.handleOperation(async()=>await gn(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:a.headers}))}async copy(e,n,r){var a=this;return a.handleOperation(async()=>({path:(await gn(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(e,n,r){var a=this;return a.handleOperation(async()=>{let o=a._getFinalPath(e),c=await gn(a.fetch,`${a.url}/object/sign/${o}`,be({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:a.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${a.url}${c.signedURL}${u}`)}})}async createSignedUrls(e,n,r){var a=this;return a.handleOperation(async()=>{const o=await gn(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:n,paths:e},{headers:a.headers}),c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o.map(u=>be(be({},u),{},{signedUrl:u.signedURL?encodeURI(`${a.url}${u.signedURL}${c}`):null}))})}download(e,n,r){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"",u=this._getFinalPath(e),d=()=>ho(this.fetch,`${this.url}/${a}/${u}${c}`,{headers:this.headers,noResolveJson:!0},r);return new ok(d,this.shouldThrowOnError)}async info(e){var n=this;const r=n._getFinalPath(e);return n.handleOperation(async()=>ph(await ho(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(e){var n=this;const r=n._getFinalPath(e);try{return await ak(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(eu(a)&&a instanceof Gw){const o=a.originalError;if([400,404].includes(o?.status))return{data:!1,error:a}}throw a}}getPublicUrl(e,n){const r=this._getFinalPath(e),a=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const c=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&a.push(u);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}async remove(e){var n=this;return n.handleOperation(async()=>await qh(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:e},{headers:n.headers}))}async list(e,n,r){var a=this;return a.handleOperation(async()=>{const o=be(be(be({},lk),n),{},{prefix:e||""});return await gn(a.fetch,`${a.url}/object/list/${a.bucketId}`,o,{headers:a.headers},r)})}async listV2(e,n){var r=this;return r.handleOperation(async()=>{const a=be({},e);return await gn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,a,{headers:r.headers},n)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}};const uk="2.97.0",To={"X-Client-Info":`storage-js/${uk}`};var dk=class extends Ya{constructor(e,n={},r,a){const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),u=be(be({},To),n);super(c,u,r,"storage")}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(e);return await ho(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(e){var n=this;return n.handleOperation(async()=>await ho(n.fetch,`${n.url}/bucket/${e}`,{headers:n.headers}))}async createBucket(e,n={public:!1}){var r=this;return r.handleOperation(async()=>await gn(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,n){var r=this;return r.handleOperation(async()=>await yh(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket/${e}/empty`,{},{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await qh(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},fk=class extends Ya{constructor(e,n={},r){const a=e.replace(/\/$/,""),o=be(be({},To),n);super(a,o,r,"storage")}async createBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket`,{name:e},{headers:n.headers}))}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const a=r.toString(),o=a?`${n.url}/bucket?${a}`:`${n.url}/bucket`;return await ho(n.fetch,o,{headers:n.headers})})}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await qh(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}from(e){var n=this;if(!FR(e))throw new Wc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new ZR({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(r,{get(o,c){const u=o[c];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(g){if(a)throw g;return{data:null,error:g}}}}})}},hk=class extends Ya{constructor(e,n={},r){const a=e.replace(/\/$/,""),o=be(be({},To),{},{"Content-Type":"application/json"},n);super(a,o,r,"vectors")}async createIndex(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateIndex`,e,{headers:n.headers})||{})}async getIndex(e,n){var r=this;return r.handleOperation(async()=>await Qt.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:r.headers}))}async listIndexes(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListIndexes`,e,{headers:n.headers}))}async deleteIndex(e,n){var r=this;return r.handleOperation(async()=>await Qt.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:r.headers})||{})}},gk=class extends Ya{constructor(e,n={},r){const a=e.replace(/\/$/,""),o=be(be({},To),{},{"Content-Type":"application/json"},n);super(a,o,r,"vectors")}async putVectors(e){var n=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/PutVectors`,e,{headers:n.headers})||{})}async getVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectors`,e,{headers:n.headers}))}async listVectors(e){var n=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectors`,e,{headers:n.headers}))}async queryVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/QueryVectors`,e,{headers:n.headers}))}async deleteVectors(e){var n=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectors`,e,{headers:n.headers})||{})}},mk=class extends Ya{constructor(e,n={},r){const a=e.replace(/\/$/,""),o=be(be({},To),{},{"Content-Type":"application/json"},n);super(a,o,r,"vectors")}async createBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}async getBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:e},{headers:n.headers}))}async listBuckets(e={}){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectorBuckets`,e,{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}},pk=class extends mk{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new yk(this.url,this.headers,e,this.fetch)}async createBucket(e){var n=()=>super.createBucket,r=this;return n().call(r,e)}async getBucket(e){var n=()=>super.getBucket,r=this;return n().call(r,e)}async listBuckets(e={}){var n=()=>super.listBuckets,r=this;return n().call(r,e)}async deleteBucket(e){var n=()=>super.deleteBucket,r=this;return n().call(r,e)}},yk=class extends hk{constructor(e,n,r,a){super(e,n,a),this.vectorBucketName=r}async createIndex(e){var n=()=>super.createIndex,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var n=()=>super.listIndexes,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,e)}async deleteIndex(e){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,e)}index(e){return new vk(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},vk=class extends gk{constructor(e,n,r,a,o){super(e,n,o),this.vectorBucketName=r,this.indexName=a}async putVectors(e){var n=()=>super.putVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var n=()=>super.getVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var n=()=>super.listVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var n=()=>super.queryVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var n=()=>super.deleteVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},bk=class extends dk{constructor(e,n={},r,a){super(e,n,r,a)}from(e){return new ck(this.url,this.headers,e,this.fetch)}get vectors(){return new pk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fk(this.url+"/iceberg",this.headers,this.fetch)}};const Kw="2.97.0",Ra=30*1e3,vh=3,Gf=vh*Ra,wk="http://localhost:9999",xk="supabase.auth.token",_k={"X-Client-Info":`gotrue-js/${Kw}`},bh="X-Supabase-Api-Version",Zw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Sk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ek=600*1e3;class go extends Error{constructor(n,r,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Tk extends go{constructor(n,r,a){super(n,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function Ck(e){return me(e)&&e.name==="AuthApiError"}class vr extends go{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class ii extends go{constructor(n,r,a,o){super(n,a,o),this.name=r,this.status=a}}class Kt extends ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yf(e){return me(e)&&e.name==="AuthSessionMissingError"}class _a extends ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cc extends ii{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class uc extends ii{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ak(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class pv extends ii{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nk extends ii{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class wh extends ii{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Xf(e){return me(e)&&e.name==="AuthRetryableFetchError"}class yv extends ii{constructor(n,r,a){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class xh extends ii{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const jc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vv=` 	
\r=`.split(""),Ok=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<vv.length;n+=1)e[vv[n].charCodeAt(0)]=-2;for(let n=0;n<jc.length;n+=1)e[jc[n].charCodeAt(0)]=n;return e})();function bv(e,n,r){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;r(jc[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;r(jc[a]),n.queuedBits-=6}}function Qw(e,n,r){const a=Ok[e];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function wv(e){const n=[],r=u=>{n.push(String.fromCodePoint(u))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{Mk(u,a,r)};for(let u=0;u<e.length;u+=1)Qw(e.charCodeAt(u),o,c);return n.join("")}function Rk(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kk(e,n){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const o=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}Rk(a,n)}}function Mk(e,n,r){if(n.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function $a(e){const n=[],r={queue:0,queuedBits:0},a=o=>{n.push(o)};for(let o=0;o<e.length;o+=1)Qw(e.charCodeAt(o),r,a);return new Uint8Array(n)}function jk(e){const n=[];return kk(e,r=>n.push(r)),new Uint8Array(n)}function wr(e){const n=[],r={queue:0,queuedBits:0},a=o=>{n.push(o)};return e.forEach(o=>bv(o,r,a)),bv(null,r,a),n.join("")}function Dk(e){return Math.round(Date.now()/1e3)+e}function zk(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",fr={tested:!1,writable:!1},Jw=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fr.tested)return fr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fr.tested=!0,fr.writable=!0}catch{fr.tested=!0,fr.writable=!1}return fr.writable};function Uk(e){const n={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return r.searchParams.forEach((a,o)=>{n[o]=a}),n}const Fw=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),$k=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ka=async(e,n,r)=>{await e.setItem(n,JSON.stringify(r))},hr=async(e,n)=>{const r=await e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_t=async(e,n)=>{await e.removeItem(n)};class tu{constructor(){this.promise=new tu.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}tu.promiseConstructor=Promise;function dc(e){const n=e.split(".");if(n.length!==3)throw new xh("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!Sk.test(n[a]))throw new xh("JWT not in base64url format");return{header:JSON.parse(wv(n[0])),payload:JSON.parse(wv(n[1])),signature:$a(n[2]),raw:{header:n[0],payload:n[1]}}}async function Lk(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function Hk(e,n){return new Promise((a,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await e(c);if(!n(c,null,u)){a(u);return}}catch(u){if(!n(c,u)){o(u);return}}})()})}function Bk(e){return("0"+e.toString(16)).substr(-2)}function Ik(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let o="";for(let c=0;c<56;c++)o+=r.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(n),Array.from(n,Bk).join("")}async function qk(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(a);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function Vk(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await qk(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(e,n,r=!1){const a=Ik();let o=a;r&&(o+="/PASSWORD_RECOVERY"),await ka(e,`${n}-code-verifier`,o);const c=await Vk(a);return[c,a===c?"plain":"s256"]}const Pk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gk(e){const n=e.headers.get(bh);if(!n||!n.match(Pk))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Yk(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function Xk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ea(e){if(!Kk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kf(){const e={};return new Proxy(e,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zk(e,n){return new Proxy(e,{get:(r,a,o)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,a,o)}return!n.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,a,o)}})}function xv(e){return JSON.parse(JSON.stringify(e))}const mr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qk=[502,503,504];async function _v(e){var n;if(!$k(e))throw new wh(mr(e),0);if(Qk.includes(e.status))throw new wh(mr(e),e.status);let r;try{r=await e.json()}catch(c){throw new vr(mr(c),c)}let a;const o=Gk(e);if(o&&o.getTime()>=Zw["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new yv(mr(r),e.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new Kt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new yv(mr(r),e.status,r.weak_password.reasons);throw new Tk(mr(r),e.status||500,a)}const Jk=(e,n,r,a)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),r))};async function we(e,n,r,a){var o;const c=Object.assign({},a?.headers);c[bh]||(c[bh]=Zw["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const u=(o=a?.query)!==null&&o!==void 0?o:{};a?.redirectTo&&(u.redirect_to=a.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await Fk(e,n,r+d,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(g):{data:Object.assign({},g),error:null}}async function Fk(e,n,r,a,o,c){const u=Jk(n,a,o,c);let d;try{d=await e(r,Object.assign({},u))}catch(g){throw console.error(g),new wh(mr(g),0)}if(d.ok||await _v(d),a?.noResolveJson)return d;try{return await d.json()}catch(g){await _v(g)}}function hn(e){var n;let r=null;tM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Dk(e.expires_in)));const a=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:r,user:a},error:null}}function Sv(e){const n=hn(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(n.data.weak_password=e.weak_password),n}function Hi(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function Wk(e){return{data:e,error:null}}function eM(e){const{action_link:n,email_otp:r,hashed_token:a,redirect_to:o,verification_type:c}=e,u=Fc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:n,email_otp:r,hashed_token:a,redirect_to:o,verification_type:c},g=Object.assign({},u);return{data:{properties:d,user:g},error:null}}function Ev(e){return e}function tM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Zf=["global","local","others"];class nM{constructor({url:n="",headers:r={},fetch:a}){this.url=n,this.headers=r,this.fetch=Fw(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Zf[0]){if(Zf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zf.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hi})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:r}=n,a=Fc(n,["options"]),o=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(o.new_email=a?.newEmail,delete o.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:eM,redirectTo:r?.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Hi})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,a,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Ev});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(E=>{const x=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);h[`${T}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{users:[]},error:h};throw h}}async getUserById(n){Ea(n);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Hi})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Ea(n);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Hi})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,r=!1){Ea(n);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hi})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){Ea(n.userId);try{const{data:r,error:a}=await we(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:a}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Ea(n.userId),Ea(n.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,a,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Ev});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(E=>{const x=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);h[`${T}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(n){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(n){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}}function Tv(e={}){return{getItem:n=>e[n]||null,setItem:(n,r)=>{e[n]=r},removeItem:n=>{delete e[n]}}}const Ta={debug:!!(globalThis&&Jw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ww extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Cv extends Ww{}async function iM(e,n,r){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const a=new globalThis.AbortController;n>0&&setTimeout(()=>{a.abort(),Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(n===0)throw Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Cv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ta.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(o){throw o?.name==="AbortError"?new Cv(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${n}ms`):o}}function rM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ex(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function aM(e){return parseInt(e,16)}function sM(e){const n=new TextEncoder().encode(e);return"0x"+Array.from(n,a=>a.toString(16).padStart(2,"0")).join("")}function oM(e){var n;const{chainId:r,domain:a,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:d,requestId:g,resources:h,scheme:p,uri:v,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((n=e.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=ex(e.address),E=p?`${p}://${a}`:a,x=e.statement?`${e.statement}
`:"",T=`${E} wants you to sign in with your Ethereum account:
${b}

${x}`;let C=`URI: ${v}
Version: ${y}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),d&&(C+=`
Not Before: ${d.toISOString()}`),g&&(C+=`
Request ID: ${g}`),h){let k=`
Resources:`;for(const _ of h){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);k+=`
- ${_}`}C+=k}return`${T}
${C}`}class ct extends Error{constructor({message:n,code:r,cause:a,name:o}){var c;super(n,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=o??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class Dc extends ct{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function lM({error:e,options:n}){var r,a,o;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(n.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(tx(u)){if(c.rp.id!==u)return new ct({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function cM({error:e,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(tx(a)){if(r.rpId!==a)return new ct({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class uM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const dM=new uM;function fM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:n,user:r,excludeCredentials:a}=e,o=Fc(e,["challenge","user","excludeCredentials"]),c=$a(n).buffer,u=Object.assign(Object.assign({},r),{id:$a(r.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:c,user:u});if(a&&a.length>0){d.excludeCredentials=new Array(a.length);for(let g=0;g<a.length;g++){const h=a[g];d.excludeCredentials[g]=Object.assign(Object.assign({},h),{id:$a(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function hM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:n,allowCredentials:r}=e,a=Fc(e,["challenge","allowCredentials"]),o=$a(n).buffer,c=Object.assign(Object.assign({},a),{challenge:o});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];c.allowCredentials[u]=Object.assign(Object.assign({},d),{id:$a(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function gM(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:wr(new Uint8Array(e.response.attestationObject)),clientDataJSON:wr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function mM(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,a=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:wr(new Uint8Array(o.authenticatorData)),clientDataJSON:wr(new Uint8Array(o.clientDataJSON)),signature:wr(new Uint8Array(o.signature)),userHandle:o.userHandle?wr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function tx(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Av(){var e,n;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function pM(e){try{const n=await navigator.credentials.create(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Dc("Browser returned unexpected credential type",n)}:{data:null,error:new Dc("Empty credential response",n)}}catch(n){return{data:null,error:lM({error:n,options:e})}}}async function yM(e){try{const n=await navigator.credentials.get(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Dc("Browser returned unexpected credential type",n)}:{data:null,error:new Dc("Empty credential response",n)}}catch(n){return{data:null,error:cM({error:n,options:e})}}}const vM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function zc(...e){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),a={};for(const o of e)if(o)for(const c in o){const u=o[c];if(u!==void 0)if(Array.isArray(u))a[c]=u;else if(r(u))a[c]=u;else if(n(u)){const d=a[c];n(d)?a[c]=zc(d,u):a[c]=zc(u)}else a[c]=u}return a}function wM(e,n){return zc(vM,e,n||{})}function xM(e,n){return zc(bM,e,n||{})}class _M{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:a,signal:o},c){var u;try{const{data:d,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!d)return{data:null,error:g};const h=o??dM.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;if(!p.name){const v=a;if(v)p.name=`${p.id}:${v}`;else{const b=(await this.client.getUser()).data.user,E=((u=b?.user_metadata)===null||u===void 0?void 0:u.name)||b?.email||b?.id||"User";p.name=`${p.id}:${E}`}}p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=wM(d.webauthn.credential_options.publicKey,c?.create),{data:v,error:y}=await pM({publicKey:p,signal:h});return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const p=xM(d.webauthn.credential_options.publicKey,c?.request),{data:v,error:y}=await yM(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(d){return me(d)?{data:null,error:d}:{data:null,error:new vr("Unexpected error in challenge",d)}}}async _verify({challengeId:n,factorId:r,webauthn:a}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:a})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!r)return{data:null,error:new go("rpId is required for WebAuthn authentication")};try{if(!Av())return{data:null,error:new vr("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:a},signal:o},{request:c});if(!u)return{data:null,error:d};const{webauthn:g}=u;return this._verify({factorId:n,challengeId:u.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:a,credential_response:g.credential_response}})}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new vr("Unexpected error in authenticate",u)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!r)return{data:null,error:new go("rpId is required for WebAuthn registration")};try{if(!Av())return{data:null,error:new vr("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:n});if(!u)return await this.client.mfa.listFactors().then(p=>{var v;return(v=p.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===n&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:d};const{data:g,error:h}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:o},{create:c});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:a,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:h}}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new vr("Unexpected error in register",u)}}}}rM();const SM={url:wk,storageKey:xk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_k,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Nv(e,n,r){return await r()}const Ca={};class mo{get jwks(){var n,r;return(r=(n=Ca[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Ca[this.storageKey]=Object.assign(Object.assign({},Ca[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Ca[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ca[this.storageKey]=Object.assign(Object.assign({},Ca[this.storageKey]),{cachedAt:n})}constructor(n){var r,a,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},SM),n);if(this.storageKey=c.storageKey,this.instanceID=(r=mo.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,mo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&St()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new nM({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Fw(c.fetch),this.lock=c.lock||Nv,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&St()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=iM:this.lock=Nv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _M(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Jw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tv(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Tv(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}c.skipAutoInitialize||this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Kw}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},a="none";if(St()&&(r=Uk(window.location.href),this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce")),St()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Ak(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?this._returnResult({error:r}):this._returnResult({error:new vr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,a,o;try{const c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:hn}),{data:u,error:d}=c;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var r,a,o;try{let c;if("email"in n){const{email:p,password:v,options:y}=n;let b=null,E=null;this.flowType==="pkce"&&([b,E]=await Sa(this.storage,this.storageKey)),c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:v,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:E},xform:hn})}else if("phone"in n){const{phone:p,password:v,options:y}=n;c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(a=y?.data)!==null&&a!==void 0?a:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:hn})}else throw new cc("You must provide either an email or phone number and a password");const{data:u,error:d}=c;if(d||!u)return await _t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:u,options:d}=n;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Sv})}else if("phone"in n){const{phone:c,password:u,options:d}=n;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Sv})}else throw new cc("You must provide either an email or phone number and a password");const{data:a,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!a||!a.session||!a.user){const c=new _a;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,a,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,a,o,c,u,d,g,h,p,v,y;let b,E;if("message"in n)b=n.message,E=n.signature;else{const{chain:x,wallet:T,statement:C,options:k}=n;let _;if(St())if(typeof T=="object")_=T;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")_=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=T}const N=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href),L=await _.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=ex(L[0]);let U=(a=k?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!U){const J=await _.request({method:"eth_chainId"});U=aM(J)}const V={domain:N.host,address:j,statement:C,uri:N.href,version:"1",chainId:U,nonce:(o=k?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=k?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=k?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(g=k?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(h=k?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=k?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=oM(V),E=await _.request({method:"personal_sign",params:[sM(b),j]})}try{const{data:x,error:T}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:E},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=n.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:hn});if(T)throw T;if(!x||!x.session||!x.user){const C=new _a;return this._returnResult({data:{user:null,session:null},error:C})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:T})}catch(x){if(me(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(n){var r,a,o,c,u,d,g,h,p,v,y,b;let E,x;if("message"in n)E=n.message,x=n.signature;else{const{chain:T,wallet:C,statement:k,options:_}=n;let N;if(St())if(typeof C=="object")N=C;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))N=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=C}const L=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const j=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),k?{statement:k}:null));let U;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")U=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)U=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)E=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),x=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${L.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(o=(a=_?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=_?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((u=_?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((d=_?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((g=_?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((h=_?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((v=(p=_?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",..._.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const j=await N.signMessage(new TextEncoder().encode(E),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:T,error:C}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:wr(x)},!((y=n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:hn});if(C)throw C;if(!T||!T.session||!T.user){const k=new _a;return this._returnResult({data:{user:null,session:null},error:k})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:C})}catch(T){if(me(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(n){const r=await hr(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(r??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Nk;const{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:hn});if(await _t(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const d=new _a;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:r,provider:a,token:o,access_token:c,nonce:u}=n,d=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:hn}),{data:g,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g||!g.session||!g.user){const p=new _a;return this._returnResult({data:{user:null,session:null},error:p})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:h})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,a,o,c,u;try{if("email"in n){const{email:d,options:g}=n;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Sa(this.storage,this.storageKey));const{error:v}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(a=g?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in n){const{phone:d,options:g}=n,{data:h,error:p}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new cc("You must provide either an email or phone number.")}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(n){var r,a;try{let o,c;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:u,error:d}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:hn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,h=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(o){if(me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var r,a,o,c,u;try{let d=null,g=null;this.flowType==="pkce"&&([d,g]=await Sa(this.storage,this.storageKey));const h=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:g}),headers:this.headers,xform:Wk});return!((c=h.data)===null||c===void 0)&&c.url&&St()&&!(!((u=n.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)throw a;if(!r)throw new Kt;const{error:o}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:a,type:o,options:c}=n,{error:u}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in n){const{phone:a,type:o,options:c}=n,{data:u,error:d}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new cc("You must provide either an email or phone number and a type")}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<Gf:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const u=await hr(this.userStorage,this.storageKey+"-user");u?.user?n.user=u.user:n.user=Kf()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};n.user=Zk(n.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Hi}):await this._useSession(async r=>{var a,o,c;const{data:u,error:d}=r;if(d)throw d;return!(!((a=u.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kt}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Hi})})}catch(r){if(me(r))return Yf(r)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async a=>{const{data:o,error:c}=a;if(c)throw c;if(!o.session)throw new Kt;const u=o.session;let d=null,g=null;this.flowType==="pkce"&&n.email!=null&&([d,g]=await Sa(this.storage,this.storageKey));const{data:h,error:p}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:d,code_challenge_method:g}),jwt:u.access_token,xform:Hi});if(p)throw p;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(a){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Kt;const r=Date.now()/1e3;let a=r,o=!0,c=null;const{payload:u}=dc(n.access_token);if(u.exp&&(a=u.exp,o=a<=r),o){const{data:d,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:g}=await this._getUser(n.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});c={access_token:n.access_token,refresh_token:n.refresh_token,user:d.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(me(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var a;if(!n){const{data:u,error:d}=r;if(d)throw d;n=(a=u.session)!==null&&a!==void 0?a:void 0}if(!n?.refresh_token)throw new Kt;const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!St())throw new uc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new uc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new pv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new uc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new pv("No code detected.");const{data:k,error:_}=await this._exchangeCodeForSession(n.code);if(_)throw _;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:d,expires_at:g,token_type:h}=n;if(!c||!d||!u||!h)throw new uc("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(d);let y=p+v;g&&(y=parseInt(g));const b=y-p;b*1e3<=Ra&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const E=y-v;p-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,y,p):p-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,y,p);const{data:x,error:T}=await this._getUser(c);if(T)throw T;const C={provider_token:a,provider_refresh_token:o,access_token:c,expires_in:v,expires_at:y,refresh_token:u,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:n.type},error:null})}catch(a){if(me(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await hr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:o,error:c}=r;if(c&&!Yf(c))return this._returnResult({error:c});const u=(a=o.session)===null||a===void 0?void 0:a.access_token;if(u){const{error:d}=await this.admin.signOut(u,n);if(d&&!(Ck(d)&&(d.status===404||d.status===401||d.status===403)||Yf(d)))return this._returnResult({error:d})}return n!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=zk(),a={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async r=>{var a,o;try{const{data:{session:c},error:u}=r;if(u)throw u;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await Sa(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:a,error:o}=await this._useSession(async c=>{var u,d,g,h,p;const{data:v,error:y}=c;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(u=n.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=n.options)===null||d===void 0?void 0:d.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return St()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:n.provider,url:a?.url},error:null})}catch(a){if(me(a))return this._returnResult({data:{provider:n.provider,url:null},error:a});throw a}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var a;try{const{error:o,data:{session:c}}=r;if(o)throw o;const{options:u,provider:d,token:g,access_token:h,nonce:p}=n,v=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:d,id_token:g,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hn}),{data:y,error:b}=v;return b?this._returnResult({data:{user:null,session:null},error:b}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new _a}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:b}))}catch(o){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var a,o;const{data:c,error:u}=r;if(u)throw u;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await Hk(async o=>(o>0&&await Lk(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:hn})),(o,c)=>{const u=200*Math.pow(2,o);return c&&Xf(c)&&Date.now()+u-a<Ra})}catch(a){if(this._debug(r,"error",a),me(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",a),St()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=await hr(this.storage,this.storageKey);if(o&&this.userStorage){let u=await hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await ka(this.userStorage,this.storageKey+"-user",u)),o.user=(n=u?.user)!==null&&n!==void 0?n:Kf()}else if(o&&!o.user&&!o.user){const u=await hr(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await _t(this.storage,this.storageKey+"-user"),await ka(this.storage,this.storageKey,o)):o.user=Kf()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&await this._removeSession();return}const c=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Gf;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${Gf}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Xf(u)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(a,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o),console.error(o);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var r,a;if(!n)throw new Kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new tu;const{data:c,error:u}=await this._refreshAccessToken(n);if(u)throw u;if(!c.session)throw new Kt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(o,"error",c),me(c)){const u={data:null,error:c};return Xf(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,a=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(n,r)}catch(g){c.push(g)}});if(await Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await _t(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await ka(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const c=xv(o);await ka(this.storage,this.storageKey,c)}else{const o=xv(r);await ka(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Ra);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-n)/Ra);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ra}ms, refresh threshold is ${vh} ticks`),o<=vh&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Ww)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,a){const o=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,u]=await Sa(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);o.push(c.toString())}return a?.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;return c?this._returnResult({data:null,error:c}):await we(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var a,o;const{data:c,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:h}=await we(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return h?this._returnResult({data:null,error:h}):(n.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?gM(n.webauthn.credential_response):mM(n.webauthn.credential_response)})}:{code:n.code}),{data:d,error:g}=await we(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:u,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:g}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const u=await we(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:fM(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:hM(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:a}=await this._challenge({factorId:n.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,a,o,c;if(n)try{const{payload:b}=dc(n);let E=null;b.aal&&(E=b.aal);let x=E;const{data:{user:T},error:C}=await this.getUser(n);if(C)return this._returnResult({data:null,error:C});((a=(r=T?.factors)===null||r===void 0?void 0:r.filter(N=>N.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(x="aal2");const _=b.amr||[];return{data:{currentLevel:E,nextLevel:x,currentAuthenticationMethods:_},error:null}}catch(b){if(me(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=dc(u.access_token);let h=null;g.aal&&(h=g.aal);let p=h;((c=(o=u.user.factors)===null||o===void 0?void 0:o.filter(b=>b.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(p="aal2");const y=g.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:a},error:o}=r;return o?this._returnResult({data:null,error:o}):a?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(n,r){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?await we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:a},error:o}=r;return o?this._returnResult({data:null,error:o}):a?(await we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kt})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let a=r.keys.find(d=>d.kid===n);if(a)return a;const o=Date.now();if(a=this.jwks.keys.find(d=>d.kid===n),a&&this.jwks_cached_at+Ek>o)return a;const{data:c,error:u}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,a=c.keys.find(d=>d.kid===n),!a)?null:a}async getClaims(n,r={}){try{let a=n;if(!a){const{data:b,error:E}=await this.getSession();if(E||!b.session)return this._returnResult({data:null,error:E});a=b.session.access_token}const{header:o,payload:c,signature:u,raw:{header:d,payload:g}}=dc(a);r?.allowExpired||Yk(c.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!h){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:c,header:o,signature:u},error:null}}const p=Xk(o.alg),v=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,u,jk(`${d}.${g}`)))throw new xh("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}}mo.nextInstanceID={};const EM=mo,TM="2.97.0";let Xs="";typeof Deno<"u"?Xs="deno":typeof document<"u"?Xs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xs="react-native":Xs="node";const CM={"X-Client-Info":`supabase-js-${Xs}/${TM}`},AM={headers:CM},NM={schema:"public"},OM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RM={};function po(e){"@babel/helpers - typeof";return po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},po(e)}function kM(e,n){if(po(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,n);if(po(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function MM(e){var n=kM(e,"string");return po(n)=="symbol"?n:n+""}function jM(e,n,r){return(n=MM(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Ov(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function tt(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ov(Object(r),!0).forEach(function(a){jM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ov(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const DM=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),zM=()=>Headers,UM=(e,n,r)=>{const a=DM(r),o=zM();return async(c,u)=>{var d;const g=(d=await n())!==null&&d!==void 0?d:e;let h=new o(u?.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${g}`),a(c,tt(tt({},u),{},{headers:h}))}};function $M(e){return e.endsWith("/")?e:e+"/"}function LM(e,n){var r,a;const{db:o,auth:c,realtime:u,global:d}=e,{db:g,auth:h,realtime:p,global:v}=n,y={db:tt(tt({},g),o),auth:tt(tt({},h),c),realtime:tt(tt({},p),u),storage:{},global:tt(tt(tt({},v),d),{},{headers:tt(tt({},(r=v?.headers)!==null&&r!==void 0?r:{}),(a=d?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function HM(e){const n=e?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($M(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var BM=class extends EM{constructor(e){super(e)}},IM=class{constructor(e,n,r){var a,o;this.supabaseUrl=e,this.supabaseKey=n;const c=HM(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:NM,realtime:RM,auth:tt(tt({},OM),{},{storageKey:u}),global:AM},g=LM(r??{},d);if(this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=g.auth)!==null&&h!==void 0?h:{},this.headers,g.global.fetch)}this.fetch=UM(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new CR(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new bk(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new vR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,n,r;if(e.accessToken)return await e.accessToken();const{data:a}=await e.auth.getSession();return(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:o,storageKey:c,flowType:u,lock:d,debug:g,throwOnError:h},p,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BM({url:this.authUrl.href,headers:tt(tt({},y),p),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:o,flowType:u,lock:d,debug:g,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new VR(this.realtimeUrl.href,tt(tt({},e),{},{params:tt(tt({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const qM=(e,n,r)=>new IM(e,n,r);function VM(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const n=e.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}VM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const PM="https://gnqfmzliimhxcoexasqv.supabase.co",GM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImducWZtemxpaW1oeGNvZXhhc3F2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDAyMzk3ODcsImV4cCI6MjA1NTgxNTc4N30.61DTCv3fpG7Z9dy7oI6g9lH-tq2qVUt9Z4WGXaFgO2U",pr=qM(PM,GM),Aa=()=>!!pr,YM=()=>{const[e,n]=q.useState([]),[r,a]=q.useState(!1),[o,c]=q.useState(null),[u,d]=q.useState(null),g=q.useCallback(async()=>{if(Aa()){a(!0),c(null);try{const{data:E,error:x}=await pr.from("models").select("id, name, updated_at").order("updated_at",{ascending:!1});if(x)throw x;n(E||[])}catch(E){c(E.message),console.error("Error fetching models:",E)}finally{a(!1)}}},[]),h=q.useCallback(async E=>{if(!Aa())return null;a(!0),c(null);try{const{data:x,error:T}=await pr.from("models").select("*").eq("id",E).single();if(T)throw T;return d(E),x}catch(x){return c(x.message),console.error("Error loading model:",x),null}finally{a(!1)}},[]),p=q.useCallback(async(E,x)=>{if(!Aa())return null;a(!0),c(null);try{const T={name:E,data:x,updated_at:new Date().toISOString()};let C;if(u){const{data:k,error:_}=await pr.from("models").update(T).eq("id",u).select().single();if(_)throw _;C=k}else{const{data:k,error:_}=await pr.from("models").insert(T).select().single();if(_)throw _;C=k,d(C.id)}return await g(),C}catch(T){return c(T.message),console.error("Error saving model:",T),null}finally{a(!1)}},[u,g]),v=q.useCallback(async(E,x)=>{if(!Aa())return null;a(!0),c(null);try{const{data:T,error:C}=await pr.from("models").insert({name:E,data:x,updated_at:new Date().toISOString()}).select().single();if(C)throw C;return d(T.id),await g(),T}catch(T){return c(T.message),console.error("Error saving model:",T),null}finally{a(!1)}},[g]),y=q.useCallback(async E=>{if(!Aa())return!1;a(!0),c(null);try{const{error:x}=await pr.from("models").delete().eq("id",E);if(x)throw x;return u===E&&d(null),await g(),!0}catch(x){return c(x.message),console.error("Error deleting model:",x),!1}finally{a(!1)}},[u,g]),b=q.useCallback(()=>{d(null)},[]);return q.useEffect(()=>{g()},[g]),{models:e,loading:r,error:o,currentModelId:u,isConfigured:Aa(),fetchModels:g,loadModel:h,saveModel:p,saveAsModel:v,deleteModel:y,newModel:b}},XM=()=>{const[e,n]=q.useState(!1),[r,a]=q.useState(!1),[o,c]=q.useState(""),u=q.useRef(null),{models:d,loading:g,currentModelId:h,isConfigured:p,loadModel:v,saveModel:y,saveAsModel:b,deleteModel:E,newModel:x}=YM(),{metadata:T,exportModel:C,importModel:k,clearAll:_,setMetadata:N}=Te();if(q.useEffect(()=>{const Z=ee=>{u.current&&!u.current.contains(ee.target)&&(n(!1),a(!1))};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]),!p)return null;const L=async()=>{const Z=C();h?await y(T.name,Z):(a(!0),c(T.name)),n(!1)},j=async()=>{if(!o.trim())return;const Z=C();N({...T,name:o.trim()}),await b(o.trim(),{...Z,metadata:{...Z.metadata,name:o.trim()}}),a(!1),c("")},U=async Z=>{const ee=await v(Z);ee?.data&&k(ee.data),n(!1)},V=async(Z,ee)=>{Z.stopPropagation(),window.confirm("Delete this model? This cannot be undone.")&&await E(ee)},J=()=>{_(),x(),N({name:"New C4 Model",version:"1.0",author:"Solution Architect"}),n(!1)},oe=d.find(Z=>Z.id===h);return S.jsxs("div",{className:"relative",ref:u,children:[S.jsxs("button",{onClick:()=>n(!e),className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm transition-colors",title:"Cloud models",children:[g?S.jsx(zN,{className:"w-4 h-4 animate-spin"}):S.jsx(NN,{className:"w-4 h-4"}),S.jsx("span",{className:"max-w-[120px] truncate",children:oe?oe.name:"Models"}),S.jsx(TN,{className:"w-3 h-3"})]}),e&&S.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:r?S.jsxs("div",{className:"p-3",children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Name"}),S.jsx("input",{type:"text",value:o,onChange:Z=>c(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&j(),placeholder:"Enter model name",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),S.jsxs("div",{className:"flex gap-2 mt-2",children:[S.jsx("button",{onClick:j,disabled:!o.trim(),className:"flex-1 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"}),S.jsx("button",{onClick:()=>a(!1),className:"px-3 py-1.5 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm",children:"Cancel"})]})]}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"p-2 border-b border-gray-100",children:[S.jsxs("button",{onClick:J,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(kN,{className:"w-4 h-4"}),"New Model"]}),S.jsxs("button",{onClick:L,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(G0,{className:"w-4 h-4"}),h?"Save":"Save As..."]}),h&&S.jsxs("button",{onClick:()=>{a(!0),c(T.name)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(G0,{className:"w-4 h-4"}),"Save As..."]})]}),S.jsx("div",{className:"max-h-64 overflow-y-auto",children:d.length===0?S.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 text-center",children:"No saved models"}):d.map(Z=>S.jsxs("div",{onClick:()=>U(Z.id),className:`flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer ${Z.id===h?"bg-indigo-50":""}`,children:[S.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[S.jsx(MN,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),S.jsx("span",{className:"truncate",children:Z.name})]}),S.jsx("button",{onClick:ee=>V(ee,Z.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete model",children:S.jsx(uh,{className:"w-3 h-3"})})]},Z.id))})]})})]})},KM=()=>{const{metadata:e,setMetadata:n,exportModel:r,importModel:a,clearAll:o}=Te(),c=Te(D=>D.viewMode),u=Te(D=>D.setViewMode),[d,g]=q.useState(!1),[h,p]=q.useState(!1),[v,y]=q.useState(!1),[b,E]=q.useState(!1),[x,T]=q.useState(e.name),[C,k]=q.useState(null),_=async()=>{const D=r(),{url:O,error:M}=dR(D);if(M){k("error"),alert(M),setTimeout(()=>k(null),2e3);return}try{await navigator.clipboard.writeText(O),k("copied"),setTimeout(()=>k(null),2e3)}catch{const Q=document.createElement("textarea");Q.value=O,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q),k("copied"),setTimeout(()=>k(null),2e3)}},N=()=>{const D=r(),O=JSON.stringify(D,null,2),M="data:application/json;charset=utf-8,"+encodeURIComponent(O),K=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.json`,Q=document.createElement("a");Q.setAttribute("href",M),Q.setAttribute("download",K),Q.click()},L=D=>{const O=D.target.files?.[0];if(O){const M=new FileReader;M.onload=K=>{try{const Q=JSON.parse(K.target.result);if(Q.model&&(Q.views||Q.documentation)){const se=oR(Q);a(se),alert("Structurizr workspace imported successfully!")}else a(Q),alert("Model imported successfully!")}catch(Q){alert("Error importing model: "+Q.message)}},M.readAsText(O)}y(!1),D.target.value=""},j=D=>{const O=D.target.files?.[0];if(O){const M=new FileReader;M.onload=K=>{try{const Q=K.target.result,se=aR(Q);a(se),alert(`Spreadsheet imported successfully! Created ${se.systems?.length||0} systems, ${se.containers?.length||0} containers, ${se.components?.length||0} components.`)}catch(Q){alert("Error importing spreadsheet: "+Q.message)}},M.readAsText(O)}y(!1),D.target.value=""},U=()=>{const D=r(),O=sR(D),M=JSON.stringify(O,null,2),K="data:application/json;charset=utf-8,"+encodeURIComponent(M),Q=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}-structurizr.json`,se=document.createElement("a");se.setAttribute("href",K),se.setAttribute("download",Q),se.click(),p(!1)},V=()=>{window.confirm("Are you sure you want to clear all elements? This cannot be undone.")&&o()},J=()=>{const D=r(),O=Lw(D),M=new Blob([O],{type:"text/plain"}),K=URL.createObjectURL(M),Q=document.createElement("a");Q.href=K,Q.download=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.puml`,Q.click(),URL.revokeObjectURL(K),p(!1)},oe=()=>{const D=r(),O=ZO(D),M=new Blob([O],{type:"text/plain"}),K=URL.createObjectURL(M),Q=document.createElement("a");Q.href=K,Q.download=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.mmd`,Q.click(),URL.revokeObjectURL(K),p(!1)},Z=()=>{const D=r(),O=Hw(D),M=new Blob([O],{type:"text/markdown"}),K=URL.createObjectURL(M),Q=document.createElement("a");Q.href=K,Q.download=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.md`,Q.click(),URL.revokeObjectURL(K),p(!1)},ee=()=>{const D=r();QO(D),p(!1)},G=async()=>{const D=r();await XO(D),p(!1)},z=async()=>{const D=r();await KO(D),p(!1)},P=()=>{const D=r();tR(D),p(!1)},R=()=>{const D=r();nR(D),p(!1)},H=()=>{T(e.name),E(!0)},B=()=>{const D=x.trim();D?n({...e,name:D}):T(e.name),E(!1)},X=D=>{D.key==="Enter"?B():D.key==="Escape"&&(T(e.name),E(!1))};return S.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Diagrams"}),S.jsx("span",{className:"text-gray-400",children:"|"}),b?S.jsx("input",{type:"text",value:x,onChange:D=>T(D.target.value),onBlur:B,onKeyDown:X,autoFocus:!0,className:"text-sm text-gray-900 font-medium px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[200px]"}):S.jsx("button",{onClick:H,className:"text-sm text-gray-600 cursor-text hover:text-gray-900 hover:bg-gray-100 px-2 py-1 rounded transition-colors border border-transparent hover:border-gray-300",title:"Click to edit model name",children:e.name})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(FN,{}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(XM,{}),S.jsxs("button",{onClick:_,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm transition-colors ${C==="copied"?"bg-green-600 text-white":C==="error"?"bg-red-600 text-white":"bg-gray-600 text-white hover:bg-gray-700"}`,title:"Copy shareable link to clipboard",children:[C==="copied"?S.jsx(EN,{className:"w-4 h-4"}):C==="error"?S.jsx(AN,{className:"w-4 h-4"}):S.jsx($N,{className:"w-4 h-4"}),C==="copied"?"Copied!":"Share"]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>p(!h),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm transition-colors",title:"Export model",children:[S.jsx(ON,{className:"w-4 h-4"}),"Export"]}),h&&S.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:S.jsxs("div",{className:"py-1",children:[S.jsxs("button",{onClick:N,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(If,{className:"w-4 h-4"}),"JSON"]}),S.jsxs("button",{onClick:U,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(If,{className:"w-4 h-4"}),"Structurizr JSON"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:J,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Bf,{className:"w-4 h-4"}),"PlantUML"]}),S.jsxs("button",{onClick:oe,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Bf,{className:"w-4 h-4"}),"Mermaid"]}),S.jsxs("button",{onClick:Z,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(P0,{className:"w-4 h-4"}),"Markdown"]}),S.jsxs("button",{onClick:ee,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(P0,{className:"w-4 h-4"}),"HTML Document"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:G,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(V0,{className:"w-4 h-4"}),"PNG Image"]}),S.jsxs("button",{onClick:z,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(V0,{className:"w-4 h-4"}),"SVG Image"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:P,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Bf,{className:"w-4 h-4"}),"Draw.io (.drawio)"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:R,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Y0,{className:"w-4 h-4"}),"Spreadsheet (.csv)"]})]})})]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>y(!v),className:"flex items-center gap-2 px-3 py-1.5 bg-green-700 text-white rounded-md hover:bg-green-800 text-sm transition-colors",title:"Import model",children:[S.jsx(LN,{className:"w-4 h-4"}),"Import"]}),v&&S.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:S.jsxs("div",{className:"py-1",children:[S.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[S.jsx(If,{className:"w-4 h-4"}),"JSON / Structurizr",S.jsx("input",{type:"file",accept:".json",onChange:L,className:"hidden","aria-label":"Import JSON model file"})]}),S.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[S.jsx(Y0,{className:"w-4 h-4"}),"Spreadsheet (.csv)",S.jsx("input",{type:"file",accept:".csv",onChange:j,className:"hidden","aria-label":"Import CSV spreadsheet"})]})]})})]}),S.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-md p-1",children:[S.jsxs("button",{onClick:()=>u("edit"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="edit"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Edit mode - navigate and edit elements",children:[S.jsx(RN,{className:"w-4 h-4"}),"Edit"]}),S.jsxs("button",{onClick:()=>u("tree"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="tree"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Tree view - see full hierarchy",children:[S.jsx(jN,{className:"w-4 h-4"}),"Tree"]})]}),S.jsx("button",{onClick:V,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm transition-colors",title:"Clear all elements",children:"Clear All"})]})]})]})})},fc="c4-model-autosave",ZM=3e4,Na=e=>!e||typeof e!="object"?null:{id:e.id,type:e.type,name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags:[],parentId:e.parentId||null,position:e.position&&typeof e.position=="object"?{x:Number(e.position.x)||0,y:Number(e.position.y)||0}:{x:0,y:0},width:e.width?Number(e.width):void 0,height:e.height?Number(e.height):void 0},QM=e=>!e||typeof e!="object"?null:{id:e.id,from:e.from,to:e.to,description:e.description||"",technology:e.technology||"",arrowDirection:e.arrowDirection||"right",lineStyle:e.lineStyle||"solid",animated:!!e.animated},hc=e=>{if(!e||typeof e!="object")return null;const n=(r,a)=>Array.isArray(r)?r.map(a).filter(o=>o!==null):[];return{metadata:e.metadata||{name:"New C4 Model",version:"1.0",author:"Solution Architect"},systems:n(e.systems,Na),containers:n(e.containers,Na),components:n(e.components,Na),people:n(e.people,Na),externalSystems:n(e.externalSystems,Na),shadows:(e.shadows||[]).map(Na),relationships:n(e.relationships,QM)}},JM=()=>{const{exportModel:e,importModel:n}=Te();q.useEffect(()=>{if(gR())try{const a=fR();if(a){const o=hc(a);if(o){n(o),console.log("Model loaded from shared URL"),hR();return}}}catch(a){console.error("Error loading shared model from URL:",a)}const r=localStorage.getItem(fc);if(r)try{const a=JSON.parse(r),o=hc(a);o&&window.confirm("Found a previously saved model. Would you like to restore it?")&&(n(o),console.log("Model restored from local storage (sanitized)"))}catch(a){console.error("Error loading saved model:",a),console.warn("Clearing corrupted localStorage data"),localStorage.removeItem(fc)}},[n]),q.useEffect(()=>{const r=setInterval(()=>{const a=e(),o=hc(a);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(fc,JSON.stringify(o)),console.log("Model auto-saved to local storage")}catch(c){console.error("Error saving model to localStorage:",c)}},ZM);return()=>clearInterval(r)},[e]),q.useEffect(()=>{const r=()=>{const a=e(),o=hc(a);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(fc,JSON.stringify(o))}catch(c){console.error("Error saving model on unload:",c)}};return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[e])},FM=()=>{const e=Te(d=>d.currentParentId),n=Te(d=>d.viewMode),r=Te(d=>d.navigateTo),a=Te(d=>d.navigateToRoot),o=Te(d=>d.setViewMode),c=q.useRef(!1),u=q.useRef(null);q.useEffect(()=>{if(c.current){c.current=!1;return}const d=`${e||"root"}-${n}`;if(u.current===d)return;const g={currentParentId:e,viewMode:n};u.current===null?window.history.replaceState(g,""):window.history.pushState(g,""),u.current=d},[e,n]),q.useEffect(()=>{const d=g=>{c.current=!0;const h=g.state;h?(h.currentParentId===null?a():r(h.currentParentId),h.viewMode&&o(h.viewMode),u.current=`${h.currentParentId||"root"}-${h.viewMode||"edit"}`):(a(),o("edit"),u.current="root-edit")};if(window.addEventListener("popstate",d),!window.history.state){const g={currentParentId:e,viewMode:n};window.history.replaceState(g,""),u.current=`${e||"root"}-${n}`}return()=>{window.removeEventListener("popstate",d)}},[r,a,o])},WM={c4Node:IN,shadowNode:VN},ej=(e,n)=>{if(!e?.position||!n?.position)return{sourceHandle:"bottom",targetHandle:"top"};const r=n.position.x-e.position.x,a=n.position.y-e.position.y;return Math.abs(r)>Math.abs(a)?r>0?{sourceHandle:"right",targetHandle:"left"}:{sourceHandle:"left",targetHandle:"right"}:a>0?{sourceHandle:"bottom",targetHandle:"top"}:{sourceHandle:"top",targetHandle:"bottom"}};function tj(){const[e,n,r]=VA([]),[a,o,c]=PA([]),[u,d]=q.useState(null),{getAllElements:g,relationships:h,updateElement:p,setSelectedElement:v,setSelectedEdge:y,selectedElement:b,currentParentId:E,navigateInto:x,navigateTo:T}=Te(),C=Te(D=>D.navigateUp),k=Te(D=>D.navigateToRoot),_=Te(D=>D.viewMode),N=q.useCallback(D=>{r(D)},[r]),L=Te(D=>D.systems),j=Te(D=>D.containers),U=Te(D=>D.components),V=Te(D=>D.people),J=Te(D=>D.externalSystems),oe=Te(D=>D.shadows),Z=Te(D=>D.getVisibleElements);JM(),FM(),q.useEffect(()=>{const O=Z().map(M=>({id:M.id,type:M.type==="shadow"?"shadowNode":"c4Node",position:M.position||{x:Math.random()*400,y:Math.random()*300},data:{...M,label:M.name}}));n(O)},[L,j,U,V,J,oe,E,Z,n]),q.useEffect(()=>{const D=Z(),O=h.map(M=>{const K=M.arrowDirection||"right";let Q,se;(K==="left"||K==="both")&&(Q={type:Sr.ArrowClosed}),(K==="right"||K==="both")&&(se={type:Sr.ArrowClosed});const ue=M.lineStyle||"solid";let ce;ue==="dashed"?ce="5,5":ue==="dotted"&&(ce="2,2");const le=D.find(pe=>pe.id===M.from),de=D.find(pe=>pe.id===M.to),{sourceHandle:Ee,targetHandle:_e}=ej(le,de);return{id:M.id,source:M.from,target:M.to,sourceHandle:Ee,targetHandle:_e,label:M.description||"",type:"smoothstep",animated:M.animated||!1,markerStart:Q,markerEnd:se,style:{stroke:"#64748b",strokeWidth:2,strokeDasharray:ce},labelStyle:{fill:"#334155",fontSize:12,fontWeight:500},labelBgStyle:{fill:"#f8fafc",fillOpacity:.9}}});o(O)},[h,o,Z,L,j,U,V,J,oe,E]);const ee=q.useCallback((D,O)=>{const M=g().find(K=>K.id===O.id);M&&p(M.type,M.id,{position:{x:O.position.x,y:O.position.y}})},[g,p]),G=q.useCallback(D=>{const O={...D,type:"smoothstep",animated:!1,markerEnd:{type:Sr.ArrowClosed}};o(Q=>Cb(O,Q));const{source:M,target:K}=D;Te.getState().addRelationship({from:M,to:K,description:"New relationship",technology:""})},[o]);q.useEffect(()=>(typeof window<"u"&&(window.__CREATE_CONNECTION__=G),()=>{typeof window<"u"&&delete window.__CREATE_CONNECTION__}),[G]),q.useEffect(()=>{const D=O=>{O.target.tagName==="INPUT"||O.target.tagName==="TEXTAREA"||(O.key==="Escape"&&(b?v(null):C()),O.key==="Home"&&!O.ctrlKey&&!O.metaKey&&k(),O.key==="Enter"&&b&&(b.type==="system"||b.type==="container")&&x(b.id))};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[b,v,C,k,x]);const z=q.useCallback((D,O)=>{try{const M=g().find(K=>K.id===O.id);M?(console.log("[Diagrams] Node clicked:",M.type,M.id),v(M)):(console.error("[Diagrams] Element not found for node:",O.id),v(null))}catch(M){console.error("[Diagrams] Error in onNodeClick:",M),v(null)}},[g,v]),P=q.useCallback((D,O)=>{D.stopPropagation();const M=g().find(K=>K.id===O.id);if(M){if(M.type==="shadow"&&M.targetId){const K=g().find(Q=>Q.id===M.targetId);if(K){(K.type==="system"||K.type==="container")&&x(K.id);return}}(M.type==="system"||M.type==="container")&&x(M.id)}},[g,x]),R=q.useCallback((D,O)=>{const M=h.find(K=>K.id===O.id);y(M)},[h,y]),H=q.useCallback(()=>{v(null),y(null)},[v,y]),B=q.useCallback(D=>{D.preventDefault(),D.dataTransfer.dropEffect="move"},[]),X=q.useCallback(D=>{D.preventDefault();const O=D.dataTransfer.getData("application/c4-element-type");if(!O||!u)return;const M=u.screenToFlowPosition({x:D.clientX,y:D.clientY}),K={name:`New ${O.charAt(0).toUpperCase()+O.slice(1)}`,description:"",technology:"",position:M};Te.getState().addElement(O,K)},[u]);return S.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[S.jsx(KM,{}),S.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[_==="edit"&&S.jsx(QN,{}),S.jsx("div",{className:"flex-1 relative",children:_==="tree"?S.jsx(ZN,{}):S.jsxs(bw,{nodes:e,edges:a,onNodesChange:N,onEdgesChange:c,onConnect:G,onNodeDragStop:ee,onNodeClick:z,onNodeDoubleClick:P,onEdgeClick:R,onPaneClick:H,onDrop:X,onDragOver:B,onInit:d,nodeTypes:WM,fitView:!0,className:"bg-gray-50",children:[S.jsx(xw,{color:"#cbd5e1",gap:16}),S.jsx(Sw,{}),S.jsx(Tw,{nodeColor:D=>{switch(D.data.type){case"system":return"#3b82f6";case"container":return"#22c55e";case"component":return"#eab308";case"person":return"#a855f7";case"externalSystem":return"#6b7280";default:return"#94a3b8"}}})]})}),_==="edit"&&S.jsx(JN,{})]})]})}mS.createRoot(document.getElementById("root")).render(S.jsx(q.StrictMode,{children:S.jsx(tj,{})}));
</script>
    <style>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media(min-width:640px){.container{max-width:640px}}@media(min-width:768px){.container{max-width:768px}}@media(min-width:1024px){.container{max-width:1024px}}@media(min-width:1280px){.container{max-width:1280px}}@media(min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.collapse{visibility:collapse}.absolute{position:absolute}.relative{position:relative}.bottom-2{bottom:.5rem}.left-2{left:.5rem}.right-0{right:0}.right-2{right:.5rem}.top-2{top:.5rem}.z-50{z-index:50}.my-1{margin-top:.25rem;margin-bottom:.25rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.\!h-2{height:.5rem!important}.\!h-4{height:1rem!important}.h-3{height:.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-full{height:100%}.h-screen{height:100vh}.max-h-48{max-height:12rem}.max-h-64{max-height:16rem}.\!w-2{width:.5rem!important}.\!w-4{width:1rem!important}.w-3{width:.75rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-64{width:16rem}.w-80{width:20rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-\[150px\]{min-width:150px}.min-w-\[200px\]{min-width:200px}.max-w-\[120px\]{max-width:120px}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-crosshair{cursor:crosshair}.cursor-grab{cursor:grab}.cursor-pointer{cursor:pointer}.cursor-text{cursor:text}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.\!border-0{border-width:0px!important}.\!border-2{border-width:2px!important}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.\!border-white{--tw-border-opacity: 1 !important;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))!important}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-500{--tw-border-opacity: 1;border-color:rgb(107 114 128 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity: 1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-purple-300{--tw-border-opacity: 1;border-color:rgb(216 180 254 / var(--tw-border-opacity, 1))}.border-purple-500{--tw-border-opacity: 1;border-color:rgb(168 85 247 / var(--tw-border-opacity, 1))}.border-red-400{--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.border-slate-400{--tw-border-opacity: 1;border-color:rgb(148 163 184 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-yellow-300{--tw-border-opacity: 1;border-color:rgb(253 224 71 / var(--tw-border-opacity, 1))}.border-yellow-500{--tw-border-opacity: 1;border-color:rgb(234 179 8 / var(--tw-border-opacity, 1))}.\!bg-gray-400{--tw-bg-opacity: 1 !important;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))!important}.\!bg-slate-400{--tw-bg-opacity: 1 !important;background-color:rgb(148 163 184 / var(--tw-bg-opacity, 1))!important}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity: 1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-indigo-600{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-red-50\/50{background-color:#fef2f280}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-slate-100{--tw-bg-opacity: 1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-slate-50\/50{background-color:#f8fafc80}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/80{background-color:#fffc}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-\[9px\]{font-size:9px}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.italic{font-style:italic}.tracking-wide{letter-spacing:.025em}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity: 1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity: 1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ring-4{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-400{--tw-ring-opacity: 1;--tw-ring-color: rgb(96 165 250 / var(--tw-ring-opacity, 1))}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-150{transition-duration:.15s}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*{box-sizing:border-box}.react-flow__attribution a{color:#6b7280!important}.hover\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover\:\!bg-blue-500:hover{--tw-bg-opacity: 1 !important;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))!important}.hover\:bg-blue-200:hover{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-green-200:hover{--tw-bg-opacity: 1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.hover\:bg-green-800:hover{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity, 1))}.hover\:bg-indigo-700:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-200:hover{--tw-bg-opacity: 1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-200:hover{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/50:hover{background-color:#ffffff80}.hover\:bg-yellow-200:hover{--tw-bg-opacity: 1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}.hover\:text-blue-500:hover{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.hover\:text-gray-900:hover{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.hover\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\:ring-indigo-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity, 1))}.active\:cursor-grabbing:active{cursor:grabbing}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.react-flow{direction:ltr;--xy-edge-stroke-default: #b1b1b7;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #555;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(255, 255, 255, .5);--xy-minimap-background-color-default: #fff;--xy-minimap-mask-background-color-default: rgba(240, 240, 240, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #e2e2e2;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: transparent;--xy-background-pattern-dots-color-default: #91919a;--xy-background-pattern-lines-color-default: #eee;--xy-background-pattern-cross-color-default: #e2e2e2;background-color:var(--xy-background-color, var(--xy-background-color-default));--xy-node-color-default: inherit;--xy-node-border-default: 1px solid #1a192b;--xy-node-background-color-default: #fff;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #1a192b;--xy-node-border-radius-default: 3px;--xy-handle-background-color-default: #1a192b;--xy-handle-border-color-default: #fff;--xy-selection-background-color-default: rgba(0, 89, 220, .08);--xy-selection-border-default: 1px dotted rgba(0, 89, 220, .8);--xy-controls-button-background-color-default: #fefefe;--xy-controls-button-background-color-hover-default: #f4f4f4;--xy-controls-button-color-default: inherit;--xy-controls-button-color-hover-default: inherit;--xy-controls-button-border-color-default: #eee;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #ffffff;--xy-edge-label-color-default: inherit;--xy-resize-background-color-default: #3367d9}.react-flow.dark{--xy-edge-stroke-default: #3e3e3e;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #727272;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(150, 150, 150, .25);--xy-minimap-background-color-default: #141414;--xy-minimap-mask-background-color-default: rgba(60, 60, 60, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #2b2b2b;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: #141414;--xy-background-pattern-dots-color-default: #777;--xy-background-pattern-lines-color-default: #777;--xy-background-pattern-cross-color-default: #777;--xy-node-color-default: #f8f8f8;--xy-node-border-default: 1px solid #3c3c3c;--xy-node-background-color-default: #1e1e1e;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #999;--xy-handle-background-color-default: #bebebe;--xy-handle-border-color-default: #1e1e1e;--xy-selection-background-color-default: rgba(200, 200, 220, .08);--xy-selection-border-default: 1px dotted rgba(200, 200, 220, .8);--xy-controls-button-background-color-default: #2b2b2b;--xy-controls-button-background-color-hover-default: #3e3e3e;--xy-controls-button-color-default: #f8f8f8;--xy-controls-button-color-hover-default: #fff;--xy-controls-button-border-color-default: #5b5b5b;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #141414;--xy-edge-label-color-default: #f8f8f8}.react-flow__background{background-color:var(--xy-background-color-props, var(--xy-background-color, var(--xy-background-color-default)));pointer-events:none;z-index:-1}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1}.react-flow__pane.draggable{cursor:grab}.react-flow__pane.dragging{cursor:grabbing}.react-flow__pane.selection{cursor:pointer}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow__edge-path{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));fill:none}.react-flow__connection-path{stroke:var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));fill:none}.react-flow .react-flow__edges{position:absolute}.react-flow .react-flow__edges svg{overflow:visible;position:absolute;pointer-events:none}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.selectable{cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge.selectable:focus .react-flow__edge-path,.react-flow__edge.selectable:focus-visible .react-flow__edge-path{stroke:var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default))}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__arrowhead polyline{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default))}.react-flow__arrowhead polyline.arrowclosed{fill:var(--xy-edge-stroke, var(--xy-edge-stroke-default))}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.react-flow__connectionline{z-index:1001;overflow:visible;position:absolute}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:default}.react-flow__node.selectable{cursor:pointer}.react-flow__node.draggable{cursor:grab;pointer-events:all}.react-flow__node.draggable.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background-color:var(--xy-handle-background-color, var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));border-radius:100%}.react-flow__handle.connectingfrom{pointer-events:all}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:0;transform:translate(-50%,50%)}.react-flow__handle-top{top:0;left:50%;transform:translate(-50%,-50%)}.react-flow__handle-left{top:50%;left:0;transform:translate(-50%,-50%)}.react-flow__handle-right{top:50%;right:0;transform:translate(50%,-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__pane.selection .react-flow__panel{pointer-events:none}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.top.center,.react-flow__panel.bottom.center{left:50%;transform:translate(-15px) translate(-50%)}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.left.center,.react-flow__panel.right.center{top:50%;transform:translateY(-15px) translateY(-50%)}.react-flow__attribution{font-size:10px;background:var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;left:0;top:0}.react-flow__viewport-portal{position:absolute;width:100%;height:100%;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__minimap{background:var( --xy-minimap-background-color-props, var(--xy-minimap-background-color, var(--xy-minimap-background-color-default)) )}.react-flow__minimap-svg{display:block}.react-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props, var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props, var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props, var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default)) )}.react-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props, var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props, var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props, var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default)) )}.react-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default)) )}.react-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default)) )}.react-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default)) )}.react-flow__controls{display:flex;flex-direction:column;box-shadow:var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default))}.react-flow__controls.horizontal{flex-direction:row}.react-flow__controls-button{display:flex;justify-content:center;align-items:center;height:26px;width:26px;padding:4px;border:none;background:var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));border-bottom:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)) );cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px;fill:currentColor}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-input,.react-flow__node-default,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:var(--xy-node-border-radius, var(--xy-node-border-radius-default));width:150px;font-size:12px;color:var(--xy-node-color, var(--xy-node-color-default));text-align:center;border:var(--xy-node-border, var(--xy-node-border-default));background-color:var(--xy-node-background-color, var(--xy-node-background-color-default))}.react-flow__node-input.selectable:hover,.react-flow__node-default.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default))}.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default))}.react-flow__node-group{background-color:var(--xy-node-group-background-color, var(--xy-node-group-background-color-default))}.react-flow__nodesselection-rect,.react-flow__selection{background:var(--xy-selection-background-color, var(--xy-selection-background-color-default));border:var(--xy-selection-border, var(--xy-selection-border-default))}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props, var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props, var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default)) )}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__controls-button:last-child{border-bottom:none}.react-flow__controls.horizontal .react-flow__controls-button{border-bottom:none;border-right:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) )}.react-flow__controls.horizontal .react-flow__controls-button:last-child{border-right:none}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:5px;height:5px;border:1px solid #fff;border-radius:1px;background-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));translate:-50% -50%}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.react-flow__edge-textbg{fill:var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default))}.react-flow__edge-text{fill:var(--xy-edge-label-color, var(--xy-edge-label-color-default))}
</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
