<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23646cff' d='M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z'/%3E%3C/svg%3E" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>C4 Navigator - Interactive C4 Diagramming Tool</title>
    <script type="module">(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ov(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bf={exports:{}},Hs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function lS(){if(Ey)return Hs;Ey=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(a,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:e,type:a,key:u,ref:o!==void 0?o:null,props:c}}return Hs.Fragment=n,Hs.jsx=i,Hs.jsxs=i,Hs}var Ty;function cS(){return Ty||(Ty=1,bf.exports=lS()),bf.exports}var S=cS(),wf={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function uS(){if(Cy)return Ee;Cy=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),y=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,T={};function C(O,M,Q){this.props=O,this.context=M,this.refs=T,this.updater=Q||E}C.prototype.isReactComponent={},C.prototype.setState=function(O,M){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,M,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function k(){}k.prototype=C.prototype;function x(O,M,Q){this.props=O,this.context=M,this.refs=T,this.updater=Q||E}var A=x.prototype=new k;A.constructor=x,_(A,C.prototype),A.isPureReactComponent=!0;var L=Array.isArray;function j(){}var U={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function Z(O,M,Q){var X=Q.ref;return{$$typeof:e,type:O,key:M,ref:X!==void 0?X:null,props:Q}}function oe(O,M){return Z(O.type,M,O.props)}function ee(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function te(O){var M={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Q){return M[Q]})}var G=/\/+/g;function D(O,M){return typeof O=="object"&&O!==null&&O.key!=null?te(""+O.key):M.toString(36)}function P(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(j,j):(O.status="pending",O.then(function(M){O.status==="pending"&&(O.status="fulfilled",O.value=M)},function(M){O.status==="pending"&&(O.status="rejected",O.reason=M)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function R(O,M,Q,X,se){var ue=typeof O;(ue==="undefined"||ue==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(ue){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case e:case n:ce=!0;break;case p:return ce=O._init,R(ce(O._payload),M,Q,X,se)}}if(ce)return se=se(O),ce=X===""?"."+D(O,0):X,L(se)?(Q="",ce!=null&&(Q=ce.replace(G,"$&/")+"/"),R(se,M,Q,"",function(Te){return Te})):se!=null&&(ee(se)&&(se=oe(se,Q+(se.key==null||O&&O.key===se.key?"":(""+se.key).replace(G,"$&/")+"/")+ce)),M.push(se)),1;ce=0;var le=X===""?".":X+":";if(L(O))for(var de=0;de<O.length;de++)X=O[de],ue=le+D(X,de),ce+=R(X,M,Q,ue,se);else if(de=b(O),typeof de=="function")for(O=de.call(O),de=0;!(X=O.next()).done;)X=X.value,ue=le+D(X,de++),ce+=R(X,M,Q,ue,se);else if(ue==="object"){if(typeof O.then=="function")return R(P(O),M,Q,X,se);throw M=String(O),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return ce}function $(O,M,Q){if(O==null)return O;var X=[],se=0;return R(O,X,"","",function(ue){return M.call(Q,ue,se++)}),X}function B(O){if(O._status===-1){var M=O._result;M=M(),M.then(function(Q){(O._status===0||O._status===-1)&&(O._status=1,O._result=Q)},function(Q){(O._status===0||O._status===-1)&&(O._status=2,O._result=Q)}),O._status===-1&&(O._status=0,O._result=M)}if(O._status===1)return O._result.default;throw O._result}var K=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},z={map:$,forEach:function(O,M,Q){$(O,function(){M.apply(this,arguments)},Q)},count:function(O){var M=0;return $(O,function(){M++}),M},toArray:function(O){return $(O,function(M){return M})||[]},only:function(O){if(!ee(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ee.Activity=v,Ee.Children=z,Ee.Component=C,Ee.Fragment=i,Ee.Profiler=o,Ee.PureComponent=x,Ee.StrictMode=a,Ee.Suspense=g,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(O){return U.H.useMemoCache(O)}},Ee.cache=function(O){return function(){return O.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(O,M,Q){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var X=_({},O.props),se=O.key;if(M!=null)for(ue in M.key!==void 0&&(se=""+M.key),M)!V.call(M,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&M.ref===void 0||(X[ue]=M[ue]);var ue=arguments.length-2;if(ue===1)X.children=Q;else if(1<ue){for(var ce=Array(ue),le=0;le<ue;le++)ce[le]=arguments[le+2];X.children=ce}return Z(O.type,se,X)},Ee.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Ee.createElement=function(O,M,Q){var X,se={},ue=null;if(M!=null)for(X in M.key!==void 0&&(ue=""+M.key),M)V.call(M,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(se[X]=M[X]);var ce=arguments.length-2;if(ce===1)se.children=Q;else if(1<ce){for(var le=Array(ce),de=0;de<ce;de++)le[de]=arguments[de+2];se.children=le}if(O&&O.defaultProps)for(X in ce=O.defaultProps,ce)se[X]===void 0&&(se[X]=ce[X]);return Z(O,ue,se)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(O){return{$$typeof:d,render:O}},Ee.isValidElement=ee,Ee.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:B}},Ee.memo=function(O,M){return{$$typeof:h,type:O,compare:M===void 0?null:M}},Ee.startTransition=function(O){var M=U.T,Q={};U.T=Q;try{var X=O(),se=U.S;se!==null&&se(Q,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(j,K)}catch(ue){K(ue)}finally{M!==null&&Q.types!==null&&(M.types=Q.types),U.T=M}},Ee.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ee.use=function(O){return U.H.use(O)},Ee.useActionState=function(O,M,Q){return U.H.useActionState(O,M,Q)},Ee.useCallback=function(O,M){return U.H.useCallback(O,M)},Ee.useContext=function(O){return U.H.useContext(O)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(O,M){return U.H.useDeferredValue(O,M)},Ee.useEffect=function(O,M){return U.H.useEffect(O,M)},Ee.useEffectEvent=function(O){return U.H.useEffectEvent(O)},Ee.useId=function(){return U.H.useId()},Ee.useImperativeHandle=function(O,M,Q){return U.H.useImperativeHandle(O,M,Q)},Ee.useInsertionEffect=function(O,M){return U.H.useInsertionEffect(O,M)},Ee.useLayoutEffect=function(O,M){return U.H.useLayoutEffect(O,M)},Ee.useMemo=function(O,M){return U.H.useMemo(O,M)},Ee.useOptimistic=function(O,M){return U.H.useOptimistic(O,M)},Ee.useReducer=function(O,M,Q){return U.H.useReducer(O,M,Q)},Ee.useRef=function(O){return U.H.useRef(O)},Ee.useState=function(O){return U.H.useState(O)},Ee.useSyncExternalStore=function(O,M,Q){return U.H.useSyncExternalStore(O,M,Q)},Ee.useTransition=function(){return U.H.useTransition()},Ee.version="19.2.0",Ee}var Ay;function po(){return Ay||(Ay=1,wf.exports=uS()),wf.exports}var q=po();const Rv=Ov(q);var xf={exports:{}},Bs={},_f={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function dS(){return Ny||(Ny=1,(function(e){function n(R,$){var B=R.length;R.push($);e:for(;0<B;){var K=B-1>>>1,z=R[K];if(0<o(z,$))R[K]=$,R[B]=z,B=K;else break e}}function i(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var $=R[0],B=R.pop();if(B!==$){R[0]=B;e:for(var K=0,z=R.length,O=z>>>1;K<O;){var M=2*(K+1)-1,Q=R[M],X=M+1,se=R[X];if(0>o(Q,B))X<z&&0>o(se,Q)?(R[K]=se,R[X]=B,K=X):(R[K]=Q,R[M]=B,K=M);else if(X<z&&0>o(se,B))R[K]=se,R[X]=B,K=X;else break e}}return $}function o(R,$){var B=R.sortIndex-$.sortIndex;return B!==0?B:R.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var g=[],h=[],p=1,v=null,y=3,b=!1,E=!1,_=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function A(R){for(var $=i(h);$!==null;){if($.callback===null)a(h);else if($.startTime<=R)a(h),$.sortIndex=$.expirationTime,n(g,$);else break;$=i(h)}}function L(R){if(_=!1,A(R),!E)if(i(g)!==null)E=!0,j||(j=!0,te());else{var $=i(h);$!==null&&P(L,$.startTime-R)}}var j=!1,U=-1,V=5,Z=-1;function oe(){return T?!0:!(e.unstable_now()-Z<V)}function ee(){if(T=!1,j){var R=e.unstable_now();Z=R;var $=!0;try{e:{E=!1,_&&(_=!1,k(U),U=-1),b=!0;var B=y;try{t:{for(A(R),v=i(g);v!==null&&!(v.expirationTime>R&&oe());){var K=v.callback;if(typeof K=="function"){v.callback=null,y=v.priorityLevel;var z=K(v.expirationTime<=R);if(R=e.unstable_now(),typeof z=="function"){v.callback=z,A(R),$=!0;break t}v===i(g)&&a(g),A(R)}else a(g);v=i(g)}if(v!==null)$=!0;else{var O=i(h);O!==null&&P(L,O.startTime-R),$=!1}}break e}finally{v=null,y=B,b=!1}$=void 0}}finally{$?te():j=!1}}}var te;if(typeof x=="function")te=function(){x(ee)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,D=G.port2;G.port1.onmessage=ee,te=function(){D.postMessage(null)}}else te=function(){C(ee,0)};function P(R,$){U=C(function(){R(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(R){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var B=y;y=$;try{return R()}finally{y=B}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(R,$){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=y;y=R;try{return $()}finally{y=B}},e.unstable_scheduleCallback=function(R,$,B){var K=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,R){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=B+z,R={id:p++,callback:$,priorityLevel:R,startTime:B,expirationTime:z,sortIndex:-1},B>K?(R.sortIndex=B,n(h,R),i(g)===null&&R===i(h)&&(_?(k(U),U=-1):_=!0,P(L,B-K))):(R.sortIndex=z,n(g,R),E||b||(E=!0,j||(j=!0,te()))),R},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(R){var $=y;return function(){var B=y;y=$;try{return R.apply(this,arguments)}finally{y=B}}}})(Sf)),Sf}var Oy;function fS(){return Oy||(Oy=1,_f.exports=dS()),_f.exports}var Ef={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function hS(){if(Ry)return Ct;Ry=1;var e=po();function n(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:h,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ct.createPortal=function(g,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(n(299));return c(g,h,null,p)},Ct.flushSync=function(g){var h=u.T,p=a.p;try{if(u.T=null,a.p=2,g)return g()}finally{u.T=h,a.p=p,a.d.f()}},Ct.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(g,h))},Ct.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Ct.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?a.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:b}):p==="script"&&a.d.X(g,{crossOrigin:v,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ct.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);a.d.M(g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(g)},Ct.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin);a.d.L(g,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ct.preloadModule=function(g,h){if(typeof g=="string")if(h){var p=d(h.as,h.crossOrigin);a.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(g)},Ct.requestFormReset=function(g){a.d.r(g)},Ct.unstable_batchedUpdates=function(g,h){return g(h)},Ct.useFormState=function(g,h,p){return u.H.useFormState(g,h,p)},Ct.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ct.version="19.2.0",Ct}var ky;function kv(){if(ky)return Ef.exports;ky=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Ef.exports=hS(),Ef.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function gS(){if(My)return Bs;My=1;var e=fS(),n=po(),i=kv();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function u(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function d(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(a(188))}function h(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(a(188));return r!==t?null:t}for(var s=t,l=r;;){var f=s.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===s)return g(f),t;if(m===l)return g(f),r;m=m.sibling}throw Error(a(188))}if(s.return!==l.return)s=f,l=m;else{for(var w=!1,N=f.child;N;){if(N===s){w=!0,s=f,l=m;break}if(N===l){w=!0,l=f,s=m;break}N=N.sibling}if(!w){for(N=m.child;N;){if(N===s){w=!0,s=m,l=f;break}if(N===l){w=!0,l=m,s=f;break}N=N.sibling}if(!w)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:r}function p(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=p(t),r!==null)return r;t=t.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),x=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function te(t){return t===null||typeof t!="object"?null:(t=ee&&t[ee]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function D(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case C:return"Profiler";case T:return"StrictMode";case L:return"Suspense";case j:return"SuspenseList";case Z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case x:return t.displayName||"Context";case k:return(t._context.displayName||"Context")+".Consumer";case A:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return r=t.displayName||null,r!==null?r:D(t.type)||"Memo";case V:r=t._payload,t=t._init;try{return D(t(r))}catch{}}return null}var P=Array.isArray,R=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},K=[],z=-1;function O(t){return{current:t}}function M(t){0>z||(t.current=K[z],K[z]=null,z--)}function Q(t,r){z++,K[z]=t.current,t.current=r}var X=O(null),se=O(null),ue=O(null),ce=O(null);function le(t,r){switch(Q(ue,r),Q(se,t),Q(X,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Xp(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Xp(r),t=Kp(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}M(X),Q(X,t)}function de(){M(X),M(se),M(ue)}function Te(t){t.memoizedState!==null&&Q(ce,t);var r=X.current,s=Kp(r,t.type);r!==s&&(Q(se,t),Q(X,s))}function Se(t){se.current===t&&(M(X),M(se)),ce.current===t&&(M(ce),zs._currentValue=B)}var pe,_e;function Ce(t){if(pe===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);pe=r&&r[1]||"",_e=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+t+_e}var Ie=!1;function Ge(t,r){if(!t||Ie)return"";Ie=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ne){var W=ne}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(ne){W=ne}t.call(ae.prototype)}}else{try{throw Error()}catch(ne){W=ne}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ne){if(ne&&W&&typeof ne.stack=="string")return[ne.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),w=m[0],N=m[1];if(w&&N){var H=w.split(`
`),F=N.split(`
`);for(f=l=0;l<H.length&&!H[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===H.length||f===F.length)for(l=H.length-1,f=F.length-1;1<=l&&0<=f&&H[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(H[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||H[l]!==F[f]){var re=`
`+H[l].replace(" at new "," at ");return t.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",t.displayName)),re}while(1<=l&&0<=f);break}}}finally{Ie=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Ce(s):""}function mt(t,r){switch(t.tag){case 26:case 27:case 5:return Ce(t.type);case 16:return Ce("Lazy");case 13:return t.child!==r&&r!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Ge(t.type,!1);case 11:return Ge(t.type.render,!1);case 1:return Ge(t.type,!0);case 31:return Ce("Activity");default:return""}}function Ft(t){try{var r="",s=null;do r+=mt(t,s),s=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ln=Object.prototype.hasOwnProperty,ir=e.unstable_scheduleCallback,ar=e.unstable_cancelCallback,qr=e.unstable_shouldYield,Vr=e.unstable_requestPaint,yt=e.unstable_now,Ai=e.unstable_getCurrentPriorityLevel,kn=e.unstable_ImmediatePriority,sr=e.unstable_UserBlockingPriority,Pr=e.unstable_NormalPriority,tu=e.unstable_LowPriority,Ni=e.unstable_IdlePriority,nu=e.log,ru=e.unstable_setDisableYieldValue,Gr=null,At=null;function xn(t){if(typeof nu=="function"&&ru(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Gr,t)}catch{}}var Nt=Math.clz32?Math.clz32:su,iu=Math.log,au=Math.LN2;function su(t){return t>>>=0,t===0?32:31-(iu(t)/au|0)|0}var Oi=256,Ri=262144,ki=4194304;function Mn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Mi(t,r,s){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var N=l&134217727;return N!==0?(l=N&~m,l!==0?f=Mn(l):(w&=N,w!==0?f=Mn(w):s||(s=N&~t,s!==0&&(f=Mn(s))))):(N=l&~m,N!==0?f=Mn(N):w!==0?f=Mn(w):s||(s=l&~t,s!==0&&(f=Mn(s)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,s=r&-r,m>=s||m===32&&(s&4194048)!==0)?r:f}function Yr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ou(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function To(){var t=ki;return ki<<=1,(ki&62914560)===0&&(ki=4194304),t}function Ya(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function Xr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function lu(t,r,s,l,f,m){var w=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var N=t.entanglements,H=t.expirationTimes,F=t.hiddenUpdates;for(s=w&~s;0<s;){var re=31-Nt(s),ae=1<<re;N[re]=0,H[re]=-1;var W=F[re];if(W!==null)for(F[re]=null,re=0;re<W.length;re++){var ne=W[re];ne!==null&&(ne.lane&=-536870913)}s&=~ae}l!==0&&Co(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(w&~r))}function Co(t,r,s){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Nt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function Ao(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var l=31-Nt(s),f=1<<l;f&r|t[l]&r&&(t[l]|=r),s&=~f}}function No(t,r){var s=r&-r;return s=(s&42)!==0?1:Xa(s),(s&(t.suspendedLanes|r))!==0?0:s}function Xa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ka(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oo(){var t=$.p;return t!==0?t:(t=window.event,t===void 0?32:yy(t.type))}function Ro(t,r){var s=$.p;try{return $.p=t,r()}finally{$.p=s}}var _n=Math.random().toString(36).slice(2),dt="__reactFiber$"+_n,Et="__reactProps$"+_n,jn="__reactContainer$"+_n,ji="__reactEvents$"+_n,ko="__reactListeners$"+_n,cu="__reactHandles$"+_n,Mo="__reactResources$"+_n,Kr="__reactMarker$"+_n;function Za(t){delete t[dt],delete t[Et],delete t[ji],delete t[ko],delete t[cu]}function or(t){var r=t[dt];if(r)return r;for(var s=t.parentNode;s;){if(r=s[jn]||s[dt]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=ty(t);t!==null;){if(s=t[dt])return s;t=ty(t)}return r}t=s,s=t.parentNode}return null}function lr(t){if(t=t[dt]||t[jn]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function cr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function ur(t){var r=t[Mo];return r||(r=t[Mo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function it(t){t[Kr]=!0}var jo=new Set,Do={};function Dn(t,r){dr(t,r),dr(t+"Capture",r)}function dr(t,r){for(Do[t]=r,t=0;t<r.length;t++)jo.add(r[t])}var uu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qa={},zo={};function du(t){return ln.call(zo,t)?!0:ln.call(Qa,t)?!1:uu.test(t)?zo[t]=!0:(Qa[t]=!0,!1)}function Di(t,r,s){if(du(r))if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+s)}}function zi(t,r,s){if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+s)}}function cn(t,r,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(r,s,""+l)}}function Rt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function fu(t,r,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(w){s=""+w,m.call(this,w)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(w){s=""+w},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ui(t){if(!t._valueTracker){var r=Uo(t)?"checked":"value";t._valueTracker=fu(t,r,""+t[r])}}function $o(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),l="";return t&&(l=Uo(t)?t.checked?"true":"false":t.value),t=l,t!==s?(r.setValue(t),!0):!1}function $i(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hu=/[\n"\\]/g;function Tt(t){return t.replace(hu,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ja(t,r,s,l,f,m,w,N){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),r!=null?w==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Rt(r)):t.value!==""+Rt(r)&&(t.value=""+Rt(r)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),r!=null?Li(t,w,Rt(r)):s!=null?Li(t,w,Rt(s)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+Rt(N):t.removeAttribute("name")}function Lo(t,r,s,l,f,m,w,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ui(t);return}s=s!=null?""+Rt(s):"",r=r!=null?""+Rt(r):s,N||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=N?t.checked:!!l,t.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w),Ui(t)}function Li(t,r,s){r==="number"&&$i(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Hi(t,r,s,l){if(t=t.options,r){r={};for(var f=0;f<s.length;f++)r["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=r.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Rt(s),r=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function qh(t,r,s){if(r!=null&&(r=""+Rt(r),r!==t.value&&(t.value=r),s==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=s!=null?""+Rt(s):""}function Vh(t,r,s,l){if(r==null){if(l!=null){if(s!=null)throw Error(a(92));if(P(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),r=s}s=Rt(r),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),Ui(t)}function Bi(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var rx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ph(t,r,s){var l=r.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,s):typeof s!="number"||s===0||rx.has(r)?r==="float"?t.cssFloat=s:t[r]=(""+s).trim():t[r]=s+"px"}function Gh(t,r,s){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&s[f]!==l&&Ph(t,f,l)}else for(var m in r)r.hasOwnProperty(m)&&Ph(t,m,r[m])}function gu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ix=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ax=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(t){return ax.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function zn(){}var mu=null;function pu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ii=null,qi=null;function Yh(t){var r=lr(t);if(r&&(t=r.stateNode)){var s=t[Et]||null;e:switch(t=r.stateNode,r.type){case"input":if(Ja(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Tt(""+r)+'"][type="radio"]'),r=0;r<s.length;r++){var l=s[r];if(l!==t&&l.form===t.form){var f=l[Et]||null;if(!f)throw Error(a(90));Ja(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<s.length;r++)l=s[r],l.form===t.form&&$o(l)}break e;case"textarea":qh(t,s.value,s.defaultValue);break e;case"select":r=s.value,r!=null&&Hi(t,!!s.multiple,r,!1)}}}var yu=!1;function Xh(t,r,s){if(yu)return t(r,s);yu=!0;try{var l=t(r);return l}finally{if(yu=!1,(Ii!==null||qi!==null)&&(Cl(),Ii&&(r=Ii,t=qi,qi=Ii=null,Yh(r),t)))for(r=0;r<t.length;r++)Yh(t[r])}}function Fa(t,r){var s=t.stateNode;if(s===null)return null;var l=s[Et]||null;if(l===null)return null;s=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,r,typeof s));return s}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=!1;if(Un)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){vu=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{vu=!1}var fr=null,bu=null,Bo=null;function Kh(){if(Bo)return Bo;var t,r=bu,s=r.length,l,f="value"in fr?fr.value:fr.textContent,m=f.length;for(t=0;t<s&&r[t]===f[t];t++);var w=s-t;for(l=1;l<=w&&r[s-l]===f[m-l];l++);return Bo=f.slice(t,1<l?1-l:void 0)}function Io(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function qo(){return!0}function Zh(){return!1}function kt(t){function r(s,l,f,m,w){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(s=t[N],this[N]=s?s(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?qo:Zh,this.isPropagationStopped=Zh,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),r}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vo=kt(Zr),es=v({},Zr,{view:0,detail:0}),sx=kt(es),wu,xu,ts,Po=v({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ts&&(ts&&t.type==="mousemove"?(wu=t.screenX-ts.screenX,xu=t.screenY-ts.screenY):xu=wu=0,ts=t),wu)},movementY:function(t){return"movementY"in t?t.movementY:xu}}),Qh=kt(Po),ox=v({},Po,{dataTransfer:0}),lx=kt(ox),cx=v({},es,{relatedTarget:0}),_u=kt(cx),ux=v({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),dx=kt(ux),fx=v({},Zr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hx=kt(fx),gx=v({},Zr,{data:0}),Jh=kt(gx),mx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},px={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vx(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=yx[t])?!!r[t]:!1}function Su(){return vx}var bx=v({},es,{key:function(t){if(t.key){var r=mx[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Io(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?px[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(t){return t.type==="keypress"?Io(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Io(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wx=kt(bx),xx=v({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fh=kt(xx),_x=v({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),Sx=kt(_x),Ex=v({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tx=kt(Ex),Cx=v({},Po,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ax=kt(Cx),Nx=v({},Zr,{newState:0,oldState:0}),Ox=kt(Nx),Rx=[9,13,27,32],Eu=Un&&"CompositionEvent"in window,ns=null;Un&&"documentMode"in document&&(ns=document.documentMode);var kx=Un&&"TextEvent"in window&&!ns,Wh=Un&&(!Eu||ns&&8<ns&&11>=ns),eg=" ",tg=!1;function ng(t,r){switch(t){case"keyup":return Rx.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vi=!1;function Mx(t,r){switch(t){case"compositionend":return rg(r);case"keypress":return r.which!==32?null:(tg=!0,eg);case"textInput":return t=r.data,t===eg&&tg?null:t;default:return null}}function jx(t,r){if(Vi)return t==="compositionend"||!Eu&&ng(t,r)?(t=Kh(),Bo=bu=fr=null,Vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Wh&&r.locale!=="ko"?null:r.data;default:return null}}var Dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Dx[t.type]:r==="textarea"}function ag(t,r,s,l){Ii?qi?qi.push(l):qi=[l]:Ii=l,r=jl(r,"onChange"),0<r.length&&(s=new Vo("onChange","change",null,s,l),t.push({event:s,listeners:r}))}var rs=null,is=null;function zx(t){Ip(t,0)}function Go(t){var r=cr(t);if($o(r))return t}function sg(t,r){if(t==="change")return r}var og=!1;if(Un){var Tu;if(Un){var Cu="oninput"in document;if(!Cu){var lg=document.createElement("div");lg.setAttribute("oninput","return;"),Cu=typeof lg.oninput=="function"}Tu=Cu}else Tu=!1;og=Tu&&(!document.documentMode||9<document.documentMode)}function cg(){rs&&(rs.detachEvent("onpropertychange",ug),is=rs=null)}function ug(t){if(t.propertyName==="value"&&Go(is)){var r=[];ag(r,is,t,pu(t)),Xh(zx,r)}}function Ux(t,r,s){t==="focusin"?(cg(),rs=r,is=s,rs.attachEvent("onpropertychange",ug)):t==="focusout"&&cg()}function $x(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Go(is)}function Lx(t,r){if(t==="click")return Go(r)}function Hx(t,r){if(t==="input"||t==="change")return Go(r)}function Bx(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Bt=typeof Object.is=="function"?Object.is:Bx;function as(t,r){if(Bt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),l=Object.keys(r);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!ln.call(r,f)||!Bt(t[f],r[f]))return!1}return!0}function dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fg(t,r){var s=dg(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=r&&l>=r)return{node:s,offset:r-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=dg(s)}}function hg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?hg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function gg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=$i(t.document);r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=$i(t.document)}return r}function Au(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Ix=Un&&"documentMode"in document&&11>=document.documentMode,Pi=null,Nu=null,ss=null,Ou=!1;function mg(t,r,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ou||Pi==null||Pi!==$i(l)||(l=Pi,"selectionStart"in l&&Au(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ss&&as(ss,l)||(ss=l,l=jl(Nu,"onSelect"),0<l.length&&(r=new Vo("onSelect","select",null,r,s),t.push({event:r,listeners:l}),r.target=Pi)))}function Qr(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Gi={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionrun:Qr("Transition","TransitionRun"),transitionstart:Qr("Transition","TransitionStart"),transitioncancel:Qr("Transition","TransitionCancel"),transitionend:Qr("Transition","TransitionEnd")},Ru={},pg={};Un&&(pg=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function Jr(t){if(Ru[t])return Ru[t];if(!Gi[t])return t;var r=Gi[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in pg)return Ru[t]=r[s];return t}var yg=Jr("animationend"),vg=Jr("animationiteration"),bg=Jr("animationstart"),qx=Jr("transitionrun"),Vx=Jr("transitionstart"),Px=Jr("transitioncancel"),wg=Jr("transitionend"),xg=new Map,ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ku.push("scrollEnd");function un(t,r){xg.set(t,r),Dn(r,[t])}var Yo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Wt=[],Yi=0,Mu=0;function Xo(){for(var t=Yi,r=Mu=Yi=0;r<t;){var s=Wt[r];Wt[r++]=null;var l=Wt[r];Wt[r++]=null;var f=Wt[r];Wt[r++]=null;var m=Wt[r];if(Wt[r++]=null,l!==null&&f!==null){var w=l.pending;w===null?f.next=f:(f.next=w.next,w.next=f),l.pending=f}m!==0&&_g(s,f,m)}}function Ko(t,r,s,l){Wt[Yi++]=t,Wt[Yi++]=r,Wt[Yi++]=s,Wt[Yi++]=l,Mu|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function ju(t,r,s,l){return Ko(t,r,s,l),Zo(t)}function Fr(t,r){return Ko(t,null,null,r),Zo(t)}function _g(t,r,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var f=!1,m=t.return;m!==null;)m.childLanes|=s,l=m.alternate,l!==null&&(l.childLanes|=s),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Nt(s),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=s|536870912),m):null}function Zo(t){if(50<Ns)throw Ns=0,qd=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Xi={};function Gx(t,r,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,r,s,l){return new Gx(t,r,s,l)}function Du(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $n(t,r){var s=t.alternate;return s===null?(s=It(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Sg(t,r){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,r=s.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Qo(t,r,s,l,f,m){var w=0;if(l=t,typeof t=="function")Du(t)&&(w=1);else if(typeof t=="string")w=Q_(t,s,X.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Z:return t=It(31,s,r,f),t.elementType=Z,t.lanes=m,t;case _:return Wr(s.children,f,m,r);case T:w=8,f|=24;break;case C:return t=It(12,s,r,f|2),t.elementType=C,t.lanes=m,t;case L:return t=It(13,s,r,f),t.elementType=L,t.lanes=m,t;case j:return t=It(19,s,r,f),t.elementType=j,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x:w=10;break e;case k:w=9;break e;case A:w=11;break e;case U:w=14;break e;case V:w=16,l=null;break e}w=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return r=It(w,s,r,f),r.elementType=t,r.type=l,r.lanes=m,r}function Wr(t,r,s,l){return t=It(7,t,l,r),t.lanes=s,t}function zu(t,r,s){return t=It(6,t,null,r),t.lanes=s,t}function Eg(t){var r=It(18,null,null,0);return r.stateNode=t,r}function Uu(t,r,s){return r=It(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Tg=new WeakMap;function en(t,r){if(typeof t=="object"&&t!==null){var s=Tg.get(t);return s!==void 0?s:(r={value:t,source:r,stack:Ft(r)},Tg.set(t,r),r)}return{value:t,source:r,stack:Ft(r)}}var Ki=[],Zi=0,Jo=null,os=0,tn=[],nn=0,hr=null,Sn=1,En="";function Ln(t,r){Ki[Zi++]=os,Ki[Zi++]=Jo,Jo=t,os=r}function Cg(t,r,s){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hr,hr=t;var l=Sn;t=En;var f=32-Nt(l)-1;l&=~(1<<f),s+=1;var m=32-Nt(r)+f;if(30<m){var w=f-f%5;m=(l&(1<<w)-1).toString(32),l>>=w,f-=w,Sn=1<<32-Nt(r)+f|s<<f|l,En=m+t}else Sn=1<<m|s<<f|l,En=t}function $u(t){t.return!==null&&(Ln(t,1),Cg(t,1,0))}function Lu(t){for(;t===Jo;)Jo=Ki[--Zi],Ki[Zi]=null,os=Ki[--Zi],Ki[Zi]=null;for(;t===hr;)hr=tn[--nn],tn[nn]=null,En=tn[--nn],tn[nn]=null,Sn=tn[--nn],tn[nn]=null}function Ag(t,r){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hr,Sn=r.id,En=r.overflow,hr=t}var vt=null,Ke=null,je=!1,gr=null,rn=!1,Hu=Error(a(519));function mr(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ls(en(r,t)),Hu}function Ng(t){var r=t.stateNode,s=t.type,l=t.memoizedProps;switch(r[dt]=t,r[Et]=l,s){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Rs.length;s++)Re(Rs[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Re("invalid",r),Lo(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Re("invalid",r);break;case"textarea":Re("invalid",r),Vh(r,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||r.textContent===""+s||l.suppressHydrationWarning===!0||Gp(r.textContent,s)?(l.popover!=null&&(Re("beforetoggle",r),Re("toggle",r)),l.onScroll!=null&&Re("scroll",r),l.onScrollEnd!=null&&Re("scrollend",r),l.onClick!=null&&(r.onclick=zn),r=!0):r=!1,r||mr(t,!0)}function Og(t){for(vt=t.return;vt;)switch(vt.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:vt=vt.return}}function Qi(t){if(t!==vt)return!1;if(!je)return Og(t),je=!0,!1;var r=t.tag,s;if((s=r!==3&&r!==27)&&((s=r===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||rf(t.type,t.memoizedProps)),s=!s),s&&Ke&&mr(t),Og(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ke=ey(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ke=ey(t)}else r===27?(r=Ke,Or(t.type)?(t=cf,cf=null,Ke=t):Ke=r):Ke=vt?sn(t.stateNode.nextSibling):null;return!0}function ei(){Ke=vt=null,je=!1}function Bu(){var t=gr;return t!==null&&(zt===null?zt=t:zt.push.apply(zt,t),gr=null),t}function ls(t){gr===null?gr=[t]:gr.push(t)}var Iu=O(null),ti=null,Hn=null;function pr(t,r,s){Q(Iu,r._currentValue),r._currentValue=s}function Bn(t){t._currentValue=Iu.current,M(Iu)}function qu(t,r,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===s)break;t=t.return}}function Vu(t,r,s,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var w=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var H=0;H<r.length;H++)if(N.context===r[H]){m.lanes|=s,N=m.alternate,N!==null&&(N.lanes|=s),qu(m.return,s,t),l||(w=null);break e}m=N.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(a(341));w.lanes|=s,m=w.alternate,m!==null&&(m.lanes|=s),qu(w,s,t),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===t){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Ji(t,r,s,l){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(a(387));if(w=w.memoizedProps,w!==null){var N=f.type;Bt(f.pendingProps.value,w.value)||(t!==null?t.push(N):t=[N])}}else if(f===ce.current){if(w=f.alternate,w===null)throw Error(a(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(zs):t=[zs])}f=f.return}t!==null&&Vu(r,t,s,l),r.flags|=262144}function Fo(t){for(t=t.firstContext;t!==null;){if(!Bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ni(t){ti=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return Rg(ti,t)}function Wo(t,r){return ti===null&&ni(t),Rg(t,r)}function Rg(t,r){var s=r._currentValue;if(r={context:r,memoizedValue:s,next:null},Hn===null){if(t===null)throw Error(a(308));Hn=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Hn=Hn.next=r;return s}var Yx=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(s){return s()})}},Xx=e.unstable_scheduleCallback,Kx=e.unstable_NormalPriority,at={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new Yx,data:new Map,refCount:0}}function cs(t){t.refCount--,t.refCount===0&&Xx(Kx,function(){t.controller.abort()})}var us=null,Gu=0,Fi=0,Wi=null;function Zx(t,r){if(us===null){var s=us=[];Gu=0,Fi=Kd(),Wi={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Gu++,r.then(kg,kg),r}function kg(){if(--Gu===0&&us!==null){Wi!==null&&(Wi.status="fulfilled");var t=us;us=null,Fi=0,Wi=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Qx(t,r){var s=[],l={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<s.length;f++)(0,s[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),l}var Mg=R.S;R.S=function(t,r){mp=yt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Zx(t,r),Mg!==null&&Mg(t,r)};var ri=O(null);function Yu(){var t=ri.current;return t!==null?t:Ye.pooledCache}function el(t,r){r===null?Q(ri,ri.current):Q(ri,r.pool)}function jg(){var t=Yu();return t===null?null:{parent:at._currentValue,pool:t}}var ea=Error(a(460)),Xu=Error(a(474)),tl=Error(a(542)),nl={then:function(){}};function Dg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zg(t,r,s){switch(s=t[s],s===void 0?t.push(r):s!==r&&(r.then(zn,zn),r=s),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,$g(t),t;default:if(typeof r.status=="string")r.then(zn,zn);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,$g(t),t}throw ai=r,ea}}function ii(t){try{var r=t._init;return r(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ai=s,ea):s}}var ai=null;function Ug(){if(ai===null)throw Error(a(459));var t=ai;return ai=null,t}function $g(t){if(t===ea||t===tl)throw Error(a(483))}var ta=null,ds=0;function rl(t){var r=ds;return ds+=1,ta===null&&(ta=[]),zg(ta,t,r)}function fs(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function il(t,r){throw r.$$typeof===y?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Lg(t){function r(Y,I){if(t){var J=Y.deletions;J===null?(Y.deletions=[I],Y.flags|=16):J.push(I)}}function s(Y,I){if(!t)return null;for(;I!==null;)r(Y,I),I=I.sibling;return null}function l(Y){for(var I=new Map;Y!==null;)Y.key!==null?I.set(Y.key,Y):I.set(Y.index,Y),Y=Y.sibling;return I}function f(Y,I){return Y=$n(Y,I),Y.index=0,Y.sibling=null,Y}function m(Y,I,J){return Y.index=J,t?(J=Y.alternate,J!==null?(J=J.index,J<I?(Y.flags|=67108866,I):J):(Y.flags|=67108866,I)):(Y.flags|=1048576,I)}function w(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function N(Y,I,J,ie){return I===null||I.tag!==6?(I=zu(J,Y.mode,ie),I.return=Y,I):(I=f(I,J),I.return=Y,I)}function H(Y,I,J,ie){var ye=J.type;return ye===_?re(Y,I,J.props.children,ie,J.key):I!==null&&(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===V&&ii(ye)===I.type)?(I=f(I,J.props),fs(I,J),I.return=Y,I):(I=Qo(J.type,J.key,J.props,null,Y.mode,ie),fs(I,J),I.return=Y,I)}function F(Y,I,J,ie){return I===null||I.tag!==4||I.stateNode.containerInfo!==J.containerInfo||I.stateNode.implementation!==J.implementation?(I=Uu(J,Y.mode,ie),I.return=Y,I):(I=f(I,J.children||[]),I.return=Y,I)}function re(Y,I,J,ie,ye){return I===null||I.tag!==7?(I=Wr(J,Y.mode,ie,ye),I.return=Y,I):(I=f(I,J),I.return=Y,I)}function ae(Y,I,J){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=zu(""+I,Y.mode,J),I.return=Y,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return J=Qo(I.type,I.key,I.props,null,Y.mode,J),fs(J,I),J.return=Y,J;case E:return I=Uu(I,Y.mode,J),I.return=Y,I;case V:return I=ii(I),ae(Y,I,J)}if(P(I)||te(I))return I=Wr(I,Y.mode,J,null),I.return=Y,I;if(typeof I.then=="function")return ae(Y,rl(I),J);if(I.$$typeof===x)return ae(Y,Wo(Y,I),J);il(Y,I)}return null}function W(Y,I,J,ie){var ye=I!==null?I.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ye!==null?null:N(Y,I,""+J,ie);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===ye?H(Y,I,J,ie):null;case E:return J.key===ye?F(Y,I,J,ie):null;case V:return J=ii(J),W(Y,I,J,ie)}if(P(J)||te(J))return ye!==null?null:re(Y,I,J,ie,null);if(typeof J.then=="function")return W(Y,I,rl(J),ie);if(J.$$typeof===x)return W(Y,I,Wo(Y,J),ie);il(Y,J)}return null}function ne(Y,I,J,ie,ye){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Y=Y.get(J)||null,N(I,Y,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case b:return Y=Y.get(ie.key===null?J:ie.key)||null,H(I,Y,ie,ye);case E:return Y=Y.get(ie.key===null?J:ie.key)||null,F(I,Y,ie,ye);case V:return ie=ii(ie),ne(Y,I,J,ie,ye)}if(P(ie)||te(ie))return Y=Y.get(J)||null,re(I,Y,ie,ye,null);if(typeof ie.then=="function")return ne(Y,I,J,rl(ie),ye);if(ie.$$typeof===x)return ne(Y,I,J,Wo(I,ie),ye);il(I,ie)}return null}function fe(Y,I,J,ie){for(var ye=null,ze=null,ge=I,Ne=I=0,Me=null;ge!==null&&Ne<J.length;Ne++){ge.index>Ne?(Me=ge,ge=null):Me=ge.sibling;var Ue=W(Y,ge,J[Ne],ie);if(Ue===null){ge===null&&(ge=Me);break}t&&ge&&Ue.alternate===null&&r(Y,ge),I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue,ge=Me}if(Ne===J.length)return s(Y,ge),je&&Ln(Y,Ne),ye;if(ge===null){for(;Ne<J.length;Ne++)ge=ae(Y,J[Ne],ie),ge!==null&&(I=m(ge,I,Ne),ze===null?ye=ge:ze.sibling=ge,ze=ge);return je&&Ln(Y,Ne),ye}for(ge=l(ge);Ne<J.length;Ne++)Me=ne(ge,Y,Ne,J[Ne],ie),Me!==null&&(t&&Me.alternate!==null&&ge.delete(Me.key===null?Ne:Me.key),I=m(Me,I,Ne),ze===null?ye=Me:ze.sibling=Me,ze=Me);return t&&ge.forEach(function(Dr){return r(Y,Dr)}),je&&Ln(Y,Ne),ye}function be(Y,I,J,ie){if(J==null)throw Error(a(151));for(var ye=null,ze=null,ge=I,Ne=I=0,Me=null,Ue=J.next();ge!==null&&!Ue.done;Ne++,Ue=J.next()){ge.index>Ne?(Me=ge,ge=null):Me=ge.sibling;var Dr=W(Y,ge,Ue.value,ie);if(Dr===null){ge===null&&(ge=Me);break}t&&ge&&Dr.alternate===null&&r(Y,ge),I=m(Dr,I,Ne),ze===null?ye=Dr:ze.sibling=Dr,ze=Dr,ge=Me}if(Ue.done)return s(Y,ge),je&&Ln(Y,Ne),ye;if(ge===null){for(;!Ue.done;Ne++,Ue=J.next())Ue=ae(Y,Ue.value,ie),Ue!==null&&(I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue);return je&&Ln(Y,Ne),ye}for(ge=l(ge);!Ue.done;Ne++,Ue=J.next())Ue=ne(ge,Y,Ne,Ue.value,ie),Ue!==null&&(t&&Ue.alternate!==null&&ge.delete(Ue.key===null?Ne:Ue.key),I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue);return t&&ge.forEach(function(oS){return r(Y,oS)}),je&&Ln(Y,Ne),ye}function Pe(Y,I,J,ie){if(typeof J=="object"&&J!==null&&J.type===_&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var ye=J.key;I!==null;){if(I.key===ye){if(ye=J.type,ye===_){if(I.tag===7){s(Y,I.sibling),ie=f(I,J.props.children),ie.return=Y,Y=ie;break e}}else if(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===V&&ii(ye)===I.type){s(Y,I.sibling),ie=f(I,J.props),fs(ie,J),ie.return=Y,Y=ie;break e}s(Y,I);break}else r(Y,I);I=I.sibling}J.type===_?(ie=Wr(J.props.children,Y.mode,ie,J.key),ie.return=Y,Y=ie):(ie=Qo(J.type,J.key,J.props,null,Y.mode,ie),fs(ie,J),ie.return=Y,Y=ie)}return w(Y);case E:e:{for(ye=J.key;I!==null;){if(I.key===ye)if(I.tag===4&&I.stateNode.containerInfo===J.containerInfo&&I.stateNode.implementation===J.implementation){s(Y,I.sibling),ie=f(I,J.children||[]),ie.return=Y,Y=ie;break e}else{s(Y,I);break}else r(Y,I);I=I.sibling}ie=Uu(J,Y.mode,ie),ie.return=Y,Y=ie}return w(Y);case V:return J=ii(J),Pe(Y,I,J,ie)}if(P(J))return fe(Y,I,J,ie);if(te(J)){if(ye=te(J),typeof ye!="function")throw Error(a(150));return J=ye.call(J),be(Y,I,J,ie)}if(typeof J.then=="function")return Pe(Y,I,rl(J),ie);if(J.$$typeof===x)return Pe(Y,I,Wo(Y,J),ie);il(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,I!==null&&I.tag===6?(s(Y,I.sibling),ie=f(I,J),ie.return=Y,Y=ie):(s(Y,I),ie=zu(J,Y.mode,ie),ie.return=Y,Y=ie),w(Y)):s(Y,I)}return function(Y,I,J,ie){try{ds=0;var ye=Pe(Y,I,J,ie);return ta=null,ye}catch(ge){if(ge===ea||ge===tl)throw ge;var ze=It(29,ge,null,Y.mode);return ze.lanes=ie,ze.return=Y,ze}finally{}}}var si=Lg(!0),Hg=Lg(!1),yr=!1;function Ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zu(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function br(t,r,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Zo(t),_g(t,null,s),r}return Ko(t,l,r,s),Zo(t)}function hs(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,s|=l,r.lanes=s,Ao(t,s)}}function Qu(t,r){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var w={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?f=m=w:m=m.next=w,s=s.next}while(s!==null);m===null?f=m=r:m=m.next=r}else f=m=r;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}var Ju=!1;function gs(){if(Ju){var t=Wi;if(t!==null)throw t}}function ms(t,r,s,l){Ju=!1;var f=t.updateQueue;yr=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var H=N,F=H.next;H.next=null,w===null?m=F:w.next=F,w=H;var re=t.alternate;re!==null&&(re=re.updateQueue,N=re.lastBaseUpdate,N!==w&&(N===null?re.firstBaseUpdate=F:N.next=F,re.lastBaseUpdate=H))}if(m!==null){var ae=f.baseState;w=0,re=F=H=null,N=m;do{var W=N.lane&-536870913,ne=W!==N.lane;if(ne?(ke&W)===W:(l&W)===W){W!==0&&W===Fi&&(Ju=!0),re!==null&&(re=re.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var fe=t,be=N;W=r;var Pe=s;switch(be.tag){case 1:if(fe=be.payload,typeof fe=="function"){ae=fe.call(Pe,ae,W);break e}ae=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=be.payload,W=typeof fe=="function"?fe.call(Pe,ae,W):fe,W==null)break e;ae=v({},ae,W);break e;case 2:yr=!0}}W=N.callback,W!==null&&(t.flags|=64,ne&&(t.flags|=8192),ne=f.callbacks,ne===null?f.callbacks=[W]:ne.push(W))}else ne={lane:W,tag:N.tag,payload:N.payload,callback:N.callback,next:null},re===null?(F=re=ne,H=ae):re=re.next=ne,w|=W;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;ne=N,N=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);re===null&&(H=ae),f.baseState=H,f.firstBaseUpdate=F,f.lastBaseUpdate=re,m===null&&(f.shared.lanes=0),Er|=w,t.lanes=w,t.memoizedState=ae}}function Bg(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function Ig(t,r){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Bg(s[t],r)}var na=O(null),al=O(0);function qg(t,r){t=Zn,Q(al,t),Q(na,r),Zn=t|r.baseLanes}function Fu(){Q(al,Zn),Q(na,na.current)}function Wu(){Zn=al.current,M(na),M(al)}var qt=O(null),an=null;function wr(t){var r=t.alternate;Q(nt,nt.current&1),Q(qt,t),an===null&&(r===null||na.current!==null||r.memoizedState!==null)&&(an=t)}function ed(t){Q(nt,nt.current),Q(qt,t),an===null&&(an=t)}function Vg(t){t.tag===22?(Q(nt,nt.current),Q(qt,t),an===null&&(an=t)):xr()}function xr(){Q(nt,nt.current),Q(qt,qt.current)}function Vt(t){M(qt),an===t&&(an=null),M(nt)}var nt=O(0);function sl(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||of(s)||lf(s)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var In=0,Ae=null,qe=null,st=null,ol=!1,ra=!1,oi=!1,ll=0,ps=0,ia=null,Jx=0;function We(){throw Error(a(321))}function td(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!Bt(t[s],r[s]))return!1;return!0}function nd(t,r,s,l,f,m){return In=m,Ae=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,R.H=t===null||t.memoizedState===null?Cm:yd,oi=!1,m=s(l,f),oi=!1,ra&&(m=Gg(r,s,l,f)),Pg(t),m}function Pg(t){R.H=bs;var r=qe!==null&&qe.next!==null;if(In=0,st=qe=Ae=null,ol=!1,ps=0,ia=null,r)throw Error(a(300));t===null||ot||(t=t.dependencies,t!==null&&Fo(t)&&(ot=!0))}function Gg(t,r,s,l){Ae=t;var f=0;do{if(ra&&(ia=null),ps=0,ra=!1,25<=f)throw Error(a(301));if(f+=1,st=qe=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}R.H=Am,m=r(s,l)}while(ra);return m}function Fx(){var t=R.H,r=t.useState()[0];return r=typeof r.then=="function"?ys(r):r,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(Ae.flags|=1024),r}function rd(){var t=ll!==0;return ll=0,t}function id(t,r,s){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~s}function ad(t){if(ol){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ol=!1}In=0,st=qe=Ae=null,ra=!1,ps=ll=0,ia=null}function Ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ae.memoizedState=st=t:st=st.next=t,st}function rt(){if(qe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var r=st===null?Ae.memoizedState:st.next;if(r!==null)st=r,qe=t;else{if(t===null)throw Ae.alternate===null?Error(a(467)):Error(a(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},st===null?Ae.memoizedState=st=t:st=st.next=t}return st}function cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ys(t){var r=ps;return ps+=1,ia===null&&(ia=[]),t=zg(ia,t,r),r=Ae,(st===null?r.memoizedState:st.next)===null&&(r=r.alternate,R.H=r===null||r.memoizedState===null?Cm:yd),t}function ul(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ys(t);if(t.$$typeof===x)return bt(t)}throw Error(a(438,String(t)))}function sd(t){var r=null,s=Ae.updateQueue;if(s!==null&&(r=s.memoCache),r==null){var l=Ae.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),s===null&&(s=cl(),Ae.updateQueue=s),s.memoCache=r,s=r.data[r.index],s===void 0)for(s=r.data[r.index]=Array(t),l=0;l<t;l++)s[l]=oe;return r.index++,s}function qn(t,r){return typeof r=="function"?r(t):r}function dl(t){var r=rt();return od(r,qe,t)}function od(t,r,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}r.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var N=w=null,H=null,F=r,re=!1;do{var ae=F.lane&-536870913;if(ae!==F.lane?(ke&ae)===ae:(In&ae)===ae){var W=F.revertLane;if(W===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ae===Fi&&(re=!0);else if((In&W)===W){F=F.next,W===Fi&&(re=!0);continue}else ae={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},H===null?(N=H=ae,w=m):H=H.next=ae,Ae.lanes|=W,Er|=W;ae=F.action,oi&&s(m,ae),m=F.hasEagerState?F.eagerState:s(m,ae)}else W={lane:ae,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},H===null?(N=H=W,w=m):H=H.next=W,Ae.lanes|=ae,Er|=ae;F=F.next}while(F!==null&&F!==r);if(H===null?w=m:H.next=N,!Bt(m,t.memoizedState)&&(ot=!0,re&&(s=Wi,s!==null)))throw s;t.memoizedState=m,t.baseState=w,t.baseQueue=H,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function ld(t){var r=rt(),s=r.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,f=s.pending,m=r.memoizedState;if(f!==null){s.pending=null;var w=f=f.next;do m=t(m,w.action),w=w.next;while(w!==f);Bt(m,r.memoizedState)||(ot=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),s.lastRenderedState=m}return[m,l]}function Yg(t,r,s){var l=Ae,f=rt(),m=je;if(m){if(s===void 0)throw Error(a(407));s=s()}else s=r();var w=!Bt((qe||f).memoizedState,s);if(w&&(f.memoizedState=s,ot=!0),f=f.queue,dd(Zg.bind(null,l,f,t),[t]),f.getSnapshot!==r||w||st!==null&&st.memoizedState.tag&1){if(l.flags|=2048,aa(9,{destroy:void 0},Kg.bind(null,l,f,s,r),null),Ye===null)throw Error(a(349));m||(In&127)!==0||Xg(l,r,s)}return s}function Xg(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=Ae.updateQueue,r===null?(r=cl(),Ae.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function Kg(t,r,s,l){r.value=s,r.getSnapshot=l,Qg(r)&&Jg(t)}function Zg(t,r,s){return s(function(){Qg(r)&&Jg(t)})}function Qg(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!Bt(t,s)}catch{return!0}}function Jg(t){var r=Fr(t,2);r!==null&&Ut(r,t,2)}function cd(t){var r=Ot();if(typeof t=="function"){var s=t;if(t=s(),oi){xn(!0);try{s()}finally{xn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:t},r}function Fg(t,r,s,l){return t.baseState=s,od(t,qe,typeof l=="function"?l:qn)}function Wx(t,r,s,l,f){if(gl(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};R.T!==null?s(!0):m.isTransition=!1,l(m),s=r.pending,s===null?(m.next=r.pending=m,Wg(r,m)):(m.next=s.next,r.pending=s.next=m)}}function Wg(t,r){var s=r.action,l=r.payload,f=t.state;if(r.isTransition){var m=R.T,w={};R.T=w;try{var N=s(f,l),H=R.S;H!==null&&H(w,N),em(t,r,N)}catch(F){ud(t,r,F)}finally{m!==null&&w.types!==null&&(m.types=w.types),R.T=m}}else try{m=s(f,l),em(t,r,m)}catch(F){ud(t,r,F)}}function em(t,r,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){tm(t,r,l)},function(l){return ud(t,r,l)}):tm(t,r,s)}function tm(t,r,s){r.status="fulfilled",r.value=s,nm(r),t.state=s,r=t.pending,r!==null&&(s=r.next,s===r?t.pending=null:(s=s.next,r.next=s,Wg(t,s)))}function ud(t,r,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=s,nm(r),r=r.next;while(r!==l)}t.action=null}function nm(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function rm(t,r){return r}function im(t,r){if(je){var s=Ye.formState;if(s!==null){e:{var l=Ae;if(je){if(Ke){t:{for(var f=Ke,m=rn;f.nodeType!==8;){if(!m){f=null;break t}if(f=sn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ke=sn(f.nextSibling),l=f.data==="F!";break e}}mr(l)}l=!1}l&&(r=s[0])}}return s=Ot(),s.memoizedState=s.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:r},s.queue=l,s=Sm.bind(null,Ae,l),l.dispatch=s,l=cd(!1),m=pd.bind(null,Ae,!1,l.queue),l=Ot(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,s=Wx.bind(null,Ae,f,m,s),f.dispatch=s,l.memoizedState=t,[r,s,!1]}function am(t){var r=rt();return sm(r,qe,t)}function sm(t,r,s){if(r=od(t,r,rm)[0],t=dl(qn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=ys(r)}catch(w){throw w===ea?tl:w}else l=r;r=rt();var f=r.queue,m=f.dispatch;return s!==r.memoizedState&&(Ae.flags|=2048,aa(9,{destroy:void 0},e_.bind(null,f,s),null)),[l,m,t]}function e_(t,r){t.action=r}function om(t){var r=rt(),s=qe;if(s!==null)return sm(r,s,t);rt(),r=r.memoizedState,s=rt();var l=s.queue.dispatch;return s.memoizedState=t,[r,l,!1]}function aa(t,r,s,l){return t={tag:t,create:s,deps:l,inst:r,next:null},r=Ae.updateQueue,r===null&&(r=cl(),Ae.updateQueue=r),s=r.lastEffect,s===null?r.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,r.lastEffect=t),t}function lm(){return rt().memoizedState}function fl(t,r,s,l){var f=Ot();Ae.flags|=t,f.memoizedState=aa(1|r,{destroy:void 0},s,l===void 0?null:l)}function hl(t,r,s,l){var f=rt();l=l===void 0?null:l;var m=f.memoizedState.inst;qe!==null&&l!==null&&td(l,qe.memoizedState.deps)?f.memoizedState=aa(r,m,s,l):(Ae.flags|=t,f.memoizedState=aa(1|r,m,s,l))}function cm(t,r){fl(8390656,8,t,r)}function dd(t,r){hl(2048,8,t,r)}function t_(t){Ae.flags|=4;var r=Ae.updateQueue;if(r===null)r=cl(),Ae.updateQueue=r,r.events=[t];else{var s=r.events;s===null?r.events=[t]:s.push(t)}}function um(t){var r=rt().memoizedState;return t_({ref:r,nextImpl:t}),function(){if(($e&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function dm(t,r){return hl(4,2,t,r)}function fm(t,r){return hl(4,4,t,r)}function hm(t,r){if(typeof r=="function"){t=t();var s=r(t);return function(){typeof s=="function"?s():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function gm(t,r,s){s=s!=null?s.concat([t]):null,hl(4,4,hm.bind(null,r,t),s)}function fd(){}function mm(t,r){var s=rt();r=r===void 0?null:r;var l=s.memoizedState;return r!==null&&td(r,l[1])?l[0]:(s.memoizedState=[t,r],t)}function pm(t,r){var s=rt();r=r===void 0?null:r;var l=s.memoizedState;if(r!==null&&td(r,l[1]))return l[0];if(l=t(),oi){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,r],l}function hd(t,r,s){return s===void 0||(In&1073741824)!==0&&(ke&261930)===0?t.memoizedState=r:(t.memoizedState=s,t=yp(),Ae.lanes|=t,Er|=t,s)}function ym(t,r,s,l){return Bt(s,r)?s:na.current!==null?(t=hd(t,s,l),Bt(t,r)||(ot=!0),t):(In&42)===0||(In&1073741824)!==0&&(ke&261930)===0?(ot=!0,t.memoizedState=s):(t=yp(),Ae.lanes|=t,Er|=t,r)}function vm(t,r,s,l,f){var m=$.p;$.p=m!==0&&8>m?m:8;var w=R.T,N={};R.T=N,pd(t,!1,r,s);try{var H=f(),F=R.S;if(F!==null&&F(N,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var re=Qx(H,l);vs(t,r,re,Yt(t))}else vs(t,r,l,Yt(t))}catch(ae){vs(t,r,{then:function(){},status:"rejected",reason:ae},Yt())}finally{$.p=m,w!==null&&N.types!==null&&(w.types=N.types),R.T=w}}function n_(){}function gd(t,r,s,l){if(t.tag!==5)throw Error(a(476));var f=bm(t).queue;vm(t,f,r,B,s===null?n_:function(){return wm(t),s(l)})}function bm(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:B},next:null};var s={};return r.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:s},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function wm(t){var r=bm(t);r.next===null&&(r=t.alternate.memoizedState),vs(t,r.next.queue,{},Yt())}function md(){return bt(zs)}function xm(){return rt().memoizedState}function _m(){return rt().memoizedState}function r_(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var s=Yt();t=vr(s);var l=br(r,t,s);l!==null&&(Ut(l,r,s),hs(l,r,s)),r={cache:Pu()},t.payload=r;return}r=r.return}}function i_(t,r,s){var l=Yt();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},gl(t)?Em(r,s):(s=ju(t,r,s,l),s!==null&&(Ut(s,t,l),Tm(s,r,l)))}function Sm(t,r,s){var l=Yt();vs(t,r,s,l)}function vs(t,r,s,l){var f={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(gl(t))Em(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var w=r.lastRenderedState,N=m(w,s);if(f.hasEagerState=!0,f.eagerState=N,Bt(N,w))return Ko(t,r,f,0),Ye===null&&Xo(),!1}catch{}finally{}if(s=ju(t,r,f,l),s!==null)return Ut(s,t,l),Tm(s,r,l),!0}return!1}function pd(t,r,s,l){if(l={lane:2,revertLane:Kd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},gl(t)){if(r)throw Error(a(479))}else r=ju(t,s,l,2),r!==null&&Ut(r,t,2)}function gl(t){var r=t.alternate;return t===Ae||r!==null&&r===Ae}function Em(t,r){ra=ol=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function Tm(t,r,s){if((s&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,s|=l,r.lanes=s,Ao(t,s)}}var bs={readContext:bt,use:ul,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};bs.useEffectEvent=We;var Cm={readContext:bt,use:ul,useCallback:function(t,r){return Ot().memoizedState=[t,r===void 0?null:r],t},useContext:bt,useEffect:cm,useImperativeHandle:function(t,r,s){s=s!=null?s.concat([t]):null,fl(4194308,4,hm.bind(null,r,t),s)},useLayoutEffect:function(t,r){return fl(4194308,4,t,r)},useInsertionEffect:function(t,r){fl(4,2,t,r)},useMemo:function(t,r){var s=Ot();r=r===void 0?null:r;var l=t();if(oi){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,r],l},useReducer:function(t,r,s){var l=Ot();if(s!==void 0){var f=s(r);if(oi){xn(!0);try{s(r)}finally{xn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=i_.bind(null,Ae,t),[l.memoizedState,t]},useRef:function(t){var r=Ot();return t={current:t},r.memoizedState=t},useState:function(t){t=cd(t);var r=t.queue,s=Sm.bind(null,Ae,r);return r.dispatch=s,[t.memoizedState,s]},useDebugValue:fd,useDeferredValue:function(t,r){var s=Ot();return hd(s,t,r)},useTransition:function(){var t=cd(!1);return t=vm.bind(null,Ae,t.queue,!0,!1),Ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,s){var l=Ae,f=Ot();if(je){if(s===void 0)throw Error(a(407));s=s()}else{if(s=r(),Ye===null)throw Error(a(349));(ke&127)!==0||Xg(l,r,s)}f.memoizedState=s;var m={value:s,getSnapshot:r};return f.queue=m,cm(Zg.bind(null,l,m,t),[t]),l.flags|=2048,aa(9,{destroy:void 0},Kg.bind(null,l,m,s,r),null),s},useId:function(){var t=Ot(),r=Ye.identifierPrefix;if(je){var s=En,l=Sn;s=(l&~(1<<32-Nt(l)-1)).toString(32)+s,r="_"+r+"R_"+s,s=ll++,0<s&&(r+="H"+s.toString(32)),r+="_"}else s=Jx++,r="_"+r+"r_"+s.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:md,useFormState:im,useActionState:im,useOptimistic:function(t){var r=Ot();r.memoizedState=r.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=s,r=pd.bind(null,Ae,!0,s),s.dispatch=r,[t,r]},useMemoCache:sd,useCacheRefresh:function(){return Ot().memoizedState=r_.bind(null,Ae)},useEffectEvent:function(t){var r=Ot(),s={impl:t};return r.memoizedState=s,function(){if(($e&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},yd={readContext:bt,use:ul,useCallback:mm,useContext:bt,useEffect:dd,useImperativeHandle:gm,useInsertionEffect:dm,useLayoutEffect:fm,useMemo:pm,useReducer:dl,useRef:lm,useState:function(){return dl(qn)},useDebugValue:fd,useDeferredValue:function(t,r){var s=rt();return ym(s,qe.memoizedState,t,r)},useTransition:function(){var t=dl(qn)[0],r=rt().memoizedState;return[typeof t=="boolean"?t:ys(t),r]},useSyncExternalStore:Yg,useId:xm,useHostTransitionStatus:md,useFormState:am,useActionState:am,useOptimistic:function(t,r){var s=rt();return Fg(s,qe,t,r)},useMemoCache:sd,useCacheRefresh:_m};yd.useEffectEvent=um;var Am={readContext:bt,use:ul,useCallback:mm,useContext:bt,useEffect:dd,useImperativeHandle:gm,useInsertionEffect:dm,useLayoutEffect:fm,useMemo:pm,useReducer:ld,useRef:lm,useState:function(){return ld(qn)},useDebugValue:fd,useDeferredValue:function(t,r){var s=rt();return qe===null?hd(s,t,r):ym(s,qe.memoizedState,t,r)},useTransition:function(){var t=ld(qn)[0],r=rt().memoizedState;return[typeof t=="boolean"?t:ys(t),r]},useSyncExternalStore:Yg,useId:xm,useHostTransitionStatus:md,useFormState:om,useActionState:om,useOptimistic:function(t,r){var s=rt();return qe!==null?Fg(s,qe,t,r):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:sd,useCacheRefresh:_m};Am.useEffectEvent=um;function vd(t,r,s,l){r=t.memoizedState,s=s(l,r),s=s==null?r:v({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var bd={enqueueSetState:function(t,r,s){t=t._reactInternals;var l=Yt(),f=vr(l);f.payload=r,s!=null&&(f.callback=s),r=br(t,f,l),r!==null&&(Ut(r,t,l),hs(r,t,l))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var l=Yt(),f=vr(l);f.tag=1,f.payload=r,s!=null&&(f.callback=s),r=br(t,f,l),r!==null&&(Ut(r,t,l),hs(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Yt(),l=vr(s);l.tag=2,r!=null&&(l.callback=r),r=br(t,l,s),r!==null&&(Ut(r,t,s),hs(r,t,s))}};function Nm(t,r,s,l,f,m,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,w):r.prototype&&r.prototype.isPureReactComponent?!as(s,l)||!as(f,m):!0}function Om(t,r,s,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,l),r.state!==t&&bd.enqueueReplaceState(r,r.state,null)}function li(t,r){var s=r;if("ref"in r){s={};for(var l in r)l!=="ref"&&(s[l]=r[l])}if(t=t.defaultProps){s===r&&(s=v({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}function Rm(t){Yo(t)}function km(t){console.error(t)}function Mm(t){Yo(t)}function ml(t,r){try{var s=t.onUncaughtError;s(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function jm(t,r,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function wd(t,r,s){return s=vr(s),s.tag=3,s.payload={element:null},s.callback=function(){ml(t,r)},s}function Dm(t){return t=vr(t),t.tag=3,t}function zm(t,r,s,l){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){jm(r,s,l)}}var w=s.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){jm(r,s,l),typeof f!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function a_(t,r,s,l,f){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=s.alternate,r!==null&&Ji(r,s,f,!0),s=qt.current,s!==null){switch(s.tag){case 31:case 13:return an===null?Al():s.alternate===null&&et===0&&(et=3),s.flags&=-257,s.flags|=65536,s.lanes=f,l===nl?s.flags|=16384:(r=s.updateQueue,r===null?s.updateQueue=new Set([l]):r.add(l),Gd(t,l,f)),!1;case 22:return s.flags|=65536,l===nl?s.flags|=16384:(r=s.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=r):(s=r.retryQueue,s===null?r.retryQueue=new Set([l]):s.add(l)),Gd(t,l,f)),!1}throw Error(a(435,s.tag))}return Gd(t,l,f),Al(),!1}if(je)return r=qt.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Hu&&(t=Error(a(422),{cause:l}),ls(en(t,s)))):(l!==Hu&&(r=Error(a(423),{cause:l}),ls(en(r,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=en(l,s),f=wd(t.stateNode,l,f),Qu(t,f),et!==4&&(et=2)),!1;var m=Error(a(520),{cause:l});if(m=en(m,s),As===null?As=[m]:As.push(m),et!==4&&(et=2),r===null)return!0;l=en(l,s),s=r;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=wd(s.stateNode,l,t),Qu(s,t),!1;case 1:if(r=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Tr===null||!Tr.has(m))))return s.flags|=65536,f&=-f,s.lanes|=f,f=Dm(f),zm(f,t,s,l),Qu(s,f),!1}s=s.return}while(s!==null);return!1}var xd=Error(a(461)),ot=!1;function wt(t,r,s,l){r.child=t===null?Hg(r,null,s,l):si(r,t.child,s,l)}function Um(t,r,s,l,f){s=s.render;var m=r.ref;if("ref"in l){var w={};for(var N in l)N!=="ref"&&(w[N]=l[N])}else w=l;return ni(r),l=nd(t,r,s,w,m,f),N=rd(),t!==null&&!ot?(id(t,r,f),Vn(t,r,f)):(je&&N&&$u(r),r.flags|=1,wt(t,r,l,f),r.child)}function $m(t,r,s,l,f){if(t===null){var m=s.type;return typeof m=="function"&&!Du(m)&&m.defaultProps===void 0&&s.compare===null?(r.tag=15,r.type=m,Lm(t,r,m,l,f)):(t=Qo(s.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!Od(t,f)){var w=m.memoizedProps;if(s=s.compare,s=s!==null?s:as,s(w,l)&&t.ref===r.ref)return Vn(t,r,f)}return r.flags|=1,t=$n(m,l),t.ref=r.ref,t.return=r,r.child=t}function Lm(t,r,s,l,f){if(t!==null){var m=t.memoizedProps;if(as(m,l)&&t.ref===r.ref)if(ot=!1,r.pendingProps=l=m,Od(t,f))(t.flags&131072)!==0&&(ot=!0);else return r.lanes=t.lanes,Vn(t,r,f)}return _d(t,r,s,l,f)}function Hm(t,r,s,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|s:s,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,r.child=null;return Bm(t,r,m,s,l)}if((s&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&el(r,m!==null?m.cachePool:null),m!==null?qg(r,m):Fu(),Vg(r);else return l=r.lanes=536870912,Bm(t,r,m!==null?m.baseLanes|s:s,s,l)}else m!==null?(el(r,m.cachePool),qg(r,m),xr(),r.memoizedState=null):(t!==null&&el(r,null),Fu(),xr());return wt(t,r,f,s),r.child}function ws(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Bm(t,r,s,l,f){var m=Yu();return m=m===null?null:{parent:at._currentValue,pool:m},r.memoizedState={baseLanes:s,cachePool:m},t!==null&&el(r,null),Fu(),Vg(r),t!==null&&Ji(t,r,l,!0),r.childLanes=f,null}function pl(t,r){return r=vl({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Im(t,r,s){return si(r,t.child,null,s),t=pl(r,r.pendingProps),t.flags|=2,Vt(r),r.memoizedState=null,t}function s_(t,r,s){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(je){if(l.mode==="hidden")return t=pl(r,l),r.lanes=536870912,ws(null,t);if(ed(r),(t=Ke)?(t=Wp(t,rn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:hr!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},s=Eg(t),s.return=r,r.child=s,vt=r,Ke=null)):t=null,t===null)throw mr(r);return r.lanes=536870912,null}return pl(r,l)}var m=t.memoizedState;if(m!==null){var w=m.dehydrated;if(ed(r),f)if(r.flags&256)r.flags&=-257,r=Im(t,r,s);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(ot||Ji(t,r,s,!1),f=(s&t.childLanes)!==0,ot||f){if(l=Ye,l!==null&&(w=No(l,s),w!==0&&w!==m.retryLane))throw m.retryLane=w,Fr(t,w),Ut(l,t,w),xd;Al(),r=Im(t,r,s)}else t=m.treeContext,Ke=sn(w.nextSibling),vt=r,je=!0,gr=null,rn=!1,t!==null&&Ag(r,t),r=pl(r,l),r.flags|=4096;return r}return t=$n(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function yl(t,r){var s=r.ref;if(s===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(r.flags|=4194816)}}function _d(t,r,s,l,f){return ni(r),s=nd(t,r,s,l,void 0,f),l=rd(),t!==null&&!ot?(id(t,r,f),Vn(t,r,f)):(je&&l&&$u(r),r.flags|=1,wt(t,r,s,f),r.child)}function qm(t,r,s,l,f,m){return ni(r),r.updateQueue=null,s=Gg(r,l,s,f),Pg(t),l=rd(),t!==null&&!ot?(id(t,r,m),Vn(t,r,m)):(je&&l&&$u(r),r.flags|=1,wt(t,r,s,m),r.child)}function Vm(t,r,s,l,f){if(ni(r),r.stateNode===null){var m=Xi,w=s.contextType;typeof w=="object"&&w!==null&&(m=bt(w)),m=new s(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=bd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},Ku(r),w=s.contextType,m.context=typeof w=="object"&&w!==null?bt(w):Xi,m.state=r.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(vd(r,s,w,l),m.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&bd.enqueueReplaceState(m,m.state,null),ms(r,l,m,f),gs(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){m=r.stateNode;var N=r.memoizedProps,H=li(s,N);m.props=H;var F=m.context,re=s.contextType;w=Xi,typeof re=="object"&&re!==null&&(w=bt(re));var ae=s.getDerivedStateFromProps;re=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,re||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||F!==w)&&Om(r,m,l,w),yr=!1;var W=r.memoizedState;m.state=W,ms(r,l,m,f),gs(),F=r.memoizedState,N||W!==F||yr?(typeof ae=="function"&&(vd(r,s,ae,l),F=r.memoizedState),(H=yr||Nm(r,s,H,l,W,F,w))?(re||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),m.props=l,m.state=F,m.context=w,l=H):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Zu(t,r),w=r.memoizedProps,re=li(s,w),m.props=re,ae=r.pendingProps,W=m.context,F=s.contextType,H=Xi,typeof F=="object"&&F!==null&&(H=bt(F)),N=s.getDerivedStateFromProps,(F=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==ae||W!==H)&&Om(r,m,l,H),yr=!1,W=r.memoizedState,m.state=W,ms(r,l,m,f),gs();var ne=r.memoizedState;w!==ae||W!==ne||yr||t!==null&&t.dependencies!==null&&Fo(t.dependencies)?(typeof N=="function"&&(vd(r,s,N,l),ne=r.memoizedState),(re=yr||Nm(r,s,re,l,W,ne,H)||t!==null&&t.dependencies!==null&&Fo(t.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ne,H),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ne,H)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=ne),m.props=l,m.state=ne,m.context=H,l=re):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(r.flags|=1024),l=!1)}return m=l,yl(t,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&l?(r.child=si(r,t.child,null,f),r.child=si(r,null,s,f)):wt(t,r,s,f),r.memoizedState=m.state,t=r.child):t=Vn(t,r,f),t}function Pm(t,r,s,l){return ei(),r.flags|=256,wt(t,r,s,l),r.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ed(t){return{baseLanes:t,cachePool:jg()}}function Td(t,r,s){return t=t!==null?t.childLanes&~s:0,r&&(t|=Gt),t}function Gm(t,r,s){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,w;if((w=m)||(w=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),w&&(f=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,t===null){if(je){if(f?wr(r):xr(),(t=Ke)?(t=Wp(t,rn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:hr!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},s=Eg(t),s.return=r,r.child=s,vt=r,Ke=null)):t=null,t===null)throw mr(r);return lf(t)?r.lanes=32:r.lanes=536870912,null}var N=l.children;return l=l.fallback,f?(xr(),f=r.mode,N=vl({mode:"hidden",children:N},f),l=Wr(l,f,s,null),N.return=r,l.return=r,N.sibling=l,r.child=N,l=r.child,l.memoizedState=Ed(s),l.childLanes=Td(t,w,s),r.memoizedState=Sd,ws(null,l)):(wr(r),Cd(r,N))}var H=t.memoizedState;if(H!==null&&(N=H.dehydrated,N!==null)){if(m)r.flags&256?(wr(r),r.flags&=-257,r=Ad(t,r,s)):r.memoizedState!==null?(xr(),r.child=t.child,r.flags|=128,r=null):(xr(),N=l.fallback,f=r.mode,l=vl({mode:"visible",children:l.children},f),N=Wr(N,f,s,null),N.flags|=2,l.return=r,N.return=r,l.sibling=N,r.child=l,si(r,t.child,null,s),l=r.child,l.memoizedState=Ed(s),l.childLanes=Td(t,w,s),r.memoizedState=Sd,r=ws(null,l));else if(wr(r),lf(N)){if(w=N.nextSibling&&N.nextSibling.dataset,w)var F=w.dgst;w=F,l=Error(a(419)),l.stack="",l.digest=w,ls({value:l,source:null,stack:null}),r=Ad(t,r,s)}else if(ot||Ji(t,r,s,!1),w=(s&t.childLanes)!==0,ot||w){if(w=Ye,w!==null&&(l=No(w,s),l!==0&&l!==H.retryLane))throw H.retryLane=l,Fr(t,l),Ut(w,t,l),xd;of(N)||Al(),r=Ad(t,r,s)}else of(N)?(r.flags|=192,r.child=t.child,r=null):(t=H.treeContext,Ke=sn(N.nextSibling),vt=r,je=!0,gr=null,rn=!1,t!==null&&Ag(r,t),r=Cd(r,l.children),r.flags|=4096);return r}return f?(xr(),N=l.fallback,f=r.mode,H=t.child,F=H.sibling,l=$n(H,{mode:"hidden",children:l.children}),l.subtreeFlags=H.subtreeFlags&65011712,F!==null?N=$n(F,N):(N=Wr(N,f,s,null),N.flags|=2),N.return=r,l.return=r,l.sibling=N,r.child=l,ws(null,l),l=r.child,N=t.child.memoizedState,N===null?N=Ed(s):(f=N.cachePool,f!==null?(H=at._currentValue,f=f.parent!==H?{parent:H,pool:H}:f):f=jg(),N={baseLanes:N.baseLanes|s,cachePool:f}),l.memoizedState=N,l.childLanes=Td(t,w,s),r.memoizedState=Sd,ws(t.child,l)):(wr(r),s=t.child,t=s.sibling,s=$n(s,{mode:"visible",children:l.children}),s.return=r,s.sibling=null,t!==null&&(w=r.deletions,w===null?(r.deletions=[t],r.flags|=16):w.push(t)),r.child=s,r.memoizedState=null,s)}function Cd(t,r){return r=vl({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function vl(t,r){return t=It(22,t,null,r),t.lanes=0,t}function Ad(t,r,s){return si(r,t.child,null,s),t=Cd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ym(t,r,s){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),qu(t.return,r,s)}function Nd(t,r,s,l,f,m){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f,treeForkCount:m}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=l,w.tail=s,w.tailMode=f,w.treeForkCount=m)}function Xm(t,r,s){var l=r.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var w=nt.current,N=(w&2)!==0;if(N?(w=w&1|2,r.flags|=128):w&=1,Q(nt,w),wt(t,r,l,s),l=je?os:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ym(t,s,r);else if(t.tag===19)Ym(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(s=r.child,f=null;s!==null;)t=s.alternate,t!==null&&sl(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=r.child,r.child=null):(f=s.sibling,s.sibling=null),Nd(r,!1,f,s,m,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&sl(t)===null){r.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}Nd(r,!0,s,null,m,l);break;case"together":Nd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Vn(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Er|=r.lanes,(s&r.childLanes)===0)if(t!==null){if(Ji(t,r,s,!1),(s&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,s=$n(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=$n(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function Od(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Fo(t)))}function o_(t,r,s){switch(r.tag){case 3:le(r,r.stateNode.containerInfo),pr(r,at,t.memoizedState.cache),ei();break;case 27:case 5:Te(r);break;case 4:le(r,r.stateNode.containerInfo);break;case 10:pr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ed(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(wr(r),r.flags|=128,null):(s&r.child.childLanes)!==0?Gm(t,r,s):(wr(r),t=Vn(t,r,s),t!==null?t.sibling:null);wr(r);break;case 19:var f=(t.flags&128)!==0;if(l=(s&r.childLanes)!==0,l||(Ji(t,r,s,!1),l=(s&r.childLanes)!==0),f){if(l)return Xm(t,r,s);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Q(nt,nt.current),l)break;return null;case 22:return r.lanes=0,Hm(t,r,s,r.pendingProps);case 24:pr(r,at,t.memoizedState.cache)}return Vn(t,r,s)}function Km(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps)ot=!0;else{if(!Od(t,s)&&(r.flags&128)===0)return ot=!1,o_(t,r,s);ot=(t.flags&131072)!==0}else ot=!1,je&&(r.flags&1048576)!==0&&Cg(r,os,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=ii(r.elementType),r.type=t,typeof t=="function")Du(t)?(l=li(t,l),r.tag=1,r=Vm(null,r,t,l,s)):(r.tag=0,r=_d(null,r,t,l,s));else{if(t!=null){var f=t.$$typeof;if(f===A){r.tag=11,r=Um(null,r,t,l,s);break e}else if(f===U){r.tag=14,r=$m(null,r,t,l,s);break e}}throw r=D(t)||t,Error(a(306,r,""))}}return r;case 0:return _d(t,r,r.type,r.pendingProps,s);case 1:return l=r.type,f=li(l,r.pendingProps),Vm(t,r,l,f,s);case 3:e:{if(le(r,r.stateNode.containerInfo),t===null)throw Error(a(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,Zu(t,r),ms(r,l,null,s);var w=r.memoizedState;if(l=w.cache,pr(r,at,l),l!==m.cache&&Vu(r,[at],s,!0),gs(),l=w.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Pm(t,r,l,s);break e}else if(l!==f){f=en(Error(a(424)),r),ls(f),r=Pm(t,r,l,s);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ke=sn(t.firstChild),vt=r,je=!0,gr=null,rn=!0,s=Hg(r,null,l,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ei(),l===f){r=Vn(t,r,s);break e}wt(t,r,l,s)}r=r.child}return r;case 26:return yl(t,r),t===null?(s=ay(r.type,null,r.pendingProps,null))?r.memoizedState=s:je||(s=r.type,t=r.pendingProps,l=Dl(ue.current).createElement(s),l[dt]=r,l[Et]=t,xt(l,s,t),it(l),r.stateNode=l):r.memoizedState=ay(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Te(r),t===null&&je&&(l=r.stateNode=ny(r.type,r.pendingProps,ue.current),vt=r,rn=!0,f=Ke,Or(r.type)?(cf=f,Ke=sn(l.firstChild)):Ke=f),wt(t,r,r.pendingProps.children,s),yl(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&je&&((f=l=Ke)&&(l=$_(l,r.type,r.pendingProps,rn),l!==null?(r.stateNode=l,vt=r,Ke=sn(l.firstChild),rn=!1,f=!0):f=!1),f||mr(r)),Te(r),f=r.type,m=r.pendingProps,w=t!==null?t.memoizedProps:null,l=m.children,rf(f,m)?l=null:w!==null&&rf(f,w)&&(r.flags|=32),r.memoizedState!==null&&(f=nd(t,r,Fx,null,null,s),zs._currentValue=f),yl(t,r),wt(t,r,l,s),r.child;case 6:return t===null&&je&&((t=s=Ke)&&(s=L_(s,r.pendingProps,rn),s!==null?(r.stateNode=s,vt=r,Ke=null,t=!0):t=!1),t||mr(r)),null;case 13:return Gm(t,r,s);case 4:return le(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=si(r,null,l,s):wt(t,r,l,s),r.child;case 11:return Um(t,r,r.type,r.pendingProps,s);case 7:return wt(t,r,r.pendingProps,s),r.child;case 8:return wt(t,r,r.pendingProps.children,s),r.child;case 12:return wt(t,r,r.pendingProps.children,s),r.child;case 10:return l=r.pendingProps,pr(r,r.type,l.value),wt(t,r,l.children,s),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,ni(r),f=bt(f),l=l(f),r.flags|=1,wt(t,r,l,s),r.child;case 14:return $m(t,r,r.type,r.pendingProps,s);case 15:return Lm(t,r,r.type,r.pendingProps,s);case 19:return Xm(t,r,s);case 31:return s_(t,r,s);case 22:return Hm(t,r,s,r.pendingProps);case 24:return ni(r),l=bt(at),t===null?(f=Yu(),f===null&&(f=Ye,m=Pu(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=s),f=m),r.memoizedState={parent:l,cache:f},Ku(r),pr(r,at,f)):((t.lanes&s)!==0&&(Zu(t,r),ms(r,null,null,s),gs()),f=t.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),pr(r,at,l)):(l=m.cache,pr(r,at,l),l!==f.cache&&Vu(r,[at],s,!0))),wt(t,r,r.pendingProps.children,s),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function Pn(t){t.flags|=4}function Rd(t,r,s,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(xp())t.flags|=8192;else throw ai=nl,Xu}else t.flags&=-16777217}function Zm(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!uy(r))if(xp())t.flags|=8192;else throw ai=nl,Xu}function bl(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?To():536870912,t.lanes|=r,ca|=r)}function xs(t,r){if(!je)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ze(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(r)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=s,r}function l_(t,r,s){var l=r.pendingProps;switch(Lu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(r),null;case 1:return Ze(r),null;case 3:return s=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Bn(at),de(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Qi(r)?Pn(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Bu())),Ze(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Pn(r),m!==null?(Ze(r),Zm(r,m)):(Ze(r),Rd(r,f,null,l,s))):m?m!==t.memoizedState?(Pn(r),Ze(r),Zm(r,m)):(Ze(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Pn(r),Ze(r),Rd(r,f,t,l,s)),null;case 27:if(Se(r),s=ue.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(!l){if(r.stateNode===null)throw Error(a(166));return Ze(r),null}t=X.current,Qi(r)?Ng(r):(t=ny(f,l,s),r.stateNode=t,Pn(r))}return Ze(r),null;case 5:if(Se(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(!l){if(r.stateNode===null)throw Error(a(166));return Ze(r),null}if(m=X.current,Qi(r))Ng(r);else{var w=Dl(ue.current);switch(m){case 1:m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=w.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?w.createElement("select",{is:l.is}):w.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?w.createElement(f,{is:l.is}):w.createElement(f)}}m[dt]=r,m[Et]=l;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=m;e:switch(xt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Pn(r)}}return Ze(r),Rd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,s),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Pn(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(a(166));if(t=ue.current,Qi(r)){if(t=r.stateNode,s=r.memoizedProps,l=null,f=vt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=r,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Gp(t.nodeValue,s)),t||mr(r,!0)}else t=Dl(t).createTextNode(l),t[dt]=r,r.stateNode=t}return Ze(r),null;case 31:if(s=r.memoizedState,t===null||t.memoizedState!==null){if(l=Qi(r),s!==null){if(t===null){if(!l)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[dt]=r}else ei(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ze(r),t=!1}else s=Bu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return r.flags&256?(Vt(r),r):(Vt(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Ze(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Qi(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[dt]=r}else ei(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ze(r),f=!1}else f=Bu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Vt(r),r):(Vt(r),null)}return Vt(r),(r.flags&128)!==0?(r.lanes=s,r):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),s!==t&&s&&(r.child.flags|=8192),bl(r,r.updateQueue),Ze(r),null);case 4:return de(),t===null&&Fd(r.stateNode.containerInfo),Ze(r),null;case 10:return Bn(r.type),Ze(r),null;case 19:if(M(nt),l=r.memoizedState,l===null)return Ze(r),null;if(f=(r.flags&128)!==0,m=l.rendering,m===null)if(f)xs(l,!1);else{if(et!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=sl(t),m!==null){for(r.flags|=128,xs(l,!1),t=m.updateQueue,r.updateQueue=t,bl(r,t),r.subtreeFlags=0,t=s,s=r.child;s!==null;)Sg(s,t),s=s.sibling;return Q(nt,nt.current&1|2),je&&Ln(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&yt()>El&&(r.flags|=128,f=!0,xs(l,!1),r.lanes=4194304)}else{if(!f)if(t=sl(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,bl(r,t),xs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!je)return Ze(r),null}else 2*yt()-l.renderingStartTime>El&&s!==536870912&&(r.flags|=128,f=!0,xs(l,!1),r.lanes=4194304);l.isBackwards?(m.sibling=r.child,r.child=m):(t=l.last,t!==null?t.sibling=m:r.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=yt(),t.sibling=null,s=nt.current,Q(nt,f?s&1|2:s&1),je&&Ln(r,l.treeForkCount),t):(Ze(r),null);case 22:case 23:return Vt(r),Wu(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(s&536870912)!==0&&(r.flags&128)===0&&(Ze(r),r.subtreeFlags&6&&(r.flags|=8192)):Ze(r),s=r.updateQueue,s!==null&&bl(r,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==s&&(r.flags|=2048),t!==null&&M(ri),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),r.memoizedState.cache!==s&&(r.flags|=2048),Bn(at),Ze(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function c_(t,r){switch(Lu(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Bn(at),de(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Se(r),null;case 31:if(r.memoizedState!==null){if(Vt(r),r.alternate===null)throw Error(a(340));ei()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Vt(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));ei()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return M(nt),null;case 4:return de(),null;case 10:return Bn(r.type),null;case 22:case 23:return Vt(r),Wu(),t!==null&&M(ri),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Bn(at),null;case 25:return null;default:return null}}function Qm(t,r){switch(Lu(r),r.tag){case 3:Bn(at),de();break;case 26:case 27:case 5:Se(r);break;case 4:de();break;case 31:r.memoizedState!==null&&Vt(r);break;case 13:Vt(r);break;case 19:M(nt);break;case 10:Bn(r.type);break;case 22:case 23:Vt(r),Wu(),t!==null&&M(ri);break;case 24:Bn(at)}}function _s(t,r){try{var s=r.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var f=l.next;s=f;do{if((s.tag&t)===t){l=void 0;var m=s.create,w=s.inst;l=m(),w.destroy=l}s=s.next}while(s!==f)}}catch(N){Be(r,r.return,N)}}function _r(t,r,s){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var w=l.inst,N=w.destroy;if(N!==void 0){w.destroy=void 0,f=r;var H=s,F=N;try{F()}catch(re){Be(f,H,re)}}}l=l.next}while(l!==m)}}catch(re){Be(r,r.return,re)}}function Jm(t){var r=t.updateQueue;if(r!==null){var s=t.stateNode;try{Ig(r,s)}catch(l){Be(t,t.return,l)}}}function Fm(t,r,s){s.props=li(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Be(t,r,l)}}function Ss(t,r){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(f){Be(t,r,f)}}function Tn(t,r){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(f){Be(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Be(t,r,f)}else s.current=null}function Wm(t){var r=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(f){Be(t,t.return,f)}}function kd(t,r,s){try{var l=t.stateNode;k_(l,t.type,s,r),l[Et]=r}catch(f){Be(t,t.return,f)}}function ep(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Or(t.type)||t.tag===4}function Md(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ep(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Or(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jd(t,r,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,r):(r=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.appendChild(t),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=zn));else if(l!==4&&(l===27&&Or(t.type)&&(s=t.stateNode,r=null),t=t.child,t!==null))for(jd(t,r,s),t=t.sibling;t!==null;)jd(t,r,s),t=t.sibling}function wl(t,r,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(l!==4&&(l===27&&Or(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(wl(t,r,s),t=t.sibling;t!==null;)wl(t,r,s),t=t.sibling}function tp(t){var r=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);xt(r,l,s),r[dt]=t,r[Et]=s}catch(m){Be(t,t.return,m)}}var Gn=!1,lt=!1,Dd=!1,np=typeof WeakSet=="function"?WeakSet:Set,pt=null;function u_(t,r){if(t=t.containerInfo,tf=Il,t=gg(t),Au(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var w=0,N=-1,H=-1,F=0,re=0,ae=t,W=null;t:for(;;){for(var ne;ae!==s||f!==0&&ae.nodeType!==3||(N=w+f),ae!==m||l!==0&&ae.nodeType!==3||(H=w+l),ae.nodeType===3&&(w+=ae.nodeValue.length),(ne=ae.firstChild)!==null;)W=ae,ae=ne;for(;;){if(ae===t)break t;if(W===s&&++F===f&&(N=w),W===m&&++re===l&&(H=w),(ne=ae.nextSibling)!==null)break;ae=W,W=ae.parentNode}ae=ne}s=N===-1||H===-1?null:{start:N,end:H}}else s=null}s=s||{start:0,end:0}}else s=null;for(nf={focusedElem:t,selectionRange:s},Il=!1,pt=r;pt!==null;)if(r=pt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,pt=t;else for(;pt!==null;){switch(r=pt,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)f=t[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,s=r,f=m.memoizedProps,m=m.memoizedState,l=s.stateNode;try{var fe=li(s.type,f);t=l.getSnapshotBeforeUpdate(fe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){Be(s,s.return,be)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,s=t.nodeType,s===9)sf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,pt=t;break}pt=r.return}}function rp(t,r,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Xn(t,s),l&4&&_s(5,s);break;case 1:if(Xn(t,s),l&4)if(t=s.stateNode,r===null)try{t.componentDidMount()}catch(w){Be(s,s.return,w)}else{var f=li(s.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(w){Be(s,s.return,w)}}l&64&&Jm(s),l&512&&Ss(s,s.return);break;case 3:if(Xn(t,s),l&64&&(t=s.updateQueue,t!==null)){if(r=null,s.child!==null)switch(s.child.tag){case 27:case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}try{Ig(t,r)}catch(w){Be(s,s.return,w)}}break;case 27:r===null&&l&4&&tp(s);case 26:case 5:Xn(t,s),r===null&&l&4&&Wm(s),l&512&&Ss(s,s.return);break;case 12:Xn(t,s);break;case 31:Xn(t,s),l&4&&sp(t,s);break;case 13:Xn(t,s),l&4&&op(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=b_.bind(null,s),H_(t,s))));break;case 22:if(l=s.memoizedState!==null||Gn,!l){r=r!==null&&r.memoizedState!==null||lt,f=Gn;var m=lt;Gn=l,(lt=r)&&!m?Kn(t,s,(s.subtreeFlags&8772)!==0):Xn(t,s),Gn=f,lt=m}break;case 30:break;default:Xn(t,s)}}function ip(t){var r=t.alternate;r!==null&&(t.alternate=null,ip(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Za(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,Mt=!1;function Yn(t,r,s){for(s=s.child;s!==null;)ap(t,r,s),s=s.sibling}function ap(t,r,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Gr,s)}catch{}switch(s.tag){case 26:lt||Tn(s,r),Yn(t,r,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:lt||Tn(s,r);var l=Qe,f=Mt;Or(s.type)&&(Qe=s.stateNode,Mt=!1),Yn(t,r,s),Ms(s.stateNode),Qe=l,Mt=f;break;case 5:lt||Tn(s,r);case 6:if(l=Qe,f=Mt,Qe=null,Yn(t,r,s),Qe=l,Mt=f,Qe!==null)if(Mt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(s.stateNode)}catch(m){Be(s,r,m)}else try{Qe.removeChild(s.stateNode)}catch(m){Be(s,r,m)}break;case 18:Qe!==null&&(Mt?(t=Qe,Jp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),ya(t)):Jp(Qe,s.stateNode));break;case 4:l=Qe,f=Mt,Qe=s.stateNode.containerInfo,Mt=!0,Yn(t,r,s),Qe=l,Mt=f;break;case 0:case 11:case 14:case 15:_r(2,s,r),lt||_r(4,s,r),Yn(t,r,s);break;case 1:lt||(Tn(s,r),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Fm(s,r,l)),Yn(t,r,s);break;case 21:Yn(t,r,s);break;case 22:lt=(l=lt)||s.memoizedState!==null,Yn(t,r,s),lt=l;break;default:Yn(t,r,s)}}function sp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ya(t)}catch(s){Be(r,r.return,s)}}}function op(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ya(t)}catch(s){Be(r,r.return,s)}}function d_(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new np),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new np),r;default:throw Error(a(435,t.tag))}}function xl(t,r){var s=d_(t);r.forEach(function(l){if(!s.has(l)){s.add(l);var f=w_.bind(null,t,l);l.then(f,f)}})}function jt(t,r){var s=r.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l],m=t,w=r,N=w;e:for(;N!==null;){switch(N.tag){case 27:if(Or(N.type)){Qe=N.stateNode,Mt=!1;break e}break;case 5:Qe=N.stateNode,Mt=!1;break e;case 3:case 4:Qe=N.stateNode.containerInfo,Mt=!0;break e}N=N.return}if(Qe===null)throw Error(a(160));ap(m,w,f),Qe=null,Mt=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)lp(r,t),r=r.sibling}var dn=null;function lp(t,r){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jt(r,t),Dt(t),l&4&&(_r(3,t,t.return),_s(3,t),_r(5,t,t.return));break;case 1:jt(r,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),l&64&&Gn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var f=dn;if(jt(r,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),l&4){var m=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Kr]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),xt(m,l,s),m[dt]=t,it(m),l=m;break e;case"link":var w=ly("link","href",f).get(l+(s.href||""));if(w){for(var N=0;N<w.length;N++)if(m=w[N],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){w.splice(N,1);break t}}m=f.createElement(l),xt(m,l,s),f.head.appendChild(m);break;case"meta":if(w=ly("meta","content",f).get(l+(s.content||""))){for(N=0;N<w.length;N++)if(m=w[N],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){w.splice(N,1);break t}}m=f.createElement(l),xt(m,l,s),f.head.appendChild(m);break;default:throw Error(a(468,l))}m[dt]=t,it(m),l=m}t.stateNode=l}else cy(f,t.type,t.stateNode);else t.stateNode=oy(f,l,t.memoizedProps);else m!==l?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,l===null?cy(f,t.type,t.stateNode):oy(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&kd(t,t.memoizedProps,s.memoizedProps)}break;case 27:jt(r,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),s!==null&&l&4&&kd(t,t.memoizedProps,s.memoizedProps);break;case 5:if(jt(r,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),t.flags&32){f=t.stateNode;try{Bi(f,"")}catch(fe){Be(t,t.return,fe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,kd(t,f,s!==null?s.memoizedProps:f)),l&1024&&(Dd=!0);break;case 6:if(jt(r,t),Dt(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(fe){Be(t,t.return,fe)}}break;case 3:if($l=null,f=dn,dn=zl(r.containerInfo),jt(r,t),dn=f,Dt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ya(r.containerInfo)}catch(fe){Be(t,t.return,fe)}Dd&&(Dd=!1,cp(t));break;case 4:l=dn,dn=zl(t.stateNode.containerInfo),jt(r,t),Dt(t),dn=l;break;case 12:jt(r,t),Dt(t);break;case 31:jt(r,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xl(t,l)));break;case 13:jt(r,t),Dt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Sl=yt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xl(t,l)));break;case 22:f=t.memoizedState!==null;var H=s!==null&&s.memoizedState!==null,F=Gn,re=lt;if(Gn=F||f,lt=re||H,jt(r,t),lt=re,Gn=F,Dt(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(s===null||H||Gn||lt||ci(t)),s=null,r=t;;){if(r.tag===5||r.tag===26){if(s===null){H=s=r;try{if(m=H.stateNode,f)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{N=H.stateNode;var ae=H.memoizedProps.style,W=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;N.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(fe){Be(H,H.return,fe)}}}else if(r.tag===6){if(s===null){H=r;try{H.stateNode.nodeValue=f?"":H.memoizedProps}catch(fe){Be(H,H.return,fe)}}}else if(r.tag===18){if(s===null){H=r;try{var ne=H.stateNode;f?Fp(ne,!0):Fp(H.stateNode,!1)}catch(fe){Be(H,H.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;s===r&&(s=null),r=r.return}s===r&&(s=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,xl(t,s))));break;case 19:jt(r,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xl(t,l)));break;case 30:break;case 21:break;default:jt(r,t),Dt(t)}}function Dt(t){var r=t.flags;if(r&2){try{for(var s,l=t.return;l!==null;){if(ep(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var f=s.stateNode,m=Md(t);wl(t,m,f);break;case 5:var w=s.stateNode;s.flags&32&&(Bi(w,""),s.flags&=-33);var N=Md(t);wl(t,N,w);break;case 3:case 4:var H=s.stateNode.containerInfo,F=Md(t);jd(t,F,H);break;default:throw Error(a(161))}}catch(re){Be(t,t.return,re)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function cp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;cp(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Xn(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)rp(t,r.alternate,r),r=r.sibling}function ci(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:_r(4,r,r.return),ci(r);break;case 1:Tn(r,r.return);var s=r.stateNode;typeof s.componentWillUnmount=="function"&&Fm(r,r.return,s),ci(r);break;case 27:Ms(r.stateNode);case 26:case 5:Tn(r,r.return),ci(r);break;case 22:r.memoizedState===null&&ci(r);break;case 30:ci(r);break;default:ci(r)}t=t.sibling}}function Kn(t,r,s){for(s=s&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,m=r,w=m.flags;switch(m.tag){case 0:case 11:case 15:Kn(f,m,s),_s(4,m);break;case 1:if(Kn(f,m,s),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){Be(l,l.return,F)}if(l=m,f=l.updateQueue,f!==null){var N=l.stateNode;try{var H=f.shared.hiddenCallbacks;if(H!==null)for(f.shared.hiddenCallbacks=null,f=0;f<H.length;f++)Bg(H[f],N)}catch(F){Be(l,l.return,F)}}s&&w&64&&Jm(m),Ss(m,m.return);break;case 27:tp(m);case 26:case 5:Kn(f,m,s),s&&l===null&&w&4&&Wm(m),Ss(m,m.return);break;case 12:Kn(f,m,s);break;case 31:Kn(f,m,s),s&&w&4&&sp(f,m);break;case 13:Kn(f,m,s),s&&w&4&&op(f,m);break;case 22:m.memoizedState===null&&Kn(f,m,s),Ss(m,m.return);break;case 30:break;default:Kn(f,m,s)}r=r.sibling}}function zd(t,r){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&cs(s))}function Ud(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&cs(t))}function fn(t,r,s,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)up(t,r,s,l),r=r.sibling}function up(t,r,s,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:fn(t,r,s,l),f&2048&&_s(9,r);break;case 1:fn(t,r,s,l);break;case 3:fn(t,r,s,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&cs(t)));break;case 12:if(f&2048){fn(t,r,s,l),t=r.stateNode;try{var m=r.memoizedProps,w=m.id,N=m.onPostCommit;typeof N=="function"&&N(w,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(H){Be(r,r.return,H)}}else fn(t,r,s,l);break;case 31:fn(t,r,s,l);break;case 13:fn(t,r,s,l);break;case 23:break;case 22:m=r.stateNode,w=r.alternate,r.memoizedState!==null?m._visibility&2?fn(t,r,s,l):Es(t,r):m._visibility&2?fn(t,r,s,l):(m._visibility|=2,sa(t,r,s,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&zd(w,r);break;case 24:fn(t,r,s,l),f&2048&&Ud(r.alternate,r);break;default:fn(t,r,s,l)}}function sa(t,r,s,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,w=r,N=s,H=l,F=w.flags;switch(w.tag){case 0:case 11:case 15:sa(m,w,N,H,f),_s(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?sa(m,w,N,H,f):Es(m,w):(re._visibility|=2,sa(m,w,N,H,f)),f&&F&2048&&zd(w.alternate,w);break;case 24:sa(m,w,N,H,f),f&&F&2048&&Ud(w.alternate,w);break;default:sa(m,w,N,H,f)}r=r.sibling}}function Es(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var s=t,l=r,f=l.flags;switch(l.tag){case 22:Es(s,l),f&2048&&zd(l.alternate,l);break;case 24:Es(s,l),f&2048&&Ud(l.alternate,l);break;default:Es(s,l)}r=r.sibling}}var Ts=8192;function oa(t,r,s){if(t.subtreeFlags&Ts)for(t=t.child;t!==null;)dp(t,r,s),t=t.sibling}function dp(t,r,s){switch(t.tag){case 26:oa(t,r,s),t.flags&Ts&&t.memoizedState!==null&&J_(s,dn,t.memoizedState,t.memoizedProps);break;case 5:oa(t,r,s);break;case 3:case 4:var l=dn;dn=zl(t.stateNode.containerInfo),oa(t,r,s),dn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ts,Ts=16777216,oa(t,r,s),Ts=l):oa(t,r,s));break;default:oa(t,r,s)}}function fp(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Cs(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];pt=l,gp(l,t)}fp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hp(t),t=t.sibling}function hp(t){switch(t.tag){case 0:case 11:case 15:Cs(t),t.flags&2048&&_r(9,t,t.return);break;case 3:Cs(t);break;case 12:Cs(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,_l(t)):Cs(t);break;default:Cs(t)}}function _l(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];pt=l,gp(l,t)}fp(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:_r(8,r,r.return),_l(r);break;case 22:s=r.stateNode,s._visibility&2&&(s._visibility&=-3,_l(r));break;default:_l(r)}t=t.sibling}}function gp(t,r){for(;pt!==null;){var s=pt;switch(s.tag){case 0:case 11:case 15:_r(8,s,r);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cs(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,pt=l;else e:for(s=t;pt!==null;){l=pt;var f=l.sibling,m=l.return;if(ip(l),l===s){pt=null;break e}if(f!==null){f.return=m,pt=f;break e}pt=m}}}var f_={getCacheForType:function(t){var r=bt(at),s=r.data.get(t);return s===void 0&&(s=t(),r.data.set(t,s)),s},cacheSignal:function(){return bt(at).controller.signal}},h_=typeof WeakMap=="function"?WeakMap:Map,$e=0,Ye=null,Oe=null,ke=0,He=0,Pt=null,Sr=!1,la=!1,$d=!1,Zn=0,et=0,Er=0,ui=0,Ld=0,Gt=0,ca=0,As=null,zt=null,Hd=!1,Sl=0,mp=0,El=1/0,Tl=null,Tr=null,ft=0,Cr=null,ua=null,Qn=0,Bd=0,Id=null,pp=null,Ns=0,qd=null;function Yt(){return($e&2)!==0&&ke!==0?ke&-ke:R.T!==null?Kd():Oo()}function yp(){if(Gt===0)if((ke&536870912)===0||je){var t=Ri;Ri<<=1,(Ri&3932160)===0&&(Ri=262144),Gt=t}else Gt=536870912;return t=qt.current,t!==null&&(t.flags|=32),Gt}function Ut(t,r,s){(t===Ye&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(da(t,0),Ar(t,ke,Gt,!1)),Xr(t,s),(($e&2)===0||t!==Ye)&&(t===Ye&&(($e&2)===0&&(ui|=s),et===4&&Ar(t,ke,Gt,!1)),Cn(t))}function vp(t,r,s){if(($e&6)!==0)throw Error(a(327));var l=!s&&(r&127)===0&&(r&t.expiredLanes)===0||Yr(t,r),f=l?p_(t,r):Pd(t,r,!0),m=l;do{if(f===0){la&&!l&&Ar(t,r,0,!1);break}else{if(s=t.current.alternate,m&&!g_(s)){f=Pd(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var N=t;f=As;var H=N.current.memoizedState.isDehydrated;if(H&&(da(N,w).flags|=256),w=Pd(N,w,!1),w!==2){if($d&&!H){N.errorRecoveryDisabledLanes|=m,ui|=m,f=4;break e}m=zt,zt=f,m!==null&&(zt===null?zt=m:zt.push.apply(zt,m))}f=w}if(m=!1,f!==2)continue}}if(f===1){da(t,0),Ar(t,r,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:Ar(l,r,Gt,!Sr);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=Sl+300-yt(),10<f)){if(Ar(l,r,Gt,!Sr),Mi(l,0,!0)!==0)break e;Qn=r,l.timeoutHandle=Zp(bp.bind(null,l,s,zt,Tl,Hd,r,Gt,ui,ca,Sr,m,"Throttled",-0,0),f);break e}bp(l,s,zt,Tl,Hd,r,Gt,ui,ca,Sr,m,null,-0,0)}}break}while(!0);Cn(t)}function bp(t,r,s,l,f,m,w,N,H,F,re,ae,W,ne){if(t.timeoutHandle=-1,ae=r.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},dp(r,m,ae);var fe=(m&62914560)===m?Sl-yt():(m&4194048)===m?mp-yt():0;if(fe=F_(ae,fe),fe!==null){Qn=m,t.cancelPendingCommit=fe(Ap.bind(null,t,r,m,s,l,f,w,N,H,re,ae,null,W,ne)),Ar(t,m,w,!F);return}}Ap(t,r,m,s,l,f,w,N,H)}function g_(t){for(var r=t;;){var s=r.tag;if((s===0||s===11||s===15)&&r.flags&16384&&(s=r.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var f=s[l],m=f.getSnapshot;f=f.value;try{if(!Bt(m(),f))return!1}catch{return!1}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ar(t,r,s,l){r&=~Ld,r&=~ui,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var m=31-Nt(f),w=1<<m;l[m]=-1,f&=~w}s!==0&&Co(t,s,r)}function Cl(){return($e&6)===0?(Os(0),!1):!0}function Vd(){if(Oe!==null){if(He===0)var t=Oe.return;else t=Oe,Hn=ti=null,ad(t),ta=null,ds=0,t=Oe;for(;t!==null;)Qm(t.alternate,t),t=t.return;Oe=null}}function da(t,r){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,D_(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Qn=0,Vd(),Ye=t,Oe=s=$n(t.current,null),ke=r,He=0,Pt=null,Sr=!1,la=Yr(t,r),$d=!1,ca=Gt=Ld=ui=Er=et=0,zt=As=null,Hd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-Nt(l),m=1<<f;r|=t[f],l&=~m}return Zn=r,Xo(),s}function wp(t,r){Ae=null,R.H=bs,r===ea||r===tl?(r=Ug(),He=3):r===Xu?(r=Ug(),He=4):He=r===xd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Pt=r,Oe===null&&(et=1,ml(t,en(r,t.current)))}function xp(){var t=qt.current;return t===null?!0:(ke&4194048)===ke?an===null:(ke&62914560)===ke||(ke&536870912)!==0?t===an:!1}function _p(){var t=R.H;return R.H=bs,t===null?bs:t}function Sp(){var t=R.A;return R.A=f_,t}function Al(){et=4,Sr||(ke&4194048)!==ke&&qt.current!==null||(la=!0),(Er&134217727)===0&&(ui&134217727)===0||Ye===null||Ar(Ye,ke,Gt,!1)}function Pd(t,r,s){var l=$e;$e|=2;var f=_p(),m=Sp();(Ye!==t||ke!==r)&&(Tl=null,da(t,r)),r=!1;var w=et;e:do try{if(He!==0&&Oe!==null){var N=Oe,H=Pt;switch(He){case 8:Vd(),w=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(r=!0);var F=He;if(He=0,Pt=null,fa(t,N,H,F),s&&la){w=0;break e}break;default:F=He,He=0,Pt=null,fa(t,N,H,F)}}m_(),w=et;break}catch(re){wp(t,re)}while(!0);return r&&t.shellSuspendCounter++,Hn=ti=null,$e=l,R.H=f,R.A=m,Oe===null&&(Ye=null,ke=0,Xo()),w}function m_(){for(;Oe!==null;)Ep(Oe)}function p_(t,r){var s=$e;$e|=2;var l=_p(),f=Sp();Ye!==t||ke!==r?(Tl=null,El=yt()+500,da(t,r)):la=Yr(t,r);e:do try{if(He!==0&&Oe!==null){r=Oe;var m=Pt;t:switch(He){case 1:He=0,Pt=null,fa(t,r,m,1);break;case 2:case 9:if(Dg(m)){He=0,Pt=null,Tp(r);break}r=function(){He!==2&&He!==9||Ye!==t||(He=7),Cn(t)},m.then(r,r);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:Dg(m)?(He=0,Pt=null,Tp(r)):(He=0,Pt=null,fa(t,r,m,7));break;case 5:var w=null;switch(Oe.tag){case 26:w=Oe.memoizedState;case 5:case 27:var N=Oe;if(w?uy(w):N.stateNode.complete){He=0,Pt=null;var H=N.sibling;if(H!==null)Oe=H;else{var F=N.return;F!==null?(Oe=F,Nl(F)):Oe=null}break t}}He=0,Pt=null,fa(t,r,m,5);break;case 6:He=0,Pt=null,fa(t,r,m,6);break;case 8:Vd(),et=6;break e;default:throw Error(a(462))}}y_();break}catch(re){wp(t,re)}while(!0);return Hn=ti=null,R.H=l,R.A=f,$e=s,Oe!==null?0:(Ye=null,ke=0,Xo(),et)}function y_(){for(;Oe!==null&&!qr();)Ep(Oe)}function Ep(t){var r=Km(t.alternate,t,Zn);t.memoizedProps=t.pendingProps,r===null?Nl(t):Oe=r}function Tp(t){var r=t,s=r.alternate;switch(r.tag){case 15:case 0:r=qm(s,r,r.pendingProps,r.type,void 0,ke);break;case 11:r=qm(s,r,r.pendingProps,r.type.render,r.ref,ke);break;case 5:ad(r);default:Qm(s,r),r=Oe=Sg(r,Zn),r=Km(s,r,Zn)}t.memoizedProps=t.pendingProps,r===null?Nl(t):Oe=r}function fa(t,r,s,l){Hn=ti=null,ad(r),ta=null,ds=0;var f=r.return;try{if(a_(t,f,r,s,ke)){et=1,ml(t,en(s,t.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;et=1,ml(t,en(s,t.current)),Oe=null;return}r.flags&32768?(je||l===1?t=!0:la||(ke&536870912)!==0?t=!1:(Sr=t=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Cp(r,t)):Nl(r)}function Nl(t){var r=t;do{if((r.flags&32768)!==0){Cp(r,Sr);return}t=r.return;var s=l_(r.alternate,r,Zn);if(s!==null){Oe=s;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=t}while(r!==null);et===0&&(et=5)}function Cp(t,r){do{var s=c_(t.alternate,t);if(s!==null){s.flags&=32767,Oe=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!r&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=s}while(t!==null);et=6,Oe=null}function Ap(t,r,s,l,f,m,w,N,H){t.cancelPendingCommit=null;do Ol();while(ft!==0);if(($e&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=Mu,lu(t,s,m,w,N,H),t===Ye&&(Oe=Ye=null,ke=0),ua=r,Cr=t,Qn=s,Bd=m,Id=f,pp=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,x_(Pr,function(){return Mp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=R.T,R.T=null,f=$.p,$.p=2,w=$e,$e|=4;try{u_(t,r,s)}finally{$e=w,$.p=f,R.T=l}}ft=1,Np(),Op(),Rp()}}function Np(){if(ft===1){ft=0;var t=Cr,r=ua,s=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||s){s=R.T,R.T=null;var l=$.p;$.p=2;var f=$e;$e|=4;try{lp(r,t);var m=nf,w=gg(t.containerInfo),N=m.focusedElem,H=m.selectionRange;if(w!==N&&N&&N.ownerDocument&&hg(N.ownerDocument.documentElement,N)){if(H!==null&&Au(N)){var F=H.start,re=H.end;if(re===void 0&&(re=F),"selectionStart"in N)N.selectionStart=F,N.selectionEnd=Math.min(re,N.value.length);else{var ae=N.ownerDocument||document,W=ae&&ae.defaultView||window;if(W.getSelection){var ne=W.getSelection(),fe=N.textContent.length,be=Math.min(H.start,fe),Pe=H.end===void 0?be:Math.min(H.end,fe);!ne.extend&&be>Pe&&(w=Pe,Pe=be,be=w);var Y=fg(N,be),I=fg(N,Pe);if(Y&&I&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==I.node||ne.focusOffset!==I.offset)){var J=ae.createRange();J.setStart(Y.node,Y.offset),ne.removeAllRanges(),be>Pe?(ne.addRange(J),ne.extend(I.node,I.offset)):(J.setEnd(I.node,I.offset),ne.addRange(J))}}}}for(ae=[],ne=N;ne=ne.parentNode;)ne.nodeType===1&&ae.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ae.length;N++){var ie=ae[N];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Il=!!tf,nf=tf=null}finally{$e=f,$.p=l,R.T=s}}t.current=r,ft=2}}function Op(){if(ft===2){ft=0;var t=Cr,r=ua,s=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||s){s=R.T,R.T=null;var l=$.p;$.p=2;var f=$e;$e|=4;try{rp(t,r.alternate,r)}finally{$e=f,$.p=l,R.T=s}}ft=3}}function Rp(){if(ft===4||ft===3){ft=0,Vr();var t=Cr,r=ua,s=Qn,l=pp;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ft=5:(ft=0,ua=Cr=null,kp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Tr=null),Ka(s),r=r.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Gr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=R.T,f=$.p,$.p=2,R.T=null;try{for(var m=t.onRecoverableError,w=0;w<l.length;w++){var N=l[w];m(N.value,{componentStack:N.stack})}}finally{R.T=r,$.p=f}}(Qn&3)!==0&&Ol(),Cn(t),f=t.pendingLanes,(s&261930)!==0&&(f&42)!==0?t===qd?Ns++:(Ns=0,qd=t):Ns=0,Os(0)}}function kp(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,cs(r)))}function Ol(){return Np(),Op(),Rp(),Mp()}function Mp(){if(ft!==5)return!1;var t=Cr,r=Bd;Bd=0;var s=Ka(Qn),l=R.T,f=$.p;try{$.p=32>s?32:s,R.T=null,s=Id,Id=null;var m=Cr,w=Qn;if(ft=0,ua=Cr=null,Qn=0,($e&6)!==0)throw Error(a(331));var N=$e;if($e|=4,hp(m.current),up(m,m.current,w,s),$e=N,Os(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Gr,m)}catch{}return!0}finally{$.p=f,R.T=l,kp(t,r)}}function jp(t,r,s){r=en(s,r),r=wd(t.stateNode,r,2),t=br(t,r,2),t!==null&&(Xr(t,2),Cn(t))}function Be(t,r,s){if(t.tag===3)jp(t,t,s);else for(;r!==null;){if(r.tag===3){jp(r,t,s);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Tr===null||!Tr.has(l))){t=en(s,t),s=Dm(2),l=br(r,s,2),l!==null&&(zm(s,l,r,t),Xr(l,2),Cn(l));break}}r=r.return}}function Gd(t,r,s){var l=t.pingCache;if(l===null){l=t.pingCache=new h_;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(s)||($d=!0,f.add(s),t=v_.bind(null,t,r,s),r.then(t,t))}function v_(t,r,s){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Ye===t&&(ke&s)===s&&(et===4||et===3&&(ke&62914560)===ke&&300>yt()-Sl?($e&2)===0&&da(t,0):Ld|=s,ca===ke&&(ca=0)),Cn(t)}function Dp(t,r){r===0&&(r=To()),t=Fr(t,r),t!==null&&(Xr(t,r),Cn(t))}function b_(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),Dp(t,s)}function w_(t,r){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(r),Dp(t,s)}function x_(t,r){return ir(t,r)}var Rl=null,ha=null,Yd=!1,kl=!1,Xd=!1,Nr=0;function Cn(t){t!==ha&&t.next===null&&(ha===null?Rl=ha=t:ha=ha.next=t),kl=!0,Yd||(Yd=!0,S_())}function Os(t,r){if(!Xd&&kl){Xd=!0;do for(var s=!1,l=Rl;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var w=l.suspendedLanes,N=l.pingedLanes;m=(1<<31-Nt(42|t)+1)-1,m&=f&~(w&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,Lp(l,m))}else m=ke,m=Mi(l,l===Ye?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Yr(l,m)||(s=!0,Lp(l,m));l=l.next}while(s);Xd=!1}}function __(){zp()}function zp(){kl=Yd=!1;var t=0;Nr!==0&&j_()&&(t=Nr);for(var r=yt(),s=null,l=Rl;l!==null;){var f=l.next,m=Up(l,r);m===0?(l.next=null,s===null?Rl=f:s.next=f,f===null&&(ha=s)):(s=l,(t!==0||(m&3)!==0)&&(kl=!0)),l=f}ft!==0&&ft!==5||Os(t),Nr!==0&&(Nr=0)}function Up(t,r){for(var s=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var w=31-Nt(m),N=1<<w,H=f[w];H===-1?((N&s)===0||(N&l)!==0)&&(f[w]=ou(N,r)):H<=r&&(t.expiredLanes|=N),m&=~N}if(r=Ye,s=ke,s=Mi(t,t===r?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===r&&(He===2||He===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ar(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Yr(t,s)){if(r=s&-s,r===t.callbackPriority)return r;switch(l!==null&&ar(l),Ka(s)){case 2:case 8:s=sr;break;case 32:s=Pr;break;case 268435456:s=Ni;break;default:s=Pr}return l=$p.bind(null,t),s=ir(s,l),t.callbackPriority=r,t.callbackNode=s,r}return l!==null&&l!==null&&ar(l),t.callbackPriority=2,t.callbackNode=null,2}function $p(t,r){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Ol()&&t.callbackNode!==s)return null;var l=ke;return l=Mi(t,t===Ye?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(vp(t,l,r),Up(t,yt()),t.callbackNode!=null&&t.callbackNode===s?$p.bind(null,t):null)}function Lp(t,r){if(Ol())return null;vp(t,r,!0)}function S_(){z_(function(){($e&6)!==0?ir(kn,__):zp()})}function Kd(){if(Nr===0){var t=Fi;t===0&&(t=Oi,Oi<<=1,(Oi&261888)===0&&(Oi=256)),Nr=t}return Nr}function Hp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ho(""+t)}function Bp(t,r){var s=r.ownerDocument.createElement("input");return s.name=r.name,s.value=r.value,t.id&&s.setAttribute("form",t.id),r.parentNode.insertBefore(s,r),t=new FormData(t),s.parentNode.removeChild(s),t}function E_(t,r,s,l,f){if(r==="submit"&&s&&s.stateNode===f){var m=Hp((f[Et]||null).action),w=l.submitter;w&&(r=(r=w[Et]||null)?Hp(r.formAction):w.getAttribute("formAction"),r!==null&&(m=r,w=null));var N=new Vo("action","action",null,l,f);t.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Nr!==0){var H=w?Bp(f,w):new FormData(f);gd(s,{pending:!0,data:H,method:f.method,action:m},null,H)}}else typeof m=="function"&&(N.preventDefault(),H=w?Bp(f,w):new FormData(f),gd(s,{pending:!0,data:H,method:f.method,action:m},m,H))},currentTarget:f}]})}}for(var Zd=0;Zd<ku.length;Zd++){var Qd=ku[Zd],T_=Qd.toLowerCase(),C_=Qd[0].toUpperCase()+Qd.slice(1);un(T_,"on"+C_)}un(yg,"onAnimationEnd"),un(vg,"onAnimationIteration"),un(bg,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(qx,"onTransitionRun"),un(Vx,"onTransitionStart"),un(Px,"onTransitionCancel"),un(wg,"onTransitionEnd"),dr("onMouseEnter",["mouseout","mouseover"]),dr("onMouseLeave",["mouseout","mouseover"]),dr("onPointerEnter",["pointerout","pointerover"]),dr("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rs));function Ip(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],f=l.event;l=l.listeners;e:{var m=void 0;if(r)for(var w=l.length-1;0<=w;w--){var N=l[w],H=N.instance,F=N.currentTarget;if(N=N.listener,H!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=F;try{m(f)}catch(re){Yo(re)}f.currentTarget=null,m=H}else for(w=0;w<l.length;w++){if(N=l[w],H=N.instance,F=N.currentTarget,N=N.listener,H!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=F;try{m(f)}catch(re){Yo(re)}f.currentTarget=null,m=H}}}}function Re(t,r){var s=r[ji];s===void 0&&(s=r[ji]=new Set);var l=t+"__bubble";s.has(l)||(qp(r,t,2,!1),s.add(l))}function Jd(t,r,s){var l=0;r&&(l|=4),qp(s,t,l,r)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Fd(t){if(!t[Ml]){t[Ml]=!0,jo.forEach(function(s){s!=="selectionchange"&&(A_.has(s)||Jd(s,!1,t),Jd(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ml]||(r[Ml]=!0,Jd("selectionchange",!1,r))}}function qp(t,r,s,l){switch(yy(r)){case 2:var f=tS;break;case 8:f=nS;break;default:f=gf}s=f.bind(null,r,s,t),f=void 0,!vu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,s,{capture:!0,passive:f}):t.addEventListener(r,s,!0):f!==void 0?t.addEventListener(r,s,{passive:f}):t.addEventListener(r,s,!1)}function Wd(t,r,s,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var N=l.stateNode.containerInfo;if(N===f)break;if(w===4)for(w=l.return;w!==null;){var H=w.tag;if((H===3||H===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;N!==null;){if(w=or(N),w===null)return;if(H=w.tag,H===5||H===6||H===26||H===27){l=m=w;continue e}N=N.parentNode}}l=l.return}Xh(function(){var F=m,re=pu(s),ae=[];e:{var W=xg.get(t);if(W!==void 0){var ne=Vo,fe=t;switch(t){case"keypress":if(Io(s)===0)break e;case"keydown":case"keyup":ne=wx;break;case"focusin":fe="focus",ne=_u;break;case"focusout":fe="blur",ne=_u;break;case"beforeblur":case"afterblur":ne=_u;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Qh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=lx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Sx;break;case yg:case vg:case bg:ne=dx;break;case wg:ne=Tx;break;case"scroll":case"scrollend":ne=sx;break;case"wheel":ne=Ax;break;case"copy":case"cut":case"paste":ne=hx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Fh;break;case"toggle":case"beforetoggle":ne=Ox}var be=(r&4)!==0,Pe=!be&&(t==="scroll"||t==="scrollend"),Y=be?W!==null?W+"Capture":null:W;be=[];for(var I=F,J;I!==null;){var ie=I;if(J=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||J===null||Y===null||(ie=Fa(I,Y),ie!=null&&be.push(ks(I,ie,J))),Pe)break;I=I.return}0<be.length&&(W=new ne(W,fe,null,s,re),ae.push({event:W,listeners:be}))}}if((r&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",W&&s!==mu&&(fe=s.relatedTarget||s.fromElement)&&(or(fe)||fe[jn]))break e;if((ne||W)&&(W=re.window===re?re:(W=re.ownerDocument)?W.defaultView||W.parentWindow:window,ne?(fe=s.relatedTarget||s.toElement,ne=F,fe=fe?or(fe):null,fe!==null&&(Pe=c(fe),be=fe.tag,fe!==Pe||be!==5&&be!==27&&be!==6)&&(fe=null)):(ne=null,fe=F),ne!==fe)){if(be=Qh,ie="onMouseLeave",Y="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(be=Fh,ie="onPointerLeave",Y="onPointerEnter",I="pointer"),Pe=ne==null?W:cr(ne),J=fe==null?W:cr(fe),W=new be(ie,I+"leave",ne,s,re),W.target=Pe,W.relatedTarget=J,ie=null,or(re)===F&&(be=new be(Y,I+"enter",fe,s,re),be.target=J,be.relatedTarget=Pe,ie=be),Pe=ie,ne&&fe)t:{for(be=N_,Y=ne,I=fe,J=0,ie=Y;ie;ie=be(ie))J++;ie=0;for(var ye=I;ye;ye=be(ye))ie++;for(;0<J-ie;)Y=be(Y),J--;for(;0<ie-J;)I=be(I),ie--;for(;J--;){if(Y===I||I!==null&&Y===I.alternate){be=Y;break t}Y=be(Y),I=be(I)}be=null}else be=null;ne!==null&&Vp(ae,W,ne,be,!1),fe!==null&&Pe!==null&&Vp(ae,Pe,fe,be,!0)}}e:{if(W=F?cr(F):window,ne=W.nodeName&&W.nodeName.toLowerCase(),ne==="select"||ne==="input"&&W.type==="file")var ze=sg;else if(ig(W))if(og)ze=Hx;else{ze=$x;var ge=Ux}else ne=W.nodeName,!ne||ne.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?F&&gu(F.elementType)&&(ze=sg):ze=Lx;if(ze&&(ze=ze(t,F))){ag(ae,ze,s,re);break e}ge&&ge(t,W,F),t==="focusout"&&F&&W.type==="number"&&F.memoizedProps.value!=null&&Li(W,"number",W.value)}switch(ge=F?cr(F):window,t){case"focusin":(ig(ge)||ge.contentEditable==="true")&&(Pi=ge,Nu=F,ss=null);break;case"focusout":ss=Nu=Pi=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,mg(ae,s,re);break;case"selectionchange":if(Ix)break;case"keydown":case"keyup":mg(ae,s,re)}var Ne;if(Eu)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Vi?ng(t,s)&&(Me="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Me="onCompositionStart");Me&&(Wh&&s.locale!=="ko"&&(Vi||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Vi&&(Ne=Kh()):(fr=re,bu="value"in fr?fr.value:fr.textContent,Vi=!0)),ge=jl(F,Me),0<ge.length&&(Me=new Jh(Me,t,null,s,re),ae.push({event:Me,listeners:ge}),Ne?Me.data=Ne:(Ne=rg(s),Ne!==null&&(Me.data=Ne)))),(Ne=kx?Mx(t,s):jx(t,s))&&(Me=jl(F,"onBeforeInput"),0<Me.length&&(ge=new Jh("onBeforeInput","beforeinput",null,s,re),ae.push({event:ge,listeners:Me}),ge.data=Ne)),E_(ae,t,F,s,re)}Ip(ae,r)})}function ks(t,r,s){return{instance:t,listener:r,currentTarget:s}}function jl(t,r){for(var s=r+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Fa(t,s),f!=null&&l.unshift(ks(t,f,m)),f=Fa(t,r),f!=null&&l.push(ks(t,f,m))),t.tag===3)return l;t=t.return}return[]}function N_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vp(t,r,s,l,f){for(var m=r._reactName,w=[];s!==null&&s!==l;){var N=s,H=N.alternate,F=N.stateNode;if(N=N.tag,H!==null&&H===l)break;N!==5&&N!==26&&N!==27||F===null||(H=F,f?(F=Fa(s,m),F!=null&&w.unshift(ks(s,F,H))):f||(F=Fa(s,m),F!=null&&w.push(ks(s,F,H)))),s=s.return}w.length!==0&&t.push({event:r,listeners:w})}var O_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function Pp(t){return(typeof t=="string"?t:""+t).replace(O_,`
`).replace(R_,"")}function Gp(t,r){return r=Pp(r),Pp(t)===r}function Ve(t,r,s,l,f,m){switch(s){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Bi(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Bi(t,""+l);break;case"className":zi(t,"class",l);break;case"tabIndex":zi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":zi(t,s,l);break;case"style":Gh(t,l,m);break;case"data":if(r!=="object"){zi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Ho(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(r!=="input"&&Ve(t,r,"name",f.name,f,null),Ve(t,r,"formEncType",f.formEncType,f,null),Ve(t,r,"formMethod",f.formMethod,f,null),Ve(t,r,"formTarget",f.formTarget,f,null)):(Ve(t,r,"encType",f.encType,f,null),Ve(t,r,"method",f.method,f,null),Ve(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Ho(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=zn);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Ho(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Re("beforetoggle",t),Re("toggle",t),Di(t,"popover",l);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Di(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ix.get(s)||s,Di(t,s,l))}}function ef(t,r,s,l,f,m){switch(s){case"style":Gh(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Bi(t,l):(typeof l=="number"||typeof l=="bigint")&&Bi(t,""+l);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Do.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),r=s.slice(2,f?s.length-7:void 0),m=t[Et]||null,m=m!=null?m[s]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(r,l,f);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Di(t,s,l)}}}function xt(t,r,s){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",t),Re("load",t);var l=!1,f=!1,m;for(m in s)if(s.hasOwnProperty(m)){var w=s[m];if(w!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Ve(t,r,m,w,s,null)}}f&&Ve(t,r,"srcSet",s.srcSet,s,null),l&&Ve(t,r,"src",s.src,s,null);return;case"input":Re("invalid",t);var N=m=w=f=null,H=null,F=null;for(l in s)if(s.hasOwnProperty(l)){var re=s[l];if(re!=null)switch(l){case"name":f=re;break;case"type":w=re;break;case"checked":H=re;break;case"defaultChecked":F=re;break;case"value":m=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(a(137,r));break;default:Ve(t,r,l,re,s,null)}}Lo(t,m,N,H,F,w,f,!1);return;case"select":Re("invalid",t),l=w=m=null;for(f in s)if(s.hasOwnProperty(f)&&(N=s[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":w=N;break;case"multiple":l=N;default:Ve(t,r,f,N,s,null)}r=m,s=w,t.multiple=!!l,r!=null?Hi(t,!!l,r,!1):s!=null&&Hi(t,!!l,s,!0);return;case"textarea":Re("invalid",t),m=f=l=null;for(w in s)if(s.hasOwnProperty(w)&&(N=s[w],N!=null))switch(w){case"value":l=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:Ve(t,r,w,N,s,null)}Vh(t,l,f,m);return;case"option":for(H in s)if(s.hasOwnProperty(H)&&(l=s[H],l!=null))switch(H){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ve(t,r,H,l,s,null)}return;case"dialog":Re("beforetoggle",t),Re("toggle",t),Re("cancel",t),Re("close",t);break;case"iframe":case"object":Re("load",t);break;case"video":case"audio":for(l=0;l<Rs.length;l++)Re(Rs[l],t);break;case"image":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"embed":case"source":case"link":Re("error",t),Re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in s)if(s.hasOwnProperty(F)&&(l=s[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Ve(t,r,F,l,s,null)}return;default:if(gu(r)){for(re in s)s.hasOwnProperty(re)&&(l=s[re],l!==void 0&&ef(t,r,re,l,s,void 0));return}}for(N in s)s.hasOwnProperty(N)&&(l=s[N],l!=null&&Ve(t,r,N,l,s,null))}function k_(t,r,s,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,w=null,N=null,H=null,F=null,re=null;for(ne in s){var ae=s[ne];if(s.hasOwnProperty(ne)&&ae!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":H=ae;default:l.hasOwnProperty(ne)||Ve(t,r,ne,null,l,ae)}}for(var W in l){var ne=l[W];if(ae=s[W],l.hasOwnProperty(W)&&(ne!=null||ae!=null))switch(W){case"type":m=ne;break;case"name":f=ne;break;case"checked":F=ne;break;case"defaultChecked":re=ne;break;case"value":w=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,r));break;default:ne!==ae&&Ve(t,r,W,ne,l,ae)}}Ja(t,w,N,H,F,re,m,f);return;case"select":ne=w=N=W=null;for(m in s)if(H=s[m],s.hasOwnProperty(m)&&H!=null)switch(m){case"value":break;case"multiple":ne=H;default:l.hasOwnProperty(m)||Ve(t,r,m,null,l,H)}for(f in l)if(m=l[f],H=s[f],l.hasOwnProperty(f)&&(m!=null||H!=null))switch(f){case"value":W=m;break;case"defaultValue":N=m;break;case"multiple":w=m;default:m!==H&&Ve(t,r,f,m,l,H)}r=N,s=w,l=ne,W!=null?Hi(t,!!s,W,!1):!!l!=!!s&&(r!=null?Hi(t,!!s,r,!0):Hi(t,!!s,s?[]:"",!1));return;case"textarea":ne=W=null;for(N in s)if(f=s[N],s.hasOwnProperty(N)&&f!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:Ve(t,r,N,null,l,f)}for(w in l)if(f=l[w],m=s[w],l.hasOwnProperty(w)&&(f!=null||m!=null))switch(w){case"value":W=f;break;case"defaultValue":ne=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Ve(t,r,w,f,l,m)}qh(t,W,ne);return;case"option":for(var fe in s)if(W=s[fe],s.hasOwnProperty(fe)&&W!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ve(t,r,fe,null,l,W)}for(H in l)if(W=l[H],ne=s[H],l.hasOwnProperty(H)&&W!==ne&&(W!=null||ne!=null))switch(H){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Ve(t,r,H,W,l,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in s)W=s[be],s.hasOwnProperty(be)&&W!=null&&!l.hasOwnProperty(be)&&Ve(t,r,be,null,l,W);for(F in l)if(W=l[F],ne=s[F],l.hasOwnProperty(F)&&W!==ne&&(W!=null||ne!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,r));break;default:Ve(t,r,F,W,l,ne)}return;default:if(gu(r)){for(var Pe in s)W=s[Pe],s.hasOwnProperty(Pe)&&W!==void 0&&!l.hasOwnProperty(Pe)&&ef(t,r,Pe,void 0,l,W);for(re in l)W=l[re],ne=s[re],!l.hasOwnProperty(re)||W===ne||W===void 0&&ne===void 0||ef(t,r,re,W,l,ne);return}}for(var Y in s)W=s[Y],s.hasOwnProperty(Y)&&W!=null&&!l.hasOwnProperty(Y)&&Ve(t,r,Y,null,l,W);for(ae in l)W=l[ae],ne=s[ae],!l.hasOwnProperty(ae)||W===ne||W==null&&ne==null||Ve(t,r,ae,W,l,ne)}function Yp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var f=s[l],m=f.transferSize,w=f.initiatorType,N=f.duration;if(m&&N&&Yp(w)){for(w=0,N=f.responseEnd,l+=1;l<s.length;l++){var H=s[l],F=H.startTime;if(F>N)break;var re=H.transferSize,ae=H.initiatorType;re&&Yp(ae)&&(H=H.responseEnd,w+=re*(H<N?1:(N-F)/(H-F)))}if(--l,r+=8*(m+w)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var tf=null,nf=null;function Dl(t){return t.nodeType===9?t:t.ownerDocument}function Xp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kp(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function rf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var af=null;function j_(){var t=window.event;return t&&t.type==="popstate"?t===af?!1:(af=t,!0):(af=null,!1)}var Zp=typeof setTimeout=="function"?setTimeout:void 0,D_=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,z_=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(t){return Qp.resolve(null).then(t).catch(U_)}:Zp;function U_(t){setTimeout(function(){throw t})}function Or(t){return t==="head"}function Jp(t,r){var s=r,l=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(f),ya(r);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")Ms(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Ms(s);for(var m=s.firstChild;m;){var w=m.nextSibling,N=m.nodeName;m[Kr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||s.removeChild(m),m=w}}else s==="body"&&Ms(t.ownerDocument.body);s=f}while(s);ya(r)}function Fp(t,r){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?r?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(r?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function sf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var s=r;switch(r=r.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":sf(s),Za(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function $_(t,r,s,l){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Kr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=sn(t.nextSibling),t===null)break}return null}function L_(t,r,s){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=sn(t.nextSibling),t===null))return null;return t}function Wp(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=sn(t.nextSibling),t===null))return null;return t}function of(t){return t.data==="$?"||t.data==="$~"}function lf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function H_(t,r){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||s.readyState!=="loading")r();else{var l=function(){r(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function sn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var cf=null;function ey(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(r===0)return sn(t.nextSibling);r--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||r++}t=t.nextSibling}return null}function ty(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(r===0)return t;r--}else s!=="/$"&&s!=="/&"||r++}t=t.previousSibling}return null}function ny(t,r,s){switch(r=Dl(s),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ms(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Za(t)}var on=new Map,ry=new Set;function zl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jn=$.d;$.d={f:B_,r:I_,D:q_,C:V_,L:P_,m:G_,X:X_,S:Y_,M:K_};function B_(){var t=Jn.f(),r=Cl();return t||r}function I_(t){var r=lr(t);r!==null&&r.tag===5&&r.type==="form"?wm(r):Jn.r(t)}var ga=typeof document>"u"?null:document;function iy(t,r,s){var l=ga;if(l&&typeof r=="string"&&r){var f=Tt(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),ry.has(f)||(ry.add(f),t={rel:t,crossOrigin:s,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),xt(r,"link",t),it(r),l.head.appendChild(r)))}}function q_(t){Jn.D(t),iy("dns-prefetch",t,null)}function V_(t,r){Jn.C(t,r),iy("preconnect",t,r)}function P_(t,r,s){Jn.L(t,r,s);var l=ga;if(l&&t&&r){var f='link[rel="preload"][as="'+Tt(r)+'"]';r==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Tt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Tt(s.imageSizes)+'"]')):f+='[href="'+Tt(t)+'"]';var m=f;switch(r){case"style":m=ma(t);break;case"script":m=pa(t)}on.has(m)||(t=v({rel:"preload",href:r==="image"&&s&&s.imageSrcSet?void 0:t,as:r},s),on.set(m,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(js(m))||r==="script"&&l.querySelector(Ds(m))||(r=l.createElement("link"),xt(r,"link",t),it(r),l.head.appendChild(r)))}}function G_(t,r){Jn.m(t,r);var s=ga;if(s&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=pa(t)}if(!on.has(m)&&(t=v({rel:"modulepreload",href:t},r),on.set(m,t),s.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ds(m)))return}l=s.createElement("link"),xt(l,"link",t),it(l),s.head.appendChild(l)}}}function Y_(t,r,s){Jn.S(t,r,s);var l=ga;if(l&&t){var f=ur(l).hoistableStyles,m=ma(t);r=r||"default";var w=f.get(m);if(!w){var N={loading:0,preload:null};if(w=l.querySelector(js(m)))N.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":r},s),(s=on.get(m))&&uf(t,s);var H=w=l.createElement("link");it(H),xt(H,"link",t),H._p=new Promise(function(F,re){H.onload=F,H.onerror=re}),H.addEventListener("load",function(){N.loading|=1}),H.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Ul(w,r,l)}w={type:"stylesheet",instance:w,count:1,state:N},f.set(m,w)}}}function X_(t,r){Jn.X(t,r);var s=ga;if(s&&t){var l=ur(s).hoistableScripts,f=pa(t),m=l.get(f);m||(m=s.querySelector(Ds(f)),m||(t=v({src:t,async:!0},r),(r=on.get(f))&&df(t,r),m=s.createElement("script"),it(m),xt(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function K_(t,r){Jn.M(t,r);var s=ga;if(s&&t){var l=ur(s).hoistableScripts,f=pa(t),m=l.get(f);m||(m=s.querySelector(Ds(f)),m||(t=v({src:t,async:!0,type:"module"},r),(r=on.get(f))&&df(t,r),m=s.createElement("script"),it(m),xt(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function ay(t,r,s,l){var f=(f=ue.current)?zl(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(r=ma(s.href),s=ur(f).hoistableStyles,l=s.get(r),l||(l={type:"style",instance:null,count:0,state:null},s.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=ma(s.href);var m=ur(f).hoistableStyles,w=m.get(t);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,w),(m=f.querySelector(js(t)))&&!m._p&&(w.instance=m,w.state.loading=5),on.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},on.set(t,s),m||Z_(f,t,s,w.state))),r&&l===null)throw Error(a(528,""));return w}if(r&&l!==null)throw Error(a(529,""));return null;case"script":return r=s.async,s=s.src,typeof s=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=pa(s),s=ur(f).hoistableScripts,l=s.get(r),l||(l={type:"script",instance:null,count:0,state:null},s.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ma(t){return'href="'+Tt(t)+'"'}function js(t){return'link[rel="stylesheet"]['+t+"]"}function sy(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function Z_(t,r,s,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),xt(r,"link",s),it(r),t.head.appendChild(r))}function pa(t){return'[src="'+Tt(t)+'"]'}function Ds(t){return"script[async]"+t}function oy(t,r,s){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(s.href)+'"]');if(l)return r.instance=l,it(l),l;var f=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),it(l),xt(l,"style",f),Ul(l,s.precedence,t),r.instance=l;case"stylesheet":f=ma(s.href);var m=t.querySelector(js(f));if(m)return r.state.loading|=4,r.instance=m,it(m),m;l=sy(s),(f=on.get(f))&&uf(l,f),m=(t.ownerDocument||t).createElement("link"),it(m);var w=m;return w._p=new Promise(function(N,H){w.onload=N,w.onerror=H}),xt(m,"link",l),r.state.loading|=4,Ul(m,s.precedence,t),r.instance=m;case"script":return m=pa(s.src),(f=t.querySelector(Ds(m)))?(r.instance=f,it(f),f):(l=s,(f=on.get(m))&&(l=v({},s),df(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),it(f),xt(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Ul(l,s.precedence,t));return r.instance}function Ul(t,r,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,w=0;w<l.length;w++){var N=l[w];if(N.dataset.precedence===r)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=s.nodeType===9?s.head:s,r.insertBefore(t,r.firstChild))}function uf(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function df(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var $l=null;function ly(t,r,s){if($l===null){var l=new Map,f=$l=new Map;f.set(s,l)}else f=$l,l=f.get(s),l||(l=new Map,f.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var m=s[f];if(!(m[Kr]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(r)||"";w=t+w;var N=l.get(w);N?N.push(m):l.set(w,[m])}}return l}function cy(t,r,s){t=t.ownerDocument||t,t.head.insertBefore(s,r==="title"?t.querySelector("head > title"):null)}function Q_(t,r,s){if(s===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function uy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function J_(t,r,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=ma(l.href),m=r.querySelector(js(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Ll.bind(t),r.then(t,t)),s.state.loading|=4,s.instance=m,it(m);return}m=r.ownerDocument||r,l=sy(l),(f=on.get(f))&&uf(l,f),m=m.createElement("link"),it(m);var w=m;w._p=new Promise(function(N,H){w.onload=N,w.onerror=H}),xt(m,"link",l),s.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Ll.bind(t),r.addEventListener("load",s),r.addEventListener("error",s))}}var ff=0;function F_(t,r){return t.stylesheets&&t.count===0&&Bl(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&Bl(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&ff===0&&(ff=62500*M_());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Bl(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>ff?50:800)+r);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Ll(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hl=null;function Bl(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hl=new Map,r.forEach(W_,t),Hl=null,Ll.call(t))}function W_(t,r){if(!(r.state.loading&4)){var s=Hl.get(t);if(s)var l=s.get(null);else{s=new Map,Hl.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var w=f[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(s.set(w.dataset.precedence,w),l=w)}l&&s.set(null,l)}f=r.instance,w=f.getAttribute("data-precedence"),m=s.get(w)||l,m===l&&s.set(null,f),s.set(w,f),this.count++,l=Ll.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var zs={$$typeof:x,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function eS(t,r,s,l,f,m,w,N,H){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ya(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ya(0),this.hiddenUpdates=Ya(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function dy(t,r,s,l,f,m,w,N,H,F,re,ae){return t=new eS(t,r,s,w,H,F,re,ae,N),r=1,m===!0&&(r|=24),m=It(3,null,null,r),t.current=m,m.stateNode=t,r=Pu(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:s,cache:r},Ku(m),t}function fy(t){return t?(t=Xi,t):Xi}function hy(t,r,s,l,f,m){f=fy(f),l.context===null?l.context=f:l.pendingContext=f,l=vr(r),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=br(t,l,r),s!==null&&(Ut(s,t,r),hs(s,t,r))}function gy(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function hf(t,r){gy(t,r),(t=t.alternate)&&gy(t,r)}function my(t){if(t.tag===13||t.tag===31){var r=Fr(t,67108864);r!==null&&Ut(r,t,67108864),hf(t,67108864)}}function py(t){if(t.tag===13||t.tag===31){var r=Yt();r=Xa(r);var s=Fr(t,r);s!==null&&Ut(s,t,r),hf(t,r)}}var Il=!0;function tS(t,r,s,l){var f=R.T;R.T=null;var m=$.p;try{$.p=2,gf(t,r,s,l)}finally{$.p=m,R.T=f}}function nS(t,r,s,l){var f=R.T;R.T=null;var m=$.p;try{$.p=8,gf(t,r,s,l)}finally{$.p=m,R.T=f}}function gf(t,r,s,l){if(Il){var f=mf(l);if(f===null)Wd(t,r,l,ql,s),vy(t,l);else if(iS(f,t,r,s,l))l.stopPropagation();else if(vy(t,l),r&4&&-1<rS.indexOf(t)){for(;f!==null;){var m=lr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Mn(m.pendingLanes);if(w!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;w;){var H=1<<31-Nt(w);N.entanglements[1]|=H,w&=~H}Cn(m),($e&6)===0&&(El=yt()+500,Os(0))}}break;case 31:case 13:N=Fr(m,2),N!==null&&Ut(N,m,2),Cl(),hf(m,2)}if(m=mf(l),m===null&&Wd(t,r,l,ql,s),m===f)break;f=m}f!==null&&l.stopPropagation()}else Wd(t,r,l,null,s)}}function mf(t){return t=pu(t),pf(t)}var ql=null;function pf(t){if(ql=null,t=or(t),t!==null){var r=c(t);if(r===null)t=null;else{var s=r.tag;if(s===13){if(t=u(r),t!==null)return t;t=null}else if(s===31){if(t=d(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return ql=t,null}function yy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ai()){case kn:return 2;case sr:return 8;case Pr:case tu:return 32;case Ni:return 268435456;default:return 32}default:return 32}}var yf=!1,Rr=null,kr=null,Mr=null,Us=new Map,$s=new Map,jr=[],rS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vy(t,r){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Us.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(r.pointerId)}}function Ls(t,r,s,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:s,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=lr(r),r!==null&&my(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function iS(t,r,s,l,f){switch(r){case"focusin":return Rr=Ls(Rr,t,r,s,l,f),!0;case"dragenter":return kr=Ls(kr,t,r,s,l,f),!0;case"mouseover":return Mr=Ls(Mr,t,r,s,l,f),!0;case"pointerover":var m=f.pointerId;return Us.set(m,Ls(Us.get(m)||null,t,r,s,l,f)),!0;case"gotpointercapture":return m=f.pointerId,$s.set(m,Ls($s.get(m)||null,t,r,s,l,f)),!0}return!1}function by(t){var r=or(t.target);if(r!==null){var s=c(r);if(s!==null){if(r=s.tag,r===13){if(r=u(s),r!==null){t.blockedOn=r,Ro(t.priority,function(){py(s)});return}}else if(r===31){if(r=d(s),r!==null){t.blockedOn=r,Ro(t.priority,function(){py(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=mf(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);mu=l,s.target.dispatchEvent(l),mu=null}else return r=lr(s),r!==null&&my(r),t.blockedOn=s,!1;r.shift()}return!0}function wy(t,r,s){Vl(t)&&s.delete(r)}function aS(){yf=!1,Rr!==null&&Vl(Rr)&&(Rr=null),kr!==null&&Vl(kr)&&(kr=null),Mr!==null&&Vl(Mr)&&(Mr=null),Us.forEach(wy),$s.forEach(wy)}function Pl(t,r){t.blockedOn===r&&(t.blockedOn=null,yf||(yf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,aS)))}var Gl=null;function xy(t){Gl!==t&&(Gl=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Gl===t&&(Gl=null);for(var r=0;r<t.length;r+=3){var s=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(pf(l||s)===null)continue;break}var m=lr(s);m!==null&&(t.splice(r,3),r-=3,gd(m,{pending:!0,data:f,method:s.method,action:l},l,f))}}))}function ya(t){function r(H){return Pl(H,t)}Rr!==null&&Pl(Rr,t),kr!==null&&Pl(kr,t),Mr!==null&&Pl(Mr,t),Us.forEach(r),$s.forEach(r);for(var s=0;s<jr.length;s++){var l=jr[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<jr.length&&(s=jr[0],s.blockedOn===null);)by(s),s.blockedOn===null&&jr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var f=s[l],m=s[l+1],w=f[Et]||null;if(typeof m=="function")w||xy(s);else if(w){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,w=m[Et]||null)N=w.formAction;else if(pf(f)!==null)continue}else N=w.action;typeof N=="function"?s[l+1]=N:(s.splice(l,3),l-=3),xy(s)}}}function _y(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function vf(t){this._internalRoot=t}Yl.prototype.render=vf.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var s=r.current,l=Yt();hy(s,l,t,r,null,null)},Yl.prototype.unmount=vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;hy(t.current,2,null,t,null,null),Cl(),r[jn]=null}};function Yl(t){this._internalRoot=t}Yl.prototype.unstable_scheduleHydration=function(t){if(t){var r=Oo();t={blockedOn:null,target:t,priority:r};for(var s=0;s<jr.length&&r!==0&&r<jr[s].priority;s++);jr.splice(s,0,t),s===0&&by(t)}};var Sy=n.version;if(Sy!=="19.2.0")throw Error(a(527,Sy,"19.2.0"));$.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=h(r),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var sS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Gr=Xl.inject(sS),At=Xl}catch{}}return Bs.createRoot=function(t,r){if(!o(t))throw Error(a(299));var s=!1,l="",f=Rm,m=km,w=Mm;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=dy(t,1,!1,null,null,s,l,null,f,m,w,_y),t[jn]=r.current,Fd(t),new vf(r)},Bs.hydrateRoot=function(t,r,s){if(!o(t))throw Error(a(299));var l=!1,f="",m=Rm,w=km,N=Mm,H=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(N=s.onRecoverableError),s.formState!==void 0&&(H=s.formState)),r=dy(t,1,!0,r,s??null,l,f,H,m,w,N,_y),r.context=fy(null),s=r.current,l=Yt(),l=Xa(l),f=vr(l),f.callback=null,br(s,f,l),s=l,r.current.lanes=s,Xr(r,s),Cn(r),t[jn]=r.current,Fd(t),new Yl(r)},Bs.version="19.2.0",Bs}var jy;function mS(){if(jy)return xf.exports;jy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),xf.exports=gS(),xf.exports}var pS=mS();function ut(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let i=0,a;i<e.length;i++)(a=ut(e[i]))!==""&&(n+=(n&&" ")+a);else for(let i in e)e[i]&&(n+=(n&&" ")+i);return n}var yS={value:()=>{}};function zc(){for(var e=0,n=arguments.length,i={},a;e<n;++e){if(!(a=arguments[e]+"")||a in i||/[\s.]/.test(a))throw new Error("illegal type: "+a);i[a]=[]}return new hc(i)}function hc(e){this._=e}function vS(e,n){return e.trim().split(/^|\s+/).map(function(i){var a="",o=i.indexOf(".");if(o>=0&&(a=i.slice(o+1),i=i.slice(0,o)),i&&!n.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:a}})}hc.prototype=zc.prototype={constructor:hc,on:function(e,n){var i=this._,a=vS(e+"",i),o,c=-1,u=a.length;if(arguments.length<2){for(;++c<u;)if((o=(e=a[c]).type)&&(o=bS(i[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<u;)if(o=(e=a[c]).type)i[o]=Dy(i[o],e.name,n);else if(n==null)for(o in i)i[o]=Dy(i[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var i in n)e[i]=n[i].slice();return new hc(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var i=new Array(o),a=0,o,c;a<o;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],a=0,o=c.length;a<o;++a)c[a].value.apply(n,i)},apply:function(e,n,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],o=0,c=a.length;o<c;++o)a[o].value.apply(n,i)}};function bS(e,n){for(var i=0,a=e.length,o;i<a;++i)if((o=e[i]).name===n)return o.value}function Dy(e,n,i){for(var a=0,o=e.length;a<o;++a)if(e[a].name===n){e[a]=yS,e=e.slice(0,a).concat(e.slice(a+1));break}return i!=null&&e.push({name:n,value:i}),e}var Zf="http://www.w3.org/1999/xhtml";const zy={svg:"http://www.w3.org/2000/svg",xhtml:Zf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Uc(e){var n=e+="",i=n.indexOf(":");return i>=0&&(n=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),zy.hasOwnProperty(n)?{space:zy[n],local:e}:e}function wS(e){return function(){var n=this.ownerDocument,i=this.namespaceURI;return i===Zf&&n.documentElement.namespaceURI===Zf?n.createElement(e):n.createElementNS(i,e)}}function xS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mv(e){var n=Uc(e);return(n.local?xS:wS)(n)}function _S(){}function xh(e){return e==null?_S:function(){return this.querySelector(e)}}function SS(e){typeof e!="function"&&(e=xh(e));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var c=n[o],u=c.length,d=a[o]=new Array(u),g,h,p=0;p<u;++p)(g=c[p])&&(h=e.call(g,g.__data__,p,c))&&("__data__"in g&&(h.__data__=g.__data__),d[p]=h);return new Jt(a,this._parents)}function ES(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function TS(){return[]}function jv(e){return e==null?TS:function(){return this.querySelectorAll(e)}}function CS(e){return function(){return ES(e.apply(this,arguments))}}function AS(e){typeof e=="function"?e=CS(e):e=jv(e);for(var n=this._groups,i=n.length,a=[],o=[],c=0;c<i;++c)for(var u=n[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&(a.push(e.call(g,g.__data__,h,u)),o.push(g));return new Jt(a,o)}function Dv(e){return function(){return this.matches(e)}}function zv(e){return function(n){return n.matches(e)}}var NS=Array.prototype.find;function OS(e){return function(){return NS.call(this.children,e)}}function RS(){return this.firstElementChild}function kS(e){return this.select(e==null?RS:OS(typeof e=="function"?e:zv(e)))}var MS=Array.prototype.filter;function jS(){return Array.from(this.children)}function DS(e){return function(){return MS.call(this.children,e)}}function zS(e){return this.selectAll(e==null?jS:DS(typeof e=="function"?e:zv(e)))}function US(e){typeof e!="function"&&(e=Dv(e));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var c=n[o],u=c.length,d=a[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new Jt(a,this._parents)}function Uv(e){return new Array(e.length)}function $S(){return new Jt(this._enter||this._groups.map(Uv),this._parents)}function wc(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}wc.prototype={constructor:wc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function LS(e){return function(){return e}}function HS(e,n,i,a,o,c){for(var u=0,d,g=n.length,h=c.length;u<h;++u)(d=n[u])?(d.__data__=c[u],a[u]=d):i[u]=new wc(e,c[u]);for(;u<g;++u)(d=n[u])&&(o[u]=d)}function BS(e,n,i,a,o,c,u){var d,g,h=new Map,p=n.length,v=c.length,y=new Array(p),b;for(d=0;d<p;++d)(g=n[d])&&(y[d]=b=u.call(g,g.__data__,d,n)+"",h.has(b)?o[d]=g:h.set(b,g));for(d=0;d<v;++d)b=u.call(e,c[d],d,c)+"",(g=h.get(b))?(a[d]=g,g.__data__=c[d],h.delete(b)):i[d]=new wc(e,c[d]);for(d=0;d<p;++d)(g=n[d])&&h.get(y[d])===g&&(o[d]=g)}function IS(e){return e.__data__}function qS(e,n){if(!arguments.length)return Array.from(this,IS);var i=n?BS:HS,a=this._parents,o=this._groups;typeof e!="function"&&(e=LS(e));for(var c=o.length,u=new Array(c),d=new Array(c),g=new Array(c),h=0;h<c;++h){var p=a[h],v=o[h],y=v.length,b=VS(e.call(p,p&&p.__data__,h,a)),E=b.length,_=d[h]=new Array(E),T=u[h]=new Array(E),C=g[h]=new Array(y);i(p,v,_,T,C,b,n);for(var k=0,x=0,A,L;k<E;++k)if(A=_[k]){for(k>=x&&(x=k+1);!(L=T[x])&&++x<E;);A._next=L||null}}return u=new Jt(u,a),u._enter=d,u._exit=g,u}function VS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function PS(){return new Jt(this._exit||this._groups.map(Uv),this._parents)}function GS(e,n,i){var a=this.enter(),o=this,c=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),n!=null&&(o=n(o),o&&(o=o.selection())),i==null?c.remove():i(c),a&&o?a.merge(o).order():o}function YS(e){for(var n=e.selection?e.selection():e,i=this._groups,a=n._groups,o=i.length,c=a.length,u=Math.min(o,c),d=new Array(o),g=0;g<u;++g)for(var h=i[g],p=a[g],v=h.length,y=d[g]=new Array(v),b,E=0;E<v;++E)(b=h[E]||p[E])&&(y[E]=b);for(;g<o;++g)d[g]=i[g];return new Jt(d,this._parents)}function XS(){for(var e=this._groups,n=-1,i=e.length;++n<i;)for(var a=e[n],o=a.length-1,c=a[o],u;--o>=0;)(u=a[o])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function KS(e){e||(e=ZS);function n(v,y){return v&&y?e(v.__data__,y.__data__):!v-!y}for(var i=this._groups,a=i.length,o=new Array(a),c=0;c<a;++c){for(var u=i[c],d=u.length,g=o[c]=new Array(d),h,p=0;p<d;++p)(h=u[p])&&(g[p]=h);g.sort(n)}return new Jt(o,this._parents).order()}function ZS(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function QS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function JS(){return Array.from(this)}function FS(){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],o=0,c=a.length;o<c;++o){var u=a[o];if(u)return u}return null}function WS(){let e=0;for(const n of this)++e;return e}function e1(){return!this.node()}function t1(e){for(var n=this._groups,i=0,a=n.length;i<a;++i)for(var o=n[i],c=0,u=o.length,d;c<u;++c)(d=o[c])&&e.call(d,d.__data__,c,o);return this}function n1(e){return function(){this.removeAttribute(e)}}function r1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i1(e,n){return function(){this.setAttribute(e,n)}}function a1(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function s1(e,n){return function(){var i=n.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function o1(e,n){return function(){var i=n.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function l1(e,n){var i=Uc(e);if(arguments.length<2){var a=this.node();return i.local?a.getAttributeNS(i.space,i.local):a.getAttribute(i)}return this.each((n==null?i.local?r1:n1:typeof n=="function"?i.local?o1:s1:i.local?a1:i1)(i,n))}function $v(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function c1(e){return function(){this.style.removeProperty(e)}}function u1(e,n,i){return function(){this.style.setProperty(e,n,i)}}function d1(e,n,i){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,i)}}function f1(e,n,i){return arguments.length>1?this.each((n==null?c1:typeof n=="function"?d1:u1)(e,n,i??"")):$a(this.node(),e)}function $a(e,n){return e.style.getPropertyValue(n)||$v(e).getComputedStyle(e,null).getPropertyValue(n)}function h1(e){return function(){delete this[e]}}function g1(e,n){return function(){this[e]=n}}function m1(e,n){return function(){var i=n.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function p1(e,n){return arguments.length>1?this.each((n==null?h1:typeof n=="function"?m1:g1)(e,n)):this.node()[e]}function Lv(e){return e.trim().split(/^|\s+/)}function _h(e){return e.classList||new Hv(e)}function Hv(e){this._node=e,this._names=Lv(e.getAttribute("class")||"")}Hv.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Bv(e,n){for(var i=_h(e),a=-1,o=n.length;++a<o;)i.add(n[a])}function Iv(e,n){for(var i=_h(e),a=-1,o=n.length;++a<o;)i.remove(n[a])}function y1(e){return function(){Bv(this,e)}}function v1(e){return function(){Iv(this,e)}}function b1(e,n){return function(){(n.apply(this,arguments)?Bv:Iv)(this,e)}}function w1(e,n){var i=Lv(e+"");if(arguments.length<2){for(var a=_h(this.node()),o=-1,c=i.length;++o<c;)if(!a.contains(i[o]))return!1;return!0}return this.each((typeof n=="function"?b1:n?y1:v1)(i,n))}function x1(){this.textContent=""}function _1(e){return function(){this.textContent=e}}function S1(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function E1(e){return arguments.length?this.each(e==null?x1:(typeof e=="function"?S1:_1)(e)):this.node().textContent}function T1(){this.innerHTML=""}function C1(e){return function(){this.innerHTML=e}}function A1(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function N1(e){return arguments.length?this.each(e==null?T1:(typeof e=="function"?A1:C1)(e)):this.node().innerHTML}function O1(){this.nextSibling&&this.parentNode.appendChild(this)}function R1(){return this.each(O1)}function k1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function M1(){return this.each(k1)}function j1(e){var n=typeof e=="function"?e:Mv(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function D1(){return null}function z1(e,n){var i=typeof e=="function"?e:Mv(e),a=n==null?D1:typeof n=="function"?n:xh(n);return this.select(function(){return this.insertBefore(i.apply(this,arguments),a.apply(this,arguments)||null)})}function U1(){var e=this.parentNode;e&&e.removeChild(this)}function $1(){return this.each(U1)}function L1(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function H1(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function B1(e){return this.select(e?H1:L1)}function I1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function q1(e){return function(n){e.call(this,n,this.__data__)}}function V1(e){return e.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");return a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),{type:n,name:i}})}function P1(e){return function(){var n=this.__on;if(n){for(var i=0,a=-1,o=n.length,c;i<o;++i)c=n[i],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++a]=c;++a?n.length=a:delete this.__on}}}function G1(e,n,i){return function(){var a=this.__on,o,c=q1(n);if(a){for(var u=0,d=a.length;u<d;++u)if((o=a[u]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=c,o.options=i),o.value=n;return}}this.addEventListener(e.type,c,i),o={type:e.type,name:e.name,value:n,listener:c,options:i},a?a.push(o):this.__on=[o]}}function Y1(e,n,i){var a=V1(e+""),o,c=a.length,u;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,h=d.length,p;g<h;++g)for(o=0,p=d[g];o<c;++o)if((u=a[o]).type===p.type&&u.name===p.name)return p.value}return}for(d=n?G1:P1,o=0;o<c;++o)this.each(d(a[o],n,i));return this}function qv(e,n,i){var a=$v(e),o=a.CustomEvent;typeof o=="function"?o=new o(n,i):(o=a.document.createEvent("Event"),i?(o.initEvent(n,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function X1(e,n){return function(){return qv(this,e,n)}}function K1(e,n){return function(){return qv(this,e,n.apply(this,arguments))}}function Z1(e,n){return this.each((typeof n=="function"?K1:X1)(e,n))}function*Q1(){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],o=0,c=a.length,u;o<c;++o)(u=a[o])&&(yield u)}var Vv=[null];function Jt(e,n){this._groups=e,this._parents=n}function yo(){return new Jt([[document.documentElement]],Vv)}function J1(){return this}Jt.prototype=yo.prototype={constructor:Jt,select:SS,selectAll:AS,selectChild:kS,selectChildren:zS,filter:US,data:qS,enter:$S,exit:PS,join:GS,merge:YS,selection:J1,order:XS,sort:KS,call:QS,nodes:JS,node:FS,size:WS,empty:e1,each:t1,attr:l1,style:f1,property:p1,classed:w1,text:E1,html:N1,raise:R1,lower:M1,append:j1,insert:z1,remove:$1,clone:B1,datum:I1,on:Y1,dispatch:Z1,[Symbol.iterator]:Q1};function Zt(e){return typeof e=="string"?new Jt([[document.querySelector(e)]],[document.documentElement]):new Jt([[e]],Vv)}function F1(e){let n;for(;n=e.sourceEvent;)e=n;return e}function mn(e,n){if(e=F1(e),n===void 0&&(n=e.currentTarget),n){var i=n.ownerSVGElement||n;if(i.createSVGPoint){var a=i.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(n.getScreenCTM().inverse()),[a.x,a.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}const W1={passive:!1},Js={capture:!0,passive:!1};function Tf(e){e.stopImmediatePropagation()}function Da(e){e.preventDefault(),e.stopImmediatePropagation()}function Pv(e){var n=e.document.documentElement,i=Zt(e).on("dragstart.drag",Da,Js);"onselectstart"in n?i.on("selectstart.drag",Da,Js):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Gv(e,n){var i=e.document.documentElement,a=Zt(e).on("dragstart.drag",null);n&&(a.on("click.drag",Da,Js),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in i?a.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const Zl=e=>()=>e;function Qf(e,{sourceEvent:n,subject:i,target:a,identifier:o,active:c,x:u,y:d,dx:g,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Qf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function eE(e){return!e.ctrlKey&&!e.button}function tE(){return this.parentNode}function nE(e,n){return n??{x:e.x,y:e.y}}function rE(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yv(){var e=eE,n=tE,i=nE,a=rE,o={},c=zc("start","drag","end"),u=0,d,g,h,p,v=0;function y(A){A.on("mousedown.drag",b).filter(a).on("touchstart.drag",T).on("touchmove.drag",C,W1).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(A,L){if(!(p||!e.call(this,A,L))){var j=x(this,n.call(this,A,L),A,L,"mouse");j&&(Zt(A.view).on("mousemove.drag",E,Js).on("mouseup.drag",_,Js),Pv(A.view),Tf(A),h=!1,d=A.clientX,g=A.clientY,j("start",A))}}function E(A){if(Da(A),!h){var L=A.clientX-d,j=A.clientY-g;h=L*L+j*j>v}o.mouse("drag",A)}function _(A){Zt(A.view).on("mousemove.drag mouseup.drag",null),Gv(A.view,h),Da(A),o.mouse("end",A)}function T(A,L){if(e.call(this,A,L)){var j=A.changedTouches,U=n.call(this,A,L),V=j.length,Z,oe;for(Z=0;Z<V;++Z)(oe=x(this,U,A,L,j[Z].identifier,j[Z]))&&(Tf(A),oe("start",A,j[Z]))}}function C(A){var L=A.changedTouches,j=L.length,U,V;for(U=0;U<j;++U)(V=o[L[U].identifier])&&(Da(A),V("drag",A,L[U]))}function k(A){var L=A.changedTouches,j=L.length,U,V;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),U=0;U<j;++U)(V=o[L[U].identifier])&&(Tf(A),V("end",A,L[U]))}function x(A,L,j,U,V,Z){var oe=c.copy(),ee=mn(Z||j,L),te,G,D;if((D=i.call(A,new Qf("beforestart",{sourceEvent:j,target:y,identifier:V,active:u,x:ee[0],y:ee[1],dx:0,dy:0,dispatch:oe}),U))!=null)return te=D.x-ee[0]||0,G=D.y-ee[1]||0,function P(R,$,B){var K=ee,z;switch(R){case"start":o[V]=P,z=u++;break;case"end":delete o[V],--u;case"drag":ee=mn(B||$,L),z=u;break}oe.call(R,A,new Qf(R,{sourceEvent:$,subject:D,target:y,identifier:V,active:z,x:ee[0]+te,y:ee[1]+G,dx:ee[0]-K[0],dy:ee[1]-K[1],dispatch:oe}),U)}}return y.filter=function(A){return arguments.length?(e=typeof A=="function"?A:Zl(!!A),y):e},y.container=function(A){return arguments.length?(n=typeof A=="function"?A:Zl(A),y):n},y.subject=function(A){return arguments.length?(i=typeof A=="function"?A:Zl(A),y):i},y.touchable=function(A){return arguments.length?(a=typeof A=="function"?A:Zl(!!A),y):a},y.on=function(){var A=c.on.apply(c,arguments);return A===c?y:A},y.clickDistance=function(A){return arguments.length?(v=(A=+A)*A,y):Math.sqrt(v)},y}function Sh(e,n,i){e.prototype=n.prototype=i,i.constructor=e}function Xv(e,n){var i=Object.create(e.prototype);for(var a in n)i[a]=n[a];return i}function vo(){}var Fs=.7,xc=1/Fs,za="\\s*([+-]?\\d+)\\s*",Ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iE=/^#([0-9a-f]{3,8})$/,aE=new RegExp(`^rgb\\(${za},${za},${za}\\)$`),sE=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),oE=new RegExp(`^rgba\\(${za},${za},${za},${Ws}\\)$`),lE=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${Ws}\\)$`),cE=new RegExp(`^hsl\\(${Ws},${Nn},${Nn}\\)$`),uE=new RegExp(`^hsla\\(${Ws},${Nn},${Nn},${Ws}\\)$`),Uy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Sh(vo,Ei,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$y,formatHex:$y,formatHex8:dE,formatHsl:fE,formatRgb:Ly,toString:Ly});function $y(){return this.rgb().formatHex()}function dE(){return this.rgb().formatHex8()}function fE(){return Kv(this).formatHsl()}function Ly(){return this.rgb().formatRgb()}function Ei(e){var n,i;return e=(e+"").trim().toLowerCase(),(n=iE.exec(e))?(i=n[1].length,n=parseInt(n[1],16),i===6?Hy(n):i===3?new $t(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):i===8?Ql(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):i===4?Ql(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=aE.exec(e))?new $t(n[1],n[2],n[3],1):(n=sE.exec(e))?new $t(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=oE.exec(e))?Ql(n[1],n[2],n[3],n[4]):(n=lE.exec(e))?Ql(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=cE.exec(e))?qy(n[1],n[2]/100,n[3]/100,1):(n=uE.exec(e))?qy(n[1],n[2]/100,n[3]/100,n[4]):Uy.hasOwnProperty(e)?Hy(Uy[e]):e==="transparent"?new $t(NaN,NaN,NaN,0):null}function Hy(e){return new $t(e>>16&255,e>>8&255,e&255,1)}function Ql(e,n,i,a){return a<=0&&(e=n=i=NaN),new $t(e,n,i,a)}function hE(e){return e instanceof vo||(e=Ei(e)),e?(e=e.rgb(),new $t(e.r,e.g,e.b,e.opacity)):new $t}function Jf(e,n,i,a){return arguments.length===1?hE(e):new $t(e,n,i,a??1)}function $t(e,n,i,a){this.r=+e,this.g=+n,this.b=+i,this.opacity=+a}Sh($t,Jf,Xv(vo,{brighter(e){return e=e==null?xc:Math.pow(xc,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fs:Math.pow(Fs,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $t(xi(this.r),xi(this.g),xi(this.b),_c(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:By,formatHex:By,formatHex8:gE,formatRgb:Iy,toString:Iy}));function By(){return`#${bi(this.r)}${bi(this.g)}${bi(this.b)}`}function gE(){return`#${bi(this.r)}${bi(this.g)}${bi(this.b)}${bi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Iy(){const e=_c(this.opacity);return`${e===1?"rgb(":"rgba("}${xi(this.r)}, ${xi(this.g)}, ${xi(this.b)}${e===1?")":`, ${e})`}`}function _c(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bi(e){return e=xi(e),(e<16?"0":"")+e.toString(16)}function qy(e,n,i,a){return a<=0?e=n=i=NaN:i<=0||i>=1?e=n=NaN:n<=0&&(e=NaN),new yn(e,n,i,a)}function Kv(e){if(e instanceof yn)return new yn(e.h,e.s,e.l,e.opacity);if(e instanceof vo||(e=Ei(e)),!e)return new yn;if(e instanceof yn)return e;e=e.rgb();var n=e.r/255,i=e.g/255,a=e.b/255,o=Math.min(n,i,a),c=Math.max(n,i,a),u=NaN,d=c-o,g=(c+o)/2;return d?(n===c?u=(i-a)/d+(i<a)*6:i===c?u=(a-n)/d+2:u=(n-i)/d+4,d/=g<.5?c+o:2-c-o,u*=60):d=g>0&&g<1?0:u,new yn(u,d,g,e.opacity)}function mE(e,n,i,a){return arguments.length===1?Kv(e):new yn(e,n,i,a??1)}function yn(e,n,i,a){this.h=+e,this.s=+n,this.l=+i,this.opacity=+a}Sh(yn,mE,Xv(vo,{brighter(e){return e=e==null?xc:Math.pow(xc,e),new yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fs:Math.pow(Fs,e),new yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*n,o=2*i-a;return new $t(Cf(e>=240?e-240:e+120,o,a),Cf(e,o,a),Cf(e<120?e+240:e-120,o,a),this.opacity)},clamp(){return new yn(Vy(this.h),Jl(this.s),Jl(this.l),_c(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_c(this.opacity);return`${e===1?"hsl(":"hsla("}${Vy(this.h)}, ${Jl(this.s)*100}%, ${Jl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vy(e){return e=(e||0)%360,e<0?e+360:e}function Jl(e){return Math.max(0,Math.min(1,e||0))}function Cf(e,n,i){return(e<60?n+(i-n)*e/60:e<180?i:e<240?n+(i-n)*(240-e)/60:n)*255}const Eh=e=>()=>e;function pE(e,n){return function(i){return e+i*n}}function yE(e,n,i){return e=Math.pow(e,i),n=Math.pow(n,i)-e,i=1/i,function(a){return Math.pow(e+a*n,i)}}function vE(e){return(e=+e)==1?Zv:function(n,i){return i-n?yE(n,i,e):Eh(isNaN(n)?i:n)}}function Zv(e,n){var i=n-e;return i?pE(e,i):Eh(isNaN(e)?n:e)}const Sc=(function e(n){var i=vE(n);function a(o,c){var u=i((o=Jf(o)).r,(c=Jf(c)).r),d=i(o.g,c.g),g=i(o.b,c.b),h=Zv(o.opacity,c.opacity);return function(p){return o.r=u(p),o.g=d(p),o.b=g(p),o.opacity=h(p),o+""}}return a.gamma=e,a})(1);function bE(e,n){n||(n=[]);var i=e?Math.min(n.length,e.length):0,a=n.slice(),o;return function(c){for(o=0;o<i;++o)a[o]=e[o]*(1-c)+n[o]*c;return a}}function wE(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xE(e,n){var i=n?n.length:0,a=e?Math.min(i,e.length):0,o=new Array(a),c=new Array(i),u;for(u=0;u<a;++u)o[u]=Xs(e[u],n[u]);for(;u<i;++u)c[u]=n[u];return function(d){for(u=0;u<a;++u)c[u]=o[u](d);return c}}function _E(e,n){var i=new Date;return e=+e,n=+n,function(a){return i.setTime(e*(1-a)+n*a),i}}function An(e,n){return e=+e,n=+n,function(i){return e*(1-i)+n*i}}function SE(e,n){var i={},a={},o;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in e?i[o]=Xs(e[o],n[o]):a[o]=n[o];return function(c){for(o in i)a[o]=i[o](c);return a}}var Ff=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Af=new RegExp(Ff.source,"g");function EE(e){return function(){return e}}function TE(e){return function(n){return e(n)+""}}function Qv(e,n){var i=Ff.lastIndex=Af.lastIndex=0,a,o,c,u=-1,d=[],g=[];for(e=e+"",n=n+"";(a=Ff.exec(e))&&(o=Af.exec(n));)(c=o.index)>i&&(c=n.slice(i,c),d[u]?d[u]+=c:d[++u]=c),(a=a[0])===(o=o[0])?d[u]?d[u]+=o:d[++u]=o:(d[++u]=null,g.push({i:u,x:An(a,o)})),i=Af.lastIndex;return i<n.length&&(c=n.slice(i),d[u]?d[u]+=c:d[++u]=c),d.length<2?g[0]?TE(g[0].x):EE(n):(n=g.length,function(h){for(var p=0,v;p<n;++p)d[(v=g[p]).i]=v.x(h);return d.join("")})}function Xs(e,n){var i=typeof n,a;return n==null||i==="boolean"?Eh(n):(i==="number"?An:i==="string"?(a=Ei(n))?(n=a,Sc):Qv:n instanceof Ei?Sc:n instanceof Date?_E:wE(n)?bE:Array.isArray(n)?xE:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?SE:An)(e,n)}var Py=180/Math.PI,Wf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jv(e,n,i,a,o,c){var u,d,g;return(u=Math.sqrt(e*e+n*n))&&(e/=u,n/=u),(g=e*i+n*a)&&(i-=e*g,a-=n*g),(d=Math.sqrt(i*i+a*a))&&(i/=d,a/=d,g/=d),e*a<n*i&&(e=-e,n=-n,g=-g,u=-u),{translateX:o,translateY:c,rotate:Math.atan2(n,e)*Py,skewX:Math.atan(g)*Py,scaleX:u,scaleY:d}}var Fl;function CE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Wf:Jv(n.a,n.b,n.c,n.d,n.e,n.f)}function AE(e){return e==null||(Fl||(Fl=document.createElementNS("http://www.w3.org/2000/svg","g")),Fl.setAttribute("transform",e),!(e=Fl.transform.baseVal.consolidate()))?Wf:(e=e.matrix,Jv(e.a,e.b,e.c,e.d,e.e,e.f))}function Fv(e,n,i,a){function o(h){return h.length?h.pop()+" ":""}function c(h,p,v,y,b,E){if(h!==v||p!==y){var _=b.push("translate(",null,n,null,i);E.push({i:_-4,x:An(h,v)},{i:_-2,x:An(p,y)})}else(v||y)&&b.push("translate("+v+n+y+i)}function u(h,p,v,y){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),y.push({i:v.push(o(v)+"rotate(",null,a)-2,x:An(h,p)})):p&&v.push(o(v)+"rotate("+p+a)}function d(h,p,v,y){h!==p?y.push({i:v.push(o(v)+"skewX(",null,a)-2,x:An(h,p)}):p&&v.push(o(v)+"skewX("+p+a)}function g(h,p,v,y,b,E){if(h!==v||p!==y){var _=b.push(o(b)+"scale(",null,",",null,")");E.push({i:_-4,x:An(h,v)},{i:_-2,x:An(p,y)})}else(v!==1||y!==1)&&b.push(o(b)+"scale("+v+","+y+")")}return function(h,p){var v=[],y=[];return h=e(h),p=e(p),c(h.translateX,h.translateY,p.translateX,p.translateY,v,y),u(h.rotate,p.rotate,v,y),d(h.skewX,p.skewX,v,y),g(h.scaleX,h.scaleY,p.scaleX,p.scaleY,v,y),h=p=null,function(b){for(var E=-1,_=y.length,T;++E<_;)v[(T=y[E]).i]=T.x(b);return v.join("")}}}var NE=Fv(CE,"px, ","px)","deg)"),OE=Fv(AE,", ",")",")"),RE=1e-12;function Gy(e){return((e=Math.exp(e))+1/e)/2}function kE(e){return((e=Math.exp(e))-1/e)/2}function ME(e){return((e=Math.exp(2*e))-1)/(e+1)}const gc=(function e(n,i,a){function o(c,u){var d=c[0],g=c[1],h=c[2],p=u[0],v=u[1],y=u[2],b=p-d,E=v-g,_=b*b+E*E,T,C;if(_<RE)C=Math.log(y/h)/n,T=function(U){return[d+U*b,g+U*E,h*Math.exp(n*U*C)]};else{var k=Math.sqrt(_),x=(y*y-h*h+a*_)/(2*h*i*k),A=(y*y-h*h-a*_)/(2*y*i*k),L=Math.log(Math.sqrt(x*x+1)-x),j=Math.log(Math.sqrt(A*A+1)-A);C=(j-L)/n,T=function(U){var V=U*C,Z=Gy(L),oe=h/(i*k)*(Z*ME(n*V+L)-kE(L));return[d+oe*b,g+oe*E,h*Z/Gy(n*V+L)]}}return T.duration=C*1e3*n/Math.SQRT2,T}return o.rho=function(c){var u=Math.max(.001,+c),d=u*u,g=d*d;return e(u,d,g)},o})(Math.SQRT2,2,4);var La=0,Ps=0,Is=0,Wv=1e3,Ec,Gs,Tc=0,Ti=0,$c=0,eo=typeof performance=="object"&&performance.now?performance:Date,eb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Th(){return Ti||(eb(jE),Ti=eo.now()+$c)}function jE(){Ti=0}function Cc(){this._call=this._time=this._next=null}Cc.prototype=tb.prototype={constructor:Cc,restart:function(e,n,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?Th():+i)+(n==null?0:+n),!this._next&&Gs!==this&&(Gs?Gs._next=this:Ec=this,Gs=this),this._call=e,this._time=i,eh()},stop:function(){this._call&&(this._call=null,this._time=1/0,eh())}};function tb(e,n,i){var a=new Cc;return a.restart(e,n,i),a}function DE(){Th(),++La;for(var e=Ec,n;e;)(n=Ti-e._time)>=0&&e._call.call(void 0,n),e=e._next;--La}function Yy(){Ti=(Tc=eo.now())+$c,La=Ps=0;try{DE()}finally{La=0,UE(),Ti=0}}function zE(){var e=eo.now(),n=e-Tc;n>Wv&&($c-=n,Tc=e)}function UE(){for(var e,n=Ec,i,a=1/0;n;)n._call?(a>n._time&&(a=n._time),e=n,n=n._next):(i=n._next,n._next=null,n=e?e._next=i:Ec=i);Gs=e,eh(a)}function eh(e){if(!La){Ps&&(Ps=clearTimeout(Ps));var n=e-Ti;n>24?(e<1/0&&(Ps=setTimeout(Yy,e-eo.now()-$c)),Is&&(Is=clearInterval(Is))):(Is||(Tc=eo.now(),Is=setInterval(zE,Wv)),La=1,eb(Yy))}}function Xy(e,n,i){var a=new Cc;return n=n==null?0:+n,a.restart(o=>{a.stop(),e(o+n)},n,i),a}var $E=zc("start","end","cancel","interrupt"),LE=[],nb=0,Ky=1,th=2,mc=3,Zy=4,nh=5,pc=6;function Lc(e,n,i,a,o,c){var u=e.__transition;if(!u)e.__transition={};else if(i in u)return;HE(e,i,{name:n,index:a,group:o,on:$E,tween:LE,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:nb})}function Ch(e,n){var i=wn(e,n);if(i.state>nb)throw new Error("too late; already scheduled");return i}function Rn(e,n){var i=wn(e,n);if(i.state>mc)throw new Error("too late; already running");return i}function wn(e,n){var i=e.__transition;if(!i||!(i=i[n]))throw new Error("transition not found");return i}function HE(e,n,i){var a=e.__transition,o;a[n]=i,i.timer=tb(c,0,i.time);function c(h){i.state=Ky,i.timer.restart(u,i.delay,i.time),i.delay<=h&&u(h-i.delay)}function u(h){var p,v,y,b;if(i.state!==Ky)return g();for(p in a)if(b=a[p],b.name===i.name){if(b.state===mc)return Xy(u);b.state===Zy?(b.state=pc,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete a[p]):+p<n&&(b.state=pc,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete a[p])}if(Xy(function(){i.state===mc&&(i.state=Zy,i.timer.restart(d,i.delay,i.time),d(h))}),i.state=th,i.on.call("start",e,e.__data__,i.index,i.group),i.state===th){for(i.state=mc,o=new Array(y=i.tween.length),p=0,v=-1;p<y;++p)(b=i.tween[p].value.call(e,e.__data__,i.index,i.group))&&(o[++v]=b);o.length=v+1}}function d(h){for(var p=h<i.duration?i.ease.call(null,h/i.duration):(i.timer.restart(g),i.state=nh,1),v=-1,y=o.length;++v<y;)o[v].call(e,p);i.state===nh&&(i.on.call("end",e,e.__data__,i.index,i.group),g())}function g(){i.state=pc,i.timer.stop(),delete a[n];for(var h in a)return;delete e.__transition}}function yc(e,n){var i=e.__transition,a,o,c=!0,u;if(i){n=n==null?null:n+"";for(u in i){if((a=i[u]).name!==n){c=!1;continue}o=a.state>th&&a.state<nh,a.state=pc,a.timer.stop(),a.on.call(o?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete i[u]}c&&delete e.__transition}}function BE(e){return this.each(function(){yc(this,e)})}function IE(e,n){var i,a;return function(){var o=Rn(this,e),c=o.tween;if(c!==i){a=i=c;for(var u=0,d=a.length;u<d;++u)if(a[u].name===n){a=a.slice(),a.splice(u,1);break}}o.tween=a}}function qE(e,n,i){var a,o;if(typeof i!="function")throw new Error;return function(){var c=Rn(this,e),u=c.tween;if(u!==a){o=(a=u).slice();for(var d={name:n,value:i},g=0,h=o.length;g<h;++g)if(o[g].name===n){o[g]=d;break}g===h&&o.push(d)}c.tween=o}}function VE(e,n){var i=this._id;if(e+="",arguments.length<2){for(var a=wn(this.node(),i).tween,o=0,c=a.length,u;o<c;++o)if((u=a[o]).name===e)return u.value;return null}return this.each((n==null?IE:qE)(i,e,n))}function Ah(e,n,i){var a=e._id;return e.each(function(){var o=Rn(this,a);(o.value||(o.value={}))[n]=i.apply(this,arguments)}),function(o){return wn(o,a).value[n]}}function rb(e,n){var i;return(typeof n=="number"?An:n instanceof Ei?Sc:(i=Ei(n))?(n=i,Sc):Qv)(e,n)}function PE(e){return function(){this.removeAttribute(e)}}function GE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function YE(e,n,i){var a,o=i+"",c;return function(){var u=this.getAttribute(e);return u===o?null:u===a?c:c=n(a=u,i)}}function XE(e,n,i){var a,o=i+"",c;return function(){var u=this.getAttributeNS(e.space,e.local);return u===o?null:u===a?c:c=n(a=u,i)}}function KE(e,n,i){var a,o,c;return function(){var u,d=i(this),g;return d==null?void this.removeAttribute(e):(u=this.getAttribute(e),g=d+"",u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d)))}}function ZE(e,n,i){var a,o,c;return function(){var u,d=i(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),g=d+"",u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d)))}}function QE(e,n){var i=Uc(e),a=i==="transform"?OE:rb;return this.attrTween(e,typeof n=="function"?(i.local?ZE:KE)(i,a,Ah(this,"attr."+e,n)):n==null?(i.local?GE:PE)(i):(i.local?XE:YE)(i,a,n))}function JE(e,n){return function(i){this.setAttribute(e,n.call(this,i))}}function FE(e,n){return function(i){this.setAttributeNS(e.space,e.local,n.call(this,i))}}function WE(e,n){var i,a;function o(){var c=n.apply(this,arguments);return c!==a&&(i=(a=c)&&FE(e,c)),i}return o._value=n,o}function e2(e,n){var i,a;function o(){var c=n.apply(this,arguments);return c!==a&&(i=(a=c)&&JE(e,c)),i}return o._value=n,o}function t2(e,n){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;var a=Uc(e);return this.tween(i,(a.local?WE:e2)(a,n))}function n2(e,n){return function(){Ch(this,e).delay=+n.apply(this,arguments)}}function r2(e,n){return n=+n,function(){Ch(this,e).delay=n}}function i2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?n2:r2)(n,e)):wn(this.node(),n).delay}function a2(e,n){return function(){Rn(this,e).duration=+n.apply(this,arguments)}}function s2(e,n){return n=+n,function(){Rn(this,e).duration=n}}function o2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?a2:s2)(n,e)):wn(this.node(),n).duration}function l2(e,n){if(typeof n!="function")throw new Error;return function(){Rn(this,e).ease=n}}function c2(e){var n=this._id;return arguments.length?this.each(l2(n,e)):wn(this.node(),n).ease}function u2(e,n){return function(){var i=n.apply(this,arguments);if(typeof i!="function")throw new Error;Rn(this,e).ease=i}}function d2(e){if(typeof e!="function")throw new Error;return this.each(u2(this._id,e))}function f2(e){typeof e!="function"&&(e=Dv(e));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var c=n[o],u=c.length,d=a[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new tr(a,this._parents,this._name,this._id)}function h2(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,i=e._groups,a=n.length,o=i.length,c=Math.min(a,o),u=new Array(a),d=0;d<c;++d)for(var g=n[d],h=i[d],p=g.length,v=u[d]=new Array(p),y,b=0;b<p;++b)(y=g[b]||h[b])&&(v[b]=y);for(;d<a;++d)u[d]=n[d];return new tr(u,this._parents,this._name,this._id)}function g2(e){return(e+"").trim().split(/^|\s+/).every(function(n){var i=n.indexOf(".");return i>=0&&(n=n.slice(0,i)),!n||n==="start"})}function m2(e,n,i){var a,o,c=g2(n)?Ch:Rn;return function(){var u=c(this,e),d=u.on;d!==a&&(o=(a=d).copy()).on(n,i),u.on=o}}function p2(e,n){var i=this._id;return arguments.length<2?wn(this.node(),i).on.on(e):this.each(m2(i,e,n))}function y2(e){return function(){var n=this.parentNode;for(var i in this.__transition)if(+i!==e)return;n&&n.removeChild(this)}}function v2(){return this.on("end.remove",y2(this._id))}function b2(e){var n=this._name,i=this._id;typeof e!="function"&&(e=xh(e));for(var a=this._groups,o=a.length,c=new Array(o),u=0;u<o;++u)for(var d=a[u],g=d.length,h=c[u]=new Array(g),p,v,y=0;y<g;++y)(p=d[y])&&(v=e.call(p,p.__data__,y,d))&&("__data__"in p&&(v.__data__=p.__data__),h[y]=v,Lc(h[y],n,i,y,h,wn(p,i)));return new tr(c,this._parents,n,i)}function w2(e){var n=this._name,i=this._id;typeof e!="function"&&(e=jv(e));for(var a=this._groups,o=a.length,c=[],u=[],d=0;d<o;++d)for(var g=a[d],h=g.length,p,v=0;v<h;++v)if(p=g[v]){for(var y=e.call(p,p.__data__,v,g),b,E=wn(p,i),_=0,T=y.length;_<T;++_)(b=y[_])&&Lc(b,n,i,_,y,E);c.push(y),u.push(p)}return new tr(c,u,n,i)}var x2=yo.prototype.constructor;function _2(){return new x2(this._groups,this._parents)}function S2(e,n){var i,a,o;return function(){var c=$a(this,e),u=(this.style.removeProperty(e),$a(this,e));return c===u?null:c===i&&u===a?o:o=n(i=c,a=u)}}function ib(e){return function(){this.style.removeProperty(e)}}function E2(e,n,i){var a,o=i+"",c;return function(){var u=$a(this,e);return u===o?null:u===a?c:c=n(a=u,i)}}function T2(e,n,i){var a,o,c;return function(){var u=$a(this,e),d=i(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),$a(this,e))),u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d))}}function C2(e,n){var i,a,o,c="style."+n,u="end."+c,d;return function(){var g=Rn(this,e),h=g.on,p=g.value[c]==null?d||(d=ib(n)):void 0;(h!==i||o!==p)&&(a=(i=h).copy()).on(u,o=p),g.on=a}}function A2(e,n,i){var a=(e+="")=="transform"?NE:rb;return n==null?this.styleTween(e,S2(e,a)).on("end.style."+e,ib(e)):typeof n=="function"?this.styleTween(e,T2(e,a,Ah(this,"style."+e,n))).each(C2(this._id,e)):this.styleTween(e,E2(e,a,n),i).on("end.style."+e,null)}function N2(e,n,i){return function(a){this.style.setProperty(e,n.call(this,a),i)}}function O2(e,n,i){var a,o;function c(){var u=n.apply(this,arguments);return u!==o&&(a=(o=u)&&N2(e,u,i)),a}return c._value=n,c}function R2(e,n,i){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;return this.tween(a,O2(e,n,i??""))}function k2(e){return function(){this.textContent=e}}function M2(e){return function(){var n=e(this);this.textContent=n??""}}function j2(e){return this.tween("text",typeof e=="function"?M2(Ah(this,"text",e)):k2(e==null?"":e+""))}function D2(e){return function(n){this.textContent=e.call(this,n)}}function z2(e){var n,i;function a(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&D2(o)),n}return a._value=e,a}function U2(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,z2(e))}function $2(){for(var e=this._name,n=this._id,i=ab(),a=this._groups,o=a.length,c=0;c<o;++c)for(var u=a[c],d=u.length,g,h=0;h<d;++h)if(g=u[h]){var p=wn(g,n);Lc(g,e,i,h,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new tr(a,this._parents,e,i)}function L2(){var e,n,i=this,a=i._id,o=i.size();return new Promise(function(c,u){var d={value:u},g={value:function(){--o===0&&c()}};i.each(function(){var h=Rn(this,a),p=h.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(g)),h.on=n}),o===0&&c()})}var H2=0;function tr(e,n,i,a){this._groups=e,this._parents=n,this._name=i,this._id=a}function ab(){return++H2}var Fn=yo.prototype;tr.prototype={constructor:tr,select:b2,selectAll:w2,selectChild:Fn.selectChild,selectChildren:Fn.selectChildren,filter:f2,merge:h2,selection:_2,transition:$2,call:Fn.call,nodes:Fn.nodes,node:Fn.node,size:Fn.size,empty:Fn.empty,each:Fn.each,on:p2,attr:QE,attrTween:t2,style:A2,styleTween:R2,text:j2,textTween:U2,remove:v2,tween:VE,delay:i2,duration:o2,ease:c2,easeVarying:d2,end:L2,[Symbol.iterator]:Fn[Symbol.iterator]};function B2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var I2={time:null,delay:0,duration:250,ease:B2};function q2(e,n){for(var i;!(i=e.__transition)||!(i=i[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return i}function V2(e){var n,i;e instanceof tr?(n=e._id,e=e._name):(n=ab(),(i=I2).time=Th(),e=e==null?null:e+"");for(var a=this._groups,o=a.length,c=0;c<o;++c)for(var u=a[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&Lc(g,e,n,h,u,i||q2(g,n));return new tr(a,this._parents,e,n)}yo.prototype.interrupt=BE;yo.prototype.transition=V2;const Wl=e=>()=>e;function P2(e,{sourceEvent:n,target:i,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function er(e,n,i){this.k=e,this.x=n,this.y=i}er.prototype={constructor:er,scale:function(e){return e===1?this:new er(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new er(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hc=new er(1,0,0);sb.prototype=er.prototype;function sb(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Hc;return e.__zoom}function Nf(e){e.stopImmediatePropagation()}function qs(e){e.preventDefault(),e.stopImmediatePropagation()}function G2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Y2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Qy(){return this.__zoom||Hc}function X2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function K2(){return navigator.maxTouchPoints||"ontouchstart"in this}function Z2(e,n,i){var a=e.invertX(n[0][0])-i[0][0],o=e.invertX(n[1][0])-i[1][0],c=e.invertY(n[0][1])-i[0][1],u=e.invertY(n[1][1])-i[1][1];return e.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function ob(){var e=G2,n=Y2,i=Z2,a=X2,o=K2,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,g=gc,h=zc("start","zoom","end"),p,v,y,b=500,E=150,_=0,T=10;function C(D){D.property("__zoom",Qy).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",Z).on("dblclick.zoom",oe).filter(o).on("touchstart.zoom",ee).on("touchmove.zoom",te).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(D,P,R,$){var B=D.selection?D.selection():D;B.property("__zoom",Qy),D!==B?L(D,P,R,$):B.interrupt().each(function(){j(this,arguments).event($).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},C.scaleBy=function(D,P,R,$){C.scaleTo(D,function(){var B=this.__zoom.k,K=typeof P=="function"?P.apply(this,arguments):P;return B*K},R,$)},C.scaleTo=function(D,P,R,$){C.transform(D,function(){var B=n.apply(this,arguments),K=this.__zoom,z=R==null?A(B):typeof R=="function"?R.apply(this,arguments):R,O=K.invert(z),M=typeof P=="function"?P.apply(this,arguments):P;return i(x(k(K,M),z,O),B,u)},R,$)},C.translateBy=function(D,P,R,$){C.transform(D,function(){return i(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof R=="function"?R.apply(this,arguments):R),n.apply(this,arguments),u)},null,$)},C.translateTo=function(D,P,R,$,B){C.transform(D,function(){var K=n.apply(this,arguments),z=this.__zoom,O=$==null?A(K):typeof $=="function"?$.apply(this,arguments):$;return i(Hc.translate(O[0],O[1]).scale(z.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof R=="function"?-R.apply(this,arguments):-R),K,u)},$,B)};function k(D,P){return P=Math.max(c[0],Math.min(c[1],P)),P===D.k?D:new er(P,D.x,D.y)}function x(D,P,R){var $=P[0]-R[0]*D.k,B=P[1]-R[1]*D.k;return $===D.x&&B===D.y?D:new er(D.k,$,B)}function A(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function L(D,P,R,$){D.on("start.zoom",function(){j(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event($).end()}).tween("zoom",function(){var B=this,K=arguments,z=j(B,K).event($),O=n.apply(B,K),M=R==null?A(O):typeof R=="function"?R.apply(B,K):R,Q=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),X=B.__zoom,se=typeof P=="function"?P.apply(B,K):P,ue=g(X.invert(M).concat(Q/X.k),se.invert(M).concat(Q/se.k));return function(ce){if(ce===1)ce=se;else{var le=ue(ce),de=Q/le[2];ce=new er(de,M[0]-le[0]*de,M[1]-le[1]*de)}z.zoom(null,ce)}})}function j(D,P,R){return!R&&D.__zooming||new U(D,P)}function U(D,P){this.that=D,this.args=P,this.active=0,this.sourceEvent=null,this.extent=n.apply(D,P),this.taps=0}U.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,P){return this.mouse&&D!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var P=Zt(this.that).datum();h.call(D,this.that,new P2(D,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:h}),P)}};function V(D,...P){if(!e.apply(this,arguments))return;var R=j(this,P).event(D),$=this.__zoom,B=Math.max(c[0],Math.min(c[1],$.k*Math.pow(2,a.apply(this,arguments)))),K=mn(D);if(R.wheel)(R.mouse[0][0]!==K[0]||R.mouse[0][1]!==K[1])&&(R.mouse[1]=$.invert(R.mouse[0]=K)),clearTimeout(R.wheel);else{if($.k===B)return;R.mouse=[K,$.invert(K)],yc(this),R.start()}qs(D),R.wheel=setTimeout(z,E),R.zoom("mouse",i(x(k($,B),R.mouse[0],R.mouse[1]),R.extent,u));function z(){R.wheel=null,R.end()}}function Z(D,...P){if(y||!e.apply(this,arguments))return;var R=D.currentTarget,$=j(this,P,!0).event(D),B=Zt(D.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",Q,!0),K=mn(D,R),z=D.clientX,O=D.clientY;Pv(D.view),Nf(D),$.mouse=[K,this.__zoom.invert(K)],yc(this),$.start();function M(X){if(qs(X),!$.moved){var se=X.clientX-z,ue=X.clientY-O;$.moved=se*se+ue*ue>_}$.event(X).zoom("mouse",i(x($.that.__zoom,$.mouse[0]=mn(X,R),$.mouse[1]),$.extent,u))}function Q(X){B.on("mousemove.zoom mouseup.zoom",null),Gv(X.view,$.moved),qs(X),$.event(X).end()}}function oe(D,...P){if(e.apply(this,arguments)){var R=this.__zoom,$=mn(D.changedTouches?D.changedTouches[0]:D,this),B=R.invert($),K=R.k*(D.shiftKey?.5:2),z=i(x(k(R,K),$,B),n.apply(this,P),u);qs(D),d>0?Zt(this).transition().duration(d).call(L,z,$,D):Zt(this).call(C.transform,z,$,D)}}function ee(D,...P){if(e.apply(this,arguments)){var R=D.touches,$=R.length,B=j(this,P,D.changedTouches.length===$).event(D),K,z,O,M;for(Nf(D),z=0;z<$;++z)O=R[z],M=mn(O,this),M=[M,this.__zoom.invert(M),O.identifier],B.touch0?!B.touch1&&B.touch0[2]!==M[2]&&(B.touch1=M,B.taps=0):(B.touch0=M,K=!0,B.taps=1+!!p);p&&(p=clearTimeout(p)),K&&(B.taps<2&&(v=M[0],p=setTimeout(function(){p=null},b)),yc(this),B.start())}}function te(D,...P){if(this.__zooming){var R=j(this,P).event(D),$=D.changedTouches,B=$.length,K,z,O,M;for(qs(D),K=0;K<B;++K)z=$[K],O=mn(z,this),R.touch0&&R.touch0[2]===z.identifier?R.touch0[0]=O:R.touch1&&R.touch1[2]===z.identifier&&(R.touch1[0]=O);if(z=R.that.__zoom,R.touch1){var Q=R.touch0[0],X=R.touch0[1],se=R.touch1[0],ue=R.touch1[1],ce=(ce=se[0]-Q[0])*ce+(ce=se[1]-Q[1])*ce,le=(le=ue[0]-X[0])*le+(le=ue[1]-X[1])*le;z=k(z,Math.sqrt(ce/le)),O=[(Q[0]+se[0])/2,(Q[1]+se[1])/2],M=[(X[0]+ue[0])/2,(X[1]+ue[1])/2]}else if(R.touch0)O=R.touch0[0],M=R.touch0[1];else return;R.zoom("touch",i(x(z,O,M),R.extent,u))}}function G(D,...P){if(this.__zooming){var R=j(this,P).event(D),$=D.changedTouches,B=$.length,K,z;for(Nf(D),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),K=0;K<B;++K)z=$[K],R.touch0&&R.touch0[2]===z.identifier?delete R.touch0:R.touch1&&R.touch1[2]===z.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(z=mn(z,this),Math.hypot(v[0]-z[0],v[1]-z[1])<T)){var O=Zt(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return C.wheelDelta=function(D){return arguments.length?(a=typeof D=="function"?D:Wl(+D),C):a},C.filter=function(D){return arguments.length?(e=typeof D=="function"?D:Wl(!!D),C):e},C.touchable=function(D){return arguments.length?(o=typeof D=="function"?D:Wl(!!D),C):o},C.extent=function(D){return arguments.length?(n=typeof D=="function"?D:Wl([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),C):n},C.scaleExtent=function(D){return arguments.length?(c[0]=+D[0],c[1]=+D[1],C):[c[0],c[1]]},C.translateExtent=function(D){return arguments.length?(u[0][0]=+D[0][0],u[1][0]=+D[1][0],u[0][1]=+D[0][1],u[1][1]=+D[1][1],C):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},C.constrain=function(D){return arguments.length?(i=D,C):i},C.duration=function(D){return arguments.length?(d=+D,C):d},C.interpolate=function(D){return arguments.length?(g=D,C):g},C.on=function(){var D=h.on.apply(h,arguments);return D===h?C:D},C.clickDistance=function(D){return arguments.length?(_=(D=+D)*D,C):Math.sqrt(_)},C.tapDistance=function(D){return arguments.length?(T=+D,C):T},C}const On={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:i,targetHandle:a})=>`Couldn't create edge for ${e} handle id: "${e==="source"?i:a}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},to=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],lb=["Enter"," ","Escape"],cb={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:i})=>`Moved selected node ${e}. New position, x: ${n}, y: ${i}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ha;(function(e){e.Strict="strict",e.Loose="loose"})(Ha||(Ha={}));var _i;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(_i||(_i={}));var no;(function(e){e.Partial="partial",e.Full="full"})(no||(no={}));const ub={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Lr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Lr||(Lr={}));var Si;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Si||(Si={}));var he;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(he||(he={}));const Jy={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function db(e){return e===null?null:e?"valid":"invalid"}const fb=e=>"id"in e&&"source"in e&&"target"in e,Q2=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Nh=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),bo=(e,n=[0,0])=>{const{width:i,height:a}=nr(e),o=e.origin??n,c=i*o[0],u=a*o[1];return{x:e.position.x-c,y:e.position.y-u}},J2=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const i=e.reduce((a,o)=>{const c=typeof o=="string";let u=!n.nodeLookup&&!c?o:void 0;n.nodeLookup&&(u=c?n.nodeLookup.get(o):Nh(o)?o:n.nodeLookup.get(o.id));const d=u?Ac(u,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Bc(a,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ic(i)},wo=(e,n={})=>{let i={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return e.forEach(o=>{(n.filter===void 0||n.filter(o))&&(i=Bc(i,Ac(o)),a=!0)}),a?Ic(i):{x:0,y:0,width:0,height:0}},Oh=(e,n,[i,a,o]=[0,0,1],c=!1,u=!1)=>{const d={..._o(n,[i,a,o]),width:n.width/o,height:n.height/o},g=[];for(const h of e.values()){const{measured:p,selectable:v=!0,hidden:y=!1}=h;if(u&&!v||y)continue;const b=p.width??h.width??h.initialWidth??null,E=p.height??h.height??h.initialHeight??null,_=ro(d,Ia(h)),T=(b??0)*(E??0),C=c&&_>0;(!h.internals.handleBounds||C||_>=T||h.dragging)&&g.push(h)}return g},F2=(e,n)=>{const i=new Set;return e.forEach(a=>{i.add(a.id)}),n.filter(a=>i.has(a.source)||i.has(a.target))};function W2(e,n){const i=new Map,a=n?.nodes?new Set(n.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(n?.includeHiddenNodes||!o.hidden)&&(!a||a.has(o.id))&&i.set(o.id,o)}),i}async function eT({nodes:e,width:n,height:i,panZoom:a,minZoom:o,maxZoom:c},u){if(e.size===0)return Promise.resolve(!0);const d=W2(e,u),g=wo(d),h=Rh(g,n,i,u?.minZoom??o,u?.maxZoom??c,u?.padding??.1);return await a.setViewport(h,{duration:u?.duration,ease:u?.ease,interpolate:u?.interpolate}),Promise.resolve(!0)}function hb({nodeId:e,nextPosition:n,nodeLookup:i,nodeOrigin:a=[0,0],nodeExtent:o,onError:c}){const u=i.get(e),d=u.parentId?i.get(u.parentId):void 0,{x:g,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},p=u.origin??a;let v=u.extent||o;if(u.extent==="parent"&&!u.expandParent)if(!d)c?.("005",On.error005());else{const b=d.measured.width,E=d.measured.height;b&&E&&(v=[[g,h],[g+b,h+E]])}else d&&qa(u.extent)&&(v=[[u.extent[0][0]+g,u.extent[0][1]+h],[u.extent[1][0]+g,u.extent[1][1]+h]]);const y=qa(v)?Ci(n,v,u.measured):n;return(u.measured.width===void 0||u.measured.height===void 0)&&c?.("015",On.error015()),{position:{x:y.x-g+(u.measured.width??0)*p[0],y:y.y-h+(u.measured.height??0)*p[1]},positionAbsolute:y}}async function tT({nodesToRemove:e=[],edgesToRemove:n=[],nodes:i,edges:a,onBeforeDelete:o}){const c=new Set(e.map(y=>y.id)),u=[];for(const y of i){if(y.deletable===!1)continue;const b=c.has(y.id),E=!b&&y.parentId&&u.find(_=>_.id===y.parentId);(b||E)&&u.push(y)}const d=new Set(n.map(y=>y.id)),g=a.filter(y=>y.deletable!==!1),p=F2(u,g);for(const y of g)d.has(y.id)&&!p.find(E=>E.id===y.id)&&p.push(y);if(!o)return{edges:p,nodes:u};const v=await o({nodes:u,edges:p});return typeof v=="boolean"?v?{edges:p,nodes:u}:{edges:[],nodes:[]}:v}const Ba=(e,n=0,i=1)=>Math.min(Math.max(e,n),i),Ci=(e={x:0,y:0},n,i)=>({x:Ba(e.x,n[0][0],n[1][0]-(i?.width??0)),y:Ba(e.y,n[0][1],n[1][1]-(i?.height??0))});function gb(e,n,i){const{width:a,height:o}=nr(i),{x:c,y:u}=i.internals.positionAbsolute;return Ci(e,[[c,u],[c+a,u+o]],n)}const Fy=(e,n,i)=>e<n?Ba(Math.abs(e-n),1,n)/n:e>i?-Ba(Math.abs(e-i),1,n)/n:0,mb=(e,n,i=15,a=40)=>{const o=Fy(e.x,a,n.width-a)*i,c=Fy(e.y,a,n.height-a)*i;return[o,c]},Bc=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),rh=({x:e,y:n,width:i,height:a})=>({x:e,y:n,x2:e+i,y2:n+a}),Ic=({x:e,y:n,x2:i,y2:a})=>({x:e,y:n,width:i-e,height:a-n}),Ia=(e,n=[0,0])=>{const{x:i,y:a}=Nh(e)?e.internals.positionAbsolute:bo(e,n);return{x:i,y:a,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Ac=(e,n=[0,0])=>{const{x:i,y:a}=Nh(e)?e.internals.positionAbsolute:bo(e,n);return{x:i,y:a,x2:i+(e.measured?.width??e.width??e.initialWidth??0),y2:a+(e.measured?.height??e.height??e.initialHeight??0)}},pb=(e,n)=>Ic(Bc(rh(e),rh(n))),ro=(e,n)=>{const i=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),a=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(i*a)},Wy=e=>vn(e.width)&&vn(e.height)&&vn(e.x)&&vn(e.y),vn=e=>!isNaN(e)&&isFinite(e),nT=(e,n)=>{},xo=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),_o=({x:e,y:n},[i,a,o],c=!1,u=[1,1])=>{const d={x:(e-i)/o,y:(n-a)/o};return c?xo(d,u):d},Nc=({x:e,y:n},[i,a,o])=>({x:e*o+i,y:n*o+a});function va(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const i=parseFloat(e);if(!Number.isNaN(i))return Math.floor(i)}if(typeof e=="string"&&e.endsWith("%")){const i=parseFloat(e);if(!Number.isNaN(i))return Math.floor(n*i*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function rT(e,n,i){if(typeof e=="string"||typeof e=="number"){const a=va(e,i),o=va(e,n);return{top:a,right:o,bottom:a,left:o,x:o*2,y:a*2}}if(typeof e=="object"){const a=va(e.top??e.y??0,i),o=va(e.bottom??e.y??0,i),c=va(e.left??e.x??0,n),u=va(e.right??e.x??0,n);return{top:a,right:u,bottom:o,left:c,x:c+u,y:a+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function iT(e,n,i,a,o,c){const{x:u,y:d}=Nc(e,[n,i,a]),{x:g,y:h}=Nc({x:e.x+e.width,y:e.y+e.height},[n,i,a]),p=o-g,v=c-h;return{left:Math.floor(u),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(v)}}const Rh=(e,n,i,a,o,c)=>{const u=rT(c,n,i),d=(n-u.x)/e.width,g=(i-u.y)/e.height,h=Math.min(d,g),p=Ba(h,a,o),v=e.x+e.width/2,y=e.y+e.height/2,b=n/2-v*p,E=i/2-y*p,_=iT(e,b,E,p,n,i),T={left:Math.min(_.left-u.left,0),top:Math.min(_.top-u.top,0),right:Math.min(_.right-u.right,0),bottom:Math.min(_.bottom-u.bottom,0)};return{x:b-T.left+T.right,y:E-T.top+T.bottom,zoom:p}},io=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function qa(e){return e!=null&&e!=="parent"}function nr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function yb(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function vb(e,n={width:0,height:0},i,a,o){const c={...e},u=a.get(i);if(u){const d=u.origin||o;c.x+=u.internals.positionAbsolute.x-(n.width??0)*d[0],c.y+=u.internals.positionAbsolute.y-(n.height??0)*d[1]}return c}function e0(e,n){if(e.size!==n.size)return!1;for(const i of e)if(!n.has(i))return!1;return!0}function aT(){let e,n;return{promise:new Promise((a,o)=>{e=a,n=o}),resolve:e,reject:n}}function sT(e){return{...cb,...e||{}}}function Ks(e,{snapGrid:n=[0,0],snapToGrid:i=!1,transform:a,containerBounds:o}){const{x:c,y:u}=bn(e),d=_o({x:c-(o?.left??0),y:u-(o?.top??0)},a),{x:g,y:h}=i?xo(d,n):d;return{xSnapped:g,ySnapped:h,...d}}const kh=e=>({width:e.offsetWidth,height:e.offsetHeight}),bb=e=>e?.getRootNode?.()||window?.document,oT=["INPUT","SELECT","TEXTAREA"];function wb(e){const n=e.composedPath?.()?.[0]||e.target;return n?.nodeType!==1?!1:oT.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const xb=e=>"clientX"in e,bn=(e,n)=>{const i=xb(e),a=i?e.clientX:e.touches?.[0].clientX,o=i?e.clientY:e.touches?.[0].clientY;return{x:a-(n?.left??0),y:o-(n?.top??0)}},t0=(e,n,i,a,o)=>{const c=n.querySelectorAll(`.${e}`);return!c||!c.length?null:Array.from(c).map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:o,position:u.getAttribute("data-handlepos"),x:(d.left-i.left)/a,y:(d.top-i.top)/a,...kh(u)}})};function _b({sourceX:e,sourceY:n,targetX:i,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d}){const g=e*.125+o*.375+u*.375+i*.125,h=n*.125+c*.375+d*.375+a*.125,p=Math.abs(g-e),v=Math.abs(h-n);return[g,h,p,v]}function ec(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function n0({pos:e,x1:n,y1:i,x2:a,y2:o,c}){switch(e){case he.Left:return[n-ec(n-a,c),i];case he.Right:return[n+ec(a-n,c),i];case he.Top:return[n,i-ec(i-o,c)];case he.Bottom:return[n,i+ec(o-i,c)]}}function Sb({sourceX:e,sourceY:n,sourcePosition:i=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top,curvature:u=.25}){const[d,g]=n0({pos:i,x1:e,y1:n,x2:a,y2:o,c:u}),[h,p]=n0({pos:c,x1:a,y1:o,x2:e,y2:n,c:u}),[v,y,b,E]=_b({sourceX:e,sourceY:n,targetX:a,targetY:o,sourceControlX:d,sourceControlY:g,targetControlX:h,targetControlY:p});return[`M${e},${n} C${d},${g} ${h},${p} ${a},${o}`,v,y,b,E]}function Eb({sourceX:e,sourceY:n,targetX:i,targetY:a}){const o=Math.abs(i-e)/2,c=i<e?i+o:i-o,u=Math.abs(a-n)/2,d=a<n?a+u:a-u;return[c,d,o,u]}function lT({sourceNode:e,targetNode:n,selected:i=!1,zIndex:a,elevateOnSelect:o=!1}){if(a!==void 0)return a;const c=o&&i?1e3:0,u=Math.max(e.parentId||o&&e.selected?e.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return c+u}function cT({sourceNode:e,targetNode:n,width:i,height:a,transform:o}){const c=Bc(Ac(e),Ac(n));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u={x:-o[0]/o[2],y:-o[1]/o[2],width:i/o[2],height:a/o[2]};return ro(u,Ic(c))>0}const uT=({source:e,sourceHandle:n,target:i,targetHandle:a})=>`xy-edge__${e}${n||""}-${i}${a||""}`,dT=(e,n)=>n.some(i=>i.source===e.source&&i.target===e.target&&(i.sourceHandle===e.sourceHandle||!i.sourceHandle&&!e.sourceHandle)&&(i.targetHandle===e.targetHandle||!i.targetHandle&&!e.targetHandle)),Tb=(e,n)=>{if(!e.source||!e.target)return n;let i;return fb(e)?i={...e}:i={...e,id:uT(e)},dT(i,n)?n:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,n.concat(i))};function Cb({sourceX:e,sourceY:n,targetX:i,targetY:a}){const[o,c,u,d]=Eb({sourceX:e,sourceY:n,targetX:i,targetY:a});return[`M ${e},${n}L ${i},${a}`,o,c,u,d]}const r0={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},fT=({source:e,sourcePosition:n=he.Bottom,target:i})=>n===he.Left||n===he.Right?e.x<i.x?{x:1,y:0}:{x:-1,y:0}:e.y<i.y?{x:0,y:1}:{x:0,y:-1},i0=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function hT({source:e,sourcePosition:n=he.Bottom,target:i,targetPosition:a=he.Top,center:o,offset:c,stepPosition:u}){const d=r0[n],g=r0[a],h={x:e.x+d.x*c,y:e.y+d.y*c},p={x:i.x+g.x*c,y:i.y+g.y*c},v=fT({source:h,sourcePosition:n,target:p}),y=v.x!==0?"x":"y",b=v[y];let E=[],_,T;const C={x:0,y:0},k={x:0,y:0},[,,x,A]=Eb({sourceX:e.x,sourceY:e.y,targetX:i.x,targetY:i.y});if(d[y]*g[y]===-1){y==="x"?(_=o.x??h.x+(p.x-h.x)*u,T=o.y??(h.y+p.y)/2):(_=o.x??(h.x+p.x)/2,T=o.y??h.y+(p.y-h.y)*u);const j=[{x:_,y:h.y},{x:_,y:p.y}],U=[{x:h.x,y:T},{x:p.x,y:T}];d[y]===b?E=y==="x"?j:U:E=y==="x"?U:j}else{const j=[{x:h.x,y:p.y}],U=[{x:p.x,y:h.y}];if(y==="x"?E=d.x===b?U:j:E=d.y===b?j:U,n===a){const te=Math.abs(e[y]-i[y]);if(te<=c){const G=Math.min(c-1,c-te);d[y]===b?C[y]=(h[y]>e[y]?-1:1)*G:k[y]=(p[y]>i[y]?-1:1)*G}}if(n!==a){const te=y==="x"?"y":"x",G=d[y]===g[te],D=h[te]>p[te],P=h[te]<p[te];(d[y]===1&&(!G&&D||G&&P)||d[y]!==1&&(!G&&P||G&&D))&&(E=y==="x"?j:U)}const V={x:h.x+C.x,y:h.y+C.y},Z={x:p.x+k.x,y:p.y+k.y},oe=Math.max(Math.abs(V.x-E[0].x),Math.abs(Z.x-E[0].x)),ee=Math.max(Math.abs(V.y-E[0].y),Math.abs(Z.y-E[0].y));oe>=ee?(_=(V.x+Z.x)/2,T=E[0].y):(_=E[0].x,T=(V.y+Z.y)/2)}return[[e,{x:h.x+C.x,y:h.y+C.y},...E,{x:p.x+k.x,y:p.y+k.y},i],_,T,x,A]}function gT(e,n,i,a){const o=Math.min(i0(e,n)/2,i0(n,i)/2,a),{x:c,y:u}=n;if(e.x===c&&c===i.x||e.y===u&&u===i.y)return`L${c} ${u}`;if(e.y===u){const h=e.x<i.x?-1:1,p=e.y<i.y?1:-1;return`L ${c+o*h},${u}Q ${c},${u} ${c},${u+o*p}`}const d=e.x<i.x?1:-1,g=e.y<i.y?-1:1;return`L ${c},${u+o*g}Q ${c},${u} ${c+o*d},${u}`}function ih({sourceX:e,sourceY:n,sourcePosition:i=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top,borderRadius:u=5,centerX:d,centerY:g,offset:h=20,stepPosition:p=.5}){const[v,y,b,E,_]=hT({source:{x:e,y:n},sourcePosition:i,target:{x:a,y:o},targetPosition:c,center:{x:d,y:g},offset:h,stepPosition:p});return[v.reduce((C,k,x)=>{let A="";return x>0&&x<v.length-1?A=gT(v[x-1],k,v[x+1],u):A=`${x===0?"M":"L"}${k.x} ${k.y}`,C+=A,C},""),y,b,E,_]}function a0(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function mT(e){const{sourceNode:n,targetNode:i}=e;if(!a0(n)||!a0(i))return null;const a=n.internals.handleBounds||s0(n.handles),o=i.internals.handleBounds||s0(i.handles),c=o0(a?.source??[],e.sourceHandle),u=o0(e.connectionMode===Ha.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!c||!u)return e.onError?.("008",On.error008(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=c?.position||he.Bottom,g=u?.position||he.Top,h=ao(n,c,d),p=ao(i,u,g);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:g}}function s0(e){if(!e)return null;const n=[],i=[];for(const a of e)a.width=a.width??1,a.height=a.height??1,a.type==="source"?n.push(a):a.type==="target"&&i.push(a);return{source:n,target:i}}function ao(e,n,i=he.Left,a=!1){const o=(n?.x??0)+e.internals.positionAbsolute.x,c=(n?.y??0)+e.internals.positionAbsolute.y,{width:u,height:d}=n??nr(e);if(a)return{x:o+u/2,y:c+d/2};switch(n?.position??i){case he.Top:return{x:o+u/2,y:c};case he.Right:return{x:o+u,y:c+d/2};case he.Bottom:return{x:o+u/2,y:c+d};case he.Left:return{x:o,y:c+d/2}}}function o0(e,n){return e&&(n?e.find(i=>i.id===n):e[0])||null}function ah(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`:""}function pT(e,{id:n,defaultColor:i,defaultMarkerStart:a,defaultMarkerEnd:o}){const c=new Set;return e.reduce((u,d)=>([d.markerStart||a,d.markerEnd||o].forEach(g=>{if(g&&typeof g=="object"){const h=ah(g,n);c.has(h)||(u.push({id:h,color:g.color||i,...g}),c.add(h))}}),u),[]).sort((u,d)=>u.id.localeCompare(d.id))}const Ab=1e3,yT=10,Mh={nodeOrigin:[0,0],nodeExtent:to,elevateNodesOnSelect:!0,defaults:{}},vT={...Mh,checkEquality:!0};function jh(e,n){const i={...e};for(const a in n)n[a]!==void 0&&(i[a]=n[a]);return i}function bT(e,n,i){const a=jh(Mh,i);for(const o of e.values())if(o.parentId)Dh(o,e,n,a);else{const c=bo(o,a.nodeOrigin),u=qa(o.extent)?o.extent:a.nodeExtent,d=Ci(c,u,nr(o));o.internals.positionAbsolute=d}}function wT(e,n){if(!e.handles)return e.measured?n?.internals.handleBounds:void 0;const i=[],a=[];for(const o of e.handles){const c={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?i.push(c):o.type==="target"&&a.push(c)}return{source:i,target:a}}function sh(e,n,i,a){const o=jh(vT,a);let c={i:-1},u=e.length>0;const d=new Map(n),g=o?.elevateNodesOnSelect?Ab:0;n.clear(),i.clear();for(const h of e){let p=d.get(h.id);if(o.checkEquality&&h===p?.internals.userNode)n.set(h.id,p);else{const v=bo(h,o.nodeOrigin),y=qa(h.extent)?h.extent:o.nodeExtent,b=Ci(v,y,nr(h));p={...o.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:b,handleBounds:wT(h,p),z:Nb(h,g),userNode:h}},n.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(u=!1),h.parentId&&Dh(p,n,i,a,c)}return u}function xT(e,n){if(!e.parentId)return;const i=n.get(e.parentId);i?i.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function Dh(e,n,i,a,o){const{elevateNodesOnSelect:c,nodeOrigin:u,nodeExtent:d}=jh(Mh,a),g=e.parentId,h=n.get(g);if(!h){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}xT(e,i),o&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++o.i,h.internals.z=h.internals.z+o.i*yT),o&&h.internals.rootParentIndex!==void 0&&(o.i=h.internals.rootParentIndex);const p=c?Ab:0,{x:v,y,z:b}=_T(e,h,u,d,p),{positionAbsolute:E}=e.internals,_=v!==E.x||y!==E.y;(_||b!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:_?{x:v,y}:E,z:b}})}function Nb(e,n){return(vn(e.zIndex)?e.zIndex:0)+(e.selected?n:0)}function _T(e,n,i,a,o){const{x:c,y:u}=n.internals.positionAbsolute,d=nr(e),g=bo(e,i),h=qa(e.extent)?Ci(g,e.extent,d):g;let p=Ci({x:c+h.x,y:u+h.y},a,d);e.extent==="parent"&&(p=gb(p,d,n));const v=Nb(e,o),y=n.internals.z??0;return{x:p.x,y:p.y,z:y>=v?y+1:v}}function zh(e,n,i,a=[0,0]){const o=[],c=new Map;for(const u of e){const d=n.get(u.parentId);if(!d)continue;const g=c.get(u.parentId)?.expandedRect??Ia(d),h=pb(g,u.rect);c.set(u.parentId,{expandedRect:h,parent:d})}return c.size>0&&c.forEach(({expandedRect:u,parent:d},g)=>{const h=d.internals.positionAbsolute,p=nr(d),v=d.origin??a,y=u.x<h.x?Math.round(Math.abs(h.x-u.x)):0,b=u.y<h.y?Math.round(Math.abs(h.y-u.y)):0,E=Math.max(p.width,Math.round(u.width)),_=Math.max(p.height,Math.round(u.height)),T=(E-p.width)*v[0],C=(_-p.height)*v[1];(y>0||b>0||T||C)&&(o.push({id:g,type:"position",position:{x:d.position.x-y+T,y:d.position.y-b+C}}),i.get(g)?.forEach(k=>{e.some(x=>x.id===k.id)||o.push({id:k.id,type:"position",position:{x:k.position.x+y,y:k.position.y+b}})})),(p.width<u.width||p.height<u.height||y||b)&&o.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:E+(y?v[0]*y-T:0),height:_+(b?v[1]*b-C:0)}})}),o}function ST(e,n,i,a,o,c){const u=a?.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const g=[],h=window.getComputedStyle(u),{m22:p}=new window.DOMMatrixReadOnly(h.transform),v=[];for(const y of e.values()){const b=n.get(y.id);if(!b)continue;if(b.hidden){n.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const E=kh(y.nodeElement),_=b.measured.width!==E.width||b.measured.height!==E.height;if(!!(E.width&&E.height&&(_||!b.internals.handleBounds||y.force))){const C=y.nodeElement.getBoundingClientRect(),k=qa(b.extent)?b.extent:c;let{positionAbsolute:x}=b.internals;b.parentId&&b.extent==="parent"?x=gb(x,E,n.get(b.parentId)):k&&(x=Ci(x,k,E));const A={...b,measured:E,internals:{...b.internals,positionAbsolute:x,handleBounds:{source:t0("source",y.nodeElement,C,p,b.id),target:t0("target",y.nodeElement,C,p,b.id)}}};n.set(b.id,A),b.parentId&&Dh(A,n,i,{nodeOrigin:o}),d=!0,_&&(g.push({id:b.id,type:"dimensions",dimensions:E}),b.expandParent&&b.parentId&&v.push({id:b.id,parentId:b.parentId,rect:Ia(A,o)}))}}if(v.length>0){const y=zh(v,n,i,o);g.push(...y)}return{changes:g,updatedInternals:d}}async function ET({delta:e,panZoom:n,transform:i,translateExtent:a,width:o,height:c}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const u=await n.setViewportConstrained({x:i[0]+e.x,y:i[1]+e.y,zoom:i[2]},[[0,0],[o,c]],a),d=!!u&&(u.x!==i[0]||u.y!==i[1]||u.k!==i[2]);return Promise.resolve(d)}function l0(e,n,i,a,o,c){let u=o;const d=a.get(u)||new Map;a.set(u,d.set(i,n)),u=`${o}-${e}`;const g=a.get(u)||new Map;if(a.set(u,g.set(i,n)),c){u=`${o}-${e}-${c}`;const h=a.get(u)||new Map;a.set(u,h.set(i,n))}}function Ob(e,n,i){e.clear(),n.clear();for(const a of i){const{source:o,target:c,sourceHandle:u=null,targetHandle:d=null}=a,g={edgeId:a.id,source:o,target:c,sourceHandle:u,targetHandle:d},h=`${o}-${u}--${c}-${d}`,p=`${c}-${d}--${o}-${u}`;l0("source",g,p,e,o,u),l0("target",g,h,e,c,d),n.set(a.id,a)}}function Rb(e,n){if(!e.parentId)return!1;const i=n.get(e.parentId);return i?i.selected?!0:Rb(i,n):!1}function c0(e,n,i){let a=e;do{if(a?.matches?.(n))return!0;if(a===i)return!1;a=a?.parentElement}while(a);return!1}function TT(e,n,i,a){const o=new Map;for(const[c,u]of e)if((u.selected||u.id===a)&&(!u.parentId||!Rb(u,e))&&(u.draggable||n&&typeof u.draggable>"u")){const d=e.get(c);d&&o.set(c,{id:c,position:d.position||{x:0,y:0},distance:{x:i.x-d.internals.positionAbsolute.x,y:i.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return o}function Of({nodeId:e,dragItems:n,nodeLookup:i,dragging:a=!0}){const o=[];for(const[u,d]of n){const g=i.get(u)?.internals.userNode;g&&o.push({...g,position:d.position,dragging:a})}if(!e)return[o[0],o];const c=i.get(e)?.internals.userNode;return[c?{...c,position:n.get(e)?.position||c.position,dragging:a}:o[0],o]}function CT({dragItems:e,snapGrid:n,x:i,y:a}){const o=e.values().next().value;if(!o)return null;const c={x:i-o.distance.x,y:a-o.distance.y},u=xo(c,n);return{x:u.x-c.x,y:u.y-c.y}}function AT({onNodeMouseDown:e,getStoreItems:n,onDragStart:i,onDrag:a,onDragStop:o}){let c={x:null,y:null},u=0,d=new Map,g=!1,h={x:0,y:0},p=null,v=!1,y=null,b=!1,E=!1,_=null;function T({noDragClassName:k,handleSelector:x,domNode:A,isSelectable:L,nodeId:j,nodeClickDistance:U=0}){y=Zt(A);function V({x:te,y:G}){const{nodeLookup:D,nodeExtent:P,snapGrid:R,snapToGrid:$,nodeOrigin:B,onNodeDrag:K,onSelectionDrag:z,onError:O,updateNodePositions:M}=n();c={x:te,y:G};let Q=!1;const X=d.size>1,se=X&&P?rh(wo(d)):null,ue=X&&$?CT({dragItems:d,snapGrid:R,x:te,y:G}):null;for(const[ce,le]of d){if(!D.has(ce))continue;let de={x:te-le.distance.x,y:G-le.distance.y};$&&(de=ue?{x:Math.round(de.x+ue.x),y:Math.round(de.y+ue.y)}:xo(de,R));let Te=null;if(X&&P&&!le.extent&&se){const{positionAbsolute:_e}=le.internals,Ce=_e.x-se.x+P[0][0],Ie=_e.x+le.measured.width-se.x2+P[1][0],Ge=_e.y-se.y+P[0][1],mt=_e.y+le.measured.height-se.y2+P[1][1];Te=[[Ce,Ge],[Ie,mt]]}const{position:Se,positionAbsolute:pe}=hb({nodeId:ce,nextPosition:de,nodeLookup:D,nodeExtent:Te||P,nodeOrigin:B,onError:O});Q=Q||le.position.x!==Se.x||le.position.y!==Se.y,le.position=Se,le.internals.positionAbsolute=pe}if(E=E||Q,!!Q&&(M(d,!0),_&&(a||K||!j&&z))){const[ce,le]=Of({nodeId:j,dragItems:d,nodeLookup:D});a?.(_,d,ce,le),K?.(_,ce,le),j||z?.(_,le)}}async function Z(){if(!p)return;const{transform:te,panBy:G,autoPanSpeed:D,autoPanOnNodeDrag:P}=n();if(!P){g=!1,cancelAnimationFrame(u);return}const[R,$]=mb(h,p,D);(R!==0||$!==0)&&(c.x=(c.x??0)-R/te[2],c.y=(c.y??0)-$/te[2],await G({x:R,y:$})&&V(c)),u=requestAnimationFrame(Z)}function oe(te){const{nodeLookup:G,multiSelectionActive:D,nodesDraggable:P,transform:R,snapGrid:$,snapToGrid:B,selectNodesOnDrag:K,onNodeDragStart:z,onSelectionDragStart:O,unselectNodesAndEdges:M}=n();v=!0,(!K||!L)&&!D&&j&&(G.get(j)?.selected||M()),L&&K&&j&&e?.(j);const Q=Ks(te.sourceEvent,{transform:R,snapGrid:$,snapToGrid:B,containerBounds:p});if(c=Q,d=TT(G,P,Q,j),d.size>0&&(i||z||!j&&O)){const[X,se]=Of({nodeId:j,dragItems:d,nodeLookup:G});i?.(te.sourceEvent,d,X,se),z?.(te.sourceEvent,X,se),j||O?.(te.sourceEvent,se)}}const ee=Yv().clickDistance(U).on("start",te=>{const{domNode:G,nodeDragThreshold:D,transform:P,snapGrid:R,snapToGrid:$}=n();p=G?.getBoundingClientRect()||null,b=!1,E=!1,_=te.sourceEvent,D===0&&oe(te),c=Ks(te.sourceEvent,{transform:P,snapGrid:R,snapToGrid:$,containerBounds:p}),h=bn(te.sourceEvent,p)}).on("drag",te=>{const{autoPanOnNodeDrag:G,transform:D,snapGrid:P,snapToGrid:R,nodeDragThreshold:$,nodeLookup:B}=n(),K=Ks(te.sourceEvent,{transform:D,snapGrid:P,snapToGrid:R,containerBounds:p});if(_=te.sourceEvent,(te.sourceEvent.type==="touchmove"&&te.sourceEvent.touches.length>1||j&&!B.has(j))&&(b=!0),!b){if(!g&&G&&v&&(g=!0,Z()),!v){const z=bn(te.sourceEvent,p),O=z.x-h.x,M=z.y-h.y;Math.sqrt(O*O+M*M)>$&&oe(te)}(c.x!==K.xSnapped||c.y!==K.ySnapped)&&d&&v&&(h=bn(te.sourceEvent,p),V(K))}}).on("end",te=>{if(!(!v||b)&&(g=!1,v=!1,cancelAnimationFrame(u),d.size>0)){const{nodeLookup:G,updateNodePositions:D,onNodeDragStop:P,onSelectionDragStop:R}=n();if(E&&(D(d,!1),E=!1),o||P||!j&&R){const[$,B]=Of({nodeId:j,dragItems:d,nodeLookup:G,dragging:!1});o?.(te.sourceEvent,d,$,B),P?.(te.sourceEvent,$,B),j||R?.(te.sourceEvent,B)}}}).filter(te=>{const G=te.target;return!te.button&&(!k||!c0(G,`.${k}`,A))&&(!x||c0(G,x,A))});y.call(ee)}function C(){y?.on(".drag",null)}return{update:T,destroy:C}}function NT(e,n,i){const a=[],o={x:e.x-i,y:e.y-i,width:i*2,height:i*2};for(const c of n.values())ro(o,Ia(c))>0&&a.push(c);return a}const OT=250;function RT(e,n,i,a){let o=[],c=1/0;const u=NT(e,i,n+OT);for(const d of u){const g=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of g){if(a.nodeId===h.nodeId&&a.type===h.type&&a.id===h.id)continue;const{x:p,y:v}=ao(d,h,h.position,!0),y=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(v-e.y,2));y>n||(y<c?(o=[{...h,x:p,y:v}],c=y):y===c&&o.push({...h,x:p,y:v}))}}if(!o.length)return null;if(o.length>1){const d=a.type==="source"?"target":"source";return o.find(g=>g.type===d)??o[0]}return o[0]}function kb(e,n,i,a,o,c=!1){const u=a.get(e);if(!u)return null;const d=o==="strict"?u.internals.handleBounds?.[n]:[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]],g=(i?d?.find(h=>h.id===i):d?.[0])??null;return g&&c?{...g,...ao(u,g,g.position,!0)}:g}function Mb(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function kT(e,n){let i=null;return n?i=!0:e&&!n&&(i=!1),i}const jb=()=>!0;function MT(e,{connectionMode:n,connectionRadius:i,handleId:a,nodeId:o,edgeUpdaterType:c,isTarget:u,domNode:d,nodeLookup:g,lib:h,autoPanOnConnect:p,flowId:v,panBy:y,cancelConnection:b,onConnectStart:E,onConnect:_,onConnectEnd:T,isValidConnection:C=jb,onReconnectEnd:k,updateConnection:x,getTransform:A,getFromHandle:L,autoPanSpeed:j,dragThreshold:U=1,handleDomNode:V}){const Z=bb(e.target);let oe=0,ee;const{x:te,y:G}=bn(e),D=Mb(c,V),P=d?.getBoundingClientRect();let R=!1;if(!P||!D)return;const $=kb(o,D,a,g,n);if(!$)return;let B=bn(e,P),K=!1,z=null,O=!1,M=null;function Q(){if(!p||!P)return;const[Se,pe]=mb(B,P,j);y({x:Se,y:pe}),oe=requestAnimationFrame(Q)}const X={...$,nodeId:o,type:D,position:$.position},se=g.get(o);let ce={inProgress:!0,isValid:null,from:ao(se,X,he.Left,!0),fromHandle:X,fromPosition:X.position,fromNode:se,to:B,toHandle:null,toPosition:Jy[X.position],toNode:null};function le(){R=!0,x(ce),E?.(e,{nodeId:o,handleId:a,handleType:D})}U===0&&le();function de(Se){if(!R){const{x:Ie,y:Ge}=bn(Se),mt=Ie-te,Ft=Ge-G;if(!(mt*mt+Ft*Ft>U*U))return;le()}if(!L()||!X){Te(Se);return}const pe=A();B=bn(Se,P),ee=RT(_o(B,pe,!1,[1,1]),i,g,X),K||(Q(),K=!0);const _e=Db(Se,{handle:ee,connectionMode:n,fromNodeId:o,fromHandleId:a,fromType:u?"target":"source",isValidConnection:C,doc:Z,lib:h,flowId:v,nodeLookup:g});M=_e.handleDomNode,z=_e.connection,O=kT(!!ee,_e.isValid);const Ce={...ce,isValid:O,to:_e.toHandle&&O?Nc({x:_e.toHandle.x,y:_e.toHandle.y},pe):B,toHandle:_e.toHandle,toPosition:O&&_e.toHandle?_e.toHandle.position:Jy[X.position],toNode:_e.toHandle?g.get(_e.toHandle.nodeId):null};O&&ee&&ce.toHandle&&Ce.toHandle&&ce.toHandle.type===Ce.toHandle.type&&ce.toHandle.nodeId===Ce.toHandle.nodeId&&ce.toHandle.id===Ce.toHandle.id&&ce.to.x===Ce.to.x&&ce.to.y===Ce.to.y||(x(Ce),ce=Ce)}function Te(Se){if(!("touches"in Se&&Se.touches.length>0)){if(R){(ee||M)&&z&&O&&_?.(z);const{inProgress:pe,..._e}=ce,Ce={..._e,toPosition:ce.toHandle?ce.toPosition:null};T?.(Se,Ce),c&&k?.(Se,Ce)}b(),cancelAnimationFrame(oe),K=!1,O=!1,z=null,M=null,Z.removeEventListener("mousemove",de),Z.removeEventListener("mouseup",Te),Z.removeEventListener("touchmove",de),Z.removeEventListener("touchend",Te)}}Z.addEventListener("mousemove",de),Z.addEventListener("mouseup",Te),Z.addEventListener("touchmove",de),Z.addEventListener("touchend",Te)}function Db(e,{handle:n,connectionMode:i,fromNodeId:a,fromHandleId:o,fromType:c,doc:u,lib:d,flowId:g,isValidConnection:h=jb,nodeLookup:p}){const v=c==="target",y=n?u.querySelector(`.${d}-flow__handle[data-id="${g}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:b,y:E}=bn(e),_=u.elementFromPoint(b,E),T=_?.classList.contains(`${d}-flow__handle`)?_:y,C={handleDomNode:T,isValid:!1,connection:null,toHandle:null};if(T){const k=Mb(void 0,T),x=T.getAttribute("data-nodeid"),A=T.getAttribute("data-handleid"),L=T.classList.contains("connectable"),j=T.classList.contains("connectableend");if(!x||!k)return C;const U={source:v?x:a,sourceHandle:v?A:o,target:v?a:x,targetHandle:v?o:A};C.connection=U;const Z=L&&j&&(i===Ha.Strict?v&&k==="source"||!v&&k==="target":x!==a||A!==o);C.isValid=Z&&h(U),C.toHandle=kb(x,k,A,p,i,!0)}return C}const oh={onPointerDown:MT,isValid:Db};function jT({domNode:e,panZoom:n,getTransform:i,getViewScale:a}){const o=Zt(e);function c({translateExtent:d,width:g,height:h,zoomStep:p=1,pannable:v=!0,zoomable:y=!0,inversePan:b=!1}){const E=x=>{if(x.sourceEvent.type!=="wheel"||!n)return;const A=i(),L=x.sourceEvent.ctrlKey&&io()?10:1,j=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*p,U=A[2]*Math.pow(2,j*L);n.scaleTo(U)};let _=[0,0];const T=x=>{(x.sourceEvent.type==="mousedown"||x.sourceEvent.type==="touchstart")&&(_=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY])},C=x=>{const A=i();if(x.sourceEvent.type!=="mousemove"&&x.sourceEvent.type!=="touchmove"||!n)return;const L=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY],j=[L[0]-_[0],L[1]-_[1]];_=L;const U=a()*Math.max(A[2],Math.log(A[2]))*(b?-1:1),V={x:A[0]-j[0]*U,y:A[1]-j[1]*U},Z=[[0,0],[g,h]];n.setViewportConstrained({x:V.x,y:V.y,zoom:A[2]},Z,d)},k=ob().on("start",T).on("zoom",v?C:null).on("zoom.wheel",y?E:null);o.call(k,{})}function u(){o.on("zoom",null)}return{update:c,destroy:u,pointer:mn}}const qc=e=>({x:e.x,y:e.y,zoom:e.k}),Rf=({x:e,y:n,zoom:i})=>Hc.translate(e,n).scale(i),ka=(e,n)=>e.target.closest(`.${n}`),zb=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),DT=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,kf=(e,n=0,i=DT,a=()=>{})=>{const o=typeof n=="number"&&n>0;return o||a(),o?e.transition().duration(n).ease(i).on("end",a):e},Ub=e=>{const n=e.ctrlKey&&io()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function zT({zoomPanValues:e,noWheelClassName:n,d3Selection:i,d3Zoom:a,panOnScrollMode:o,panOnScrollSpeed:c,zoomOnPinch:u,onPanZoomStart:d,onPanZoom:g,onPanZoomEnd:h}){return p=>{if(ka(p,n))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const v=i.property("__zoom").k||1;if(p.ctrlKey&&u){const T=mn(p),C=Ub(p),k=v*Math.pow(2,C);a.scaleTo(i,k,T,p);return}const y=p.deltaMode===1?20:1;let b=o===_i.Vertical?0:p.deltaX*y,E=o===_i.Horizontal?0:p.deltaY*y;!io()&&p.shiftKey&&o!==_i.Vertical&&(b=p.deltaY*y,E=0),a.translateBy(i,-(b/v)*c,-(E/v)*c,{internal:!0});const _=qc(i.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(g?.(p,_),e.panScrollTimeout=setTimeout(()=>{h?.(p,_),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,d?.(p,_))}}function UT({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:i}){return function(a,o){const c=a.type==="wheel",u=!n&&c&&!a.ctrlKey,d=ka(a,e);if(a.ctrlKey&&c&&d&&a.preventDefault(),u||d)return null;a.preventDefault(),i.call(this,a,o)}}function $T({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:i}){return a=>{if(a.sourceEvent?.internal)return;const o=qc(a.transform);e.mouseButton=a.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,a.sourceEvent?.type==="mousedown"&&n(!0),i&&i?.(a.sourceEvent,o)}}function LT({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:i,onTransformChange:a,onPanZoom:o}){return c=>{e.usedRightMouseButton=!!(i&&zb(n,e.mouseButton??0)),c.sourceEvent?.sync||a([c.transform.x,c.transform.y,c.transform.k]),o&&!c.sourceEvent?.internal&&o?.(c.sourceEvent,qc(c.transform))}}function HT({zoomPanValues:e,panOnDrag:n,panOnScroll:i,onDraggingChange:a,onPanZoomEnd:o,onPaneContextMenu:c}){return u=>{if(!u.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,c&&zb(n,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&c(u.sourceEvent),e.usedRightMouseButton=!1,a(!1),o)){const d=qc(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(u.sourceEvent,d)},i?150:0)}}}function BT({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:i,panOnDrag:a,panOnScroll:o,zoomOnDoubleClick:c,userSelectionActive:u,noWheelClassName:d,noPanClassName:g,lib:h,connectionInProgress:p}){return v=>{const y=e||n,b=i&&v.ctrlKey,E=v.type==="wheel";if(v.button===1&&v.type==="mousedown"&&(ka(v,`${h}-flow__node`)||ka(v,`${h}-flow__edge`)))return!0;if(!a&&!y&&!o&&!c&&!i||u||p&&!E||ka(v,d)&&E||ka(v,g)&&(!E||o&&E&&!e)||!i&&v.ctrlKey&&E)return!1;if(!i&&v.type==="touchstart"&&v.touches?.length>1)return v.preventDefault(),!1;if(!y&&!o&&!b&&E||!a&&(v.type==="mousedown"||v.type==="touchstart")||Array.isArray(a)&&!a.includes(v.button)&&v.type==="mousedown")return!1;const _=Array.isArray(a)&&a.includes(v.button)||!v.button||v.button<=1;return(!v.ctrlKey||E)&&_}}function IT({domNode:e,minZoom:n,maxZoom:i,translateExtent:a,viewport:o,onPanZoom:c,onPanZoomStart:u,onPanZoomEnd:d,onDraggingChange:g}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),v=ob().scaleExtent([n,i]).translateExtent(a),y=Zt(e).call(v);k({x:o.x,y:o.y,zoom:Ba(o.zoom,n,i)},[[0,0],[p.width,p.height]],a);const b=y.on("wheel.zoom"),E=y.on("dblclick.zoom");v.wheelDelta(Ub);function _(ee,te){return y?new Promise(G=>{v?.interpolate(te?.interpolate==="linear"?Xs:gc).transform(kf(y,te?.duration,te?.ease,()=>G(!0)),ee)}):Promise.resolve(!1)}function T({noWheelClassName:ee,noPanClassName:te,onPaneContextMenu:G,userSelectionActive:D,panOnScroll:P,panOnDrag:R,panOnScrollMode:$,panOnScrollSpeed:B,preventScrolling:K,zoomOnPinch:z,zoomOnScroll:O,zoomOnDoubleClick:M,zoomActivationKeyPressed:Q,lib:X,onTransformChange:se,connectionInProgress:ue,paneClickDistance:ce,selectionOnDrag:le}){D&&!h.isZoomingOrPanning&&C();const de=P&&!Q&&!D;v.clickDistance(le?1/0:!vn(ce)||ce<0?0:ce);const Te=de?zT({zoomPanValues:h,noWheelClassName:ee,d3Selection:y,d3Zoom:v,panOnScrollMode:$,panOnScrollSpeed:B,zoomOnPinch:z,onPanZoomStart:u,onPanZoom:c,onPanZoomEnd:d}):UT({noWheelClassName:ee,preventScrolling:K,d3ZoomHandler:b});if(y.on("wheel.zoom",Te,{passive:!1}),!D){const pe=$T({zoomPanValues:h,onDraggingChange:g,onPanZoomStart:u});v.on("start",pe);const _e=LT({zoomPanValues:h,panOnDrag:R,onPaneContextMenu:!!G,onPanZoom:c,onTransformChange:se});v.on("zoom",_e);const Ce=HT({zoomPanValues:h,panOnDrag:R,panOnScroll:P,onPaneContextMenu:G,onPanZoomEnd:d,onDraggingChange:g});v.on("end",Ce)}const Se=BT({zoomActivationKeyPressed:Q,panOnDrag:R,zoomOnScroll:O,panOnScroll:P,zoomOnDoubleClick:M,zoomOnPinch:z,userSelectionActive:D,noPanClassName:te,noWheelClassName:ee,lib:X,connectionInProgress:ue});v.filter(Se),M?y.on("dblclick.zoom",E):y.on("dblclick.zoom",null)}function C(){v.on("zoom",null)}async function k(ee,te,G){const D=Rf(ee),P=v?.constrain()(D,te,G);return P&&await _(P),new Promise(R=>R(P))}async function x(ee,te){const G=Rf(ee);return await _(G,te),new Promise(D=>D(G))}function A(ee){if(y){const te=Rf(ee),G=y.property("__zoom");(G.k!==ee.zoom||G.x!==ee.x||G.y!==ee.y)&&v?.transform(y,te,null,{sync:!0})}}function L(){const ee=y?sb(y.node()):{x:0,y:0,k:1};return{x:ee.x,y:ee.y,zoom:ee.k}}function j(ee,te){return y?new Promise(G=>{v?.interpolate(te?.interpolate==="linear"?Xs:gc).scaleTo(kf(y,te?.duration,te?.ease,()=>G(!0)),ee)}):Promise.resolve(!1)}function U(ee,te){return y?new Promise(G=>{v?.interpolate(te?.interpolate==="linear"?Xs:gc).scaleBy(kf(y,te?.duration,te?.ease,()=>G(!0)),ee)}):Promise.resolve(!1)}function V(ee){v?.scaleExtent(ee)}function Z(ee){v?.translateExtent(ee)}function oe(ee){const te=!vn(ee)||ee<0?0:ee;v?.clickDistance(te)}return{update:T,destroy:C,setViewport:x,setViewportConstrained:k,getViewport:L,scaleTo:j,scaleBy:U,setScaleExtent:V,setTranslateExtent:Z,syncViewport:A,setClickDistance:oe}}var Va;(function(e){e.Line="line",e.Handle="handle"})(Va||(Va={}));function qT({width:e,prevWidth:n,height:i,prevHeight:a,affectsX:o,affectsY:c}){const u=e-n,d=i-a,g=[u>0?1:u<0?-1:0,d>0?1:d<0?-1:0];return u&&o&&(g[0]=g[0]*-1),d&&c&&(g[1]=g[1]*-1),g}function u0(e){const n=e.includes("right")||e.includes("left"),i=e.includes("bottom")||e.includes("top"),a=e.includes("left"),o=e.includes("top");return{isHorizontal:n,isVertical:i,affectsX:a,affectsY:o}}function zr(e,n){return Math.max(0,n-e)}function Ur(e,n){return Math.max(0,e-n)}function tc(e,n,i){return Math.max(0,n-e,e-i)}function d0(e,n){return e?!n:n}function VT(e,n,i,a,o,c,u,d){let{affectsX:g,affectsY:h}=n;const{isHorizontal:p,isVertical:v}=n,y=p&&v,{xSnapped:b,ySnapped:E}=i,{minWidth:_,maxWidth:T,minHeight:C,maxHeight:k}=a,{x,y:A,width:L,height:j,aspectRatio:U}=e;let V=Math.floor(p?b-e.pointerX:0),Z=Math.floor(v?E-e.pointerY:0);const oe=L+(g?-V:V),ee=j+(h?-Z:Z),te=-c[0]*L,G=-c[1]*j;let D=tc(oe,_,T),P=tc(ee,C,k);if(u){let B=0,K=0;g&&V<0?B=zr(x+V+te,u[0][0]):!g&&V>0&&(B=Ur(x+oe+te,u[1][0])),h&&Z<0?K=zr(A+Z+G,u[0][1]):!h&&Z>0&&(K=Ur(A+ee+G,u[1][1])),D=Math.max(D,B),P=Math.max(P,K)}if(d){let B=0,K=0;g&&V>0?B=Ur(x+V,d[0][0]):!g&&V<0&&(B=zr(x+oe,d[1][0])),h&&Z>0?K=Ur(A+Z,d[0][1]):!h&&Z<0&&(K=zr(A+ee,d[1][1])),D=Math.max(D,B),P=Math.max(P,K)}if(o){if(p){const B=tc(oe/U,C,k)*U;if(D=Math.max(D,B),u){let K=0;!g&&!h||g&&!h&&y?K=Ur(A+G+oe/U,u[1][1])*U:K=zr(A+G+(g?V:-V)/U,u[0][1])*U,D=Math.max(D,K)}if(d){let K=0;!g&&!h||g&&!h&&y?K=zr(A+oe/U,d[1][1])*U:K=Ur(A+(g?V:-V)/U,d[0][1])*U,D=Math.max(D,K)}}if(v){const B=tc(ee*U,_,T)/U;if(P=Math.max(P,B),u){let K=0;!g&&!h||h&&!g&&y?K=Ur(x+ee*U+te,u[1][0])/U:K=zr(x+(h?Z:-Z)*U+te,u[0][0])/U,P=Math.max(P,K)}if(d){let K=0;!g&&!h||h&&!g&&y?K=zr(x+ee*U,d[1][0])/U:K=Ur(x+(h?Z:-Z)*U,d[0][0])/U,P=Math.max(P,K)}}}Z=Z+(Z<0?P:-P),V=V+(V<0?D:-D),o&&(y?oe>ee*U?Z=(d0(g,h)?-V:V)/U:V=(d0(g,h)?-Z:Z)*U:p?(Z=V/U,h=g):(V=Z*U,g=h));const R=g?x+V:x,$=h?A+Z:A;return{width:L+(g?-V:V),height:j+(h?-Z:Z),x:c[0]*V*(g?-1:1)+R,y:c[1]*Z*(h?-1:1)+$}}const $b={width:0,height:0,x:0,y:0},PT={...$b,pointerX:0,pointerY:0,aspectRatio:1};function GT(e){return[[0,0],[e.measured.width,e.measured.height]]}function YT(e,n,i){const a=n.position.x+e.position.x,o=n.position.y+e.position.y,c=e.measured.width??0,u=e.measured.height??0,d=i[0]*c,g=i[1]*u;return[[a-d,o-g],[a+c-d,o+u-g]]}function XT({domNode:e,nodeId:n,getStoreItems:i,onChange:a,onEnd:o}){const c=Zt(e);let u={controlDirection:u0("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:p,keepAspectRatio:v,resizeDirection:y,onResizeStart:b,onResize:E,onResizeEnd:_,shouldResize:T}){let C={...$b},k={...PT};u={boundaries:p,resizeDirection:y,keepAspectRatio:v,controlDirection:u0(h)};let x,A=null,L=[],j,U,V,Z=!1;const oe=Yv().on("start",ee=>{const{nodeLookup:te,transform:G,snapGrid:D,snapToGrid:P,nodeOrigin:R,paneDomNode:$}=i();if(x=te.get(n),!x)return;A=$?.getBoundingClientRect()??null;const{xSnapped:B,ySnapped:K}=Ks(ee.sourceEvent,{transform:G,snapGrid:D,snapToGrid:P,containerBounds:A});C={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},k={...C,pointerX:B,pointerY:K,aspectRatio:C.width/C.height},j=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(j=te.get(x.parentId),U=j&&x.extent==="parent"?GT(j):void 0),L=[],V=void 0;for(const[z,O]of te)if(O.parentId===n&&(L.push({id:z,position:{...O.position},extent:O.extent}),O.extent==="parent"||O.expandParent)){const M=YT(O,x,O.origin??R);V?V=[[Math.min(M[0][0],V[0][0]),Math.min(M[0][1],V[0][1])],[Math.max(M[1][0],V[1][0]),Math.max(M[1][1],V[1][1])]]:V=M}b?.(ee,{...C})}).on("drag",ee=>{const{transform:te,snapGrid:G,snapToGrid:D,nodeOrigin:P}=i(),R=Ks(ee.sourceEvent,{transform:te,snapGrid:G,snapToGrid:D,containerBounds:A}),$=[];if(!x)return;const{x:B,y:K,width:z,height:O}=C,M={},Q=x.origin??P,{width:X,height:se,x:ue,y:ce}=VT(k,u.controlDirection,R,u.boundaries,u.keepAspectRatio,Q,U,V),le=X!==z,de=se!==O,Te=ue!==B&&le,Se=ce!==K&&de;if(!Te&&!Se&&!le&&!de)return;if((Te||Se||Q[0]===1||Q[1]===1)&&(M.x=Te?ue:C.x,M.y=Se?ce:C.y,C.x=M.x,C.y=M.y,L.length>0)){const Ie=ue-B,Ge=ce-K;for(const mt of L)mt.position={x:mt.position.x-Ie+Q[0]*(X-z),y:mt.position.y-Ge+Q[1]*(se-O)},$.push(mt)}if((le||de)&&(M.width=le&&(!u.resizeDirection||u.resizeDirection==="horizontal")?X:C.width,M.height=de&&(!u.resizeDirection||u.resizeDirection==="vertical")?se:C.height,C.width=M.width,C.height=M.height),j&&x.expandParent){const Ie=Q[0]*(M.width??0);M.x&&M.x<Ie&&(C.x=Ie,k.x=k.x-(M.x-Ie));const Ge=Q[1]*(M.height??0);M.y&&M.y<Ge&&(C.y=Ge,k.y=k.y-(M.y-Ge))}const pe=qT({width:C.width,prevWidth:z,height:C.height,prevHeight:O,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),_e={...C,direction:pe};T?.(ee,_e)!==!1&&(Z=!0,E?.(ee,_e),a(M,$))}).on("end",ee=>{Z&&(_?.(ee,{...C}),o?.({...C}),Z=!1)});c.call(oe)}function g(){c.on(".drag",null)}return{update:d,destroy:g}}var Mf={exports:{}},jf={},Df={exports:{}},zf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function KT(){if(f0)return zf;f0=1;var e=po();function n(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var i=typeof Object.is=="function"?Object.is:n,a=e.useState,o=e.useEffect,c=e.useLayoutEffect,u=e.useDebugValue;function d(v,y){var b=y(),E=a({inst:{value:b,getSnapshot:y}}),_=E[0].inst,T=E[1];return c(function(){_.value=b,_.getSnapshot=y,g(_)&&T({inst:_})},[v,b,y]),o(function(){return g(_)&&T({inst:_}),v(function(){g(_)&&T({inst:_})})},[v]),u(b),b}function g(v){var y=v.getSnapshot;v=v.value;try{var b=y();return!i(v,b)}catch{return!0}}function h(v,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return zf.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,zf}var h0;function ZT(){return h0||(h0=1,Df.exports=KT()),Df.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function QT(){if(g0)return jf;g0=1;var e=po(),n=ZT();function i(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var a=typeof Object.is=="function"?Object.is:i,o=n.useSyncExternalStore,c=e.useRef,u=e.useEffect,d=e.useMemo,g=e.useDebugValue;return jf.useSyncExternalStoreWithSelector=function(h,p,v,y,b){var E=c(null);if(E.current===null){var _={hasValue:!1,value:null};E.current=_}else _=E.current;E=d(function(){function C(j){if(!k){if(k=!0,x=j,j=y(j),b!==void 0&&_.hasValue){var U=_.value;if(b(U,j))return A=U}return A=j}if(U=A,a(x,j))return U;var V=y(j);return b!==void 0&&b(U,V)?(x=j,U):(x=j,A=V)}var k=!1,x,A,L=v===void 0?null:v;return[function(){return C(p())},L===null?void 0:function(){return C(L())}]},[p,v,y,b]);var T=o(h,E[0],E[1]);return u(function(){_.hasValue=!0,_.value=T},[T]),g(T),T},jf}var m0;function JT(){return m0||(m0=1,Mf.exports=QT()),Mf.exports}var FT=JT();const Lb=Ov(FT),WT={},p0=e=>{let n;const i=new Set,a=(p,v)=>{const y=typeof p=="function"?p(n):p;if(!Object.is(y,n)){const b=n;n=v??(typeof y!="object"||y===null)?y:Object.assign({},n,y),i.forEach(E=>E(n,b))}},o=()=>n,g={setState:a,getState:o,getInitialState:()=>h,subscribe:p=>(i.add(p),()=>i.delete(p)),destroy:()=>{(WT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},h=n=e(a,o,g);return g},Hb=e=>e?p0(e):p0,{useDebugValue:eC}=Rv,{useSyncExternalStoreWithSelector:tC}=Lb,nC=e=>e;function Bb(e,n=nC,i){const a=tC(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,i);return eC(a),a}const y0=(e,n)=>{const i=Hb(e),a=(o,c=n)=>Bb(i,o,c);return Object.assign(a,i),a},rC=(e,n)=>e?y0(e,n):y0;function Fe(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[a,o]of e)if(!Object.is(o,n.get(a)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const a of e)if(!n.has(a))return!1;return!0}const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!1;for(const a of i)if(!Object.prototype.hasOwnProperty.call(n,a)||!Object.is(e[a],n[a]))return!1;return!0}kv();const Vc=q.createContext(null),iC=Vc.Provider,Ib=On.error001();function De(e,n){const i=q.useContext(Vc);if(i===null)throw new Error(Ib);return Bb(i,e,n)}function Je(){const e=q.useContext(Vc);if(e===null)throw new Error(Ib);return q.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const v0={display:"none"},aC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},qb="react-flow__node-desc",Vb="react-flow__edge-desc",sC="react-flow__aria-live",oC=e=>e.ariaLiveMessage,lC=e=>e.ariaLabelConfig;function cC({rfId:e}){const n=De(oC);return S.jsx("div",{id:`${sC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:aC,children:n})}function uC({rfId:e,disableKeyboardA11y:n}){const i=De(lC);return S.jsxs(S.Fragment,{children:[S.jsx("div",{id:`${qb}-${e}`,style:v0,children:n?i["node.a11yDescription.default"]:i["node.a11yDescription.keyboardDisabled"]}),S.jsx("div",{id:`${Vb}-${e}`,style:v0,children:i["edge.a11yDescription.default"]}),!n&&S.jsx(cC,{rfId:e})]})}const Pc=q.forwardRef(({position:e="top-left",children:n,className:i,style:a,...o},c)=>{const u=`${e}`.split("-");return S.jsx("div",{className:ut(["react-flow__panel",i,...u]),style:a,ref:c,...o,children:n})});Pc.displayName="Panel";function dC({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:S.jsx(Pc,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:S.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const fC=e=>{const n=[],i=[];for(const[,a]of e.nodeLookup)a.selected&&n.push(a.internals.userNode);for(const[,a]of e.edgeLookup)a.selected&&i.push(a);return{selectedNodes:n,selectedEdges:i}},nc=e=>e.id;function hC(e,n){return Fe(e.selectedNodes.map(nc),n.selectedNodes.map(nc))&&Fe(e.selectedEdges.map(nc),n.selectedEdges.map(nc))}function gC({onSelectionChange:e}){const n=Je(),{selectedNodes:i,selectedEdges:a}=De(fC,hC);return q.useEffect(()=>{const o={nodes:i,edges:a};e?.(o),n.getState().onSelectionChangeHandlers.forEach(c=>c(o))},[i,a,e]),null}const mC=e=>!!e.onSelectionChangeHandlers;function pC({onSelectionChange:e}){const n=De(mC);return e||n?S.jsx(gC,{onSelectionChange:e}):null}const Pb=[0,0],yC={x:0,y:0,zoom:1},vC=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],b0=[...vC,"rfId"],bC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),w0={translateExtent:to,nodeOrigin:Pb,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function wC(e){const{setNodes:n,setEdges:i,setMinZoom:a,setMaxZoom:o,setTranslateExtent:c,setNodeExtent:u,reset:d,setDefaultNodesAndEdges:g}=De(bC,Fe),h=Je();q.useEffect(()=>(g(e.defaultNodes,e.defaultEdges),()=>{p.current=w0,d()}),[]);const p=q.useRef(w0);return q.useEffect(()=>{for(const v of b0){const y=e[v],b=p.current[v];y!==b&&(typeof e[v]>"u"||(v==="nodes"?n(y):v==="edges"?i(y):v==="minZoom"?a(y):v==="maxZoom"?o(y):v==="translateExtent"?c(y):v==="nodeExtent"?u(y):v==="ariaLabelConfig"?h.setState({ariaLabelConfig:sT(y)}):v==="fitView"?h.setState({fitViewQueued:y}):v==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[v]:y})))}p.current=e},b0.map(v=>e[v])),null}function x0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function xC(e){const[n,i]=q.useState(e==="system"?null:e);return q.useEffect(()=>{if(e!=="system"){i(e);return}const a=x0(),o=()=>i(a?.matches?"dark":"light");return o(),a?.addEventListener("change",o),()=>{a?.removeEventListener("change",o)}},[e]),n!==null?n:x0()?.matches?"dark":"light"}const _0=typeof document<"u"?document:null;function so(e=null,n={target:_0,actInsideInputWithModifier:!0}){const[i,a]=q.useState(!1),o=q.useRef(!1),c=q.useRef(new Set([])),[u,d]=q.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((v,y)=>v.concat(...y),[]);return[h,p]}return[[],[]]},[e]);return q.useEffect(()=>{const g=n?.target??_0,h=n?.actInsideInputWithModifier??!0;if(e!==null){const p=b=>{if(o.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!o.current||o.current&&!h)&&wb(b))return!1;const _=E0(b.code,d);if(c.current.add(b[_]),S0(u,c.current,!1)){const T=b.composedPath?.()?.[0]||b.target,C=T?.nodeName==="BUTTON"||T?.nodeName==="A";n.preventDefault!==!1&&(o.current||!C)&&b.preventDefault(),a(!0)}},v=b=>{const E=E0(b.code,d);S0(u,c.current,!0)?(a(!1),c.current.clear()):c.current.delete(b[E]),b.key==="Meta"&&c.current.clear(),o.current=!1},y=()=>{c.current.clear(),a(!1)};return g?.addEventListener("keydown",p),g?.addEventListener("keyup",v),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{g?.removeEventListener("keydown",p),g?.removeEventListener("keyup",v),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[e,a]),i}function S0(e,n,i){return e.filter(a=>i||a.length===n.size).some(a=>a.every(o=>n.has(o)))}function E0(e,n){return n.includes(e)?"code":"key"}const _C=()=>{const e=Je();return q.useMemo(()=>({zoomIn:n=>{const{panZoom:i}=e.getState();return i?i.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:i}=e.getState();return i?i.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,i)=>{const{panZoom:a}=e.getState();return a?a.scaleTo(n,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,i)=>{const{transform:[a,o,c],panZoom:u}=e.getState();return u?(await u.setViewport({x:n.x??a,y:n.y??o,zoom:n.zoom??c},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,i,a]=e.getState().transform;return{x:n,y:i,zoom:a}},setCenter:async(n,i,a)=>e.getState().setCenter(n,i,a),fitBounds:async(n,i)=>{const{width:a,height:o,minZoom:c,maxZoom:u,panZoom:d}=e.getState(),g=Rh(n,a,o,c,u,i?.padding??.1);return d?(await d.setViewport(g,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,i={})=>{const{transform:a,snapGrid:o,snapToGrid:c,domNode:u}=e.getState();if(!u)return n;const{x:d,y:g}=u.getBoundingClientRect(),h={x:n.x-d,y:n.y-g},p=i.snapGrid??o,v=i.snapToGrid??c;return _o(h,a,v,p)},flowToScreenPosition:n=>{const{transform:i,domNode:a}=e.getState();if(!a)return n;const{x:o,y:c}=a.getBoundingClientRect(),u=Nc(n,i);return{x:u.x+o,y:u.y+c}}}),[])};function Gb(e,n){const i=[],a=new Map,o=[];for(const c of e)if(c.type==="add"){o.push(c);continue}else if(c.type==="remove"||c.type==="replace")a.set(c.id,[c]);else{const u=a.get(c.id);u?u.push(c):a.set(c.id,[c])}for(const c of n){const u=a.get(c.id);if(!u){i.push(c);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){i.push({...u[0].item});continue}const d={...c};for(const g of u)SC(g,d);i.push(d)}return o.length&&o.forEach(c=>{c.index!==void 0?i.splice(c.index,0,{...c.item}):i.push({...c.item})}),i}function SC(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured??={},n.measured.width=e.dimensions.width,n.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function Yb(e,n){return Gb(e,n)}function Xb(e,n){return Gb(e,n)}function gi(e,n){return{id:e,type:"select",selected:n}}function Ma(e,n=new Set,i=!1){const a=[];for(const[o,c]of e){const u=n.has(o);!(c.selected===void 0&&!u)&&c.selected!==u&&(i&&(c.selected=u),a.push(gi(c.id,u)))}return a}function T0({items:e=[],lookup:n}){const i=[],a=new Map(e.map(o=>[o.id,o]));for(const[o,c]of e.entries()){const u=n.get(c.id),d=u?.internals?.userNode??u;d!==void 0&&d!==c&&i.push({id:c.id,item:c,type:"replace"}),d===void 0&&i.push({item:c,type:"add",index:o})}for(const[o]of n)a.get(o)===void 0&&i.push({id:o,type:"remove"});return i}function C0(e){return{id:e.id,type:"remove"}}const A0=e=>Q2(e),EC=e=>fb(e);function Kb(e){return q.forwardRef(e)}const TC=typeof window<"u"?q.useLayoutEffect:q.useEffect;function N0(e){const[n,i]=q.useState(BigInt(0)),[a]=q.useState(()=>CC(()=>i(o=>o+BigInt(1))));return TC(()=>{const o=a.get();o.length&&(e(o),a.reset())},[n]),a}function CC(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:i=>{n.push(i),e()}}}const Zb=q.createContext(null);function AC({children:e}){const n=Je(),i=q.useCallback(d=>{const{nodes:g=[],setNodes:h,hasDefaultNodes:p,onNodesChange:v,nodeLookup:y,fitViewQueued:b}=n.getState();let E=g;for(const T of d)E=typeof T=="function"?T(E):T;const _=T0({items:E,lookup:y});p&&h(E),_.length>0?v?.(_):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:T,nodes:C,setNodes:k}=n.getState();T&&k(C)})},[]),a=N0(i),o=q.useCallback(d=>{const{edges:g=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:v,edgeLookup:y}=n.getState();let b=g;for(const E of d)b=typeof E=="function"?E(b):E;p?h(b):v&&v(T0({items:b,lookup:y}))},[]),c=N0(o),u=q.useMemo(()=>({nodeQueue:a,edgeQueue:c}),[]);return S.jsx(Zb.Provider,{value:u,children:e})}function NC(){const e=q.useContext(Zb);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const OC=e=>!!e.panZoom;function Uh(){const e=_C(),n=Je(),i=NC(),a=De(OC),o=q.useMemo(()=>{const c=v=>n.getState().nodeLookup.get(v),u=v=>{i.nodeQueue.push(v)},d=v=>{i.edgeQueue.push(v)},g=v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState(),E=A0(v)?v:y.get(v.id),_=E.parentId?vb(E.position,E.measured,E.parentId,y,b):E.position,T={...E,position:_,width:E.measured?.width??E.width,height:E.measured?.height??E.height};return Ia(T)},h=(v,y,b={replace:!1})=>{u(E=>E.map(_=>{if(_.id===v){const T=typeof y=="function"?y(_):y;return b.replace&&A0(T)?T:{..._,...T}}return _}))},p=(v,y,b={replace:!1})=>{d(E=>E.map(_=>{if(_.id===v){const T=typeof y=="function"?y(_):y;return b.replace&&EC(T)?T:{..._,...T}}return _}))};return{getNodes:()=>n.getState().nodes.map(v=>({...v})),getNode:v=>c(v)?.internals.userNode,getInternalNode:c,getEdges:()=>{const{edges:v=[]}=n.getState();return v.map(y=>({...y}))},getEdge:v=>n.getState().edgeLookup.get(v),setNodes:u,setEdges:d,addNodes:v=>{const y=Array.isArray(v)?v:[v];i.nodeQueue.push(b=>[...b,...y])},addEdges:v=>{const y=Array.isArray(v)?v:[v];i.edgeQueue.push(b=>[...b,...y])},toObject:()=>{const{nodes:v=[],edges:y=[],transform:b}=n.getState(),[E,_,T]=b;return{nodes:v.map(C=>({...C})),edges:y.map(C=>({...C})),viewport:{x:E,y:_,zoom:T}}},deleteElements:async({nodes:v=[],edges:y=[]})=>{const{nodes:b,edges:E,onNodesDelete:_,onEdgesDelete:T,triggerNodeChanges:C,triggerEdgeChanges:k,onDelete:x,onBeforeDelete:A}=n.getState(),{nodes:L,edges:j}=await tT({nodesToRemove:v,edgesToRemove:y,nodes:b,edges:E,onBeforeDelete:A}),U=j.length>0,V=L.length>0;if(U){const Z=j.map(C0);T?.(j),k(Z)}if(V){const Z=L.map(C0);_?.(L),C(Z)}return(V||U)&&x?.({nodes:L,edges:j}),{deletedNodes:L,deletedEdges:j}},getIntersectingNodes:(v,y=!0,b)=>{const E=Wy(v),_=E?v:g(v),T=b!==void 0;return _?(b||n.getState().nodes).filter(C=>{const k=n.getState().nodeLookup.get(C.id);if(k&&!E&&(C.id===v.id||!k.internals.positionAbsolute))return!1;const x=Ia(T?C:k),A=ro(x,_);return y&&A>0||A>=x.width*x.height||A>=_.width*_.height}):[]},isNodeIntersecting:(v,y,b=!0)=>{const _=Wy(v)?v:g(v);if(!_)return!1;const T=ro(_,y);return b&&T>0||T>=y.width*y.height||T>=_.width*_.height},updateNode:h,updateNodeData:(v,y,b={replace:!1})=>{h(v,E=>{const _=typeof y=="function"?y(E):y;return b.replace?{...E,data:_}:{...E,data:{...E.data,..._}}},b)},updateEdge:p,updateEdgeData:(v,y,b={replace:!1})=>{p(v,E=>{const _=typeof y=="function"?y(E):y;return b.replace?{...E,data:_}:{...E,data:{...E.data,..._}}},b)},getNodesBounds:v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState();return J2(v,{nodeLookup:y,nodeOrigin:b})},getHandleConnections:({type:v,id:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}-${v}${y?`-${y}`:""}`)?.values()??[]),getNodeConnections:({type:v,handleId:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}${v?y?`-${v}-${y}`:`-${v}`:""}`)?.values()??[]),fitView:async v=>{const y=n.getState().fitViewResolver??aT();return n.setState({fitViewQueued:!0,fitViewOptions:v,fitViewResolver:y}),i.nodeQueue.push(b=>[...b]),y.promise}}},[]);return q.useMemo(()=>({...o,...e,viewportInitialized:a}),[a])}const O0=e=>e.selected,RC=typeof window<"u"?window:void 0;function kC({deleteKeyCode:e,multiSelectionKeyCode:n}){const i=Je(),{deleteElements:a}=Uh(),o=so(e,{actInsideInputWithModifier:!1}),c=so(n,{target:RC});q.useEffect(()=>{if(o){const{edges:u,nodes:d}=i.getState();a({nodes:d.filter(O0),edges:u.filter(O0)}),i.setState({nodesSelectionActive:!1})}},[o]),q.useEffect(()=>{i.setState({multiSelectionActive:c})},[c])}function MC(e){const n=Je();q.useEffect(()=>{const i=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const a=kh(e.current);(a.height===0||a.width===0)&&n.getState().onError?.("004",On.error004()),n.setState({width:a.width||500,height:a.height||500})};if(e.current){i(),window.addEventListener("resize",i);const a=new ResizeObserver(()=>i());return a.observe(e.current),()=>{window.removeEventListener("resize",i),a&&e.current&&a.unobserve(e.current)}}},[])}const Gc={position:"absolute",width:"100%",height:"100%",top:0,left:0},jC=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function DC({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:i=!0,panOnScroll:a=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=_i.Free,zoomOnDoubleClick:u=!0,panOnDrag:d=!0,defaultViewport:g,translateExtent:h,minZoom:p,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:b=!0,children:E,noWheelClassName:_,noPanClassName:T,onViewportChange:C,isControlledViewport:k,paneClickDistance:x,selectionOnDrag:A}){const L=Je(),j=q.useRef(null),{userSelectionActive:U,lib:V,connectionInProgress:Z}=De(jC,Fe),oe=so(y),ee=q.useRef();MC(j);const te=q.useCallback(G=>{C?.({x:G[0],y:G[1],zoom:G[2]}),k||L.setState({transform:G})},[C,k]);return q.useEffect(()=>{if(j.current){ee.current=IT({domNode:j.current,minZoom:p,maxZoom:v,translateExtent:h,viewport:g,onDraggingChange:R=>L.setState({paneDragging:R}),onPanZoomStart:(R,$)=>{const{onViewportChangeStart:B,onMoveStart:K}=L.getState();K?.(R,$),B?.($)},onPanZoom:(R,$)=>{const{onViewportChange:B,onMove:K}=L.getState();K?.(R,$),B?.($)},onPanZoomEnd:(R,$)=>{const{onViewportChangeEnd:B,onMoveEnd:K}=L.getState();K?.(R,$),B?.($)}});const{x:G,y:D,zoom:P}=ee.current.getViewport();return L.setState({panZoom:ee.current,transform:[G,D,P],domNode:j.current.closest(".react-flow")}),()=>{ee.current?.destroy()}}},[]),q.useEffect(()=>{ee.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:i,panOnScroll:a,panOnScrollSpeed:o,panOnScrollMode:c,zoomOnDoubleClick:u,panOnDrag:d,zoomActivationKeyPressed:oe,preventScrolling:b,noPanClassName:T,userSelectionActive:U,noWheelClassName:_,lib:V,onTransformChange:te,connectionInProgress:Z,selectionOnDrag:A,paneClickDistance:x})},[e,n,i,a,o,c,u,d,oe,b,T,U,_,V,te,Z,A,x]),S.jsx("div",{className:"react-flow__renderer",ref:j,style:Gc,children:E})}const zC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function UC(){const{userSelectionActive:e,userSelectionRect:n}=De(zC,Fe);return e&&n?S.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const Uf=(e,n)=>i=>{i.target===n.current&&e?.(i)},$C=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function LC({isSelecting:e,selectionKeyPressed:n,selectionMode:i=no.Full,panOnDrag:a,paneClickDistance:o,selectionOnDrag:c,onSelectionStart:u,onSelectionEnd:d,onPaneClick:g,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:v,onPaneMouseMove:y,onPaneMouseLeave:b,children:E}){const _=Je(),{userSelectionActive:T,elementsSelectable:C,dragging:k,connectionInProgress:x}=De($C,Fe),A=C&&(e||T),L=q.useRef(null),j=q.useRef(),U=q.useRef(new Set),V=q.useRef(new Set),Z=q.useRef(!1),oe=B=>{if(Z.current||x){Z.current=!1;return}g?.(B),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},ee=B=>{if(Array.isArray(a)&&a?.includes(2)){B.preventDefault();return}h?.(B)},te=p?B=>p(B):void 0,G=B=>{Z.current&&(B.stopPropagation(),Z.current=!1)},D=B=>{const{resetSelectedElements:K,domNode:z}=_.getState();if(j.current=z?.getBoundingClientRect(),!j.current)return;const O=B.target===L.current;if(!O&&!!B.target.closest(".nokey")||!e||!(c&&O||n)||B.button!==0||!B.isPrimary)return;B.target?.setPointerCapture?.(B.pointerId),Z.current=!1;const{x:X,y:se}=bn(B.nativeEvent,j.current);_.setState({userSelectionRect:{width:0,height:0,startX:X,startY:se,x:X,y:se}}),O||(B.stopPropagation(),B.preventDefault()),(o===0||n)&&(K(),u?.(B),Z.current=!0)},P=B=>{const{userSelectionRect:K,transform:z,nodeLookup:O,edgeLookup:M,connectionLookup:Q,triggerNodeChanges:X,triggerEdgeChanges:se,defaultEdgeOptions:ue,resetSelectedElements:ce}=_.getState();if(!j.current||!K)return;const{x:le,y:de}=bn(B.nativeEvent,j.current),{startX:Te,startY:Se}=K;if(!Z.current&&B.target===L.current&&!n&&o>0){if(Math.hypot(le-Te,de-Se)<=o)return;ce(),u?.(B)}Z.current=!0;const pe={startX:Te,startY:Se,x:le<Te?le:Te,y:de<Se?de:Se,width:Math.abs(le-Te),height:Math.abs(de-Se)},_e=U.current,Ce=V.current;U.current=new Set(Oh(O,pe,z,i===no.Partial,!0).map(Ge=>Ge.id)),V.current=new Set;const Ie=ue?.selectable??!0;for(const Ge of U.current){const mt=Q.get(Ge);if(mt)for(const{edgeId:Ft}of mt.values()){const ln=M.get(Ft);ln&&(ln.selectable??Ie)&&V.current.add(Ft)}}if(!e0(_e,U.current)){const Ge=Ma(O,U.current,!0);X(Ge)}if(!e0(Ce,V.current)){const Ge=Ma(M,V.current);se(Ge)}_.setState({userSelectionRect:pe,userSelectionActive:!0,nodesSelectionActive:!1})},R=B=>{B.button===0&&(B.target?.releasePointerCapture?.(B.pointerId),!T&&B.target===L.current&&_.getState().userSelectionRect&&oe?.(B),_.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:U.current.size>0}),Z.current&&d?.(B))},$=a===!0||Array.isArray(a)&&a.includes(0);return S.jsxs("div",{className:ut(["react-flow__pane",{draggable:$,dragging:k,selection:e}]),onClick:A?void 0:Uf(oe,L),onContextMenu:Uf(ee,L),onWheel:Uf(te,L),onPointerEnter:A?void 0:v,onPointerMove:A?P:y,onPointerUp:A?R:void 0,onPointerDownCapture:A?D:void 0,onClickCapture:A?G:void 0,onPointerLeave:b,ref:L,style:Gc,children:[E,S.jsx(UC,{})]})}function lh({id:e,store:n,unselect:i=!1,nodeRef:a}){const{addSelectedNodes:o,unselectNodesAndEdges:c,multiSelectionActive:u,nodeLookup:d,onError:g}=n.getState(),h=d.get(e);if(!h){g?.("012",On.error012(e));return}n.setState({nodesSelectionActive:!1}),h.selected?(i||h.selected&&u)&&(c({nodes:[h],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):o([e])}function Qb({nodeRef:e,disabled:n=!1,noDragClassName:i,handleSelector:a,nodeId:o,isSelectable:c,nodeClickDistance:u}){const d=Je(),[g,h]=q.useState(!1),p=q.useRef();return q.useEffect(()=>{p.current=AT({getStoreItems:()=>d.getState(),onNodeMouseDown:v=>{lh({id:v,store:d,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),q.useEffect(()=>{if(n)p.current?.destroy();else if(e.current)return p.current?.update({noDragClassName:i,handleSelector:a,domNode:e.current,isSelectable:c,nodeId:o,nodeClickDistance:u}),()=>{p.current?.destroy()}},[i,a,n,c,e,o]),g}const HC=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function Jb(){const e=Je();return q.useCallback(i=>{const{nodeExtent:a,snapToGrid:o,snapGrid:c,nodesDraggable:u,onError:d,updateNodePositions:g,nodeLookup:h,nodeOrigin:p}=e.getState(),v=new Map,y=HC(u),b=o?c[0]:5,E=o?c[1]:5,_=i.direction.x*b*i.factor,T=i.direction.y*E*i.factor;for(const[,C]of h){if(!y(C))continue;let k={x:C.internals.positionAbsolute.x+_,y:C.internals.positionAbsolute.y+T};o&&(k=xo(k,c));const{position:x,positionAbsolute:A}=hb({nodeId:C.id,nextPosition:k,nodeLookup:h,nodeExtent:a,nodeOrigin:p,onError:d});C.position=x,C.internals.positionAbsolute=A,v.set(C.id,C)}g(v)},[])}const $h=q.createContext(null),BC=$h.Provider;$h.Consumer;const Fb=()=>q.useContext($h),IC=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),qC=(e,n,i)=>a=>{const{connectionClickStartHandle:o,connectionMode:c,connection:u}=a,{fromHandle:d,toHandle:g,isValid:h}=u,p=g?.nodeId===e&&g?.id===n&&g?.type===i;return{connectingFrom:d?.nodeId===e&&d?.id===n&&d?.type===i,connectingTo:p,clickConnecting:o?.nodeId===e&&o?.id===n&&o?.type===i,isPossibleEndHandle:c===Ha.Strict?d?.type!==i:e!==d?.nodeId||n!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!o,valid:p&&h}};function VC({type:e="source",position:n=he.Top,isValidConnection:i,isConnectable:a=!0,isConnectableStart:o=!0,isConnectableEnd:c=!0,id:u,onConnect:d,children:g,className:h,onMouseDown:p,onTouchStart:v,...y},b){const E=u||null,_=e==="target",T=Je(),C=Fb(),{connectOnClick:k,noPanClassName:x,rfId:A}=De(IC,Fe),{connectingFrom:L,connectingTo:j,clickConnecting:U,isPossibleEndHandle:V,connectionInProcess:Z,clickConnectionInProcess:oe,valid:ee}=De(qC(C,E,e),Fe);C||T.getState().onError?.("010",On.error010());const te=P=>{const{defaultEdgeOptions:R,onConnect:$,hasDefaultEdges:B}=T.getState(),K={...R,...P};if(B){const{edges:z,setEdges:O}=T.getState();O(Tb(K,z))}$?.(K),d?.(K)},G=P=>{if(!C)return;const R=xb(P.nativeEvent);if(o&&(R&&P.button===0||!R)){const $=T.getState();oh.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:$.autoPanOnConnect,connectionMode:$.connectionMode,connectionRadius:$.connectionRadius,domNode:$.domNode,nodeLookup:$.nodeLookup,lib:$.lib,isTarget:_,handleId:E,nodeId:C,flowId:$.rfId,panBy:$.panBy,cancelConnection:$.cancelConnection,onConnectStart:$.onConnectStart,onConnectEnd:$.onConnectEnd,updateConnection:$.updateConnection,onConnect:te,isValidConnection:i||$.isValidConnection,getTransform:()=>T.getState().transform,getFromHandle:()=>T.getState().connection.fromHandle,autoPanSpeed:$.autoPanSpeed,dragThreshold:$.connectionDragThreshold})}R?p?.(P):v?.(P)},D=P=>{const{onClickConnectStart:R,onClickConnectEnd:$,connectionClickStartHandle:B,connectionMode:K,isValidConnection:z,lib:O,rfId:M,nodeLookup:Q,connection:X}=T.getState();if(!C||!B&&!o)return;if(!B){R?.(P.nativeEvent,{nodeId:C,handleId:E,handleType:e}),T.setState({connectionClickStartHandle:{nodeId:C,type:e,id:E}});return}const se=bb(P.target),ue=i||z,{connection:ce,isValid:le}=oh.isValid(P.nativeEvent,{handle:{nodeId:C,id:E,type:e},connectionMode:K,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:ue,flowId:M,doc:se,lib:O,nodeLookup:Q});le&&ce&&te(ce);const de=structuredClone(X);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,$?.(P,de),T.setState({connectionClickStartHandle:null})};return S.jsx("div",{"data-handleid":E,"data-nodeid":C,"data-handlepos":n,"data-id":`${A}-${C}-${E}-${e}`,className:ut(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",x,h,{source:!_,target:_,connectable:a,connectablestart:o,connectableend:c,clickconnecting:U,connectingfrom:L,connectingto:j,valid:ee,connectionindicator:a&&(!Z||V)&&(Z||oe?c:o)}]),onMouseDown:G,onTouchStart:G,onClick:k?D:void 0,ref:b,...y,children:g})}const Lt=q.memo(Kb(VC));function PC({data:e,isConnectable:n,sourcePosition:i=he.Bottom}){return S.jsxs(S.Fragment,{children:[e?.label,S.jsx(Lt,{type:"source",position:i,isConnectable:n})]})}function GC({data:e,isConnectable:n,targetPosition:i=he.Top,sourcePosition:a=he.Bottom}){return S.jsxs(S.Fragment,{children:[S.jsx(Lt,{type:"target",position:i,isConnectable:n}),e?.label,S.jsx(Lt,{type:"source",position:a,isConnectable:n})]})}function YC(){return null}function XC({data:e,isConnectable:n,targetPosition:i=he.Top}){return S.jsxs(S.Fragment,{children:[S.jsx(Lt,{type:"target",position:i,isConnectable:n}),e?.label]})}const Oc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},R0={input:PC,default:GC,output:XC,group:YC};function KC(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const ZC=e=>{const{width:n,height:i,x:a,y:o}=wo(e.nodeLookup,{filter:c=>!!c.selected});return{width:vn(n)?n:null,height:vn(i)?i:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${a}px,${o}px)`}};function QC({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:i}){const a=Je(),{width:o,height:c,transformString:u,userSelectionActive:d}=De(ZC,Fe),g=Jb(),h=q.useRef(null);if(q.useEffect(()=>{i||h.current?.focus({preventScroll:!0})},[i]),Qb({nodeRef:h}),d||!o||!c)return null;const p=e?y=>{const b=a.getState().nodes.filter(E=>E.selected);e(y,b)}:void 0,v=y=>{Object.prototype.hasOwnProperty.call(Oc,y.key)&&(y.preventDefault(),g({direction:Oc[y.key],factor:y.shiftKey?4:1}))};return S.jsx("div",{className:ut(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:S.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:i?void 0:-1,onKeyDown:i?void 0:v,style:{width:o,height:c}})})}const k0=typeof window<"u"?window:void 0,JC=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Wb({children:e,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,paneClickDistance:d,deleteKeyCode:g,selectionKeyCode:h,selectionOnDrag:p,selectionMode:v,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:E,panActivationKeyCode:_,zoomActivationKeyCode:T,elementsSelectable:C,zoomOnScroll:k,zoomOnPinch:x,panOnScroll:A,panOnScrollSpeed:L,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:V,defaultViewport:Z,translateExtent:oe,minZoom:ee,maxZoom:te,preventScrolling:G,onSelectionContextMenu:D,noWheelClassName:P,noPanClassName:R,disableKeyboardA11y:$,onViewportChange:B,isControlledViewport:K}){const{nodesSelectionActive:z,userSelectionActive:O}=De(JC),M=so(h,{target:k0}),Q=so(_,{target:k0}),X=Q||V,se=Q||A,ue=p&&X!==!0,ce=M||O||ue;return kC({deleteKeyCode:g,multiSelectionKeyCode:E}),S.jsx(DC,{onPaneContextMenu:c,elementsSelectable:C,zoomOnScroll:k,zoomOnPinch:x,panOnScroll:se,panOnScrollSpeed:L,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:!M&&X,defaultViewport:Z,translateExtent:oe,minZoom:ee,maxZoom:te,zoomActivationKeyCode:T,preventScrolling:G,noWheelClassName:P,noPanClassName:R,onViewportChange:B,isControlledViewport:K,paneClickDistance:d,selectionOnDrag:ue,children:S.jsxs(LC,{onSelectionStart:y,onSelectionEnd:b,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,panOnDrag:X,isSelecting:!!ce,selectionMode:v,selectionKeyPressed:M,paneClickDistance:d,selectionOnDrag:ue,children:[e,z&&S.jsx(QC,{onSelectionContextMenu:D,noPanClassName:R,disableKeyboardA11y:$})]})})}Wb.displayName="FlowRenderer";const FC=q.memo(Wb),WC=e=>n=>e?Oh(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(i=>i.id):Array.from(n.nodeLookup.keys());function eA(e){return De(q.useCallback(WC(e),[e]),Fe)}const tA=e=>e.updateNodeInternals;function nA(){const e=De(tA),[n]=q.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(i=>{const a=new Map;i.forEach(o=>{const c=o.target.getAttribute("data-id");a.set(c,{id:c,nodeElement:o.target,force:!0})}),e(a)}));return q.useEffect(()=>()=>{n?.disconnect()},[n]),n}function rA({node:e,nodeType:n,hasDimensions:i,resizeObserver:a}){const o=Je(),c=q.useRef(null),u=q.useRef(null),d=q.useRef(e.sourcePosition),g=q.useRef(e.targetPosition),h=q.useRef(n),p=i&&!!e.internals.handleBounds;return q.useEffect(()=>{c.current&&!e.hidden&&(!p||u.current!==c.current)&&(u.current&&a?.unobserve(u.current),a?.observe(c.current),u.current=c.current)},[p,e.hidden]),q.useEffect(()=>()=>{u.current&&(a?.unobserve(u.current),u.current=null)},[]),q.useEffect(()=>{if(c.current){const v=h.current!==n,y=d.current!==e.sourcePosition,b=g.current!==e.targetPosition;(v||y||b)&&(h.current=n,d.current=e.sourcePosition,g.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:c.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),c}function iA({id:e,onClick:n,onMouseEnter:i,onMouseMove:a,onMouseLeave:o,onContextMenu:c,onDoubleClick:u,nodesDraggable:d,elementsSelectable:g,nodesConnectable:h,nodesFocusable:p,resizeObserver:v,noDragClassName:y,noPanClassName:b,disableKeyboardA11y:E,rfId:_,nodeTypes:T,nodeClickDistance:C,onError:k}){const{node:x,internals:A,isParent:L}=De(le=>{const de=le.nodeLookup.get(e),Te=le.parentLookup.has(e);return{node:de,internals:de.internals,isParent:Te}},Fe);let j=x.type||"default",U=T?.[j]||R0[j];U===void 0&&(k?.("003",On.error003(j)),j="default",U=T?.default||R0.default);const V=!!(x.draggable||d&&typeof x.draggable>"u"),Z=!!(x.selectable||g&&typeof x.selectable>"u"),oe=!!(x.connectable||h&&typeof x.connectable>"u"),ee=!!(x.focusable||p&&typeof x.focusable>"u"),te=Je(),G=yb(x),D=rA({node:x,nodeType:j,hasDimensions:G,resizeObserver:v}),P=Qb({nodeRef:D,disabled:x.hidden||!V,noDragClassName:y,handleSelector:x.dragHandle,nodeId:e,isSelectable:Z,nodeClickDistance:C}),R=Jb();if(x.hidden)return null;const $=nr(x),B=KC(x),K=Z||V||n||i||a||o,z=i?le=>i(le,{...A.userNode}):void 0,O=a?le=>a(le,{...A.userNode}):void 0,M=o?le=>o(le,{...A.userNode}):void 0,Q=c?le=>c(le,{...A.userNode}):void 0,X=u?le=>u(le,{...A.userNode}):void 0,se=le=>{const{selectNodesOnDrag:de,nodeDragThreshold:Te}=te.getState();Z&&(!de||!V||Te>0)&&lh({id:e,store:te,nodeRef:D}),n&&n(le,{...A.userNode})},ue=le=>{if(!(wb(le.nativeEvent)||E)){if(lb.includes(le.key)&&Z){const de=le.key==="Escape";lh({id:e,store:te,unselect:de,nodeRef:D})}else if(V&&x.selected&&Object.prototype.hasOwnProperty.call(Oc,le.key)){le.preventDefault();const{ariaLabelConfig:de}=te.getState();te.setState({ariaLiveMessage:de["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),R({direction:Oc[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(E||!D.current?.matches(":focus-visible"))return;const{transform:le,width:de,height:Te,autoPanOnNodeFocus:Se,setCenter:pe}=te.getState();if(!Se)return;Oh(new Map([[e,x]]),{x:0,y:0,width:de,height:Te},le,!0).length>0||pe(x.position.x+$.width/2,x.position.y+$.height/2,{zoom:le[2]})};return S.jsx("div",{className:ut(["react-flow__node",`react-flow__node-${j}`,{[b]:V},x.className,{selected:x.selected,selectable:Z,parent:L,draggable:V,dragging:P}]),ref:D,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:K?"all":"none",visibility:G?"visible":"hidden",...x.style,...B},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:O,onMouseLeave:M,onContextMenu:Q,onClick:se,onDoubleClick:X,onKeyDown:ee?ue:void 0,tabIndex:ee?0:void 0,onFocus:ee?ce:void 0,role:x.ariaRole??(ee?"group":void 0),"aria-roledescription":"node","aria-describedby":E?void 0:`${qb}-${_}`,"aria-label":x.ariaLabel,...x.domAttributes,children:S.jsx(BC,{value:e,children:S.jsx(U,{id:e,data:x.data,type:j,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:x.selected??!1,selectable:Z,draggable:V,deletable:x.deletable??!0,isConnectable:oe,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:P,dragHandle:x.dragHandle,zIndex:A.z,parentId:x.parentId,...$})})})}var aA=q.memo(iA);const sA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function ew(e){const{nodesDraggable:n,nodesConnectable:i,nodesFocusable:a,elementsSelectable:o,onError:c}=De(sA,Fe),u=eA(e.onlyRenderVisibleElements),d=nA();return S.jsx("div",{className:"react-flow__nodes",style:Gc,children:u.map(g=>S.jsx(aA,{id:g,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:d,nodesDraggable:n,nodesConnectable:i,nodesFocusable:a,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:c},g))})}ew.displayName="NodeRenderer";const oA=q.memo(ew);function lA(e){return De(q.useCallback(i=>{if(!e)return i.edges.map(o=>o.id);const a=[];if(i.width&&i.height)for(const o of i.edges){const c=i.nodeLookup.get(o.source),u=i.nodeLookup.get(o.target);c&&u&&cT({sourceNode:c,targetNode:u,width:i.width,height:i.height,transform:i.transform})&&a.push(o.id)}return a},[e]),Fe)}const cA=({color:e="none",strokeWidth:n=1})=>{const i={strokeWidth:n,...e&&{stroke:e}};return S.jsx("polyline",{className:"arrow",style:i,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},uA=({color:e="none",strokeWidth:n=1})=>{const i={strokeWidth:n,...e&&{stroke:e,fill:e}};return S.jsx("polyline",{className:"arrowclosed",style:i,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},M0={[Si.Arrow]:cA,[Si.ArrowClosed]:uA};function dA(e){const n=Je();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(M0,e)?M0[e]:(n.getState().onError?.("009",On.error009(e)),null),[e])}const fA=({id:e,type:n,color:i,width:a=12.5,height:o=12.5,markerUnits:c="strokeWidth",strokeWidth:u,orient:d="auto-start-reverse"})=>{const g=dA(n);return g?S.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:d,refX:"0",refY:"0",children:S.jsx(g,{color:i,strokeWidth:u})}):null},tw=({defaultColor:e,rfId:n})=>{const i=De(c=>c.edges),a=De(c=>c.defaultEdgeOptions),o=q.useMemo(()=>pT(i,{id:n,defaultColor:e,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[i,a,n,e]);return o.length?S.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:S.jsx("defs",{children:o.map(c=>S.jsx(fA,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};tw.displayName="MarkerDefinitions";var hA=q.memo(tw);function nw({x:e,y:n,label:i,labelStyle:a,labelShowBg:o=!0,labelBgStyle:c,labelBgPadding:u=[2,4],labelBgBorderRadius:d=2,children:g,className:h,...p}){const[v,y]=q.useState({x:1,y:0,width:0,height:0}),b=ut(["react-flow__edge-textwrapper",h]),E=q.useRef(null);return q.useEffect(()=>{if(E.current){const _=E.current.getBBox();y({x:_.x,y:_.y,width:_.width,height:_.height})}},[i]),i?S.jsxs("g",{transform:`translate(${e-v.width/2} ${n-v.height/2})`,className:b,visibility:v.width?"visible":"hidden",...p,children:[o&&S.jsx("rect",{width:v.width+2*u[0],x:-u[0],y:-u[1],height:v.height+2*u[1],className:"react-flow__edge-textbg",style:c,rx:d,ry:d}),S.jsx("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:E,style:a,children:i}),g]}):null}nw.displayName="EdgeText";const gA=q.memo(nw);function Yc({path:e,labelX:n,labelY:i,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g,interactionWidth:h=20,...p}){return S.jsxs(S.Fragment,{children:[S.jsx("path",{...p,d:e,fill:"none",className:ut(["react-flow__edge-path",p.className])}),h?S.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,a&&vn(n)&&vn(i)?S.jsx(gA,{x:n,y:i,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g}):null]})}function j0({pos:e,x1:n,y1:i,x2:a,y2:o}){return e===he.Left||e===he.Right?[.5*(n+a),i]:[n,.5*(i+o)]}function rw({sourceX:e,sourceY:n,sourcePosition:i=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top}){const[u,d]=j0({pos:i,x1:e,y1:n,x2:a,y2:o}),[g,h]=j0({pos:c,x1:a,y1:o,x2:e,y2:n}),[p,v,y,b]=_b({sourceX:e,sourceY:n,targetX:a,targetY:o,sourceControlX:u,sourceControlY:d,targetControlX:g,targetControlY:h});return[`M${e},${n} C${u},${d} ${g},${h} ${a},${o}`,p,v,y,b]}function iw(e){return q.memo(({id:n,sourceX:i,sourceY:a,targetX:o,targetY:c,sourcePosition:u,targetPosition:d,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:_,markerStart:T,interactionWidth:C})=>{const[k,x,A]=rw({sourceX:i,sourceY:a,sourcePosition:u,targetX:o,targetY:c,targetPosition:d}),L=e.isInternal?void 0:n;return S.jsx(Yc,{id:L,path:k,labelX:x,labelY:A,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:_,markerStart:T,interactionWidth:C})})}const mA=iw({isInternal:!1}),aw=iw({isInternal:!0});mA.displayName="SimpleBezierEdge";aw.displayName="SimpleBezierEdgeInternal";function sw(e){return q.memo(({id:n,sourceX:i,sourceY:a,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,sourcePosition:b=he.Bottom,targetPosition:E=he.Top,markerEnd:_,markerStart:T,pathOptions:C,interactionWidth:k})=>{const[x,A,L]=ih({sourceX:i,sourceY:a,sourcePosition:b,targetX:o,targetY:c,targetPosition:E,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),j=e.isInternal?void 0:n;return S.jsx(Yc,{id:j,path:x,labelX:A,labelY:L,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:_,markerStart:T,interactionWidth:k})})}const ow=sw({isInternal:!1}),lw=sw({isInternal:!0});ow.displayName="SmoothStepEdge";lw.displayName="SmoothStepEdgeInternal";function cw(e){return q.memo(({id:n,...i})=>{const a=e.isInternal?void 0:n;return S.jsx(ow,{...i,id:a,pathOptions:q.useMemo(()=>({borderRadius:0,offset:i.pathOptions?.offset}),[i.pathOptions?.offset])})})}const pA=cw({isInternal:!1}),uw=cw({isInternal:!0});pA.displayName="StepEdge";uw.displayName="StepEdgeInternal";function dw(e){return q.memo(({id:n,sourceX:i,sourceY:a,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:E,interactionWidth:_})=>{const[T,C,k]=Cb({sourceX:i,sourceY:a,targetX:o,targetY:c}),x=e.isInternal?void 0:n;return S.jsx(Yc,{id:x,path:T,labelX:C,labelY:k,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:E,interactionWidth:_})})}const yA=dw({isInternal:!1}),fw=dw({isInternal:!0});yA.displayName="StraightEdge";fw.displayName="StraightEdgeInternal";function hw(e){return q.memo(({id:n,sourceX:i,sourceY:a,targetX:o,targetY:c,sourcePosition:u=he.Bottom,targetPosition:d=he.Top,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:_,markerStart:T,pathOptions:C,interactionWidth:k})=>{const[x,A,L]=Sb({sourceX:i,sourceY:a,sourcePosition:u,targetX:o,targetY:c,targetPosition:d,curvature:C?.curvature}),j=e.isInternal?void 0:n;return S.jsx(Yc,{id:j,path:x,labelX:A,labelY:L,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:_,markerStart:T,interactionWidth:k})})}const vA=hw({isInternal:!1}),gw=hw({isInternal:!0});vA.displayName="BezierEdge";gw.displayName="BezierEdgeInternal";const D0={default:gw,straight:fw,step:uw,smoothstep:lw,simplebezier:aw},z0={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},bA=(e,n,i)=>i===he.Left?e-n:i===he.Right?e+n:e,wA=(e,n,i)=>i===he.Top?e-n:i===he.Bottom?e+n:e,U0="react-flow__edgeupdater";function $0({position:e,centerX:n,centerY:i,radius:a=10,onMouseDown:o,onMouseEnter:c,onMouseOut:u,type:d}){return S.jsx("circle",{onMouseDown:o,onMouseEnter:c,onMouseOut:u,className:ut([U0,`${U0}-${d}`]),cx:bA(n,a,e),cy:wA(i,a,e),r:a,stroke:"transparent",fill:"transparent"})}function xA({isReconnectable:e,reconnectRadius:n,edge:i,sourceX:a,sourceY:o,targetX:c,targetY:u,sourcePosition:d,targetPosition:g,onReconnect:h,onReconnectStart:p,onReconnectEnd:v,setReconnecting:y,setUpdateHover:b}){const E=Je(),_=(A,L)=>{if(A.button!==0)return;const{autoPanOnConnect:j,domNode:U,isValidConnection:V,connectionMode:Z,connectionRadius:oe,lib:ee,onConnectStart:te,onConnectEnd:G,cancelConnection:D,nodeLookup:P,rfId:R,panBy:$,updateConnection:B}=E.getState(),K=L.type==="target",z=(Q,X)=>{y(!1),v?.(Q,i,L.type,X)},O=Q=>h?.(i,Q),M=(Q,X)=>{y(!0),p?.(A,i,L.type),te?.(Q,X)};oh.onPointerDown(A.nativeEvent,{autoPanOnConnect:j,connectionMode:Z,connectionRadius:oe,domNode:U,handleId:L.id,nodeId:L.nodeId,nodeLookup:P,isTarget:K,edgeUpdaterType:L.type,lib:ee,flowId:R,cancelConnection:D,panBy:$,isValidConnection:V,onConnect:O,onConnectStart:M,onConnectEnd:G,onReconnectEnd:z,updateConnection:B,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,dragThreshold:E.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},T=A=>_(A,{nodeId:i.target,id:i.targetHandle??null,type:"target"}),C=A=>_(A,{nodeId:i.source,id:i.sourceHandle??null,type:"source"}),k=()=>b(!0),x=()=>b(!1);return S.jsxs(S.Fragment,{children:[(e===!0||e==="source")&&S.jsx($0,{position:d,centerX:a,centerY:o,radius:n,onMouseDown:T,onMouseEnter:k,onMouseOut:x,type:"source"}),(e===!0||e==="target")&&S.jsx($0,{position:g,centerX:c,centerY:u,radius:n,onMouseDown:C,onMouseEnter:k,onMouseOut:x,type:"target"})]})}function _A({id:e,edgesFocusable:n,edgesReconnectable:i,elementsSelectable:a,onClick:o,onDoubleClick:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,rfId:E,edgeTypes:_,noPanClassName:T,onError:C,disableKeyboardA11y:k}){let x=De(pe=>pe.edgeLookup.get(e));const A=De(pe=>pe.defaultEdgeOptions);x=A?{...A,...x}:x;let L=x.type||"default",j=_?.[L]||D0[L];j===void 0&&(C?.("011",On.error011(L)),L="default",j=_?.default||D0.default);const U=!!(x.focusable||n&&typeof x.focusable>"u"),V=typeof v<"u"&&(x.reconnectable||i&&typeof x.reconnectable>"u"),Z=!!(x.selectable||a&&typeof x.selectable>"u"),oe=q.useRef(null),[ee,te]=q.useState(!1),[G,D]=q.useState(!1),P=Je(),{zIndex:R,sourceX:$,sourceY:B,targetX:K,targetY:z,sourcePosition:O,targetPosition:M}=De(q.useCallback(pe=>{const _e=pe.nodeLookup.get(x.source),Ce=pe.nodeLookup.get(x.target);if(!_e||!Ce)return{zIndex:x.zIndex,...z0};const Ie=mT({id:e,sourceNode:_e,targetNode:Ce,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:pe.connectionMode,onError:C});return{zIndex:lT({selected:x.selected,zIndex:x.zIndex,sourceNode:_e,targetNode:Ce,elevateOnSelect:pe.elevateEdgesOnSelect}),...Ie||z0}},[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),Fe),Q=q.useMemo(()=>x.markerStart?`url('#${ah(x.markerStart,E)}')`:void 0,[x.markerStart,E]),X=q.useMemo(()=>x.markerEnd?`url('#${ah(x.markerEnd,E)}')`:void 0,[x.markerEnd,E]);if(x.hidden||$===null||B===null||K===null||z===null)return null;const se=pe=>{const{addSelectedEdges:_e,unselectNodesAndEdges:Ce,multiSelectionActive:Ie}=P.getState();Z&&(P.setState({nodesSelectionActive:!1}),x.selected&&Ie?(Ce({nodes:[],edges:[x]}),oe.current?.blur()):_e([e])),o&&o(pe,x)},ue=c?pe=>{c(pe,{...x})}:void 0,ce=u?pe=>{u(pe,{...x})}:void 0,le=d?pe=>{d(pe,{...x})}:void 0,de=g?pe=>{g(pe,{...x})}:void 0,Te=h?pe=>{h(pe,{...x})}:void 0,Se=pe=>{if(!k&&lb.includes(pe.key)&&Z){const{unselectNodesAndEdges:_e,addSelectedEdges:Ce}=P.getState();pe.key==="Escape"?(oe.current?.blur(),_e({edges:[x]})):Ce([e])}};return S.jsx("svg",{style:{zIndex:R},children:S.jsxs("g",{className:ut(["react-flow__edge",`react-flow__edge-${L}`,x.className,T,{selected:x.selected,animated:x.animated,inactive:!Z&&!o,updating:ee,selectable:Z}]),onClick:se,onDoubleClick:ue,onContextMenu:ce,onMouseEnter:le,onMouseMove:de,onMouseLeave:Te,onKeyDown:U?Se:void 0,tabIndex:U?0:void 0,role:x.ariaRole??(U?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":x.ariaLabel===null?void 0:x.ariaLabel||`Edge from ${x.source} to ${x.target}`,"aria-describedby":U?`${Vb}-${E}`:void 0,ref:oe,...x.domAttributes,children:[!G&&S.jsx(j,{id:e,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:Z,deletable:x.deletable??!0,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:$,sourceY:B,targetX:K,targetY:z,sourcePosition:O,targetPosition:M,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:Q,markerEnd:X,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),V&&S.jsx(xA,{edge:x,isReconnectable:V,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,sourceX:$,sourceY:B,targetX:K,targetY:z,sourcePosition:O,targetPosition:M,setUpdateHover:te,setReconnecting:D})]})})}var SA=q.memo(_A);const EA=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function mw({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:i,edgeTypes:a,noPanClassName:o,onReconnect:c,onEdgeContextMenu:u,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:v,onEdgeDoubleClick:y,onReconnectStart:b,onReconnectEnd:E,disableKeyboardA11y:_}){const{edgesFocusable:T,edgesReconnectable:C,elementsSelectable:k,onError:x}=De(EA,Fe),A=lA(n);return S.jsxs("div",{className:"react-flow__edges",children:[S.jsx(hA,{defaultColor:e,rfId:i}),A.map(L=>S.jsx(SA,{id:L,edgesFocusable:T,edgesReconnectable:C,elementsSelectable:k,noPanClassName:o,onReconnect:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,onClick:p,reconnectRadius:v,onDoubleClick:y,onReconnectStart:b,onReconnectEnd:E,rfId:i,onError:x,edgeTypes:a,disableKeyboardA11y:_},L))]})}mw.displayName="EdgeRenderer";const TA=q.memo(mw),CA=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function AA({children:e}){const n=De(CA);return S.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function NA(e){const n=Uh(),i=q.useRef(!1);q.useEffect(()=>{!i.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),i.current=!0)},[e,n.viewportInitialized])}const OA=e=>e.panZoom?.syncViewport;function RA(e){const n=De(OA),i=Je();return q.useEffect(()=>{e&&(n?.(e),i.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function kA(e){return e.connection.inProgress?{...e.connection,to:_o(e.connection.to,e.transform)}:{...e.connection}}function MA(e){return kA}function jA(e){const n=MA();return De(n,Fe)}const DA=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function zA({containerStyle:e,style:n,type:i,component:a}){const{nodesConnectable:o,width:c,height:u,isValid:d,inProgress:g}=De(DA,Fe);return!(c&&o&&g)?null:S.jsx("svg",{style:e,width:c,height:u,className:"react-flow__connectionline react-flow__container",children:S.jsx("g",{className:ut(["react-flow__connection",db(d)]),children:S.jsx(pw,{style:n,type:i,CustomComponent:a,isValid:d})})})}const pw=({style:e,type:n=Lr.Bezier,CustomComponent:i,isValid:a})=>{const{inProgress:o,from:c,fromNode:u,fromHandle:d,fromPosition:g,to:h,toNode:p,toHandle:v,toPosition:y}=jA();if(!o)return;if(i)return S.jsx(i,{connectionLineType:n,connectionLineStyle:e,fromNode:u,fromHandle:d,fromX:c.x,fromY:c.y,toX:h.x,toY:h.y,fromPosition:g,toPosition:y,connectionStatus:db(a),toNode:p,toHandle:v});let b="";const E={sourceX:c.x,sourceY:c.y,sourcePosition:g,targetX:h.x,targetY:h.y,targetPosition:y};switch(n){case Lr.Bezier:[b]=Sb(E);break;case Lr.SimpleBezier:[b]=rw(E);break;case Lr.Step:[b]=ih({...E,borderRadius:0});break;case Lr.SmoothStep:[b]=ih(E);break;default:[b]=Cb(E)}return S.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};pw.displayName="ConnectionLine";const UA={};function L0(e=UA){q.useRef(e),Je(),q.useEffect(()=>{},[e])}function $A(){Je(),q.useRef(!1),q.useEffect(()=>{},[])}function yw({nodeTypes:e,edgeTypes:n,onInit:i,onNodeClick:a,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:b,connectionLineType:E,connectionLineStyle:_,connectionLineComponent:T,connectionLineContainerStyle:C,selectionKeyCode:k,selectionOnDrag:x,selectionMode:A,multiSelectionKeyCode:L,panActivationKeyCode:j,zoomActivationKeyCode:U,deleteKeyCode:V,onlyRenderVisibleElements:Z,elementsSelectable:oe,defaultViewport:ee,translateExtent:te,minZoom:G,maxZoom:D,preventScrolling:P,defaultMarkerColor:R,zoomOnScroll:$,zoomOnPinch:B,panOnScroll:K,panOnScrollSpeed:z,panOnScrollMode:O,zoomOnDoubleClick:M,panOnDrag:Q,onPaneClick:X,onPaneMouseEnter:se,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:de,paneClickDistance:Te,nodeClickDistance:Se,onEdgeContextMenu:pe,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,noDragClassName:ir,noWheelClassName:ar,noPanClassName:qr,disableKeyboardA11y:Vr,nodeExtent:yt,rfId:Ai,viewport:kn,onViewportChange:sr}){return L0(e),L0(n),$A(),NA(i),RA(kn),S.jsx(FC,{onPaneClick:X,onPaneMouseEnter:se,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneContextMenu:de,onPaneScroll:le,paneClickDistance:Te,deleteKeyCode:V,selectionKeyCode:k,selectionOnDrag:x,selectionMode:A,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:L,panActivationKeyCode:j,zoomActivationKeyCode:U,elementsSelectable:oe,zoomOnScroll:$,zoomOnPinch:B,zoomOnDoubleClick:M,panOnScroll:K,panOnScrollSpeed:z,panOnScrollMode:O,panOnDrag:Q,defaultViewport:ee,translateExtent:te,minZoom:G,maxZoom:D,onSelectionContextMenu:v,preventScrolling:P,noDragClassName:ir,noWheelClassName:ar,noPanClassName:qr,disableKeyboardA11y:Vr,onViewportChange:sr,isControlledViewport:!!kn,children:S.jsxs(AA,{children:[S.jsx(TA,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:u,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,onlyRenderVisibleElements:Z,onEdgeContextMenu:pe,onEdgeMouseEnter:_e,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,defaultMarkerColor:R,noPanClassName:qr,disableKeyboardA11y:Vr,rfId:Ai}),S.jsx(zA,{style:_,type:E,component:T,containerStyle:C}),S.jsx("div",{className:"react-flow__edgelabel-renderer"}),S.jsx(oA,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:Se,onlyRenderVisibleElements:Z,noPanClassName:qr,noDragClassName:ir,disableKeyboardA11y:Vr,nodeExtent:yt,rfId:Ai}),S.jsx("div",{className:"react-flow__viewport-portal"})]})})}yw.displayName="GraphView";const LA=q.memo(yw),H0=({nodes:e,edges:n,defaultNodes:i,defaultEdges:a,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:v}={})=>{const y=new Map,b=new Map,E=new Map,_=new Map,T=a??n??[],C=i??e??[],k=p??[0,0],x=v??to;Ob(E,_,T);const A=sh(C,y,b,{nodeOrigin:k,nodeExtent:x,elevateNodesOnSelect:!1});let L=[0,0,1];if(u&&o&&c){const j=wo(y,{filter:oe=>!!((oe.width||oe.initialWidth)&&(oe.height||oe.initialHeight))}),{x:U,y:V,zoom:Z}=Rh(j,o,c,g,h,d?.padding??.1);L=[U,V,Z]}return{rfId:"1",width:o??0,height:c??0,transform:L,nodes:C,nodesInitialized:A,nodeLookup:y,parentLookup:b,edges:T,edgeLookup:_,connectionLookup:E,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:i!==void 0,hasDefaultEdges:a!==void 0,panZoom:null,minZoom:g,maxZoom:h,translateExtent:to,nodeExtent:x,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ha.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:d,fitViewResolver:null,connection:{...ub},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:nT,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:cb}},HA=({nodes:e,edges:n,defaultNodes:i,defaultEdges:a,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v})=>rC((y,b)=>{async function E(){const{nodeLookup:_,panZoom:T,fitViewOptions:C,fitViewResolver:k,width:x,height:A,minZoom:L,maxZoom:j}=b();T&&(await eT({nodes:_,width:x,height:A,panZoom:T,minZoom:L,maxZoom:j},C),k?.resolve(!0),y({fitViewResolver:null}))}return{...H0({nodes:e,edges:n,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v,defaultNodes:i,defaultEdges:a}),setNodes:_=>{const{nodeLookup:T,parentLookup:C,nodeOrigin:k,elevateNodesOnSelect:x,fitViewQueued:A}=b(),L=sh(_,T,C,{nodeOrigin:k,nodeExtent:v,elevateNodesOnSelect:x,checkEquality:!0});A&&L?(E(),y({nodes:_,nodesInitialized:L,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:_,nodesInitialized:L})},setEdges:_=>{const{connectionLookup:T,edgeLookup:C}=b();Ob(T,C,_),y({edges:_})},setDefaultNodesAndEdges:(_,T)=>{if(_){const{setNodes:C}=b();C(_),y({hasDefaultNodes:!0})}if(T){const{setEdges:C}=b();C(T),y({hasDefaultEdges:!0})}},updateNodeInternals:_=>{const{triggerNodeChanges:T,nodeLookup:C,parentLookup:k,domNode:x,nodeOrigin:A,nodeExtent:L,debug:j,fitViewQueued:U}=b(),{changes:V,updatedInternals:Z}=ST(_,C,k,x,A,L);Z&&(bT(C,k,{nodeOrigin:A,nodeExtent:L}),U?(E(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),V?.length>0&&(j&&console.log("React Flow: trigger node changes",V),T?.(V)))},updateNodePositions:(_,T=!1)=>{const C=[],k=[],{nodeLookup:x,triggerNodeChanges:A}=b();for(const[L,j]of _){const U=x.get(L),V=!!(U?.expandParent&&U?.parentId&&j?.position),Z={id:L,type:"position",position:V?{x:Math.max(0,j.position.x),y:Math.max(0,j.position.y)}:j.position,dragging:T};V&&U.parentId&&C.push({id:L,parentId:U.parentId,rect:{...j.internals.positionAbsolute,width:j.measured.width??0,height:j.measured.height??0}}),k.push(Z)}if(C.length>0){const{parentLookup:L,nodeOrigin:j}=b(),U=zh(C,x,L,j);k.push(...U)}A(k)},triggerNodeChanges:_=>{const{onNodesChange:T,setNodes:C,nodes:k,hasDefaultNodes:x,debug:A}=b();if(_?.length){if(x){const L=Yb(_,k);C(L)}A&&console.log("React Flow: trigger node changes",_),T?.(_)}},triggerEdgeChanges:_=>{const{onEdgesChange:T,setEdges:C,edges:k,hasDefaultEdges:x,debug:A}=b();if(_?.length){if(x){const L=Xb(_,k);C(L)}A&&console.log("React Flow: trigger edge changes",_),T?.(_)}},addSelectedNodes:_=>{const{multiSelectionActive:T,edgeLookup:C,nodeLookup:k,triggerNodeChanges:x,triggerEdgeChanges:A}=b();if(T){const L=_.map(j=>gi(j,!0));x(L);return}x(Ma(k,new Set([..._]),!0)),A(Ma(C))},addSelectedEdges:_=>{const{multiSelectionActive:T,edgeLookup:C,nodeLookup:k,triggerNodeChanges:x,triggerEdgeChanges:A}=b();if(T){const L=_.map(j=>gi(j,!0));A(L);return}A(Ma(C,new Set([..._]))),x(Ma(k,new Set,!0))},unselectNodesAndEdges:({nodes:_,edges:T}={})=>{const{edges:C,nodes:k,nodeLookup:x,triggerNodeChanges:A,triggerEdgeChanges:L}=b(),j=_||k,U=T||C,V=j.map(oe=>{const ee=x.get(oe.id);return ee&&(ee.selected=!1),gi(oe.id,!1)}),Z=U.map(oe=>gi(oe.id,!1));A(V),L(Z)},setMinZoom:_=>{const{panZoom:T,maxZoom:C}=b();T?.setScaleExtent([_,C]),y({minZoom:_})},setMaxZoom:_=>{const{panZoom:T,minZoom:C}=b();T?.setScaleExtent([C,_]),y({maxZoom:_})},setTranslateExtent:_=>{b().panZoom?.setTranslateExtent(_),y({translateExtent:_})},resetSelectedElements:()=>{const{edges:_,nodes:T,triggerNodeChanges:C,triggerEdgeChanges:k,elementsSelectable:x}=b();if(!x)return;const A=T.reduce((j,U)=>U.selected?[...j,gi(U.id,!1)]:j,[]),L=_.reduce((j,U)=>U.selected?[...j,gi(U.id,!1)]:j,[]);C(A),k(L)},setNodeExtent:_=>{const{nodes:T,nodeLookup:C,parentLookup:k,nodeOrigin:x,elevateNodesOnSelect:A,nodeExtent:L}=b();_[0][0]===L[0][0]&&_[0][1]===L[0][1]&&_[1][0]===L[1][0]&&_[1][1]===L[1][1]||(sh(T,C,k,{nodeOrigin:x,nodeExtent:_,elevateNodesOnSelect:A,checkEquality:!1}),y({nodeExtent:_}))},panBy:_=>{const{transform:T,width:C,height:k,panZoom:x,translateExtent:A}=b();return ET({delta:_,panZoom:x,transform:T,translateExtent:A,width:C,height:k})},setCenter:async(_,T,C)=>{const{width:k,height:x,maxZoom:A,panZoom:L}=b();if(!L)return Promise.resolve(!1);const j=typeof C?.zoom<"u"?C.zoom:A;return await L.setViewport({x:k/2-_*j,y:x/2-T*j,zoom:j},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...ub}})},updateConnection:_=>{y({connection:_})},reset:()=>y({...H0()})}},Object.is);function BA({initialNodes:e,initialEdges:n,defaultNodes:i,defaultEdges:a,initialWidth:o,initialHeight:c,initialMinZoom:u,initialMaxZoom:d,initialFitViewOptions:g,fitView:h,nodeOrigin:p,nodeExtent:v,children:y}){const[b]=q.useState(()=>HA({nodes:e,edges:n,defaultNodes:i,defaultEdges:a,width:o,height:c,fitView:h,minZoom:u,maxZoom:d,fitViewOptions:g,nodeOrigin:p,nodeExtent:v}));return S.jsx(iC,{value:b,children:S.jsx(AC,{children:y})})}function IA({children:e,nodes:n,edges:i,defaultNodes:a,defaultEdges:o,width:c,height:u,fitView:d,fitViewOptions:g,minZoom:h,maxZoom:p,nodeOrigin:v,nodeExtent:y}){return q.useContext(Vc)?S.jsx(S.Fragment,{children:e}):S.jsx(BA,{initialNodes:n,initialEdges:i,defaultNodes:a,defaultEdges:o,initialWidth:c,initialHeight:u,fitView:d,initialFitViewOptions:g,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:v,nodeExtent:y,children:e})}const qA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function VA({nodes:e,edges:n,defaultNodes:i,defaultEdges:a,className:o,nodeTypes:c,edgeTypes:u,onNodeClick:d,onEdgeClick:g,onInit:h,onMove:p,onMoveStart:v,onMoveEnd:y,onConnect:b,onConnectStart:E,onConnectEnd:_,onClickConnectStart:T,onClickConnectEnd:C,onNodeMouseEnter:k,onNodeMouseMove:x,onNodeMouseLeave:A,onNodeContextMenu:L,onNodeDoubleClick:j,onNodeDragStart:U,onNodeDrag:V,onNodeDragStop:Z,onNodesDelete:oe,onEdgesDelete:ee,onDelete:te,onSelectionChange:G,onSelectionDragStart:D,onSelectionDrag:P,onSelectionDragStop:R,onSelectionContextMenu:$,onSelectionStart:B,onSelectionEnd:K,onBeforeDelete:z,connectionMode:O,connectionLineType:M=Lr.Bezier,connectionLineStyle:Q,connectionLineComponent:X,connectionLineContainerStyle:se,deleteKeyCode:ue="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:de=no.Full,panActivationKeyCode:Te="Space",multiSelectionKeyCode:Se=io()?"Meta":"Control",zoomActivationKeyCode:pe=io()?"Meta":"Control",snapToGrid:_e,snapGrid:Ce,onlyRenderVisibleElements:Ie=!1,selectNodesOnDrag:Ge,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ir,nodeOrigin:ar=Pb,edgesFocusable:qr,edgesReconnectable:Vr,elementsSelectable:yt=!0,defaultViewport:Ai=yC,minZoom:kn=.5,maxZoom:sr=2,translateExtent:Pr=to,preventScrolling:tu=!0,nodeExtent:Ni,defaultMarkerColor:nu="#b1b1b7",zoomOnScroll:ru=!0,zoomOnPinch:Gr=!0,panOnScroll:At=!1,panOnScrollSpeed:xn=.5,panOnScrollMode:Nt=_i.Free,zoomOnDoubleClick:iu=!0,panOnDrag:au=!0,onPaneClick:su,onPaneMouseEnter:Oi,onPaneMouseMove:Ri,onPaneMouseLeave:ki,onPaneScroll:Mn,onPaneContextMenu:Mi,paneClickDistance:Yr=0,nodeClickDistance:ou=0,children:To,onReconnect:Ya,onReconnectStart:Xr,onReconnectEnd:lu,onEdgeContextMenu:Co,onEdgeDoubleClick:Ao,onEdgeMouseEnter:No,onEdgeMouseMove:Xa,onEdgeMouseLeave:Ka,reconnectRadius:Oo=10,onNodesChange:Ro,onEdgesChange:_n,noDragClassName:dt="nodrag",noWheelClassName:Et="nowheel",noPanClassName:jn="nopan",fitView:ji,fitViewOptions:ko,connectOnClick:cu,attributionPosition:Mo,proOptions:Kr,defaultEdgeOptions:Za,elevateNodesOnSelect:or,elevateEdgesOnSelect:lr,disableKeyboardA11y:cr=!1,autoPanOnConnect:ur,autoPanOnNodeDrag:it,autoPanSpeed:jo,connectionRadius:Do,isValidConnection:Dn,onError:dr,style:uu,id:Qa,nodeDragThreshold:zo,connectionDragThreshold:du,viewport:Di,onViewportChange:zi,width:cn,height:Rt,colorMode:Uo="light",debug:fu,onScroll:Ui,ariaLabelConfig:$o,...$i},hu){const Tt=Qa||"1",Ja=xC(Uo),Lo=q.useCallback(Li=>{Li.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ui?.(Li)},[Ui]);return S.jsx("div",{"data-testid":"rf__wrapper",...$i,onScroll:Lo,style:{...uu,...qA},ref:hu,className:ut(["react-flow",o,Ja]),id:Qa,role:"application",children:S.jsxs(IA,{nodes:e,edges:n,width:cn,height:Rt,fitView:ji,fitViewOptions:ko,minZoom:kn,maxZoom:sr,nodeOrigin:ar,nodeExtent:Ni,children:[S.jsx(LA,{onInit:h,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:k,onNodeMouseMove:x,onNodeMouseLeave:A,onNodeContextMenu:L,onNodeDoubleClick:j,nodeTypes:c,edgeTypes:u,connectionLineType:M,connectionLineStyle:Q,connectionLineComponent:X,connectionLineContainerStyle:se,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:de,deleteKeyCode:ue,multiSelectionKeyCode:Se,panActivationKeyCode:Te,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Ie,defaultViewport:Ai,translateExtent:Pr,minZoom:kn,maxZoom:sr,preventScrolling:tu,zoomOnScroll:ru,zoomOnPinch:Gr,zoomOnDoubleClick:iu,panOnScroll:At,panOnScrollSpeed:xn,panOnScrollMode:Nt,panOnDrag:au,onPaneClick:su,onPaneMouseEnter:Oi,onPaneMouseMove:Ri,onPaneMouseLeave:ki,onPaneScroll:Mn,onPaneContextMenu:Mi,paneClickDistance:Yr,nodeClickDistance:ou,onSelectionContextMenu:$,onSelectionStart:B,onSelectionEnd:K,onReconnect:Ya,onReconnectStart:Xr,onReconnectEnd:lu,onEdgeContextMenu:Co,onEdgeDoubleClick:Ao,onEdgeMouseEnter:No,onEdgeMouseMove:Xa,onEdgeMouseLeave:Ka,reconnectRadius:Oo,defaultMarkerColor:nu,noDragClassName:dt,noWheelClassName:Et,noPanClassName:jn,rfId:Tt,disableKeyboardA11y:cr,nodeExtent:Ni,viewport:Di,onViewportChange:zi}),S.jsx(wC,{nodes:e,edges:n,defaultNodes:i,defaultEdges:a,onConnect:b,onConnectStart:E,onConnectEnd:_,onClickConnectStart:T,onClickConnectEnd:C,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ir,edgesFocusable:qr,edgesReconnectable:Vr,elementsSelectable:yt,elevateNodesOnSelect:or,elevateEdgesOnSelect:lr,minZoom:kn,maxZoom:sr,nodeExtent:Ni,onNodesChange:Ro,onEdgesChange:_n,snapToGrid:_e,snapGrid:Ce,connectionMode:O,translateExtent:Pr,connectOnClick:cu,defaultEdgeOptions:Za,fitView:ji,fitViewOptions:ko,onNodesDelete:oe,onEdgesDelete:ee,onDelete:te,onNodeDragStart:U,onNodeDrag:V,onNodeDragStop:Z,onSelectionDrag:P,onSelectionDragStart:D,onSelectionDragStop:R,onMove:p,onMoveStart:v,onMoveEnd:y,noPanClassName:jn,nodeOrigin:ar,rfId:Tt,autoPanOnConnect:ur,autoPanOnNodeDrag:it,autoPanSpeed:jo,onError:dr,connectionRadius:Do,isValidConnection:Dn,selectNodesOnDrag:Ge,nodeDragThreshold:zo,connectionDragThreshold:du,onBeforeDelete:z,debug:fu,ariaLabelConfig:$o}),S.jsx(pC,{onSelectionChange:G}),To,S.jsx(dC,{proOptions:Kr,position:Mo}),S.jsx(uC,{rfId:Tt,disableKeyboardA11y:cr})]})})}var vw=Kb(VA);function PA(e){const[n,i]=q.useState(e),a=q.useCallback(o=>i(c=>Yb(o,c)),[]);return[n,i,a]}function GA(e){const[n,i]=q.useState(e),a=q.useCallback(o=>i(c=>Xb(o,c)),[]);return[n,i,a]}function YA({dimensions:e,lineWidth:n,variant:i,className:a}){return S.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ut(["react-flow__background-pattern",i,a])})}function XA({radius:e,className:n}){return S.jsx("circle",{cx:e,cy:e,r:e,className:ut(["react-flow__background-pattern","dots",n])})}var Br;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Br||(Br={}));const KA={[Br.Dots]:1,[Br.Lines]:1,[Br.Cross]:6},ZA=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function bw({id:e,variant:n=Br.Dots,gap:i=20,size:a,lineWidth:o=1,offset:c=0,color:u,bgColor:d,style:g,className:h,patternClassName:p}){const v=q.useRef(null),{transform:y,patternId:b}=De(ZA,Fe),E=a||KA[n],_=n===Br.Dots,T=n===Br.Cross,C=Array.isArray(i)?i:[i,i],k=[C[0]*y[2]||1,C[1]*y[2]||1],x=E*y[2],A=Array.isArray(c)?c:[c,c],L=T?[x,x]:k,j=[A[0]*y[2]||1+L[0]/2,A[1]*y[2]||1+L[1]/2],U=`${b}${e||""}`;return S.jsxs("svg",{className:ut(["react-flow__background",h]),style:{...g,...Gc,"--xy-background-color-props":d,"--xy-background-pattern-color-props":u},ref:v,"data-testid":"rf__background",children:[S.jsx("pattern",{id:U,x:y[0]%k[0],y:y[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:_?S.jsx(XA,{radius:x/2,className:p}):S.jsx(YA,{dimensions:L,lineWidth:o,variant:n,className:p})}),S.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${U})`})]})}bw.displayName="Background";const ww=q.memo(bw);function QA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:S.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function JA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:S.jsx("path",{d:"M0 0h32v4.2H0z"})})}function FA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:S.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function WA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:S.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function eN(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:S.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function rc({children:e,className:n,...i}){return S.jsx("button",{type:"button",className:ut(["react-flow__controls-button",n]),...i,children:e})}const tN=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function xw({style:e,showZoom:n=!0,showFitView:i=!0,showInteractive:a=!0,fitViewOptions:o,onZoomIn:c,onZoomOut:u,onFitView:d,onInteractiveChange:g,className:h,children:p,position:v="bottom-left",orientation:y="vertical","aria-label":b}){const E=Je(),{isInteractive:_,minZoomReached:T,maxZoomReached:C,ariaLabelConfig:k}=De(tN,Fe),{zoomIn:x,zoomOut:A,fitView:L}=Uh(),j=()=>{x(),c?.()},U=()=>{A(),u?.()},V=()=>{L(o),d?.()},Z=()=>{E.setState({nodesDraggable:!_,nodesConnectable:!_,elementsSelectable:!_}),g?.(!_)},oe=y==="horizontal"?"horizontal":"vertical";return S.jsxs(Pc,{className:ut(["react-flow__controls",oe,h]),position:v,style:e,"data-testid":"rf__controls","aria-label":b??k["controls.ariaLabel"],children:[n&&S.jsxs(S.Fragment,{children:[S.jsx(rc,{onClick:j,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:C,children:S.jsx(QA,{})}),S.jsx(rc,{onClick:U,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:T,children:S.jsx(JA,{})})]}),i&&S.jsx(rc,{className:"react-flow__controls-fitview",onClick:V,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:S.jsx(FA,{})}),a&&S.jsx(rc,{className:"react-flow__controls-interactive",onClick:Z,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:_?S.jsx(eN,{}):S.jsx(WA,{})}),p]})}xw.displayName="Controls";const _w=q.memo(xw);function nN({id:e,x:n,y:i,width:a,height:o,style:c,color:u,strokeColor:d,strokeWidth:g,className:h,borderRadius:p,shapeRendering:v,selected:y,onClick:b}){const{background:E,backgroundColor:_}=c||{},T=u||E||_;return S.jsx("rect",{className:ut(["react-flow__minimap-node",{selected:y},h]),x:n,y:i,rx:p,ry:p,width:a,height:o,style:{fill:T,stroke:d,strokeWidth:g},shapeRendering:v,onClick:b?C=>b(C,e):void 0})}const rN=q.memo(nN),iN=e=>e.nodes.map(n=>n.id),$f=e=>e instanceof Function?e:()=>e;function aN({nodeStrokeColor:e,nodeColor:n,nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:o,nodeComponent:c=rN,onClick:u}){const d=De(iN,Fe),g=$f(n),h=$f(e),p=$f(i),v=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return S.jsx(S.Fragment,{children:d.map(y=>S.jsx(oN,{id:y,nodeColorFunc:g,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:a,nodeStrokeWidth:o,NodeComponent:c,onClick:u,shapeRendering:v},y))})}function sN({id:e,nodeColorFunc:n,nodeStrokeColorFunc:i,nodeClassNameFunc:a,nodeBorderRadius:o,nodeStrokeWidth:c,shapeRendering:u,NodeComponent:d,onClick:g}){const{node:h,x:p,y:v,width:y,height:b}=De(E=>{const{internals:_}=E.nodeLookup.get(e),T=_.userNode,{x:C,y:k}=_.positionAbsolute,{width:x,height:A}=nr(T);return{node:T,x:C,y:k,width:x,height:A}},Fe);return!h||h.hidden||!yb(h)?null:S.jsx(d,{x:p,y:v,width:y,height:b,style:h.style,selected:!!h.selected,className:a(h),color:n(h),borderRadius:o,strokeColor:i(h),strokeWidth:c,shapeRendering:u,onClick:g,id:h.id})}const oN=q.memo(sN);var lN=q.memo(aN);const cN=200,uN=150,dN=e=>!e.hidden,fN=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?pb(wo(e.nodeLookup,{filter:dN}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},hN="react-flow__minimap-desc";function Sw({style:e,className:n,nodeStrokeColor:i,nodeColor:a,nodeClassName:o="",nodeBorderRadius:c=5,nodeStrokeWidth:u,nodeComponent:d,bgColor:g,maskColor:h,maskStrokeColor:p,maskStrokeWidth:v,position:y="bottom-right",onClick:b,onNodeClick:E,pannable:_=!1,zoomable:T=!1,ariaLabel:C,inversePan:k,zoomStep:x=1,offsetScale:A=5}){const L=Je(),j=q.useRef(null),{boundingRect:U,viewBB:V,rfId:Z,panZoom:oe,translateExtent:ee,flowWidth:te,flowHeight:G,ariaLabelConfig:D}=De(fN,Fe),P=e?.width??cN,R=e?.height??uN,$=U.width/P,B=U.height/R,K=Math.max($,B),z=K*P,O=K*R,M=A*K,Q=U.x-(z-U.width)/2-M,X=U.y-(O-U.height)/2-M,se=z+M*2,ue=O+M*2,ce=`${hN}-${Z}`,le=q.useRef(0),de=q.useRef();le.current=K,q.useEffect(()=>{if(j.current&&oe)return de.current=jT({domNode:j.current,panZoom:oe,getTransform:()=>L.getState().transform,getViewScale:()=>le.current}),()=>{de.current?.destroy()}},[oe]),q.useEffect(()=>{de.current?.update({translateExtent:ee,width:te,height:G,inversePan:k,pannable:_,zoomStep:x,zoomable:T})},[_,T,k,x,ee,te,G]);const Te=b?_e=>{const[Ce,Ie]=de.current?.pointer(_e)||[0,0];b(_e,{x:Ce,y:Ie})}:void 0,Se=E?q.useCallback((_e,Ce)=>{const Ie=L.getState().nodeLookup.get(Ce).internals.userNode;E(_e,Ie)},[]):void 0,pe=C??D["minimap.ariaLabel"];return S.jsx(Pc,{position:y,style:{...e,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof v=="number"?v*K:void 0,"--xy-minimap-node-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:ut(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:S.jsxs("svg",{width:P,height:R,viewBox:`${Q} ${X} ${se} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:j,onClick:Te,children:[pe&&S.jsx("title",{id:ce,children:pe}),S.jsx(lN,{onClick:Se,nodeColor:a,nodeStrokeColor:i,nodeBorderRadius:c,nodeClassName:o,nodeStrokeWidth:u,nodeComponent:d}),S.jsx("path",{className:"react-flow__minimap-mask",d:`M${Q-M},${X-M}h${se+M*2}v${ue+M*2}h${-se-M*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Sw.displayName="MiniMap";const Ew=q.memo(Sw),gN=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,mN={[Va.Line]:"right",[Va.Handle]:"bottom-right"};function pN({nodeId:e,position:n,variant:i=Va.Handle,className:a,style:o=void 0,children:c,color:u,minWidth:d=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:v=!1,resizeDirection:y,autoScale:b=!0,shouldResize:E,onResizeStart:_,onResize:T,onResizeEnd:C}){const k=Fb(),x=typeof e=="string"?e:k,A=Je(),L=q.useRef(null),j=i===Va.Handle,U=De(q.useCallback(gN(j&&b),[j,b]),Fe),V=q.useRef(null),Z=n??mN[i];q.useEffect(()=>{if(!(!L.current||!x))return V.current||(V.current=XT({domNode:L.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:ee,transform:te,snapGrid:G,snapToGrid:D,nodeOrigin:P,domNode:R}=A.getState();return{nodeLookup:ee,transform:te,snapGrid:G,snapToGrid:D,nodeOrigin:P,paneDomNode:R}},onChange:(ee,te)=>{const{triggerNodeChanges:G,nodeLookup:D,parentLookup:P,nodeOrigin:R}=A.getState(),$=[],B={x:ee.x,y:ee.y},K=D.get(x);if(K&&K.expandParent&&K.parentId){const z=K.origin??R,O=ee.width??K.measured.width??0,M=ee.height??K.measured.height??0,Q={id:K.id,parentId:K.parentId,rect:{width:O,height:M,...vb({x:ee.x??K.position.x,y:ee.y??K.position.y},{width:O,height:M},K.parentId,D,z)}},X=zh([Q],D,P,R);$.push(...X),B.x=ee.x?Math.max(z[0]*O,ee.x):void 0,B.y=ee.y?Math.max(z[1]*M,ee.y):void 0}if(B.x!==void 0&&B.y!==void 0){const z={id:x,type:"position",position:{...B}};$.push(z)}if(ee.width!==void 0&&ee.height!==void 0){const O={id:x,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:ee.width,height:ee.height}};$.push(O)}for(const z of te){const O={...z,type:"position"};$.push(O)}G($)},onEnd:({width:ee,height:te})=>{const G={id:x,type:"dimensions",resizing:!1,dimensions:{width:ee,height:te}};A.getState().triggerNodeChanges([G])}})),V.current.update({controlPosition:Z,boundaries:{minWidth:d,minHeight:g,maxWidth:h,maxHeight:p},keepAspectRatio:v,resizeDirection:y,onResizeStart:_,onResize:T,onResizeEnd:C,shouldResize:E}),()=>{V.current?.destroy()}},[Z,d,g,h,p,v,_,T,C,E]);const oe=Z.split("-");return S.jsx("div",{className:ut(["react-flow__resize-control","nodrag",...oe,i,a]),ref:L,style:{...o,scale:U,...u&&{[j?"backgroundColor":"borderColor"]:u}},children:c})}q.memo(pN);const Tw={},{useDebugValue:yN}=Rv,{useSyncExternalStoreWithSelector:vN}=Lb;let B0=!1;const bN=e=>e;function wN(e,n=bN,i){(Tw?"production":void 0)!=="production"&&i&&!B0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),B0=!0);const a=vN(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,i);return yN(a),a}const I0=e=>{(Tw?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?Hb(e):e,i=(a,o)=>wN(n,a,o);return Object.assign(i,n),i},xN=e=>e?I0(e):I0,Lf=e=>({system:"systems",container:"containers",component:"components",person:"people",externalSystem:"externalSystems",shadow:"shadows"})[e]||`${e}s`,ve=xN((e,n)=>({debugMode:!1,metadata:{name:"New C4 Model",version:"1.0",author:"Solution Architect"},currentLevel:"context",viewMode:"edit",currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null,systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],warnings:[],setMetadata:i=>e({metadata:i}),setCurrentLevel:i=>e({currentLevel:i}),setViewMode:i=>e({viewMode:i}),navigateInto:i=>{const a=n();a.getElementById(i)&&e({currentParentId:i,navigationHistory:[...a.navigationHistory,a.currentParentId],selectedElement:null,selectedEdge:null})},navigateUp:()=>{const i=n();if(i.navigationHistory.length===0)return;const a=[...i.navigationHistory],o=a.pop();e({currentParentId:o,navigationHistory:a,selectedElement:null,selectedEdge:null})},navigateToRoot:()=>{e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},navigateTo:i=>{const a=n();if(i===null){e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null});return}const c=(u=>{const d=[];let g=a.getElementById(u);for(;g&&g.parentId;)d.unshift(g.parentId),g=a.getElementById(g.parentId);return d})(i);e({currentParentId:i,navigationHistory:[null,...c],selectedElement:null,selectedEdge:null})},getBreadcrumb:()=>{const i=n(),a=[];for(const o of i.navigationHistory)if(o!==null){const c=i.getElementById(o);c&&a.push(c)}if(i.currentParentId!==null){const o=i.getElementById(i.currentParentId);o&&a.push(o)}return a},getChildren:i=>{const o=n().getAllElements();return i===null?o.filter(c=>!c.parentId):o.filter(c=>c.parentId===i)},hasChildren:i=>n().getChildren(i).length>0,getChildCount:i=>n().getChildren(i).length,getElementPath:i=>{const a=n(),o=[];let c=a.getElementById(i);for(;c&&(o.unshift(c.name||c.id),c.parentId);)c=a.getElementById(c.parentId);return o.join(" / ")},setSelectedElement:i=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedElement called:",i?{id:i.id,type:i.type}:null),e({selectedElement:i,selectedEdge:null})},setSelectedEdge:i=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedEdge called:",i?{id:i.id}:null),e({selectedEdge:i,selectedElement:null})},addElement:(i,a)=>{const o=n(),c={id:`${i}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:i,parentId:o.currentParentId,...a},u=Lf(i);return e(d=>({[u]:[...d[u],c]})),c},updateElement:(i,a,o)=>{n().debugMode&&console.log("[Diagrams Debug] updateElement called:",{type:i,id:a,updates:o});const u=Lf(i);e(d=>{const g=d[u].map(v=>v.id===a?{...v,...o}:v),h=g.find(v=>v.id===a),p=d.selectedElement?.id===a?h:d.selectedElement;return d.debugMode&&h&&console.log("[Diagrams Debug] Element updated:",h),{[u]:g,selectedElement:p}})},deleteElement:(i,a)=>{const o=n(),c=Lf(i);let u={};o.currentParentId===a?u={currentParentId:null,navigationHistory:[]}:o.navigationHistory.includes(a)&&(u={currentParentId:null,navigationHistory:[]}),e(d=>({[c]:d[c].filter(g=>g.id!==a),relationships:d.relationships.filter(g=>g.from!==a&&g.to!==a),...u}))},addRelationship:i=>{const a={id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...i};return e(o=>({relationships:[...o.relationships,a]})),a},updateRelationship:(i,a)=>{n().debugMode&&console.log("[Diagrams Debug] updateRelationship called:",{id:i,updates:a}),e(c=>{const u=c.relationships.map(h=>h.id===i?{...h,...a}:h),d=u.find(h=>h.id===i),g=c.selectedEdge?.id===i?d:c.selectedEdge;return c.debugMode&&d&&console.log("[Diagrams Debug] Relationship updated:",d),{relationships:u,selectedEdge:g}})},deleteRelationship:i=>{e(a=>({relationships:a.relationships.filter(o=>o.id!==i)}))},getAllElements:()=>{const i=n();return[...i.systems,...i.containers,...i.components,...i.people,...i.externalSystems,...i.shadows]},getElementById:i=>n().getAllElements().find(o=>o.id===i),clearAll:()=>{e({systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],selectedElement:null,selectedEdge:null,warnings:[],currentParentId:null,navigationHistory:[]})},importModel:i=>{e({metadata:i.metadata||n().metadata,systems:i.systems||[],containers:i.containers||[],components:i.components||[],people:i.people||[],externalSystems:i.externalSystems||[],shadows:i.shadows||[],relationships:i.relationships||[],currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},exportModel:()=>{const i=n();return{metadata:i.metadata,systems:i.systems,containers:i.containers,components:i.components,people:i.people,externalSystems:i.externalSystems,shadows:i.shadows,relationships:i.relationships}},validateModel:()=>{const i=n(),a=[];i.containers.forEach(d=>{d.parentSystem&&!i.systems.find(g=>g.id===d.parentSystem)&&a.push({type:"warning",message:`Container "${d.name}" references non-existent parent system`,elementId:d.id})}),i.components.forEach(d=>{d.parentContainer&&!i.containers.find(g=>g.id===d.parentContainer)&&a.push({type:"warning",message:`Component "${d.name}" references non-existent parent container`,elementId:d.id})});const o=i.getAllElements(),c=new Set(o.map(d=>d.id));i.relationships.forEach(d=>{c.has(d.from)||a.push({type:"error",message:`Relationship references non-existent source element: ${d.from}`,elementId:d.id}),c.has(d.to)||a.push({type:"error",message:`Relationship references non-existent target element: ${d.to}`,elementId:d.id})});const u=n().getVisibleElements();return u.length>15&&a.push({type:"info",message:`Current view has ${u.length} elements. Consider splitting into multiple diagrams for clarity.`}),e({warnings:a}),a},getVisibleElements:()=>{const i=n(),a=i.currentParentId;return i.getAllElements().filter(c=>a===null?!c.parentId:c.parentId===a)}}));typeof window<"u"&&(window.__ZUSTAND_STORE__=ve);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cw=(...e)=>e.filter((n,i,a)=>!!n&&a.indexOf(n)===i).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=q.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:u,...d},g)=>q.createElement("svg",{ref:g,...SN,width:n,height:n,stroke:e,strokeWidth:a?Number(i)*24/Number(n):i,className:Cw("lucide",o),...d},[...u.map(([h,p])=>q.createElement(h,p)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(e,n)=>{const i=q.forwardRef(({className:a,...o},c)=>q.createElement(EN,{ref:c,iconNode:n,className:Cw(`lucide-${_N(e)}`,a),...o}));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Le("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=Le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=Le("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=Le("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Le("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Le("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Le("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Le("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Le("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Le("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Le("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Le("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Le("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),HN=e=>{if(!e)return null;let n=0;for(let a=0;a<e.length;a++)n=e.charCodeAt(a)+((n<<5)-n);const i=Math.abs(n)%360;return{bg:`hsl(${i}, 70%, 90%)`,text:`hsl(${i}, 70%, 30%)`,border:`hsl(${i}, 70%, 70%)`}},X0=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},BN=({data:e,selected:n})=>{const a=ve(h=>h.getChildCount)(e.id),o=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(h=>h.name).map(h=>({...h,initials:X0(h.name),colors:HN(X0(h.name))})),c=()=>{const h="px-4 py-3 rounded-lg border-2 min-w-[200px] shadow-lg transition-all";switch(e.type){case"system":return`${h} bg-blue-100 border-blue-500 hover:bg-blue-200`;case"container":return`${h} bg-green-100 border-green-500 hover:bg-green-200`;case"component":return`${h} bg-yellow-100 border-yellow-500 hover:bg-yellow-200`;case"person":return`${h} bg-purple-100 border-purple-500 hover:bg-purple-200`;case"externalSystem":return`${h} bg-gray-100 border-gray-500 hover:bg-gray-200`;default:return`${h} bg-white border-gray-300`}},u=()=>{const h="w-5 h-5";switch(e.type){case"system":return S.jsx(Kc,{className:h});case"container":return S.jsx(Pa,{className:h});case"component":return S.jsx(Xc,{className:h});case"person":return S.jsx(Zc,{className:h});case"externalSystem":return S.jsx(oo,{className:h});default:return S.jsx(Pa,{className:h})}},d=()=>{switch(e.type){case"system":return"Software System";case"container":return"Container";case"component":return"Component";case"person":return"Person";case"externalSystem":return"External System";default:return e.type}},g="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return S.jsxs("div",{className:`${c()} ${n?"ring-4 ring-blue-400":""} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,id:"top",className:g}),S.jsxs("div",{className:"flex items-start gap-2",children:[S.jsx("div",{className:"mt-1",children:u()}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:d()}),S.jsx("div",{className:"font-bold text-gray-900 mb-1",children:e.label||e.name||"Unnamed"}),e.technology&&S.jsxs("div",{className:"text-xs text-gray-600 italic mb-1",children:["[",e.technology,"]"]}),e.description&&S.jsx("div",{className:"text-xs text-gray-700 mt-2",children:e.description})]})]}),o.length>0&&S.jsx("div",{className:"absolute bottom-2 left-2 flex items-center gap-1",children:o.map(h=>S.jsx("div",{className:"px-1.5 py-0.5 rounded text-xs font-medium border",style:{backgroundColor:h.colors.bg,color:h.colors.text,borderColor:h.colors.border},title:`${h.label}: ${h.name}`,children:h.initials},h.label))}),a>0&&S.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 text-xs text-gray-500 bg-white/80 px-1.5 py-0.5 rounded",children:[S.jsx(UN,{className:"w-3 h-3"}),S.jsx("span",{children:a})]}),S.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:g}),S.jsx(Lt,{type:"source",position:he.Right,id:"right",className:g}),S.jsx(Lt,{type:"target",position:he.Left,id:"left",className:g})]})},IN=q.memo(BN),qN=({data:e,selected:n})=>{const a=ve(d=>d.getElementById)(e.targetId),o=()=>{const d="w-5 h-5";if(!a)return S.jsx(vc,{className:d});switch(a.type){case"system":return S.jsx(Kc,{className:d});case"container":return S.jsx(Pa,{className:d});case"component":return S.jsx(Xc,{className:d});case"person":return S.jsx(Zc,{className:d});case"externalSystem":return S.jsx(oo,{className:d});default:return S.jsx(vc,{className:d})}},c=()=>a?`Shadow  ${{system:"Software System",container:"Container",component:"Component",person:"Person",externalSystem:"External System"}[a.type]||a.type}`:"Shadow (broken link)",u="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return S.jsxs("div",{className:`px-4 py-3 rounded-lg border-2 border-dashed min-w-[200px] shadow-lg transition-all
        ${a?"bg-slate-50/50 border-slate-400":"bg-red-50/50 border-red-400"}
        ${n?"ring-4 ring-blue-400":""} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,id:"top",className:u}),S.jsxs("div",{className:"flex items-start gap-2 opacity-70",children:[S.jsx("div",{className:"mt-1",children:o()}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:c()}),S.jsx("div",{className:"font-bold text-gray-700 mb-1",children:a?.name||"Select target..."}),a?.technology&&S.jsxs("div",{className:"text-xs text-gray-500 italic mb-1",children:["[",a.technology,"]"]}),a?.description&&S.jsx("div",{className:"text-xs text-gray-600 mt-2",children:a.description})]})]}),S.jsx("div",{className:"absolute top-2 right-2",children:S.jsx(vc,{className:"w-4 h-4 text-slate-400"})}),S.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:u}),S.jsx(Lt,{type:"source",position:he.Right,id:"right",className:u}),S.jsx(Lt,{type:"target",position:he.Left,id:"left",className:u})]})},VN=q.memo(qN),PN=e=>{if(!e)return null;let n=0;for(let a=0;a<e.length;a++)n=e.charCodeAt(a)+((n<<5)-n);const i=Math.abs(n)%360;return{bg:`hsl(${i}, 70%, 90%)`,text:`hsl(${i}, 70%, 30%)`,border:`hsl(${i}, 70%, 70%)`}},K0=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},GN=({data:e})=>{const n=ve(d=>d.setViewMode),i=ve(d=>d.navigateTo),a=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(d=>d.name).map(d=>({...d,initials:K0(d.name),colors:PN(K0(d.name))})),o=()=>{const d="w-4 h-4";switch(e.type){case"system":return S.jsx(Kc,{className:d});case"container":return S.jsx(Pa,{className:d});case"component":return S.jsx(Xc,{className:d});case"person":return S.jsx(Zc,{className:d});case"externalSystem":return S.jsx(oo,{className:d});default:return S.jsx(Pa,{className:d})}},c=()=>{const d="px-3 py-2 rounded border min-w-[150px] text-sm";switch(e.type){case"system":return`${d} bg-blue-50 border-blue-300`;case"container":return`${d} bg-green-50 border-green-300`;case"component":return`${d} bg-yellow-50 border-yellow-300`;case"person":return`${d} bg-purple-50 border-purple-300`;case"externalSystem":return`${d} bg-gray-50 border-gray-300`;default:return`${d} bg-white border-gray-200`}},u=d=>{d.stopPropagation();const g=e.parentId||null;g?i(g):ve.getState().navigateToRoot(),n("edit")};return S.jsxs("div",{className:`${c()} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,className:"!w-2 !h-2 !bg-gray-400 !border-0"}),S.jsxs("div",{className:"flex items-center gap-2",children:[o(),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"font-medium text-gray-900 truncate",children:e.name||"Unnamed"}),S.jsx("div",{className:"text-xs text-gray-500 capitalize",children:e.type})]}),S.jsx("button",{onClick:u,className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Go to this element in edit mode",children:S.jsx(oo,{className:"w-3 h-3 text-gray-400 hover:text-blue-500"})})]}),a.length>0&&S.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:a.map(d=>S.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium border",style:{backgroundColor:d.colors?.bg||"#f3f4f6",color:d.colors?.text||"#374151",borderColor:d.colors?.border||"#d1d5db"},title:`${d.label}: ${d.name}`,children:[S.jsx("span",{className:"opacity-60",children:d.label}),S.jsx("span",{children:d.initials})]},d.label))}),S.jsx(Lt,{type:"source",position:he.Bottom,className:"!w-2 !h-2 !bg-gray-400 !border-0"})]})},YN=q.memo(GN),XN={treeNode:YN},KN=e=>{const n=new Map,i=[];e.forEach(_=>{_.parentId?(n.has(_.parentId)||n.set(_.parentId,[]),n.get(_.parentId).push(_)):i.push(_)});const a=[],o=[],c=180,u=70,d=40,g=120,h=3,p=_=>{const T=n.get(_)||[];if(T.length===0)return c;const C=Math.min(T.length,h),k=Math.ceil(T.length/C);let x=c;for(let A=0;A<k;A++){let L=0;const j=Math.min(C,T.length-A*C);for(let U=0;U<j;U++){const V=A*C+U,Z=p(T[V].id);L+=Z,U<j-1&&(L+=d)}x=Math.max(x,L)}return x},v=_=>{const T=n.get(_)||[];if(T.length===0)return u;const C=Math.min(T.length,h),k=Math.ceil(T.length/C);let x=0;for(let A=0;A<k;A++){let L=u;for(let j=0;j<C;j++){const U=A*C+j;if(U<T.length){const V=v(T[U].id);L=Math.max(L,V)}}x+=L,A<k-1&&(x+=g)}return u+g+x},y=(_,T,C)=>{let k=u;for(let x=0;x<T;x++){const A=C*T+x;if(A<_.length){const L=v(_[A].id);k=Math.max(k,L)}}return k},b=(_,T,C,k=0)=>{a.push({id:_.id,type:"treeNode",position:{x:T,y:C},data:{..._,label:_.name}});const x=n.get(_.id)||[];if(x.length===0)return;const A=Math.min(x.length,h),L=Math.ceil(x.length/A);p(_.id);const j=T+c/2;let U=C+g;for(let V=0;V<L;V++){const Z=Math.min(A,x.length-V*A),oe=[];for(let G=0;G<Z;G++){const D=V*A+G;oe.push(p(x[D].id))}const ee=oe.reduce((G,D)=>G+D,0)+(Z-1)*d;let te=j-ee/2;for(let G=0;G<Z;G++){const D=V*A+G,P=x[D],R=oe[G],$=te+(R-c)/2;o.push({id:`edge-${_.id}-${P.id}`,source:_.id,target:P.id,type:"smoothstep",style:{stroke:"#94a3b8",strokeWidth:1}}),b(P,$,U,k+1),te+=R+d}U+=y(x,A,V)+g}};let E=50;return i.forEach(_=>{const T=p(_.id);b(_,E,50),E+=T+80}),{nodes:a,edges:o}},ZN=()=>{const e=ve(g=>g.getAllElements),n=ve(g=>g.setViewMode);ve(g=>g.navigateInto);const i=ve(g=>g.navigateTo),a=ve(g=>g.navigateToRoot),o=e().filter(g=>g.type!=="shadow"),{nodes:c,edges:u}=q.useMemo(()=>KN(o),[o]),d=q.useCallback((g,h)=>{g.stopPropagation();const p=h.data;if(!p)return;const v=p.parentId||null;v?i(v):a(),n("edit")},[i,a,n]);return S.jsx("div",{className:"flex-1 h-full",children:S.jsxs(vw,{nodes:c,edges:u,nodeTypes:XN,onNodeDoubleClick:d,fitView:!0,fitViewOptions:{padding:.2},nodesDraggable:!1,nodesConnectable:!1,className:"bg-gray-50",children:[S.jsx(ww,{color:"#e2e8f0",gap:20}),S.jsx(_w,{}),S.jsx(Ew,{nodeColor:g=>{switch(g.data?.type){case"system":return"#93c5fd";case"container":return"#86efac";case"component":return"#fde047";case"person":return"#c4b5fd";default:return"#e2e8f0"}}})]})})},QN=()=>{const{addElement:e,currentLevel:n}=ve(),i=ve(p=>p.currentParentId),a=ve(p=>p.getElementById),o=[{type:"system",icon:Kc,label:"Software System",color:"bg-blue-100 hover:bg-blue-200 text-blue-700"},{type:"container",icon:Pa,label:"Container",color:"bg-green-100 hover:bg-green-200 text-green-700"},{type:"component",icon:Xc,label:"Component",color:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700"},{type:"person",icon:Zc,label:"Person",color:"bg-purple-100 hover:bg-purple-200 text-purple-700"},{type:"externalSystem",icon:oo,label:"External System",color:"bg-gray-100 hover:bg-gray-200 text-gray-700"},{type:"shadow",icon:vc,label:"Shadow (Reference)",color:"bg-slate-100 hover:bg-slate-200 text-slate-700 border-dashed"}],u=(()=>{if(i===null)return["system","person","externalSystem","shadow"];const p=a(i);if(!p)return["system","person","externalSystem","shadow"];switch(p.type){case"system":return["container","person","shadow"];case"container":return["component","shadow"];case"component":return["component","shadow"];default:return["shadow"]}})(),d=o.filter(p=>u.includes(p.type)),g=(p,v)=>{p.dataTransfer.setData("application/c4-element-type",v),p.dataTransfer.effectAllowed="move"},h=()=>({context:"Context",container:"Container",component:"Component",code:"Code"})[n]||n;return S.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 p-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1",children:"Add Elements"}),S.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[h()," Level"]}),S.jsx("div",{className:"space-y-2",children:d.length>0?d.map(p=>{const v=p.icon;return S.jsxs("div",{draggable:!0,onDragStart:y=>g(y,p.type),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg border-2 transition-colors cursor-grab active:cursor-grabbing ${p.color}`,children:[S.jsx(v,{className:"w-5 h-5"}),S.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.type)}):S.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No elements can be added at this level"})}),S.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[S.jsx("h3",{className:"text-xs font-semibold text-blue-900 uppercase mb-2",children:"Quick Tips"}),S.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[S.jsx("li",{children:" Drag elements to canvas to add"}),S.jsx("li",{children:" Click elements to edit properties"}),S.jsx("li",{children:" Drag between elements to create relationships"}),S.jsx("li",{children:" Use mouse wheel to zoom"})]})]})]})},JN=()=>{const{selectedElement:e,selectedEdge:n,setSelectedElement:i,setSelectedEdge:a,updateElement:o,deleteElement:c,updateRelationship:u,deleteRelationship:d,getAllElements:g,getElementPath:h}=ve(),[p,v]=q.useState({name:"",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""}),[y,b]=q.useState({description:"",technology:"",arrowDirection:"right",lineStyle:"solid"}),[E,_]=q.useState(""),[T,C]=q.useState(!1),[k,x]=q.useState("");q.useEffect(()=>{if(e&&e.id)try{v({name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags.join(", "):"",ownerPM:e.ownerPM||"",ownerUX:e.ownerUX||"",ownerTech:e.ownerTech||""})}catch(G){console.error("[Diagrams] Error setting formData for element:",G,e),v({name:"Error loading element",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""})}},[e?.id]),q.useEffect(()=>{e&&e.type==="shadow"&&x(e.targetId||"")},[e?.id,e?.type]),q.useEffect(()=>{if(n&&n.id)try{b({description:n.description||"",technology:n.technology||"",arrowDirection:n.arrowDirection||"right",lineStyle:n.lineStyle||"solid"})}catch(G){console.error("[Diagrams] Error setting edgeFormData:",G,n),b({description:"Error loading relationship",technology:"",arrowDirection:"right",lineStyle:"solid"})}},[n?.id]),q.useEffect(()=>{const G=()=>C(!1);if(T){const D=setTimeout(()=>{document.addEventListener("click",G)},100);return()=>{clearTimeout(D),document.removeEventListener("click",G)}}},[T]);const A=(G,D)=>{v(P=>({...P,[G]:D}))},L=(G,D)=>{b(P=>({...P,[G]:D}))},j=()=>{if(e){const G={name:p.name,description:p.description,technology:p.technology,tags:p.tags.split(",").map(D=>D.trim()).filter(Boolean),ownerPM:p.ownerPM,ownerUX:p.ownerUX,ownerTech:p.ownerTech};o(e.type,e.id,G)}},U=()=>{n&&u(n.id,y)},V=(G,D)=>{const P={...y,[G]:D};b(P),n&&u(n.id,P)},Z=()=>{e&&window.confirm("Are you sure you want to delete this element?")&&(c(e.type,e.id),i(null))},oe=()=>{n&&window.confirm("Are you sure you want to delete this relationship?")&&(d(n.id),a(null))},ee=g().filter(G=>G.type!=="shadow"),te=E?ee.filter(G=>h(G.id).toLowerCase().includes(E.toLowerCase())):ee;return n&&!e?S.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Relationship Properties"}),S.jsx("button",{onClick:()=>a(null),className:"p-1 hover:bg-gray-100 rounded",children:S.jsx(Y0,{className:"w-4 h-4"})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:n.id})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"edge-description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),S.jsx("input",{id:"edge-description",type:"text",value:y.description,onChange:G=>L("description",G.target.value),onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Makes API calls to"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"edge-technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology/Protocol"}),S.jsx("input",{id:"edge-technology",type:"text",value:y.technology,onChange:G=>L("technology",G.target.value),onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., REST/HTTPS, gRPC"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"arrow-direction",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Arrow Direction"}),S.jsxs("select",{id:"arrow-direction",value:y.arrowDirection,onChange:G=>V("arrowDirection",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"right",children:"Right "}),S.jsx("option",{value:"left",children:"Left "}),S.jsx("option",{value:"both",children:"Both "}),S.jsx("option",{value:"none",children:"None "})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"line-style",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Line Style"}),S.jsxs("select",{id:"line-style",value:y.lineStyle,onChange:G=>V("lineStyle",G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"solid",children:"Solid "}),S.jsx("option",{value:"dashed",children:"Dashed   "}),S.jsx("option",{value:"dotted",children:"Dotted    "})]})]}),S.jsx("div",{className:"pt-4 border-t border-gray-200",children:S.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[S.jsx(ch,{className:"w-4 h-4"}),"Delete Relationship"]})})]})]}):e?!e.id||!e.type?(console.error("[Diagrams] Invalid selectedElement:",e),S.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:S.jsxs("div",{className:"text-center text-red-500 mt-8",children:[S.jsx("p",{className:"text-sm",children:"Error: Invalid element data"}),S.jsx("button",{onClick:()=>i(null),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Clear Selection"})]})})):S.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Properties"}),S.jsx("button",{onClick:()=>i(null),className:"p-1 hover:bg-gray-100 rounded",children:S.jsx(Y0,{className:"w-4 h-4"})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Type"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:e.type||"Unknown"})]}),e.type==="shadow"&&S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Target Element"}),k&&S.jsxs("div",{className:"mb-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[S.jsx("div",{className:"font-medium text-blue-900",children:g().find(G=>G.id===k)?.name||"Unknown"}),S.jsx("div",{className:"text-xs text-blue-600",children:h(k)})]}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"text",value:E,onChange:G=>{_(G.target.value),C(!0)},onFocus:()=>C(!0),placeholder:"Search elements by path...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),T&&S.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-48 overflow-y-auto",children:te.length===0?S.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No elements found"}):te.slice(0,20).map(G=>S.jsxs("div",{onClick:()=>{x(G.id),_(""),C(!1),o("shadow",e.id,{targetId:G.id})},className:`px-3 py-2 cursor-pointer hover:bg-gray-100 ${G.id===k?"bg-blue-50":""}`,children:[S.jsx("div",{className:"text-sm font-medium",children:G.name||G.id}),S.jsx("div",{className:"text-xs text-gray-500",children:h(G.id)})]},G.id))})]}),S.jsx("div",{className:"mt-2",children:S.jsx("input",{type:"text",value:k,onChange:G=>{x(G.target.value),o("shadow",e.id,{targetId:G.target.value})},placeholder:"Or paste element ID directly...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-xs font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:e.id})]}),e.type!=="shadow"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Name"}),S.jsx("input",{id:"name",type:"text",value:p.name,onChange:G=>A("name",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter element name"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology"}),S.jsx("input",{id:"technology",type:"text",value:p.technology,onChange:G=>A("technology",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Spring Boot, React, PostgreSQL"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),S.jsx("textarea",{id:"description",value:p.description,onChange:G=>A("description",G.target.value),onBlur:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the element's purpose and responsibilities"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tags",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Tags"}),S.jsx("input",{id:"tags",type:"text",value:p.tags,onChange:G=>A("tags",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tag1, tag2, tag3"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated values"})]}),S.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-2",children:"Owners"}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{htmlFor:"ownerPM",className:"block text-xs text-gray-500 mb-1",children:"PM"}),S.jsx("input",{id:"ownerPM",type:"text",value:p.ownerPM,onChange:G=>A("ownerPM",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product Manager name"})]}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{htmlFor:"ownerUX",className:"block text-xs text-gray-500 mb-1",children:"UX"}),S.jsx("input",{id:"ownerUX",type:"text",value:p.ownerUX,onChange:G=>A("ownerUX",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"UX Designer name"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"ownerTech",className:"block text-xs text-gray-500 mb-1",children:"Tech"}),S.jsx("input",{id:"ownerTech",type:"text",value:p.ownerTech,onChange:G=>A("ownerTech",G.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tech Lead name"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Position"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-xs text-gray-500",children:"X:"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.x||0)})]}),S.jsxs("div",{children:[S.jsx("span",{className:"text-xs text-gray-500",children:"Y:"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.y||0)})]})]})]}),S.jsx("div",{className:"pt-4 border-t border-gray-200",children:S.jsxs("button",{onClick:Z,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[S.jsx(ch,{className:"w-4 h-4"}),"Delete Element"]})})]})]}):S.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:S.jsx("div",{className:"text-center text-gray-500 mt-8",children:S.jsx("p",{className:"text-sm",children:"Select an element to view and edit its properties"})})})},FN=()=>{const e=ve(u=>u.getBreadcrumb),n=ve(u=>u.navigateToRoot),i=ve(u=>u.navigateTo),a=ve(u=>u.currentParentId),o=ve(u=>u.metadata),c=e();return S.jsxs("nav",{className:"flex items-center gap-1 text-sm",children:[S.jsxs("button",{onClick:n,className:`flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-200 transition-colors ${a===null?"text-blue-600 font-medium":"text-gray-600"}`,title:"Go to root view",children:[S.jsx(jN,{className:"w-4 h-4"}),S.jsx("span",{children:o.name||"Model"})]}),c.map((u,d)=>S.jsxs("div",{className:"flex items-center",children:[S.jsx(CN,{className:"w-4 h-4 text-gray-400"}),S.jsx("button",{onClick:()=>i(u.id),className:`px-2 py-1 rounded hover:bg-gray-200 transition-colors ${d===c.length-1?"text-blue-600 font-medium":"text-gray-600"}`,children:u.name})]},u.id))]})};function WN(e,n){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const i=document.implementation.createHTMLDocument(),a=i.createElement("base"),o=i.createElement("a");return i.head.appendChild(a),i.body.appendChild(o),n&&(a.href=n),o.href=e,o.href}const eO=(()=>{let e=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)})();function Ir(e){const n=[];for(let i=0,a=e.length;i<a;i++)n.push(e[i]);return n}let ba=null;function Ow(e={}){return ba||(e.includeStyleProperties?(ba=e.includeStyleProperties,ba):(ba=Ir(window.getComputedStyle(document.documentElement)),ba))}function Rc(e,n){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(n);return a?parseFloat(a.replace("px","")):0}function tO(e){const n=Rc(e,"border-left-width"),i=Rc(e,"border-right-width");return e.clientWidth+n+i}function nO(e){const n=Rc(e,"border-top-width"),i=Rc(e,"border-bottom-width");return e.clientHeight+n+i}function Rw(e,n={}){const i=n.width||tO(e),a=n.height||nO(e);return{width:i,height:a}}function rO(){let e,n;try{n=process}catch{}const i=n&&n.env?n.env.devicePixelRatio:null;return i&&(e=parseInt(i,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Xt=16384;function iO(e){(e.width>Xt||e.height>Xt)&&(e.width>Xt&&e.height>Xt?e.width>e.height?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt):e.width>Xt?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt))}function kc(e){return new Promise((n,i)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>n(a))})},a.onerror=i,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function aO(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function sO(e,n,i){const a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg"),c=document.createElementNS(a,"foreignObject");return o.setAttribute("width",`${n}`),o.setAttribute("height",`${i}`),o.setAttribute("viewBox",`0 0 ${n} ${i}`),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("externalResourcesRequired","true"),o.appendChild(c),c.appendChild(e),aO(o)}const Ht=(e,n)=>{if(e instanceof n)return!0;const i=Object.getPrototypeOf(e);return i===null?!1:i.constructor.name===n.name||Ht(i,n)};function oO(e){const n=e.getPropertyValue("content");return`${e.cssText} content: '${n.replace(/'|"/g,"")}';`}function lO(e,n){return Ow(n).map(i=>{const a=e.getPropertyValue(i),o=e.getPropertyPriority(i);return`${i}: ${a}${o?" !important":""};`}).join(" ")}function cO(e,n,i,a){const o=`.${e}:${n}`,c=i.cssText?oO(i):lO(i,a);return document.createTextNode(`${o}{${c}}`)}function Z0(e,n,i,a){const o=window.getComputedStyle(e,i),c=o.getPropertyValue("content");if(c===""||c==="none")return;const u=eO();try{n.className=`${n.className} ${u}`}catch{return}const d=document.createElement("style");d.appendChild(cO(u,i,o,a)),n.appendChild(d)}function uO(e,n,i){Z0(e,n,":before",i),Z0(e,n,":after",i)}const Q0="application/font-woff",J0="image/jpeg",dO={woff:Q0,woff2:Q0,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:J0,jpeg:J0,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function fO(e){const n=/\.([^./]*?)$/g.exec(e);return n?n[1]:""}function Lh(e){const n=fO(e).toLowerCase();return dO[n]||""}function hO(e){return e.split(/,/)[1]}function uh(e){return e.search(/^(data:)/)!==-1}function gO(e,n){return`data:${n};base64,${e}`}async function kw(e,n,i){const a=await fetch(e,n);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const o=await a.blob();return new Promise((c,u)=>{const d=new FileReader;d.onerror=u,d.onloadend=()=>{try{c(i({res:a,result:d.result}))}catch(g){u(g)}},d.readAsDataURL(o)})}const If={};function mO(e,n,i){let a=e.replace(/\?.*/,"");return i&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),n?`[${n}]${a}`:a}async function Hh(e,n,i){const a=mO(e,n,i.includeQueryParams);if(If[a]!=null)return If[a];i.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const c=await kw(e,i.fetchRequestInit,({res:u,result:d})=>(n||(n=u.headers.get("Content-Type")||""),hO(d)));o=gO(c,n)}catch(c){o=i.imagePlaceholder||"";let u=`Failed to fetch resource: ${e}`;c&&(u=typeof c=="string"?c:c.message),u&&console.warn(u)}return If[a]=o,o}async function pO(e){const n=e.toDataURL();return n==="data:,"?e.cloneNode(!1):kc(n)}async function yO(e,n){if(e.currentSrc){const c=document.createElement("canvas"),u=c.getContext("2d");c.width=e.clientWidth,c.height=e.clientHeight,u?.drawImage(e,0,0,c.width,c.height);const d=c.toDataURL();return kc(d)}const i=e.poster,a=Lh(i),o=await Hh(i,a,n);return kc(o)}async function vO(e,n){var i;try{if(!((i=e?.contentDocument)===null||i===void 0)&&i.body)return await Qc(e.contentDocument.body,n,!0)}catch{}return e.cloneNode(!1)}async function bO(e,n){return Ht(e,HTMLCanvasElement)?pO(e):Ht(e,HTMLVideoElement)?yO(e,n):Ht(e,HTMLIFrameElement)?vO(e,n):e.cloneNode(Mw(e))}const wO=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Mw=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function xO(e,n,i){var a,o;if(Mw(n))return n;let c=[];return wO(e)&&e.assignedNodes?c=Ir(e.assignedNodes()):Ht(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?c=Ir(e.contentDocument.body.childNodes):c=Ir(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),c.length===0||Ht(e,HTMLVideoElement)||await c.reduce((u,d)=>u.then(()=>Qc(d,i)).then(g=>{g&&n.appendChild(g)}),Promise.resolve()),n}function _O(e,n,i){const a=n.style;if(!a)return;const o=window.getComputedStyle(e);o.cssText?(a.cssText=o.cssText,a.transformOrigin=o.transformOrigin):Ow(i).forEach(c=>{let u=o.getPropertyValue(c);c==="font-size"&&u.endsWith("px")&&(u=`${Math.floor(parseFloat(u.substring(0,u.length-2)))-.1}px`),Ht(e,HTMLIFrameElement)&&c==="display"&&u==="inline"&&(u="block"),c==="d"&&n.getAttribute("d")&&(u=`path(${n.getAttribute("d")})`),a.setProperty(c,u,o.getPropertyPriority(c))})}function SO(e,n){Ht(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),Ht(e,HTMLInputElement)&&n.setAttribute("value",e.value)}function EO(e,n){if(Ht(e,HTMLSelectElement)){const i=n,a=Array.from(i.children).find(o=>e.value===o.getAttribute("value"));a&&a.setAttribute("selected","")}}function TO(e,n,i){return Ht(n,Element)&&(_O(e,n,i),uO(e,n,i),SO(e,n),EO(e,n)),n}async function CO(e,n){const i=e.querySelectorAll?e.querySelectorAll("use"):[];if(i.length===0)return e;const a={};for(let c=0;c<i.length;c++){const d=i[c].getAttribute("xlink:href");if(d){const g=e.querySelector(d),h=document.querySelector(d);!g&&h&&!a[d]&&(a[d]=await Qc(h,n,!0))}}const o=Object.values(a);if(o.length){const c="http://www.w3.org/1999/xhtml",u=document.createElementNS(c,"svg");u.setAttribute("xmlns",c),u.style.position="absolute",u.style.width="0",u.style.height="0",u.style.overflow="hidden",u.style.display="none";const d=document.createElementNS(c,"defs");u.appendChild(d);for(let g=0;g<o.length;g++)d.appendChild(o[g]);e.appendChild(u)}return e}async function Qc(e,n,i){return!i&&n.filter&&!n.filter(e)?null:Promise.resolve(e).then(a=>bO(a,n)).then(a=>xO(e,a,n)).then(a=>TO(e,a,n)).then(a=>CO(a,n))}const jw=/url\((['"]?)([^'"]+?)\1\)/g,AO=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,NO=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function OO(e){const n=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function RO(e){const n=[];return e.replace(jw,(i,a,o)=>(n.push(o),i)),n.filter(i=>!uh(i))}async function kO(e,n,i,a,o){try{const c=i?WN(n,i):n,u=Lh(n);let d;return o||(d=await Hh(c,u,a)),e.replace(OO(n),`$1${d}$3`)}catch{}return e}function MO(e,{preferredFontFormat:n}){return n?e.replace(NO,i=>{for(;;){const[a,,o]=AO.exec(i)||[];if(!o)return"";if(o===n)return`src: ${a};`}}):e}function Dw(e){return e.search(jw)!==-1}async function zw(e,n,i){if(!Dw(e))return e;const a=MO(e,i);return RO(a).reduce((c,u)=>c.then(d=>kO(d,u,n,i)),Promise.resolve(a))}async function wa(e,n,i){var a;const o=(a=n.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(o){const c=await zw(o,null,i);return n.style.setProperty(e,c,n.style.getPropertyPriority(e)),!0}return!1}async function jO(e,n){await wa("background",e,n)||await wa("background-image",e,n),await wa("mask",e,n)||await wa("-webkit-mask",e,n)||await wa("mask-image",e,n)||await wa("-webkit-mask-image",e,n)}async function DO(e,n){const i=Ht(e,HTMLImageElement);if(!(i&&!uh(e.src))&&!(Ht(e,SVGImageElement)&&!uh(e.href.baseVal)))return;const a=i?e.src:e.href.baseVal,o=await Hh(a,Lh(a),n);await new Promise((c,u)=>{e.onload=c,e.onerror=n.onImageErrorHandler?(...g)=>{try{c(n.onImageErrorHandler(...g))}catch(h){u(h)}}:u;const d=e;d.decode&&(d.decode=c),d.loading==="lazy"&&(d.loading="eager"),i?(e.srcset="",e.src=o):e.href.baseVal=o})}async function zO(e,n){const a=Ir(e.childNodes).map(o=>Uw(o,n));await Promise.all(a).then(()=>e)}async function Uw(e,n){Ht(e,Element)&&(await jO(e,n),await DO(e,n),await zO(e,n))}function UO(e,n){const{style:i}=e;n.backgroundColor&&(i.backgroundColor=n.backgroundColor),n.width&&(i.width=`${n.width}px`),n.height&&(i.height=`${n.height}px`);const a=n.style;return a!=null&&Object.keys(a).forEach(o=>{i[o]=a[o]}),e}const F0={};async function W0(e){let n=F0[e];if(n!=null)return n;const a=await(await fetch(e)).text();return n={url:e,cssText:a},F0[e]=n,n}async function ev(e,n){let i=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,c=(i.match(/url\([^)]+\)/g)||[]).map(async u=>{let d=u.replace(a,"$1");return d.startsWith("https://")||(d=new URL(d,e.url).href),kw(d,n.fetchRequestInit,({result:g})=>(i=i.replace(u,`url(${g})`),[u,g]))});return Promise.all(c).then(()=>i)}function tv(e){if(e==null)return[];const n=[],i=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(i,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const g=o.exec(a);if(g===null)break;n.push(g[0])}a=a.replace(o,"");const c=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,u="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",d=new RegExp(u,"gi");for(;;){let g=c.exec(a);if(g===null){if(g=d.exec(a),g===null)break;c.lastIndex=d.lastIndex}else d.lastIndex=c.lastIndex;n.push(g[0])}return n}async function $O(e,n){const i=[],a=[];return e.forEach(o=>{if("cssRules"in o)try{Ir(o.cssRules||[]).forEach((c,u)=>{if(c.type===CSSRule.IMPORT_RULE){let d=u+1;const g=c.href,h=W0(g).then(p=>ev(p,n)).then(p=>tv(p).forEach(v=>{try{o.insertRule(v,v.startsWith("@import")?d+=1:o.cssRules.length)}catch(y){console.error("Error inserting rule from remote css",{rule:v,error:y})}})).catch(p=>{console.error("Error loading remote css",p.toString())});a.push(h)}})}catch(c){const u=e.find(d=>d.href==null)||document.styleSheets[0];o.href!=null&&a.push(W0(o.href).then(d=>ev(d,n)).then(d=>tv(d).forEach(g=>{u.insertRule(g,u.cssRules.length)})).catch(d=>{console.error("Error loading remote stylesheet",d)})),console.error("Error inlining remote css file",c)}}),Promise.all(a).then(()=>(e.forEach(o=>{if("cssRules"in o)try{Ir(o.cssRules||[]).forEach(c=>{i.push(c)})}catch(c){console.error(`Error while reading CSS rules from ${o.href}`,c)}}),i))}function LO(e){return e.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>Dw(n.style.getPropertyValue("src")))}async function HO(e,n){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const i=Ir(e.ownerDocument.styleSheets),a=await $O(i,n);return LO(a)}function $w(e){return e.trim().replace(/["']/g,"")}function BO(e){const n=new Set;function i(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(c=>{n.add($w(c))}),Array.from(a.children).forEach(c=>{c instanceof HTMLElement&&i(c)})}return i(e),n}async function IO(e,n){const i=await HO(e,n),a=BO(e);return(await Promise.all(i.filter(c=>a.has($w(c.style.fontFamily))).map(c=>{const u=c.parentStyleSheet?c.parentStyleSheet.href:null;return zw(c.cssText,u,n)}))).join(`
`)}async function qO(e,n){const i=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await IO(e,n);if(i){const a=document.createElement("style"),o=document.createTextNode(i);a.appendChild(o),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function Lw(e,n={}){const{width:i,height:a}=Rw(e,n),o=await Qc(e,n,!0);return await qO(o,n),await Uw(o,n),UO(o,n),await sO(o,i,a)}async function VO(e,n={}){const{width:i,height:a}=Rw(e,n),o=await Lw(e,n),c=await kc(o),u=document.createElement("canvas"),d=u.getContext("2d"),g=n.pixelRatio||rO(),h=n.canvasWidth||i,p=n.canvasHeight||a;return u.width=h*g,u.height=p*g,n.skipAutoScale||iO(u),u.style.width=`${h}`,u.style.height=`${p}`,n.backgroundColor&&(d.fillStyle=n.backgroundColor,d.fillRect(0,0,u.width,u.height)),d.drawImage(c,0,0,u.width,u.height),u}async function PO(e,n={}){return(await VO(e,n)).toDataURL()}var bc={exports:{}},GO=bc.exports,nv;function YO(){return nv||(nv=1,(function(e,n){(function(i,a){a()})(GO,function(){function i(h,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function a(h,p,v){var y=new XMLHttpRequest;y.open("GET",h),y.responseType="blob",y.onload=function(){g(y.response,p,v)},y.onerror=function(){console.error("could not download file")},y.send()}function o(h){var p=new XMLHttpRequest;p.open("HEAD",h,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Kl=="object"&&Kl.global===Kl?Kl:void 0,d=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(h,p,v){var y=u.URL||u.webkitURL,b=document.createElement("a");p=p||h.name||"download",b.download=p,b.rel="noopener",typeof h=="string"?(b.href=h,b.origin===location.origin?c(b):o(b.href)?a(h,p,v):c(b,b.target="_blank")):(b.href=y.createObjectURL(h),setTimeout(function(){y.revokeObjectURL(b.href)},4e4),setTimeout(function(){c(b)},0))}:"msSaveOrOpenBlob"in navigator?function(h,p,v){if(p=p||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(i(h,v),p);else if(o(h))a(h,p,v);else{var y=document.createElement("a");y.href=h,y.target="_blank",setTimeout(function(){c(y)})}}:function(h,p,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof h=="string")return a(h,p,v);var b=h.type==="application/octet-stream",E=/constructor/i.test(u.HTMLElement)||u.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||b&&E||d)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var x=T.result;x=_?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=x:location=x,y=null},T.readAsDataURL(h)}else{var C=u.URL||u.webkitURL,k=C.createObjectURL(h);y?y.location=k:location.href=k,y=null,setTimeout(function(){C.revokeObjectURL(k)},4e4)}});u.saveAs=g.saveAs=g,e.exports=g})})(bc)),bc.exports}var So=YO();const XO=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const i=await PO(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),a=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.png`;So.saveAs(i,a)}catch(i){console.error("Error exporting PNG:",i),alert("Failed to export PNG: "+i.message)}},KO=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const i=await Lw(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),a=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.svg`;So.saveAs(i,a)}catch(i){console.error("Error exporting SVG:",i),alert("Failed to export SVG: "+i.message)}},ZO=e=>{let n="C4Context";e.components?.length>0?n="C4Component":e.containers?.length>0&&(n="C4Container");let i=`${n}
`;return i+=`  title ${e.metadata.name}

`,e.people?.forEach(a=>{const o=a.description||"";i+=`  Person(${gt(a.id)}, "${a.name}", "${o}")
`}),e.people?.length>0&&(i+=`
`),e.systems?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?i+=`  System(${gt(a.id)}, "${a.name}", "${o}", "${c}")
`:i+=`  System(${gt(a.id)}, "${a.name}", "${o}")
`}),e.systems?.length>0&&(i+=`
`),e.externalSystems?.forEach(a=>{const o=a.description||"";i+=`  System_Ext(${gt(a.id)}, "${a.name}", "${o}")
`}),e.externalSystems?.length>0&&(i+=`
`),e.containers?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?i+=`  Container(${gt(a.id)}, "${a.name}", "${c}", "${o}")
`:i+=`  Container(${gt(a.id)}, "${a.name}", "${o}")
`}),e.containers?.length>0&&(i+=`
`),e.components?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?i+=`  Component(${gt(a.id)}, "${a.name}", "${c}", "${o}")
`:i+=`  Component(${gt(a.id)}, "${a.name}", "${o}")
`}),e.components?.length>0&&(i+=`
`),e.relationships?.forEach(a=>{const o=a.description||"uses",c=a.technology||"",u=a.arrowDirection==="left"?"Rel_Back":"Rel";c?i+=`  ${u}(${gt(a.from)}, ${gt(a.to)}, "${o}", "${c}")
`:i+=`  ${u}(${gt(a.from)}, ${gt(a.to)}, "${o}")
`}),i},Hw=e=>{let n=`@startuml
`;return n+=`!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

`,n+=`title ${e.metadata.name}

`,e.people?.forEach(i=>{n+=`Person(${gt(i.id)}, "${i.name}", "${i.description||""}")
`}),e.systems?.forEach(i=>{n+=`System(${gt(i.id)}, "${i.name}", "${i.description||""}")
`}),e.externalSystems?.forEach(i=>{n+=`System_Ext(${gt(i.id)}, "${i.name}", "${i.description||""}")
`}),e.containers?.forEach(i=>{const a=i.technology?`, "${i.technology}"`:"";n+=`Container(${gt(i.id)}, "${i.name}", "${i.description||""}"${a})
`}),e.components?.forEach(i=>{const a=i.technology?`, "${i.technology}"`:"";n+=`Component(${gt(i.id)}, "${i.name}", "${i.description||""}"${a})
`}),n+=`
`,e.relationships?.forEach(i=>{const a=i.description||"uses",o=i.technology?`, "${i.technology}"`:"";n+=`Rel(${gt(i.from)}, ${gt(i.to)}, "${a}"${o})
`}),n+=`
@enduml`,n},Bw=e=>{let n=`# ${e.metadata.name}

`;return n+=`**Version:** ${e.metadata.version}
`,n+=`**Author:** ${e.metadata.author}

`,n+=`---

`,e.systems?.length>0&&(n+=`## Software Systems

`,e.systems.forEach(i=>{n+=`### ${i.name}

`,i.description&&(n+=`${i.description}

`),i.technology&&(n+=`**Technology:** ${i.technology}

`);const a=e.containers?.filter(o=>o.parentSystem===i.id)||[];a.length>0&&(n+=`#### Containers

`,a.forEach(o=>{n+=`- **${o.name}**`,o.technology&&(n+=` (${o.technology})`),o.description&&(n+=`: ${o.description}`),n+=`
`}),n+=`
`)})),e.externalSystems?.length>0&&(n+=`## External Systems

`,e.externalSystems.forEach(i=>{n+=`### ${i.name}

`,i.description&&(n+=`${i.description}

`)})),e.people?.length>0&&(n+=`## People / Actors

`,e.people.forEach(i=>{n+=`### ${i.name}

`,i.description&&(n+=`${i.description}

`)})),e.relationships?.length>0&&(n+=`## Relationships

`,n+=`| From | To | Description | Technology |
`,n+=`|------|-----|-------------|------------|
`,e.relationships.forEach(i=>{const a=rv(e,i.from),o=rv(e,i.to),c=a?.name||i.from,u=o?.name||i.to;n+=`| ${c} | ${u} | ${i.description||"-"} | ${i.technology||"-"} |
`}),n+=`
`),n},QO=e=>{const n=Bw(e),i=Hw(e),a=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e.metadata.name} - C4 Model</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        h1, h2, h3, h4 { color: #1e293b; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: left;
        }
        th { background-color: #f1f5f9; font-weight: 600; }
        pre {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
        }
        code {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .metadata {
            background-color: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="metadata">
        <h1>${e.metadata.name}</h1>
        <p><strong>Version:</strong> ${e.metadata.version}</p>
        <p><strong>Author:</strong> ${e.metadata.author}</p>
    </div>

    ${JO(n)}

    <h2>PlantUML Diagram Code</h2>
    <pre><code>${i}</code></pre>

    <h2>JSON Model</h2>
    <pre><code>${JSON.stringify(e,null,2)}</code></pre>
</body>
</html>`,o=new Blob([a],{type:"text/html"});So.saveAs(o,`${(e.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.html`)},gt=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),rv=(e,n)=>[...e.systems||[],...e.containers||[],...e.components||[],...e.people||[],...e.externalSystems||[]].find(a=>a.id===n),JO=e=>e.split(`
`).map(n=>n.startsWith("# ")?`<h1>${n.substring(2)}</h1>`:n.startsWith("## ")?`<h2>${n.substring(3)}</h2>`:n.startsWith("### ")?`<h3>${n.substring(4)}</h3>`:n.startsWith("#### ")?`<h4>${n.substring(5)}</h4>`:n.startsWith("- ")?`<li>${n.substring(2)}</li>`:n.startsWith("**")&&n.endsWith("**")?`<p><strong>${n.substring(2,n.length-2)}</strong></p>`:n.trim()==="---"?"<hr>":n.trim()===""?"<br>":`<p>${n}</p>`).join(`
`),di=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",FO=e=>{const n="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;align=center;spacingTop=8;";switch(e){case"person":return`${n}fillColor=#e1d5e7;strokeColor=#9673a6;`;case"system":return`${n}fillColor=#dae8fc;strokeColor=#6c8ebf;`;case"externalSystem":return`${n}fillColor=#f5f5f5;strokeColor=#666666;dashed=1;`;case"container":return`${n}fillColor=#d5e8d4;strokeColor=#82b366;`;case"component":return`${n}fillColor=#fff2cc;strokeColor=#d6b656;`;default:return`${n}fillColor=#ffffff;strokeColor=#000000;`}},WO=e=>{let n="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;";return e.lineStyle==="dashed"?n+="dashed=1;dashPattern=8 8;":e.lineStyle==="dotted"&&(n+="dashed=1;dashPattern=2 2;"),e.arrowDirection==="left"?n+="startArrow=classic;endArrow=none;":e.arrowDirection==="both"?n+="startArrow=classic;endArrow=classic;":n+="startArrow=none;endArrow=classic;",n+="strokeColor=#666666;",n},eR=e=>{const n=new Date().toISOString(),i=`diagram-${Date.now()}`,a=[...e.people||[],...e.systems||[],...e.externalSystems||[],...e.containers||[],...e.components||[]];let o=1/0,c=1/0,u=-1/0,d=-1/0;a.forEach(T=>{const C=T.position?.x||0,k=T.position?.y||0;o=Math.min(o,C),c=Math.min(c,k),u=Math.max(u,C+220),d=Math.max(d,k+120)});const g=o<50?50-o:0,h=c<50?50-c:0,p=Math.max(1100,u+g+100),v=Math.max(850,d+h+100);let y=`<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="Diagrams" modified="${n}" agent="Diagrams C4 Modelling Tool" version="1.0" type="device">
  <diagram name="${di(e.metadata?.name||"C4 Diagram")}" id="${i}">
    <mxGraphModel dx="0" dy="0" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="${p}" pageHeight="${v}" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
`;const b=new Map;let E=2;const _=T=>{switch(T){case"person":return"[Person]";case"system":return"[Software System]";case"externalSystem":return"[External System]";case"container":return"[Container]";case"component":return"[Component]";default:return""}};return a.forEach(T=>{const C=`cell-${E++}`;b.set(T.id,C);const k=(T.position?.x||0)+g,x=(T.position?.y||0)+h,A=220,L=120,j=FO(T.type),U=_(T.type),V=T.technology?`[${di(T.technology)}]`:"",Z=T.description?`&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;${di(T.description)}&lt;/font&gt;`:"",oe=`&lt;b&gt;${di(T.name)}&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px; color: #666666;&quot;&gt;${U}${V?"&lt;br&gt;"+V:""}&lt;/font&gt;${Z}`;y+=`        <mxCell id="${C}" value="${oe}" style="${j}" vertex="1" parent="1">
          <mxGeometry x="${k}" y="${x}" width="${A}" height="${L}" as="geometry" />
        </mxCell>
`}),(e.relationships||[]).forEach(T=>{const C=`edge-${E++}`,k=b.get(T.from),x=b.get(T.to);if(!k||!x)return;const A=WO(T),L=T.description||"",j=T.technology?`[${di(T.technology)}]`:"",U=j?`${di(L)}&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;${j}&lt;/font&gt;`:di(L);y+=`        <mxCell id="${C}" value="${U}" style="${A}" edge="1" parent="1" source="${k}" target="${x}">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
`}),y+=`      </root>
    </mxGraphModel>
  </diagram>
</mxfile>`,y},tR=e=>{const n=eR(e),i=new Blob([n],{type:"application/xml"}),a=`${(e.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.drawio`;So.saveAs(i,a)},nR=e=>{const n=[...(e.systems||[]).map(b=>({...b,type:"system"})),...(e.containers||[]).map(b=>({...b,type:"container"})),...(e.components||[]).map(b=>({...b,type:"component"})),...(e.people||[]).map(b=>({...b,type:"person"})),...(e.externalSystems||[]).map(b=>({...b,type:"externalSystem"}))],i=new Map(n.map(b=>[b.id,b])),a=b=>{const E=[b];let _=b;for(;_.parentId&&i.has(_.parentId);)_=i.get(_.parentId),E.unshift(_);return E};let o=0;const c=n.map(b=>{const E=a(b);return o=Math.max(o,E.length),{element:b,chain:E}});c.sort((b,E)=>{const _=Math.min(b.chain.length,E.chain.length);for(let T=0;T<_;T++){const C=(b.chain[T].name||"").localeCompare(E.chain[T].name||"");if(C!==0)return C}return b.chain.length-E.chain.length});const u=[];for(let b=0;b<o;b++)b===0?u.push("Level 1 (System)"):b===1?u.push("Level 2 (Container)"):u.push(`Level ${b+1}`);const d=["ID",...u,"Type","PM","UX","Tech","Technology","Description"],g=c.map(({element:b,chain:E})=>{const _=[];for(let T=0;T<o;T++)T<E.length?_.push(E[T].name||""):_.push(b.name||"");return[b.id||"",..._,b.type||"",b.ownerPM||"",b.ownerUX||"",b.ownerTech||"",b.technology||"",b.description||""]}),h=b=>{const E=String(b||"");return E.includes(",")||E.includes('"')||E.includes(`
`)?`"${E.replace(/"/g,'""')}"`:E},p=[d.map(h).join(","),...g.map(b=>b.map(h).join(","))].join(`
`),v=new Blob([p],{type:"text/csv;charset=utf-8"}),y=`${(e.metadata?.name||"architecture").replace(/\s+/g,"-").toLowerCase()}.csv`;So.saveAs(v,y)},rR=e=>{const n=[];let i=[],a="",o=!1;for(let c=0;c<e.length;c++){const u=e[c],d=e[c+1];o?u==='"'&&d==='"'?(a+='"',c++):u==='"'?o=!1:a+=u:u==='"'?o=!0:u===","?(i.push(a),a=""):u===`
`||u==="\r"&&d===`
`?(i.push(a),n.push(i),i=[],a="",u==="\r"&&c++):u!=="\r"&&(a+=u)}return(a||i.length>0)&&(i.push(a),n.push(i)),n},iR=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)}),aR=e=>{const n=rR(e);if(n.length<2)throw new Error("CSV must have at least a header row and one data row");const i=n[0].map(x=>x.trim()),a=n.slice(1).filter(x=>x.some(A=>A.trim())),o=i.findIndex(x=>x.toLowerCase()==="id"),c=i.findIndex(x=>x.toLowerCase()==="type"),u=i.findIndex(x=>x.toLowerCase()==="pm"),d=i.findIndex(x=>x.toLowerCase()==="ux"),g=i.findIndex(x=>x.toLowerCase()==="tech"),h=i.findIndex(x=>x.toLowerCase()==="technology"),p=i.findIndex(x=>x.toLowerCase()==="description"),v=[];if(i.forEach((x,A)=>{x.toLowerCase().startsWith("level")&&v.push(A)}),v.length===0)throw new Error('No Level columns found in CSV. Expected columns like "Level 1", "Level 2", etc.');if(c===-1)throw new Error("Type column is required");const y=new Map,b={systems:[],containers:[],components:[],people:[],externalSystems:[]};a.forEach(x=>{const A=z=>z>=0&&z<x.length&&x[z]?.trim()||"",L=A(o),j=A(c).toLowerCase(),U=A(u),V=A(d),Z=A(g),oe=A(h),ee=A(p),te=v.map(z=>A(z));let G=0;for(let z=0;z<te.length;z++){const O=te[z];if(!O)break;(z===0||O!==te[z-1])&&(G=z)}const D=[];for(let z=0;z<=G;z++)te[z]&&(z===0||te[z]!==te[z-1])&&D.push(te[z]);const P=D.join("/"),R=D[D.length-1],$=D.slice(0,-1).join("/");if(y.has(P)){const z=y.get(P);U&&!z.ownerPM&&(z.ownerPM=U),V&&!z.ownerUX&&(z.ownerUX=V),Z&&!z.ownerTech&&(z.ownerTech=Z),oe&&!z.technology&&(z.technology=oe),ee&&!z.description&&(z.description=ee);return}let B=j;(!B||!["system","container","component","person","externalsystem"].includes(B))&&(G===0?B="system":G===1?B="container":B="component"),B==="externalsystem"&&(B="externalSystem");const K={id:L||iR(),name:R,type:B,description:ee||"",technology:oe||"",ownerPM:U||"",ownerUX:V||"",ownerTech:Z||"",position:{x:100,y:100}};switch(y.set(P,K),$&&y.has($)&&(K.parentId=y.get($).id),B){case"system":b.systems.push(K);break;case"container":b.containers.push(K);break;case"component":b.components.push(K);break;case"person":b.people.push(K);break;case"externalSystem":b.externalSystems.push(K);break}});const E=250,_=4,T=[...b.systems,...b.containers,...b.components,...b.people,...b.externalSystems],C=new Map;T.forEach(x=>{const A=x.parentId||"root";C.has(A)||C.set(A,[]),C.get(A).push(x)});const k=(x,A,L)=>{const j=C.get(x||"root")||[];let U=A,V=L,Z=0;j.forEach(oe=>{oe.position={x:U,y:V},Z++,Z>=_?(Z=0,U=A,V+=E):U+=E})};return k(null,100,100),C.forEach((x,A)=>{A!=="root"&&k(A,100,100)}),{metadata:{name:"Imported Model",version:"1.0",author:""},...b,relationships:[],shadows:[]}},sR=e=>{let n=1;const i=new Map,a=h=>(i.has(h)||i.set(h,String(n++)),i.get(h)),o=(e.people||[]).map(h=>({id:a(h.id),name:h.name||"Unnamed Person",description:h.description||"",tags:(h.tags||[]).join(",")||"Person",location:"Unspecified",relationships:[]})),c=[];(e.systems||[]).forEach(h=>{const p=a(h.id);c.push({id:p,name:h.name||"Unnamed System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System",location:"Unspecified",containers:[],relationships:[]})}),(e.externalSystems||[]).forEach(h=>{const p=a(h.id);c.push({id:p,name:h.name||"Unnamed External System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System,External",location:"External",containers:[],relationships:[]})}),(e.containers||[]).forEach(h=>{const v={id:a(h.id),name:h.name||"Unnamed Container",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Container",components:[],relationships:[]},y=c.find(b=>a(h.parentSystem)===b.id);y?y.containers.push(v):c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned containers",tags:"Software System",location:"Unspecified",containers:[v],relationships:[]}):c[0].containers.push(v)}),(e.components||[]).forEach(h=>{const v={id:a(h.id),name:h.name||"Unnamed Component",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Component",relationships:[]};let y=!1;for(const b of c){const E=b.containers.find(_=>a(h.parentContainer)===_.id);if(E){E.components.push(v),y=!0;break}}if(!y){for(const b of c)if(b.containers.length>0){b.containers[0].components.push(v),y=!0;break}}y||(c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned components",tags:"Software System",location:"Unspecified",containers:[{id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}],relationships:[]}):c[0].containers.length===0?c[0].containers.push({id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}):c[0].containers[0].components.push(v))});const u=h=>{const p=a(h.from),v=a(h.to),y={sourceId:p,destinationId:v,description:h.description||"",technology:h.technology||"",tags:h.tags||""},b=o.find(E=>E.id===p);if(b){b.relationships.push(y);return}for(const E of c){if(E.id===p){E.relationships.push(y);return}for(const _ of E.containers){if(_.id===p){_.relationships.push(y);return}for(const T of _.components)if(T.id===p){T.relationships.push(y);return}}}};(e.relationships||[]).forEach(h=>{u(h)});const d={systemLandscapeViews:[],systemContextViews:[],containerViews:[],componentViews:[],configuration:{styles:{elements:[{tag:"Person",shape:"Person",background:"#08427b",color:"#ffffff"},{tag:"Software System",background:"#1168bd",color:"#ffffff"},{tag:"External",background:"#999999",color:"#ffffff"},{tag:"Container",background:"#438dd5",color:"#ffffff"},{tag:"Component",background:"#85bbf0",color:"#000000"}],relationships:[]}}};if(c.length>0||o.length>0){const h=[];let p=100,v=100;o.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),c.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),d.systemLandscapeViews.push({key:"SystemLandscape",description:"System Landscape view",elements:h,relationships:[],automaticLayout:{rankDirection:"TopBottom",rankSeparation:200,nodeSeparation:200}})}return{id:1,name:e.metadata?.name||"Architecture Model",description:`Exported from Diagrams on ${new Date().toISOString()}`,version:e.metadata?.version||"1.0",model:{people:o,softwareSystems:c},views:d,documentation:{},properties:{exportedFrom:"Diagrams",author:e.metadata?.author||""}}},oR=e=>{const n={metadata:{name:e.name||"Imported Model",version:e.version||"1.0",author:e.properties?.author||e.lastModifiedUser||"Unknown"},systems:[],containers:[],components:[],people:[],externalSystems:[],relationships:[]},i=new Map;[...e.views?.systemLandscapeViews||[],...e.views?.systemContextViews||[],...e.views?.containerViews||[],...e.views?.componentViews||[]].forEach(d=>{(d.elements||[]).forEach(g=>{g.x!==void 0&&g.y!==void 0&&i.set(g.id,{x:g.x,y:g.y})})});const o=d=>i.get(d)||{x:100,y:100},c=(d,g)=>`${d}-${Date.now()}-${g}-${Math.random().toString(36).substr(2,5)}`,u=new Map;return(e.model?.people||[]).forEach(d=>{const g=c("person",d.id);u.set(d.id,g);const h=o(d.id);n.people.push({id:g,type:"person",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(p=>p.trim()).filter(p=>p!=="Person"):[],position:h})}),(e.model?.softwareSystems||[]).forEach(d=>{const g=d.location==="External"||d.tags&&d.tags.includes("External"),h=c(g?"externalSystem":"system",d.id);u.set(d.id,h);const p=o(d.id),v={id:h,type:g?"externalSystem":"system",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(y=>y.trim()).filter(y=>y!=="Software System"&&y!=="External"):[],position:p};g?n.externalSystems.push(v):n.systems.push(v),(d.containers||[]).forEach(y=>{const b=c("container",y.id);u.set(y.id,b);const E=o(y.id);n.containers.push({id:b,type:"container",name:y.name,description:y.description||"",technology:y.technology||"",tags:y.tags?y.tags.split(",").map(_=>_.trim()).filter(_=>_!=="Container"):[],position:E,parentSystem:h}),(y.components||[]).forEach(_=>{const T=c("component",_.id);u.set(_.id,T);const C=o(_.id);n.components.push({id:T,type:"component",name:_.name,description:_.description||"",technology:_.technology||"",tags:_.tags?_.tags.split(",").map(k=>k.trim()).filter(k=>k!=="Component"):[],position:C,parentContainer:b}),(_.relationships||[]).forEach(k=>{const x=u.get(k.sourceId),A=u.get(k.destinationId);x&&A&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:x,to:A,description:k.description||"",technology:k.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(y.relationships||[]).forEach(_=>{const T=u.get(_.sourceId),C=u.get(_.destinationId);T&&C&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:T,to:C,description:_.description||"",technology:_.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(d.relationships||[]).forEach(y=>{const b=u.get(y.sourceId),E=u.get(y.destinationId);b&&E&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:b,to:E,description:y.description||"",technology:y.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(e.model?.people||[]).forEach(d=>{(d.relationships||[]).forEach(g=>{const h=u.get(g.sourceId),p=u.get(g.destinationId);h&&p&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:h,to:p,description:g.description||"",technology:g.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),n},lR=8e3,cR=e=>{try{const n=JSON.stringify(e);return btoa(encodeURIComponent(n))}catch(n){return console.error("Error encoding model:",n),null}},uR=e=>{try{const n=decodeURIComponent(atob(e));return JSON.parse(n)}catch(n){return console.error("Error decoding model:",n),null}},dR=e=>{const n=cR(e);if(!n)return{url:null,error:"Failed to encode model"};const a=`${window.location.origin+window.location.pathname}#model=${n}`;return a.length>lR?{url:null,error:`Model too large for URL sharing (${Math.round(a.length/1024)}KB). Use JSON export instead.`}:{url:a,error:null}},fR=()=>{const e=window.location.hash;if(!e||!e.startsWith("#model="))return null;const n=e.substring(7);return uR(n)},hR=()=>{history.replaceState(null,"",window.location.pathname)},gR=()=>window.location.hash.startsWith("#model=");function Jc(e,n){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]]);return i}function mR(e,n,i,a){function o(c){return c instanceof i?c:new i(function(u){u(c)})}return new(i||(i=Promise))(function(c,u){function d(p){try{h(a.next(p))}catch(v){u(v)}}function g(p){try{h(a.throw(p))}catch(v){u(v)}}function h(p){p.done?c(p.value):o(p.value).then(d,g)}h((a=a.apply(e,n||[])).next())})}const pR=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);class Bh extends Error{constructor(n,i="FunctionsError",a){super(n),this.name=i,this.context=a}}class yR extends Bh{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class iv extends Bh{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class av extends Bh{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var dh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dh||(dh={}));class vR{constructor(n,{headers:i={},customFetch:a,region:o=dh.Any}={}){this.url=n,this.headers=i,this.region=o,this.fetch=pR(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return mR(this,arguments,void 0,function*(i,a={}){var o;let c,u;try{const{headers:d,method:g,body:h,signal:p,timeout:v}=a;let y={},{region:b}=a;b||(b=this.region);const E=new URL(`${this.url}/${i}`);b&&b!=="any"&&(y["x-region"]=b,E.searchParams.set("forceFunctionRegion",b));let _;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",_=h):typeof h=="string"?(y["Content-Type"]="text/plain",_=h):typeof FormData<"u"&&h instanceof FormData?_=h:(y["Content-Type"]="application/json",_=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?_=JSON.stringify(h):_=h;let T=p;v&&(u=new AbortController,c=setTimeout(()=>u.abort(),v),p?(T=u.signal,p.addEventListener("abort",()=>u.abort())):T=u.signal);const C=yield this.fetch(E.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:_,signal:T}).catch(L=>{throw new yR(L)}),k=C.headers.get("x-relay-error");if(k&&k==="true")throw new iv(C);if(!C.ok)throw new av(C);let x=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),A;return x==="application/json"?A=yield C.json():x==="application/octet-stream"||x==="application/pdf"?A=yield C.blob():x==="text/event-stream"?A=C:x==="multipart/form-data"?A=yield C.formData():A=yield C.text(),{data:A,error:null,response:C}}catch(d){return{data:null,error:d,response:d instanceof av||d instanceof iv?d.context:void 0}}finally{c&&clearTimeout(c)}})}}var bR=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},wR=class{constructor(e){var n,i,a;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(i=e.isMaybeSingle)!==null&&i!==void 0?i:!1,this.urlLengthLimit=(a=e.urlLengthLimit)!==null&&a!==void 0?a:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,d=null,g=null,h=c.status,p=c.statusText;if(c.ok){var v,y;if(i.method!=="HEAD"){var b;const C=await c.text();C===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((b=i.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=C:d=JSON.parse(C))}const _=(v=i.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),T=(y=c.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");_&&T&&T.length>1&&(g=parseInt(T[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var E;const _=await c.text();try{u=JSON.parse(_),Array.isArray(u)&&c.status===404&&(d=[],u=null,h=200,p="OK")}catch{c.status===404&&_===""?(h=204,p="No Content"):u={message:_}}if(u&&i.isMaybeSingle&&(!(u==null||(E=u.details)===null||E===void 0)&&E.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&i.shouldThrowOnError)throw new bR(u)}return{error:u,data:d,count:g,status:h,statusText:p}});return this.shouldThrowOnError||(o=o.catch(c=>{var u;let d="",g="",h="";const p=c?.cause;if(p){var v,y,b,E;const C=(v=p?.message)!==null&&v!==void 0?v:"",k=(y=p?.code)!==null&&y!==void 0?y:"";d=`${(b=c?.name)!==null&&b!==void 0?b:"FetchError"}: ${c?.message}`,d+=`

Caused by: ${(E=p?.name)!==null&&E!==void 0?E:"Error"}: ${C}`,k&&(d+=` (${k})`),p?.stack&&(d+=`
${p.stack}`)}else{var _;d=(_=c?.stack)!==null&&_!==void 0?_:""}const T=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(h="",g="Request was aborted (timeout or manual cancellation)",T>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${T} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(p?.name==="HeadersOverflowError"||p?.code==="UND_ERR_HEADERS_OVERFLOW")&&(h="",g="HTTP headers exceeded server limits (typically 16KB)",T>this.urlLengthLimit&&(g+=`. Your request URL is ${T} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:d,hint:g,code:h},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}},xR=class extends wR{select(e){let n=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:i,foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(c,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:i=!1,buffers:a=!1,wal:o=!1,format:c="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,i?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const sv=new RegExp("[,()]");var Na=class extends xR{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}regexMatch(e,n){return this.url.searchParams.append(e,`match.${n}`),this}regexIMatch(e,n){return this.url.searchParams.append(e,`imatch.${n}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}isDistinct(e,n){return this.url.searchParams.append(e,`isdistinct.${n}`),this}in(e,n){const i=Array.from(new Set(n)).map(a=>typeof a=="string"&&sv.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}notIn(e,n){const i=Array.from(new Set(n)).map(a=>typeof a=="string"&&sv.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`not.in.(${i})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:i,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const c=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${o}fts${c}.${n}`),this}match(e){return Object.entries(e).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(e,n,i){return this.url.searchParams.append(e,`not.${n}.${i}`),this}or(e,{foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,i){return this.url.searchParams.append(e,`${n}.${i}`),this}},_R=class{constructor(e,{headers:n={},schema:i,fetch:a,urlLengthLimit:o=8e3}){this.url=e,this.headers=new Headers(n),this.schema=i,this.fetch=a,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,n){const{head:i=!1,count:a}=n??{},o=i?"HEAD":"GET";let c=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join(""),{url:d,headers:g}=this.cloneRequestState();return d.searchParams.set("select",u),a&&g.append("Prefer",`count=${a}`),new Na({method:o,url:d,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:n,defaultToNull:i=!0}={}){var a;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(n&&u.append("Prefer",`count=${n}`),i||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((g,h)=>g.concat(Object.keys(h)),[]);if(d.length>0){const g=[...new Set(d)].map(h=>`"${h}"`);c.searchParams.set("columns",g.join(","))}}return new Na({method:o,url:c,headers:u,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:n,ignoreDuplicates:i=!1,count:a,defaultToNull:o=!0}={}){var c;const u="POST",{url:d,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),n!==void 0&&d.searchParams.set("on_conflict",n),a&&g.append("Prefer",`count=${a}`),o||g.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(h.length>0){const p=[...new Set(h)].map(v=>`"${v}"`);d.searchParams.set("columns",p.join(","))}}return new Na({method:u,url:d,headers:g,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:n}={}){var i;const a="PATCH",{url:o,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Na({method:a,url:o,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var n;const i="DELETE",{url:a,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Na({method:i,url:a,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function lo(e){"@babel/helpers - typeof";return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lo(e)}function SR(e,n){if(lo(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,n);if(lo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function ER(e){var n=SR(e,"string");return lo(n)=="symbol"?n:n+""}function TR(e,n,i){return(n=ER(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function ov(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,a)}return i}function ic(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?ov(Object(i),!0).forEach(function(a){TR(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ov(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}var CR=class Iw{constructor(n,{headers:i={},schema:a,fetch:o,timeout:c,urlLengthLimit:u=8e3}={}){this.url=n,this.headers=new Headers(i),this.schemaName=a,this.urlLengthLimit=u;const d=o??globalThis.fetch;c!==void 0&&c>0?this.fetch=(g,h)=>{const p=new AbortController,v=setTimeout(()=>p.abort(),c),y=h?.signal;if(y){if(y.aborted)return clearTimeout(v),d(g,h);const b=()=>{clearTimeout(v),p.abort()};return y.addEventListener("abort",b,{once:!0}),d(g,ic(ic({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(v),y.removeEventListener("abort",b)})}return d(g,ic(ic({},h),{},{signal:p.signal})).finally(()=>clearTimeout(v))}:this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _R(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Iw(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,i={},{head:a=!1,get:o=!1,count:c}={}){var u;let d;const g=new URL(`${this.url}/rpc/${n}`);let h;const p=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(p)),v=a&&Object.values(i).some(p);v?(d="POST",h=i):a||o?(d=a?"HEAD":"GET",Object.entries(i).filter(([b,E])=>E!==void 0).map(([b,E])=>[b,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([b,E])=>{g.searchParams.append(b,E)})):(d="POST",h=i);const y=new Headers(this.headers);return v?y.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&y.set("Prefer",`count=${c}`),new Na({method:d,url:g,headers:y,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class AR{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const a=i.versions;if(a&&a.node){const o=a.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let i=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(i+=`

Suggested solution: ${n.workaround}`),new Error(i)}static createWebSocket(n,i){const a=this.getWebSocketConstructor();return new a(n,i)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const NR="2.97.0",OR=`realtime-js/${NR}`,RR="1.0.0",qw="2.0.0",lv=qw,fh=1e4,kR=1e3,MR=100;var $r;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($r||($r={}));var ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ht||(ht={}));var pn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pn||(pn={}));var hh;(function(e){e.websocket="websocket"})(hh||(hh={}));var yi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yi||(yi={}));class jR{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,i){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(n));let a=[n.join_ref,n.ref,n.topic,n.event,n.payload];return i(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(n){var i;return this._isArrayBuffer((i=n.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var i,a;const o=(a=(i=n.payload)===null||i===void 0?void 0:i.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var i,a;const o=(a=(i=n.payload)===null||i===void 0?void 0:i.payload)!==null&&a!==void 0?a:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(n,i,a){var o,c;const u=n.topic,d=(o=n.ref)!==null&&o!==void 0?o:"",g=(c=n.join_ref)!==null&&c!==void 0?c:"",h=n.payload.event,p=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},v=Object.keys(p).length===0?"":JSON.stringify(p);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+d.length+u.length+h.length+v.length,b=new ArrayBuffer(this.HEADER_LENGTH+y);let E=new DataView(b),_=0;E.setUint8(_++,this.KINDS.userBroadcastPush),E.setUint8(_++,g.length),E.setUint8(_++,d.length),E.setUint8(_++,u.length),E.setUint8(_++,h.length),E.setUint8(_++,v.length),E.setUint8(_++,i),Array.from(g,C=>E.setUint8(_++,C.charCodeAt(0))),Array.from(d,C=>E.setUint8(_++,C.charCodeAt(0))),Array.from(u,C=>E.setUint8(_++,C.charCodeAt(0))),Array.from(h,C=>E.setUint8(_++,C.charCodeAt(0))),Array.from(v,C=>E.setUint8(_++,C.charCodeAt(0)));var T=new Uint8Array(b.byteLength+a.byteLength);return T.set(new Uint8Array(b),0),T.set(new Uint8Array(a),b.byteLength),T.buffer}decode(n,i){if(this._isArrayBuffer(n)){let a=this._binaryDecode(n);return i(a)}if(typeof n=="string"){const a=JSON.parse(n),[o,c,u,d,g]=a;return i({join_ref:o,ref:c,topic:u,event:d,payload:g})}return i({})}_binaryDecode(n){const i=new DataView(n),a=i.getUint8(0),o=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,i,o)}}_decodeUserBroadcast(n,i,a){const o=i.getUint8(1),c=i.getUint8(2),u=i.getUint8(3),d=i.getUint8(4);let g=this.HEADER_LENGTH+4;const h=a.decode(n.slice(g,g+o));g=g+o;const p=a.decode(n.slice(g,g+c));g=g+c;const v=a.decode(n.slice(g,g+u));g=g+u;const y=n.slice(g,n.byteLength),b=d===this.JSON_ENCODING?JSON.parse(a.decode(y)):y,E={type:this.BROADCAST_EVENT,event:p,payload:b};return u>0&&(E.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(n){var i;return n instanceof ArrayBuffer||((i=n?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(n,i){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([a])=>i.includes(a)))}}class Vw{constructor(n,i){this.callback=n,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Xe||(Xe={}));const cv=(e,n,i={})=>{var a;const o=(a=i.skipTypes)!==null&&a!==void 0?a:[];return n?Object.keys(n).reduce((c,u)=>(c[u]=DR(u,e,n,o),c),{}):{}},DR=(e,n,i,a)=>{const o=n.find(d=>d.name===e),c=o?.type,u=i[e];return c&&!a.includes(c)?Pw(c,u):gh(u)},Pw=(e,n)=>{if(e.charAt(0)==="_"){const i=e.slice(1,e.length);return LR(n,i)}switch(e){case Xe.bool:return zR(n);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return UR(n);case Xe.json:case Xe.jsonb:return $R(n);case Xe.timestamp:return HR(n);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return gh(n);default:return gh(n)}},gh=e=>e,zR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},UR=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},$R=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},LR=(e,n)=>{if(typeof e!="string")return e;const i=e.length-1,a=e[i];if(e[0]==="{"&&a==="}"){let c;const u=e.slice(1,i);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(d=>Pw(n,d))}return e},HR=e=>typeof e=="string"?e.replace(" ","T"):e,Gw=e=>{const n=new URL(e);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class qf{constructor(n,i,a={},o=fh){this.channel=n,this.event=i,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,i){var a;return this._hasReceived(n)&&i((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:i}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(i))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var uv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(uv||(uv={}));class Zs{constructor(n,i){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zs.syncState(this.state,o,c,u),this.pendingDiffs.forEach(g=>{this.state=Zs.syncDiff(this.state,g,c,u)}),this.pendingDiffs=[],d()}),this.channel._on(a.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Zs.syncDiff(this.state,o,c,u),d())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,i,a,o){const c=this.cloneDeep(n),u=this.transformState(i),d={},g={};return this.map(c,(h,p)=>{u[h]||(g[h]=p)}),this.map(u,(h,p)=>{const v=c[h];if(v){const y=p.map(T=>T.presence_ref),b=v.map(T=>T.presence_ref),E=p.filter(T=>b.indexOf(T.presence_ref)<0),_=v.filter(T=>y.indexOf(T.presence_ref)<0);E.length>0&&(d[h]=E),_.length>0&&(g[h]=_)}else d[h]=p}),this.syncDiff(c,{joins:d,leaves:g},a,o)}static syncDiff(n,i,a,o){const{joins:c,leaves:u}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(c,(d,g)=>{var h;const p=(h=n[d])!==null&&h!==void 0?h:[];if(n[d]=this.cloneDeep(g),p.length>0){const v=n[d].map(b=>b.presence_ref),y=p.filter(b=>v.indexOf(b.presence_ref)<0);n[d].unshift(...y)}a(d,p,g)}),this.map(u,(d,g)=>{let h=n[d];if(!h)return;const p=g.map(v=>v.presence_ref);h=h.filter(v=>p.indexOf(v.presence_ref)<0),n[d]=h,o(d,h,g),h.length===0&&delete n[d]}),n}static map(n,i){return Object.getOwnPropertyNames(n).map(a=>i(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((i,a)=>{const o=n[a];return"metas"in o?i[a]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):i[a]=o,i},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(dv||(dv={}));var Qs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Qs||(Qs={}));var Wn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wn||(Wn={}));class ja{constructor(n,i={config:{}},a){var o,c;if(this.topic=n,this.params=i,this.socket=a,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new qf(this,pn.join,this.params,this.timeout),this.rejoinTimer=new Vw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Zs(this),this.broadcastEndpointURL=Gw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,i=this.timeout){var a,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:u,presence:d,private:g}}=this.params,h=(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&o!==void 0?o:[],p=!!this.bindings[Qs.PRESENCE]&&this.bindings[Qs.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,v={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:g};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(b=>n?.(Wn.CHANNEL_ERROR,b)),this._onClose(()=>n?.(Wn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:b})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){n?.(Wn.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,T=(E=_?.length)!==null&&E!==void 0?E:0,C=[];for(let k=0;k<T;k++){const x=_[k],{filter:{event:A,schema:L,table:j,filter:U}}=x,V=b&&b[k];if(V&&V.event===A&&ja.isFilterValueEqual(V.schema,L)&&ja.isFilterValueEqual(V.table,j)&&ja.isFilterValueEqual(V.filter,U))C.push(Object.assign(Object.assign({},x),{id:V.id}));else{this.unsubscribe(),this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,n&&n(Wn.SUBSCRIBED);return}}).receive("error",b=>{this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{n?.(Wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,i={}){return await this.send({type:"presence",event:"track",payload:n},i.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,i,a){return this.state===ht.joined&&n===Qs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,i,a)}async httpSend(n,i,a={}){var o;if(i==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let g=d.statusText;try{const h=await d.json();g=h.error||h.message||g}catch{}return Promise.reject(new Error(g))}async send(n,i={}){var a,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=n,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,d,g;const h=this._push(n.type,n,i.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),h.receive("ok",()=>c("ok")),h.receive("error",()=>c("error")),h.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ht.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(o=>{a=new qf(this,pn.leave,{},n),a.receive("ok",()=>{i(),o("ok")}).receive("timeout",()=>{i(),o("timed out")}).receive("error",()=>{o("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(n,i,a){const o=new AbortController,c=setTimeout(()=>o.abort(),a),u=await this.socket.fetch(n,Object.assign(Object.assign({},i),{signal:o.signal}));return clearTimeout(c),u}_push(n,i,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new qf(this,n,i,a);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>MR){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(n,i,a){return i}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,i,a){var o,c;const u=n.toLocaleLowerCase(),{close:d,error:g,leave:h,join:p}=pn;if(a&&[d,g,h,p].indexOf(u)>=0&&a!==this._joinRef())return;let y=this._onMessage(u,i,a);if(i&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var E,_,T;return((E=b.filter)===null||E===void 0?void 0:E.event)==="*"||((T=(_=b.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(b=>b.callback(y,a)):(c=this.bindings[u])===null||c===void 0||c.filter(b=>{var E,_,T,C,k,x;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const A=b.id,L=(E=b.filter)===null||E===void 0?void 0:E.event;return A&&((_=i.ids)===null||_===void 0?void 0:_.includes(A))&&(L==="*"||L?.toLocaleLowerCase()===((T=i.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const A=(k=(C=b?.filter)===null||C===void 0?void 0:C.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return A==="*"||A===((x=i?.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof y=="object"&&"ids"in y){const E=y.data,{schema:_,table:T,commit_timestamp:C,type:k,errors:x}=E;y=Object.assign(Object.assign({},{schema:_,table:T,commit_timestamp:C,eventType:k,new:{},old:{},errors:x}),this._getPayloadRecords(E))}b.callback(y,a)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,i,a){const o=n.toLocaleLowerCase(),c={type:o,filter:i,callback:a};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,i){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&ja.isEqual(o.filter,i))})),this}static isEqual(n,i){if(Object.keys(n).length!==Object.keys(i).length)return!1;for(const a in n)if(n[a]!==i[a])return!1;return!0}static isFilterValueEqual(n,i){return(n??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(pn.close,{},n)}_onError(n){this._on(pn.error,{},i=>n(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const i={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(i.new=cv(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(i.old=cv(n.columns,n.old_record)),i}}const Vf=()=>{},ac={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BR=[1e3,2e3,5e3,1e4],IR=1e4,qR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class VR{constructor(n,i){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fh,this.transport=null,this.heartbeatIntervalMs=ac.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vf,this.ref=0,this.reconnectTimer=null,this.vsn=lv,this.logger=Vf,this.conn=null,this.sendBuffer=[],this.serializer=new jR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((a=i?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${n}/${hh.websocket}`,this.httpEndpoint=Gw(n),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=AR.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const i=n.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const i=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const n=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,i,a){this.logger(n,i,a)}connectionState(){switch(this.conn&&this.conn.readyState){case $r.connecting:return yi.Connecting;case $r.open:return yi.Open;case $r.closing:return yi.Closing;default:return yi.Closed}}isConnected(){return this.connectionState()===yi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,i={config:{}}){const a=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===a);if(o)return o;{const c=new ja(`realtime:${n}`,i,this);return this.channels.push(c),c}}push(n){const{topic:i,event:a,payload:o,ref:c}=n,u=()=>{this.encode(n,d=>{var g;(g=this.conn)===null||g===void 0||g.send(d)})};this.log("push",`${i} ${a} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(kR,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},ac.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let i=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${n}"`),i.unsubscribe())}_remove(n){this.channels=this.channels.filter(i=>i.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:o,payload:c,ref:u}=i,d=u?`(${u})`:"",g=c.status||"";this.log("receive",`${g} ${a} ${o} ${d}`.trim(),c),this.channels.filter(h=>h._isMember(a)).forEach(h=>h._trigger(o,c,u)),this._triggerStateCallbacks("message",i)})}_clearTimer(n){var i;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===$r.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$r.open||this.conn.readyState===$r.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var i;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(i){this.log("error","error in heartbeat callback",i)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(pn.error))}_appendParams(n,i){if(Object.keys(i).length===0)return n;const a=n.match(/\?/)?"&":"?",o=new URLSearchParams(i);return`${n}${a}${o}`}_workerObjectUrl(n){let i;if(n)i=n;else{const a=new Blob([qR],{type:"application/javascript"});i=URL.createObjectURL(a)}return i}_setConnectionState(n,i=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(n=null){let i,a=!1;if(n)i=n,a=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),i=this.accessTokenValue}else i=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const c={access_token:i,version:OR};i&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(pn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${n}`,i)})}_triggerStateCallbacks(n,i){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(i)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Vw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ac.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var i,a,o,c,u,d,g,h,p,v,y,b;switch(this.transport=(i=n?.transport)!==null&&i!==void 0?i:null,this.timeout=(a=n?.timeout)!==null&&a!==void 0?a:fh,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:ac.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=n?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=n?.heartbeatCallback)!==null&&d!==void 0?d:Vf,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:lv,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=n?.reconnectAfterMs)!==null&&h!==void 0?h:(E=>BR[E-1]||IR),this.vsn){case RR:this.encode=(p=n?.encode)!==null&&p!==void 0?p:((E,_)=>_(JSON.stringify(E))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:((E,_)=>_(JSON.parse(E)));break;case qw:this.encode=(y=n?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(b=n?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var co=class extends Error{constructor(e,n){super(e),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function PR(e,n,i){const a=new URL(n,e);if(i)for(const[o,c]of Object.entries(i))c!==void 0&&a.searchParams.set(o,c);return a.toString()}async function GR(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function YR(e){const n=e.fetchImpl??globalThis.fetch;return{async request({method:i,path:a,query:o,body:c,headers:u}){const d=PR(e.baseUrl,a,o),g=await GR(e.auth),h=await n(d,{method:i,headers:{...c?{"Content-Type":"application/json"}:{},...g,...u},body:c?JSON.stringify(c):void 0}),p=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),y=v&&p?JSON.parse(p):p;if(!h.ok){const b=v?y:void 0,E=b?.error;throw new co(E?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:E?.type,icebergCode:E?.code,details:b})}return{status:h.status,headers:h.headers,data:y}}}}function sc(e){return e.join("")}var XR=class{constructor(e,n=""){this.client=e,this.prefix=n}async listNamespaces(e){const n=e?{parent:sc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(e,n){const i={namespace:e.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sc(e.namespace)}`}),!0}catch(n){if(n instanceof co&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(e,n){try{return await this.createNamespace(e,n)}catch(i){if(i instanceof co&&i.status===409)return;throw i}}};function xa(e){return e.join("")}var KR=class{constructor(e,n="",i){this.client=e,this.prefix=n,this.accessDelegation=i}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables`})).data.identifiers}async createTable(e,n){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables`,body:n,headers:i})).data.metadata}async updateTable(e,n){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables/${e.name}`,body:n});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(e,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables/${e.name}`,headers:n})).data.metadata}async tableExists(e){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xa(e.namespace)}/tables/${e.name}`,headers:n}),!0}catch(i){if(i instanceof co&&i.status===404)return!1;throw i}}async createTableIfNotExists(e,n){try{return await this.createTable(e,n)}catch(i){if(i instanceof co&&i.status===409)return await this.loadTable({namespace:e.namespace,name:n.name});throw i}}},ZR=class{constructor(e){let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const i=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=YR({baseUrl:i,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new XR(this.client,n),this.tableOps=new KR(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,n){return this.namespaceOps.createNamespace(e,n)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,n){return this.tableOps.createTable(e,n)}async updateTable(e,n){return this.tableOps.updateTable(e,n)}async dropTable(e,n){await this.tableOps.dropTable(e,n)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,n){return this.namespaceOps.createNamespaceIfNotExists(e,n)}async createTableIfNotExists(e,n){return this.tableOps.createTableIfNotExists(e,n)}},Fc=class extends Error{constructor(e,n="storage",i,a){super(e),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=i,this.statusCode=a}};function Wc(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var oc=class extends Fc{constructor(e,n,i,a="storage"){super(e,a,n,i),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Yw=class extends Fc{constructor(e,n,i="storage"){super(e,i),this.name=i==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const QR=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),JR=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mh=e=>{if(Array.isArray(e))return e.map(i=>mh(i));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([i,a])=>{const o=i.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=mh(a)}),n},FR=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function uo(e){"@babel/helpers - typeof";return uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uo(e)}function WR(e,n){if(uo(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,n);if(uo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function ek(e){var n=WR(e,"string");return uo(n)=="symbol"?n:n+""}function tk(e,n,i){return(n=ek(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function fv(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,a)}return i}function we(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?fv(Object(i),!0).forEach(function(a){tk(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fv(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const hv=e=>{var n;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(n=e.error)===null||n===void 0?void 0:n.message)||JSON.stringify(e)},nk=async(e,n,i,a)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!i?.noResolveJson){const o=e,c=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const d=u?.statusCode||u?.code||c+"";n(new oc(hv(u),c,d,a))}).catch(()=>{if(a==="vectors"){const u=c+"";n(new oc(o.statusText||`HTTP ${c} error`,c,u,a))}else{const u=c+"";n(new oc(o.statusText||`HTTP ${c} error`,c,u,a))}});else{const u=c+"";n(new oc(o.statusText||`HTTP ${c} error`,c,u,a))}}else n(new Yw(hv(e),e,a))},rk=(e,n,i,a)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"||e==="HEAD"||!a?we(we({},o),i):(JR(a)?(o.headers=we({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(a)):o.body=a,n?.duplex&&(o.duplex=n.duplex),we(we({},o),i))};async function Vs(e,n,i,a,o,c,u){return new Promise((d,g)=>{e(i,rk(n,a,o,c)).then(h=>{if(!h.ok)throw h;if(a?.noResolveJson)return h;if(u==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>d(h)).catch(h=>nk(h,g,a,u))})}function Xw(e="storage"){return{get:async(n,i,a,o)=>Vs(n,"GET",i,a,o,void 0,e),post:async(n,i,a,o,c)=>Vs(n,"POST",i,o,c,a,e),put:async(n,i,a,o,c)=>Vs(n,"PUT",i,o,c,a,e),head:async(n,i,a,o)=>Vs(n,"HEAD",i,we(we({},a),{},{noResolveJson:!0}),o,void 0,e),remove:async(n,i,a,o,c)=>Vs(n,"DELETE",i,o,c,a,e)}}const ik=Xw("storage"),{get:fo,post:gn,put:ph,head:ak,remove:Ih}=ik,Qt=Xw("vectors");var Ga=class{constructor(e,n={},i,a="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.fetch=QR(i),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=we(we({},this.headers),{},{[e]:n}),this}async handleOperation(e){var n=this;try{return{data:await e(),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Wc(i))return{data:null,error:i};throw i}}},sk=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Wc(n))return{data:null,error:n};throw n}}};let Kw;Kw=Symbol.toStringTag;var ok=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Kw]="BlobDownloadBuilder",this.promise=null}asStream(){return new sk(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Wc(n))return{data:null,error:n};throw n}}};const lk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ck=class extends Ga{constructor(e,n={},i,a){super(e,n,a,"storage"),this.bucketId=i}async uploadOrUpdate(e,n,i,a){var o=this;return o.handleOperation(async()=>{let c;const u=we(we({},gv),a);let d=we(we({},o.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",o.encodeMetadata(g)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),g&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(g))):(c=i,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,g&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),a?.headers&&(d=we(we({},d),a.headers));const h=o._removeEmptyFolders(n),p=o._getFinalPath(h),v=await(e=="PUT"?ph:gn)(o.fetch,`${o.url}/object/${p}`,c,we({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{path:h,id:v.Id,fullPath:v.Key}})}async upload(e,n,i){return this.uploadOrUpdate("POST",e,n,i)}async uploadToSignedUrl(e,n,i,a){var o=this;const c=o._removeEmptyFolders(e),u=o._getFinalPath(c),d=new URL(o.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",n),o.handleOperation(async()=>{let g;const h=we({upsert:gv.upsert},a),p=we(we({},o.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",h.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",h.cacheControl)):(g=i,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:c,fullPath:(await ph(o.fetch,d.toString(),g,{headers:p})).Key}})}async createSignedUploadUrl(e,n){var i=this;return i.handleOperation(async()=>{let a=i._getFinalPath(e);const o=we({},i.headers);n?.upsert&&(o["x-upsert"]="true");const c=await gn(i.fetch,`${i.url}/object/upload/sign/${a}`,{},{headers:o}),u=new URL(i.url+c.url),d=u.searchParams.get("token");if(!d)throw new Fc("No token returned by API");return{signedUrl:u.toString(),path:e,token:d}})}async update(e,n,i){return this.uploadOrUpdate("PUT",e,n,i)}async move(e,n,i){var a=this;return a.handleOperation(async()=>await gn(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:a.headers}))}async copy(e,n,i){var a=this;return a.handleOperation(async()=>({path:(await gn(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(e,n,i){var a=this;return a.handleOperation(async()=>{let o=a._getFinalPath(e),c=await gn(a.fetch,`${a.url}/object/sign/${o}`,we({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:a.headers});const u=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{signedUrl:encodeURI(`${a.url}${c.signedURL}${u}`)}})}async createSignedUrls(e,n,i){var a=this;return a.handleOperation(async()=>{const o=await gn(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:n,paths:e},{headers:a.headers}),c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o.map(u=>we(we({},u),{},{signedUrl:u.signedURL?encodeURI(`${a.url}${u.signedURL}${c}`):null}))})}download(e,n,i){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"",u=this._getFinalPath(e),d=()=>fo(this.fetch,`${this.url}/${a}/${u}${c}`,{headers:this.headers,noResolveJson:!0},i);return new ok(d,this.shouldThrowOnError)}async info(e){var n=this;const i=n._getFinalPath(e);return n.handleOperation(async()=>mh(await fo(n.fetch,`${n.url}/object/info/${i}`,{headers:n.headers})))}async exists(e){var n=this;const i=n._getFinalPath(e);try{return await ak(n.fetch,`${n.url}/object/${i}`,{headers:n.headers}),{data:!0,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Wc(a)&&a instanceof Yw){const o=a.originalError;if([400,404].includes(o?.status))return{data:!1,error:a}}throw a}}getPublicUrl(e,n){const i=this._getFinalPath(e),a=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const c=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&a.push(u);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${d}`)}}}async remove(e){var n=this;return n.handleOperation(async()=>await Ih(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:e},{headers:n.headers}))}async list(e,n,i){var a=this;return a.handleOperation(async()=>{const o=we(we(we({},lk),n),{},{prefix:e||""});return await gn(a.fetch,`${a.url}/object/list/${a.bucketId}`,o,{headers:a.headers},i)})}async listV2(e,n){var i=this;return i.handleOperation(async()=>{const a=we({},e);return await gn(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,a,{headers:i.headers},n)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}};const uk="2.97.0",Eo={"X-Client-Info":`storage-js/${uk}`};var dk=class extends Ga{constructor(e,n={},i,a){const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),u=we(we({},Eo),n);super(c,u,i,"storage")}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const i=n.listBucketOptionsToQueryString(e);return await fo(n.fetch,`${n.url}/bucket${i}`,{headers:n.headers})})}async getBucket(e){var n=this;return n.handleOperation(async()=>await fo(n.fetch,`${n.url}/bucket/${e}`,{headers:n.headers}))}async createBucket(e,n={public:!1}){var i=this;return i.handleOperation(async()=>await gn(i.fetch,`${i.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:i.headers}))}async updateBucket(e,n){var i=this;return i.handleOperation(async()=>await ph(i.fetch,`${i.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:i.headers}))}async emptyBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket/${e}/empty`,{},{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Ih(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},fk=class extends Ga{constructor(e,n={},i){const a=e.replace(/\/$/,""),o=we(we({},Eo),n);super(a,o,i,"storage")}async createBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket`,{name:e},{headers:n.headers}))}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const i=new URLSearchParams;e?.limit!==void 0&&i.set("limit",e.limit.toString()),e?.offset!==void 0&&i.set("offset",e.offset.toString()),e?.sortColumn&&i.set("sortColumn",e.sortColumn),e?.sortOrder&&i.set("sortOrder",e.sortOrder),e?.search&&i.set("search",e.search);const a=i.toString(),o=a?`${n.url}/bucket?${a}`:`${n.url}/bucket`;return await fo(n.fetch,o,{headers:n.headers})})}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Ih(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}from(e){var n=this;if(!FR(e))throw new Fc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new ZR({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(i,{get(o,c){const u=o[c];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(g){if(a)throw g;return{data:null,error:g}}}}})}},hk=class extends Ga{constructor(e,n={},i){const a=e.replace(/\/$/,""),o=we(we({},Eo),{},{"Content-Type":"application/json"},n);super(a,o,i,"vectors")}async createIndex(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateIndex`,e,{headers:n.headers})||{})}async getIndex(e,n){var i=this;return i.handleOperation(async()=>await Qt.post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:i.headers}))}async listIndexes(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListIndexes`,e,{headers:n.headers}))}async deleteIndex(e,n){var i=this;return i.handleOperation(async()=>await Qt.post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:i.headers})||{})}},gk=class extends Ga{constructor(e,n={},i){const a=e.replace(/\/$/,""),o=we(we({},Eo),{},{"Content-Type":"application/json"},n);super(a,o,i,"vectors")}async putVectors(e){var n=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/PutVectors`,e,{headers:n.headers})||{})}async getVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectors`,e,{headers:n.headers}))}async listVectors(e){var n=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectors`,e,{headers:n.headers}))}async queryVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/QueryVectors`,e,{headers:n.headers}))}async deleteVectors(e){var n=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectors`,e,{headers:n.headers})||{})}},mk=class extends Ga{constructor(e,n={},i){const a=e.replace(/\/$/,""),o=we(we({},Eo),{},{"Content-Type":"application/json"},n);super(a,o,i,"vectors")}async createBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}async getBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:e},{headers:n.headers}))}async listBuckets(e={}){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectorBuckets`,e,{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}},pk=class extends mk{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new yk(this.url,this.headers,e,this.fetch)}async createBucket(e){var n=()=>super.createBucket,i=this;return n().call(i,e)}async getBucket(e){var n=()=>super.getBucket,i=this;return n().call(i,e)}async listBuckets(e={}){var n=()=>super.listBuckets,i=this;return n().call(i,e)}async deleteBucket(e){var n=()=>super.deleteBucket,i=this;return n().call(i,e)}},yk=class extends hk{constructor(e,n,i,a){super(e,n,a),this.vectorBucketName=i}async createIndex(e){var n=()=>super.createIndex,i=this;return n().call(i,we(we({},e),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(e={}){var n=()=>super.listIndexes,i=this;return n().call(i,we(we({},e),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(e){var n=()=>super.getIndex,i=this;return n().call(i,i.vectorBucketName,e)}async deleteIndex(e){var n=()=>super.deleteIndex,i=this;return n().call(i,i.vectorBucketName,e)}index(e){return new vk(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},vk=class extends gk{constructor(e,n,i,a,o){super(e,n,o),this.vectorBucketName=i,this.indexName=a}async putVectors(e){var n=()=>super.putVectors,i=this;return n().call(i,we(we({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(e){var n=()=>super.getVectors,i=this;return n().call(i,we(we({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(e={}){var n=()=>super.listVectors,i=this;return n().call(i,we(we({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(e){var n=()=>super.queryVectors,i=this;return n().call(i,we(we({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(e){var n=()=>super.deleteVectors,i=this;return n().call(i,we(we({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},bk=class extends dk{constructor(e,n={},i,a){super(e,n,i,a)}from(e){return new ck(this.url,this.headers,e,this.fetch)}get vectors(){return new pk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fk(this.url+"/iceberg",this.headers,this.fetch)}};const Zw="2.97.0",Oa=30*1e3,yh=3,Pf=yh*Oa,wk="http://localhost:9999",xk="supabase.auth.token",_k={"X-Client-Info":`gotrue-js/${Zw}`},vh="X-Supabase-Api-Version",Qw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Sk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ek=600*1e3;class ho extends Error{constructor(n,i,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=a}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Tk extends ho{constructor(n,i,a){super(n,i,a),this.name="AuthApiError",this.status=i,this.code=a}}function Ck(e){return me(e)&&e.name==="AuthApiError"}class vi extends ho{constructor(n,i){super(n),this.name="AuthUnknownError",this.originalError=i}}class rr extends ho{constructor(n,i,a,o){super(n,a,o),this.name=i,this.status=a}}class Kt extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gf(e){return me(e)&&e.name==="AuthSessionMissingError"}class _a extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lc extends rr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class cc extends rr{constructor(n,i=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ak(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class mv extends rr{constructor(n,i=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nk extends rr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bh extends rr{constructor(n,i){super(n,"AuthRetryableFetchError",i,void 0)}}function Yf(e){return me(e)&&e.name==="AuthRetryableFetchError"}class pv extends rr{constructor(n,i,a){super(n,"AuthWeakPasswordError",i,"weak_password"),this.reasons=a}}class wh extends rr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yv=` 	
\r=`.split(""),Ok=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<yv.length;n+=1)e[yv[n].charCodeAt(0)]=-2;for(let n=0;n<Mc.length;n+=1)e[Mc[n].charCodeAt(0)]=n;return e})();function vv(e,n,i){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;i(Mc[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;i(Mc[a]),n.queuedBits-=6}}function Jw(e,n,i){const a=Ok[e];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)i(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function bv(e){const n=[],i=u=>{n.push(String.fromCodePoint(u))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{Mk(u,a,i)};for(let u=0;u<e.length;u+=1)Jw(e.charCodeAt(u),o,c);return n.join("")}function Rk(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kk(e,n){for(let i=0;i<e.length;i+=1){let a=e.charCodeAt(i);if(a>55295&&a<=56319){const o=(a-55296)*1024&65535;a=(e.charCodeAt(i+1)-56320&65535|o)+65536,i+=1}Rk(a,n)}}function Mk(e,n,i){if(n.utf8seq===0){if(e<=127){i(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&i(n.codepoint)}}function Ua(e){const n=[],i={queue:0,queuedBits:0},a=o=>{n.push(o)};for(let o=0;o<e.length;o+=1)Jw(e.charCodeAt(o),i,a);return new Uint8Array(n)}function jk(e){const n=[];return kk(e,i=>n.push(i)),new Uint8Array(n)}function wi(e){const n=[],i={queue:0,queuedBits:0},a=o=>{n.push(o)};return e.forEach(o=>vv(o,i,a)),vv(null,i,a),n.join("")}function Dk(e){return Math.round(Date.now()/1e3)+e}function zk(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",fi={tested:!1,writable:!1},Fw=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fi.tested)return fi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fi.tested=!0,fi.writable=!0}catch{fi.tested=!0,fi.writable=!1}return fi.writable};function Uk(e){const n={},i=new URL(e);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return i.searchParams.forEach((a,o)=>{n[o]=a}),n}const Ww=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),$k=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ra=async(e,n,i)=>{await e.setItem(n,JSON.stringify(i))},hi=async(e,n)=>{const i=await e.getItem(n);if(!i)return null;try{return JSON.parse(i)}catch{return i}},_t=async(e,n)=>{await e.removeItem(n)};class eu{constructor(){this.promise=new eu.promiseConstructor((n,i)=>{this.resolve=n,this.reject=i})}}eu.promiseConstructor=Promise;function uc(e){const n=e.split(".");if(n.length!==3)throw new wh("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!Sk.test(n[a]))throw new wh("JWT not in base64url format");return{header:JSON.parse(bv(n[0])),payload:JSON.parse(bv(n[1])),signature:Ua(n[2]),raw:{header:n[0],payload:n[1]}}}async function Lk(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function Hk(e,n){return new Promise((a,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await e(c);if(!n(c,null,u)){a(u);return}}catch(u){if(!n(c,u)){o(u);return}}})()})}function Bk(e){return("0"+e.toString(16)).substr(-2)}function Ik(){const n=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=i.length;let o="";for(let c=0;c<56;c++)o+=i.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(n),Array.from(n,Bk).join("")}async function qk(e){const i=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",i),o=new Uint8Array(a);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function Vk(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const i=await qk(e);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(e,n,i=!1){const a=Ik();let o=a;i&&(o+="/PASSWORD_RECOVERY"),await Ra(e,`${n}-code-verifier`,o);const c=await Vk(a);return[c,a===c?"plain":"s256"]}const Pk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Gk(e){const n=e.headers.get(vh);if(!n||!n.match(Pk))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Yk(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function Xk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ea(e){if(!Kk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xf(){const e={};return new Proxy(e,{get:(n,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zk(e,n){return new Proxy(e,{get:(i,a,o)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,a,o)}return!n.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(i,a,o)}})}function wv(e){return JSON.parse(JSON.stringify(e))}const mi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qk=[502,503,504];async function xv(e){var n;if(!$k(e))throw new bh(mi(e),0);if(Qk.includes(e.status))throw new bh(mi(e),e.status);let i;try{i=await e.json()}catch(c){throw new vi(mi(c),c)}let a;const o=Gk(e);if(o&&o.getTime()>=Qw["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?a=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(a=i.error_code),a){if(a==="weak_password")throw new pv(mi(i),e.status,((n=i.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new Kt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new pv(mi(i),e.status,i.weak_password.reasons);throw new Tk(mi(i),e.status||500,a)}const Jk=(e,n,i,a)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),i))};async function xe(e,n,i,a){var o;const c=Object.assign({},a?.headers);c[vh]||(c[vh]=Qw["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const u=(o=a?.query)!==null&&o!==void 0?o:{};a?.redirectTo&&(u.redirect_to=a.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await Fk(e,n,i+d,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(g):{data:Object.assign({},g),error:null}}async function Fk(e,n,i,a,o,c){const u=Jk(n,a,o,c);let d;try{d=await e(i,Object.assign({},u))}catch(g){throw console.error(g),new bh(mi(g),0)}if(d.ok||await xv(d),a?.noResolveJson)return d;try{return await d.json()}catch(g){await xv(g)}}function hn(e){var n;let i=null;tM(e)&&(i=Object.assign({},e),e.expires_at||(i.expires_at=Dk(e.expires_in)));const a=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:i,user:a},error:null}}function _v(e){const n=hn(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0)&&(n.data.weak_password=e.weak_password),n}function Hr(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function Wk(e){return{data:e,error:null}}function eM(e){const{action_link:n,email_otp:i,hashed_token:a,redirect_to:o,verification_type:c}=e,u=Jc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:n,email_otp:i,hashed_token:a,redirect_to:o,verification_type:c},g=Object.assign({},u);return{data:{properties:d,user:g},error:null}}function Sv(e){return e}function tM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Kf=["global","local","others"];class nM{constructor({url:n="",headers:i={},fetch:a}){this.url=n,this.headers=i,this.fetch=Ww(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,i=Kf[0]){if(Kf.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kf.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,i={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Hr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:i}=n,a=Jc(n,["options"]),o=Object.assign(Object.assign({},a),i);return"newEmail"in a&&(o.new_email=a?.newEmail,delete o.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:eM,redirectTo:i?.redirectTo})}catch(i){if(me(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Hr})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async listUsers(n){var i,a,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Sv});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(E=>{const _=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);h[`${T}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{users:[]},error:h};throw h}}async getUserById(n){Ea(n);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Hr})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}}async updateUserById(n,i){Ea(n);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:i,headers:this.headers,xform:Hr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,i=!1){Ea(n);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:i},xform:Hr})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){Ea(n.userId);try{const{data:i,error:a}=await xe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:i,error:a}}catch(i){if(me(i))return{data:null,error:i};throw i}}async _deleteFactor(n){Ea(n.userId),Ea(n.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}async _listOAuthClients(n){var i,a,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Sv});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(E=>{const _=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);h[`${T}Page`]=_}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(me(i))return{data:null,error:i};throw i}}async _getOAuthClient(n){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(me(i))return{data:null,error:i};throw i}}async _updateOAuthClient(n,i){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:i,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(n){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(me(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(me(i))return{data:null,error:i};throw i}}}function Ev(e={}){return{getItem:n=>e[n]||null,setItem:(n,i)=>{e[n]=i},removeItem:n=>{delete e[n]}}}const Ta={debug:!!(globalThis&&Fw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ex extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Tv extends ex{}async function rM(e,n,i){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const a=new globalThis.AbortController;n>0&&setTimeout(()=>{a.abort(),Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await i()}finally{Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(n===0)throw Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Tv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ta.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}})}catch(o){throw o?.name==="AbortError"?new Tv(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${n}ms`):o}}function iM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tx(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function aM(e){return parseInt(e,16)}function sM(e){const n=new TextEncoder().encode(e);return"0x"+Array.from(n,a=>a.toString(16).padStart(2,"0")).join("")}function oM(e){var n;const{chainId:i,domain:a,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:d,requestId:g,resources:h,scheme:p,uri:v,version:y}=e;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((n=e.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=tx(e.address),E=p?`${p}://${a}`:a,_=e.statement?`${e.statement}
`:"",T=`${E} wants you to sign in with your Ethereum account:
${b}

${_}`;let C=`URI: ${v}
Version: ${y}
Chain ID: ${i}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),d&&(C+=`
Not Before: ${d.toISOString()}`),g&&(C+=`
Request ID: ${g}`),h){let k=`
Resources:`;for(const x of h){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);k+=`
- ${x}`}C+=k}return`${T}
${C}`}class ct extends Error{constructor({message:n,code:i,cause:a,name:o}){var c;super(n,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=o??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=i}}class jc extends ct{constructor(n,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:n}),this.name="WebAuthnUnknownError",this.originalError=i}}function lM({error:e,options:n}){var i,a,o;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((i=c.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(n.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(nx(u)){if(c.rp.id!==u)return new ct({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function cM({error:e,options:n}){const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(nx(a)){if(i.rpId!==a)return new ct({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class uM{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const dM=new uM;function fM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:n,user:i,excludeCredentials:a}=e,o=Jc(e,["challenge","user","excludeCredentials"]),c=Ua(n).buffer,u=Object.assign(Object.assign({},i),{id:Ua(i.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:c,user:u});if(a&&a.length>0){d.excludeCredentials=new Array(a.length);for(let g=0;g<a.length;g++){const h=a[g];d.excludeCredentials[g]=Object.assign(Object.assign({},h),{id:Ua(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function hM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:n,allowCredentials:i}=e,a=Jc(e,["challenge","allowCredentials"]),o=Ua(n).buffer,c=Object.assign(Object.assign({},a),{challenge:o});if(i&&i.length>0){c.allowCredentials=new Array(i.length);for(let u=0;u<i.length;u++){const d=i[u];c.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Ua(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function gM(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const i=e;return{id:e.id,rawId:e.id,response:{attestationObject:wi(new Uint8Array(e.response.attestationObject)),clientDataJSON:wi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function mM(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const i=e,a=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:wi(new Uint8Array(o.authenticatorData)),clientDataJSON:wi(new Uint8Array(o.clientDataJSON)),signature:wi(new Uint8Array(o.signature)),userHandle:o.userHandle?wi(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function nx(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Cv(){var e,n;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function pM(e){try{const n=await navigator.credentials.create(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new jc("Browser returned unexpected credential type",n)}:{data:null,error:new jc("Empty credential response",n)}}catch(n){return{data:null,error:lM({error:n,options:e})}}}async function yM(e){try{const n=await navigator.credentials.get(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new jc("Browser returned unexpected credential type",n)}:{data:null,error:new jc("Empty credential response",n)}}catch(n){return{data:null,error:cM({error:n,options:e})}}}const vM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Dc(...e){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),i=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),a={};for(const o of e)if(o)for(const c in o){const u=o[c];if(u!==void 0)if(Array.isArray(u))a[c]=u;else if(i(u))a[c]=u;else if(n(u)){const d=a[c];n(d)?a[c]=Dc(d,u):a[c]=Dc(u)}else a[c]=u}return a}function wM(e,n){return Dc(vM,e,n||{})}function xM(e,n){return Dc(bM,e,n||{})}class _M{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:i,friendlyName:a,signal:o},c){var u;try{const{data:d,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:i});if(!d)return{data:null,error:g};const h=o??dM.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;if(!p.name){const v=a;if(v)p.name=`${p.id}:${v}`;else{const b=(await this.client.getUser()).data.user,E=((u=b?.user_metadata)===null||u===void 0?void 0:u.name)||b?.email||b?.id||"User";p.name=`${p.id}:${E}`}}p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=wM(d.webauthn.credential_options.publicKey,c?.create),{data:v,error:y}=await pM({publicKey:p,signal:h});return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const p=xM(d.webauthn.credential_options.publicKey,c?.request),{data:v,error:y}=await yM(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(d){return me(d)?{data:null,error:d}:{data:null,error:new vi("Unexpected error in challenge",d)}}}async _verify({challengeId:n,factorId:i,webauthn:a}){return this.client.mfa.verify({factorId:i,challengeId:n,webauthn:a})}async _authenticate({factorId:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!i)return{data:null,error:new ho("rpId is required for WebAuthn authentication")};try{if(!Cv())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:n,webauthn:{rpId:i,rpOrigins:a},signal:o},{request:c});if(!u)return{data:null,error:d};const{webauthn:g}=u;return this._verify({factorId:n,challengeId:u.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:a,credential_response:g.credential_response}})}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new vi("Unexpected error in authenticate",u)}}}async _register({friendlyName:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!i)return{data:null,error:new ho("rpId is required for WebAuthn registration")};try{if(!Cv())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:n});if(!u)return await this.client.mfa.listFactors().then(p=>{var v;return(v=p.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===n&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:d};const{data:g,error:h}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:i,rpOrigins:a},signal:o},{create:c});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:a,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:h}}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new vi("Unexpected error in register",u)}}}}iM();const SM={url:wk,storageKey:xk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_k,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Av(e,n,i){return await i()}const Ca={};class go{get jwks(){var n,i;return(i=(n=Ca[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(n){Ca[this.storageKey]=Object.assign(Object.assign({},Ca[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,i;return(i=(n=Ca[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ca[this.storageKey]=Object.assign(Object.assign({},Ca[this.storageKey]),{cachedAt:n})}constructor(n){var i,a,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},SM),n);if(this.storageKey=c.storageKey,this.instanceID=(i=go.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,go.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&St()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new nM({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Ww(c.fetch),this.lock=c.lock||Av,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&St()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=rM:this.lock=Av,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _M(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Fw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ev(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Ev(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}c.skipAutoInitialize||this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zw}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let i={},a="none";if(St()&&(i=Uk(window.location.href),this._isImplicitGrantCallback(i)?a="implicit":await this._isPKCECallback(i)&&(a="pkce")),St()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:c}=await this._getSessionFromURL(i,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Ak(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return me(i)?this._returnResult({error:i}):this._returnResult({error:new vi("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var i,a,o;try{const c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(i=n?.options)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:hn}),{data:u,error:d}=c;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var i,a,o;try{let c;if("email"in n){const{email:p,password:v,options:y}=n;let b=null,E=null;this.flowType==="pkce"&&([b,E]=await Sa(this.storage,this.storageKey)),c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:v,data:(i=y?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:E},xform:hn})}else if("phone"in n){const{phone:p,password:v,options:y}=n;c=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(a=y?.data)!==null&&a!==void 0?a:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:hn})}else throw new lc("You must provide either an email or phone number and a password");const{data:u,error:d}=c;if(d||!u)return await _t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let i;if("email"in n){const{email:c,password:u,options:d}=n;i=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_v})}else if("phone"in n){const{phone:c,password:u,options:d}=n;i=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_v})}else throw new lc("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!a||!a.session||!a.user){const c=new _a;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(i){if(me(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(n){var i,a,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(i=n.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:i}=n;switch(i){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(n){var i,a,o,c,u,d,g,h,p,v,y;let b,E;if("message"in n)b=n.message,E=n.signature;else{const{chain:_,wallet:T,statement:C,options:k}=n;let x;if(St())if(typeof T=="object")x=T;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")x=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=T}const A=new URL((i=k?.url)!==null&&i!==void 0?i:window.location.href),L=await x.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=tx(L[0]);let U=(a=k?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!U){const Z=await x.request({method:"eth_chainId"});U=aM(Z)}const V={domain:A.host,address:j,statement:C,uri:A.href,version:"1",chainId:U,nonce:(o=k?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=k?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=k?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(g=k?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(h=k?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=k?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=oM(V),E=await x.request({method:"personal_sign",params:[sM(b),j]})}try{const{data:_,error:T}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:E},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=n.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:hn});if(T)throw T;if(!_||!_.session||!_.user){const C=new _a;return this._returnResult({data:{user:null,session:null},error:C})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:T})}catch(_){if(me(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(n){var i,a,o,c,u,d,g,h,p,v,y,b;let E,_;if("message"in n)E=n.message,_=n.signature;else{const{chain:T,wallet:C,statement:k,options:x}=n;let A;if(St())if(typeof C=="object")A=C;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))A=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}const L=new URL((i=x?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in A&&A.signIn){const j=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),k?{statement:k}:null));let U;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")U=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)U=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)E=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),_=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${L.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(o=(a=x?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=x?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((u=x?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((d=x?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((g=x?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((h=x?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((v=(p=x?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",...x.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const j=await A.signMessage(new TextEncoder().encode(E),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=j}}try{const{data:T,error:C}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:wi(_)},!((y=n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:hn});if(C)throw C;if(!T||!T.session||!T.user){const k=new _a;return this._returnResult({data:{user:null,session:null},error:k})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:C})}catch(T){if(me(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(n){const i=await hi(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(i??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Nk;const{data:c,error:u}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:hn});if(await _t(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const d=new _a;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:i,provider:a,token:o,access_token:c,nonce:u}=n,d=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:hn}),{data:g,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g||!g.session||!g.user){const p=new _a;return this._returnResult({data:{user:null,session:null},error:p})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:h})}catch(i){if(me(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(n){var i,a,o,c,u;try{if("email"in n){const{email:d,options:g}=n;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Sa(this.storage,this.storageKey));const{error:v}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(i=g?.data)!==null&&i!==void 0?i:{},create_user:(a=g?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in n){const{phone:d,options:g}=n,{data:h,error:p}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new lc("You must provide either an email or phone number.")}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(n){var i,a;try{let o,c;"options"in n&&(o=(i=n.options)===null||i===void 0?void 0:i.redirectTo,c=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:u,error:d}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:hn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,h=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(o){if(me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var i,a,o,c,u;try{let d=null,g=null;this.flowType==="pkce"&&([d,g]=await Sa(this.storage,this.storageKey));const h=await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(i=n.options)===null||i===void 0?void 0:i.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:g}),headers:this.headers,xform:Wk});return!((c=h.data)===null||c===void 0)&&c.url&&St()&&!(!((u=n.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)throw a;if(!i)throw new Kt;const{error:o}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const i=`${this.url}/resend`;if("email"in n){const{email:a,type:o,options:c}=n,{error:u}=await xe(this.fetch,"POST",i,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in n){const{phone:a,type:o,options:c}=n,{data:u,error:d}=await xe(this.fetch,"POST",i,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new lc("You must provide either an email or phone number and a type")}catch(i){if(me(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(n,i){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await i()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=i();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await n(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const i=await hi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?n=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<Pf:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const u=await hi(this.userStorage,this.storageKey+"-user");u?.user?n.user=u.user:n.user=Xf()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};n.user=Zk(n.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(n){try{return n?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Hr}):await this._useSession(async i=>{var a,o,c;const{data:u,error:d}=i;if(d)throw d;return!(!((a=u.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kt}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Hr})})}catch(i){if(me(i))return Gf(i)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(n,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,i))}async _updateUser(n,i={}){try{return await this._useSession(async a=>{const{data:o,error:c}=a;if(c)throw c;if(!o.session)throw new Kt;const u=o.session;let d=null,g=null;this.flowType==="pkce"&&n.email!=null&&([d,g]=await Sa(this.storage,this.storageKey));const{data:h,error:p}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:d,code_challenge_method:g}),jwt:u.access_token,xform:Hr});if(p)throw p;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(a){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Kt;const i=Date.now()/1e3;let a=i,o=!0,c=null;const{payload:u}=uc(n.access_token);if(u.exp&&(a=u.exp,o=a<=i),o){const{data:d,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:g}=await this._getUser(n.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});c={access_token:n.access_token,refresh_token:n.refresh_token,user:d.user,token_type:"bearer",expires_in:a-i,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(i){if(me(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async i=>{var a;if(!n){const{data:u,error:d}=i;if(d)throw d;n=(a=u.session)!==null&&a!==void 0?a:void 0}if(!n?.refresh_token)throw new Kt;const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(me(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(n,i){try{if(!St())throw new cc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new cc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new mv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cc("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new mv("No code detected.");const{data:k,error:x}=await this._exchangeCodeForSession(n.code);if(x)throw x;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:d,expires_at:g,token_type:h}=n;if(!c||!d||!u||!h)throw new cc("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(d);let y=p+v;g&&(y=parseInt(g));const b=y-p;b*1e3<=Oa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const E=y-v;p-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,y,p):p-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,y,p);const{data:_,error:T}=await this._getUser(c);if(T)throw T;const C={provider_token:a,provider_refresh_token:o,access_token:c,expires_in:v,expires_at:y,refresh_token:u,token_type:h,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:n.type},error:null})}catch(a){if(me(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const i=await hi(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&i)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async i=>{var a;const{data:o,error:c}=i;if(c&&!Gf(c))return this._returnResult({error:c});const u=(a=o.session)===null||a===void 0?void 0:a.access_token;if(u){const{error:d}=await this.admin.signOut(u,n);if(d&&!(Ck(d)&&(d.status===404||d.status===401||d.status===403)||Gf(d)))return this._returnResult({error:d})}return n!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const i=zk(),a={id:i,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async i=>{var a,o;try{const{data:{session:c},error:u}=i;if(u)throw u;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,i={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await Sa(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:i,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(n=i.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var i;try{const{data:a,error:o}=await this._useSession(async c=>{var u,d,g,h,p;const{data:v,error:y}=c;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(u=n.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=n.options)===null||d===void 0?void 0:d.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return St()&&!(!((i=n.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:n.provider,url:a?.url},error:null})}catch(a){if(me(a))return this._returnResult({data:{provider:n.provider,url:null},error:a});throw a}}async linkIdentityIdToken(n){return await this._useSession(async i=>{var a;try{const{error:o,data:{session:c}}=i;if(o)throw o;const{options:u,provider:d,token:g,access_token:h,nonce:p}=n,v=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:d,id_token:g,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hn}),{data:y,error:b}=v;return b?this._returnResult({data:{user:null,session:null},error:b}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new _a}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:b}))}catch(o){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async i=>{var a,o;const{data:c,error:u}=i;if(u)throw u;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(n){const i=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(i,"begin");try{const a=Date.now();return await Hk(async o=>(o>0&&await Lk(200*Math.pow(2,o-1)),this._debug(i,"refreshing attempt",o),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:hn})),(o,c)=>{const u=200*Math.pow(2,o);return c&&Yf(c)&&Date.now()+u-a<Oa})}catch(a){if(this._debug(i,"error",a),me(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(i,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,i){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",i,"url",a),St()&&!i.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,i;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=await hi(this.storage,this.storageKey);if(o&&this.userStorage){let u=await hi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Ra(this.userStorage,this.storageKey+"-user",u)),o.user=(n=u?.user)!==null&&n!==void 0?n:Xf()}else if(o&&!o.user&&!o.user){const u=await hi(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await _t(this.storage,this.storageKey+"-user"),await Ra(this.storage,this.storageKey,o)):o.user=Xf()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&await this._removeSession();return}const c=((i=o.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Pf;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${Pf}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Yf(u)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(a,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o),console.error(o);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var i,a;if(!n)throw new Kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new eu;const{data:c,error:u}=await this._refreshAccessToken(n);if(u)throw u;if(!c.session)throw new Kt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(o,"error",c),me(c)){const u={data:null,error:c};return Yf(c)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(u),u}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,i,a=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",i,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:i});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(n,i)}catch(g){c.push(g)}});if(await Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await _t(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},n),a=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&i.user&&await Ra(this.userStorage,this.storageKey+"-user",{user:i.user});const o=Object.assign({},i);delete o.user;const c=wv(o);await Ra(this.storage,this.storageKey,c)}else{const o=wv(i);await Ra(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Oa);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async i=>{const{data:{session:a}}=i;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-n)/Oa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Oa}ms, refresh threshold is ${yh} ticks`),o<=yh&&await this._callRefreshToken(a.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof ex)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const i=`#_onVisibilityChanged(${n})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,i,a){const o=[`provider=${encodeURIComponent(i)}`];if(a?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,u]=await Sa(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);o.push(c.toString())}return a?.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async i=>{var a;const{data:o,error:c}=i;return c?this._returnResult({data:null,error:c}):await xe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token})})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(n){try{return await this._useSession(async i=>{var a,o;const{data:c,error:u}=i;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:h}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return h?this._returnResult({data:null,error:h}):(n.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var a;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?gM(n.webauthn.credential_response):mM(n.webauthn.credential_response)})}:{code:n.code}),{data:d,error:g}=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:u,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:g}))})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var a;const{data:o,error:c}=i;if(c)return this._returnResult({data:null,error:c});const u=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:fM(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:hM(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(n){const{data:i,error:a}=await this._challenge({factorId:n.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:n.factorId,challengeId:i.id,code:n.code})}async _listFactors(){var n;const{data:{user:i},error:a}=await this.getUser();if(a)return{data:null,error:a};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=i?.factors)!==null&&n!==void 0?n:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var i,a,o,c;if(n)try{const{payload:b}=uc(n);let E=null;b.aal&&(E=b.aal);let _=E;const{data:{user:T},error:C}=await this.getUser(n);if(C)return this._returnResult({data:null,error:C});((a=(i=T?.factors)===null||i===void 0?void 0:i.filter(A=>A.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(_="aal2");const x=b.amr||[];return{data:{currentLevel:E,nextLevel:_,currentAuthenticationMethods:x},error:null}}catch(b){if(me(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=uc(u.access_token);let h=null;g.aal&&(h=g.aal);let p=h;((c=(o=u.user.factors)===null||o===void 0?void 0:o.filter(b=>b.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(p="aal2");const y=g.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;return o?this._returnResult({data:null,error:o}):a?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(n,i){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!i?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(n,i){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!i?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?await xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;return o?this._returnResult({data:null,error:o}):a?(await xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kt})})}catch(i){if(me(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(n,i={keys:[]}){let a=i.keys.find(d=>d.kid===n);if(a)return a;const o=Date.now();if(a=this.jwks.keys.find(d=>d.kid===n),a&&this.jwks_cached_at+Ek>o)return a;const{data:c,error:u}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,a=c.keys.find(d=>d.kid===n),!a)?null:a}async getClaims(n,i={}){try{let a=n;if(!a){const{data:b,error:E}=await this.getSession();if(E||!b.session)return this._returnResult({data:null,error:E});a=b.session.access_token}const{header:o,payload:c,signature:u,raw:{header:d,payload:g}}=uc(a);i?.allowExpired||Yk(c.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!h){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:c,header:o,signature:u},error:null}}const p=Xk(o.alg),v=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,u,jk(`${d}.${g}`)))throw new wh("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}}go.nextInstanceID={};const EM=go,TM="2.97.0";let Ys="";typeof Deno<"u"?Ys="deno":typeof document<"u"?Ys="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ys="react-native":Ys="node";const CM={"X-Client-Info":`supabase-js-${Ys}/${TM}`},AM={headers:CM},NM={schema:"public"},OM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},RM={};function mo(e){"@babel/helpers - typeof";return mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mo(e)}function kM(e,n){if(mo(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,n);if(mo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function MM(e){var n=kM(e,"string");return mo(n)=="symbol"?n:n+""}function jM(e,n,i){return(n=MM(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function Nv(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,a)}return i}function tt(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Nv(Object(i),!0).forEach(function(a){jM(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Nv(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}const DM=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),zM=()=>Headers,UM=(e,n,i)=>{const a=DM(i),o=zM();return async(c,u)=>{var d;const g=(d=await n())!==null&&d!==void 0?d:e;let h=new o(u?.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${g}`),a(c,tt(tt({},u),{},{headers:h}))}};function $M(e){return e.endsWith("/")?e:e+"/"}function LM(e,n){var i,a;const{db:o,auth:c,realtime:u,global:d}=e,{db:g,auth:h,realtime:p,global:v}=n,y={db:tt(tt({},g),o),auth:tt(tt({},h),c),realtime:tt(tt({},p),u),storage:{},global:tt(tt(tt({},v),d),{},{headers:tt(tt({},(i=v?.headers)!==null&&i!==void 0?i:{}),(a=d?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function HM(e){const n=e?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($M(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var BM=class extends EM{constructor(e){super(e)}},IM=class{constructor(e,n,i){var a,o;this.supabaseUrl=e,this.supabaseKey=n;const c=HM(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:NM,realtime:RM,auth:tt(tt({},OM),{},{storageKey:u}),global:AM},g=LM(i??{},d);if(this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=g.auth)!==null&&h!==void 0?h:{},this.headers,g.global.fetch)}this.fetch=UM(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new CR(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new bk(this.storageUrl.href,this.headers,this.fetch,i?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new vR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,n,i;if(e.accessToken)return await e.accessToken();const{data:a}=await e.auth.getSession();return(n=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,userStorage:o,storageKey:c,flowType:u,lock:d,debug:g,throwOnError:h},p,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new BM({url:this.authUrl.href,headers:tt(tt({},y),p),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,userStorage:o,flowType:u,lock:d,debug:g,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new VR(this.realtimeUrl.href,tt(tt({},e),{},{params:tt(tt({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n?.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const qM=(e,n,i)=>new IM(e,n,i);function VM(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const n=e.version;if(n==null)return!1;const i=n.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}VM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const PM="https://nlavjplhryynbdyubumj.supabase.co",GM="sb_publishable_RvhGSkpc-ILlK7mi_uHxcg_WGoonOjj",pi=qM(PM,GM),YM=()=>!0,XM=()=>{const[e,n]=q.useState([]),[i,a]=q.useState(!1),[o,c]=q.useState(null),[u,d]=q.useState(null),g=q.useCallback(async()=>{a(!0),c(null);try{const{data:E,error:_}=await pi.from("models").select("id, name, updated_at").order("updated_at",{ascending:!1});if(_)throw _;n(E||[])}catch(E){c(E.message),console.error("Error fetching models:",E)}finally{a(!1)}},[]),h=q.useCallback(async E=>{a(!0),c(null);try{const{data:_,error:T}=await pi.from("models").select("*").eq("id",E).single();if(T)throw T;return d(E),_}catch(_){return c(_.message),console.error("Error loading model:",_),null}finally{a(!1)}},[]),p=q.useCallback(async(E,_)=>{a(!0),c(null);try{const T={name:E,data:_,updated_at:new Date().toISOString()};let C;if(u){const{data:k,error:x}=await pi.from("models").update(T).eq("id",u).select().single();if(x)throw x;C=k}else{const{data:k,error:x}=await pi.from("models").insert(T).select().single();if(x)throw x;C=k,d(C.id)}return await g(),C}catch(T){return c(T.message),console.error("Error saving model:",T),null}finally{a(!1)}},[u,g]),v=q.useCallback(async(E,_)=>{a(!0),c(null);try{const{data:T,error:C}=await pi.from("models").insert({name:E,data:_,updated_at:new Date().toISOString()}).select().single();if(C)throw C;return d(T.id),await g(),T}catch(T){return c(T.message),console.error("Error saving model:",T),null}finally{a(!1)}},[g]),y=q.useCallback(async E=>{a(!0),c(null);try{const{error:_}=await pi.from("models").delete().eq("id",E);if(_)throw _;return u===E&&d(null),await g(),!0}catch(_){return c(_.message),console.error("Error deleting model:",_),!1}finally{a(!1)}},[u,g]),b=q.useCallback(()=>{d(null)},[]);return q.useEffect(()=>{g()},[g]),{models:e,loading:i,error:o,currentModelId:u,setCurrentModelId:d,isConfigured:YM(),fetchModels:g,loadModel:h,saveModel:p,saveAsModel:v,deleteModel:y,newModel:b}},KM=2e3,ZM=(e,n)=>{const[i,a]=q.useState(()=>localStorage.getItem("c4-autosave-enabled")==="true"),[o,c]=q.useState("idle"),u=q.useRef(null),d=q.useRef(null),g=ve(x=>x.systems),h=ve(x=>x.containers),p=ve(x=>x.components),v=ve(x=>x.people),y=ve(x=>x.externalSystems),b=ve(x=>x.shadows),E=ve(x=>x.relationships),_=ve(x=>x.metadata),T=ve(x=>x.exportModel),C=q.useCallback(x=>{a(x),localStorage.setItem("c4-autosave-enabled",x?"true":"false")},[]),k=q.useCallback(async()=>{if(!e)return;const x=T(),A=JSON.stringify(x);if(A!==d.current){c("saving");try{const{error:L}=await pi.from("models").update({name:_.name,data:x,updated_at:new Date().toISOString()}).eq("id",e);if(L)throw L;d.current=A,c("saved"),n?.(),setTimeout(()=>c("idle"),2e3)}catch(L){console.error("Auto-save error:",L),c("error"),setTimeout(()=>c("idle"),3e3)}}},[e,T,_.name,n]);return q.useEffect(()=>{if(!(!i||!e))return u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{k()},KM),()=>{u.current&&clearTimeout(u.current)}},[i,e,k,g,h,p,v,y,b,E]),q.useEffect(()=>{d.current=null},[e]),{autoSaveEnabled:i,toggleAutoSave:C,saveStatus:o}},QM=()=>{const[e,n]=q.useState(!1),[i,a]=q.useState(!1),[o,c]=q.useState(""),u=q.useRef(null),{models:d,loading:g,error:h,currentModelId:p,loadModel:v,saveModel:y,saveAsModel:b,deleteModel:E,newModel:_,fetchModels:T}=XM(),{metadata:C,exportModel:k,importModel:x,clearAll:A,setMetadata:L}=ve(),{autoSaveEnabled:j,toggleAutoSave:U,saveStatus:V}=ZM(p,T);q.useEffect(()=>{const R=$=>{u.current&&!u.current.contains($.target)&&(n(!1),a(!1))};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const Z=async()=>{const R=k();p?await y(C.name,R):(a(!0),c(C.name)),n(!1)},oe=async()=>{if(!o.trim())return;const R=k();L({...C,name:o.trim()}),await b(o.trim(),{...R,metadata:{...R.metadata,name:o.trim()}}),a(!1),c("")},ee=async R=>{const $=await v(R);$?.data&&x($.data),n(!1)},te=async(R,$)=>{R.stopPropagation(),window.confirm("Delete this model? This cannot be undone.")&&await E($)},G=()=>{A(),_(),L({name:"New C4 Model",version:"1.0",author:"Solution Architect"}),n(!1)},D=d.find(R=>R.id===p),P=()=>g?S.jsx(DN,{className:"w-4 h-4 animate-spin"}):V==="saving"?S.jsx(zN,{className:"w-4 h-4 animate-spin"}):V==="saved"?S.jsx(Aw,{className:"w-4 h-4 text-green-300"}):V==="error"?S.jsx(Nw,{className:"w-4 h-4 text-red-300"}):S.jsx(AN,{className:"w-4 h-4"});return S.jsxs("div",{className:"relative",ref:u,children:[S.jsxs("button",{onClick:()=>n(!e),className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm transition-colors",title:j&&p?"Auto-save enabled":"Cloud models",children:[P(),S.jsx("span",{className:"max-w-[120px] truncate",children:D?D.name:"Models"}),S.jsx(TN,{className:"w-3 h-3"})]}),e&&S.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:i?S.jsxs("div",{className:"p-3",children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Name"}),S.jsx("input",{type:"text",value:o,onChange:R=>c(R.target.value),onKeyDown:R=>R.key==="Enter"&&oe(),placeholder:"Enter model name",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),S.jsxs("div",{className:"flex gap-2 mt-2",children:[S.jsx("button",{onClick:oe,disabled:!o.trim(),className:"flex-1 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"}),S.jsx("button",{onClick:()=>a(!1),className:"px-3 py-1.5 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm",children:"Cancel"})]})]}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"p-2 border-b border-gray-100",children:[S.jsxs("button",{onClick:G,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(RN,{className:"w-4 h-4"}),"New Model"]}),S.jsxs("button",{onClick:Z,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(P0,{className:"w-4 h-4"}),p?"Save":"Save As..."]}),p&&S.jsxs("button",{onClick:()=>{a(!0),c(C.name)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(P0,{className:"w-4 h-4"}),"Save As..."]}),S.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[S.jsx("span",{className:"text-sm text-gray-700",children:"Auto-save"}),S.jsx("button",{onClick:()=>U(!j),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${j?"bg-indigo-600":"bg-gray-300"} ${p?"":"opacity-50 cursor-not-allowed"}`,disabled:!p,title:p?"":"Save a model first to enable auto-save",children:S.jsx("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform ${j?"translate-x-5":"translate-x-1"}`})})]})]}),S.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[h&&S.jsxs("div",{className:"px-3 py-2 text-sm text-red-600 bg-red-50 border-b border-red-100",children:["Error: ",h,S.jsx("button",{onClick:()=>T(),className:"ml-2 underline hover:no-underline",children:"Retry"})]}),d.length===0&&!h?S.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 text-center",children:"No saved models"}):d.map(R=>S.jsxs("div",{onClick:()=>ee(R.id),className:`flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer ${R.id===p?"bg-indigo-50":""}`,children:[S.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[S.jsx(kN,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),S.jsx("span",{className:"truncate",children:R.name})]}),S.jsx("button",{onClick:$=>te($,R.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete model",children:S.jsx(ch,{className:"w-3 h-3"})})]},R.id))]})]})})]})},JM=()=>{const{metadata:e,setMetadata:n,exportModel:i,importModel:a,clearAll:o}=ve(),c=ve(z=>z.viewMode),u=ve(z=>z.setViewMode),[d,g]=q.useState(!1),[h,p]=q.useState(!1),[v,y]=q.useState(!1),[b,E]=q.useState(!1),[_,T]=q.useState(e.name),[C,k]=q.useState(null),x=async()=>{const z=i(),{url:O,error:M}=dR(z);if(M){k("error"),alert(M),setTimeout(()=>k(null),2e3);return}try{await navigator.clipboard.writeText(O),k("copied"),setTimeout(()=>k(null),2e3)}catch{const X=document.createElement("textarea");X.value=O,document.body.appendChild(X),X.select(),document.execCommand("copy"),document.body.removeChild(X),k("copied"),setTimeout(()=>k(null),2e3)}},A=()=>{const z=i(),O=JSON.stringify(z,null,2),M="data:application/json;charset=utf-8,"+encodeURIComponent(O),Q=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.json`,X=document.createElement("a");X.setAttribute("href",M),X.setAttribute("download",Q),X.click()},L=z=>{const O=z.target.files?.[0];if(O){const M=new FileReader;M.onload=Q=>{try{const X=JSON.parse(Q.target.result);if(X.model&&(X.views||X.documentation)){const se=oR(X);a(se),alert("Structurizr workspace imported successfully!")}else a(X),alert("Model imported successfully!")}catch(X){alert("Error importing model: "+X.message)}},M.readAsText(O)}y(!1),z.target.value=""},j=z=>{const O=z.target.files?.[0];if(O){const M=new FileReader;M.onload=Q=>{try{const X=Q.target.result,se=aR(X);a(se),alert(`Spreadsheet imported successfully! Created ${se.systems?.length||0} systems, ${se.containers?.length||0} containers, ${se.components?.length||0} components.`)}catch(X){alert("Error importing spreadsheet: "+X.message)}},M.readAsText(O)}y(!1),z.target.value=""},U=()=>{const z=i(),O=sR(z),M=JSON.stringify(O,null,2),Q="data:application/json;charset=utf-8,"+encodeURIComponent(M),X=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}-structurizr.json`,se=document.createElement("a");se.setAttribute("href",Q),se.setAttribute("download",X),se.click(),p(!1)},V=()=>{window.confirm("Are you sure you want to clear all elements? This cannot be undone.")&&o()},Z=()=>{const z=i(),O=Hw(z),M=new Blob([O],{type:"text/plain"}),Q=URL.createObjectURL(M),X=document.createElement("a");X.href=Q,X.download=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.puml`,X.click(),URL.revokeObjectURL(Q),p(!1)},oe=()=>{const z=i(),O=ZO(z),M=new Blob([O],{type:"text/plain"}),Q=URL.createObjectURL(M),X=document.createElement("a");X.href=Q,X.download=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.mmd`,X.click(),URL.revokeObjectURL(Q),p(!1)},ee=()=>{const z=i(),O=Bw(z),M=new Blob([O],{type:"text/markdown"}),Q=URL.createObjectURL(M),X=document.createElement("a");X.href=Q,X.download=`${(z.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.md`,X.click(),URL.revokeObjectURL(Q),p(!1)},te=()=>{const z=i();QO(z),p(!1)},G=async()=>{const z=i();await XO(z),p(!1)},D=async()=>{const z=i();await KO(z),p(!1)},P=()=>{const z=i();tR(z),p(!1)},R=()=>{const z=i();nR(z),p(!1)},$=()=>{T(e.name),E(!0)},B=()=>{const z=_.trim();z?n({...e,name:z}):T(e.name),E(!1)},K=z=>{z.key==="Enter"?B():z.key==="Escape"&&(T(e.name),E(!1))};return S.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Diagrams"}),S.jsx("span",{className:"text-gray-400",children:"|"}),b?S.jsx("input",{type:"text",value:_,onChange:z=>T(z.target.value),onBlur:B,onKeyDown:K,autoFocus:!0,className:"text-sm text-gray-900 font-medium px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[200px]"}):S.jsx("button",{onClick:$,className:"text-sm text-gray-600 cursor-text hover:text-gray-900 hover:bg-gray-100 px-2 py-1 rounded transition-colors border border-transparent hover:border-gray-300",title:"Click to edit model name",children:e.name})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(FN,{}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(QM,{}),S.jsxs("button",{onClick:x,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm transition-colors ${C==="copied"?"bg-green-600 text-white":C==="error"?"bg-red-600 text-white":"bg-gray-600 text-white hover:bg-gray-700"}`,title:"Copy shareable link to clipboard",children:[C==="copied"?S.jsx(Aw,{className:"w-4 h-4"}):C==="error"?S.jsx(Nw,{className:"w-4 h-4"}):S.jsx($N,{className:"w-4 h-4"}),C==="copied"?"Copied!":"Share"]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>p(!h),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm transition-colors",title:"Export model",children:[S.jsx(NN,{className:"w-4 h-4"}),"Export"]}),h&&S.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:S.jsxs("div",{className:"py-1",children:[S.jsxs("button",{onClick:A,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Bf,{className:"w-4 h-4"}),"JSON"]}),S.jsxs("button",{onClick:U,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Bf,{className:"w-4 h-4"}),"Structurizr JSON"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:Z,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Hf,{className:"w-4 h-4"}),"PlantUML"]}),S.jsxs("button",{onClick:oe,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Hf,{className:"w-4 h-4"}),"Mermaid"]}),S.jsxs("button",{onClick:ee,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(V0,{className:"w-4 h-4"}),"Markdown"]}),S.jsxs("button",{onClick:te,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(V0,{className:"w-4 h-4"}),"HTML Document"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:G,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(q0,{className:"w-4 h-4"}),"PNG Image"]}),S.jsxs("button",{onClick:D,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(q0,{className:"w-4 h-4"}),"SVG Image"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:P,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Hf,{className:"w-4 h-4"}),"Draw.io (.drawio)"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:R,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(G0,{className:"w-4 h-4"}),"Spreadsheet (.csv)"]})]})})]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>y(!v),className:"flex items-center gap-2 px-3 py-1.5 bg-green-700 text-white rounded-md hover:bg-green-800 text-sm transition-colors",title:"Import model",children:[S.jsx(LN,{className:"w-4 h-4"}),"Import"]}),v&&S.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:S.jsxs("div",{className:"py-1",children:[S.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[S.jsx(Bf,{className:"w-4 h-4"}),"JSON / Structurizr",S.jsx("input",{type:"file",accept:".json",onChange:L,className:"hidden","aria-label":"Import JSON model file"})]}),S.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[S.jsx(G0,{className:"w-4 h-4"}),"Spreadsheet (.csv)",S.jsx("input",{type:"file",accept:".csv",onChange:j,className:"hidden","aria-label":"Import CSV spreadsheet"})]})]})})]}),S.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-md p-1",children:[S.jsxs("button",{onClick:()=>u("edit"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="edit"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Edit mode - navigate and edit elements",children:[S.jsx(ON,{className:"w-4 h-4"}),"Edit"]}),S.jsxs("button",{onClick:()=>u("tree"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="tree"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Tree view - see full hierarchy",children:[S.jsx(MN,{className:"w-4 h-4"}),"Tree"]})]}),S.jsx("button",{onClick:V,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm transition-colors",title:"Clear all elements",children:"Clear All"})]})]})]})})},dc="c4-model-autosave",FM=3e4,Aa=e=>!e||typeof e!="object"?null:{id:e.id,type:e.type,name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags:[],parentId:e.parentId||null,position:e.position&&typeof e.position=="object"?{x:Number(e.position.x)||0,y:Number(e.position.y)||0}:{x:0,y:0},width:e.width?Number(e.width):void 0,height:e.height?Number(e.height):void 0},WM=e=>!e||typeof e!="object"?null:{id:e.id,from:e.from,to:e.to,description:e.description||"",technology:e.technology||"",arrowDirection:e.arrowDirection||"right",lineStyle:e.lineStyle||"solid",animated:!!e.animated},fc=e=>{if(!e||typeof e!="object")return null;const n=(i,a)=>Array.isArray(i)?i.map(a).filter(o=>o!==null):[];return{metadata:e.metadata||{name:"New C4 Model",version:"1.0",author:"Solution Architect"},systems:n(e.systems,Aa),containers:n(e.containers,Aa),components:n(e.components,Aa),people:n(e.people,Aa),externalSystems:n(e.externalSystems,Aa),shadows:(e.shadows||[]).map(Aa),relationships:n(e.relationships,WM)}},ej=()=>{const{exportModel:e,importModel:n}=ve();q.useEffect(()=>{if(gR())try{const a=fR();if(a){const o=fc(a);if(o){n(o),console.log("Model loaded from shared URL"),hR();return}}}catch(a){console.error("Error loading shared model from URL:",a)}const i=localStorage.getItem(dc);if(i)try{const a=JSON.parse(i),o=fc(a);o&&window.confirm("Found a previously saved model. Would you like to restore it?")&&(n(o),console.log("Model restored from local storage (sanitized)"))}catch(a){console.error("Error loading saved model:",a),console.warn("Clearing corrupted localStorage data"),localStorage.removeItem(dc)}},[n]),q.useEffect(()=>{const i=setInterval(()=>{const a=e(),o=fc(a);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(dc,JSON.stringify(o)),console.log("Model auto-saved to local storage")}catch(c){console.error("Error saving model to localStorage:",c)}},FM);return()=>clearInterval(i)},[e]),q.useEffect(()=>{const i=()=>{const a=e(),o=fc(a);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(dc,JSON.stringify(o))}catch(c){console.error("Error saving model on unload:",c)}};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[e])},tj=()=>{const e=ve(d=>d.currentParentId),n=ve(d=>d.viewMode),i=ve(d=>d.navigateTo),a=ve(d=>d.navigateToRoot),o=ve(d=>d.setViewMode),c=q.useRef(!1),u=q.useRef(null);q.useEffect(()=>{if(c.current){c.current=!1;return}const d=`${e||"root"}-${n}`;if(u.current===d)return;const g={currentParentId:e,viewMode:n};u.current===null?window.history.replaceState(g,""):window.history.pushState(g,""),u.current=d},[e,n]),q.useEffect(()=>{const d=g=>{c.current=!0;const h=g.state;h?(h.currentParentId===null?a():i(h.currentParentId),h.viewMode&&o(h.viewMode),u.current=`${h.currentParentId||"root"}-${h.viewMode||"edit"}`):(a(),o("edit"),u.current="root-edit")};if(window.addEventListener("popstate",d),!window.history.state){const g={currentParentId:e,viewMode:n};window.history.replaceState(g,""),u.current=`${e||"root"}-${n}`}return()=>{window.removeEventListener("popstate",d)}},[i,a,o])},nj={c4Node:IN,shadowNode:VN},rj=(e,n)=>{if(!e?.position||!n?.position)return{sourceHandle:"bottom",targetHandle:"top"};const i=n.position.x-e.position.x,a=n.position.y-e.position.y;return Math.abs(i)>Math.abs(a)?i>0?{sourceHandle:"right",targetHandle:"left"}:{sourceHandle:"left",targetHandle:"right"}:a>0?{sourceHandle:"bottom",targetHandle:"top"}:{sourceHandle:"top",targetHandle:"bottom"}};function ij(){const[e,n,i]=PA([]),[a,o,c]=GA([]),[u,d]=q.useState(null),{getAllElements:g,relationships:h,updateElement:p,setSelectedElement:v,setSelectedEdge:y,selectedElement:b,currentParentId:E,navigateInto:_,navigateTo:T}=ve(),C=ve(z=>z.navigateUp),k=ve(z=>z.navigateToRoot),x=ve(z=>z.viewMode),A=q.useCallback(z=>{i(z)},[i]),L=ve(z=>z.systems),j=ve(z=>z.containers),U=ve(z=>z.components),V=ve(z=>z.people),Z=ve(z=>z.externalSystems),oe=ve(z=>z.shadows),ee=ve(z=>z.getVisibleElements);ej(),tj(),q.useEffect(()=>{const O=ee().map(M=>({id:M.id,type:M.type==="shadow"?"shadowNode":"c4Node",position:M.position||{x:Math.random()*400,y:Math.random()*300},data:{...M,label:M.name}}));n(O)},[L,j,U,V,Z,oe,E,ee,n]),q.useEffect(()=>{const z=ee(),O=h.map(M=>{const Q=M.arrowDirection||"right";let X,se;(Q==="left"||Q==="both")&&(X={type:Si.ArrowClosed}),(Q==="right"||Q==="both")&&(se={type:Si.ArrowClosed});const ue=M.lineStyle||"solid";let ce;ue==="dashed"?ce="5,5":ue==="dotted"&&(ce="2,2");const le=z.find(pe=>pe.id===M.from),de=z.find(pe=>pe.id===M.to),{sourceHandle:Te,targetHandle:Se}=rj(le,de);return{id:M.id,source:M.from,target:M.to,sourceHandle:Te,targetHandle:Se,label:M.description||"",type:"smoothstep",animated:M.animated||!1,markerStart:X,markerEnd:se,style:{stroke:"#64748b",strokeWidth:2,strokeDasharray:ce},labelStyle:{fill:"#334155",fontSize:12,fontWeight:500},labelBgStyle:{fill:"#f8fafc",fillOpacity:.9}}});o(O)},[h,o,ee,L,j,U,V,Z,oe,E]);const te=q.useCallback((z,O)=>{const M=g().find(Q=>Q.id===O.id);M&&p(M.type,M.id,{position:{x:O.position.x,y:O.position.y}})},[g,p]),G=q.useCallback(z=>{const O={...z,type:"smoothstep",animated:!1,markerEnd:{type:Si.ArrowClosed}};o(X=>Tb(O,X));const{source:M,target:Q}=z;ve.getState().addRelationship({from:M,to:Q,description:"New relationship",technology:""})},[o]);q.useEffect(()=>(typeof window<"u"&&(window.__CREATE_CONNECTION__=G),()=>{typeof window<"u"&&delete window.__CREATE_CONNECTION__}),[G]),q.useEffect(()=>{const z=O=>{if(!(O.target.tagName==="INPUT"||O.target.tagName==="TEXTAREA")&&(O.key==="Escape"&&(b?v(null):C()),O.key==="Home"&&!O.ctrlKey&&!O.metaKey&&k(),O.key==="Enter"&&b)){const M=ve.getState().hasChildren;M(b.id)&&_(b.id)}};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[b,v,C,k,_]);const D=q.useCallback((z,O)=>{try{const M=g().find(Q=>Q.id===O.id);M?(console.log("[Diagrams] Node clicked:",M.type,M.id),v(M)):(console.error("[Diagrams] Element not found for node:",O.id),v(null))}catch(M){console.error("[Diagrams] Error in onNodeClick:",M),v(null)}},[g,v]),P=q.useCallback((z,O)=>{z.stopPropagation();const M=g().find(X=>X.id===O.id);if(!M)return;const Q=ve.getState().hasChildren;if(M.type==="shadow"&&M.targetId){const X=g().find(se=>se.id===M.targetId);if(X&&Q(X.id)){_(X.id);return}}Q(M.id)&&_(M.id)},[g,_]),R=q.useCallback((z,O)=>{const M=h.find(Q=>Q.id===O.id);y(M)},[h,y]),$=q.useCallback(()=>{v(null),y(null)},[v,y]),B=q.useCallback(z=>{z.preventDefault(),z.dataTransfer.dropEffect="move"},[]),K=q.useCallback(z=>{z.preventDefault();const O=z.dataTransfer.getData("application/c4-element-type");if(!O||!u)return;const M=u.screenToFlowPosition({x:z.clientX,y:z.clientY}),Q={name:`New ${O.charAt(0).toUpperCase()+O.slice(1)}`,description:"",technology:"",position:M};ve.getState().addElement(O,Q)},[u]);return S.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[S.jsx(JM,{}),S.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[x==="edit"&&S.jsx(QN,{}),S.jsx("div",{className:"flex-1 relative",children:x==="tree"?S.jsx(ZN,{}):S.jsxs(vw,{nodes:e,edges:a,onNodesChange:A,onEdgesChange:c,onConnect:G,onNodeDragStop:te,onNodeClick:D,onNodeDoubleClick:P,onEdgeClick:R,onPaneClick:$,onDrop:K,onDragOver:B,onInit:d,nodeTypes:nj,fitView:!0,className:"bg-gray-50",children:[S.jsx(ww,{color:"#cbd5e1",gap:16}),S.jsx(_w,{}),S.jsx(Ew,{nodeColor:z=>{switch(z.data.type){case"system":return"#3b82f6";case"container":return"#22c55e";case"component":return"#eab308";case"person":return"#a855f7";case"externalSystem":return"#6b7280";default:return"#94a3b8"}}})]})}),x==="edit"&&S.jsx(JN,{})]})]})}pS.createRoot(document.getElementById("root")).render(S.jsx(q.StrictMode,{children:S.jsx(ij,{})}));
</script>
    <style>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media(min-width:640px){.container{max-width:640px}}@media(min-width:768px){.container{max-width:768px}}@media(min-width:1024px){.container{max-width:1024px}}@media(min-width:1280px){.container{max-width:1280px}}@media(min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.collapse{visibility:collapse}.absolute{position:absolute}.relative{position:relative}.bottom-2{bottom:.5rem}.left-2{left:.5rem}.right-0{right:0}.right-2{right:.5rem}.top-2{top:.5rem}.z-50{z-index:50}.my-1{margin-top:.25rem;margin-bottom:.25rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.\!h-2{height:.5rem!important}.\!h-4{height:1rem!important}.h-3{height:.75rem}.h-3\.5{height:.875rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-full{height:100%}.h-screen{height:100vh}.max-h-48{max-height:12rem}.max-h-64{max-height:16rem}.\!w-2{width:.5rem!important}.\!w-4{width:1rem!important}.w-3{width:.75rem}.w-3\.5{width:.875rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-64{width:16rem}.w-80{width:20rem}.w-9{width:2.25rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-\[150px\]{min-width:150px}.min-w-\[200px\]{min-width:200px}.max-w-\[120px\]{max-width:120px}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}.translate-x-1{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-5{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-crosshair{cursor:crosshair}.cursor-grab{cursor:grab}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.cursor-text{cursor:text}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.\!border-0{border-width:0px!important}.\!border-2{border-width:2px!important}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.\!border-white{--tw-border-opacity: 1 !important;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))!important}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-500{--tw-border-opacity: 1;border-color:rgb(107 114 128 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity: 1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-purple-300{--tw-border-opacity: 1;border-color:rgb(216 180 254 / var(--tw-border-opacity, 1))}.border-purple-500{--tw-border-opacity: 1;border-color:rgb(168 85 247 / var(--tw-border-opacity, 1))}.border-red-100{--tw-border-opacity: 1;border-color:rgb(254 226 226 / var(--tw-border-opacity, 1))}.border-red-400{--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.border-slate-400{--tw-border-opacity: 1;border-color:rgb(148 163 184 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-yellow-300{--tw-border-opacity: 1;border-color:rgb(253 224 71 / var(--tw-border-opacity, 1))}.border-yellow-500{--tw-border-opacity: 1;border-color:rgb(234 179 8 / var(--tw-border-opacity, 1))}.\!bg-gray-400{--tw-bg-opacity: 1 !important;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))!important}.\!bg-slate-400{--tw-bg-opacity: 1 !important;background-color:rgb(148 163 184 / var(--tw-bg-opacity, 1))!important}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity: 1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-indigo-600{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-50\/50{background-color:#fef2f280}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-slate-100{--tw-bg-opacity: 1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-slate-50\/50{background-color:#f8fafc80}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/80{background-color:#fffc}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-\[9px\]{font-size:9px}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.italic{font-style:italic}.tracking-wide{letter-spacing:.025em}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-300{--tw-text-opacity: 1;color:rgb(134 239 172 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity: 1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity: 1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ring-4{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-400{--tw-ring-opacity: 1;--tw-ring-color: rgb(96 165 250 / var(--tw-ring-opacity, 1))}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-150{transition-duration:.15s}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*{box-sizing:border-box}.react-flow__attribution a{color:#6b7280!important}.hover\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover\:\!bg-blue-500:hover{--tw-bg-opacity: 1 !important;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))!important}.hover\:bg-blue-200:hover{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-green-200:hover{--tw-bg-opacity: 1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.hover\:bg-green-800:hover{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity, 1))}.hover\:bg-indigo-700:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-200:hover{--tw-bg-opacity: 1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-200:hover{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/50:hover{background-color:#ffffff80}.hover\:bg-yellow-200:hover{--tw-bg-opacity: 1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}.hover\:text-blue-500:hover{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.hover\:text-gray-900:hover{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.hover\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\:no-underline:hover{text-decoration-line:none}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\:ring-indigo-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity, 1))}.active\:cursor-grabbing:active{cursor:grabbing}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.react-flow{direction:ltr;--xy-edge-stroke-default: #b1b1b7;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #555;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(255, 255, 255, .5);--xy-minimap-background-color-default: #fff;--xy-minimap-mask-background-color-default: rgba(240, 240, 240, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #e2e2e2;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: transparent;--xy-background-pattern-dots-color-default: #91919a;--xy-background-pattern-lines-color-default: #eee;--xy-background-pattern-cross-color-default: #e2e2e2;background-color:var(--xy-background-color, var(--xy-background-color-default));--xy-node-color-default: inherit;--xy-node-border-default: 1px solid #1a192b;--xy-node-background-color-default: #fff;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #1a192b;--xy-node-border-radius-default: 3px;--xy-handle-background-color-default: #1a192b;--xy-handle-border-color-default: #fff;--xy-selection-background-color-default: rgba(0, 89, 220, .08);--xy-selection-border-default: 1px dotted rgba(0, 89, 220, .8);--xy-controls-button-background-color-default: #fefefe;--xy-controls-button-background-color-hover-default: #f4f4f4;--xy-controls-button-color-default: inherit;--xy-controls-button-color-hover-default: inherit;--xy-controls-button-border-color-default: #eee;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #ffffff;--xy-edge-label-color-default: inherit;--xy-resize-background-color-default: #3367d9}.react-flow.dark{--xy-edge-stroke-default: #3e3e3e;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #727272;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(150, 150, 150, .25);--xy-minimap-background-color-default: #141414;--xy-minimap-mask-background-color-default: rgba(60, 60, 60, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #2b2b2b;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: #141414;--xy-background-pattern-dots-color-default: #777;--xy-background-pattern-lines-color-default: #777;--xy-background-pattern-cross-color-default: #777;--xy-node-color-default: #f8f8f8;--xy-node-border-default: 1px solid #3c3c3c;--xy-node-background-color-default: #1e1e1e;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #999;--xy-handle-background-color-default: #bebebe;--xy-handle-border-color-default: #1e1e1e;--xy-selection-background-color-default: rgba(200, 200, 220, .08);--xy-selection-border-default: 1px dotted rgba(200, 200, 220, .8);--xy-controls-button-background-color-default: #2b2b2b;--xy-controls-button-background-color-hover-default: #3e3e3e;--xy-controls-button-color-default: #f8f8f8;--xy-controls-button-color-hover-default: #fff;--xy-controls-button-border-color-default: #5b5b5b;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #141414;--xy-edge-label-color-default: #f8f8f8}.react-flow__background{background-color:var(--xy-background-color-props, var(--xy-background-color, var(--xy-background-color-default)));pointer-events:none;z-index:-1}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1}.react-flow__pane.draggable{cursor:grab}.react-flow__pane.dragging{cursor:grabbing}.react-flow__pane.selection{cursor:pointer}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow__edge-path{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));fill:none}.react-flow__connection-path{stroke:var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));fill:none}.react-flow .react-flow__edges{position:absolute}.react-flow .react-flow__edges svg{overflow:visible;position:absolute;pointer-events:none}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.selectable{cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge.selectable:focus .react-flow__edge-path,.react-flow__edge.selectable:focus-visible .react-flow__edge-path{stroke:var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default))}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__arrowhead polyline{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default))}.react-flow__arrowhead polyline.arrowclosed{fill:var(--xy-edge-stroke, var(--xy-edge-stroke-default))}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.react-flow__connectionline{z-index:1001;overflow:visible;position:absolute}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:default}.react-flow__node.selectable{cursor:pointer}.react-flow__node.draggable{cursor:grab;pointer-events:all}.react-flow__node.draggable.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background-color:var(--xy-handle-background-color, var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));border-radius:100%}.react-flow__handle.connectingfrom{pointer-events:all}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:0;transform:translate(-50%,50%)}.react-flow__handle-top{top:0;left:50%;transform:translate(-50%,-50%)}.react-flow__handle-left{top:50%;left:0;transform:translate(-50%,-50%)}.react-flow__handle-right{top:50%;right:0;transform:translate(50%,-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__pane.selection .react-flow__panel{pointer-events:none}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.top.center,.react-flow__panel.bottom.center{left:50%;transform:translate(-15px) translate(-50%)}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.left.center,.react-flow__panel.right.center{top:50%;transform:translateY(-15px) translateY(-50%)}.react-flow__attribution{font-size:10px;background:var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;left:0;top:0}.react-flow__viewport-portal{position:absolute;width:100%;height:100%;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__minimap{background:var( --xy-minimap-background-color-props, var(--xy-minimap-background-color, var(--xy-minimap-background-color-default)) )}.react-flow__minimap-svg{display:block}.react-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props, var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props, var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props, var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default)) )}.react-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props, var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props, var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props, var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default)) )}.react-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default)) )}.react-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default)) )}.react-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default)) )}.react-flow__controls{display:flex;flex-direction:column;box-shadow:var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default))}.react-flow__controls.horizontal{flex-direction:row}.react-flow__controls-button{display:flex;justify-content:center;align-items:center;height:26px;width:26px;padding:4px;border:none;background:var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));border-bottom:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)) );cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px;fill:currentColor}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-input,.react-flow__node-default,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:var(--xy-node-border-radius, var(--xy-node-border-radius-default));width:150px;font-size:12px;color:var(--xy-node-color, var(--xy-node-color-default));text-align:center;border:var(--xy-node-border, var(--xy-node-border-default));background-color:var(--xy-node-background-color, var(--xy-node-background-color-default))}.react-flow__node-input.selectable:hover,.react-flow__node-default.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default))}.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default))}.react-flow__node-group{background-color:var(--xy-node-group-background-color, var(--xy-node-group-background-color-default))}.react-flow__nodesselection-rect,.react-flow__selection{background:var(--xy-selection-background-color, var(--xy-selection-background-color-default));border:var(--xy-selection-border, var(--xy-selection-border-default))}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props, var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props, var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default)) )}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__controls-button:last-child{border-bottom:none}.react-flow__controls.horizontal .react-flow__controls-button{border-bottom:none;border-right:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) )}.react-flow__controls.horizontal .react-flow__controls-button:last-child{border-right:none}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:5px;height:5px;border:1px solid #fff;border-radius:1px;background-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));translate:-50% -50%}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.react-flow__edge-textbg{fill:var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default))}.react-flow__edge-text{fill:var(--xy-edge-label-color, var(--xy-edge-label-color-default))}
</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
