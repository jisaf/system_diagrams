<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23646cff' d='M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z'/%3E%3C/svg%3E" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>C4 Navigator - Interactive C4 Diagramming Tool</title>
    <script type="module">(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ov(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bf={exports:{}},Hs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function sS(){if(Ey)return Hs;Ey=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(a,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:e,type:a,key:u,ref:o!==void 0?o:null,props:c}}return Hs.Fragment=n,Hs.jsx=r,Hs.jsxs=r,Hs}var Ty;function oS(){return Ty||(Ty=1,bf.exports=sS()),bf.exports}var S=oS(),wf={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function lS(){if(Cy)return Se;Cy=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),y=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function T(O,M,K){this.props=O,this.context=M,this.refs=C,this.updater=K||E}T.prototype.isReactComponent={},T.prototype.setState=function(O,M){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,M,"setState")},T.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function k(){}k.prototype=T.prototype;function _(O,M,K){this.props=O,this.context=M,this.refs=C,this.updater=K||E}var N=_.prototype=new k;N.constructor=_,x(N,T.prototype),N.isPureReactComponent=!0;var $=Array.isArray;function j(){}var U={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function J(O,M,K){var Q=K.ref;return{$$typeof:e,type:O,key:M,ref:Q!==void 0?Q:null,props:K}}function oe(O,M){return J(O.type,M,O.props)}function te(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function Z(O){var M={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(K){return M[K]})}var q=/\/+/g;function z(O,M){return typeof O=="object"&&O!==null&&O.key!=null?Z(""+O.key):M.toString(36)}function G(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(j,j):(O.status="pending",O.then(function(M){O.status==="pending"&&(O.status="fulfilled",O.value=M)},function(M){O.status==="pending"&&(O.status="rejected",O.reason=M)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function R(O,M,K,Q,se){var ue=typeof O;(ue==="undefined"||ue==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(ue){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case e:case n:ce=!0;break;case p:return ce=O._init,R(ce(O._payload),M,K,Q,se)}}if(ce)return se=se(O),ce=Q===""?"."+z(O,0):Q,$(se)?(K="",ce!=null&&(K=ce.replace(q,"$&/")+"/"),R(se,M,K,"",function(Ee){return Ee})):se!=null&&(te(se)&&(se=oe(se,K+(se.key==null||O&&O.key===se.key?"":(""+se.key).replace(q,"$&/")+"/")+ce)),M.push(se)),1;ce=0;var le=Q===""?".":Q+":";if($(O))for(var de=0;de<O.length;de++)Q=O[de],ue=le+z(Q,de),ce+=R(Q,M,K,ue,se);else if(de=b(O),typeof de=="function")for(O=de.call(O),de=0;!(Q=O.next()).done;)Q=Q.value,ue=le+z(Q,de++),ce+=R(Q,M,K,ue,se);else if(ue==="object"){if(typeof O.then=="function")return R(G(O),M,K,Q,se);throw M=String(O),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return ce}function H(O,M,K){if(O==null)return O;var Q=[],se=0;return R(O,Q,"","",function(ue){return M.call(K,ue,se++)}),Q}function B(O){if(O._status===-1){var M=O._result;M=M(),M.then(function(K){(O._status===0||O._status===-1)&&(O._status=1,O._result=K)},function(K){(O._status===0||O._status===-1)&&(O._status=2,O._result=K)}),O._status===-1&&(O._status=0,O._result=M)}if(O._status===1)return O._result.default;throw O._result}var X=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},D={map:H,forEach:function(O,M,K){H(O,function(){M.apply(this,arguments)},K)},count:function(O){var M=0;return H(O,function(){M++}),M},toArray:function(O){return H(O,function(M){return M})||[]},only:function(O){if(!te(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Se.Activity=v,Se.Children=D,Se.Component=T,Se.Fragment=r,Se.Profiler=o,Se.PureComponent=_,Se.StrictMode=a,Se.Suspense=g,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Se.__COMPILER_RUNTIME={__proto__:null,c:function(O){return U.H.useMemoCache(O)}},Se.cache=function(O){return function(){return O.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(O,M,K){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Q=x({},O.props),se=O.key;if(M!=null)for(ue in M.key!==void 0&&(se=""+M.key),M)!P.call(M,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&M.ref===void 0||(Q[ue]=M[ue]);var ue=arguments.length-2;if(ue===1)Q.children=K;else if(1<ue){for(var ce=Array(ue),le=0;le<ue;le++)ce[le]=arguments[le+2];Q.children=ce}return J(O.type,se,Q)},Se.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Se.createElement=function(O,M,K){var Q,se={},ue=null;if(M!=null)for(Q in M.key!==void 0&&(ue=""+M.key),M)P.call(M,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=M[Q]);var ce=arguments.length-2;if(ce===1)se.children=K;else if(1<ce){for(var le=Array(ce),de=0;de<ce;de++)le[de]=arguments[de+2];se.children=le}if(O&&O.defaultProps)for(Q in ce=O.defaultProps,ce)se[Q]===void 0&&(se[Q]=ce[Q]);return J(O,ue,se)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(O){return{$$typeof:d,render:O}},Se.isValidElement=te,Se.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:B}},Se.memo=function(O,M){return{$$typeof:h,type:O,compare:M===void 0?null:M}},Se.startTransition=function(O){var M=U.T,K={};U.T=K;try{var Q=O(),se=U.S;se!==null&&se(K,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(j,X)}catch(ue){X(ue)}finally{M!==null&&K.types!==null&&(M.types=K.types),U.T=M}},Se.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Se.use=function(O){return U.H.use(O)},Se.useActionState=function(O,M,K){return U.H.useActionState(O,M,K)},Se.useCallback=function(O,M){return U.H.useCallback(O,M)},Se.useContext=function(O){return U.H.useContext(O)},Se.useDebugValue=function(){},Se.useDeferredValue=function(O,M){return U.H.useDeferredValue(O,M)},Se.useEffect=function(O,M){return U.H.useEffect(O,M)},Se.useEffectEvent=function(O){return U.H.useEffectEvent(O)},Se.useId=function(){return U.H.useId()},Se.useImperativeHandle=function(O,M,K){return U.H.useImperativeHandle(O,M,K)},Se.useInsertionEffect=function(O,M){return U.H.useInsertionEffect(O,M)},Se.useLayoutEffect=function(O,M){return U.H.useLayoutEffect(O,M)},Se.useMemo=function(O,M){return U.H.useMemo(O,M)},Se.useOptimistic=function(O,M){return U.H.useOptimistic(O,M)},Se.useReducer=function(O,M,K){return U.H.useReducer(O,M,K)},Se.useRef=function(O){return U.H.useRef(O)},Se.useState=function(O){return U.H.useState(O)},Se.useSyncExternalStore=function(O,M,K){return U.H.useSyncExternalStore(O,M,K)},Se.useTransition=function(){return U.H.useTransition()},Se.version="19.2.0",Se}var Ay;function po(){return Ay||(Ay=1,wf.exports=lS()),wf.exports}var V=po();const Rv=Ov(V);var xf={exports:{}},Bs={},_f={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function cS(){return Ny||(Ny=1,(function(e){function n(R,H){var B=R.length;R.push(H);e:for(;0<B;){var X=B-1>>>1,D=R[X];if(0<o(D,H))R[X]=H,R[B]=D,B=X;else break e}}function r(R){return R.length===0?null:R[0]}function a(R){if(R.length===0)return null;var H=R[0],B=R.pop();if(B!==H){R[0]=B;e:for(var X=0,D=R.length,O=D>>>1;X<O;){var M=2*(X+1)-1,K=R[M],Q=M+1,se=R[Q];if(0>o(K,B))Q<D&&0>o(se,K)?(R[X]=se,R[Q]=B,X=Q):(R[X]=K,R[M]=B,X=M);else if(Q<D&&0>o(se,B))R[X]=se,R[Q]=B,X=Q;else break e}}return H}function o(R,H){var B=R.sortIndex-H.sortIndex;return B!==0?B:R.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var g=[],h=[],p=1,v=null,y=3,b=!1,E=!1,x=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function N(R){for(var H=r(h);H!==null;){if(H.callback===null)a(h);else if(H.startTime<=R)a(h),H.sortIndex=H.expirationTime,n(g,H);else break;H=r(h)}}function $(R){if(x=!1,N(R),!E)if(r(g)!==null)E=!0,j||(j=!0,Z());else{var H=r(h);H!==null&&G($,H.startTime-R)}}var j=!1,U=-1,P=5,J=-1;function oe(){return C?!0:!(e.unstable_now()-J<P)}function te(){if(C=!1,j){var R=e.unstable_now();J=R;var H=!0;try{e:{E=!1,x&&(x=!1,k(U),U=-1),b=!0;var B=y;try{t:{for(N(R),v=r(g);v!==null&&!(v.expirationTime>R&&oe());){var X=v.callback;if(typeof X=="function"){v.callback=null,y=v.priorityLevel;var D=X(v.expirationTime<=R);if(R=e.unstable_now(),typeof D=="function"){v.callback=D,N(R),H=!0;break t}v===r(g)&&a(g),N(R)}else a(g);v=r(g)}if(v!==null)H=!0;else{var O=r(h);O!==null&&G($,O.startTime-R),H=!1}}break e}finally{v=null,y=B,b=!1}H=void 0}}finally{H?Z():j=!1}}}var Z;if(typeof _=="function")Z=function(){_(te)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,z=q.port2;q.port1.onmessage=te,Z=function(){z.postMessage(null)}}else Z=function(){T(te,0)};function G(R,H){U=T(function(){R(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(R){switch(y){case 1:case 2:case 3:var H=3;break;default:H=y}var B=y;y=H;try{return R()}finally{y=B}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(R,H){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=y;y=R;try{return H()}finally{y=B}},e.unstable_scheduleCallback=function(R,H,B){var X=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?X+B:X):B=X,R){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=B+D,R={id:p++,callback:H,priorityLevel:R,startTime:B,expirationTime:D,sortIndex:-1},B>X?(R.sortIndex=B,n(h,R),r(g)===null&&R===r(h)&&(x?(k(U),U=-1):x=!0,G($,B-X))):(R.sortIndex=D,n(g,R),E||b||(E=!0,j||(j=!0,Z()))),R},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(R){var H=y;return function(){var B=y;y=H;try{return R.apply(this,arguments)}finally{y=B}}}})(Sf)),Sf}var Oy;function uS(){return Oy||(Oy=1,_f.exports=cS()),_f.exports}var Ef={exports:{}},Ct={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function dS(){if(Ry)return Ct;Ry=1;var e=po();function n(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:g,containerInfo:h,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ct.createPortal=function(g,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(n(299));return c(g,h,null,p)},Ct.flushSync=function(g){var h=u.T,p=a.p;try{if(u.T=null,a.p=2,g)return g()}finally{u.T=h,a.p=p,a.d.f()}},Ct.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(g,h))},Ct.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Ct.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?a.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:b}):p==="script"&&a.d.X(g,{crossOrigin:v,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ct.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=d(h.as,h.crossOrigin);a.d.M(g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(g)},Ct.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=d(p,h.crossOrigin);a.d.L(g,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ct.preloadModule=function(g,h){if(typeof g=="string")if(h){var p=d(h.as,h.crossOrigin);a.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(g)},Ct.requestFormReset=function(g){a.d.r(g)},Ct.unstable_batchedUpdates=function(g,h){return g(h)},Ct.useFormState=function(g,h,p){return u.H.useFormState(g,h,p)},Ct.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ct.version="19.2.0",Ct}var ky;function kv(){if(ky)return Ef.exports;ky=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Ef.exports=dS(),Ef.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function fS(){if(My)return Bs;My=1;var e=uS(),n=po(),r=kv();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function u(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function d(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(a(188))}function h(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(a(188));return i!==t?null:t}for(var s=t,l=i;;){var f=s.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===s)return g(f),t;if(m===l)return g(f),i;m=m.sibling}throw Error(a(188))}if(s.return!==l.return)s=f,l=m;else{for(var w=!1,A=f.child;A;){if(A===s){w=!0,s=f,l=m;break}if(A===l){w=!0,l=f,s=m;break}A=A.sibling}if(!w){for(A=m.child;A;){if(A===s){w=!0,s=m,l=f;break}if(A===l){w=!0,l=m,s=f;break}A=A.sibling}if(!w)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:i}function p(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=p(t),i!==null)return i;t=t.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),_=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var q=Symbol.for("react.client.reference");function z(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===q?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case $:return"Suspense";case j:return"SuspenseList";case J:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case _:return t.displayName||"Context";case k:return(t._context.displayName||"Context")+".Consumer";case N:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return i=t.displayName||null,i!==null?i:z(t.type)||"Memo";case P:i=t._payload,t=t._init;try{return z(t(i))}catch{}}return null}var G=Array.isArray,R=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},X=[],D=-1;function O(t){return{current:t}}function M(t){0>D||(t.current=X[D],X[D]=null,D--)}function K(t,i){D++,X[D]=t.current,t.current=i}var Q=O(null),se=O(null),ue=O(null),ce=O(null);function le(t,i){switch(K(ue,i),K(se,t),K(Q,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Xp(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Xp(i),t=Kp(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}M(Q),K(Q,t)}function de(){M(Q),M(se),M(ue)}function Ee(t){t.memoizedState!==null&&K(ce,t);var i=Q.current,s=Kp(i,t.type);i!==s&&(K(se,t),K(Q,s))}function _e(t){se.current===t&&(M(Q),M(se)),ce.current===t&&(M(ce),zs._currentValue=B)}var pe,xe;function Ce(t){if(pe===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);pe=i&&i[1]||"",xe=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+t+xe}var Ie=!1;function Ge(t,i){if(!t||Ie)return"";Ie=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ne){var ee=ne}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(ne){ee=ne}t.call(ae.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),w=m[0],A=m[1];if(w&&A){var L=w.split(`
`),W=A.split(`
`);for(f=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(l===L.length||f===W.length)for(l=L.length-1,f=W.length-1;1<=l&&0<=f&&L[l]!==W[f];)f--;for(;1<=l&&0<=f;l--,f--)if(L[l]!==W[f]){if(l!==1||f!==1)do if(l--,f--,0>f||L[l]!==W[f]){var ie=`
`+L[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=f);break}}}finally{Ie=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Ce(s):""}function mt(t,i){switch(t.tag){case 26:case 27:case 5:return Ce(t.type);case 16:return Ce("Lazy");case 13:return t.child!==i&&i!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Ge(t.type,!1);case 11:return Ge(t.type.render,!1);case 1:return Ge(t.type,!0);case 31:return Ce("Activity");default:return""}}function Ft(t){try{var i="",s=null;do i+=mt(t,s),s=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ln=Object.prototype.hasOwnProperty,ri=e.unstable_scheduleCallback,ai=e.unstable_cancelCallback,qi=e.unstable_shouldYield,Vi=e.unstable_requestPaint,yt=e.unstable_now,Cr=e.unstable_getCurrentPriorityLevel,kn=e.unstable_ImmediatePriority,si=e.unstable_UserBlockingPriority,Pi=e.unstable_NormalPriority,tu=e.unstable_LowPriority,Ar=e.unstable_IdlePriority,nu=e.log,iu=e.unstable_setDisableYieldValue,Gi=null,At=null;function xn(t){if(typeof nu=="function"&&iu(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Gi,t)}catch{}}var Nt=Math.clz32?Math.clz32:su,ru=Math.log,au=Math.LN2;function su(t){return t>>>=0,t===0?32:31-(ru(t)/au|0)|0}var Nr=256,Or=262144,Rr=4194304;function Mn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function kr(t,i,s){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~m,l!==0?f=Mn(l):(w&=A,w!==0?f=Mn(w):s||(s=A&~t,s!==0&&(f=Mn(s))))):(A=l&~m,A!==0?f=Mn(A):w!==0?f=Mn(w):s||(s=l&~t,s!==0&&(f=Mn(s)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,s=i&-i,m>=s||m===32&&(s&4194048)!==0)?i:f}function Yi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ou(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function To(){var t=Rr;return Rr<<=1,(Rr&62914560)===0&&(Rr=4194304),t}function Ya(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function Xi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function lu(t,i,s,l,f,m){var w=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var A=t.entanglements,L=t.expirationTimes,W=t.hiddenUpdates;for(s=w&~s;0<s;){var ie=31-Nt(s),ae=1<<ie;A[ie]=0,L[ie]=-1;var ee=W[ie];if(ee!==null)for(W[ie]=null,ie=0;ie<ee.length;ie++){var ne=ee[ie];ne!==null&&(ne.lane&=-536870913)}s&=~ae}l!==0&&Co(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(w&~i))}function Co(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Nt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function Ao(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var l=31-Nt(s),f=1<<l;f&i|t[l]&i&&(t[l]|=i),s&=~f}}function No(t,i){var s=i&-i;return s=(s&42)!==0?1:Xa(s),(s&(t.suspendedLanes|i))!==0?0:s}function Xa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ka(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Oo(){var t=H.p;return t!==0?t:(t=window.event,t===void 0?32:yy(t.type))}function Ro(t,i){var s=H.p;try{return H.p=t,i()}finally{H.p=s}}var _n=Math.random().toString(36).slice(2),dt="__reactFiber$"+_n,Et="__reactProps$"+_n,jn="__reactContainer$"+_n,Mr="__reactEvents$"+_n,ko="__reactListeners$"+_n,cu="__reactHandles$"+_n,Mo="__reactResources$"+_n,Ki="__reactMarker$"+_n;function Za(t){delete t[dt],delete t[Et],delete t[Mr],delete t[ko],delete t[cu]}function oi(t){var i=t[dt];if(i)return i;for(var s=t.parentNode;s;){if(i=s[jn]||s[dt]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=ty(t);t!==null;){if(s=t[dt])return s;t=ty(t)}return i}t=s,s=t.parentNode}return null}function li(t){if(t=t[dt]||t[jn]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function ci(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function ui(t){var i=t[Mo];return i||(i=t[Mo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function rt(t){t[Ki]=!0}var jo=new Set,Do={};function Dn(t,i){di(t,i),di(t+"Capture",i)}function di(t,i){for(Do[t]=i,t=0;t<i.length;t++)jo.add(i[t])}var uu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qa={},zo={};function du(t){return ln.call(zo,t)?!0:ln.call(Qa,t)?!1:uu.test(t)?zo[t]=!0:(Qa[t]=!0,!1)}function jr(t,i,s){if(du(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function Dr(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function cn(t,i,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+l)}}function Rt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function fu(t,i,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){s=""+w,m.call(this,w)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(w){s=""+w},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function zr(t){if(!t._valueTracker){var i=Uo(t)?"checked":"value";t._valueTracker=fu(t,i,""+t[i])}}function $o(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),l="";return t&&(l=Uo(t)?t.checked?"true":"false":t.value),t=l,t!==s?(i.setValue(t),!0):!1}function Ur(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hu=/[\n"\\]/g;function Tt(t){return t.replace(hu,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ja(t,i,s,l,f,m,w,A){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),i!=null?w==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Rt(i)):t.value!==""+Rt(i)&&(t.value=""+Rt(i)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),i!=null?$r(t,w,Rt(i)):s!=null?$r(t,w,Rt(s)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Rt(A):t.removeAttribute("name")}function Lo(t,i,s,l,f,m,w,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){zr(t);return}s=s!=null?""+Rt(s):"",i=i!=null?""+Rt(i):s,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w),zr(t)}function $r(t,i,s){i==="number"&&Ur(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Lr(t,i,s,l){if(t=t.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=i.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Rt(s),i=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function qh(t,i,s){if(i!=null&&(i=""+Rt(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+Rt(s):""}function Vh(t,i,s,l){if(i==null){if(l!=null){if(s!=null)throw Error(a(92));if(G(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),i=s}s=Rt(i),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),zr(t)}function Hr(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var tx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ph(t,i,s){var l=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,s):typeof s!="number"||s===0||tx.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function Gh(t,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&s[f]!==l&&Ph(t,f,l)}else for(var m in i)i.hasOwnProperty(m)&&Ph(t,m,i[m])}function gu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ix=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(t){return ix.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function zn(){}var mu=null;function pu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Br=null,Ir=null;function Yh(t){var i=li(t);if(i&&(t=i.stateNode)){var s=t[Et]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ja(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Tt(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var l=s[i];if(l!==t&&l.form===t.form){var f=l[Et]||null;if(!f)throw Error(a(90));Ja(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)l=s[i],l.form===t.form&&$o(l)}break e;case"textarea":qh(t,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&Lr(t,!!s.multiple,i,!1)}}}var yu=!1;function Xh(t,i,s){if(yu)return t(i,s);yu=!0;try{var l=t(i);return l}finally{if(yu=!1,(Br!==null||Ir!==null)&&(Cl(),Br&&(i=Br,t=Ir,Ir=Br=null,Yh(i),t)))for(i=0;i<t.length;i++)Yh(t[i])}}function Fa(t,i){var s=t.stateNode;if(s===null)return null;var l=s[Et]||null;if(l===null)return null;s=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=!1;if(Un)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){vu=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{vu=!1}var fi=null,bu=null,Bo=null;function Kh(){if(Bo)return Bo;var t,i=bu,s=i.length,l,f="value"in fi?fi.value:fi.textContent,m=f.length;for(t=0;t<s&&i[t]===f[t];t++);var w=s-t;for(l=1;l<=w&&i[s-l]===f[m-l];l++);return Bo=f.slice(t,1<l?1-l:void 0)}function Io(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function qo(){return!0}function Zh(){return!1}function kt(t){function i(s,l,f,m,w){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?qo:Zh,this.isPropagationStopped=Zh,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),i}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vo=kt(Zi),es=v({},Zi,{view:0,detail:0}),rx=kt(es),wu,xu,ts,Po=v({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ts&&(ts&&t.type==="mousemove"?(wu=t.screenX-ts.screenX,xu=t.screenY-ts.screenY):xu=wu=0,ts=t),wu)},movementY:function(t){return"movementY"in t?t.movementY:xu}}),Qh=kt(Po),ax=v({},Po,{dataTransfer:0}),sx=kt(ax),ox=v({},es,{relatedTarget:0}),_u=kt(ox),lx=v({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),cx=kt(lx),ux=v({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dx=kt(ux),fx=v({},Zi,{data:0}),Jh=kt(fx),hx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function px(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=mx[t])?!!i[t]:!1}function Su(){return px}var yx=v({},es,{key:function(t){if(t.key){var i=hx[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Io(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(t){return t.type==="keypress"?Io(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Io(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vx=kt(yx),bx=v({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fh=kt(bx),wx=v({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),xx=kt(wx),_x=v({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sx=kt(_x),Ex=v({},Po,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tx=kt(Ex),Cx=v({},Zi,{newState:0,oldState:0}),Ax=kt(Cx),Nx=[9,13,27,32],Eu=Un&&"CompositionEvent"in window,ns=null;Un&&"documentMode"in document&&(ns=document.documentMode);var Ox=Un&&"TextEvent"in window&&!ns,Wh=Un&&(!Eu||ns&&8<ns&&11>=ns),eg=" ",tg=!1;function ng(t,i){switch(t){case"keyup":return Nx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ig(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qr=!1;function Rx(t,i){switch(t){case"compositionend":return ig(i);case"keypress":return i.which!==32?null:(tg=!0,eg);case"textInput":return t=i.data,t===eg&&tg?null:t;default:return null}}function kx(t,i){if(qr)return t==="compositionend"||!Eu&&ng(t,i)?(t=Kh(),Bo=bu=fi=null,qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Wh&&i.locale!=="ko"?null:i.data;default:return null}}var Mx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Mx[t.type]:i==="textarea"}function ag(t,i,s,l){Br?Ir?Ir.push(l):Ir=[l]:Br=l,i=jl(i,"onChange"),0<i.length&&(s=new Vo("onChange","change",null,s,l),t.push({event:s,listeners:i}))}var is=null,rs=null;function jx(t){Ip(t,0)}function Go(t){var i=ci(t);if($o(i))return t}function sg(t,i){if(t==="change")return i}var og=!1;if(Un){var Tu;if(Un){var Cu="oninput"in document;if(!Cu){var lg=document.createElement("div");lg.setAttribute("oninput","return;"),Cu=typeof lg.oninput=="function"}Tu=Cu}else Tu=!1;og=Tu&&(!document.documentMode||9<document.documentMode)}function cg(){is&&(is.detachEvent("onpropertychange",ug),rs=is=null)}function ug(t){if(t.propertyName==="value"&&Go(rs)){var i=[];ag(i,rs,t,pu(t)),Xh(jx,i)}}function Dx(t,i,s){t==="focusin"?(cg(),is=i,rs=s,is.attachEvent("onpropertychange",ug)):t==="focusout"&&cg()}function zx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Go(rs)}function Ux(t,i){if(t==="click")return Go(i)}function $x(t,i){if(t==="input"||t==="change")return Go(i)}function Lx(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Bt=typeof Object.is=="function"?Object.is:Lx;function as(t,i){if(Bt(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),l=Object.keys(i);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!ln.call(i,f)||!Bt(t[f],i[f]))return!1}return!0}function dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fg(t,i){var s=dg(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=i&&l>=i)return{node:s,offset:i-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=dg(s)}}function hg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?hg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function gg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ur(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=Ur(t.document)}return i}function Au(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Hx=Un&&"documentMode"in document&&11>=document.documentMode,Vr=null,Nu=null,ss=null,Ou=!1;function mg(t,i,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ou||Vr==null||Vr!==Ur(l)||(l=Vr,"selectionStart"in l&&Au(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ss&&as(ss,l)||(ss=l,l=jl(Nu,"onSelect"),0<l.length&&(i=new Vo("onSelect","select",null,i,s),t.push({event:i,listeners:l}),i.target=Vr)))}function Qi(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var Pr={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionrun:Qi("Transition","TransitionRun"),transitionstart:Qi("Transition","TransitionStart"),transitioncancel:Qi("Transition","TransitionCancel"),transitionend:Qi("Transition","TransitionEnd")},Ru={},pg={};Un&&(pg=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Ji(t){if(Ru[t])return Ru[t];if(!Pr[t])return t;var i=Pr[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in pg)return Ru[t]=i[s];return t}var yg=Ji("animationend"),vg=Ji("animationiteration"),bg=Ji("animationstart"),Bx=Ji("transitionrun"),Ix=Ji("transitionstart"),qx=Ji("transitioncancel"),wg=Ji("transitionend"),xg=new Map,ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ku.push("scrollEnd");function un(t,i){xg.set(t,i),Dn(i,[t])}var Yo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Wt=[],Gr=0,Mu=0;function Xo(){for(var t=Gr,i=Mu=Gr=0;i<t;){var s=Wt[i];Wt[i++]=null;var l=Wt[i];Wt[i++]=null;var f=Wt[i];Wt[i++]=null;var m=Wt[i];if(Wt[i++]=null,l!==null&&f!==null){var w=l.pending;w===null?f.next=f:(f.next=w.next,w.next=f),l.pending=f}m!==0&&_g(s,f,m)}}function Ko(t,i,s,l){Wt[Gr++]=t,Wt[Gr++]=i,Wt[Gr++]=s,Wt[Gr++]=l,Mu|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function ju(t,i,s,l){return Ko(t,i,s,l),Zo(t)}function Fi(t,i){return Ko(t,null,null,i),Zo(t)}function _g(t,i,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var f=!1,m=t.return;m!==null;)m.childLanes|=s,l=m.alternate,l!==null&&(l.childLanes|=s),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&i!==null&&(f=31-Nt(s),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=s|536870912),m):null}function Zo(t){if(50<Ns)throw Ns=0,qd=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Yr={};function Vx(t,i,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,i,s,l){return new Vx(t,i,s,l)}function Du(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $n(t,i){var s=t.alternate;return s===null?(s=It(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Sg(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Qo(t,i,s,l,f,m){var w=0;if(l=t,typeof t=="function")Du(t)&&(w=1);else if(typeof t=="string")w=K_(t,s,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case J:return t=It(31,s,i,f),t.elementType=J,t.lanes=m,t;case x:return Wi(s.children,f,m,i);case C:w=8,f|=24;break;case T:return t=It(12,s,i,f|2),t.elementType=T,t.lanes=m,t;case $:return t=It(13,s,i,f),t.elementType=$,t.lanes=m,t;case j:return t=It(19,s,i,f),t.elementType=j,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _:w=10;break e;case k:w=9;break e;case N:w=11;break e;case U:w=14;break e;case P:w=16,l=null;break e}w=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=It(w,s,i,f),i.elementType=t,i.type=l,i.lanes=m,i}function Wi(t,i,s,l){return t=It(7,t,l,i),t.lanes=s,t}function zu(t,i,s){return t=It(6,t,null,i),t.lanes=s,t}function Eg(t){var i=It(18,null,null,0);return i.stateNode=t,i}function Uu(t,i,s){return i=It(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Tg=new WeakMap;function en(t,i){if(typeof t=="object"&&t!==null){var s=Tg.get(t);return s!==void 0?s:(i={value:t,source:i,stack:Ft(i)},Tg.set(t,i),i)}return{value:t,source:i,stack:Ft(i)}}var Xr=[],Kr=0,Jo=null,os=0,tn=[],nn=0,hi=null,Sn=1,En="";function Ln(t,i){Xr[Kr++]=os,Xr[Kr++]=Jo,Jo=t,os=i}function Cg(t,i,s){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hi,hi=t;var l=Sn;t=En;var f=32-Nt(l)-1;l&=~(1<<f),s+=1;var m=32-Nt(i)+f;if(30<m){var w=f-f%5;m=(l&(1<<w)-1).toString(32),l>>=w,f-=w,Sn=1<<32-Nt(i)+f|s<<f|l,En=m+t}else Sn=1<<m|s<<f|l,En=t}function $u(t){t.return!==null&&(Ln(t,1),Cg(t,1,0))}function Lu(t){for(;t===Jo;)Jo=Xr[--Kr],Xr[Kr]=null,os=Xr[--Kr],Xr[Kr]=null;for(;t===hi;)hi=tn[--nn],tn[nn]=null,En=tn[--nn],tn[nn]=null,Sn=tn[--nn],tn[nn]=null}function Ag(t,i){tn[nn++]=Sn,tn[nn++]=En,tn[nn++]=hi,Sn=i.id,En=i.overflow,hi=t}var vt=null,Ke=null,je=!1,gi=null,rn=!1,Hu=Error(a(519));function mi(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ls(en(i,t)),Hu}function Ng(t){var i=t.stateNode,s=t.type,l=t.memoizedProps;switch(i[dt]=t,i[Et]=l,s){case"dialog":Re("cancel",i),Re("close",i);break;case"iframe":case"object":case"embed":Re("load",i);break;case"video":case"audio":for(s=0;s<Rs.length;s++)Re(Rs[s],i);break;case"source":Re("error",i);break;case"img":case"image":case"link":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"input":Re("invalid",i),Lo(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Re("invalid",i);break;case"textarea":Re("invalid",i),Vh(i,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||l.suppressHydrationWarning===!0||Gp(i.textContent,s)?(l.popover!=null&&(Re("beforetoggle",i),Re("toggle",i)),l.onScroll!=null&&Re("scroll",i),l.onScrollEnd!=null&&Re("scrollend",i),l.onClick!=null&&(i.onclick=zn),i=!0):i=!1,i||mi(t,!0)}function Og(t){for(vt=t.return;vt;)switch(vt.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:vt=vt.return}}function Zr(t){if(t!==vt)return!1;if(!je)return Og(t),je=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||rf(t.type,t.memoizedProps)),s=!s),s&&Ke&&mi(t),Og(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ke=ey(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ke=ey(t)}else i===27?(i=Ke,Oi(t.type)?(t=cf,cf=null,Ke=t):Ke=i):Ke=vt?sn(t.stateNode.nextSibling):null;return!0}function er(){Ke=vt=null,je=!1}function Bu(){var t=gi;return t!==null&&(zt===null?zt=t:zt.push.apply(zt,t),gi=null),t}function ls(t){gi===null?gi=[t]:gi.push(t)}var Iu=O(null),tr=null,Hn=null;function pi(t,i,s){K(Iu,i._currentValue),i._currentValue=s}function Bn(t){t._currentValue=Iu.current,M(Iu)}function qu(t,i,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===s)break;t=t.return}}function Vu(t,i,s,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var w=f.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=f;for(var L=0;L<i.length;L++)if(A.context===i[L]){m.lanes|=s,A=m.alternate,A!==null&&(A.lanes|=s),qu(m.return,s,t),l||(w=null);break e}m=A.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(a(341));w.lanes|=s,m=w.alternate,m!==null&&(m.lanes|=s),qu(w,s,t),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===t){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Qr(t,i,s,l){t=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(a(387));if(w=w.memoizedProps,w!==null){var A=f.type;Bt(f.pendingProps.value,w.value)||(t!==null?t.push(A):t=[A])}}else if(f===ce.current){if(w=f.alternate,w===null)throw Error(a(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(zs):t=[zs])}f=f.return}t!==null&&Vu(i,t,s,l),i.flags|=262144}function Fo(t){for(t=t.firstContext;t!==null;){if(!Bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function nr(t){tr=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return Rg(tr,t)}function Wo(t,i){return tr===null&&nr(t),Rg(t,i)}function Rg(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Hn===null){if(t===null)throw Error(a(308));Hn=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Hn=Hn.next=i;return s}var Px=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},Gx=e.unstable_scheduleCallback,Yx=e.unstable_NormalPriority,at={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new Px,data:new Map,refCount:0}}function cs(t){t.refCount--,t.refCount===0&&Gx(Yx,function(){t.controller.abort()})}var us=null,Gu=0,Jr=0,Fr=null;function Xx(t,i){if(us===null){var s=us=[];Gu=0,Jr=Kd(),Fr={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Gu++,i.then(kg,kg),i}function kg(){if(--Gu===0&&us!==null){Fr!==null&&(Fr.status="fulfilled");var t=us;us=null,Jr=0,Fr=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Kx(t,i){var s=[],l={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),l}var Mg=R.S;R.S=function(t,i){mp=yt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Xx(t,i),Mg!==null&&Mg(t,i)};var ir=O(null);function Yu(){var t=ir.current;return t!==null?t:Ye.pooledCache}function el(t,i){i===null?K(ir,ir.current):K(ir,i.pool)}function jg(){var t=Yu();return t===null?null:{parent:at._currentValue,pool:t}}var Wr=Error(a(460)),Xu=Error(a(474)),tl=Error(a(542)),nl={then:function(){}};function Dg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zg(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(zn,zn),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$g(t),t;default:if(typeof i.status=="string")i.then(zn,zn);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$g(t),t}throw ar=i,Wr}}function rr(t){try{var i=t._init;return i(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ar=s,Wr):s}}var ar=null;function Ug(){if(ar===null)throw Error(a(459));var t=ar;return ar=null,t}function $g(t){if(t===Wr||t===tl)throw Error(a(483))}var ea=null,ds=0;function il(t){var i=ds;return ds+=1,ea===null&&(ea=[]),zg(ea,t,i)}function fs(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function rl(t,i){throw i.$$typeof===y?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Lg(t){function i(Y,I){if(t){var F=Y.deletions;F===null?(Y.deletions=[I],Y.flags|=16):F.push(I)}}function s(Y,I){if(!t)return null;for(;I!==null;)i(Y,I),I=I.sibling;return null}function l(Y){for(var I=new Map;Y!==null;)Y.key!==null?I.set(Y.key,Y):I.set(Y.index,Y),Y=Y.sibling;return I}function f(Y,I){return Y=$n(Y,I),Y.index=0,Y.sibling=null,Y}function m(Y,I,F){return Y.index=F,t?(F=Y.alternate,F!==null?(F=F.index,F<I?(Y.flags|=67108866,I):F):(Y.flags|=67108866,I)):(Y.flags|=1048576,I)}function w(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function A(Y,I,F,re){return I===null||I.tag!==6?(I=zu(F,Y.mode,re),I.return=Y,I):(I=f(I,F),I.return=Y,I)}function L(Y,I,F,re){var ye=F.type;return ye===x?ie(Y,I,F.props.children,re,F.key):I!==null&&(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===P&&rr(ye)===I.type)?(I=f(I,F.props),fs(I,F),I.return=Y,I):(I=Qo(F.type,F.key,F.props,null,Y.mode,re),fs(I,F),I.return=Y,I)}function W(Y,I,F,re){return I===null||I.tag!==4||I.stateNode.containerInfo!==F.containerInfo||I.stateNode.implementation!==F.implementation?(I=Uu(F,Y.mode,re),I.return=Y,I):(I=f(I,F.children||[]),I.return=Y,I)}function ie(Y,I,F,re,ye){return I===null||I.tag!==7?(I=Wi(F,Y.mode,re,ye),I.return=Y,I):(I=f(I,F),I.return=Y,I)}function ae(Y,I,F){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=zu(""+I,Y.mode,F),I.return=Y,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return F=Qo(I.type,I.key,I.props,null,Y.mode,F),fs(F,I),F.return=Y,F;case E:return I=Uu(I,Y.mode,F),I.return=Y,I;case P:return I=rr(I),ae(Y,I,F)}if(G(I)||Z(I))return I=Wi(I,Y.mode,F,null),I.return=Y,I;if(typeof I.then=="function")return ae(Y,il(I),F);if(I.$$typeof===_)return ae(Y,Wo(Y,I),F);rl(Y,I)}return null}function ee(Y,I,F,re){var ye=I!==null?I.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ye!==null?null:A(Y,I,""+F,re);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return F.key===ye?L(Y,I,F,re):null;case E:return F.key===ye?W(Y,I,F,re):null;case P:return F=rr(F),ee(Y,I,F,re)}if(G(F)||Z(F))return ye!==null?null:ie(Y,I,F,re,null);if(typeof F.then=="function")return ee(Y,I,il(F),re);if(F.$$typeof===_)return ee(Y,I,Wo(Y,F),re);rl(Y,F)}return null}function ne(Y,I,F,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Y=Y.get(F)||null,A(I,Y,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return Y=Y.get(re.key===null?F:re.key)||null,L(I,Y,re,ye);case E:return Y=Y.get(re.key===null?F:re.key)||null,W(I,Y,re,ye);case P:return re=rr(re),ne(Y,I,F,re,ye)}if(G(re)||Z(re))return Y=Y.get(F)||null,ie(I,Y,re,ye,null);if(typeof re.then=="function")return ne(Y,I,F,il(re),ye);if(re.$$typeof===_)return ne(Y,I,F,Wo(I,re),ye);rl(I,re)}return null}function fe(Y,I,F,re){for(var ye=null,ze=null,ge=I,Ne=I=0,Me=null;ge!==null&&Ne<F.length;Ne++){ge.index>Ne?(Me=ge,ge=null):Me=ge.sibling;var Ue=ee(Y,ge,F[Ne],re);if(Ue===null){ge===null&&(ge=Me);break}t&&ge&&Ue.alternate===null&&i(Y,ge),I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue,ge=Me}if(Ne===F.length)return s(Y,ge),je&&Ln(Y,Ne),ye;if(ge===null){for(;Ne<F.length;Ne++)ge=ae(Y,F[Ne],re),ge!==null&&(I=m(ge,I,Ne),ze===null?ye=ge:ze.sibling=ge,ze=ge);return je&&Ln(Y,Ne),ye}for(ge=l(ge);Ne<F.length;Ne++)Me=ne(ge,Y,Ne,F[Ne],re),Me!==null&&(t&&Me.alternate!==null&&ge.delete(Me.key===null?Ne:Me.key),I=m(Me,I,Ne),ze===null?ye=Me:ze.sibling=Me,ze=Me);return t&&ge.forEach(function(Di){return i(Y,Di)}),je&&Ln(Y,Ne),ye}function ve(Y,I,F,re){if(F==null)throw Error(a(151));for(var ye=null,ze=null,ge=I,Ne=I=0,Me=null,Ue=F.next();ge!==null&&!Ue.done;Ne++,Ue=F.next()){ge.index>Ne?(Me=ge,ge=null):Me=ge.sibling;var Di=ee(Y,ge,Ue.value,re);if(Di===null){ge===null&&(ge=Me);break}t&&ge&&Di.alternate===null&&i(Y,ge),I=m(Di,I,Ne),ze===null?ye=Di:ze.sibling=Di,ze=Di,ge=Me}if(Ue.done)return s(Y,ge),je&&Ln(Y,Ne),ye;if(ge===null){for(;!Ue.done;Ne++,Ue=F.next())Ue=ae(Y,Ue.value,re),Ue!==null&&(I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue);return je&&Ln(Y,Ne),ye}for(ge=l(ge);!Ue.done;Ne++,Ue=F.next())Ue=ne(ge,Y,Ne,Ue.value,re),Ue!==null&&(t&&Ue.alternate!==null&&ge.delete(Ue.key===null?Ne:Ue.key),I=m(Ue,I,Ne),ze===null?ye=Ue:ze.sibling=Ue,ze=Ue);return t&&ge.forEach(function(aS){return i(Y,aS)}),je&&Ln(Y,Ne),ye}function Pe(Y,I,F,re){if(typeof F=="object"&&F!==null&&F.type===x&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case b:e:{for(var ye=F.key;I!==null;){if(I.key===ye){if(ye=F.type,ye===x){if(I.tag===7){s(Y,I.sibling),re=f(I,F.props.children),re.return=Y,Y=re;break e}}else if(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===P&&rr(ye)===I.type){s(Y,I.sibling),re=f(I,F.props),fs(re,F),re.return=Y,Y=re;break e}s(Y,I);break}else i(Y,I);I=I.sibling}F.type===x?(re=Wi(F.props.children,Y.mode,re,F.key),re.return=Y,Y=re):(re=Qo(F.type,F.key,F.props,null,Y.mode,re),fs(re,F),re.return=Y,Y=re)}return w(Y);case E:e:{for(ye=F.key;I!==null;){if(I.key===ye)if(I.tag===4&&I.stateNode.containerInfo===F.containerInfo&&I.stateNode.implementation===F.implementation){s(Y,I.sibling),re=f(I,F.children||[]),re.return=Y,Y=re;break e}else{s(Y,I);break}else i(Y,I);I=I.sibling}re=Uu(F,Y.mode,re),re.return=Y,Y=re}return w(Y);case P:return F=rr(F),Pe(Y,I,F,re)}if(G(F))return fe(Y,I,F,re);if(Z(F)){if(ye=Z(F),typeof ye!="function")throw Error(a(150));return F=ye.call(F),ve(Y,I,F,re)}if(typeof F.then=="function")return Pe(Y,I,il(F),re);if(F.$$typeof===_)return Pe(Y,I,Wo(Y,F),re);rl(Y,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,I!==null&&I.tag===6?(s(Y,I.sibling),re=f(I,F),re.return=Y,Y=re):(s(Y,I),re=zu(F,Y.mode,re),re.return=Y,Y=re),w(Y)):s(Y,I)}return function(Y,I,F,re){try{ds=0;var ye=Pe(Y,I,F,re);return ea=null,ye}catch(ge){if(ge===Wr||ge===tl)throw ge;var ze=It(29,ge,null,Y.mode);return ze.lanes=re,ze.return=Y,ze}finally{}}}var sr=Lg(!0),Hg=Lg(!1),yi=!1;function Ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zu(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function vi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function bi(t,i,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Zo(t),_g(t,null,s),i}return Ko(t,l,i,s),Zo(t)}function hs(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,Ao(t,s)}}function Qu(t,i){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var w={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?f=m=w:m=m.next=w,s=s.next}while(s!==null);m===null?f=m=i:m=m.next=i}else f=m=i;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var Ju=!1;function gs(){if(Ju){var t=Fr;if(t!==null)throw t}}function ms(t,i,s,l){Ju=!1;var f=t.updateQueue;yi=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var L=A,W=L.next;L.next=null,w===null?m=W:w.next=W,w=L;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==w&&(A===null?ie.firstBaseUpdate=W:A.next=W,ie.lastBaseUpdate=L))}if(m!==null){var ae=f.baseState;w=0,ie=W=L=null,A=m;do{var ee=A.lane&-536870913,ne=ee!==A.lane;if(ne?(ke&ee)===ee:(l&ee)===ee){ee!==0&&ee===Jr&&(Ju=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var fe=t,ve=A;ee=i;var Pe=s;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){ae=fe.call(Pe,ae,ee);break e}ae=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,ee=typeof fe=="function"?fe.call(Pe,ae,ee):fe,ee==null)break e;ae=v({},ae,ee);break e;case 2:yi=!0}}ee=A.callback,ee!==null&&(t.flags|=64,ne&&(t.flags|=8192),ne=f.callbacks,ne===null?f.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(W=ie=ne,L=ae):ie=ie.next=ne,w|=ee;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ne=A,A=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);ie===null&&(L=ae),f.baseState=L,f.firstBaseUpdate=W,f.lastBaseUpdate=ie,m===null&&(f.shared.lanes=0),Ei|=w,t.lanes=w,t.memoizedState=ae}}function Bg(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function Ig(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Bg(s[t],i)}var ta=O(null),al=O(0);function qg(t,i){t=Zn,K(al,t),K(ta,i),Zn=t|i.baseLanes}function Fu(){K(al,Zn),K(ta,ta.current)}function Wu(){Zn=al.current,M(ta),M(al)}var qt=O(null),an=null;function wi(t){var i=t.alternate;K(nt,nt.current&1),K(qt,t),an===null&&(i===null||ta.current!==null||i.memoizedState!==null)&&(an=t)}function ed(t){K(nt,nt.current),K(qt,t),an===null&&(an=t)}function Vg(t){t.tag===22?(K(nt,nt.current),K(qt,t),an===null&&(an=t)):xi()}function xi(){K(nt,nt.current),K(qt,qt.current)}function Vt(t){M(qt),an===t&&(an=null),M(nt)}var nt=O(0);function sl(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||of(s)||lf(s)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var In=0,Ae=null,qe=null,st=null,ol=!1,na=!1,or=!1,ll=0,ps=0,ia=null,Zx=0;function We(){throw Error(a(321))}function td(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!Bt(t[s],i[s]))return!1;return!0}function nd(t,i,s,l,f,m){return In=m,Ae=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=t===null||t.memoizedState===null?Cm:yd,or=!1,m=s(l,f),or=!1,na&&(m=Gg(i,s,l,f)),Pg(t),m}function Pg(t){R.H=bs;var i=qe!==null&&qe.next!==null;if(In=0,st=qe=Ae=null,ol=!1,ps=0,ia=null,i)throw Error(a(300));t===null||ot||(t=t.dependencies,t!==null&&Fo(t)&&(ot=!0))}function Gg(t,i,s,l){Ae=t;var f=0;do{if(na&&(ia=null),ps=0,na=!1,25<=f)throw Error(a(301));if(f+=1,st=qe=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}R.H=Am,m=i(s,l)}while(na);return m}function Qx(){var t=R.H,i=t.useState()[0];return i=typeof i.then=="function"?ys(i):i,t=t.useState()[0],(qe!==null?qe.memoizedState:null)!==t&&(Ae.flags|=1024),i}function id(){var t=ll!==0;return ll=0,t}function rd(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function ad(t){if(ol){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ol=!1}In=0,st=qe=Ae=null,na=!1,ps=ll=0,ia=null}function Ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ae.memoizedState=st=t:st=st.next=t,st}function it(){if(qe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var i=st===null?Ae.memoizedState:st.next;if(i!==null)st=i,qe=t;else{if(t===null)throw Ae.alternate===null?Error(a(467)):Error(a(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},st===null?Ae.memoizedState=st=t:st=st.next=t}return st}function cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ys(t){var i=ps;return ps+=1,ia===null&&(ia=[]),t=zg(ia,t,i),i=Ae,(st===null?i.memoizedState:st.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?Cm:yd),t}function ul(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ys(t);if(t.$$typeof===_)return bt(t)}throw Error(a(438,String(t)))}function sd(t){var i=null,s=Ae.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var l=Ae.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=cl(),Ae.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),l=0;l<t;l++)s[l]=oe;return i.index++,s}function qn(t,i){return typeof i=="function"?i(t):i}function dl(t){var i=it();return od(i,qe,t)}function od(t,i,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}i.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{i=f.next;var A=w=null,L=null,W=i,ie=!1;do{var ae=W.lane&-536870913;if(ae!==W.lane?(ke&ae)===ae:(In&ae)===ae){var ee=W.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ae===Jr&&(ie=!0);else if((In&ee)===ee){W=W.next,ee===Jr&&(ie=!0);continue}else ae={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(A=L=ae,w=m):L=L.next=ae,Ae.lanes|=ee,Ei|=ee;ae=W.action,or&&s(m,ae),m=W.hasEagerState?W.eagerState:s(m,ae)}else ee={lane:ae,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(A=L=ee,w=m):L=L.next=ee,Ae.lanes|=ae,Ei|=ae;W=W.next}while(W!==null&&W!==i);if(L===null?w=m:L.next=A,!Bt(m,t.memoizedState)&&(ot=!0,ie&&(s=Fr,s!==null)))throw s;t.memoizedState=m,t.baseState=w,t.baseQueue=L,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function ld(t){var i=it(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,f=s.pending,m=i.memoizedState;if(f!==null){s.pending=null;var w=f=f.next;do m=t(m,w.action),w=w.next;while(w!==f);Bt(m,i.memoizedState)||(ot=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),s.lastRenderedState=m}return[m,l]}function Yg(t,i,s){var l=Ae,f=it(),m=je;if(m){if(s===void 0)throw Error(a(407));s=s()}else s=i();var w=!Bt((qe||f).memoizedState,s);if(w&&(f.memoizedState=s,ot=!0),f=f.queue,dd(Zg.bind(null,l,f,t),[t]),f.getSnapshot!==i||w||st!==null&&st.memoizedState.tag&1){if(l.flags|=2048,ra(9,{destroy:void 0},Kg.bind(null,l,f,s,i),null),Ye===null)throw Error(a(349));m||(In&127)!==0||Xg(l,i,s)}return s}function Xg(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=Ae.updateQueue,i===null?(i=cl(),Ae.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function Kg(t,i,s,l){i.value=s,i.getSnapshot=l,Qg(i)&&Jg(t)}function Zg(t,i,s){return s(function(){Qg(i)&&Jg(t)})}function Qg(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!Bt(t,s)}catch{return!0}}function Jg(t){var i=Fi(t,2);i!==null&&Ut(i,t,2)}function cd(t){var i=Ot();if(typeof t=="function"){var s=t;if(t=s(),or){xn(!0);try{s()}finally{xn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:t},i}function Fg(t,i,s,l){return t.baseState=s,od(t,qe,typeof l=="function"?l:qn)}function Jx(t,i,s,l,f){if(gl(t))throw Error(a(485));if(t=i.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};R.T!==null?s(!0):m.isTransition=!1,l(m),s=i.pending,s===null?(m.next=i.pending=m,Wg(i,m)):(m.next=s.next,i.pending=s.next=m)}}function Wg(t,i){var s=i.action,l=i.payload,f=t.state;if(i.isTransition){var m=R.T,w={};R.T=w;try{var A=s(f,l),L=R.S;L!==null&&L(w,A),em(t,i,A)}catch(W){ud(t,i,W)}finally{m!==null&&w.types!==null&&(m.types=w.types),R.T=m}}else try{m=s(f,l),em(t,i,m)}catch(W){ud(t,i,W)}}function em(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){tm(t,i,l)},function(l){return ud(t,i,l)}):tm(t,i,s)}function tm(t,i,s){i.status="fulfilled",i.value=s,nm(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,Wg(t,s)))}function ud(t,i,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=s,nm(i),i=i.next;while(i!==l)}t.action=null}function nm(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function im(t,i){return i}function rm(t,i){if(je){var s=Ye.formState;if(s!==null){e:{var l=Ae;if(je){if(Ke){t:{for(var f=Ke,m=rn;f.nodeType!==8;){if(!m){f=null;break t}if(f=sn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ke=sn(f.nextSibling),l=f.data==="F!";break e}}mi(l)}l=!1}l&&(i=s[0])}}return s=Ot(),s.memoizedState=s.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:im,lastRenderedState:i},s.queue=l,s=Sm.bind(null,Ae,l),l.dispatch=s,l=cd(!1),m=pd.bind(null,Ae,!1,l.queue),l=Ot(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,s=Jx.bind(null,Ae,f,m,s),f.dispatch=s,l.memoizedState=t,[i,s,!1]}function am(t){var i=it();return sm(i,qe,t)}function sm(t,i,s){if(i=od(t,i,im)[0],t=dl(qn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ys(i)}catch(w){throw w===Wr?tl:w}else l=i;i=it();var f=i.queue,m=f.dispatch;return s!==i.memoizedState&&(Ae.flags|=2048,ra(9,{destroy:void 0},Fx.bind(null,f,s),null)),[l,m,t]}function Fx(t,i){t.action=i}function om(t){var i=it(),s=qe;if(s!==null)return sm(i,s,t);it(),i=i.memoizedState,s=it();var l=s.queue.dispatch;return s.memoizedState=t,[i,l,!1]}function ra(t,i,s,l){return t={tag:t,create:s,deps:l,inst:i,next:null},i=Ae.updateQueue,i===null&&(i=cl(),Ae.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,i.lastEffect=t),t}function lm(){return it().memoizedState}function fl(t,i,s,l){var f=Ot();Ae.flags|=t,f.memoizedState=ra(1|i,{destroy:void 0},s,l===void 0?null:l)}function hl(t,i,s,l){var f=it();l=l===void 0?null:l;var m=f.memoizedState.inst;qe!==null&&l!==null&&td(l,qe.memoizedState.deps)?f.memoizedState=ra(i,m,s,l):(Ae.flags|=t,f.memoizedState=ra(1|i,m,s,l))}function cm(t,i){fl(8390656,8,t,i)}function dd(t,i){hl(2048,8,t,i)}function Wx(t){Ae.flags|=4;var i=Ae.updateQueue;if(i===null)i=cl(),Ae.updateQueue=i,i.events=[t];else{var s=i.events;s===null?i.events=[t]:s.push(t)}}function um(t){var i=it().memoizedState;return Wx({ref:i,nextImpl:t}),function(){if(($e&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function dm(t,i){return hl(4,2,t,i)}function fm(t,i){return hl(4,4,t,i)}function hm(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function gm(t,i,s){s=s!=null?s.concat([t]):null,hl(4,4,hm.bind(null,i,t),s)}function fd(){}function mm(t,i){var s=it();i=i===void 0?null:i;var l=s.memoizedState;return i!==null&&td(i,l[1])?l[0]:(s.memoizedState=[t,i],t)}function pm(t,i){var s=it();i=i===void 0?null:i;var l=s.memoizedState;if(i!==null&&td(i,l[1]))return l[0];if(l=t(),or){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,i],l}function hd(t,i,s){return s===void 0||(In&1073741824)!==0&&(ke&261930)===0?t.memoizedState=i:(t.memoizedState=s,t=yp(),Ae.lanes|=t,Ei|=t,s)}function ym(t,i,s,l){return Bt(s,i)?s:ta.current!==null?(t=hd(t,s,l),Bt(t,i)||(ot=!0),t):(In&42)===0||(In&1073741824)!==0&&(ke&261930)===0?(ot=!0,t.memoizedState=s):(t=yp(),Ae.lanes|=t,Ei|=t,i)}function vm(t,i,s,l,f){var m=H.p;H.p=m!==0&&8>m?m:8;var w=R.T,A={};R.T=A,pd(t,!1,i,s);try{var L=f(),W=R.S;if(W!==null&&W(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=Kx(L,l);vs(t,i,ie,Yt(t))}else vs(t,i,l,Yt(t))}catch(ae){vs(t,i,{then:function(){},status:"rejected",reason:ae},Yt())}finally{H.p=m,w!==null&&A.types!==null&&(w.types=A.types),R.T=w}}function e_(){}function gd(t,i,s,l){if(t.tag!==5)throw Error(a(476));var f=bm(t).queue;vm(t,f,i,B,s===null?e_:function(){return wm(t),s(l)})}function bm(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:B},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function wm(t){var i=bm(t);i.next===null&&(i=t.alternate.memoizedState),vs(t,i.next.queue,{},Yt())}function md(){return bt(zs)}function xm(){return it().memoizedState}function _m(){return it().memoizedState}function t_(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=Yt();t=vi(s);var l=bi(i,t,s);l!==null&&(Ut(l,i,s),hs(l,i,s)),i={cache:Pu()},t.payload=i;return}i=i.return}}function n_(t,i,s){var l=Yt();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},gl(t)?Em(i,s):(s=ju(t,i,s,l),s!==null&&(Ut(s,t,l),Tm(s,i,l)))}function Sm(t,i,s){var l=Yt();vs(t,i,s,l)}function vs(t,i,s,l){var f={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(gl(t))Em(i,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,A=m(w,s);if(f.hasEagerState=!0,f.eagerState=A,Bt(A,w))return Ko(t,i,f,0),Ye===null&&Xo(),!1}catch{}finally{}if(s=ju(t,i,f,l),s!==null)return Ut(s,t,l),Tm(s,i,l),!0}return!1}function pd(t,i,s,l){if(l={lane:2,revertLane:Kd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},gl(t)){if(i)throw Error(a(479))}else i=ju(t,s,l,2),i!==null&&Ut(i,t,2)}function gl(t){var i=t.alternate;return t===Ae||i!==null&&i===Ae}function Em(t,i){na=ol=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Tm(t,i,s){if((s&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,Ao(t,s)}}var bs={readContext:bt,use:ul,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};bs.useEffectEvent=We;var Cm={readContext:bt,use:ul,useCallback:function(t,i){return Ot().memoizedState=[t,i===void 0?null:i],t},useContext:bt,useEffect:cm,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,fl(4194308,4,hm.bind(null,i,t),s)},useLayoutEffect:function(t,i){return fl(4194308,4,t,i)},useInsertionEffect:function(t,i){fl(4,2,t,i)},useMemo:function(t,i){var s=Ot();i=i===void 0?null:i;var l=t();if(or){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,i],l},useReducer:function(t,i,s){var l=Ot();if(s!==void 0){var f=s(i);if(or){xn(!0);try{s(i)}finally{xn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=n_.bind(null,Ae,t),[l.memoizedState,t]},useRef:function(t){var i=Ot();return t={current:t},i.memoizedState=t},useState:function(t){t=cd(t);var i=t.queue,s=Sm.bind(null,Ae,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:fd,useDeferredValue:function(t,i){var s=Ot();return hd(s,t,i)},useTransition:function(){var t=cd(!1);return t=vm.bind(null,Ae,t.queue,!0,!1),Ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var l=Ae,f=Ot();if(je){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),Ye===null)throw Error(a(349));(ke&127)!==0||Xg(l,i,s)}f.memoizedState=s;var m={value:s,getSnapshot:i};return f.queue=m,cm(Zg.bind(null,l,m,t),[t]),l.flags|=2048,ra(9,{destroy:void 0},Kg.bind(null,l,m,s,i),null),s},useId:function(){var t=Ot(),i=Ye.identifierPrefix;if(je){var s=En,l=Sn;s=(l&~(1<<32-Nt(l)-1)).toString(32)+s,i="_"+i+"R_"+s,s=ll++,0<s&&(i+="H"+s.toString(32)),i+="_"}else s=Zx++,i="_"+i+"r_"+s.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:md,useFormState:rm,useActionState:rm,useOptimistic:function(t){var i=Ot();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=pd.bind(null,Ae,!0,s),s.dispatch=i,[t,i]},useMemoCache:sd,useCacheRefresh:function(){return Ot().memoizedState=t_.bind(null,Ae)},useEffectEvent:function(t){var i=Ot(),s={impl:t};return i.memoizedState=s,function(){if(($e&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},yd={readContext:bt,use:ul,useCallback:mm,useContext:bt,useEffect:dd,useImperativeHandle:gm,useInsertionEffect:dm,useLayoutEffect:fm,useMemo:pm,useReducer:dl,useRef:lm,useState:function(){return dl(qn)},useDebugValue:fd,useDeferredValue:function(t,i){var s=it();return ym(s,qe.memoizedState,t,i)},useTransition:function(){var t=dl(qn)[0],i=it().memoizedState;return[typeof t=="boolean"?t:ys(t),i]},useSyncExternalStore:Yg,useId:xm,useHostTransitionStatus:md,useFormState:am,useActionState:am,useOptimistic:function(t,i){var s=it();return Fg(s,qe,t,i)},useMemoCache:sd,useCacheRefresh:_m};yd.useEffectEvent=um;var Am={readContext:bt,use:ul,useCallback:mm,useContext:bt,useEffect:dd,useImperativeHandle:gm,useInsertionEffect:dm,useLayoutEffect:fm,useMemo:pm,useReducer:ld,useRef:lm,useState:function(){return ld(qn)},useDebugValue:fd,useDeferredValue:function(t,i){var s=it();return qe===null?hd(s,t,i):ym(s,qe.memoizedState,t,i)},useTransition:function(){var t=ld(qn)[0],i=it().memoizedState;return[typeof t=="boolean"?t:ys(t),i]},useSyncExternalStore:Yg,useId:xm,useHostTransitionStatus:md,useFormState:om,useActionState:om,useOptimistic:function(t,i){var s=it();return qe!==null?Fg(s,qe,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:sd,useCacheRefresh:_m};Am.useEffectEvent=um;function vd(t,i,s,l){i=t.memoizedState,s=s(l,i),s=s==null?i:v({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var bd={enqueueSetState:function(t,i,s){t=t._reactInternals;var l=Yt(),f=vi(l);f.payload=i,s!=null&&(f.callback=s),i=bi(t,f,l),i!==null&&(Ut(i,t,l),hs(i,t,l))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var l=Yt(),f=vi(l);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=bi(t,f,l),i!==null&&(Ut(i,t,l),hs(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=Yt(),l=vi(s);l.tag=2,i!=null&&(l.callback=i),i=bi(t,l,s),i!==null&&(Ut(i,t,s),hs(i,t,s))}};function Nm(t,i,s,l,f,m,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,w):i.prototype&&i.prototype.isPureReactComponent?!as(s,l)||!as(f,m):!0}function Om(t,i,s,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,l),i.state!==t&&bd.enqueueReplaceState(i,i.state,null)}function lr(t,i){var s=i;if("ref"in i){s={};for(var l in i)l!=="ref"&&(s[l]=i[l])}if(t=t.defaultProps){s===i&&(s=v({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}function Rm(t){Yo(t)}function km(t){console.error(t)}function Mm(t){Yo(t)}function ml(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function jm(t,i,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function wd(t,i,s){return s=vi(s),s.tag=3,s.payload={element:null},s.callback=function(){ml(t,i)},s}function Dm(t){return t=vi(t),t.tag=3,t}function zm(t,i,s,l){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){jm(i,s,l)}}var w=s.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){jm(i,s,l),typeof f!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function i_(t,i,s,l,f){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=s.alternate,i!==null&&Qr(i,s,f,!0),s=qt.current,s!==null){switch(s.tag){case 31:case 13:return an===null?Al():s.alternate===null&&et===0&&(et=3),s.flags&=-257,s.flags|=65536,s.lanes=f,l===nl?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([l]):i.add(l),Gd(t,l,f)),!1;case 22:return s.flags|=65536,l===nl?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([l]):s.add(l)),Gd(t,l,f)),!1}throw Error(a(435,s.tag))}return Gd(t,l,f),Al(),!1}if(je)return i=qt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Hu&&(t=Error(a(422),{cause:l}),ls(en(t,s)))):(l!==Hu&&(i=Error(a(423),{cause:l}),ls(en(i,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=en(l,s),f=wd(t.stateNode,l,f),Qu(t,f),et!==4&&(et=2)),!1;var m=Error(a(520),{cause:l});if(m=en(m,s),As===null?As=[m]:As.push(m),et!==4&&(et=2),i===null)return!0;l=en(l,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=wd(s.stateNode,l,t),Qu(s,t),!1;case 1:if(i=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ti===null||!Ti.has(m))))return s.flags|=65536,f&=-f,s.lanes|=f,f=Dm(f),zm(f,t,s,l),Qu(s,f),!1}s=s.return}while(s!==null);return!1}var xd=Error(a(461)),ot=!1;function wt(t,i,s,l){i.child=t===null?Hg(i,null,s,l):sr(i,t.child,s,l)}function Um(t,i,s,l,f){s=s.render;var m=i.ref;if("ref"in l){var w={};for(var A in l)A!=="ref"&&(w[A]=l[A])}else w=l;return nr(i),l=nd(t,i,s,w,m,f),A=id(),t!==null&&!ot?(rd(t,i,f),Vn(t,i,f)):(je&&A&&$u(i),i.flags|=1,wt(t,i,l,f),i.child)}function $m(t,i,s,l,f){if(t===null){var m=s.type;return typeof m=="function"&&!Du(m)&&m.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=m,Lm(t,i,m,l,f)):(t=Qo(s.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!Od(t,f)){var w=m.memoizedProps;if(s=s.compare,s=s!==null?s:as,s(w,l)&&t.ref===i.ref)return Vn(t,i,f)}return i.flags|=1,t=$n(m,l),t.ref=i.ref,t.return=i,i.child=t}function Lm(t,i,s,l,f){if(t!==null){var m=t.memoizedProps;if(as(m,l)&&t.ref===i.ref)if(ot=!1,i.pendingProps=l=m,Od(t,f))(t.flags&131072)!==0&&(ot=!0);else return i.lanes=t.lanes,Vn(t,i,f)}return _d(t,i,s,l,f)}function Hm(t,i,s,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|s:s,t!==null){for(l=i.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,i.child=null;return Bm(t,i,m,s,l)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&el(i,m!==null?m.cachePool:null),m!==null?qg(i,m):Fu(),Vg(i);else return l=i.lanes=536870912,Bm(t,i,m!==null?m.baseLanes|s:s,s,l)}else m!==null?(el(i,m.cachePool),qg(i,m),xi(),i.memoizedState=null):(t!==null&&el(i,null),Fu(),xi());return wt(t,i,f,s),i.child}function ws(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Bm(t,i,s,l,f){var m=Yu();return m=m===null?null:{parent:at._currentValue,pool:m},i.memoizedState={baseLanes:s,cachePool:m},t!==null&&el(i,null),Fu(),Vg(i),t!==null&&Qr(t,i,l,!0),i.childLanes=f,null}function pl(t,i){return i=vl({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Im(t,i,s){return sr(i,t.child,null,s),t=pl(i,i.pendingProps),t.flags|=2,Vt(i),i.memoizedState=null,t}function r_(t,i,s){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(je){if(l.mode==="hidden")return t=pl(i,l),i.lanes=536870912,ws(null,t);if(ed(i),(t=Ke)?(t=Wp(t,rn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:hi!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},s=Eg(t),s.return=i,i.child=s,vt=i,Ke=null)):t=null,t===null)throw mi(i);return i.lanes=536870912,null}return pl(i,l)}var m=t.memoizedState;if(m!==null){var w=m.dehydrated;if(ed(i),f)if(i.flags&256)i.flags&=-257,i=Im(t,i,s);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(ot||Qr(t,i,s,!1),f=(s&t.childLanes)!==0,ot||f){if(l=Ye,l!==null&&(w=No(l,s),w!==0&&w!==m.retryLane))throw m.retryLane=w,Fi(t,w),Ut(l,t,w),xd;Al(),i=Im(t,i,s)}else t=m.treeContext,Ke=sn(w.nextSibling),vt=i,je=!0,gi=null,rn=!1,t!==null&&Ag(i,t),i=pl(i,l),i.flags|=4096;return i}return t=$n(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function yl(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function _d(t,i,s,l,f){return nr(i),s=nd(t,i,s,l,void 0,f),l=id(),t!==null&&!ot?(rd(t,i,f),Vn(t,i,f)):(je&&l&&$u(i),i.flags|=1,wt(t,i,s,f),i.child)}function qm(t,i,s,l,f,m){return nr(i),i.updateQueue=null,s=Gg(i,l,s,f),Pg(t),l=id(),t!==null&&!ot?(rd(t,i,m),Vn(t,i,m)):(je&&l&&$u(i),i.flags|=1,wt(t,i,s,m),i.child)}function Vm(t,i,s,l,f){if(nr(i),i.stateNode===null){var m=Yr,w=s.contextType;typeof w=="object"&&w!==null&&(m=bt(w)),m=new s(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=bd,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},Ku(i),w=s.contextType,m.context=typeof w=="object"&&w!==null?bt(w):Yr,m.state=i.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(vd(i,s,w,l),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&bd.enqueueReplaceState(m,m.state,null),ms(i,l,m,f),gs(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){m=i.stateNode;var A=i.memoizedProps,L=lr(s,A);m.props=L;var W=m.context,ie=s.contextType;w=Yr,typeof ie=="object"&&ie!==null&&(w=bt(ie));var ae=s.getDerivedStateFromProps;ie=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||W!==w)&&Om(i,m,l,w),yi=!1;var ee=i.memoizedState;m.state=ee,ms(i,l,m,f),gs(),W=i.memoizedState,A||ee!==W||yi?(typeof ae=="function"&&(vd(i,s,ae,l),W=i.memoizedState),(L=yi||Nm(i,s,L,l,ee,W,w))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=W),m.props=l,m.state=W,m.context=w,l=L):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,Zu(t,i),w=i.memoizedProps,ie=lr(s,w),m.props=ie,ae=i.pendingProps,ee=m.context,W=s.contextType,L=Yr,typeof W=="object"&&W!==null&&(L=bt(W)),A=s.getDerivedStateFromProps,(W=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==ae||ee!==L)&&Om(i,m,l,L),yi=!1,ee=i.memoizedState,m.state=ee,ms(i,l,m,f),gs();var ne=i.memoizedState;w!==ae||ee!==ne||yi||t!==null&&t.dependencies!==null&&Fo(t.dependencies)?(typeof A=="function"&&(vd(i,s,A,l),ne=i.memoizedState),(ie=yi||Nm(i,s,ie,l,ee,ne,L)||t!==null&&t.dependencies!==null&&Fo(t.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ne,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ne,L)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&ee===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&ee===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=ne),m.props=l,m.state=ne,m.context=L,l=ie):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&ee===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&ee===t.memoizedState||(i.flags|=1024),l=!1)}return m=l,yl(t,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&l?(i.child=sr(i,t.child,null,f),i.child=sr(i,null,s,f)):wt(t,i,s,f),i.memoizedState=m.state,t=i.child):t=Vn(t,i,f),t}function Pm(t,i,s,l){return er(),i.flags|=256,wt(t,i,s,l),i.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ed(t){return{baseLanes:t,cachePool:jg()}}function Td(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=Gt),t}function Gm(t,i,s){var l=i.pendingProps,f=!1,m=(i.flags&128)!==0,w;if((w=m)||(w=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),w&&(f=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,t===null){if(je){if(f?wi(i):xi(),(t=Ke)?(t=Wp(t,rn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:hi!==null?{id:Sn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},s=Eg(t),s.return=i,i.child=s,vt=i,Ke=null)):t=null,t===null)throw mi(i);return lf(t)?i.lanes=32:i.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(xi(),f=i.mode,A=vl({mode:"hidden",children:A},f),l=Wi(l,f,s,null),A.return=i,l.return=i,A.sibling=l,i.child=A,l=i.child,l.memoizedState=Ed(s),l.childLanes=Td(t,w,s),i.memoizedState=Sd,ws(null,l)):(wi(i),Cd(i,A))}var L=t.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(m)i.flags&256?(wi(i),i.flags&=-257,i=Ad(t,i,s)):i.memoizedState!==null?(xi(),i.child=t.child,i.flags|=128,i=null):(xi(),A=l.fallback,f=i.mode,l=vl({mode:"visible",children:l.children},f),A=Wi(A,f,s,null),A.flags|=2,l.return=i,A.return=i,l.sibling=A,i.child=l,sr(i,t.child,null,s),l=i.child,l.memoizedState=Ed(s),l.childLanes=Td(t,w,s),i.memoizedState=Sd,i=ws(null,l));else if(wi(i),lf(A)){if(w=A.nextSibling&&A.nextSibling.dataset,w)var W=w.dgst;w=W,l=Error(a(419)),l.stack="",l.digest=w,ls({value:l,source:null,stack:null}),i=Ad(t,i,s)}else if(ot||Qr(t,i,s,!1),w=(s&t.childLanes)!==0,ot||w){if(w=Ye,w!==null&&(l=No(w,s),l!==0&&l!==L.retryLane))throw L.retryLane=l,Fi(t,l),Ut(w,t,l),xd;of(A)||Al(),i=Ad(t,i,s)}else of(A)?(i.flags|=192,i.child=t.child,i=null):(t=L.treeContext,Ke=sn(A.nextSibling),vt=i,je=!0,gi=null,rn=!1,t!==null&&Ag(i,t),i=Cd(i,l.children),i.flags|=4096);return i}return f?(xi(),A=l.fallback,f=i.mode,L=t.child,W=L.sibling,l=$n(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,W!==null?A=$n(W,A):(A=Wi(A,f,s,null),A.flags|=2),A.return=i,l.return=i,l.sibling=A,i.child=l,ws(null,l),l=i.child,A=t.child.memoizedState,A===null?A=Ed(s):(f=A.cachePool,f!==null?(L=at._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=jg(),A={baseLanes:A.baseLanes|s,cachePool:f}),l.memoizedState=A,l.childLanes=Td(t,w,s),i.memoizedState=Sd,ws(t.child,l)):(wi(i),s=t.child,t=s.sibling,s=$n(s,{mode:"visible",children:l.children}),s.return=i,s.sibling=null,t!==null&&(w=i.deletions,w===null?(i.deletions=[t],i.flags|=16):w.push(t)),i.child=s,i.memoizedState=null,s)}function Cd(t,i){return i=vl({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function vl(t,i){return t=It(22,t,null,i),t.lanes=0,t}function Ad(t,i,s){return sr(i,t.child,null,s),t=Cd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Ym(t,i,s){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),qu(t.return,i,s)}function Nd(t,i,s,l,f,m){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f,treeForkCount:m}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=l,w.tail=s,w.tailMode=f,w.treeForkCount=m)}function Xm(t,i,s){var l=i.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var w=nt.current,A=(w&2)!==0;if(A?(w=w&1|2,i.flags|=128):w&=1,K(nt,w),wt(t,i,l,s),l=je?os:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ym(t,s,i);else if(t.tag===19)Ym(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(s=i.child,f=null;s!==null;)t=s.alternate,t!==null&&sl(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),Nd(i,!1,f,s,m,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&sl(t)===null){i.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}Nd(i,!0,s,null,m,l);break;case"together":Nd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Vn(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),Ei|=i.lanes,(s&i.childLanes)===0)if(t!==null){if(Qr(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,s=$n(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=$n(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Od(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Fo(t)))}function a_(t,i,s){switch(i.tag){case 3:le(i,i.stateNode.containerInfo),pi(i,at,t.memoizedState.cache),er();break;case 27:case 5:Ee(i);break;case 4:le(i,i.stateNode.containerInfo);break;case 10:pi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ed(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(wi(i),i.flags|=128,null):(s&i.child.childLanes)!==0?Gm(t,i,s):(wi(i),t=Vn(t,i,s),t!==null?t.sibling:null);wi(i);break;case 19:var f=(t.flags&128)!==0;if(l=(s&i.childLanes)!==0,l||(Qr(t,i,s,!1),l=(s&i.childLanes)!==0),f){if(l)return Xm(t,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),K(nt,nt.current),l)break;return null;case 22:return i.lanes=0,Hm(t,i,s,i.pendingProps);case 24:pi(i,at,t.memoizedState.cache)}return Vn(t,i,s)}function Km(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)ot=!0;else{if(!Od(t,s)&&(i.flags&128)===0)return ot=!1,a_(t,i,s);ot=(t.flags&131072)!==0}else ot=!1,je&&(i.flags&1048576)!==0&&Cg(i,os,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=rr(i.elementType),i.type=t,typeof t=="function")Du(t)?(l=lr(t,l),i.tag=1,i=Vm(null,i,t,l,s)):(i.tag=0,i=_d(null,i,t,l,s));else{if(t!=null){var f=t.$$typeof;if(f===N){i.tag=11,i=Um(null,i,t,l,s);break e}else if(f===U){i.tag=14,i=$m(null,i,t,l,s);break e}}throw i=z(t)||t,Error(a(306,i,""))}}return i;case 0:return _d(t,i,i.type,i.pendingProps,s);case 1:return l=i.type,f=lr(l,i.pendingProps),Vm(t,i,l,f,s);case 3:e:{if(le(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var m=i.memoizedState;f=m.element,Zu(t,i),ms(i,l,null,s);var w=i.memoizedState;if(l=w.cache,pi(i,at,l),l!==m.cache&&Vu(i,[at],s,!0),gs(),l=w.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=Pm(t,i,l,s);break e}else if(l!==f){f=en(Error(a(424)),i),ls(f),i=Pm(t,i,l,s);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ke=sn(t.firstChild),vt=i,je=!0,gi=null,rn=!0,s=Hg(i,null,l,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(er(),l===f){i=Vn(t,i,s);break e}wt(t,i,l,s)}i=i.child}return i;case 26:return yl(t,i),t===null?(s=ay(i.type,null,i.pendingProps,null))?i.memoizedState=s:je||(s=i.type,t=i.pendingProps,l=Dl(ue.current).createElement(s),l[dt]=i,l[Et]=t,xt(l,s,t),rt(l),i.stateNode=l):i.memoizedState=ay(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ee(i),t===null&&je&&(l=i.stateNode=ny(i.type,i.pendingProps,ue.current),vt=i,rn=!0,f=Ke,Oi(i.type)?(cf=f,Ke=sn(l.firstChild)):Ke=f),wt(t,i,i.pendingProps.children,s),yl(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&je&&((f=l=Ke)&&(l=z_(l,i.type,i.pendingProps,rn),l!==null?(i.stateNode=l,vt=i,Ke=sn(l.firstChild),rn=!1,f=!0):f=!1),f||mi(i)),Ee(i),f=i.type,m=i.pendingProps,w=t!==null?t.memoizedProps:null,l=m.children,rf(f,m)?l=null:w!==null&&rf(f,w)&&(i.flags|=32),i.memoizedState!==null&&(f=nd(t,i,Qx,null,null,s),zs._currentValue=f),yl(t,i),wt(t,i,l,s),i.child;case 6:return t===null&&je&&((t=s=Ke)&&(s=U_(s,i.pendingProps,rn),s!==null?(i.stateNode=s,vt=i,Ke=null,t=!0):t=!1),t||mi(i)),null;case 13:return Gm(t,i,s);case 4:return le(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=sr(i,null,l,s):wt(t,i,l,s),i.child;case 11:return Um(t,i,i.type,i.pendingProps,s);case 7:return wt(t,i,i.pendingProps,s),i.child;case 8:return wt(t,i,i.pendingProps.children,s),i.child;case 12:return wt(t,i,i.pendingProps.children,s),i.child;case 10:return l=i.pendingProps,pi(i,i.type,l.value),wt(t,i,l.children,s),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,nr(i),f=bt(f),l=l(f),i.flags|=1,wt(t,i,l,s),i.child;case 14:return $m(t,i,i.type,i.pendingProps,s);case 15:return Lm(t,i,i.type,i.pendingProps,s);case 19:return Xm(t,i,s);case 31:return r_(t,i,s);case 22:return Hm(t,i,s,i.pendingProps);case 24:return nr(i),l=bt(at),t===null?(f=Yu(),f===null&&(f=Ye,m=Pu(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=s),f=m),i.memoizedState={parent:l,cache:f},Ku(i),pi(i,at,f)):((t.lanes&s)!==0&&(Zu(t,i),ms(i,null,null,s),gs()),f=t.memoizedState,m=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),pi(i,at,l)):(l=m.cache,pi(i,at,l),l!==f.cache&&Vu(i,[at],s,!0))),wt(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Pn(t){t.flags|=4}function Rd(t,i,s,l,f){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(xp())t.flags|=8192;else throw ar=nl,Xu}else t.flags&=-16777217}function Zm(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!uy(i))if(xp())t.flags|=8192;else throw ar=nl,Xu}function bl(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?To():536870912,t.lanes|=i,la|=i)}function xs(t,i){if(!je)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ze(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(i)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=s,i}function s_(t,i,s){var l=i.pendingProps;switch(Lu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(i),null;case 1:return Ze(i),null;case 3:return s=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Bn(at),de(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Zr(i)?Pn(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bu())),Ze(i),null;case 26:var f=i.type,m=i.memoizedState;return t===null?(Pn(i),m!==null?(Ze(i),Zm(i,m)):(Ze(i),Rd(i,f,null,l,s))):m?m!==t.memoizedState?(Pn(i),Ze(i),Zm(i,m)):(Ze(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&Pn(i),Ze(i),Rd(i,f,t,l,s)),null;case 27:if(_e(i),s=ue.current,f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Pn(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Ze(i),null}t=Q.current,Zr(i)?Ng(i):(t=ny(f,l,s),i.stateNode=t,Pn(i))}return Ze(i),null;case 5:if(_e(i),f=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Pn(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Ze(i),null}if(m=Q.current,Zr(i))Ng(i);else{var w=Dl(ue.current);switch(m){case 1:m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=w.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?w.createElement("select",{is:l.is}):w.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?w.createElement(f,{is:l.is}):w.createElement(f)}}m[dt]=i,m[Et]=l;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=m;e:switch(xt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Pn(i)}}return Ze(i),Rd(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,s),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Pn(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=ue.current,Zr(i)){if(t=i.stateNode,s=i.memoizedProps,l=null,f=vt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[dt]=i,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Gp(t.nodeValue,s)),t||mi(i,!0)}else t=Dl(t).createTextNode(l),t[dt]=i,i.stateNode=t}return Ze(i),null;case 31:if(s=i.memoizedState,t===null||t.memoizedState!==null){if(l=Zr(i),s!==null){if(t===null){if(!l)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[dt]=i}else er(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ze(i),t=!1}else s=Bu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return i.flags&256?(Vt(i),i):(Vt(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Ze(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Zr(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[dt]=i}else er(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ze(i),f=!1}else f=Bu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Vt(i),i):(Vt(i),null)}return Vt(i),(i.flags&128)!==0?(i.lanes=s,i):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),s!==t&&s&&(i.child.flags|=8192),bl(i,i.updateQueue),Ze(i),null);case 4:return de(),t===null&&Fd(i.stateNode.containerInfo),Ze(i),null;case 10:return Bn(i.type),Ze(i),null;case 19:if(M(nt),l=i.memoizedState,l===null)return Ze(i),null;if(f=(i.flags&128)!==0,m=l.rendering,m===null)if(f)xs(l,!1);else{if(et!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=sl(t),m!==null){for(i.flags|=128,xs(l,!1),t=m.updateQueue,i.updateQueue=t,bl(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)Sg(s,t),s=s.sibling;return K(nt,nt.current&1|2),je&&Ln(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&yt()>El&&(i.flags|=128,f=!0,xs(l,!1),i.lanes=4194304)}else{if(!f)if(t=sl(m),t!==null){if(i.flags|=128,f=!0,t=t.updateQueue,i.updateQueue=t,bl(i,t),xs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!je)return Ze(i),null}else 2*yt()-l.renderingStartTime>El&&s!==536870912&&(i.flags|=128,f=!0,xs(l,!1),i.lanes=4194304);l.isBackwards?(m.sibling=i.child,i.child=m):(t=l.last,t!==null?t.sibling=m:i.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=yt(),t.sibling=null,s=nt.current,K(nt,f?s&1|2:s&1),je&&Ln(i,l.treeForkCount),t):(Ze(i),null);case 22:case 23:return Vt(i),Wu(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(s&536870912)!==0&&(i.flags&128)===0&&(Ze(i),i.subtreeFlags&6&&(i.flags|=8192)):Ze(i),s=i.updateQueue,s!==null&&bl(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==s&&(i.flags|=2048),t!==null&&M(ir),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Bn(at),Ze(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function o_(t,i){switch(Lu(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Bn(at),de(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return _e(i),null;case 31:if(i.memoizedState!==null){if(Vt(i),i.alternate===null)throw Error(a(340));er()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Vt(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));er()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return M(nt),null;case 4:return de(),null;case 10:return Bn(i.type),null;case 22:case 23:return Vt(i),Wu(),t!==null&&M(ir),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Bn(at),null;case 25:return null;default:return null}}function Qm(t,i){switch(Lu(i),i.tag){case 3:Bn(at),de();break;case 26:case 27:case 5:_e(i);break;case 4:de();break;case 31:i.memoizedState!==null&&Vt(i);break;case 13:Vt(i);break;case 19:M(nt);break;case 10:Bn(i.type);break;case 22:case 23:Vt(i),Wu(),t!==null&&M(ir);break;case 24:Bn(at)}}function _s(t,i){try{var s=i.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var f=l.next;s=f;do{if((s.tag&t)===t){l=void 0;var m=s.create,w=s.inst;l=m(),w.destroy=l}s=s.next}while(s!==f)}}catch(A){He(i,i.return,A)}}function _i(t,i,s){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var w=l.inst,A=w.destroy;if(A!==void 0){w.destroy=void 0,f=i;var L=s,W=A;try{W()}catch(ie){He(f,L,ie)}}}l=l.next}while(l!==m)}}catch(ie){He(i,i.return,ie)}}function Jm(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{Ig(i,s)}catch(l){He(t,t.return,l)}}}function Fm(t,i,s){s.props=lr(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){He(t,i,l)}}function Ss(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(f){He(t,i,f)}}function Tn(t,i){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(f){He(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){He(t,i,f)}else s.current=null}function Wm(t){var i=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(f){He(t,t.return,f)}}function kd(t,i,s){try{var l=t.stateNode;O_(l,t.type,s,i),l[Et]=i}catch(f){He(t,t.return,f)}}function ep(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Oi(t.type)||t.tag===4}function Md(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ep(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Oi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jd(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=zn));else if(l!==4&&(l===27&&Oi(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(jd(t,i,s),t=t.sibling;t!==null;)jd(t,i,s),t=t.sibling}function wl(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(l!==4&&(l===27&&Oi(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(wl(t,i,s),t=t.sibling;t!==null;)wl(t,i,s),t=t.sibling}function tp(t){var i=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);xt(i,l,s),i[dt]=t,i[Et]=s}catch(m){He(t,t.return,m)}}var Gn=!1,lt=!1,Dd=!1,np=typeof WeakSet=="function"?WeakSet:Set,pt=null;function l_(t,i){if(t=t.containerInfo,tf=Il,t=gg(t),Au(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var w=0,A=-1,L=-1,W=0,ie=0,ae=t,ee=null;t:for(;;){for(var ne;ae!==s||f!==0&&ae.nodeType!==3||(A=w+f),ae!==m||l!==0&&ae.nodeType!==3||(L=w+l),ae.nodeType===3&&(w+=ae.nodeValue.length),(ne=ae.firstChild)!==null;)ee=ae,ae=ne;for(;;){if(ae===t)break t;if(ee===s&&++W===f&&(A=w),ee===m&&++ie===l&&(L=w),(ne=ae.nextSibling)!==null)break;ae=ee,ee=ae.parentNode}ae=ne}s=A===-1||L===-1?null:{start:A,end:L}}else s=null}s=s||{start:0,end:0}}else s=null;for(nf={focusedElem:t,selectionRange:s},Il=!1,pt=i;pt!==null;)if(i=pt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,pt=t;else for(;pt!==null;){switch(i=pt,m=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)f=t[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,s=i,f=m.memoizedProps,m=m.memoizedState,l=s.stateNode;try{var fe=lr(s.type,f);t=l.getSnapshotBeforeUpdate(fe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){He(s,s.return,ve)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)sf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,pt=t;break}pt=i.return}}function ip(t,i,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Xn(t,s),l&4&&_s(5,s);break;case 1:if(Xn(t,s),l&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(w){He(s,s.return,w)}else{var f=lr(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(w){He(s,s.return,w)}}l&64&&Jm(s),l&512&&Ss(s,s.return);break;case 3:if(Xn(t,s),l&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{Ig(t,i)}catch(w){He(s,s.return,w)}}break;case 27:i===null&&l&4&&tp(s);case 26:case 5:Xn(t,s),i===null&&l&4&&Wm(s),l&512&&Ss(s,s.return);break;case 12:Xn(t,s);break;case 31:Xn(t,s),l&4&&sp(t,s);break;case 13:Xn(t,s),l&4&&op(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=y_.bind(null,s),$_(t,s))));break;case 22:if(l=s.memoizedState!==null||Gn,!l){i=i!==null&&i.memoizedState!==null||lt,f=Gn;var m=lt;Gn=l,(lt=i)&&!m?Kn(t,s,(s.subtreeFlags&8772)!==0):Xn(t,s),Gn=f,lt=m}break;case 30:break;default:Xn(t,s)}}function rp(t){var i=t.alternate;i!==null&&(t.alternate=null,rp(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Za(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,Mt=!1;function Yn(t,i,s){for(s=s.child;s!==null;)ap(t,i,s),s=s.sibling}function ap(t,i,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Gi,s)}catch{}switch(s.tag){case 26:lt||Tn(s,i),Yn(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:lt||Tn(s,i);var l=Qe,f=Mt;Oi(s.type)&&(Qe=s.stateNode,Mt=!1),Yn(t,i,s),Ms(s.stateNode),Qe=l,Mt=f;break;case 5:lt||Tn(s,i);case 6:if(l=Qe,f=Mt,Qe=null,Yn(t,i,s),Qe=l,Mt=f,Qe!==null)if(Mt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(s.stateNode)}catch(m){He(s,i,m)}else try{Qe.removeChild(s.stateNode)}catch(m){He(s,i,m)}break;case 18:Qe!==null&&(Mt?(t=Qe,Jp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),pa(t)):Jp(Qe,s.stateNode));break;case 4:l=Qe,f=Mt,Qe=s.stateNode.containerInfo,Mt=!0,Yn(t,i,s),Qe=l,Mt=f;break;case 0:case 11:case 14:case 15:_i(2,s,i),lt||_i(4,s,i),Yn(t,i,s);break;case 1:lt||(Tn(s,i),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Fm(s,i,l)),Yn(t,i,s);break;case 21:Yn(t,i,s);break;case 22:lt=(l=lt)||s.memoizedState!==null,Yn(t,i,s),lt=l;break;default:Yn(t,i,s)}}function sp(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{pa(t)}catch(s){He(i,i.return,s)}}}function op(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{pa(t)}catch(s){He(i,i.return,s)}}function c_(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new np),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new np),i;default:throw Error(a(435,t.tag))}}function xl(t,i){var s=c_(t);i.forEach(function(l){if(!s.has(l)){s.add(l);var f=v_.bind(null,t,l);l.then(f,f)}})}function jt(t,i){var s=i.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l],m=t,w=i,A=w;e:for(;A!==null;){switch(A.tag){case 27:if(Oi(A.type)){Qe=A.stateNode,Mt=!1;break e}break;case 5:Qe=A.stateNode,Mt=!1;break e;case 3:case 4:Qe=A.stateNode.containerInfo,Mt=!0;break e}A=A.return}if(Qe===null)throw Error(a(160));ap(m,w,f),Qe=null,Mt=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)lp(i,t),i=i.sibling}var dn=null;function lp(t,i){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jt(i,t),Dt(t),l&4&&(_i(3,t,t.return),_s(3,t),_i(5,t,t.return));break;case 1:jt(i,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),l&64&&Gn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var f=dn;if(jt(i,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),l&4){var m=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ki]||m[dt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),xt(m,l,s),m[dt]=t,rt(m),l=m;break e;case"link":var w=ly("link","href",f).get(l+(s.href||""));if(w){for(var A=0;A<w.length;A++)if(m=w[A],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){w.splice(A,1);break t}}m=f.createElement(l),xt(m,l,s),f.head.appendChild(m);break;case"meta":if(w=ly("meta","content",f).get(l+(s.content||""))){for(A=0;A<w.length;A++)if(m=w[A],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){w.splice(A,1);break t}}m=f.createElement(l),xt(m,l,s),f.head.appendChild(m);break;default:throw Error(a(468,l))}m[dt]=t,rt(m),l=m}t.stateNode=l}else cy(f,t.type,t.stateNode);else t.stateNode=oy(f,l,t.memoizedProps);else m!==l?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,l===null?cy(f,t.type,t.stateNode):oy(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&kd(t,t.memoizedProps,s.memoizedProps)}break;case 27:jt(i,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),s!==null&&l&4&&kd(t,t.memoizedProps,s.memoizedProps);break;case 5:if(jt(i,t),Dt(t),l&512&&(lt||s===null||Tn(s,s.return)),t.flags&32){f=t.stateNode;try{Hr(f,"")}catch(fe){He(t,t.return,fe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,kd(t,f,s!==null?s.memoizedProps:f)),l&1024&&(Dd=!0);break;case 6:if(jt(i,t),Dt(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(fe){He(t,t.return,fe)}}break;case 3:if($l=null,f=dn,dn=zl(i.containerInfo),jt(i,t),dn=f,Dt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{pa(i.containerInfo)}catch(fe){He(t,t.return,fe)}Dd&&(Dd=!1,cp(t));break;case 4:l=dn,dn=zl(t.stateNode.containerInfo),jt(i,t),Dt(t),dn=l;break;case 12:jt(i,t),Dt(t);break;case 31:jt(i,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xl(t,l)));break;case 13:jt(i,t),Dt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Sl=yt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xl(t,l)));break;case 22:f=t.memoizedState!==null;var L=s!==null&&s.memoizedState!==null,W=Gn,ie=lt;if(Gn=W||f,lt=ie||L,jt(i,t),lt=ie,Gn=W,Dt(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||L||Gn||lt||cr(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){L=s=i;try{if(m=L.stateNode,f)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{A=L.stateNode;var ae=L.memoizedProps.style,ee=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;A.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(fe){He(L,L.return,fe)}}}else if(i.tag===6){if(s===null){L=i;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(fe){He(L,L.return,fe)}}}else if(i.tag===18){if(s===null){L=i;try{var ne=L.stateNode;f?Fp(ne,!0):Fp(L.stateNode,!1)}catch(fe){He(L,L.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,xl(t,s))));break;case 19:jt(i,t),Dt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,xl(t,l)));break;case 30:break;case 21:break;default:jt(i,t),Dt(t)}}function Dt(t){var i=t.flags;if(i&2){try{for(var s,l=t.return;l!==null;){if(ep(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var f=s.stateNode,m=Md(t);wl(t,m,f);break;case 5:var w=s.stateNode;s.flags&32&&(Hr(w,""),s.flags&=-33);var A=Md(t);wl(t,A,w);break;case 3:case 4:var L=s.stateNode.containerInfo,W=Md(t);jd(t,W,L);break;default:throw Error(a(161))}}catch(ie){He(t,t.return,ie)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function cp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;cp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Xn(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ip(t,i.alternate,i),i=i.sibling}function cr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:_i(4,i,i.return),cr(i);break;case 1:Tn(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&Fm(i,i.return,s),cr(i);break;case 27:Ms(i.stateNode);case 26:case 5:Tn(i,i.return),cr(i);break;case 22:i.memoizedState===null&&cr(i);break;case 30:cr(i);break;default:cr(i)}t=t.sibling}}function Kn(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,m=i,w=m.flags;switch(m.tag){case 0:case 11:case 15:Kn(f,m,s),_s(4,m);break;case 1:if(Kn(f,m,s),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){He(l,l.return,W)}if(l=m,f=l.updateQueue,f!==null){var A=l.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)Bg(L[f],A)}catch(W){He(l,l.return,W)}}s&&w&64&&Jm(m),Ss(m,m.return);break;case 27:tp(m);case 26:case 5:Kn(f,m,s),s&&l===null&&w&4&&Wm(m),Ss(m,m.return);break;case 12:Kn(f,m,s);break;case 31:Kn(f,m,s),s&&w&4&&sp(f,m);break;case 13:Kn(f,m,s),s&&w&4&&op(f,m);break;case 22:m.memoizedState===null&&Kn(f,m,s),Ss(m,m.return);break;case 30:break;default:Kn(f,m,s)}i=i.sibling}}function zd(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&cs(s))}function Ud(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&cs(t))}function fn(t,i,s,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)up(t,i,s,l),i=i.sibling}function up(t,i,s,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:fn(t,i,s,l),f&2048&&_s(9,i);break;case 1:fn(t,i,s,l);break;case 3:fn(t,i,s,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&cs(t)));break;case 12:if(f&2048){fn(t,i,s,l),t=i.stateNode;try{var m=i.memoizedProps,w=m.id,A=m.onPostCommit;typeof A=="function"&&A(w,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){He(i,i.return,L)}}else fn(t,i,s,l);break;case 31:fn(t,i,s,l);break;case 13:fn(t,i,s,l);break;case 23:break;case 22:m=i.stateNode,w=i.alternate,i.memoizedState!==null?m._visibility&2?fn(t,i,s,l):Es(t,i):m._visibility&2?fn(t,i,s,l):(m._visibility|=2,aa(t,i,s,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&zd(w,i);break;case 24:fn(t,i,s,l),f&2048&&Ud(i.alternate,i);break;default:fn(t,i,s,l)}}function aa(t,i,s,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=t,w=i,A=s,L=l,W=w.flags;switch(w.tag){case 0:case 11:case 15:aa(m,w,A,L,f),_s(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?aa(m,w,A,L,f):Es(m,w):(ie._visibility|=2,aa(m,w,A,L,f)),f&&W&2048&&zd(w.alternate,w);break;case 24:aa(m,w,A,L,f),f&&W&2048&&Ud(w.alternate,w);break;default:aa(m,w,A,L,f)}i=i.sibling}}function Es(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,l=i,f=l.flags;switch(l.tag){case 22:Es(s,l),f&2048&&zd(l.alternate,l);break;case 24:Es(s,l),f&2048&&Ud(l.alternate,l);break;default:Es(s,l)}i=i.sibling}}var Ts=8192;function sa(t,i,s){if(t.subtreeFlags&Ts)for(t=t.child;t!==null;)dp(t,i,s),t=t.sibling}function dp(t,i,s){switch(t.tag){case 26:sa(t,i,s),t.flags&Ts&&t.memoizedState!==null&&Z_(s,dn,t.memoizedState,t.memoizedProps);break;case 5:sa(t,i,s);break;case 3:case 4:var l=dn;dn=zl(t.stateNode.containerInfo),sa(t,i,s),dn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ts,Ts=16777216,sa(t,i,s),Ts=l):sa(t,i,s));break;default:sa(t,i,s)}}function fp(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Cs(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];pt=l,gp(l,t)}fp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hp(t),t=t.sibling}function hp(t){switch(t.tag){case 0:case 11:case 15:Cs(t),t.flags&2048&&_i(9,t,t.return);break;case 3:Cs(t);break;case 12:Cs(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,_l(t)):Cs(t);break;default:Cs(t)}}function _l(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];pt=l,gp(l,t)}fp(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:_i(8,i,i.return),_l(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,_l(i));break;default:_l(i)}t=t.sibling}}function gp(t,i){for(;pt!==null;){var s=pt;switch(s.tag){case 0:case 11:case 15:_i(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cs(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,pt=l;else e:for(s=t;pt!==null;){l=pt;var f=l.sibling,m=l.return;if(rp(l),l===s){pt=null;break e}if(f!==null){f.return=m,pt=f;break e}pt=m}}}var u_={getCacheForType:function(t){var i=bt(at),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s},cacheSignal:function(){return bt(at).controller.signal}},d_=typeof WeakMap=="function"?WeakMap:Map,$e=0,Ye=null,Oe=null,ke=0,Le=0,Pt=null,Si=!1,oa=!1,$d=!1,Zn=0,et=0,Ei=0,ur=0,Ld=0,Gt=0,la=0,As=null,zt=null,Hd=!1,Sl=0,mp=0,El=1/0,Tl=null,Ti=null,ft=0,Ci=null,ca=null,Qn=0,Bd=0,Id=null,pp=null,Ns=0,qd=null;function Yt(){return($e&2)!==0&&ke!==0?ke&-ke:R.T!==null?Kd():Oo()}function yp(){if(Gt===0)if((ke&536870912)===0||je){var t=Or;Or<<=1,(Or&3932160)===0&&(Or=262144),Gt=t}else Gt=536870912;return t=qt.current,t!==null&&(t.flags|=32),Gt}function Ut(t,i,s){(t===Ye&&(Le===2||Le===9)||t.cancelPendingCommit!==null)&&(ua(t,0),Ai(t,ke,Gt,!1)),Xi(t,s),(($e&2)===0||t!==Ye)&&(t===Ye&&(($e&2)===0&&(ur|=s),et===4&&Ai(t,ke,Gt,!1)),Cn(t))}function vp(t,i,s){if(($e&6)!==0)throw Error(a(327));var l=!s&&(i&127)===0&&(i&t.expiredLanes)===0||Yi(t,i),f=l?g_(t,i):Pd(t,i,!0),m=l;do{if(f===0){oa&&!l&&Ai(t,i,0,!1);break}else{if(s=t.current.alternate,m&&!f_(s)){f=Pd(t,i,!1),m=!1;continue}if(f===2){if(m=i,t.errorRecoveryDisabledLanes&m)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var A=t;f=As;var L=A.current.memoizedState.isDehydrated;if(L&&(ua(A,w).flags|=256),w=Pd(A,w,!1),w!==2){if($d&&!L){A.errorRecoveryDisabledLanes|=m,ur|=m,f=4;break e}m=zt,zt=f,m!==null&&(zt===null?zt=m:zt.push.apply(zt,m))}f=w}if(m=!1,f!==2)continue}}if(f===1){ua(t,0),Ai(t,i,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ai(l,i,Gt,!Si);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Sl+300-yt(),10<f)){if(Ai(l,i,Gt,!Si),kr(l,0,!0)!==0)break e;Qn=i,l.timeoutHandle=Zp(bp.bind(null,l,s,zt,Tl,Hd,i,Gt,ur,la,Si,m,"Throttled",-0,0),f);break e}bp(l,s,zt,Tl,Hd,i,Gt,ur,la,Si,m,null,-0,0)}}break}while(!0);Cn(t)}function bp(t,i,s,l,f,m,w,A,L,W,ie,ae,ee,ne){if(t.timeoutHandle=-1,ae=i.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},dp(i,m,ae);var fe=(m&62914560)===m?Sl-yt():(m&4194048)===m?mp-yt():0;if(fe=Q_(ae,fe),fe!==null){Qn=m,t.cancelPendingCommit=fe(Ap.bind(null,t,i,m,s,l,f,w,A,L,ie,ae,null,ee,ne)),Ai(t,m,w,!W);return}}Ap(t,i,m,s,l,f,w,A,L)}function f_(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var f=s[l],m=f.getSnapshot;f=f.value;try{if(!Bt(m(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ai(t,i,s,l){i&=~Ld,i&=~ur,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var m=31-Nt(f),w=1<<m;l[m]=-1,f&=~w}s!==0&&Co(t,s,i)}function Cl(){return($e&6)===0?(Os(0),!1):!0}function Vd(){if(Oe!==null){if(Le===0)var t=Oe.return;else t=Oe,Hn=tr=null,ad(t),ea=null,ds=0,t=Oe;for(;t!==null;)Qm(t.alternate,t),t=t.return;Oe=null}}function ua(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,M_(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Qn=0,Vd(),Ye=t,Oe=s=$n(t.current,null),ke=i,Le=0,Pt=null,Si=!1,oa=Yi(t,i),$d=!1,la=Gt=Ld=ur=Ei=et=0,zt=As=null,Hd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-Nt(l),m=1<<f;i|=t[f],l&=~m}return Zn=i,Xo(),s}function wp(t,i){Ae=null,R.H=bs,i===Wr||i===tl?(i=Ug(),Le=3):i===Xu?(i=Ug(),Le=4):Le=i===xd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pt=i,Oe===null&&(et=1,ml(t,en(i,t.current)))}function xp(){var t=qt.current;return t===null?!0:(ke&4194048)===ke?an===null:(ke&62914560)===ke||(ke&536870912)!==0?t===an:!1}function _p(){var t=R.H;return R.H=bs,t===null?bs:t}function Sp(){var t=R.A;return R.A=u_,t}function Al(){et=4,Si||(ke&4194048)!==ke&&qt.current!==null||(oa=!0),(Ei&134217727)===0&&(ur&134217727)===0||Ye===null||Ai(Ye,ke,Gt,!1)}function Pd(t,i,s){var l=$e;$e|=2;var f=_p(),m=Sp();(Ye!==t||ke!==i)&&(Tl=null,ua(t,i)),i=!1;var w=et;e:do try{if(Le!==0&&Oe!==null){var A=Oe,L=Pt;switch(Le){case 8:Vd(),w=6;break e;case 3:case 2:case 9:case 6:qt.current===null&&(i=!0);var W=Le;if(Le=0,Pt=null,da(t,A,L,W),s&&oa){w=0;break e}break;default:W=Le,Le=0,Pt=null,da(t,A,L,W)}}h_(),w=et;break}catch(ie){wp(t,ie)}while(!0);return i&&t.shellSuspendCounter++,Hn=tr=null,$e=l,R.H=f,R.A=m,Oe===null&&(Ye=null,ke=0,Xo()),w}function h_(){for(;Oe!==null;)Ep(Oe)}function g_(t,i){var s=$e;$e|=2;var l=_p(),f=Sp();Ye!==t||ke!==i?(Tl=null,El=yt()+500,ua(t,i)):oa=Yi(t,i);e:do try{if(Le!==0&&Oe!==null){i=Oe;var m=Pt;t:switch(Le){case 1:Le=0,Pt=null,da(t,i,m,1);break;case 2:case 9:if(Dg(m)){Le=0,Pt=null,Tp(i);break}i=function(){Le!==2&&Le!==9||Ye!==t||(Le=7),Cn(t)},m.then(i,i);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Dg(m)?(Le=0,Pt=null,Tp(i)):(Le=0,Pt=null,da(t,i,m,7));break;case 5:var w=null;switch(Oe.tag){case 26:w=Oe.memoizedState;case 5:case 27:var A=Oe;if(w?uy(w):A.stateNode.complete){Le=0,Pt=null;var L=A.sibling;if(L!==null)Oe=L;else{var W=A.return;W!==null?(Oe=W,Nl(W)):Oe=null}break t}}Le=0,Pt=null,da(t,i,m,5);break;case 6:Le=0,Pt=null,da(t,i,m,6);break;case 8:Vd(),et=6;break e;default:throw Error(a(462))}}m_();break}catch(ie){wp(t,ie)}while(!0);return Hn=tr=null,R.H=l,R.A=f,$e=s,Oe!==null?0:(Ye=null,ke=0,Xo(),et)}function m_(){for(;Oe!==null&&!qi();)Ep(Oe)}function Ep(t){var i=Km(t.alternate,t,Zn);t.memoizedProps=t.pendingProps,i===null?Nl(t):Oe=i}function Tp(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=qm(s,i,i.pendingProps,i.type,void 0,ke);break;case 11:i=qm(s,i,i.pendingProps,i.type.render,i.ref,ke);break;case 5:ad(i);default:Qm(s,i),i=Oe=Sg(i,Zn),i=Km(s,i,Zn)}t.memoizedProps=t.pendingProps,i===null?Nl(t):Oe=i}function da(t,i,s,l){Hn=tr=null,ad(i),ea=null,ds=0;var f=i.return;try{if(i_(t,f,i,s,ke)){et=1,ml(t,en(s,t.current)),Oe=null;return}}catch(m){if(f!==null)throw Oe=f,m;et=1,ml(t,en(s,t.current)),Oe=null;return}i.flags&32768?(je||l===1?t=!0:oa||(ke&536870912)!==0?t=!1:(Si=t=!0,(l===2||l===9||l===3||l===6)&&(l=qt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Cp(i,t)):Nl(i)}function Nl(t){var i=t;do{if((i.flags&32768)!==0){Cp(i,Si);return}t=i.return;var s=s_(i.alternate,i,Zn);if(s!==null){Oe=s;return}if(i=i.sibling,i!==null){Oe=i;return}Oe=i=t}while(i!==null);et===0&&(et=5)}function Cp(t,i){do{var s=o_(t.alternate,t);if(s!==null){s.flags&=32767,Oe=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=s}while(t!==null);et=6,Oe=null}function Ap(t,i,s,l,f,m,w,A,L){t.cancelPendingCommit=null;do Ol();while(ft!==0);if(($e&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=Mu,lu(t,s,m,w,A,L),t===Ye&&(Oe=Ye=null,ke=0),ca=i,Ci=t,Qn=s,Bd=m,Id=f,pp=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,b_(Pi,function(){return Mp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=R.T,R.T=null,f=H.p,H.p=2,w=$e,$e|=4;try{l_(t,i,s)}finally{$e=w,H.p=f,R.T=l}}ft=1,Np(),Op(),Rp()}}function Np(){if(ft===1){ft=0;var t=Ci,i=ca,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=R.T,R.T=null;var l=H.p;H.p=2;var f=$e;$e|=4;try{lp(i,t);var m=nf,w=gg(t.containerInfo),A=m.focusedElem,L=m.selectionRange;if(w!==A&&A&&A.ownerDocument&&hg(A.ownerDocument.documentElement,A)){if(L!==null&&Au(A)){var W=L.start,ie=L.end;if(ie===void 0&&(ie=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(ie,A.value.length);else{var ae=A.ownerDocument||document,ee=ae&&ae.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),fe=A.textContent.length,ve=Math.min(L.start,fe),Pe=L.end===void 0?ve:Math.min(L.end,fe);!ne.extend&&ve>Pe&&(w=Pe,Pe=ve,ve=w);var Y=fg(A,ve),I=fg(A,Pe);if(Y&&I&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==I.node||ne.focusOffset!==I.offset)){var F=ae.createRange();F.setStart(Y.node,Y.offset),ne.removeAllRanges(),ve>Pe?(ne.addRange(F),ne.extend(I.node,I.offset)):(F.setEnd(I.node,I.offset),ne.addRange(F))}}}}for(ae=[],ne=A;ne=ne.parentNode;)ne.nodeType===1&&ae.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ae.length;A++){var re=ae[A];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Il=!!tf,nf=tf=null}finally{$e=f,H.p=l,R.T=s}}t.current=i,ft=2}}function Op(){if(ft===2){ft=0;var t=Ci,i=ca,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=R.T,R.T=null;var l=H.p;H.p=2;var f=$e;$e|=4;try{ip(t,i.alternate,i)}finally{$e=f,H.p=l,R.T=s}}ft=3}}function Rp(){if(ft===4||ft===3){ft=0,Vi();var t=Ci,i=ca,s=Qn,l=pp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ft=5:(ft=0,ca=Ci=null,kp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ti=null),Ka(s),i=i.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Gi,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=R.T,f=H.p,H.p=2,R.T=null;try{for(var m=t.onRecoverableError,w=0;w<l.length;w++){var A=l[w];m(A.value,{componentStack:A.stack})}}finally{R.T=i,H.p=f}}(Qn&3)!==0&&Ol(),Cn(t),f=t.pendingLanes,(s&261930)!==0&&(f&42)!==0?t===qd?Ns++:(Ns=0,qd=t):Ns=0,Os(0)}}function kp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,cs(i)))}function Ol(){return Np(),Op(),Rp(),Mp()}function Mp(){if(ft!==5)return!1;var t=Ci,i=Bd;Bd=0;var s=Ka(Qn),l=R.T,f=H.p;try{H.p=32>s?32:s,R.T=null,s=Id,Id=null;var m=Ci,w=Qn;if(ft=0,ca=Ci=null,Qn=0,($e&6)!==0)throw Error(a(331));var A=$e;if($e|=4,hp(m.current),up(m,m.current,w,s),$e=A,Os(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Gi,m)}catch{}return!0}finally{H.p=f,R.T=l,kp(t,i)}}function jp(t,i,s){i=en(s,i),i=wd(t.stateNode,i,2),t=bi(t,i,2),t!==null&&(Xi(t,2),Cn(t))}function He(t,i,s){if(t.tag===3)jp(t,t,s);else for(;i!==null;){if(i.tag===3){jp(i,t,s);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ti===null||!Ti.has(l))){t=en(s,t),s=Dm(2),l=bi(i,s,2),l!==null&&(zm(s,l,i,t),Xi(l,2),Cn(l));break}}i=i.return}}function Gd(t,i,s){var l=t.pingCache;if(l===null){l=t.pingCache=new d_;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(s)||($d=!0,f.add(s),t=p_.bind(null,t,i,s),i.then(t,t))}function p_(t,i,s){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Ye===t&&(ke&s)===s&&(et===4||et===3&&(ke&62914560)===ke&&300>yt()-Sl?($e&2)===0&&ua(t,0):Ld|=s,la===ke&&(la=0)),Cn(t)}function Dp(t,i){i===0&&(i=To()),t=Fi(t,i),t!==null&&(Xi(t,i),Cn(t))}function y_(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),Dp(t,s)}function v_(t,i){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),Dp(t,s)}function b_(t,i){return ri(t,i)}var Rl=null,fa=null,Yd=!1,kl=!1,Xd=!1,Ni=0;function Cn(t){t!==fa&&t.next===null&&(fa===null?Rl=fa=t:fa=fa.next=t),kl=!0,Yd||(Yd=!0,x_())}function Os(t,i){if(!Xd&&kl){Xd=!0;do for(var s=!1,l=Rl;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var w=l.suspendedLanes,A=l.pingedLanes;m=(1<<31-Nt(42|t)+1)-1,m&=f&~(w&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,Lp(l,m))}else m=ke,m=kr(l,l===Ye?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Yi(l,m)||(s=!0,Lp(l,m));l=l.next}while(s);Xd=!1}}function w_(){zp()}function zp(){kl=Yd=!1;var t=0;Ni!==0&&k_()&&(t=Ni);for(var i=yt(),s=null,l=Rl;l!==null;){var f=l.next,m=Up(l,i);m===0?(l.next=null,s===null?Rl=f:s.next=f,f===null&&(fa=s)):(s=l,(t!==0||(m&3)!==0)&&(kl=!0)),l=f}ft!==0&&ft!==5||Os(t),Ni!==0&&(Ni=0)}function Up(t,i){for(var s=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var w=31-Nt(m),A=1<<w,L=f[w];L===-1?((A&s)===0||(A&l)!==0)&&(f[w]=ou(A,i)):L<=i&&(t.expiredLanes|=A),m&=~A}if(i=Ye,s=ke,s=kr(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===i&&(Le===2||Le===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ai(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Yi(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(l!==null&&ai(l),Ka(s)){case 2:case 8:s=si;break;case 32:s=Pi;break;case 268435456:s=Ar;break;default:s=Pi}return l=$p.bind(null,t),s=ri(s,l),t.callbackPriority=i,t.callbackNode=s,i}return l!==null&&l!==null&&ai(l),t.callbackPriority=2,t.callbackNode=null,2}function $p(t,i){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Ol()&&t.callbackNode!==s)return null;var l=ke;return l=kr(t,t===Ye?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(vp(t,l,i),Up(t,yt()),t.callbackNode!=null&&t.callbackNode===s?$p.bind(null,t):null)}function Lp(t,i){if(Ol())return null;vp(t,i,!0)}function x_(){j_(function(){($e&6)!==0?ri(kn,w_):zp()})}function Kd(){if(Ni===0){var t=Jr;t===0&&(t=Nr,Nr<<=1,(Nr&261888)===0&&(Nr=256)),Ni=t}return Ni}function Hp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ho(""+t)}function Bp(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function __(t,i,s,l,f){if(i==="submit"&&s&&s.stateNode===f){var m=Hp((f[Et]||null).action),w=l.submitter;w&&(i=(i=w[Et]||null)?Hp(i.formAction):w.getAttribute("formAction"),i!==null&&(m=i,w=null));var A=new Vo("action","action",null,l,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ni!==0){var L=w?Bp(f,w):new FormData(f);gd(s,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(A.preventDefault(),L=w?Bp(f,w):new FormData(f),gd(s,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var Zd=0;Zd<ku.length;Zd++){var Qd=ku[Zd],S_=Qd.toLowerCase(),E_=Qd[0].toUpperCase()+Qd.slice(1);un(S_,"on"+E_)}un(yg,"onAnimationEnd"),un(vg,"onAnimationIteration"),un(bg,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(Bx,"onTransitionRun"),un(Ix,"onTransitionStart"),un(qx,"onTransitionCancel"),un(wg,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rs));function Ip(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],f=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var w=l.length-1;0<=w;w--){var A=l[w],L=A.instance,W=A.currentTarget;if(A=A.listener,L!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=W;try{m(f)}catch(ie){Yo(ie)}f.currentTarget=null,m=L}else for(w=0;w<l.length;w++){if(A=l[w],L=A.instance,W=A.currentTarget,A=A.listener,L!==m&&f.isPropagationStopped())break e;m=A,f.currentTarget=W;try{m(f)}catch(ie){Yo(ie)}f.currentTarget=null,m=L}}}}function Re(t,i){var s=i[Mr];s===void 0&&(s=i[Mr]=new Set);var l=t+"__bubble";s.has(l)||(qp(i,t,2,!1),s.add(l))}function Jd(t,i,s){var l=0;i&&(l|=4),qp(s,t,l,i)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Fd(t){if(!t[Ml]){t[Ml]=!0,jo.forEach(function(s){s!=="selectionchange"&&(T_.has(s)||Jd(s,!1,t),Jd(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ml]||(i[Ml]=!0,Jd("selectionchange",!1,i))}}function qp(t,i,s,l){switch(yy(i)){case 2:var f=W_;break;case 8:f=eS;break;default:f=gf}s=f.bind(null,i,s,t),f=void 0,!vu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,s,{capture:!0,passive:f}):t.addEventListener(i,s,!0):f!==void 0?t.addEventListener(i,s,{passive:f}):t.addEventListener(i,s,!1)}function Wd(t,i,s,l,f){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var A=l.stateNode.containerInfo;if(A===f)break;if(w===4)for(w=l.return;w!==null;){var L=w.tag;if((L===3||L===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;A!==null;){if(w=oi(A),w===null)return;if(L=w.tag,L===5||L===6||L===26||L===27){l=m=w;continue e}A=A.parentNode}}l=l.return}Xh(function(){var W=m,ie=pu(s),ae=[];e:{var ee=xg.get(t);if(ee!==void 0){var ne=Vo,fe=t;switch(t){case"keypress":if(Io(s)===0)break e;case"keydown":case"keyup":ne=vx;break;case"focusin":fe="focus",ne=_u;break;case"focusout":fe="blur",ne=_u;break;case"beforeblur":case"afterblur":ne=_u;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Qh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=sx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=xx;break;case yg:case vg:case bg:ne=cx;break;case wg:ne=Sx;break;case"scroll":case"scrollend":ne=rx;break;case"wheel":ne=Tx;break;case"copy":case"cut":case"paste":ne=dx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Fh;break;case"toggle":case"beforetoggle":ne=Ax}var ve=(i&4)!==0,Pe=!ve&&(t==="scroll"||t==="scrollend"),Y=ve?ee!==null?ee+"Capture":null:ee;ve=[];for(var I=W,F;I!==null;){var re=I;if(F=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||F===null||Y===null||(re=Fa(I,Y),re!=null&&ve.push(ks(I,re,F))),Pe)break;I=I.return}0<ve.length&&(ee=new ne(ee,fe,null,s,ie),ae.push({event:ee,listeners:ve}))}}if((i&7)===0){e:{if(ee=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",ee&&s!==mu&&(fe=s.relatedTarget||s.fromElement)&&(oi(fe)||fe[jn]))break e;if((ne||ee)&&(ee=ie.window===ie?ie:(ee=ie.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(fe=s.relatedTarget||s.toElement,ne=W,fe=fe?oi(fe):null,fe!==null&&(Pe=c(fe),ve=fe.tag,fe!==Pe||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(ne=null,fe=W),ne!==fe)){if(ve=Qh,re="onMouseLeave",Y="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(ve=Fh,re="onPointerLeave",Y="onPointerEnter",I="pointer"),Pe=ne==null?ee:ci(ne),F=fe==null?ee:ci(fe),ee=new ve(re,I+"leave",ne,s,ie),ee.target=Pe,ee.relatedTarget=F,re=null,oi(ie)===W&&(ve=new ve(Y,I+"enter",fe,s,ie),ve.target=F,ve.relatedTarget=Pe,re=ve),Pe=re,ne&&fe)t:{for(ve=C_,Y=ne,I=fe,F=0,re=Y;re;re=ve(re))F++;re=0;for(var ye=I;ye;ye=ve(ye))re++;for(;0<F-re;)Y=ve(Y),F--;for(;0<re-F;)I=ve(I),re--;for(;F--;){if(Y===I||I!==null&&Y===I.alternate){ve=Y;break t}Y=ve(Y),I=ve(I)}ve=null}else ve=null;ne!==null&&Vp(ae,ee,ne,ve,!1),fe!==null&&Pe!==null&&Vp(ae,Pe,fe,ve,!0)}}e:{if(ee=W?ci(W):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var ze=sg;else if(rg(ee))if(og)ze=$x;else{ze=zx;var ge=Dx}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?W&&gu(W.elementType)&&(ze=sg):ze=Ux;if(ze&&(ze=ze(t,W))){ag(ae,ze,s,ie);break e}ge&&ge(t,ee,W),t==="focusout"&&W&&ee.type==="number"&&W.memoizedProps.value!=null&&$r(ee,"number",ee.value)}switch(ge=W?ci(W):window,t){case"focusin":(rg(ge)||ge.contentEditable==="true")&&(Vr=ge,Nu=W,ss=null);break;case"focusout":ss=Nu=Vr=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,mg(ae,s,ie);break;case"selectionchange":if(Hx)break;case"keydown":case"keyup":mg(ae,s,ie)}var Ne;if(Eu)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else qr?ng(t,s)&&(Me="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Me="onCompositionStart");Me&&(Wh&&s.locale!=="ko"&&(qr||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&qr&&(Ne=Kh()):(fi=ie,bu="value"in fi?fi.value:fi.textContent,qr=!0)),ge=jl(W,Me),0<ge.length&&(Me=new Jh(Me,t,null,s,ie),ae.push({event:Me,listeners:ge}),Ne?Me.data=Ne:(Ne=ig(s),Ne!==null&&(Me.data=Ne)))),(Ne=Ox?Rx(t,s):kx(t,s))&&(Me=jl(W,"onBeforeInput"),0<Me.length&&(ge=new Jh("onBeforeInput","beforeinput",null,s,ie),ae.push({event:ge,listeners:Me}),ge.data=Ne)),__(ae,t,W,s,ie)}Ip(ae,i)})}function ks(t,i,s){return{instance:t,listener:i,currentTarget:s}}function jl(t,i){for(var s=i+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Fa(t,s),f!=null&&l.unshift(ks(t,f,m)),f=Fa(t,i),f!=null&&l.push(ks(t,f,m))),t.tag===3)return l;t=t.return}return[]}function C_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vp(t,i,s,l,f){for(var m=i._reactName,w=[];s!==null&&s!==l;){var A=s,L=A.alternate,W=A.stateNode;if(A=A.tag,L!==null&&L===l)break;A!==5&&A!==26&&A!==27||W===null||(L=W,f?(W=Fa(s,m),W!=null&&w.unshift(ks(s,W,L))):f||(W=Fa(s,m),W!=null&&w.push(ks(s,W,L)))),s=s.return}w.length!==0&&t.push({event:i,listeners:w})}var A_=/\r\n?/g,N_=/\u0000|\uFFFD/g;function Pp(t){return(typeof t=="string"?t:""+t).replace(A_,`
`).replace(N_,"")}function Gp(t,i){return i=Pp(i),Pp(t)===i}function Ve(t,i,s,l,f,m){switch(s){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Hr(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Hr(t,""+l);break;case"className":Dr(t,"class",l);break;case"tabIndex":Dr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Dr(t,s,l);break;case"style":Gh(t,l,m);break;case"data":if(i!=="object"){Dr(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Ho(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(i!=="input"&&Ve(t,i,"name",f.name,f,null),Ve(t,i,"formEncType",f.formEncType,f,null),Ve(t,i,"formMethod",f.formMethod,f,null),Ve(t,i,"formTarget",f.formTarget,f,null)):(Ve(t,i,"encType",f.encType,f,null),Ve(t,i,"method",f.method,f,null),Ve(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Ho(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=zn);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Ho(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Re("beforetoggle",t),Re("toggle",t),jr(t,"popover",l);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":jr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=nx.get(s)||s,jr(t,s,l))}}function ef(t,i,s,l,f,m){switch(s){case"style":Gh(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Hr(t,l):(typeof l=="number"||typeof l=="bigint")&&Hr(t,""+l);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Do.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),m=t[Et]||null,m=m!=null?m[s]:null,typeof m=="function"&&t.removeEventListener(i,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,l,f);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):jr(t,s,l)}}}function xt(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",t),Re("load",t);var l=!1,f=!1,m;for(m in s)if(s.hasOwnProperty(m)){var w=s[m];if(w!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ve(t,i,m,w,s,null)}}f&&Ve(t,i,"srcSet",s.srcSet,s,null),l&&Ve(t,i,"src",s.src,s,null);return;case"input":Re("invalid",t);var A=m=w=f=null,L=null,W=null;for(l in s)if(s.hasOwnProperty(l)){var ie=s[l];if(ie!=null)switch(l){case"name":f=ie;break;case"type":w=ie;break;case"checked":L=ie;break;case"defaultChecked":W=ie;break;case"value":m=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:Ve(t,i,l,ie,s,null)}}Lo(t,m,A,L,W,w,f,!1);return;case"select":Re("invalid",t),l=w=m=null;for(f in s)if(s.hasOwnProperty(f)&&(A=s[f],A!=null))switch(f){case"value":m=A;break;case"defaultValue":w=A;break;case"multiple":l=A;default:Ve(t,i,f,A,s,null)}i=m,s=w,t.multiple=!!l,i!=null?Lr(t,!!l,i,!1):s!=null&&Lr(t,!!l,s,!0);return;case"textarea":Re("invalid",t),m=f=l=null;for(w in s)if(s.hasOwnProperty(w)&&(A=s[w],A!=null))switch(w){case"value":l=A;break;case"defaultValue":f=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:Ve(t,i,w,A,s,null)}Vh(t,l,f,m);return;case"option":for(L in s)if(s.hasOwnProperty(L)&&(l=s[L],l!=null))switch(L){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ve(t,i,L,l,s,null)}return;case"dialog":Re("beforetoggle",t),Re("toggle",t),Re("cancel",t),Re("close",t);break;case"iframe":case"object":Re("load",t);break;case"video":case"audio":for(l=0;l<Rs.length;l++)Re(Rs[l],t);break;case"image":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"embed":case"source":case"link":Re("error",t),Re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in s)if(s.hasOwnProperty(W)&&(l=s[W],l!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Ve(t,i,W,l,s,null)}return;default:if(gu(i)){for(ie in s)s.hasOwnProperty(ie)&&(l=s[ie],l!==void 0&&ef(t,i,ie,l,s,void 0));return}}for(A in s)s.hasOwnProperty(A)&&(l=s[A],l!=null&&Ve(t,i,A,l,s,null))}function O_(t,i,s,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,w=null,A=null,L=null,W=null,ie=null;for(ne in s){var ae=s[ne];if(s.hasOwnProperty(ne)&&ae!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":L=ae;default:l.hasOwnProperty(ne)||Ve(t,i,ne,null,l,ae)}}for(var ee in l){var ne=l[ee];if(ae=s[ee],l.hasOwnProperty(ee)&&(ne!=null||ae!=null))switch(ee){case"type":m=ne;break;case"name":f=ne;break;case"checked":W=ne;break;case"defaultChecked":ie=ne;break;case"value":w=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,i));break;default:ne!==ae&&Ve(t,i,ee,ne,l,ae)}}Ja(t,w,A,L,W,ie,m,f);return;case"select":ne=w=A=ee=null;for(m in s)if(L=s[m],s.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ne=L;default:l.hasOwnProperty(m)||Ve(t,i,m,null,l,L)}for(f in l)if(m=l[f],L=s[f],l.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":ee=m;break;case"defaultValue":A=m;break;case"multiple":w=m;default:m!==L&&Ve(t,i,f,m,l,L)}i=A,s=w,l=ne,ee!=null?Lr(t,!!s,ee,!1):!!l!=!!s&&(i!=null?Lr(t,!!s,i,!0):Lr(t,!!s,s?[]:"",!1));return;case"textarea":ne=ee=null;for(A in s)if(f=s[A],s.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Ve(t,i,A,null,l,f)}for(w in l)if(f=l[w],m=s[w],l.hasOwnProperty(w)&&(f!=null||m!=null))switch(w){case"value":ee=f;break;case"defaultValue":ne=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Ve(t,i,w,f,l,m)}qh(t,ee,ne);return;case"option":for(var fe in s)if(ee=s[fe],s.hasOwnProperty(fe)&&ee!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ve(t,i,fe,null,l,ee)}for(L in l)if(ee=l[L],ne=s[L],l.hasOwnProperty(L)&&ee!==ne&&(ee!=null||ne!=null))switch(L){case"selected":t.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Ve(t,i,L,ee,l,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in s)ee=s[ve],s.hasOwnProperty(ve)&&ee!=null&&!l.hasOwnProperty(ve)&&Ve(t,i,ve,null,l,ee);for(W in l)if(ee=l[W],ne=s[W],l.hasOwnProperty(W)&&ee!==ne&&(ee!=null||ne!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:Ve(t,i,W,ee,l,ne)}return;default:if(gu(i)){for(var Pe in s)ee=s[Pe],s.hasOwnProperty(Pe)&&ee!==void 0&&!l.hasOwnProperty(Pe)&&ef(t,i,Pe,void 0,l,ee);for(ie in l)ee=l[ie],ne=s[ie],!l.hasOwnProperty(ie)||ee===ne||ee===void 0&&ne===void 0||ef(t,i,ie,ee,l,ne);return}}for(var Y in s)ee=s[Y],s.hasOwnProperty(Y)&&ee!=null&&!l.hasOwnProperty(Y)&&Ve(t,i,Y,null,l,ee);for(ae in l)ee=l[ae],ne=s[ae],!l.hasOwnProperty(ae)||ee===ne||ee==null&&ne==null||Ve(t,i,ae,ee,l,ne)}function Yp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R_(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var f=s[l],m=f.transferSize,w=f.initiatorType,A=f.duration;if(m&&A&&Yp(w)){for(w=0,A=f.responseEnd,l+=1;l<s.length;l++){var L=s[l],W=L.startTime;if(W>A)break;var ie=L.transferSize,ae=L.initiatorType;ie&&Yp(ae)&&(L=L.responseEnd,w+=ie*(L<A?1:(A-W)/(L-W)))}if(--l,i+=8*(m+w)/(f.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var tf=null,nf=null;function Dl(t){return t.nodeType===9?t:t.ownerDocument}function Xp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kp(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function rf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var af=null;function k_(){var t=window.event;return t&&t.type==="popstate"?t===af?!1:(af=t,!0):(af=null,!1)}var Zp=typeof setTimeout=="function"?setTimeout:void 0,M_=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,j_=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(t){return Qp.resolve(null).then(t).catch(D_)}:Zp;function D_(t){setTimeout(function(){throw t})}function Oi(t){return t==="head"}function Jp(t,i){var s=i,l=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(f),pa(i);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")Ms(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Ms(s);for(var m=s.firstChild;m;){var w=m.nextSibling,A=m.nodeName;m[Ki]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||s.removeChild(m),m=w}}else s==="body"&&Ms(t.ownerDocument.body);s=f}while(s);pa(i)}function Fp(t,i){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?i?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(i?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function sf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":sf(s),Za(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function z_(t,i,s,l){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ki])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=sn(t.nextSibling),t===null)break}return null}function U_(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=sn(t.nextSibling),t===null))return null;return t}function Wp(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=sn(t.nextSibling),t===null))return null;return t}function of(t){return t.data==="$?"||t.data==="$~"}function lf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function $_(t,i){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||s.readyState!=="loading")i();else{var l=function(){i(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function sn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var cf=null;function ey(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(i===0)return sn(t.nextSibling);i--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||i++}t=t.nextSibling}return null}function ty(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(i===0)return t;i--}else s!=="/$"&&s!=="/&"||i++}t=t.previousSibling}return null}function ny(t,i,s){switch(i=Dl(s),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ms(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Za(t)}var on=new Map,iy=new Set;function zl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jn=H.d;H.d={f:L_,r:H_,D:B_,C:I_,L:q_,m:V_,X:G_,S:P_,M:Y_};function L_(){var t=Jn.f(),i=Cl();return t||i}function H_(t){var i=li(t);i!==null&&i.tag===5&&i.type==="form"?wm(i):Jn.r(t)}var ha=typeof document>"u"?null:document;function ry(t,i,s){var l=ha;if(l&&typeof i=="string"&&i){var f=Tt(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),iy.has(f)||(iy.add(f),t={rel:t,crossOrigin:s,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),xt(i,"link",t),rt(i),l.head.appendChild(i)))}}function B_(t){Jn.D(t),ry("dns-prefetch",t,null)}function I_(t,i){Jn.C(t,i),ry("preconnect",t,i)}function q_(t,i,s){Jn.L(t,i,s);var l=ha;if(l&&t&&i){var f='link[rel="preload"][as="'+Tt(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+Tt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+Tt(s.imageSizes)+'"]')):f+='[href="'+Tt(t)+'"]';var m=f;switch(i){case"style":m=ga(t);break;case"script":m=ma(t)}on.has(m)||(t=v({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),on.set(m,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(js(m))||i==="script"&&l.querySelector(Ds(m))||(i=l.createElement("link"),xt(i,"link",t),rt(i),l.head.appendChild(i)))}}function V_(t,i){Jn.m(t,i);var s=ha;if(s&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ma(t)}if(!on.has(m)&&(t=v({rel:"modulepreload",href:t},i),on.set(m,t),s.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ds(m)))return}l=s.createElement("link"),xt(l,"link",t),rt(l),s.head.appendChild(l)}}}function P_(t,i,s){Jn.S(t,i,s);var l=ha;if(l&&t){var f=ui(l).hoistableStyles,m=ga(t);i=i||"default";var w=f.get(m);if(!w){var A={loading:0,preload:null};if(w=l.querySelector(js(m)))A.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":i},s),(s=on.get(m))&&uf(t,s);var L=w=l.createElement("link");rt(L),xt(L,"link",t),L._p=new Promise(function(W,ie){L.onload=W,L.onerror=ie}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ul(w,i,l)}w={type:"stylesheet",instance:w,count:1,state:A},f.set(m,w)}}}function G_(t,i){Jn.X(t,i);var s=ha;if(s&&t){var l=ui(s).hoistableScripts,f=ma(t),m=l.get(f);m||(m=s.querySelector(Ds(f)),m||(t=v({src:t,async:!0},i),(i=on.get(f))&&df(t,i),m=s.createElement("script"),rt(m),xt(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function Y_(t,i){Jn.M(t,i);var s=ha;if(s&&t){var l=ui(s).hoistableScripts,f=ma(t),m=l.get(f);m||(m=s.querySelector(Ds(f)),m||(t=v({src:t,async:!0,type:"module"},i),(i=on.get(f))&&df(t,i),m=s.createElement("script"),rt(m),xt(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function ay(t,i,s,l){var f=(f=ue.current)?zl(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=ga(s.href),s=ui(f).hoistableStyles,l=s.get(i),l||(l={type:"style",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=ga(s.href);var m=ui(f).hoistableStyles,w=m.get(t);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,w),(m=f.querySelector(js(t)))&&!m._p&&(w.instance=m,w.state.loading=5),on.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},on.set(t,s),m||X_(f,t,s,w.state))),i&&l===null)throw Error(a(528,""));return w}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ma(s),s=ui(f).hoistableScripts,l=s.get(i),l||(l={type:"script",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ga(t){return'href="'+Tt(t)+'"'}function js(t){return'link[rel="stylesheet"]['+t+"]"}function sy(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function X_(t,i,s,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),xt(i,"link",s),rt(i),t.head.appendChild(i))}function ma(t){return'[src="'+Tt(t)+'"]'}function Ds(t){return"script[async]"+t}function oy(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(s.href)+'"]');if(l)return i.instance=l,rt(l),l;var f=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),rt(l),xt(l,"style",f),Ul(l,s.precedence,t),i.instance=l;case"stylesheet":f=ga(s.href);var m=t.querySelector(js(f));if(m)return i.state.loading|=4,i.instance=m,rt(m),m;l=sy(s),(f=on.get(f))&&uf(l,f),m=(t.ownerDocument||t).createElement("link"),rt(m);var w=m;return w._p=new Promise(function(A,L){w.onload=A,w.onerror=L}),xt(m,"link",l),i.state.loading|=4,Ul(m,s.precedence,t),i.instance=m;case"script":return m=ma(s.src),(f=t.querySelector(Ds(m)))?(i.instance=f,rt(f),f):(l=s,(f=on.get(m))&&(l=v({},s),df(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),rt(f),xt(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Ul(l,s.precedence,t));return i.instance}function Ul(t,i,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,w=0;w<l.length;w++){var A=l[w];if(A.dataset.precedence===i)m=A;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function uf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function df(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var $l=null;function ly(t,i,s){if($l===null){var l=new Map,f=$l=new Map;f.set(s,l)}else f=$l,l=f.get(s),l||(l=new Map,f.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var m=s[f];if(!(m[Ki]||m[dt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(i)||"";w=t+w;var A=l.get(w);A?A.push(m):l.set(w,[m])}}return l}function cy(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function K_(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function uy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Z_(t,i,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=ga(l.href),m=i.querySelector(js(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ll.bind(t),i.then(t,t)),s.state.loading|=4,s.instance=m,rt(m);return}m=i.ownerDocument||i,l=sy(l),(f=on.get(f))&&uf(l,f),m=m.createElement("link"),rt(m);var w=m;w._p=new Promise(function(A,L){w.onload=A,w.onerror=L}),xt(m,"link",l),s.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Ll.bind(t),i.addEventListener("load",s),i.addEventListener("error",s))}}var ff=0;function Q_(t,i){return t.stylesheets&&t.count===0&&Bl(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&Bl(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+i);0<t.imgBytes&&ff===0&&(ff=62500*R_());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Bl(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>ff?50:800)+i);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Ll(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hl=null;function Bl(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hl=new Map,i.forEach(J_,t),Hl=null,Ll.call(t))}function J_(t,i){if(!(i.state.loading&4)){var s=Hl.get(t);if(s)var l=s.get(null);else{s=new Map,Hl.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var w=f[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(s.set(w.dataset.precedence,w),l=w)}l&&s.set(null,l)}f=i.instance,w=f.getAttribute("data-precedence"),m=s.get(w)||l,m===l&&s.set(null,f),s.set(w,f),this.count++,l=Ll.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var zs={$$typeof:_,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function F_(t,i,s,l,f,m,w,A,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ya(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ya(0),this.hiddenUpdates=Ya(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function dy(t,i,s,l,f,m,w,A,L,W,ie,ae){return t=new F_(t,i,s,w,L,W,ie,ae,A),i=1,m===!0&&(i|=24),m=It(3,null,null,i),t.current=m,m.stateNode=t,i=Pu(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:s,cache:i},Ku(m),t}function fy(t){return t?(t=Yr,t):Yr}function hy(t,i,s,l,f,m){f=fy(f),l.context===null?l.context=f:l.pendingContext=f,l=vi(i),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=bi(t,l,i),s!==null&&(Ut(s,t,i),hs(s,t,i))}function gy(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function hf(t,i){gy(t,i),(t=t.alternate)&&gy(t,i)}function my(t){if(t.tag===13||t.tag===31){var i=Fi(t,67108864);i!==null&&Ut(i,t,67108864),hf(t,67108864)}}function py(t){if(t.tag===13||t.tag===31){var i=Yt();i=Xa(i);var s=Fi(t,i);s!==null&&Ut(s,t,i),hf(t,i)}}var Il=!0;function W_(t,i,s,l){var f=R.T;R.T=null;var m=H.p;try{H.p=2,gf(t,i,s,l)}finally{H.p=m,R.T=f}}function eS(t,i,s,l){var f=R.T;R.T=null;var m=H.p;try{H.p=8,gf(t,i,s,l)}finally{H.p=m,R.T=f}}function gf(t,i,s,l){if(Il){var f=mf(l);if(f===null)Wd(t,i,l,ql,s),vy(t,l);else if(nS(f,t,i,s,l))l.stopPropagation();else if(vy(t,l),i&4&&-1<tS.indexOf(t)){for(;f!==null;){var m=li(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Mn(m.pendingLanes);if(w!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;w;){var L=1<<31-Nt(w);A.entanglements[1]|=L,w&=~L}Cn(m),($e&6)===0&&(El=yt()+500,Os(0))}}break;case 31:case 13:A=Fi(m,2),A!==null&&Ut(A,m,2),Cl(),hf(m,2)}if(m=mf(l),m===null&&Wd(t,i,l,ql,s),m===f)break;f=m}f!==null&&l.stopPropagation()}else Wd(t,i,l,null,s)}}function mf(t){return t=pu(t),pf(t)}var ql=null;function pf(t){if(ql=null,t=oi(t),t!==null){var i=c(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=u(i),t!==null)return t;t=null}else if(s===31){if(t=d(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return ql=t,null}function yy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cr()){case kn:return 2;case si:return 8;case Pi:case tu:return 32;case Ar:return 268435456;default:return 32}default:return 32}}var yf=!1,Ri=null,ki=null,Mi=null,Us=new Map,$s=new Map,ji=[],tS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vy(t,i){switch(t){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Us.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(i.pointerId)}}function Ls(t,i,s,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:s,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},i!==null&&(i=li(i),i!==null&&my(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function nS(t,i,s,l,f){switch(i){case"focusin":return Ri=Ls(Ri,t,i,s,l,f),!0;case"dragenter":return ki=Ls(ki,t,i,s,l,f),!0;case"mouseover":return Mi=Ls(Mi,t,i,s,l,f),!0;case"pointerover":var m=f.pointerId;return Us.set(m,Ls(Us.get(m)||null,t,i,s,l,f)),!0;case"gotpointercapture":return m=f.pointerId,$s.set(m,Ls($s.get(m)||null,t,i,s,l,f)),!0}return!1}function by(t){var i=oi(t.target);if(i!==null){var s=c(i);if(s!==null){if(i=s.tag,i===13){if(i=u(s),i!==null){t.blockedOn=i,Ro(t.priority,function(){py(s)});return}}else if(i===31){if(i=d(s),i!==null){t.blockedOn=i,Ro(t.priority,function(){py(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=mf(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);mu=l,s.target.dispatchEvent(l),mu=null}else return i=li(s),i!==null&&my(i),t.blockedOn=s,!1;i.shift()}return!0}function wy(t,i,s){Vl(t)&&s.delete(i)}function iS(){yf=!1,Ri!==null&&Vl(Ri)&&(Ri=null),ki!==null&&Vl(ki)&&(ki=null),Mi!==null&&Vl(Mi)&&(Mi=null),Us.forEach(wy),$s.forEach(wy)}function Pl(t,i){t.blockedOn===i&&(t.blockedOn=null,yf||(yf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iS)))}var Gl=null;function xy(t){Gl!==t&&(Gl=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Gl===t&&(Gl=null);for(var i=0;i<t.length;i+=3){var s=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(pf(l||s)===null)continue;break}var m=li(s);m!==null&&(t.splice(i,3),i-=3,gd(m,{pending:!0,data:f,method:s.method,action:l},l,f))}}))}function pa(t){function i(L){return Pl(L,t)}Ri!==null&&Pl(Ri,t),ki!==null&&Pl(ki,t),Mi!==null&&Pl(Mi,t),Us.forEach(i),$s.forEach(i);for(var s=0;s<ji.length;s++){var l=ji[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ji.length&&(s=ji[0],s.blockedOn===null);)by(s),s.blockedOn===null&&ji.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var f=s[l],m=s[l+1],w=f[Et]||null;if(typeof m=="function")w||xy(s);else if(w){var A=null;if(m&&m.hasAttribute("formAction")){if(f=m,w=m[Et]||null)A=w.formAction;else if(pf(f)!==null)continue}else A=w.action;typeof A=="function"?s[l+1]=A:(s.splice(l,3),l-=3),xy(s)}}}function _y(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function vf(t){this._internalRoot=t}Yl.prototype.render=vf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,l=Yt();hy(s,l,t,i,null,null)},Yl.prototype.unmount=vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;hy(t.current,2,null,t,null,null),Cl(),i[jn]=null}};function Yl(t){this._internalRoot=t}Yl.prototype.unstable_scheduleHydration=function(t){if(t){var i=Oo();t={blockedOn:null,target:t,priority:i};for(var s=0;s<ji.length&&i!==0&&i<ji[s].priority;s++);ji.splice(s,0,t),s===0&&by(t)}};var Sy=n.version;if(Sy!=="19.2.0")throw Error(a(527,Sy,"19.2.0"));H.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=h(i),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var rS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Gi=Xl.inject(rS),At=Xl}catch{}}return Bs.createRoot=function(t,i){if(!o(t))throw Error(a(299));var s=!1,l="",f=Rm,m=km,w=Mm;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=dy(t,1,!1,null,null,s,l,null,f,m,w,_y),t[jn]=i.current,Fd(t),new vf(i)},Bs.hydrateRoot=function(t,i,s){if(!o(t))throw Error(a(299));var l=!1,f="",m=Rm,w=km,A=Mm,L=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.formState!==void 0&&(L=s.formState)),i=dy(t,1,!0,i,s??null,l,f,L,m,w,A,_y),i.context=fy(null),s=i.current,l=Yt(),l=Xa(l),f=vi(l),f.callback=null,bi(s,f,l),s=l,i.current.lanes=s,Xi(i,s),Cn(i),t[jn]=i.current,Fd(t),new Yl(i)},Bs.version="19.2.0",Bs}var jy;function hS(){if(jy)return xf.exports;jy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),xf.exports=fS(),xf.exports}var gS=hS();function ut(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,a;r<e.length;r++)(a=ut(e[r]))!==""&&(n+=(n&&" ")+a);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}var mS={value:()=>{}};function zc(){for(var e=0,n=arguments.length,r={},a;e<n;++e){if(!(a=arguments[e]+"")||a in r||/[\s.]/.test(a))throw new Error("illegal type: "+a);r[a]=[]}return new hc(r)}function hc(e){this._=e}function pS(e,n){return e.trim().split(/^|\s+/).map(function(r){var a="",o=r.indexOf(".");if(o>=0&&(a=r.slice(o+1),r=r.slice(0,o)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:a}})}hc.prototype=zc.prototype={constructor:hc,on:function(e,n){var r=this._,a=pS(e+"",r),o,c=-1,u=a.length;if(arguments.length<2){for(;++c<u;)if((o=(e=a[c]).type)&&(o=yS(r[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<u;)if(o=(e=a[c]).type)r[o]=Dy(r[o],e.name,n);else if(n==null)for(o in r)r[o]=Dy(r[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new hc(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var r=new Array(o),a=0,o,c;a<o;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],a=0,o=c.length;a<o;++a)c[a].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],o=0,c=a.length;o<c;++o)a[o].value.apply(n,r)}};function yS(e,n){for(var r=0,a=e.length,o;r<a;++r)if((o=e[r]).name===n)return o.value}function Dy(e,n,r){for(var a=0,o=e.length;a<o;++a)if(e[a].name===n){e[a]=mS,e=e.slice(0,a).concat(e.slice(a+1));break}return r!=null&&e.push({name:n,value:r}),e}var Zf="http://www.w3.org/1999/xhtml";const zy={svg:"http://www.w3.org/2000/svg",xhtml:Zf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Uc(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),zy.hasOwnProperty(n)?{space:zy[n],local:e}:e}function vS(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Zf&&n.documentElement.namespaceURI===Zf?n.createElement(e):n.createElementNS(r,e)}}function bS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mv(e){var n=Uc(e);return(n.local?bS:vS)(n)}function wS(){}function xh(e){return e==null?wS:function(){return this.querySelector(e)}}function xS(e){typeof e!="function"&&(e=xh(e));for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o)for(var c=n[o],u=c.length,d=a[o]=new Array(u),g,h,p=0;p<u;++p)(g=c[p])&&(h=e.call(g,g.__data__,p,c))&&("__data__"in g&&(h.__data__=g.__data__),d[p]=h);return new Jt(a,this._parents)}function _S(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function SS(){return[]}function jv(e){return e==null?SS:function(){return this.querySelectorAll(e)}}function ES(e){return function(){return _S(e.apply(this,arguments))}}function TS(e){typeof e=="function"?e=ES(e):e=jv(e);for(var n=this._groups,r=n.length,a=[],o=[],c=0;c<r;++c)for(var u=n[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&(a.push(e.call(g,g.__data__,h,u)),o.push(g));return new Jt(a,o)}function Dv(e){return function(){return this.matches(e)}}function zv(e){return function(n){return n.matches(e)}}var CS=Array.prototype.find;function AS(e){return function(){return CS.call(this.children,e)}}function NS(){return this.firstElementChild}function OS(e){return this.select(e==null?NS:AS(typeof e=="function"?e:zv(e)))}var RS=Array.prototype.filter;function kS(){return Array.from(this.children)}function MS(e){return function(){return RS.call(this.children,e)}}function jS(e){return this.selectAll(e==null?kS:MS(typeof e=="function"?e:zv(e)))}function DS(e){typeof e!="function"&&(e=Dv(e));for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o)for(var c=n[o],u=c.length,d=a[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new Jt(a,this._parents)}function Uv(e){return new Array(e.length)}function zS(){return new Jt(this._enter||this._groups.map(Uv),this._parents)}function wc(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}wc.prototype={constructor:wc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function US(e){return function(){return e}}function $S(e,n,r,a,o,c){for(var u=0,d,g=n.length,h=c.length;u<h;++u)(d=n[u])?(d.__data__=c[u],a[u]=d):r[u]=new wc(e,c[u]);for(;u<g;++u)(d=n[u])&&(o[u]=d)}function LS(e,n,r,a,o,c,u){var d,g,h=new Map,p=n.length,v=c.length,y=new Array(p),b;for(d=0;d<p;++d)(g=n[d])&&(y[d]=b=u.call(g,g.__data__,d,n)+"",h.has(b)?o[d]=g:h.set(b,g));for(d=0;d<v;++d)b=u.call(e,c[d],d,c)+"",(g=h.get(b))?(a[d]=g,g.__data__=c[d],h.delete(b)):r[d]=new wc(e,c[d]);for(d=0;d<p;++d)(g=n[d])&&h.get(y[d])===g&&(o[d]=g)}function HS(e){return e.__data__}function BS(e,n){if(!arguments.length)return Array.from(this,HS);var r=n?LS:$S,a=this._parents,o=this._groups;typeof e!="function"&&(e=US(e));for(var c=o.length,u=new Array(c),d=new Array(c),g=new Array(c),h=0;h<c;++h){var p=a[h],v=o[h],y=v.length,b=IS(e.call(p,p&&p.__data__,h,a)),E=b.length,x=d[h]=new Array(E),C=u[h]=new Array(E),T=g[h]=new Array(y);r(p,v,x,C,T,b,n);for(var k=0,_=0,N,$;k<E;++k)if(N=x[k]){for(k>=_&&(_=k+1);!($=C[_])&&++_<E;);N._next=$||null}}return u=new Jt(u,a),u._enter=d,u._exit=g,u}function IS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qS(){return new Jt(this._exit||this._groups.map(Uv),this._parents)}function VS(e,n,r){var a=this.enter(),o=this,c=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),n!=null&&(o=n(o),o&&(o=o.selection())),r==null?c.remove():r(c),a&&o?a.merge(o).order():o}function PS(e){for(var n=e.selection?e.selection():e,r=this._groups,a=n._groups,o=r.length,c=a.length,u=Math.min(o,c),d=new Array(o),g=0;g<u;++g)for(var h=r[g],p=a[g],v=h.length,y=d[g]=new Array(v),b,E=0;E<v;++E)(b=h[E]||p[E])&&(y[E]=b);for(;g<o;++g)d[g]=r[g];return new Jt(d,this._parents)}function GS(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var a=e[n],o=a.length-1,c=a[o],u;--o>=0;)(u=a[o])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function YS(e){e||(e=XS);function n(v,y){return v&&y?e(v.__data__,y.__data__):!v-!y}for(var r=this._groups,a=r.length,o=new Array(a),c=0;c<a;++c){for(var u=r[c],d=u.length,g=o[c]=new Array(d),h,p=0;p<d;++p)(h=u[p])&&(g[p]=h);g.sort(n)}return new Jt(o,this._parents).order()}function XS(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function KS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ZS(){return Array.from(this)}function QS(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],o=0,c=a.length;o<c;++o){var u=a[o];if(u)return u}return null}function JS(){let e=0;for(const n of this)++e;return e}function FS(){return!this.node()}function WS(e){for(var n=this._groups,r=0,a=n.length;r<a;++r)for(var o=n[r],c=0,u=o.length,d;c<u;++c)(d=o[c])&&e.call(d,d.__data__,c,o);return this}function e1(e){return function(){this.removeAttribute(e)}}function t1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function n1(e,n){return function(){this.setAttribute(e,n)}}function i1(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function r1(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function a1(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function s1(e,n){var r=Uc(e);if(arguments.length<2){var a=this.node();return r.local?a.getAttributeNS(r.space,r.local):a.getAttribute(r)}return this.each((n==null?r.local?t1:e1:typeof n=="function"?r.local?a1:r1:r.local?i1:n1)(r,n))}function $v(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function o1(e){return function(){this.style.removeProperty(e)}}function l1(e,n,r){return function(){this.style.setProperty(e,n,r)}}function c1(e,n,r){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,r)}}function u1(e,n,r){return arguments.length>1?this.each((n==null?o1:typeof n=="function"?c1:l1)(e,n,r??"")):$a(this.node(),e)}function $a(e,n){return e.style.getPropertyValue(n)||$v(e).getComputedStyle(e,null).getPropertyValue(n)}function d1(e){return function(){delete this[e]}}function f1(e,n){return function(){this[e]=n}}function h1(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function g1(e,n){return arguments.length>1?this.each((n==null?d1:typeof n=="function"?h1:f1)(e,n)):this.node()[e]}function Lv(e){return e.trim().split(/^|\s+/)}function _h(e){return e.classList||new Hv(e)}function Hv(e){this._node=e,this._names=Lv(e.getAttribute("class")||"")}Hv.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Bv(e,n){for(var r=_h(e),a=-1,o=n.length;++a<o;)r.add(n[a])}function Iv(e,n){for(var r=_h(e),a=-1,o=n.length;++a<o;)r.remove(n[a])}function m1(e){return function(){Bv(this,e)}}function p1(e){return function(){Iv(this,e)}}function y1(e,n){return function(){(n.apply(this,arguments)?Bv:Iv)(this,e)}}function v1(e,n){var r=Lv(e+"");if(arguments.length<2){for(var a=_h(this.node()),o=-1,c=r.length;++o<c;)if(!a.contains(r[o]))return!1;return!0}return this.each((typeof n=="function"?y1:n?m1:p1)(r,n))}function b1(){this.textContent=""}function w1(e){return function(){this.textContent=e}}function x1(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function _1(e){return arguments.length?this.each(e==null?b1:(typeof e=="function"?x1:w1)(e)):this.node().textContent}function S1(){this.innerHTML=""}function E1(e){return function(){this.innerHTML=e}}function T1(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function C1(e){return arguments.length?this.each(e==null?S1:(typeof e=="function"?T1:E1)(e)):this.node().innerHTML}function A1(){this.nextSibling&&this.parentNode.appendChild(this)}function N1(){return this.each(A1)}function O1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function R1(){return this.each(O1)}function k1(e){var n=typeof e=="function"?e:Mv(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function M1(){return null}function j1(e,n){var r=typeof e=="function"?e:Mv(e),a=n==null?M1:typeof n=="function"?n:xh(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),a.apply(this,arguments)||null)})}function D1(){var e=this.parentNode;e&&e.removeChild(this)}function z1(){return this.each(D1)}function U1(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function $1(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function L1(e){return this.select(e?$1:U1)}function H1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function B1(e){return function(n){e.call(this,n,this.__data__)}}function I1(e){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");return a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),{type:n,name:r}})}function q1(e){return function(){var n=this.__on;if(n){for(var r=0,a=-1,o=n.length,c;r<o;++r)c=n[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++a]=c;++a?n.length=a:delete this.__on}}}function V1(e,n,r){return function(){var a=this.__on,o,c=B1(n);if(a){for(var u=0,d=a.length;u<d;++u)if((o=a[u]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=c,o.options=r),o.value=n;return}}this.addEventListener(e.type,c,r),o={type:e.type,name:e.name,value:n,listener:c,options:r},a?a.push(o):this.__on=[o]}}function P1(e,n,r){var a=I1(e+""),o,c=a.length,u;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,h=d.length,p;g<h;++g)for(o=0,p=d[g];o<c;++o)if((u=a[o]).type===p.type&&u.name===p.name)return p.value}return}for(d=n?V1:q1,o=0;o<c;++o)this.each(d(a[o],n,r));return this}function qv(e,n,r){var a=$v(e),o=a.CustomEvent;typeof o=="function"?o=new o(n,r):(o=a.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}function G1(e,n){return function(){return qv(this,e,n)}}function Y1(e,n){return function(){return qv(this,e,n.apply(this,arguments))}}function X1(e,n){return this.each((typeof n=="function"?Y1:G1)(e,n))}function*K1(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],o=0,c=a.length,u;o<c;++o)(u=a[o])&&(yield u)}var Vv=[null];function Jt(e,n){this._groups=e,this._parents=n}function yo(){return new Jt([[document.documentElement]],Vv)}function Z1(){return this}Jt.prototype=yo.prototype={constructor:Jt,select:xS,selectAll:TS,selectChild:OS,selectChildren:jS,filter:DS,data:BS,enter:zS,exit:qS,join:VS,merge:PS,selection:Z1,order:GS,sort:YS,call:KS,nodes:ZS,node:QS,size:JS,empty:FS,each:WS,attr:s1,style:u1,property:g1,classed:v1,text:_1,html:C1,raise:N1,lower:R1,append:k1,insert:j1,remove:z1,clone:L1,datum:H1,on:P1,dispatch:X1,[Symbol.iterator]:K1};function Zt(e){return typeof e=="string"?new Jt([[document.querySelector(e)]],[document.documentElement]):new Jt([[e]],Vv)}function Q1(e){let n;for(;n=e.sourceEvent;)e=n;return e}function mn(e,n){if(e=Q1(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var a=r.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(n.getScreenCTM().inverse()),[a.x,a.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}const J1={passive:!1},Js={capture:!0,passive:!1};function Tf(e){e.stopImmediatePropagation()}function Da(e){e.preventDefault(),e.stopImmediatePropagation()}function Pv(e){var n=e.document.documentElement,r=Zt(e).on("dragstart.drag",Da,Js);"onselectstart"in n?r.on("selectstart.drag",Da,Js):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Gv(e,n){var r=e.document.documentElement,a=Zt(e).on("dragstart.drag",null);n&&(a.on("click.drag",Da,Js),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Zl=e=>()=>e;function Qf(e,{sourceEvent:n,subject:r,target:a,identifier:o,active:c,x:u,y:d,dx:g,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Qf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function F1(e){return!e.ctrlKey&&!e.button}function W1(){return this.parentNode}function eE(e,n){return n??{x:e.x,y:e.y}}function tE(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yv(){var e=F1,n=W1,r=eE,a=tE,o={},c=zc("start","drag","end"),u=0,d,g,h,p,v=0;function y(N){N.on("mousedown.drag",b).filter(a).on("touchstart.drag",C).on("touchmove.drag",T,J1).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(N,$){if(!(p||!e.call(this,N,$))){var j=_(this,n.call(this,N,$),N,$,"mouse");j&&(Zt(N.view).on("mousemove.drag",E,Js).on("mouseup.drag",x,Js),Pv(N.view),Tf(N),h=!1,d=N.clientX,g=N.clientY,j("start",N))}}function E(N){if(Da(N),!h){var $=N.clientX-d,j=N.clientY-g;h=$*$+j*j>v}o.mouse("drag",N)}function x(N){Zt(N.view).on("mousemove.drag mouseup.drag",null),Gv(N.view,h),Da(N),o.mouse("end",N)}function C(N,$){if(e.call(this,N,$)){var j=N.changedTouches,U=n.call(this,N,$),P=j.length,J,oe;for(J=0;J<P;++J)(oe=_(this,U,N,$,j[J].identifier,j[J]))&&(Tf(N),oe("start",N,j[J]))}}function T(N){var $=N.changedTouches,j=$.length,U,P;for(U=0;U<j;++U)(P=o[$[U].identifier])&&(Da(N),P("drag",N,$[U]))}function k(N){var $=N.changedTouches,j=$.length,U,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),U=0;U<j;++U)(P=o[$[U].identifier])&&(Tf(N),P("end",N,$[U]))}function _(N,$,j,U,P,J){var oe=c.copy(),te=mn(J||j,$),Z,q,z;if((z=r.call(N,new Qf("beforestart",{sourceEvent:j,target:y,identifier:P,active:u,x:te[0],y:te[1],dx:0,dy:0,dispatch:oe}),U))!=null)return Z=z.x-te[0]||0,q=z.y-te[1]||0,function G(R,H,B){var X=te,D;switch(R){case"start":o[P]=G,D=u++;break;case"end":delete o[P],--u;case"drag":te=mn(B||H,$),D=u;break}oe.call(R,N,new Qf(R,{sourceEvent:H,subject:z,target:y,identifier:P,active:D,x:te[0]+Z,y:te[1]+q,dx:te[0]-X[0],dy:te[1]-X[1],dispatch:oe}),U)}}return y.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Zl(!!N),y):e},y.container=function(N){return arguments.length?(n=typeof N=="function"?N:Zl(N),y):n},y.subject=function(N){return arguments.length?(r=typeof N=="function"?N:Zl(N),y):r},y.touchable=function(N){return arguments.length?(a=typeof N=="function"?N:Zl(!!N),y):a},y.on=function(){var N=c.on.apply(c,arguments);return N===c?y:N},y.clickDistance=function(N){return arguments.length?(v=(N=+N)*N,y):Math.sqrt(v)},y}function Sh(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function Xv(e,n){var r=Object.create(e.prototype);for(var a in n)r[a]=n[a];return r}function vo(){}var Fs=.7,xc=1/Fs,za="\\s*([+-]?\\d+)\\s*",Ws="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nE=/^#([0-9a-f]{3,8})$/,iE=new RegExp(`^rgb\\(${za},${za},${za}\\)$`),rE=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),aE=new RegExp(`^rgba\\(${za},${za},${za},${Ws}\\)$`),sE=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${Ws}\\)$`),oE=new RegExp(`^hsl\\(${Ws},${Nn},${Nn}\\)$`),lE=new RegExp(`^hsla\\(${Ws},${Nn},${Nn},${Ws}\\)$`),Uy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Sh(vo,Sr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$y,formatHex:$y,formatHex8:cE,formatHsl:uE,formatRgb:Ly,toString:Ly});function $y(){return this.rgb().formatHex()}function cE(){return this.rgb().formatHex8()}function uE(){return Kv(this).formatHsl()}function Ly(){return this.rgb().formatRgb()}function Sr(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=nE.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Hy(n):r===3?new $t(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Ql(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Ql(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=iE.exec(e))?new $t(n[1],n[2],n[3],1):(n=rE.exec(e))?new $t(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=aE.exec(e))?Ql(n[1],n[2],n[3],n[4]):(n=sE.exec(e))?Ql(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=oE.exec(e))?qy(n[1],n[2]/100,n[3]/100,1):(n=lE.exec(e))?qy(n[1],n[2]/100,n[3]/100,n[4]):Uy.hasOwnProperty(e)?Hy(Uy[e]):e==="transparent"?new $t(NaN,NaN,NaN,0):null}function Hy(e){return new $t(e>>16&255,e>>8&255,e&255,1)}function Ql(e,n,r,a){return a<=0&&(e=n=r=NaN),new $t(e,n,r,a)}function dE(e){return e instanceof vo||(e=Sr(e)),e?(e=e.rgb(),new $t(e.r,e.g,e.b,e.opacity)):new $t}function Jf(e,n,r,a){return arguments.length===1?dE(e):new $t(e,n,r,a??1)}function $t(e,n,r,a){this.r=+e,this.g=+n,this.b=+r,this.opacity=+a}Sh($t,Jf,Xv(vo,{brighter(e){return e=e==null?xc:Math.pow(xc,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fs:Math.pow(Fs,e),new $t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $t(wr(this.r),wr(this.g),wr(this.b),_c(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:By,formatHex:By,formatHex8:fE,formatRgb:Iy,toString:Iy}));function By(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}`}function fE(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}${vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Iy(){const e=_c(this.opacity);return`${e===1?"rgb(":"rgba("}${wr(this.r)}, ${wr(this.g)}, ${wr(this.b)}${e===1?")":`, ${e})`}`}function _c(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vr(e){return e=wr(e),(e<16?"0":"")+e.toString(16)}function qy(e,n,r,a){return a<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new yn(e,n,r,a)}function Kv(e){if(e instanceof yn)return new yn(e.h,e.s,e.l,e.opacity);if(e instanceof vo||(e=Sr(e)),!e)return new yn;if(e instanceof yn)return e;e=e.rgb();var n=e.r/255,r=e.g/255,a=e.b/255,o=Math.min(n,r,a),c=Math.max(n,r,a),u=NaN,d=c-o,g=(c+o)/2;return d?(n===c?u=(r-a)/d+(r<a)*6:r===c?u=(a-n)/d+2:u=(n-r)/d+4,d/=g<.5?c+o:2-c-o,u*=60):d=g>0&&g<1?0:u,new yn(u,d,g,e.opacity)}function hE(e,n,r,a){return arguments.length===1?Kv(e):new yn(e,n,r,a??1)}function yn(e,n,r,a){this.h=+e,this.s=+n,this.l=+r,this.opacity=+a}Sh(yn,hE,Xv(vo,{brighter(e){return e=e==null?xc:Math.pow(xc,e),new yn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fs:Math.pow(Fs,e),new yn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*n,o=2*r-a;return new $t(Cf(e>=240?e-240:e+120,o,a),Cf(e,o,a),Cf(e<120?e+240:e-120,o,a),this.opacity)},clamp(){return new yn(Vy(this.h),Jl(this.s),Jl(this.l),_c(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_c(this.opacity);return`${e===1?"hsl(":"hsla("}${Vy(this.h)}, ${Jl(this.s)*100}%, ${Jl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vy(e){return e=(e||0)%360,e<0?e+360:e}function Jl(e){return Math.max(0,Math.min(1,e||0))}function Cf(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const Eh=e=>()=>e;function gE(e,n){return function(r){return e+r*n}}function mE(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(a){return Math.pow(e+a*n,r)}}function pE(e){return(e=+e)==1?Zv:function(n,r){return r-n?mE(n,r,e):Eh(isNaN(n)?r:n)}}function Zv(e,n){var r=n-e;return r?gE(e,r):Eh(isNaN(e)?n:e)}const Sc=(function e(n){var r=pE(n);function a(o,c){var u=r((o=Jf(o)).r,(c=Jf(c)).r),d=r(o.g,c.g),g=r(o.b,c.b),h=Zv(o.opacity,c.opacity);return function(p){return o.r=u(p),o.g=d(p),o.b=g(p),o.opacity=h(p),o+""}}return a.gamma=e,a})(1);function yE(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,a=n.slice(),o;return function(c){for(o=0;o<r;++o)a[o]=e[o]*(1-c)+n[o]*c;return a}}function vE(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bE(e,n){var r=n?n.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),c=new Array(r),u;for(u=0;u<a;++u)o[u]=Xs(e[u],n[u]);for(;u<r;++u)c[u]=n[u];return function(d){for(u=0;u<a;++u)c[u]=o[u](d);return c}}function wE(e,n){var r=new Date;return e=+e,n=+n,function(a){return r.setTime(e*(1-a)+n*a),r}}function An(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function xE(e,n){var r={},a={},o;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(o in n)o in e?r[o]=Xs(e[o],n[o]):a[o]=n[o];return function(c){for(o in r)a[o]=r[o](c);return a}}var Ff=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Af=new RegExp(Ff.source,"g");function _E(e){return function(){return e}}function SE(e){return function(n){return e(n)+""}}function Qv(e,n){var r=Ff.lastIndex=Af.lastIndex=0,a,o,c,u=-1,d=[],g=[];for(e=e+"",n=n+"";(a=Ff.exec(e))&&(o=Af.exec(n));)(c=o.index)>r&&(c=n.slice(r,c),d[u]?d[u]+=c:d[++u]=c),(a=a[0])===(o=o[0])?d[u]?d[u]+=o:d[++u]=o:(d[++u]=null,g.push({i:u,x:An(a,o)})),r=Af.lastIndex;return r<n.length&&(c=n.slice(r),d[u]?d[u]+=c:d[++u]=c),d.length<2?g[0]?SE(g[0].x):_E(n):(n=g.length,function(h){for(var p=0,v;p<n;++p)d[(v=g[p]).i]=v.x(h);return d.join("")})}function Xs(e,n){var r=typeof n,a;return n==null||r==="boolean"?Eh(n):(r==="number"?An:r==="string"?(a=Sr(n))?(n=a,Sc):Qv:n instanceof Sr?Sc:n instanceof Date?wE:vE(n)?yE:Array.isArray(n)?bE:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?xE:An)(e,n)}var Py=180/Math.PI,Wf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jv(e,n,r,a,o,c){var u,d,g;return(u=Math.sqrt(e*e+n*n))&&(e/=u,n/=u),(g=e*r+n*a)&&(r-=e*g,a-=n*g),(d=Math.sqrt(r*r+a*a))&&(r/=d,a/=d,g/=d),e*a<n*r&&(e=-e,n=-n,g=-g,u=-u),{translateX:o,translateY:c,rotate:Math.atan2(n,e)*Py,skewX:Math.atan(g)*Py,scaleX:u,scaleY:d}}var Fl;function EE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Wf:Jv(n.a,n.b,n.c,n.d,n.e,n.f)}function TE(e){return e==null||(Fl||(Fl=document.createElementNS("http://www.w3.org/2000/svg","g")),Fl.setAttribute("transform",e),!(e=Fl.transform.baseVal.consolidate()))?Wf:(e=e.matrix,Jv(e.a,e.b,e.c,e.d,e.e,e.f))}function Fv(e,n,r,a){function o(h){return h.length?h.pop()+" ":""}function c(h,p,v,y,b,E){if(h!==v||p!==y){var x=b.push("translate(",null,n,null,r);E.push({i:x-4,x:An(h,v)},{i:x-2,x:An(p,y)})}else(v||y)&&b.push("translate("+v+n+y+r)}function u(h,p,v,y){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),y.push({i:v.push(o(v)+"rotate(",null,a)-2,x:An(h,p)})):p&&v.push(o(v)+"rotate("+p+a)}function d(h,p,v,y){h!==p?y.push({i:v.push(o(v)+"skewX(",null,a)-2,x:An(h,p)}):p&&v.push(o(v)+"skewX("+p+a)}function g(h,p,v,y,b,E){if(h!==v||p!==y){var x=b.push(o(b)+"scale(",null,",",null,")");E.push({i:x-4,x:An(h,v)},{i:x-2,x:An(p,y)})}else(v!==1||y!==1)&&b.push(o(b)+"scale("+v+","+y+")")}return function(h,p){var v=[],y=[];return h=e(h),p=e(p),c(h.translateX,h.translateY,p.translateX,p.translateY,v,y),u(h.rotate,p.rotate,v,y),d(h.skewX,p.skewX,v,y),g(h.scaleX,h.scaleY,p.scaleX,p.scaleY,v,y),h=p=null,function(b){for(var E=-1,x=y.length,C;++E<x;)v[(C=y[E]).i]=C.x(b);return v.join("")}}}var CE=Fv(EE,"px, ","px)","deg)"),AE=Fv(TE,", ",")",")"),NE=1e-12;function Gy(e){return((e=Math.exp(e))+1/e)/2}function OE(e){return((e=Math.exp(e))-1/e)/2}function RE(e){return((e=Math.exp(2*e))-1)/(e+1)}const gc=(function e(n,r,a){function o(c,u){var d=c[0],g=c[1],h=c[2],p=u[0],v=u[1],y=u[2],b=p-d,E=v-g,x=b*b+E*E,C,T;if(x<NE)T=Math.log(y/h)/n,C=function(U){return[d+U*b,g+U*E,h*Math.exp(n*U*T)]};else{var k=Math.sqrt(x),_=(y*y-h*h+a*x)/(2*h*r*k),N=(y*y-h*h-a*x)/(2*y*r*k),$=Math.log(Math.sqrt(_*_+1)-_),j=Math.log(Math.sqrt(N*N+1)-N);T=(j-$)/n,C=function(U){var P=U*T,J=Gy($),oe=h/(r*k)*(J*RE(n*P+$)-OE($));return[d+oe*b,g+oe*E,h*J/Gy(n*P+$)]}}return C.duration=T*1e3*n/Math.SQRT2,C}return o.rho=function(c){var u=Math.max(.001,+c),d=u*u,g=d*d;return e(u,d,g)},o})(Math.SQRT2,2,4);var La=0,Ps=0,Is=0,Wv=1e3,Ec,Gs,Tc=0,Er=0,$c=0,eo=typeof performance=="object"&&performance.now?performance:Date,eb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Th(){return Er||(eb(kE),Er=eo.now()+$c)}function kE(){Er=0}function Cc(){this._call=this._time=this._next=null}Cc.prototype=tb.prototype={constructor:Cc,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Th():+r)+(n==null?0:+n),!this._next&&Gs!==this&&(Gs?Gs._next=this:Ec=this,Gs=this),this._call=e,this._time=r,eh()},stop:function(){this._call&&(this._call=null,this._time=1/0,eh())}};function tb(e,n,r){var a=new Cc;return a.restart(e,n,r),a}function ME(){Th(),++La;for(var e=Ec,n;e;)(n=Er-e._time)>=0&&e._call.call(void 0,n),e=e._next;--La}function Yy(){Er=(Tc=eo.now())+$c,La=Ps=0;try{ME()}finally{La=0,DE(),Er=0}}function jE(){var e=eo.now(),n=e-Tc;n>Wv&&($c-=n,Tc=e)}function DE(){for(var e,n=Ec,r,a=1/0;n;)n._call?(a>n._time&&(a=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Ec=r);Gs=e,eh(a)}function eh(e){if(!La){Ps&&(Ps=clearTimeout(Ps));var n=e-Er;n>24?(e<1/0&&(Ps=setTimeout(Yy,e-eo.now()-$c)),Is&&(Is=clearInterval(Is))):(Is||(Tc=eo.now(),Is=setInterval(jE,Wv)),La=1,eb(Yy))}}function Xy(e,n,r){var a=new Cc;return n=n==null?0:+n,a.restart(o=>{a.stop(),e(o+n)},n,r),a}var zE=zc("start","end","cancel","interrupt"),UE=[],nb=0,Ky=1,th=2,mc=3,Zy=4,nh=5,pc=6;function Lc(e,n,r,a,o,c){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;$E(e,r,{name:n,index:a,group:o,on:zE,tween:UE,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:nb})}function Ch(e,n){var r=wn(e,n);if(r.state>nb)throw new Error("too late; already scheduled");return r}function Rn(e,n){var r=wn(e,n);if(r.state>mc)throw new Error("too late; already running");return r}function wn(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function $E(e,n,r){var a=e.__transition,o;a[n]=r,r.timer=tb(c,0,r.time);function c(h){r.state=Ky,r.timer.restart(u,r.delay,r.time),r.delay<=h&&u(h-r.delay)}function u(h){var p,v,y,b;if(r.state!==Ky)return g();for(p in a)if(b=a[p],b.name===r.name){if(b.state===mc)return Xy(u);b.state===Zy?(b.state=pc,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete a[p]):+p<n&&(b.state=pc,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete a[p])}if(Xy(function(){r.state===mc&&(r.state=Zy,r.timer.restart(d,r.delay,r.time),d(h))}),r.state=th,r.on.call("start",e,e.__data__,r.index,r.group),r.state===th){for(r.state=mc,o=new Array(y=r.tween.length),p=0,v=-1;p<y;++p)(b=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(o[++v]=b);o.length=v+1}}function d(h){for(var p=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(g),r.state=nh,1),v=-1,y=o.length;++v<y;)o[v].call(e,p);r.state===nh&&(r.on.call("end",e,e.__data__,r.index,r.group),g())}function g(){r.state=pc,r.timer.stop(),delete a[n];for(var h in a)return;delete e.__transition}}function yc(e,n){var r=e.__transition,a,o,c=!0,u;if(r){n=n==null?null:n+"";for(u in r){if((a=r[u]).name!==n){c=!1;continue}o=a.state>th&&a.state<nh,a.state=pc,a.timer.stop(),a.on.call(o?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete r[u]}c&&delete e.__transition}}function LE(e){return this.each(function(){yc(this,e)})}function HE(e,n){var r,a;return function(){var o=Rn(this,e),c=o.tween;if(c!==r){a=r=c;for(var u=0,d=a.length;u<d;++u)if(a[u].name===n){a=a.slice(),a.splice(u,1);break}}o.tween=a}}function BE(e,n,r){var a,o;if(typeof r!="function")throw new Error;return function(){var c=Rn(this,e),u=c.tween;if(u!==a){o=(a=u).slice();for(var d={name:n,value:r},g=0,h=o.length;g<h;++g)if(o[g].name===n){o[g]=d;break}g===h&&o.push(d)}c.tween=o}}function IE(e,n){var r=this._id;if(e+="",arguments.length<2){for(var a=wn(this.node(),r).tween,o=0,c=a.length,u;o<c;++o)if((u=a[o]).name===e)return u.value;return null}return this.each((n==null?HE:BE)(r,e,n))}function Ah(e,n,r){var a=e._id;return e.each(function(){var o=Rn(this,a);(o.value||(o.value={}))[n]=r.apply(this,arguments)}),function(o){return wn(o,a).value[n]}}function ib(e,n){var r;return(typeof n=="number"?An:n instanceof Sr?Sc:(r=Sr(n))?(n=r,Sc):Qv)(e,n)}function qE(e){return function(){this.removeAttribute(e)}}function VE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function PE(e,n,r){var a,o=r+"",c;return function(){var u=this.getAttribute(e);return u===o?null:u===a?c:c=n(a=u,r)}}function GE(e,n,r){var a,o=r+"",c;return function(){var u=this.getAttributeNS(e.space,e.local);return u===o?null:u===a?c:c=n(a=u,r)}}function YE(e,n,r){var a,o,c;return function(){var u,d=r(this),g;return d==null?void this.removeAttribute(e):(u=this.getAttribute(e),g=d+"",u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d)))}}function XE(e,n,r){var a,o,c;return function(){var u,d=r(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),g=d+"",u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d)))}}function KE(e,n){var r=Uc(e),a=r==="transform"?AE:ib;return this.attrTween(e,typeof n=="function"?(r.local?XE:YE)(r,a,Ah(this,"attr."+e,n)):n==null?(r.local?VE:qE)(r):(r.local?GE:PE)(r,a,n))}function ZE(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function QE(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function JE(e,n){var r,a;function o(){var c=n.apply(this,arguments);return c!==a&&(r=(a=c)&&QE(e,c)),r}return o._value=n,o}function FE(e,n){var r,a;function o(){var c=n.apply(this,arguments);return c!==a&&(r=(a=c)&&ZE(e,c)),r}return o._value=n,o}function WE(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var a=Uc(e);return this.tween(r,(a.local?JE:FE)(a,n))}function e2(e,n){return function(){Ch(this,e).delay=+n.apply(this,arguments)}}function t2(e,n){return n=+n,function(){Ch(this,e).delay=n}}function n2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?e2:t2)(n,e)):wn(this.node(),n).delay}function i2(e,n){return function(){Rn(this,e).duration=+n.apply(this,arguments)}}function r2(e,n){return n=+n,function(){Rn(this,e).duration=n}}function a2(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?i2:r2)(n,e)):wn(this.node(),n).duration}function s2(e,n){if(typeof n!="function")throw new Error;return function(){Rn(this,e).ease=n}}function o2(e){var n=this._id;return arguments.length?this.each(s2(n,e)):wn(this.node(),n).ease}function l2(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;Rn(this,e).ease=r}}function c2(e){if(typeof e!="function")throw new Error;return this.each(l2(this._id,e))}function u2(e){typeof e!="function"&&(e=Dv(e));for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o)for(var c=n[o],u=c.length,d=a[o]=[],g,h=0;h<u;++h)(g=c[h])&&e.call(g,g.__data__,h,c)&&d.push(g);return new ti(a,this._parents,this._name,this._id)}function d2(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,a=n.length,o=r.length,c=Math.min(a,o),u=new Array(a),d=0;d<c;++d)for(var g=n[d],h=r[d],p=g.length,v=u[d]=new Array(p),y,b=0;b<p;++b)(y=g[b]||h[b])&&(v[b]=y);for(;d<a;++d)u[d]=n[d];return new ti(u,this._parents,this._name,this._id)}function f2(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function h2(e,n,r){var a,o,c=f2(n)?Ch:Rn;return function(){var u=c(this,e),d=u.on;d!==a&&(o=(a=d).copy()).on(n,r),u.on=o}}function g2(e,n){var r=this._id;return arguments.length<2?wn(this.node(),r).on.on(e):this.each(h2(r,e,n))}function m2(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function p2(){return this.on("end.remove",m2(this._id))}function y2(e){var n=this._name,r=this._id;typeof e!="function"&&(e=xh(e));for(var a=this._groups,o=a.length,c=new Array(o),u=0;u<o;++u)for(var d=a[u],g=d.length,h=c[u]=new Array(g),p,v,y=0;y<g;++y)(p=d[y])&&(v=e.call(p,p.__data__,y,d))&&("__data__"in p&&(v.__data__=p.__data__),h[y]=v,Lc(h[y],n,r,y,h,wn(p,r)));return new ti(c,this._parents,n,r)}function v2(e){var n=this._name,r=this._id;typeof e!="function"&&(e=jv(e));for(var a=this._groups,o=a.length,c=[],u=[],d=0;d<o;++d)for(var g=a[d],h=g.length,p,v=0;v<h;++v)if(p=g[v]){for(var y=e.call(p,p.__data__,v,g),b,E=wn(p,r),x=0,C=y.length;x<C;++x)(b=y[x])&&Lc(b,n,r,x,y,E);c.push(y),u.push(p)}return new ti(c,u,n,r)}var b2=yo.prototype.constructor;function w2(){return new b2(this._groups,this._parents)}function x2(e,n){var r,a,o;return function(){var c=$a(this,e),u=(this.style.removeProperty(e),$a(this,e));return c===u?null:c===r&&u===a?o:o=n(r=c,a=u)}}function rb(e){return function(){this.style.removeProperty(e)}}function _2(e,n,r){var a,o=r+"",c;return function(){var u=$a(this,e);return u===o?null:u===a?c:c=n(a=u,r)}}function S2(e,n,r){var a,o,c;return function(){var u=$a(this,e),d=r(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),$a(this,e))),u===g?null:u===a&&g===o?c:(o=g,c=n(a=u,d))}}function E2(e,n){var r,a,o,c="style."+n,u="end."+c,d;return function(){var g=Rn(this,e),h=g.on,p=g.value[c]==null?d||(d=rb(n)):void 0;(h!==r||o!==p)&&(a=(r=h).copy()).on(u,o=p),g.on=a}}function T2(e,n,r){var a=(e+="")=="transform"?CE:ib;return n==null?this.styleTween(e,x2(e,a)).on("end.style."+e,rb(e)):typeof n=="function"?this.styleTween(e,S2(e,a,Ah(this,"style."+e,n))).each(E2(this._id,e)):this.styleTween(e,_2(e,a,n),r).on("end.style."+e,null)}function C2(e,n,r){return function(a){this.style.setProperty(e,n.call(this,a),r)}}function A2(e,n,r){var a,o;function c(){var u=n.apply(this,arguments);return u!==o&&(a=(o=u)&&C2(e,u,r)),a}return c._value=n,c}function N2(e,n,r){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;return this.tween(a,A2(e,n,r??""))}function O2(e){return function(){this.textContent=e}}function R2(e){return function(){var n=e(this);this.textContent=n??""}}function k2(e){return this.tween("text",typeof e=="function"?R2(Ah(this,"text",e)):O2(e==null?"":e+""))}function M2(e){return function(n){this.textContent=e.call(this,n)}}function j2(e){var n,r;function a(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&M2(o)),n}return a._value=e,a}function D2(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,j2(e))}function z2(){for(var e=this._name,n=this._id,r=ab(),a=this._groups,o=a.length,c=0;c<o;++c)for(var u=a[c],d=u.length,g,h=0;h<d;++h)if(g=u[h]){var p=wn(g,n);Lc(g,e,r,h,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ti(a,this._parents,e,r)}function U2(){var e,n,r=this,a=r._id,o=r.size();return new Promise(function(c,u){var d={value:u},g={value:function(){--o===0&&c()}};r.each(function(){var h=Rn(this,a),p=h.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(d),n._.interrupt.push(d),n._.end.push(g)),h.on=n}),o===0&&c()})}var $2=0;function ti(e,n,r,a){this._groups=e,this._parents=n,this._name=r,this._id=a}function ab(){return++$2}var Fn=yo.prototype;ti.prototype={constructor:ti,select:y2,selectAll:v2,selectChild:Fn.selectChild,selectChildren:Fn.selectChildren,filter:u2,merge:d2,selection:w2,transition:z2,call:Fn.call,nodes:Fn.nodes,node:Fn.node,size:Fn.size,empty:Fn.empty,each:Fn.each,on:g2,attr:KE,attrTween:WE,style:T2,styleTween:N2,text:k2,textTween:D2,remove:p2,tween:IE,delay:n2,duration:a2,ease:o2,easeVarying:c2,end:U2,[Symbol.iterator]:Fn[Symbol.iterator]};function L2(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var H2={time:null,delay:0,duration:250,ease:L2};function B2(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function I2(e){var n,r;e instanceof ti?(n=e._id,e=e._name):(n=ab(),(r=H2).time=Th(),e=e==null?null:e+"");for(var a=this._groups,o=a.length,c=0;c<o;++c)for(var u=a[c],d=u.length,g,h=0;h<d;++h)(g=u[h])&&Lc(g,e,n,h,u,r||B2(g,n));return new ti(a,this._parents,e,n)}yo.prototype.interrupt=LE;yo.prototype.transition=I2;const Wl=e=>()=>e;function q2(e,{sourceEvent:n,target:r,transform:a,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:o}})}function ei(e,n,r){this.k=e,this.x=n,this.y=r}ei.prototype={constructor:ei,scale:function(e){return e===1?this:new ei(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new ei(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hc=new ei(1,0,0);sb.prototype=ei.prototype;function sb(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Hc;return e.__zoom}function Nf(e){e.stopImmediatePropagation()}function qs(e){e.preventDefault(),e.stopImmediatePropagation()}function V2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function P2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Qy(){return this.__zoom||Hc}function G2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Y2(){return navigator.maxTouchPoints||"ontouchstart"in this}function X2(e,n,r){var a=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],c=e.invertY(n[0][1])-r[0][1],u=e.invertY(n[1][1])-r[1][1];return e.translate(o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function ob(){var e=V2,n=P2,r=X2,a=G2,o=Y2,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],d=250,g=gc,h=zc("start","zoom","end"),p,v,y,b=500,E=150,x=0,C=10;function T(z){z.property("__zoom",Qy).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",J).on("dblclick.zoom",oe).filter(o).on("touchstart.zoom",te).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(z,G,R,H){var B=z.selection?z.selection():z;B.property("__zoom",Qy),z!==B?$(z,G,R,H):B.interrupt().each(function(){j(this,arguments).event(H).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},T.scaleBy=function(z,G,R,H){T.scaleTo(z,function(){var B=this.__zoom.k,X=typeof G=="function"?G.apply(this,arguments):G;return B*X},R,H)},T.scaleTo=function(z,G,R,H){T.transform(z,function(){var B=n.apply(this,arguments),X=this.__zoom,D=R==null?N(B):typeof R=="function"?R.apply(this,arguments):R,O=X.invert(D),M=typeof G=="function"?G.apply(this,arguments):G;return r(_(k(X,M),D,O),B,u)},R,H)},T.translateBy=function(z,G,R,H){T.transform(z,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof R=="function"?R.apply(this,arguments):R),n.apply(this,arguments),u)},null,H)},T.translateTo=function(z,G,R,H,B){T.transform(z,function(){var X=n.apply(this,arguments),D=this.__zoom,O=H==null?N(X):typeof H=="function"?H.apply(this,arguments):H;return r(Hc.translate(O[0],O[1]).scale(D.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof R=="function"?-R.apply(this,arguments):-R),X,u)},H,B)};function k(z,G){return G=Math.max(c[0],Math.min(c[1],G)),G===z.k?z:new ei(G,z.x,z.y)}function _(z,G,R){var H=G[0]-R[0]*z.k,B=G[1]-R[1]*z.k;return H===z.x&&B===z.y?z:new ei(z.k,H,B)}function N(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function $(z,G,R,H){z.on("start.zoom",function(){j(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(H).end()}).tween("zoom",function(){var B=this,X=arguments,D=j(B,X).event(H),O=n.apply(B,X),M=R==null?N(O):typeof R=="function"?R.apply(B,X):R,K=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),Q=B.__zoom,se=typeof G=="function"?G.apply(B,X):G,ue=g(Q.invert(M).concat(K/Q.k),se.invert(M).concat(K/se.k));return function(ce){if(ce===1)ce=se;else{var le=ue(ce),de=K/le[2];ce=new ei(de,M[0]-le[0]*de,M[1]-le[1]*de)}D.zoom(null,ce)}})}function j(z,G,R){return!R&&z.__zooming||new U(z,G)}function U(z,G){this.that=z,this.args=G,this.active=0,this.sourceEvent=null,this.extent=n.apply(z,G),this.taps=0}U.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,G){return this.mouse&&z!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var G=Zt(this.that).datum();h.call(z,this.that,new q2(z,{sourceEvent:this.sourceEvent,target:T,transform:this.that.__zoom,dispatch:h}),G)}};function P(z,...G){if(!e.apply(this,arguments))return;var R=j(this,G).event(z),H=this.__zoom,B=Math.max(c[0],Math.min(c[1],H.k*Math.pow(2,a.apply(this,arguments)))),X=mn(z);if(R.wheel)(R.mouse[0][0]!==X[0]||R.mouse[0][1]!==X[1])&&(R.mouse[1]=H.invert(R.mouse[0]=X)),clearTimeout(R.wheel);else{if(H.k===B)return;R.mouse=[X,H.invert(X)],yc(this),R.start()}qs(z),R.wheel=setTimeout(D,E),R.zoom("mouse",r(_(k(H,B),R.mouse[0],R.mouse[1]),R.extent,u));function D(){R.wheel=null,R.end()}}function J(z,...G){if(y||!e.apply(this,arguments))return;var R=z.currentTarget,H=j(this,G,!0).event(z),B=Zt(z.view).on("mousemove.zoom",M,!0).on("mouseup.zoom",K,!0),X=mn(z,R),D=z.clientX,O=z.clientY;Pv(z.view),Nf(z),H.mouse=[X,this.__zoom.invert(X)],yc(this),H.start();function M(Q){if(qs(Q),!H.moved){var se=Q.clientX-D,ue=Q.clientY-O;H.moved=se*se+ue*ue>x}H.event(Q).zoom("mouse",r(_(H.that.__zoom,H.mouse[0]=mn(Q,R),H.mouse[1]),H.extent,u))}function K(Q){B.on("mousemove.zoom mouseup.zoom",null),Gv(Q.view,H.moved),qs(Q),H.event(Q).end()}}function oe(z,...G){if(e.apply(this,arguments)){var R=this.__zoom,H=mn(z.changedTouches?z.changedTouches[0]:z,this),B=R.invert(H),X=R.k*(z.shiftKey?.5:2),D=r(_(k(R,X),H,B),n.apply(this,G),u);qs(z),d>0?Zt(this).transition().duration(d).call($,D,H,z):Zt(this).call(T.transform,D,H,z)}}function te(z,...G){if(e.apply(this,arguments)){var R=z.touches,H=R.length,B=j(this,G,z.changedTouches.length===H).event(z),X,D,O,M;for(Nf(z),D=0;D<H;++D)O=R[D],M=mn(O,this),M=[M,this.__zoom.invert(M),O.identifier],B.touch0?!B.touch1&&B.touch0[2]!==M[2]&&(B.touch1=M,B.taps=0):(B.touch0=M,X=!0,B.taps=1+!!p);p&&(p=clearTimeout(p)),X&&(B.taps<2&&(v=M[0],p=setTimeout(function(){p=null},b)),yc(this),B.start())}}function Z(z,...G){if(this.__zooming){var R=j(this,G).event(z),H=z.changedTouches,B=H.length,X,D,O,M;for(qs(z),X=0;X<B;++X)D=H[X],O=mn(D,this),R.touch0&&R.touch0[2]===D.identifier?R.touch0[0]=O:R.touch1&&R.touch1[2]===D.identifier&&(R.touch1[0]=O);if(D=R.that.__zoom,R.touch1){var K=R.touch0[0],Q=R.touch0[1],se=R.touch1[0],ue=R.touch1[1],ce=(ce=se[0]-K[0])*ce+(ce=se[1]-K[1])*ce,le=(le=ue[0]-Q[0])*le+(le=ue[1]-Q[1])*le;D=k(D,Math.sqrt(ce/le)),O=[(K[0]+se[0])/2,(K[1]+se[1])/2],M=[(Q[0]+ue[0])/2,(Q[1]+ue[1])/2]}else if(R.touch0)O=R.touch0[0],M=R.touch0[1];else return;R.zoom("touch",r(_(D,O,M),R.extent,u))}}function q(z,...G){if(this.__zooming){var R=j(this,G).event(z),H=z.changedTouches,B=H.length,X,D;for(Nf(z),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),X=0;X<B;++X)D=H[X],R.touch0&&R.touch0[2]===D.identifier?delete R.touch0:R.touch1&&R.touch1[2]===D.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(D=mn(D,this),Math.hypot(v[0]-D[0],v[1]-D[1])<C)){var O=Zt(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return T.wheelDelta=function(z){return arguments.length?(a=typeof z=="function"?z:Wl(+z),T):a},T.filter=function(z){return arguments.length?(e=typeof z=="function"?z:Wl(!!z),T):e},T.touchable=function(z){return arguments.length?(o=typeof z=="function"?z:Wl(!!z),T):o},T.extent=function(z){return arguments.length?(n=typeof z=="function"?z:Wl([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),T):n},T.scaleExtent=function(z){return arguments.length?(c[0]=+z[0],c[1]=+z[1],T):[c[0],c[1]]},T.translateExtent=function(z){return arguments.length?(u[0][0]=+z[0][0],u[1][0]=+z[1][0],u[0][1]=+z[0][1],u[1][1]=+z[1][1],T):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},T.constrain=function(z){return arguments.length?(r=z,T):r},T.duration=function(z){return arguments.length?(d=+z,T):d},T.interpolate=function(z){return arguments.length?(g=z,T):g},T.on=function(){var z=h.on.apply(h,arguments);return z===h?T:z},T.clickDistance=function(z){return arguments.length?(x=(z=+z)*z,T):Math.sqrt(x)},T.tapDistance=function(z){return arguments.length?(C=+z,T):C},T}const On={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:r,targetHandle:a})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:a}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},to=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],lb=["Enter"," ","Escape"],cb={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:r})=>`Moved selected node ${e}. New position, x: ${n}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ha;(function(e){e.Strict="strict",e.Loose="loose"})(Ha||(Ha={}));var xr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xr||(xr={}));var no;(function(e){e.Partial="partial",e.Full="full"})(no||(no={}));const ub={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Li;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Li||(Li={}));var _r;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(_r||(_r={}));var he;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(he||(he={}));const Jy={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function db(e){return e===null?null:e?"valid":"invalid"}const fb=e=>"id"in e&&"source"in e&&"target"in e,K2=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Nh=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),bo=(e,n=[0,0])=>{const{width:r,height:a}=ni(e),o=e.origin??n,c=r*o[0],u=a*o[1];return{x:e.position.x-c,y:e.position.y-u}},Z2=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((a,o)=>{const c=typeof o=="string";let u=!n.nodeLookup&&!c?o:void 0;n.nodeLookup&&(u=c?n.nodeLookup.get(o):Nh(o)?o:n.nodeLookup.get(o.id));const d=u?Ac(u,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Bc(a,d)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ic(r)},wo=(e,n={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},a=!1;return e.forEach(o=>{(n.filter===void 0||n.filter(o))&&(r=Bc(r,Ac(o)),a=!0)}),a?Ic(r):{x:0,y:0,width:0,height:0}},Oh=(e,n,[r,a,o]=[0,0,1],c=!1,u=!1)=>{const d={..._o(n,[r,a,o]),width:n.width/o,height:n.height/o},g=[];for(const h of e.values()){const{measured:p,selectable:v=!0,hidden:y=!1}=h;if(u&&!v||y)continue;const b=p.width??h.width??h.initialWidth??null,E=p.height??h.height??h.initialHeight??null,x=io(d,Ia(h)),C=(b??0)*(E??0),T=c&&x>0;(!h.internals.handleBounds||T||x>=C||h.dragging)&&g.push(h)}return g},Q2=(e,n)=>{const r=new Set;return e.forEach(a=>{r.add(a.id)}),n.filter(a=>r.has(a.source)||r.has(a.target))};function J2(e,n){const r=new Map,a=n?.nodes?new Set(n.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(n?.includeHiddenNodes||!o.hidden)&&(!a||a.has(o.id))&&r.set(o.id,o)}),r}async function F2({nodes:e,width:n,height:r,panZoom:a,minZoom:o,maxZoom:c},u){if(e.size===0)return Promise.resolve(!0);const d=J2(e,u),g=wo(d),h=Rh(g,n,r,u?.minZoom??o,u?.maxZoom??c,u?.padding??.1);return await a.setViewport(h,{duration:u?.duration,ease:u?.ease,interpolate:u?.interpolate}),Promise.resolve(!0)}function hb({nodeId:e,nextPosition:n,nodeLookup:r,nodeOrigin:a=[0,0],nodeExtent:o,onError:c}){const u=r.get(e),d=u.parentId?r.get(u.parentId):void 0,{x:g,y:h}=d?d.internals.positionAbsolute:{x:0,y:0},p=u.origin??a;let v=u.extent||o;if(u.extent==="parent"&&!u.expandParent)if(!d)c?.("005",On.error005());else{const b=d.measured.width,E=d.measured.height;b&&E&&(v=[[g,h],[g+b,h+E]])}else d&&qa(u.extent)&&(v=[[u.extent[0][0]+g,u.extent[0][1]+h],[u.extent[1][0]+g,u.extent[1][1]+h]]);const y=qa(v)?Tr(n,v,u.measured):n;return(u.measured.width===void 0||u.measured.height===void 0)&&c?.("015",On.error015()),{position:{x:y.x-g+(u.measured.width??0)*p[0],y:y.y-h+(u.measured.height??0)*p[1]},positionAbsolute:y}}async function W2({nodesToRemove:e=[],edgesToRemove:n=[],nodes:r,edges:a,onBeforeDelete:o}){const c=new Set(e.map(y=>y.id)),u=[];for(const y of r){if(y.deletable===!1)continue;const b=c.has(y.id),E=!b&&y.parentId&&u.find(x=>x.id===y.parentId);(b||E)&&u.push(y)}const d=new Set(n.map(y=>y.id)),g=a.filter(y=>y.deletable!==!1),p=Q2(u,g);for(const y of g)d.has(y.id)&&!p.find(E=>E.id===y.id)&&p.push(y);if(!o)return{edges:p,nodes:u};const v=await o({nodes:u,edges:p});return typeof v=="boolean"?v?{edges:p,nodes:u}:{edges:[],nodes:[]}:v}const Ba=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),Tr=(e={x:0,y:0},n,r)=>({x:Ba(e.x,n[0][0],n[1][0]-(r?.width??0)),y:Ba(e.y,n[0][1],n[1][1]-(r?.height??0))});function gb(e,n,r){const{width:a,height:o}=ni(r),{x:c,y:u}=r.internals.positionAbsolute;return Tr(e,[[c,u],[c+a,u+o]],n)}const Fy=(e,n,r)=>e<n?Ba(Math.abs(e-n),1,n)/n:e>r?-Ba(Math.abs(e-r),1,n)/n:0,mb=(e,n,r=15,a=40)=>{const o=Fy(e.x,a,n.width-a)*r,c=Fy(e.y,a,n.height-a)*r;return[o,c]},Bc=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),ih=({x:e,y:n,width:r,height:a})=>({x:e,y:n,x2:e+r,y2:n+a}),Ic=({x:e,y:n,x2:r,y2:a})=>({x:e,y:n,width:r-e,height:a-n}),Ia=(e,n=[0,0])=>{const{x:r,y:a}=Nh(e)?e.internals.positionAbsolute:bo(e,n);return{x:r,y:a,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Ac=(e,n=[0,0])=>{const{x:r,y:a}=Nh(e)?e.internals.positionAbsolute:bo(e,n);return{x:r,y:a,x2:r+(e.measured?.width??e.width??e.initialWidth??0),y2:a+(e.measured?.height??e.height??e.initialHeight??0)}},pb=(e,n)=>Ic(Bc(ih(e),ih(n))),io=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),a=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*a)},Wy=e=>vn(e.width)&&vn(e.height)&&vn(e.x)&&vn(e.y),vn=e=>!isNaN(e)&&isFinite(e),eT=(e,n)=>{},xo=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),_o=({x:e,y:n},[r,a,o],c=!1,u=[1,1])=>{const d={x:(e-r)/o,y:(n-a)/o};return c?xo(d,u):d},Nc=({x:e,y:n},[r,a,o])=>({x:e*o+r,y:n*o+a});function ya(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(n*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function tT(e,n,r){if(typeof e=="string"||typeof e=="number"){const a=ya(e,r),o=ya(e,n);return{top:a,right:o,bottom:a,left:o,x:o*2,y:a*2}}if(typeof e=="object"){const a=ya(e.top??e.y??0,r),o=ya(e.bottom??e.y??0,r),c=ya(e.left??e.x??0,n),u=ya(e.right??e.x??0,n);return{top:a,right:u,bottom:o,left:c,x:c+u,y:a+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function nT(e,n,r,a,o,c){const{x:u,y:d}=Nc(e,[n,r,a]),{x:g,y:h}=Nc({x:e.x+e.width,y:e.y+e.height},[n,r,a]),p=o-g,v=c-h;return{left:Math.floor(u),top:Math.floor(d),right:Math.floor(p),bottom:Math.floor(v)}}const Rh=(e,n,r,a,o,c)=>{const u=tT(c,n,r),d=(n-u.x)/e.width,g=(r-u.y)/e.height,h=Math.min(d,g),p=Ba(h,a,o),v=e.x+e.width/2,y=e.y+e.height/2,b=n/2-v*p,E=r/2-y*p,x=nT(e,b,E,p,n,r),C={left:Math.min(x.left-u.left,0),top:Math.min(x.top-u.top,0),right:Math.min(x.right-u.right,0),bottom:Math.min(x.bottom-u.bottom,0)};return{x:b-C.left+C.right,y:E-C.top+C.bottom,zoom:p}},ro=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function qa(e){return e!=null&&e!=="parent"}function ni(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function yb(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function vb(e,n={width:0,height:0},r,a,o){const c={...e},u=a.get(r);if(u){const d=u.origin||o;c.x+=u.internals.positionAbsolute.x-(n.width??0)*d[0],c.y+=u.internals.positionAbsolute.y-(n.height??0)*d[1]}return c}function e0(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function iT(){let e,n;return{promise:new Promise((a,o)=>{e=a,n=o}),resolve:e,reject:n}}function rT(e){return{...cb,...e||{}}}function Ks(e,{snapGrid:n=[0,0],snapToGrid:r=!1,transform:a,containerBounds:o}){const{x:c,y:u}=bn(e),d=_o({x:c-(o?.left??0),y:u-(o?.top??0)},a),{x:g,y:h}=r?xo(d,n):d;return{xSnapped:g,ySnapped:h,...d}}const kh=e=>({width:e.offsetWidth,height:e.offsetHeight}),bb=e=>e?.getRootNode?.()||window?.document,aT=["INPUT","SELECT","TEXTAREA"];function wb(e){const n=e.composedPath?.()?.[0]||e.target;return n?.nodeType!==1?!1:aT.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const xb=e=>"clientX"in e,bn=(e,n)=>{const r=xb(e),a=r?e.clientX:e.touches?.[0].clientX,o=r?e.clientY:e.touches?.[0].clientY;return{x:a-(n?.left??0),y:o-(n?.top??0)}},t0=(e,n,r,a,o)=>{const c=n.querySelectorAll(`.${e}`);return!c||!c.length?null:Array.from(c).map(u=>{const d=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),type:e,nodeId:o,position:u.getAttribute("data-handlepos"),x:(d.left-r.left)/a,y:(d.top-r.top)/a,...kh(u)}})};function _b({sourceX:e,sourceY:n,targetX:r,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d}){const g=e*.125+o*.375+u*.375+r*.125,h=n*.125+c*.375+d*.375+a*.125,p=Math.abs(g-e),v=Math.abs(h-n);return[g,h,p,v]}function ec(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function n0({pos:e,x1:n,y1:r,x2:a,y2:o,c}){switch(e){case he.Left:return[n-ec(n-a,c),r];case he.Right:return[n+ec(a-n,c),r];case he.Top:return[n,r-ec(r-o,c)];case he.Bottom:return[n,r+ec(o-r,c)]}}function Sb({sourceX:e,sourceY:n,sourcePosition:r=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top,curvature:u=.25}){const[d,g]=n0({pos:r,x1:e,y1:n,x2:a,y2:o,c:u}),[h,p]=n0({pos:c,x1:a,y1:o,x2:e,y2:n,c:u}),[v,y,b,E]=_b({sourceX:e,sourceY:n,targetX:a,targetY:o,sourceControlX:d,sourceControlY:g,targetControlX:h,targetControlY:p});return[`M${e},${n} C${d},${g} ${h},${p} ${a},${o}`,v,y,b,E]}function Eb({sourceX:e,sourceY:n,targetX:r,targetY:a}){const o=Math.abs(r-e)/2,c=r<e?r+o:r-o,u=Math.abs(a-n)/2,d=a<n?a+u:a-u;return[c,d,o,u]}function sT({sourceNode:e,targetNode:n,selected:r=!1,zIndex:a,elevateOnSelect:o=!1}){if(a!==void 0)return a;const c=o&&r?1e3:0,u=Math.max(e.parentId||o&&e.selected?e.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return c+u}function oT({sourceNode:e,targetNode:n,width:r,height:a,transform:o}){const c=Bc(Ac(e),Ac(n));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u={x:-o[0]/o[2],y:-o[1]/o[2],width:r/o[2],height:a/o[2]};return io(u,Ic(c))>0}const lT=({source:e,sourceHandle:n,target:r,targetHandle:a})=>`xy-edge__${e}${n||""}-${r}${a||""}`,cT=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Tb=(e,n)=>{if(!e.source||!e.target)return n;let r;return fb(e)?r={...e}:r={...e,id:lT(e)},cT(r,n)?n:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,n.concat(r))};function Cb({sourceX:e,sourceY:n,targetX:r,targetY:a}){const[o,c,u,d]=Eb({sourceX:e,sourceY:n,targetX:r,targetY:a});return[`M ${e},${n}L ${r},${a}`,o,c,u,d]}const i0={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},uT=({source:e,sourcePosition:n=he.Bottom,target:r})=>n===he.Left||n===he.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},r0=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function dT({source:e,sourcePosition:n=he.Bottom,target:r,targetPosition:a=he.Top,center:o,offset:c,stepPosition:u}){const d=i0[n],g=i0[a],h={x:e.x+d.x*c,y:e.y+d.y*c},p={x:r.x+g.x*c,y:r.y+g.y*c},v=uT({source:h,sourcePosition:n,target:p}),y=v.x!==0?"x":"y",b=v[y];let E=[],x,C;const T={x:0,y:0},k={x:0,y:0},[,,_,N]=Eb({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(d[y]*g[y]===-1){y==="x"?(x=o.x??h.x+(p.x-h.x)*u,C=o.y??(h.y+p.y)/2):(x=o.x??(h.x+p.x)/2,C=o.y??h.y+(p.y-h.y)*u);const j=[{x,y:h.y},{x,y:p.y}],U=[{x:h.x,y:C},{x:p.x,y:C}];d[y]===b?E=y==="x"?j:U:E=y==="x"?U:j}else{const j=[{x:h.x,y:p.y}],U=[{x:p.x,y:h.y}];if(y==="x"?E=d.x===b?U:j:E=d.y===b?j:U,n===a){const Z=Math.abs(e[y]-r[y]);if(Z<=c){const q=Math.min(c-1,c-Z);d[y]===b?T[y]=(h[y]>e[y]?-1:1)*q:k[y]=(p[y]>r[y]?-1:1)*q}}if(n!==a){const Z=y==="x"?"y":"x",q=d[y]===g[Z],z=h[Z]>p[Z],G=h[Z]<p[Z];(d[y]===1&&(!q&&z||q&&G)||d[y]!==1&&(!q&&G||q&&z))&&(E=y==="x"?j:U)}const P={x:h.x+T.x,y:h.y+T.y},J={x:p.x+k.x,y:p.y+k.y},oe=Math.max(Math.abs(P.x-E[0].x),Math.abs(J.x-E[0].x)),te=Math.max(Math.abs(P.y-E[0].y),Math.abs(J.y-E[0].y));oe>=te?(x=(P.x+J.x)/2,C=E[0].y):(x=E[0].x,C=(P.y+J.y)/2)}return[[e,{x:h.x+T.x,y:h.y+T.y},...E,{x:p.x+k.x,y:p.y+k.y},r],x,C,_,N]}function fT(e,n,r,a){const o=Math.min(r0(e,n)/2,r0(n,r)/2,a),{x:c,y:u}=n;if(e.x===c&&c===r.x||e.y===u&&u===r.y)return`L${c} ${u}`;if(e.y===u){const h=e.x<r.x?-1:1,p=e.y<r.y?1:-1;return`L ${c+o*h},${u}Q ${c},${u} ${c},${u+o*p}`}const d=e.x<r.x?1:-1,g=e.y<r.y?-1:1;return`L ${c},${u+o*g}Q ${c},${u} ${c+o*d},${u}`}function rh({sourceX:e,sourceY:n,sourcePosition:r=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top,borderRadius:u=5,centerX:d,centerY:g,offset:h=20,stepPosition:p=.5}){const[v,y,b,E,x]=dT({source:{x:e,y:n},sourcePosition:r,target:{x:a,y:o},targetPosition:c,center:{x:d,y:g},offset:h,stepPosition:p});return[v.reduce((T,k,_)=>{let N="";return _>0&&_<v.length-1?N=fT(v[_-1],k,v[_+1],u):N=`${_===0?"M":"L"}${k.x} ${k.y}`,T+=N,T},""),y,b,E,x]}function a0(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function hT(e){const{sourceNode:n,targetNode:r}=e;if(!a0(n)||!a0(r))return null;const a=n.internals.handleBounds||s0(n.handles),o=r.internals.handleBounds||s0(r.handles),c=o0(a?.source??[],e.sourceHandle),u=o0(e.connectionMode===Ha.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!c||!u)return e.onError?.("008",On.error008(c?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const d=c?.position||he.Bottom,g=u?.position||he.Top,h=ao(n,c,d),p=ao(r,u,g);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:d,targetPosition:g}}function s0(e){if(!e)return null;const n=[],r=[];for(const a of e)a.width=a.width??1,a.height=a.height??1,a.type==="source"?n.push(a):a.type==="target"&&r.push(a);return{source:n,target:r}}function ao(e,n,r=he.Left,a=!1){const o=(n?.x??0)+e.internals.positionAbsolute.x,c=(n?.y??0)+e.internals.positionAbsolute.y,{width:u,height:d}=n??ni(e);if(a)return{x:o+u/2,y:c+d/2};switch(n?.position??r){case he.Top:return{x:o+u/2,y:c};case he.Right:return{x:o+u,y:c+d/2};case he.Bottom:return{x:o+u/2,y:c+d};case he.Left:return{x:o,y:c+d/2}}}function o0(e,n){return e&&(n?e.find(r=>r.id===n):e[0])||null}function ah(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(a=>`${a}=${e[a]}`).join("&")}`:""}function gT(e,{id:n,defaultColor:r,defaultMarkerStart:a,defaultMarkerEnd:o}){const c=new Set;return e.reduce((u,d)=>([d.markerStart||a,d.markerEnd||o].forEach(g=>{if(g&&typeof g=="object"){const h=ah(g,n);c.has(h)||(u.push({id:h,color:g.color||r,...g}),c.add(h))}}),u),[]).sort((u,d)=>u.id.localeCompare(d.id))}const Ab=1e3,mT=10,Mh={nodeOrigin:[0,0],nodeExtent:to,elevateNodesOnSelect:!0,defaults:{}},pT={...Mh,checkEquality:!0};function jh(e,n){const r={...e};for(const a in n)n[a]!==void 0&&(r[a]=n[a]);return r}function yT(e,n,r){const a=jh(Mh,r);for(const o of e.values())if(o.parentId)Dh(o,e,n,a);else{const c=bo(o,a.nodeOrigin),u=qa(o.extent)?o.extent:a.nodeExtent,d=Tr(c,u,ni(o));o.internals.positionAbsolute=d}}function vT(e,n){if(!e.handles)return e.measured?n?.internals.handleBounds:void 0;const r=[],a=[];for(const o of e.handles){const c={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?r.push(c):o.type==="target"&&a.push(c)}return{source:r,target:a}}function sh(e,n,r,a){const o=jh(pT,a);let c={i:-1},u=e.length>0;const d=new Map(n),g=o?.elevateNodesOnSelect?Ab:0;n.clear(),r.clear();for(const h of e){let p=d.get(h.id);if(o.checkEquality&&h===p?.internals.userNode)n.set(h.id,p);else{const v=bo(h,o.nodeOrigin),y=qa(h.extent)?h.extent:o.nodeExtent,b=Tr(v,y,ni(h));p={...o.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:b,handleBounds:vT(h,p),z:Nb(h,g),userNode:h}},n.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(u=!1),h.parentId&&Dh(p,n,r,a,c)}return u}function bT(e,n){if(!e.parentId)return;const r=n.get(e.parentId);r?r.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function Dh(e,n,r,a,o){const{elevateNodesOnSelect:c,nodeOrigin:u,nodeExtent:d}=jh(Mh,a),g=e.parentId,h=n.get(g);if(!h){console.warn(`Parent node ${g} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}bT(e,r),o&&!h.parentId&&h.internals.rootParentIndex===void 0&&(h.internals.rootParentIndex=++o.i,h.internals.z=h.internals.z+o.i*mT),o&&h.internals.rootParentIndex!==void 0&&(o.i=h.internals.rootParentIndex);const p=c?Ab:0,{x:v,y,z:b}=wT(e,h,u,d,p),{positionAbsolute:E}=e.internals,x=v!==E.x||y!==E.y;(x||b!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:v,y}:E,z:b}})}function Nb(e,n){return(vn(e.zIndex)?e.zIndex:0)+(e.selected?n:0)}function wT(e,n,r,a,o){const{x:c,y:u}=n.internals.positionAbsolute,d=ni(e),g=bo(e,r),h=qa(e.extent)?Tr(g,e.extent,d):g;let p=Tr({x:c+h.x,y:u+h.y},a,d);e.extent==="parent"&&(p=gb(p,d,n));const v=Nb(e,o),y=n.internals.z??0;return{x:p.x,y:p.y,z:y>=v?y+1:v}}function zh(e,n,r,a=[0,0]){const o=[],c=new Map;for(const u of e){const d=n.get(u.parentId);if(!d)continue;const g=c.get(u.parentId)?.expandedRect??Ia(d),h=pb(g,u.rect);c.set(u.parentId,{expandedRect:h,parent:d})}return c.size>0&&c.forEach(({expandedRect:u,parent:d},g)=>{const h=d.internals.positionAbsolute,p=ni(d),v=d.origin??a,y=u.x<h.x?Math.round(Math.abs(h.x-u.x)):0,b=u.y<h.y?Math.round(Math.abs(h.y-u.y)):0,E=Math.max(p.width,Math.round(u.width)),x=Math.max(p.height,Math.round(u.height)),C=(E-p.width)*v[0],T=(x-p.height)*v[1];(y>0||b>0||C||T)&&(o.push({id:g,type:"position",position:{x:d.position.x-y+C,y:d.position.y-b+T}}),r.get(g)?.forEach(k=>{e.some(_=>_.id===k.id)||o.push({id:k.id,type:"position",position:{x:k.position.x+y,y:k.position.y+b}})})),(p.width<u.width||p.height<u.height||y||b)&&o.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:E+(y?v[0]*y-C:0),height:x+(b?v[1]*b-T:0)}})}),o}function xT(e,n,r,a,o,c){const u=a?.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const g=[],h=window.getComputedStyle(u),{m22:p}=new window.DOMMatrixReadOnly(h.transform),v=[];for(const y of e.values()){const b=n.get(y.id);if(!b)continue;if(b.hidden){n.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const E=kh(y.nodeElement),x=b.measured.width!==E.width||b.measured.height!==E.height;if(!!(E.width&&E.height&&(x||!b.internals.handleBounds||y.force))){const T=y.nodeElement.getBoundingClientRect(),k=qa(b.extent)?b.extent:c;let{positionAbsolute:_}=b.internals;b.parentId&&b.extent==="parent"?_=gb(_,E,n.get(b.parentId)):k&&(_=Tr(_,k,E));const N={...b,measured:E,internals:{...b.internals,positionAbsolute:_,handleBounds:{source:t0("source",y.nodeElement,T,p,b.id),target:t0("target",y.nodeElement,T,p,b.id)}}};n.set(b.id,N),b.parentId&&Dh(N,n,r,{nodeOrigin:o}),d=!0,x&&(g.push({id:b.id,type:"dimensions",dimensions:E}),b.expandParent&&b.parentId&&v.push({id:b.id,parentId:b.parentId,rect:Ia(N,o)}))}}if(v.length>0){const y=zh(v,n,r,o);g.push(...y)}return{changes:g,updatedInternals:d}}async function _T({delta:e,panZoom:n,transform:r,translateExtent:a,width:o,height:c}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const u=await n.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[o,c]],a),d=!!u&&(u.x!==r[0]||u.y!==r[1]||u.k!==r[2]);return Promise.resolve(d)}function l0(e,n,r,a,o,c){let u=o;const d=a.get(u)||new Map;a.set(u,d.set(r,n)),u=`${o}-${e}`;const g=a.get(u)||new Map;if(a.set(u,g.set(r,n)),c){u=`${o}-${e}-${c}`;const h=a.get(u)||new Map;a.set(u,h.set(r,n))}}function Ob(e,n,r){e.clear(),n.clear();for(const a of r){const{source:o,target:c,sourceHandle:u=null,targetHandle:d=null}=a,g={edgeId:a.id,source:o,target:c,sourceHandle:u,targetHandle:d},h=`${o}-${u}--${c}-${d}`,p=`${c}-${d}--${o}-${u}`;l0("source",g,p,e,o,u),l0("target",g,h,e,c,d),n.set(a.id,a)}}function Rb(e,n){if(!e.parentId)return!1;const r=n.get(e.parentId);return r?r.selected?!0:Rb(r,n):!1}function c0(e,n,r){let a=e;do{if(a?.matches?.(n))return!0;if(a===r)return!1;a=a?.parentElement}while(a);return!1}function ST(e,n,r,a){const o=new Map;for(const[c,u]of e)if((u.selected||u.id===a)&&(!u.parentId||!Rb(u,e))&&(u.draggable||n&&typeof u.draggable>"u")){const d=e.get(c);d&&o.set(c,{id:c,position:d.position||{x:0,y:0},distance:{x:r.x-d.internals.positionAbsolute.x,y:r.y-d.internals.positionAbsolute.y},extent:d.extent,parentId:d.parentId,origin:d.origin,expandParent:d.expandParent,internals:{positionAbsolute:d.internals.positionAbsolute||{x:0,y:0}},measured:{width:d.measured.width??0,height:d.measured.height??0}})}return o}function Of({nodeId:e,dragItems:n,nodeLookup:r,dragging:a=!0}){const o=[];for(const[u,d]of n){const g=r.get(u)?.internals.userNode;g&&o.push({...g,position:d.position,dragging:a})}if(!e)return[o[0],o];const c=r.get(e)?.internals.userNode;return[c?{...c,position:n.get(e)?.position||c.position,dragging:a}:o[0],o]}function ET({dragItems:e,snapGrid:n,x:r,y:a}){const o=e.values().next().value;if(!o)return null;const c={x:r-o.distance.x,y:a-o.distance.y},u=xo(c,n);return{x:u.x-c.x,y:u.y-c.y}}function TT({onNodeMouseDown:e,getStoreItems:n,onDragStart:r,onDrag:a,onDragStop:o}){let c={x:null,y:null},u=0,d=new Map,g=!1,h={x:0,y:0},p=null,v=!1,y=null,b=!1,E=!1,x=null;function C({noDragClassName:k,handleSelector:_,domNode:N,isSelectable:$,nodeId:j,nodeClickDistance:U=0}){y=Zt(N);function P({x:Z,y:q}){const{nodeLookup:z,nodeExtent:G,snapGrid:R,snapToGrid:H,nodeOrigin:B,onNodeDrag:X,onSelectionDrag:D,onError:O,updateNodePositions:M}=n();c={x:Z,y:q};let K=!1;const Q=d.size>1,se=Q&&G?ih(wo(d)):null,ue=Q&&H?ET({dragItems:d,snapGrid:R,x:Z,y:q}):null;for(const[ce,le]of d){if(!z.has(ce))continue;let de={x:Z-le.distance.x,y:q-le.distance.y};H&&(de=ue?{x:Math.round(de.x+ue.x),y:Math.round(de.y+ue.y)}:xo(de,R));let Ee=null;if(Q&&G&&!le.extent&&se){const{positionAbsolute:xe}=le.internals,Ce=xe.x-se.x+G[0][0],Ie=xe.x+le.measured.width-se.x2+G[1][0],Ge=xe.y-se.y+G[0][1],mt=xe.y+le.measured.height-se.y2+G[1][1];Ee=[[Ce,Ge],[Ie,mt]]}const{position:_e,positionAbsolute:pe}=hb({nodeId:ce,nextPosition:de,nodeLookup:z,nodeExtent:Ee||G,nodeOrigin:B,onError:O});K=K||le.position.x!==_e.x||le.position.y!==_e.y,le.position=_e,le.internals.positionAbsolute=pe}if(E=E||K,!!K&&(M(d,!0),x&&(a||X||!j&&D))){const[ce,le]=Of({nodeId:j,dragItems:d,nodeLookup:z});a?.(x,d,ce,le),X?.(x,ce,le),j||D?.(x,le)}}async function J(){if(!p)return;const{transform:Z,panBy:q,autoPanSpeed:z,autoPanOnNodeDrag:G}=n();if(!G){g=!1,cancelAnimationFrame(u);return}const[R,H]=mb(h,p,z);(R!==0||H!==0)&&(c.x=(c.x??0)-R/Z[2],c.y=(c.y??0)-H/Z[2],await q({x:R,y:H})&&P(c)),u=requestAnimationFrame(J)}function oe(Z){const{nodeLookup:q,multiSelectionActive:z,nodesDraggable:G,transform:R,snapGrid:H,snapToGrid:B,selectNodesOnDrag:X,onNodeDragStart:D,onSelectionDragStart:O,unselectNodesAndEdges:M}=n();v=!0,(!X||!$)&&!z&&j&&(q.get(j)?.selected||M()),$&&X&&j&&e?.(j);const K=Ks(Z.sourceEvent,{transform:R,snapGrid:H,snapToGrid:B,containerBounds:p});if(c=K,d=ST(q,G,K,j),d.size>0&&(r||D||!j&&O)){const[Q,se]=Of({nodeId:j,dragItems:d,nodeLookup:q});r?.(Z.sourceEvent,d,Q,se),D?.(Z.sourceEvent,Q,se),j||O?.(Z.sourceEvent,se)}}const te=Yv().clickDistance(U).on("start",Z=>{const{domNode:q,nodeDragThreshold:z,transform:G,snapGrid:R,snapToGrid:H}=n();p=q?.getBoundingClientRect()||null,b=!1,E=!1,x=Z.sourceEvent,z===0&&oe(Z),c=Ks(Z.sourceEvent,{transform:G,snapGrid:R,snapToGrid:H,containerBounds:p}),h=bn(Z.sourceEvent,p)}).on("drag",Z=>{const{autoPanOnNodeDrag:q,transform:z,snapGrid:G,snapToGrid:R,nodeDragThreshold:H,nodeLookup:B}=n(),X=Ks(Z.sourceEvent,{transform:z,snapGrid:G,snapToGrid:R,containerBounds:p});if(x=Z.sourceEvent,(Z.sourceEvent.type==="touchmove"&&Z.sourceEvent.touches.length>1||j&&!B.has(j))&&(b=!0),!b){if(!g&&q&&v&&(g=!0,J()),!v){const D=bn(Z.sourceEvent,p),O=D.x-h.x,M=D.y-h.y;Math.sqrt(O*O+M*M)>H&&oe(Z)}(c.x!==X.xSnapped||c.y!==X.ySnapped)&&d&&v&&(h=bn(Z.sourceEvent,p),P(X))}}).on("end",Z=>{if(!(!v||b)&&(g=!1,v=!1,cancelAnimationFrame(u),d.size>0)){const{nodeLookup:q,updateNodePositions:z,onNodeDragStop:G,onSelectionDragStop:R}=n();if(E&&(z(d,!1),E=!1),o||G||!j&&R){const[H,B]=Of({nodeId:j,dragItems:d,nodeLookup:q,dragging:!1});o?.(Z.sourceEvent,d,H,B),G?.(Z.sourceEvent,H,B),j||R?.(Z.sourceEvent,B)}}}).filter(Z=>{const q=Z.target;return!Z.button&&(!k||!c0(q,`.${k}`,N))&&(!_||c0(q,_,N))});y.call(te)}function T(){y?.on(".drag",null)}return{update:C,destroy:T}}function CT(e,n,r){const a=[],o={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const c of n.values())io(o,Ia(c))>0&&a.push(c);return a}const AT=250;function NT(e,n,r,a){let o=[],c=1/0;const u=CT(e,r,n+AT);for(const d of u){const g=[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]];for(const h of g){if(a.nodeId===h.nodeId&&a.type===h.type&&a.id===h.id)continue;const{x:p,y:v}=ao(d,h,h.position,!0),y=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(v-e.y,2));y>n||(y<c?(o=[{...h,x:p,y:v}],c=y):y===c&&o.push({...h,x:p,y:v}))}}if(!o.length)return null;if(o.length>1){const d=a.type==="source"?"target":"source";return o.find(g=>g.type===d)??o[0]}return o[0]}function kb(e,n,r,a,o,c=!1){const u=a.get(e);if(!u)return null;const d=o==="strict"?u.internals.handleBounds?.[n]:[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]],g=(r?d?.find(h=>h.id===r):d?.[0])??null;return g&&c?{...g,...ao(u,g,g.position,!0)}:g}function Mb(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function OT(e,n){let r=null;return n?r=!0:e&&!n&&(r=!1),r}const jb=()=>!0;function RT(e,{connectionMode:n,connectionRadius:r,handleId:a,nodeId:o,edgeUpdaterType:c,isTarget:u,domNode:d,nodeLookup:g,lib:h,autoPanOnConnect:p,flowId:v,panBy:y,cancelConnection:b,onConnectStart:E,onConnect:x,onConnectEnd:C,isValidConnection:T=jb,onReconnectEnd:k,updateConnection:_,getTransform:N,getFromHandle:$,autoPanSpeed:j,dragThreshold:U=1,handleDomNode:P}){const J=bb(e.target);let oe=0,te;const{x:Z,y:q}=bn(e),z=Mb(c,P),G=d?.getBoundingClientRect();let R=!1;if(!G||!z)return;const H=kb(o,z,a,g,n);if(!H)return;let B=bn(e,G),X=!1,D=null,O=!1,M=null;function K(){if(!p||!G)return;const[_e,pe]=mb(B,G,j);y({x:_e,y:pe}),oe=requestAnimationFrame(K)}const Q={...H,nodeId:o,type:z,position:H.position},se=g.get(o);let ce={inProgress:!0,isValid:null,from:ao(se,Q,he.Left,!0),fromHandle:Q,fromPosition:Q.position,fromNode:se,to:B,toHandle:null,toPosition:Jy[Q.position],toNode:null};function le(){R=!0,_(ce),E?.(e,{nodeId:o,handleId:a,handleType:z})}U===0&&le();function de(_e){if(!R){const{x:Ie,y:Ge}=bn(_e),mt=Ie-Z,Ft=Ge-q;if(!(mt*mt+Ft*Ft>U*U))return;le()}if(!$()||!Q){Ee(_e);return}const pe=N();B=bn(_e,G),te=NT(_o(B,pe,!1,[1,1]),r,g,Q),X||(K(),X=!0);const xe=Db(_e,{handle:te,connectionMode:n,fromNodeId:o,fromHandleId:a,fromType:u?"target":"source",isValidConnection:T,doc:J,lib:h,flowId:v,nodeLookup:g});M=xe.handleDomNode,D=xe.connection,O=OT(!!te,xe.isValid);const Ce={...ce,isValid:O,to:xe.toHandle&&O?Nc({x:xe.toHandle.x,y:xe.toHandle.y},pe):B,toHandle:xe.toHandle,toPosition:O&&xe.toHandle?xe.toHandle.position:Jy[Q.position],toNode:xe.toHandle?g.get(xe.toHandle.nodeId):null};O&&te&&ce.toHandle&&Ce.toHandle&&ce.toHandle.type===Ce.toHandle.type&&ce.toHandle.nodeId===Ce.toHandle.nodeId&&ce.toHandle.id===Ce.toHandle.id&&ce.to.x===Ce.to.x&&ce.to.y===Ce.to.y||(_(Ce),ce=Ce)}function Ee(_e){if(!("touches"in _e&&_e.touches.length>0)){if(R){(te||M)&&D&&O&&x?.(D);const{inProgress:pe,...xe}=ce,Ce={...xe,toPosition:ce.toHandle?ce.toPosition:null};C?.(_e,Ce),c&&k?.(_e,Ce)}b(),cancelAnimationFrame(oe),X=!1,O=!1,D=null,M=null,J.removeEventListener("mousemove",de),J.removeEventListener("mouseup",Ee),J.removeEventListener("touchmove",de),J.removeEventListener("touchend",Ee)}}J.addEventListener("mousemove",de),J.addEventListener("mouseup",Ee),J.addEventListener("touchmove",de),J.addEventListener("touchend",Ee)}function Db(e,{handle:n,connectionMode:r,fromNodeId:a,fromHandleId:o,fromType:c,doc:u,lib:d,flowId:g,isValidConnection:h=jb,nodeLookup:p}){const v=c==="target",y=n?u.querySelector(`.${d}-flow__handle[data-id="${g}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:b,y:E}=bn(e),x=u.elementFromPoint(b,E),C=x?.classList.contains(`${d}-flow__handle`)?x:y,T={handleDomNode:C,isValid:!1,connection:null,toHandle:null};if(C){const k=Mb(void 0,C),_=C.getAttribute("data-nodeid"),N=C.getAttribute("data-handleid"),$=C.classList.contains("connectable"),j=C.classList.contains("connectableend");if(!_||!k)return T;const U={source:v?_:a,sourceHandle:v?N:o,target:v?a:_,targetHandle:v?o:N};T.connection=U;const J=$&&j&&(r===Ha.Strict?v&&k==="source"||!v&&k==="target":_!==a||N!==o);T.isValid=J&&h(U),T.toHandle=kb(_,k,N,p,r,!0)}return T}const oh={onPointerDown:RT,isValid:Db};function kT({domNode:e,panZoom:n,getTransform:r,getViewScale:a}){const o=Zt(e);function c({translateExtent:d,width:g,height:h,zoomStep:p=1,pannable:v=!0,zoomable:y=!0,inversePan:b=!1}){const E=_=>{if(_.sourceEvent.type!=="wheel"||!n)return;const N=r(),$=_.sourceEvent.ctrlKey&&ro()?10:1,j=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*p,U=N[2]*Math.pow(2,j*$);n.scaleTo(U)};let x=[0,0];const C=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(x=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},T=_=>{const N=r();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!n)return;const $=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],j=[$[0]-x[0],$[1]-x[1]];x=$;const U=a()*Math.max(N[2],Math.log(N[2]))*(b?-1:1),P={x:N[0]-j[0]*U,y:N[1]-j[1]*U},J=[[0,0],[g,h]];n.setViewportConstrained({x:P.x,y:P.y,zoom:N[2]},J,d)},k=ob().on("start",C).on("zoom",v?T:null).on("zoom.wheel",y?E:null);o.call(k,{})}function u(){o.on("zoom",null)}return{update:c,destroy:u,pointer:mn}}const qc=e=>({x:e.x,y:e.y,zoom:e.k}),Rf=({x:e,y:n,zoom:r})=>Hc.translate(e,n).scale(r),ka=(e,n)=>e.target.closest(`.${n}`),zb=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),MT=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,kf=(e,n=0,r=MT,a=()=>{})=>{const o=typeof n=="number"&&n>0;return o||a(),o?e.transition().duration(n).ease(r).on("end",a):e},Ub=e=>{const n=e.ctrlKey&&ro()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function jT({zoomPanValues:e,noWheelClassName:n,d3Selection:r,d3Zoom:a,panOnScrollMode:o,panOnScrollSpeed:c,zoomOnPinch:u,onPanZoomStart:d,onPanZoom:g,onPanZoomEnd:h}){return p=>{if(ka(p,n))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const v=r.property("__zoom").k||1;if(p.ctrlKey&&u){const C=mn(p),T=Ub(p),k=v*Math.pow(2,T);a.scaleTo(r,k,C,p);return}const y=p.deltaMode===1?20:1;let b=o===xr.Vertical?0:p.deltaX*y,E=o===xr.Horizontal?0:p.deltaY*y;!ro()&&p.shiftKey&&o!==xr.Vertical&&(b=p.deltaY*y,E=0),a.translateBy(r,-(b/v)*c,-(E/v)*c,{internal:!0});const x=qc(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(g?.(p,x),e.panScrollTimeout=setTimeout(()=>{h?.(p,x),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,d?.(p,x))}}function DT({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:r}){return function(a,o){const c=a.type==="wheel",u=!n&&c&&!a.ctrlKey,d=ka(a,e);if(a.ctrlKey&&c&&d&&a.preventDefault(),u||d)return null;a.preventDefault(),r.call(this,a,o)}}function zT({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:r}){return a=>{if(a.sourceEvent?.internal)return;const o=qc(a.transform);e.mouseButton=a.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,a.sourceEvent?.type==="mousedown"&&n(!0),r&&r?.(a.sourceEvent,o)}}function UT({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:r,onTransformChange:a,onPanZoom:o}){return c=>{e.usedRightMouseButton=!!(r&&zb(n,e.mouseButton??0)),c.sourceEvent?.sync||a([c.transform.x,c.transform.y,c.transform.k]),o&&!c.sourceEvent?.internal&&o?.(c.sourceEvent,qc(c.transform))}}function $T({zoomPanValues:e,panOnDrag:n,panOnScroll:r,onDraggingChange:a,onPanZoomEnd:o,onPaneContextMenu:c}){return u=>{if(!u.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,c&&zb(n,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&c(u.sourceEvent),e.usedRightMouseButton=!1,a(!1),o)){const d=qc(u.transform);e.prevViewport=d,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(u.sourceEvent,d)},r?150:0)}}}function LT({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:a,panOnScroll:o,zoomOnDoubleClick:c,userSelectionActive:u,noWheelClassName:d,noPanClassName:g,lib:h,connectionInProgress:p}){return v=>{const y=e||n,b=r&&v.ctrlKey,E=v.type==="wheel";if(v.button===1&&v.type==="mousedown"&&(ka(v,`${h}-flow__node`)||ka(v,`${h}-flow__edge`)))return!0;if(!a&&!y&&!o&&!c&&!r||u||p&&!E||ka(v,d)&&E||ka(v,g)&&(!E||o&&E&&!e)||!r&&v.ctrlKey&&E)return!1;if(!r&&v.type==="touchstart"&&v.touches?.length>1)return v.preventDefault(),!1;if(!y&&!o&&!b&&E||!a&&(v.type==="mousedown"||v.type==="touchstart")||Array.isArray(a)&&!a.includes(v.button)&&v.type==="mousedown")return!1;const x=Array.isArray(a)&&a.includes(v.button)||!v.button||v.button<=1;return(!v.ctrlKey||E)&&x}}function HT({domNode:e,minZoom:n,maxZoom:r,translateExtent:a,viewport:o,onPanZoom:c,onPanZoomStart:u,onPanZoomEnd:d,onDraggingChange:g}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),v=ob().scaleExtent([n,r]).translateExtent(a),y=Zt(e).call(v);k({x:o.x,y:o.y,zoom:Ba(o.zoom,n,r)},[[0,0],[p.width,p.height]],a);const b=y.on("wheel.zoom"),E=y.on("dblclick.zoom");v.wheelDelta(Ub);function x(te,Z){return y?new Promise(q=>{v?.interpolate(Z?.interpolate==="linear"?Xs:gc).transform(kf(y,Z?.duration,Z?.ease,()=>q(!0)),te)}):Promise.resolve(!1)}function C({noWheelClassName:te,noPanClassName:Z,onPaneContextMenu:q,userSelectionActive:z,panOnScroll:G,panOnDrag:R,panOnScrollMode:H,panOnScrollSpeed:B,preventScrolling:X,zoomOnPinch:D,zoomOnScroll:O,zoomOnDoubleClick:M,zoomActivationKeyPressed:K,lib:Q,onTransformChange:se,connectionInProgress:ue,paneClickDistance:ce,selectionOnDrag:le}){z&&!h.isZoomingOrPanning&&T();const de=G&&!K&&!z;v.clickDistance(le?1/0:!vn(ce)||ce<0?0:ce);const Ee=de?jT({zoomPanValues:h,noWheelClassName:te,d3Selection:y,d3Zoom:v,panOnScrollMode:H,panOnScrollSpeed:B,zoomOnPinch:D,onPanZoomStart:u,onPanZoom:c,onPanZoomEnd:d}):DT({noWheelClassName:te,preventScrolling:X,d3ZoomHandler:b});if(y.on("wheel.zoom",Ee,{passive:!1}),!z){const pe=zT({zoomPanValues:h,onDraggingChange:g,onPanZoomStart:u});v.on("start",pe);const xe=UT({zoomPanValues:h,panOnDrag:R,onPaneContextMenu:!!q,onPanZoom:c,onTransformChange:se});v.on("zoom",xe);const Ce=$T({zoomPanValues:h,panOnDrag:R,panOnScroll:G,onPaneContextMenu:q,onPanZoomEnd:d,onDraggingChange:g});v.on("end",Ce)}const _e=LT({zoomActivationKeyPressed:K,panOnDrag:R,zoomOnScroll:O,panOnScroll:G,zoomOnDoubleClick:M,zoomOnPinch:D,userSelectionActive:z,noPanClassName:Z,noWheelClassName:te,lib:Q,connectionInProgress:ue});v.filter(_e),M?y.on("dblclick.zoom",E):y.on("dblclick.zoom",null)}function T(){v.on("zoom",null)}async function k(te,Z,q){const z=Rf(te),G=v?.constrain()(z,Z,q);return G&&await x(G),new Promise(R=>R(G))}async function _(te,Z){const q=Rf(te);return await x(q,Z),new Promise(z=>z(q))}function N(te){if(y){const Z=Rf(te),q=y.property("__zoom");(q.k!==te.zoom||q.x!==te.x||q.y!==te.y)&&v?.transform(y,Z,null,{sync:!0})}}function $(){const te=y?sb(y.node()):{x:0,y:0,k:1};return{x:te.x,y:te.y,zoom:te.k}}function j(te,Z){return y?new Promise(q=>{v?.interpolate(Z?.interpolate==="linear"?Xs:gc).scaleTo(kf(y,Z?.duration,Z?.ease,()=>q(!0)),te)}):Promise.resolve(!1)}function U(te,Z){return y?new Promise(q=>{v?.interpolate(Z?.interpolate==="linear"?Xs:gc).scaleBy(kf(y,Z?.duration,Z?.ease,()=>q(!0)),te)}):Promise.resolve(!1)}function P(te){v?.scaleExtent(te)}function J(te){v?.translateExtent(te)}function oe(te){const Z=!vn(te)||te<0?0:te;v?.clickDistance(Z)}return{update:C,destroy:T,setViewport:_,setViewportConstrained:k,getViewport:$,scaleTo:j,scaleBy:U,setScaleExtent:P,setTranslateExtent:J,syncViewport:N,setClickDistance:oe}}var Va;(function(e){e.Line="line",e.Handle="handle"})(Va||(Va={}));function BT({width:e,prevWidth:n,height:r,prevHeight:a,affectsX:o,affectsY:c}){const u=e-n,d=r-a,g=[u>0?1:u<0?-1:0,d>0?1:d<0?-1:0];return u&&o&&(g[0]=g[0]*-1),d&&c&&(g[1]=g[1]*-1),g}function u0(e){const n=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),a=e.includes("left"),o=e.includes("top");return{isHorizontal:n,isVertical:r,affectsX:a,affectsY:o}}function zi(e,n){return Math.max(0,n-e)}function Ui(e,n){return Math.max(0,e-n)}function tc(e,n,r){return Math.max(0,n-e,e-r)}function d0(e,n){return e?!n:n}function IT(e,n,r,a,o,c,u,d){let{affectsX:g,affectsY:h}=n;const{isHorizontal:p,isVertical:v}=n,y=p&&v,{xSnapped:b,ySnapped:E}=r,{minWidth:x,maxWidth:C,minHeight:T,maxHeight:k}=a,{x:_,y:N,width:$,height:j,aspectRatio:U}=e;let P=Math.floor(p?b-e.pointerX:0),J=Math.floor(v?E-e.pointerY:0);const oe=$+(g?-P:P),te=j+(h?-J:J),Z=-c[0]*$,q=-c[1]*j;let z=tc(oe,x,C),G=tc(te,T,k);if(u){let B=0,X=0;g&&P<0?B=zi(_+P+Z,u[0][0]):!g&&P>0&&(B=Ui(_+oe+Z,u[1][0])),h&&J<0?X=zi(N+J+q,u[0][1]):!h&&J>0&&(X=Ui(N+te+q,u[1][1])),z=Math.max(z,B),G=Math.max(G,X)}if(d){let B=0,X=0;g&&P>0?B=Ui(_+P,d[0][0]):!g&&P<0&&(B=zi(_+oe,d[1][0])),h&&J>0?X=Ui(N+J,d[0][1]):!h&&J<0&&(X=zi(N+te,d[1][1])),z=Math.max(z,B),G=Math.max(G,X)}if(o){if(p){const B=tc(oe/U,T,k)*U;if(z=Math.max(z,B),u){let X=0;!g&&!h||g&&!h&&y?X=Ui(N+q+oe/U,u[1][1])*U:X=zi(N+q+(g?P:-P)/U,u[0][1])*U,z=Math.max(z,X)}if(d){let X=0;!g&&!h||g&&!h&&y?X=zi(N+oe/U,d[1][1])*U:X=Ui(N+(g?P:-P)/U,d[0][1])*U,z=Math.max(z,X)}}if(v){const B=tc(te*U,x,C)/U;if(G=Math.max(G,B),u){let X=0;!g&&!h||h&&!g&&y?X=Ui(_+te*U+Z,u[1][0])/U:X=zi(_+(h?J:-J)*U+Z,u[0][0])/U,G=Math.max(G,X)}if(d){let X=0;!g&&!h||h&&!g&&y?X=zi(_+te*U,d[1][0])/U:X=Ui(_+(h?J:-J)*U,d[0][0])/U,G=Math.max(G,X)}}}J=J+(J<0?G:-G),P=P+(P<0?z:-z),o&&(y?oe>te*U?J=(d0(g,h)?-P:P)/U:P=(d0(g,h)?-J:J)*U:p?(J=P/U,h=g):(P=J*U,g=h));const R=g?_+P:_,H=h?N+J:N;return{width:$+(g?-P:P),height:j+(h?-J:J),x:c[0]*P*(g?-1:1)+R,y:c[1]*J*(h?-1:1)+H}}const $b={width:0,height:0,x:0,y:0},qT={...$b,pointerX:0,pointerY:0,aspectRatio:1};function VT(e){return[[0,0],[e.measured.width,e.measured.height]]}function PT(e,n,r){const a=n.position.x+e.position.x,o=n.position.y+e.position.y,c=e.measured.width??0,u=e.measured.height??0,d=r[0]*c,g=r[1]*u;return[[a-d,o-g],[a+c-d,o+u-g]]}function GT({domNode:e,nodeId:n,getStoreItems:r,onChange:a,onEnd:o}){const c=Zt(e);let u={controlDirection:u0("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function d({controlPosition:h,boundaries:p,keepAspectRatio:v,resizeDirection:y,onResizeStart:b,onResize:E,onResizeEnd:x,shouldResize:C}){let T={...$b},k={...qT};u={boundaries:p,resizeDirection:y,keepAspectRatio:v,controlDirection:u0(h)};let _,N=null,$=[],j,U,P,J=!1;const oe=Yv().on("start",te=>{const{nodeLookup:Z,transform:q,snapGrid:z,snapToGrid:G,nodeOrigin:R,paneDomNode:H}=r();if(_=Z.get(n),!_)return;N=H?.getBoundingClientRect()??null;const{xSnapped:B,ySnapped:X}=Ks(te.sourceEvent,{transform:q,snapGrid:z,snapToGrid:G,containerBounds:N});T={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},k={...T,pointerX:B,pointerY:X,aspectRatio:T.width/T.height},j=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(j=Z.get(_.parentId),U=j&&_.extent==="parent"?VT(j):void 0),$=[],P=void 0;for(const[D,O]of Z)if(O.parentId===n&&($.push({id:D,position:{...O.position},extent:O.extent}),O.extent==="parent"||O.expandParent)){const M=PT(O,_,O.origin??R);P?P=[[Math.min(M[0][0],P[0][0]),Math.min(M[0][1],P[0][1])],[Math.max(M[1][0],P[1][0]),Math.max(M[1][1],P[1][1])]]:P=M}b?.(te,{...T})}).on("drag",te=>{const{transform:Z,snapGrid:q,snapToGrid:z,nodeOrigin:G}=r(),R=Ks(te.sourceEvent,{transform:Z,snapGrid:q,snapToGrid:z,containerBounds:N}),H=[];if(!_)return;const{x:B,y:X,width:D,height:O}=T,M={},K=_.origin??G,{width:Q,height:se,x:ue,y:ce}=IT(k,u.controlDirection,R,u.boundaries,u.keepAspectRatio,K,U,P),le=Q!==D,de=se!==O,Ee=ue!==B&&le,_e=ce!==X&&de;if(!Ee&&!_e&&!le&&!de)return;if((Ee||_e||K[0]===1||K[1]===1)&&(M.x=Ee?ue:T.x,M.y=_e?ce:T.y,T.x=M.x,T.y=M.y,$.length>0)){const Ie=ue-B,Ge=ce-X;for(const mt of $)mt.position={x:mt.position.x-Ie+K[0]*(Q-D),y:mt.position.y-Ge+K[1]*(se-O)},H.push(mt)}if((le||de)&&(M.width=le&&(!u.resizeDirection||u.resizeDirection==="horizontal")?Q:T.width,M.height=de&&(!u.resizeDirection||u.resizeDirection==="vertical")?se:T.height,T.width=M.width,T.height=M.height),j&&_.expandParent){const Ie=K[0]*(M.width??0);M.x&&M.x<Ie&&(T.x=Ie,k.x=k.x-(M.x-Ie));const Ge=K[1]*(M.height??0);M.y&&M.y<Ge&&(T.y=Ge,k.y=k.y-(M.y-Ge))}const pe=BT({width:T.width,prevWidth:D,height:T.height,prevHeight:O,affectsX:u.controlDirection.affectsX,affectsY:u.controlDirection.affectsY}),xe={...T,direction:pe};C?.(te,xe)!==!1&&(J=!0,E?.(te,xe),a(M,H))}).on("end",te=>{J&&(x?.(te,{...T}),o?.({...T}),J=!1)});c.call(oe)}function g(){c.on(".drag",null)}return{update:d,destroy:g}}var Mf={exports:{}},jf={},Df={exports:{}},zf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function YT(){if(f0)return zf;f0=1;var e=po();function n(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=e.useState,o=e.useEffect,c=e.useLayoutEffect,u=e.useDebugValue;function d(v,y){var b=y(),E=a({inst:{value:b,getSnapshot:y}}),x=E[0].inst,C=E[1];return c(function(){x.value=b,x.getSnapshot=y,g(x)&&C({inst:x})},[v,b,y]),o(function(){return g(x)&&C({inst:x}),v(function(){g(x)&&C({inst:x})})},[v]),u(b),b}function g(v){var y=v.getSnapshot;v=v.value;try{var b=y();return!r(v,b)}catch{return!0}}function h(v,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return zf.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,zf}var h0;function XT(){return h0||(h0=1,Df.exports=YT()),Df.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function KT(){if(g0)return jf;g0=1;var e=po(),n=XT();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var a=typeof Object.is=="function"?Object.is:r,o=n.useSyncExternalStore,c=e.useRef,u=e.useEffect,d=e.useMemo,g=e.useDebugValue;return jf.useSyncExternalStoreWithSelector=function(h,p,v,y,b){var E=c(null);if(E.current===null){var x={hasValue:!1,value:null};E.current=x}else x=E.current;E=d(function(){function T(j){if(!k){if(k=!0,_=j,j=y(j),b!==void 0&&x.hasValue){var U=x.value;if(b(U,j))return N=U}return N=j}if(U=N,a(_,j))return U;var P=y(j);return b!==void 0&&b(U,P)?(_=j,U):(_=j,N=P)}var k=!1,_,N,$=v===void 0?null:v;return[function(){return T(p())},$===null?void 0:function(){return T($())}]},[p,v,y,b]);var C=o(h,E[0],E[1]);return u(function(){x.hasValue=!0,x.value=C},[C]),g(C),C},jf}var m0;function ZT(){return m0||(m0=1,Mf.exports=KT()),Mf.exports}var QT=ZT();const Lb=Ov(QT),JT={},p0=e=>{let n;const r=new Set,a=(p,v)=>{const y=typeof p=="function"?p(n):p;if(!Object.is(y,n)){const b=n;n=v??(typeof y!="object"||y===null)?y:Object.assign({},n,y),r.forEach(E=>E(n,b))}},o=()=>n,g={setState:a,getState:o,getInitialState:()=>h,subscribe:p=>(r.add(p),()=>r.delete(p)),destroy:()=>{(JT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},h=n=e(a,o,g);return g},Hb=e=>e?p0(e):p0,{useDebugValue:FT}=Rv,{useSyncExternalStoreWithSelector:WT}=Lb,eC=e=>e;function Bb(e,n=eC,r){const a=WT(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return FT(a),a}const y0=(e,n)=>{const r=Hb(e),a=(o,c=n)=>Bb(r,o,c);return Object.assign(a,r),a},tC=(e,n)=>e?y0(e,n):y0;function Fe(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[a,o]of e)if(!Object.is(o,n.get(a)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const a of e)if(!n.has(a))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const a of r)if(!Object.prototype.hasOwnProperty.call(n,a)||!Object.is(e[a],n[a]))return!1;return!0}kv();const Vc=V.createContext(null),nC=Vc.Provider,Ib=On.error001();function De(e,n){const r=V.useContext(Vc);if(r===null)throw new Error(Ib);return Bb(r,e,n)}function Je(){const e=V.useContext(Vc);if(e===null)throw new Error(Ib);return V.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const v0={display:"none"},iC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},qb="react-flow__node-desc",Vb="react-flow__edge-desc",rC="react-flow__aria-live",aC=e=>e.ariaLiveMessage,sC=e=>e.ariaLabelConfig;function oC({rfId:e}){const n=De(aC);return S.jsx("div",{id:`${rC}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:iC,children:n})}function lC({rfId:e,disableKeyboardA11y:n}){const r=De(sC);return S.jsxs(S.Fragment,{children:[S.jsx("div",{id:`${qb}-${e}`,style:v0,children:n?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),S.jsx("div",{id:`${Vb}-${e}`,style:v0,children:r["edge.a11yDescription.default"]}),!n&&S.jsx(oC,{rfId:e})]})}const Pc=V.forwardRef(({position:e="top-left",children:n,className:r,style:a,...o},c)=>{const u=`${e}`.split("-");return S.jsx("div",{className:ut(["react-flow__panel",r,...u]),style:a,ref:c,...o,children:n})});Pc.displayName="Panel";function cC({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:S.jsx(Pc,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:S.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const uC=e=>{const n=[],r=[];for(const[,a]of e.nodeLookup)a.selected&&n.push(a.internals.userNode);for(const[,a]of e.edgeLookup)a.selected&&r.push(a);return{selectedNodes:n,selectedEdges:r}},nc=e=>e.id;function dC(e,n){return Fe(e.selectedNodes.map(nc),n.selectedNodes.map(nc))&&Fe(e.selectedEdges.map(nc),n.selectedEdges.map(nc))}function fC({onSelectionChange:e}){const n=Je(),{selectedNodes:r,selectedEdges:a}=De(uC,dC);return V.useEffect(()=>{const o={nodes:r,edges:a};e?.(o),n.getState().onSelectionChangeHandlers.forEach(c=>c(o))},[r,a,e]),null}const hC=e=>!!e.onSelectionChangeHandlers;function gC({onSelectionChange:e}){const n=De(hC);return e||n?S.jsx(fC,{onSelectionChange:e}):null}const Pb=[0,0],mC={x:0,y:0,zoom:1},pC=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],b0=[...pC,"rfId"],yC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),w0={translateExtent:to,nodeOrigin:Pb,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function vC(e){const{setNodes:n,setEdges:r,setMinZoom:a,setMaxZoom:o,setTranslateExtent:c,setNodeExtent:u,reset:d,setDefaultNodesAndEdges:g}=De(yC,Fe),h=Je();V.useEffect(()=>(g(e.defaultNodes,e.defaultEdges),()=>{p.current=w0,d()}),[]);const p=V.useRef(w0);return V.useEffect(()=>{for(const v of b0){const y=e[v],b=p.current[v];y!==b&&(typeof e[v]>"u"||(v==="nodes"?n(y):v==="edges"?r(y):v==="minZoom"?a(y):v==="maxZoom"?o(y):v==="translateExtent"?c(y):v==="nodeExtent"?u(y):v==="ariaLabelConfig"?h.setState({ariaLabelConfig:rT(y)}):v==="fitView"?h.setState({fitViewQueued:y}):v==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[v]:y})))}p.current=e},b0.map(v=>e[v])),null}function x0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function bC(e){const[n,r]=V.useState(e==="system"?null:e);return V.useEffect(()=>{if(e!=="system"){r(e);return}const a=x0(),o=()=>r(a?.matches?"dark":"light");return o(),a?.addEventListener("change",o),()=>{a?.removeEventListener("change",o)}},[e]),n!==null?n:x0()?.matches?"dark":"light"}const _0=typeof document<"u"?document:null;function so(e=null,n={target:_0,actInsideInputWithModifier:!0}){const[r,a]=V.useState(!1),o=V.useRef(!1),c=V.useRef(new Set([])),[u,d]=V.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((v,y)=>v.concat(...y),[]);return[h,p]}return[[],[]]},[e]);return V.useEffect(()=>{const g=n?.target??_0,h=n?.actInsideInputWithModifier??!0;if(e!==null){const p=b=>{if(o.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!o.current||o.current&&!h)&&wb(b))return!1;const x=E0(b.code,d);if(c.current.add(b[x]),S0(u,c.current,!1)){const C=b.composedPath?.()?.[0]||b.target,T=C?.nodeName==="BUTTON"||C?.nodeName==="A";n.preventDefault!==!1&&(o.current||!T)&&b.preventDefault(),a(!0)}},v=b=>{const E=E0(b.code,d);S0(u,c.current,!0)?(a(!1),c.current.clear()):c.current.delete(b[E]),b.key==="Meta"&&c.current.clear(),o.current=!1},y=()=>{c.current.clear(),a(!1)};return g?.addEventListener("keydown",p),g?.addEventListener("keyup",v),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{g?.removeEventListener("keydown",p),g?.removeEventListener("keyup",v),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[e,a]),r}function S0(e,n,r){return e.filter(a=>r||a.length===n.size).some(a=>a.every(o=>n.has(o)))}function E0(e,n){return n.includes(e)?"code":"key"}const wC=()=>{const e=Je();return V.useMemo(()=>({zoomIn:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,r)=>{const{panZoom:a}=e.getState();return a?a.scaleTo(n,{duration:r?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,r)=>{const{transform:[a,o,c],panZoom:u}=e.getState();return u?(await u.setViewport({x:n.x??a,y:n.y??o,zoom:n.zoom??c},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,r,a]=e.getState().transform;return{x:n,y:r,zoom:a}},setCenter:async(n,r,a)=>e.getState().setCenter(n,r,a),fitBounds:async(n,r)=>{const{width:a,height:o,minZoom:c,maxZoom:u,panZoom:d}=e.getState(),g=Rh(n,a,o,c,u,r?.padding??.1);return d?(await d.setViewport(g,{duration:r?.duration,ease:r?.ease,interpolate:r?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,r={})=>{const{transform:a,snapGrid:o,snapToGrid:c,domNode:u}=e.getState();if(!u)return n;const{x:d,y:g}=u.getBoundingClientRect(),h={x:n.x-d,y:n.y-g},p=r.snapGrid??o,v=r.snapToGrid??c;return _o(h,a,v,p)},flowToScreenPosition:n=>{const{transform:r,domNode:a}=e.getState();if(!a)return n;const{x:o,y:c}=a.getBoundingClientRect(),u=Nc(n,r);return{x:u.x+o,y:u.y+c}}}),[])};function Gb(e,n){const r=[],a=new Map,o=[];for(const c of e)if(c.type==="add"){o.push(c);continue}else if(c.type==="remove"||c.type==="replace")a.set(c.id,[c]);else{const u=a.get(c.id);u?u.push(c):a.set(c.id,[c])}for(const c of n){const u=a.get(c.id);if(!u){r.push(c);continue}if(u[0].type==="remove")continue;if(u[0].type==="replace"){r.push({...u[0].item});continue}const d={...c};for(const g of u)xC(g,d);r.push(d)}return o.length&&o.forEach(c=>{c.index!==void 0?r.splice(c.index,0,{...c.item}):r.push({...c.item})}),r}function xC(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured??={},n.measured.width=e.dimensions.width,n.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function Yb(e,n){return Gb(e,n)}function Xb(e,n){return Gb(e,n)}function gr(e,n){return{id:e,type:"select",selected:n}}function Ma(e,n=new Set,r=!1){const a=[];for(const[o,c]of e){const u=n.has(o);!(c.selected===void 0&&!u)&&c.selected!==u&&(r&&(c.selected=u),a.push(gr(c.id,u)))}return a}function T0({items:e=[],lookup:n}){const r=[],a=new Map(e.map(o=>[o.id,o]));for(const[o,c]of e.entries()){const u=n.get(c.id),d=u?.internals?.userNode??u;d!==void 0&&d!==c&&r.push({id:c.id,item:c,type:"replace"}),d===void 0&&r.push({item:c,type:"add",index:o})}for(const[o]of n)a.get(o)===void 0&&r.push({id:o,type:"remove"});return r}function C0(e){return{id:e.id,type:"remove"}}const A0=e=>K2(e),_C=e=>fb(e);function Kb(e){return V.forwardRef(e)}const SC=typeof window<"u"?V.useLayoutEffect:V.useEffect;function N0(e){const[n,r]=V.useState(BigInt(0)),[a]=V.useState(()=>EC(()=>r(o=>o+BigInt(1))));return SC(()=>{const o=a.get();o.length&&(e(o),a.reset())},[n]),a}function EC(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:r=>{n.push(r),e()}}}const Zb=V.createContext(null);function TC({children:e}){const n=Je(),r=V.useCallback(d=>{const{nodes:g=[],setNodes:h,hasDefaultNodes:p,onNodesChange:v,nodeLookup:y,fitViewQueued:b}=n.getState();let E=g;for(const C of d)E=typeof C=="function"?C(E):C;const x=T0({items:E,lookup:y});p&&h(E),x.length>0?v?.(x):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:C,nodes:T,setNodes:k}=n.getState();C&&k(T)})},[]),a=N0(r),o=V.useCallback(d=>{const{edges:g=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:v,edgeLookup:y}=n.getState();let b=g;for(const E of d)b=typeof E=="function"?E(b):E;p?h(b):v&&v(T0({items:b,lookup:y}))},[]),c=N0(o),u=V.useMemo(()=>({nodeQueue:a,edgeQueue:c}),[]);return S.jsx(Zb.Provider,{value:u,children:e})}function CC(){const e=V.useContext(Zb);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const AC=e=>!!e.panZoom;function Uh(){const e=wC(),n=Je(),r=CC(),a=De(AC),o=V.useMemo(()=>{const c=v=>n.getState().nodeLookup.get(v),u=v=>{r.nodeQueue.push(v)},d=v=>{r.edgeQueue.push(v)},g=v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState(),E=A0(v)?v:y.get(v.id),x=E.parentId?vb(E.position,E.measured,E.parentId,y,b):E.position,C={...E,position:x,width:E.measured?.width??E.width,height:E.measured?.height??E.height};return Ia(C)},h=(v,y,b={replace:!1})=>{u(E=>E.map(x=>{if(x.id===v){const C=typeof y=="function"?y(x):y;return b.replace&&A0(C)?C:{...x,...C}}return x}))},p=(v,y,b={replace:!1})=>{d(E=>E.map(x=>{if(x.id===v){const C=typeof y=="function"?y(x):y;return b.replace&&_C(C)?C:{...x,...C}}return x}))};return{getNodes:()=>n.getState().nodes.map(v=>({...v})),getNode:v=>c(v)?.internals.userNode,getInternalNode:c,getEdges:()=>{const{edges:v=[]}=n.getState();return v.map(y=>({...y}))},getEdge:v=>n.getState().edgeLookup.get(v),setNodes:u,setEdges:d,addNodes:v=>{const y=Array.isArray(v)?v:[v];r.nodeQueue.push(b=>[...b,...y])},addEdges:v=>{const y=Array.isArray(v)?v:[v];r.edgeQueue.push(b=>[...b,...y])},toObject:()=>{const{nodes:v=[],edges:y=[],transform:b}=n.getState(),[E,x,C]=b;return{nodes:v.map(T=>({...T})),edges:y.map(T=>({...T})),viewport:{x:E,y:x,zoom:C}}},deleteElements:async({nodes:v=[],edges:y=[]})=>{const{nodes:b,edges:E,onNodesDelete:x,onEdgesDelete:C,triggerNodeChanges:T,triggerEdgeChanges:k,onDelete:_,onBeforeDelete:N}=n.getState(),{nodes:$,edges:j}=await W2({nodesToRemove:v,edgesToRemove:y,nodes:b,edges:E,onBeforeDelete:N}),U=j.length>0,P=$.length>0;if(U){const J=j.map(C0);C?.(j),k(J)}if(P){const J=$.map(C0);x?.($),T(J)}return(P||U)&&_?.({nodes:$,edges:j}),{deletedNodes:$,deletedEdges:j}},getIntersectingNodes:(v,y=!0,b)=>{const E=Wy(v),x=E?v:g(v),C=b!==void 0;return x?(b||n.getState().nodes).filter(T=>{const k=n.getState().nodeLookup.get(T.id);if(k&&!E&&(T.id===v.id||!k.internals.positionAbsolute))return!1;const _=Ia(C?T:k),N=io(_,x);return y&&N>0||N>=_.width*_.height||N>=x.width*x.height}):[]},isNodeIntersecting:(v,y,b=!0)=>{const x=Wy(v)?v:g(v);if(!x)return!1;const C=io(x,y);return b&&C>0||C>=y.width*y.height||C>=x.width*x.height},updateNode:h,updateNodeData:(v,y,b={replace:!1})=>{h(v,E=>{const x=typeof y=="function"?y(E):y;return b.replace?{...E,data:x}:{...E,data:{...E.data,...x}}},b)},updateEdge:p,updateEdgeData:(v,y,b={replace:!1})=>{p(v,E=>{const x=typeof y=="function"?y(E):y;return b.replace?{...E,data:x}:{...E,data:{...E.data,...x}}},b)},getNodesBounds:v=>{const{nodeLookup:y,nodeOrigin:b}=n.getState();return Z2(v,{nodeLookup:y,nodeOrigin:b})},getHandleConnections:({type:v,id:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}-${v}${y?`-${y}`:""}`)?.values()??[]),getNodeConnections:({type:v,handleId:y,nodeId:b})=>Array.from(n.getState().connectionLookup.get(`${b}${v?y?`-${v}-${y}`:`-${v}`:""}`)?.values()??[]),fitView:async v=>{const y=n.getState().fitViewResolver??iT();return n.setState({fitViewQueued:!0,fitViewOptions:v,fitViewResolver:y}),r.nodeQueue.push(b=>[...b]),y.promise}}},[]);return V.useMemo(()=>({...o,...e,viewportInitialized:a}),[a])}const O0=e=>e.selected,NC=typeof window<"u"?window:void 0;function OC({deleteKeyCode:e,multiSelectionKeyCode:n}){const r=Je(),{deleteElements:a}=Uh(),o=so(e,{actInsideInputWithModifier:!1}),c=so(n,{target:NC});V.useEffect(()=>{if(o){const{edges:u,nodes:d}=r.getState();a({nodes:d.filter(O0),edges:u.filter(O0)}),r.setState({nodesSelectionActive:!1})}},[o]),V.useEffect(()=>{r.setState({multiSelectionActive:c})},[c])}function RC(e){const n=Je();V.useEffect(()=>{const r=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const a=kh(e.current);(a.height===0||a.width===0)&&n.getState().onError?.("004",On.error004()),n.setState({width:a.width||500,height:a.height||500})};if(e.current){r(),window.addEventListener("resize",r);const a=new ResizeObserver(()=>r());return a.observe(e.current),()=>{window.removeEventListener("resize",r),a&&e.current&&a.unobserve(e.current)}}},[])}const Gc={position:"absolute",width:"100%",height:"100%",top:0,left:0},kC=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function MC({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:a=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=xr.Free,zoomOnDoubleClick:u=!0,panOnDrag:d=!0,defaultViewport:g,translateExtent:h,minZoom:p,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:b=!0,children:E,noWheelClassName:x,noPanClassName:C,onViewportChange:T,isControlledViewport:k,paneClickDistance:_,selectionOnDrag:N}){const $=Je(),j=V.useRef(null),{userSelectionActive:U,lib:P,connectionInProgress:J}=De(kC,Fe),oe=so(y),te=V.useRef();RC(j);const Z=V.useCallback(q=>{T?.({x:q[0],y:q[1],zoom:q[2]}),k||$.setState({transform:q})},[T,k]);return V.useEffect(()=>{if(j.current){te.current=HT({domNode:j.current,minZoom:p,maxZoom:v,translateExtent:h,viewport:g,onDraggingChange:R=>$.setState({paneDragging:R}),onPanZoomStart:(R,H)=>{const{onViewportChangeStart:B,onMoveStart:X}=$.getState();X?.(R,H),B?.(H)},onPanZoom:(R,H)=>{const{onViewportChange:B,onMove:X}=$.getState();X?.(R,H),B?.(H)},onPanZoomEnd:(R,H)=>{const{onViewportChangeEnd:B,onMoveEnd:X}=$.getState();X?.(R,H),B?.(H)}});const{x:q,y:z,zoom:G}=te.current.getViewport();return $.setState({panZoom:te.current,transform:[q,z,G],domNode:j.current.closest(".react-flow")}),()=>{te.current?.destroy()}}},[]),V.useEffect(()=>{te.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:a,panOnScrollSpeed:o,panOnScrollMode:c,zoomOnDoubleClick:u,panOnDrag:d,zoomActivationKeyPressed:oe,preventScrolling:b,noPanClassName:C,userSelectionActive:U,noWheelClassName:x,lib:P,onTransformChange:Z,connectionInProgress:J,selectionOnDrag:N,paneClickDistance:_})},[e,n,r,a,o,c,u,d,oe,b,C,U,x,P,Z,J,N,_]),S.jsx("div",{className:"react-flow__renderer",ref:j,style:Gc,children:E})}const jC=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function DC(){const{userSelectionActive:e,userSelectionRect:n}=De(jC,Fe);return e&&n?S.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const Uf=(e,n)=>r=>{r.target===n.current&&e?.(r)},zC=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function UC({isSelecting:e,selectionKeyPressed:n,selectionMode:r=no.Full,panOnDrag:a,paneClickDistance:o,selectionOnDrag:c,onSelectionStart:u,onSelectionEnd:d,onPaneClick:g,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:v,onPaneMouseMove:y,onPaneMouseLeave:b,children:E}){const x=Je(),{userSelectionActive:C,elementsSelectable:T,dragging:k,connectionInProgress:_}=De(zC,Fe),N=T&&(e||C),$=V.useRef(null),j=V.useRef(),U=V.useRef(new Set),P=V.useRef(new Set),J=V.useRef(!1),oe=B=>{if(J.current||_){J.current=!1;return}g?.(B),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},te=B=>{if(Array.isArray(a)&&a?.includes(2)){B.preventDefault();return}h?.(B)},Z=p?B=>p(B):void 0,q=B=>{J.current&&(B.stopPropagation(),J.current=!1)},z=B=>{const{resetSelectedElements:X,domNode:D}=x.getState();if(j.current=D?.getBoundingClientRect(),!j.current)return;const O=B.target===$.current;if(!O&&!!B.target.closest(".nokey")||!e||!(c&&O||n)||B.button!==0||!B.isPrimary)return;B.target?.setPointerCapture?.(B.pointerId),J.current=!1;const{x:Q,y:se}=bn(B.nativeEvent,j.current);x.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:se,x:Q,y:se}}),O||(B.stopPropagation(),B.preventDefault()),(o===0||n)&&(X(),u?.(B),J.current=!0)},G=B=>{const{userSelectionRect:X,transform:D,nodeLookup:O,edgeLookup:M,connectionLookup:K,triggerNodeChanges:Q,triggerEdgeChanges:se,defaultEdgeOptions:ue,resetSelectedElements:ce}=x.getState();if(!j.current||!X)return;const{x:le,y:de}=bn(B.nativeEvent,j.current),{startX:Ee,startY:_e}=X;if(!J.current&&B.target===$.current&&!n&&o>0){if(Math.hypot(le-Ee,de-_e)<=o)return;ce(),u?.(B)}J.current=!0;const pe={startX:Ee,startY:_e,x:le<Ee?le:Ee,y:de<_e?de:_e,width:Math.abs(le-Ee),height:Math.abs(de-_e)},xe=U.current,Ce=P.current;U.current=new Set(Oh(O,pe,D,r===no.Partial,!0).map(Ge=>Ge.id)),P.current=new Set;const Ie=ue?.selectable??!0;for(const Ge of U.current){const mt=K.get(Ge);if(mt)for(const{edgeId:Ft}of mt.values()){const ln=M.get(Ft);ln&&(ln.selectable??Ie)&&P.current.add(Ft)}}if(!e0(xe,U.current)){const Ge=Ma(O,U.current,!0);Q(Ge)}if(!e0(Ce,P.current)){const Ge=Ma(M,P.current);se(Ge)}x.setState({userSelectionRect:pe,userSelectionActive:!0,nodesSelectionActive:!1})},R=B=>{B.button===0&&(B.target?.releasePointerCapture?.(B.pointerId),!C&&B.target===$.current&&x.getState().userSelectionRect&&oe?.(B),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:U.current.size>0}),J.current&&d?.(B))},H=a===!0||Array.isArray(a)&&a.includes(0);return S.jsxs("div",{className:ut(["react-flow__pane",{draggable:H,dragging:k,selection:e}]),onClick:N?void 0:Uf(oe,$),onContextMenu:Uf(te,$),onWheel:Uf(Z,$),onPointerEnter:N?void 0:v,onPointerMove:N?G:y,onPointerUp:N?R:void 0,onPointerDownCapture:N?z:void 0,onClickCapture:N?q:void 0,onPointerLeave:b,ref:$,style:Gc,children:[E,S.jsx(DC,{})]})}function lh({id:e,store:n,unselect:r=!1,nodeRef:a}){const{addSelectedNodes:o,unselectNodesAndEdges:c,multiSelectionActive:u,nodeLookup:d,onError:g}=n.getState(),h=d.get(e);if(!h){g?.("012",On.error012(e));return}n.setState({nodesSelectionActive:!1}),h.selected?(r||h.selected&&u)&&(c({nodes:[h],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):o([e])}function Qb({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:a,nodeId:o,isSelectable:c,nodeClickDistance:u}){const d=Je(),[g,h]=V.useState(!1),p=V.useRef();return V.useEffect(()=>{p.current=TT({getStoreItems:()=>d.getState(),onNodeMouseDown:v=>{lh({id:v,store:d,nodeRef:e})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),V.useEffect(()=>{if(n)p.current?.destroy();else if(e.current)return p.current?.update({noDragClassName:r,handleSelector:a,domNode:e.current,isSelectable:c,nodeId:o,nodeClickDistance:u}),()=>{p.current?.destroy()}},[r,a,n,c,e,o]),g}const $C=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function Jb(){const e=Je();return V.useCallback(r=>{const{nodeExtent:a,snapToGrid:o,snapGrid:c,nodesDraggable:u,onError:d,updateNodePositions:g,nodeLookup:h,nodeOrigin:p}=e.getState(),v=new Map,y=$C(u),b=o?c[0]:5,E=o?c[1]:5,x=r.direction.x*b*r.factor,C=r.direction.y*E*r.factor;for(const[,T]of h){if(!y(T))continue;let k={x:T.internals.positionAbsolute.x+x,y:T.internals.positionAbsolute.y+C};o&&(k=xo(k,c));const{position:_,positionAbsolute:N}=hb({nodeId:T.id,nextPosition:k,nodeLookup:h,nodeExtent:a,nodeOrigin:p,onError:d});T.position=_,T.internals.positionAbsolute=N,v.set(T.id,T)}g(v)},[])}const $h=V.createContext(null),LC=$h.Provider;$h.Consumer;const Fb=()=>V.useContext($h),HC=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),BC=(e,n,r)=>a=>{const{connectionClickStartHandle:o,connectionMode:c,connection:u}=a,{fromHandle:d,toHandle:g,isValid:h}=u,p=g?.nodeId===e&&g?.id===n&&g?.type===r;return{connectingFrom:d?.nodeId===e&&d?.id===n&&d?.type===r,connectingTo:p,clickConnecting:o?.nodeId===e&&o?.id===n&&o?.type===r,isPossibleEndHandle:c===Ha.Strict?d?.type!==r:e!==d?.nodeId||n!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!o,valid:p&&h}};function IC({type:e="source",position:n=he.Top,isValidConnection:r,isConnectable:a=!0,isConnectableStart:o=!0,isConnectableEnd:c=!0,id:u,onConnect:d,children:g,className:h,onMouseDown:p,onTouchStart:v,...y},b){const E=u||null,x=e==="target",C=Je(),T=Fb(),{connectOnClick:k,noPanClassName:_,rfId:N}=De(HC,Fe),{connectingFrom:$,connectingTo:j,clickConnecting:U,isPossibleEndHandle:P,connectionInProcess:J,clickConnectionInProcess:oe,valid:te}=De(BC(T,E,e),Fe);T||C.getState().onError?.("010",On.error010());const Z=G=>{const{defaultEdgeOptions:R,onConnect:H,hasDefaultEdges:B}=C.getState(),X={...R,...G};if(B){const{edges:D,setEdges:O}=C.getState();O(Tb(X,D))}H?.(X),d?.(X)},q=G=>{if(!T)return;const R=xb(G.nativeEvent);if(o&&(R&&G.button===0||!R)){const H=C.getState();oh.onPointerDown(G.nativeEvent,{handleDomNode:G.currentTarget,autoPanOnConnect:H.autoPanOnConnect,connectionMode:H.connectionMode,connectionRadius:H.connectionRadius,domNode:H.domNode,nodeLookup:H.nodeLookup,lib:H.lib,isTarget:x,handleId:E,nodeId:T,flowId:H.rfId,panBy:H.panBy,cancelConnection:H.cancelConnection,onConnectStart:H.onConnectStart,onConnectEnd:H.onConnectEnd,updateConnection:H.updateConnection,onConnect:Z,isValidConnection:r||H.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:H.autoPanSpeed,dragThreshold:H.connectionDragThreshold})}R?p?.(G):v?.(G)},z=G=>{const{onClickConnectStart:R,onClickConnectEnd:H,connectionClickStartHandle:B,connectionMode:X,isValidConnection:D,lib:O,rfId:M,nodeLookup:K,connection:Q}=C.getState();if(!T||!B&&!o)return;if(!B){R?.(G.nativeEvent,{nodeId:T,handleId:E,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:T,type:e,id:E}});return}const se=bb(G.target),ue=r||D,{connection:ce,isValid:le}=oh.isValid(G.nativeEvent,{handle:{nodeId:T,id:E,type:e},connectionMode:X,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:ue,flowId:M,doc:se,lib:O,nodeLookup:K});le&&ce&&Z(ce);const de=structuredClone(Q);delete de.inProgress,de.toPosition=de.toHandle?de.toHandle.position:null,H?.(G,de),C.setState({connectionClickStartHandle:null})};return S.jsx("div",{"data-handleid":E,"data-nodeid":T,"data-handlepos":n,"data-id":`${N}-${T}-${E}-${e}`,className:ut(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",_,h,{source:!x,target:x,connectable:a,connectablestart:o,connectableend:c,clickconnecting:U,connectingfrom:$,connectingto:j,valid:te,connectionindicator:a&&(!J||P)&&(J||oe?c:o)}]),onMouseDown:q,onTouchStart:q,onClick:k?z:void 0,ref:b,...y,children:g})}const Lt=V.memo(Kb(IC));function qC({data:e,isConnectable:n,sourcePosition:r=he.Bottom}){return S.jsxs(S.Fragment,{children:[e?.label,S.jsx(Lt,{type:"source",position:r,isConnectable:n})]})}function VC({data:e,isConnectable:n,targetPosition:r=he.Top,sourcePosition:a=he.Bottom}){return S.jsxs(S.Fragment,{children:[S.jsx(Lt,{type:"target",position:r,isConnectable:n}),e?.label,S.jsx(Lt,{type:"source",position:a,isConnectable:n})]})}function PC(){return null}function GC({data:e,isConnectable:n,targetPosition:r=he.Top}){return S.jsxs(S.Fragment,{children:[S.jsx(Lt,{type:"target",position:r,isConnectable:n}),e?.label]})}const Oc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},R0={input:qC,default:VC,output:GC,group:PC};function YC(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const XC=e=>{const{width:n,height:r,x:a,y:o}=wo(e.nodeLookup,{filter:c=>!!c.selected});return{width:vn(n)?n:null,height:vn(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${a}px,${o}px)`}};function KC({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const a=Je(),{width:o,height:c,transformString:u,userSelectionActive:d}=De(XC,Fe),g=Jb(),h=V.useRef(null);if(V.useEffect(()=>{r||h.current?.focus({preventScroll:!0})},[r]),Qb({nodeRef:h}),d||!o||!c)return null;const p=e?y=>{const b=a.getState().nodes.filter(E=>E.selected);e(y,b)}:void 0,v=y=>{Object.prototype.hasOwnProperty.call(Oc,y.key)&&(y.preventDefault(),g({direction:Oc[y.key],factor:y.shiftKey?4:1}))};return S.jsx("div",{className:ut(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:S.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:r?void 0:-1,onKeyDown:r?void 0:v,style:{width:o,height:c}})})}const k0=typeof window<"u"?window:void 0,ZC=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Wb({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,paneClickDistance:d,deleteKeyCode:g,selectionKeyCode:h,selectionOnDrag:p,selectionMode:v,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:E,panActivationKeyCode:x,zoomActivationKeyCode:C,elementsSelectable:T,zoomOnScroll:k,zoomOnPinch:_,panOnScroll:N,panOnScrollSpeed:$,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:P,defaultViewport:J,translateExtent:oe,minZoom:te,maxZoom:Z,preventScrolling:q,onSelectionContextMenu:z,noWheelClassName:G,noPanClassName:R,disableKeyboardA11y:H,onViewportChange:B,isControlledViewport:X}){const{nodesSelectionActive:D,userSelectionActive:O}=De(ZC),M=so(h,{target:k0}),K=so(x,{target:k0}),Q=K||P,se=K||N,ue=p&&Q!==!0,ce=M||O||ue;return OC({deleteKeyCode:g,multiSelectionKeyCode:E}),S.jsx(MC,{onPaneContextMenu:c,elementsSelectable:T,zoomOnScroll:k,zoomOnPinch:_,panOnScroll:se,panOnScrollSpeed:$,panOnScrollMode:j,zoomOnDoubleClick:U,panOnDrag:!M&&Q,defaultViewport:J,translateExtent:oe,minZoom:te,maxZoom:Z,zoomActivationKeyCode:C,preventScrolling:q,noWheelClassName:G,noPanClassName:R,onViewportChange:B,isControlledViewport:X,paneClickDistance:d,selectionOnDrag:ue,children:S.jsxs(UC,{onSelectionStart:y,onSelectionEnd:b,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:a,onPaneMouseLeave:o,onPaneContextMenu:c,onPaneScroll:u,panOnDrag:Q,isSelecting:!!ce,selectionMode:v,selectionKeyPressed:M,paneClickDistance:d,selectionOnDrag:ue,children:[e,D&&S.jsx(KC,{onSelectionContextMenu:z,noPanClassName:R,disableKeyboardA11y:H})]})})}Wb.displayName="FlowRenderer";const QC=V.memo(Wb),JC=e=>n=>e?Oh(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(r=>r.id):Array.from(n.nodeLookup.keys());function FC(e){return De(V.useCallback(JC(e),[e]),Fe)}const WC=e=>e.updateNodeInternals;function eA(){const e=De(WC),[n]=V.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const a=new Map;r.forEach(o=>{const c=o.target.getAttribute("data-id");a.set(c,{id:c,nodeElement:o.target,force:!0})}),e(a)}));return V.useEffect(()=>()=>{n?.disconnect()},[n]),n}function tA({node:e,nodeType:n,hasDimensions:r,resizeObserver:a}){const o=Je(),c=V.useRef(null),u=V.useRef(null),d=V.useRef(e.sourcePosition),g=V.useRef(e.targetPosition),h=V.useRef(n),p=r&&!!e.internals.handleBounds;return V.useEffect(()=>{c.current&&!e.hidden&&(!p||u.current!==c.current)&&(u.current&&a?.unobserve(u.current),a?.observe(c.current),u.current=c.current)},[p,e.hidden]),V.useEffect(()=>()=>{u.current&&(a?.unobserve(u.current),u.current=null)},[]),V.useEffect(()=>{if(c.current){const v=h.current!==n,y=d.current!==e.sourcePosition,b=g.current!==e.targetPosition;(v||y||b)&&(h.current=n,d.current=e.sourcePosition,g.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:c.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),c}function nA({id:e,onClick:n,onMouseEnter:r,onMouseMove:a,onMouseLeave:o,onContextMenu:c,onDoubleClick:u,nodesDraggable:d,elementsSelectable:g,nodesConnectable:h,nodesFocusable:p,resizeObserver:v,noDragClassName:y,noPanClassName:b,disableKeyboardA11y:E,rfId:x,nodeTypes:C,nodeClickDistance:T,onError:k}){const{node:_,internals:N,isParent:$}=De(le=>{const de=le.nodeLookup.get(e),Ee=le.parentLookup.has(e);return{node:de,internals:de.internals,isParent:Ee}},Fe);let j=_.type||"default",U=C?.[j]||R0[j];U===void 0&&(k?.("003",On.error003(j)),j="default",U=C?.default||R0.default);const P=!!(_.draggable||d&&typeof _.draggable>"u"),J=!!(_.selectable||g&&typeof _.selectable>"u"),oe=!!(_.connectable||h&&typeof _.connectable>"u"),te=!!(_.focusable||p&&typeof _.focusable>"u"),Z=Je(),q=yb(_),z=tA({node:_,nodeType:j,hasDimensions:q,resizeObserver:v}),G=Qb({nodeRef:z,disabled:_.hidden||!P,noDragClassName:y,handleSelector:_.dragHandle,nodeId:e,isSelectable:J,nodeClickDistance:T}),R=Jb();if(_.hidden)return null;const H=ni(_),B=YC(_),X=J||P||n||r||a||o,D=r?le=>r(le,{...N.userNode}):void 0,O=a?le=>a(le,{...N.userNode}):void 0,M=o?le=>o(le,{...N.userNode}):void 0,K=c?le=>c(le,{...N.userNode}):void 0,Q=u?le=>u(le,{...N.userNode}):void 0,se=le=>{const{selectNodesOnDrag:de,nodeDragThreshold:Ee}=Z.getState();J&&(!de||!P||Ee>0)&&lh({id:e,store:Z,nodeRef:z}),n&&n(le,{...N.userNode})},ue=le=>{if(!(wb(le.nativeEvent)||E)){if(lb.includes(le.key)&&J){const de=le.key==="Escape";lh({id:e,store:Z,unselect:de,nodeRef:z})}else if(P&&_.selected&&Object.prototype.hasOwnProperty.call(Oc,le.key)){le.preventDefault();const{ariaLabelConfig:de}=Z.getState();Z.setState({ariaLiveMessage:de["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),R({direction:Oc[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(E||!z.current?.matches(":focus-visible"))return;const{transform:le,width:de,height:Ee,autoPanOnNodeFocus:_e,setCenter:pe}=Z.getState();if(!_e)return;Oh(new Map([[e,_]]),{x:0,y:0,width:de,height:Ee},le,!0).length>0||pe(_.position.x+H.width/2,_.position.y+H.height/2,{zoom:le[2]})};return S.jsx("div",{className:ut(["react-flow__node",`react-flow__node-${j}`,{[b]:P},_.className,{selected:_.selected,selectable:J,parent:$,draggable:P,dragging:G}]),ref:z,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:q?"visible":"hidden",..._.style,...B},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:D,onMouseMove:O,onMouseLeave:M,onContextMenu:K,onClick:se,onDoubleClick:Q,onKeyDown:te?ue:void 0,tabIndex:te?0:void 0,onFocus:te?ce:void 0,role:_.ariaRole??(te?"group":void 0),"aria-roledescription":"node","aria-describedby":E?void 0:`${qb}-${x}`,"aria-label":_.ariaLabel,..._.domAttributes,children:S.jsx(LC,{value:e,children:S.jsx(U,{id:e,data:_.data,type:j,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:_.selected??!1,selectable:J,draggable:P,deletable:_.deletable??!0,isConnectable:oe,sourcePosition:_.sourcePosition,targetPosition:_.targetPosition,dragging:G,dragHandle:_.dragHandle,zIndex:N.z,parentId:_.parentId,...H})})})}var iA=V.memo(nA);const rA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function ew(e){const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:a,elementsSelectable:o,onError:c}=De(rA,Fe),u=FC(e.onlyRenderVisibleElements),d=eA();return S.jsx("div",{className:"react-flow__nodes",style:Gc,children:u.map(g=>S.jsx(iA,{id:g,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:d,nodesDraggable:n,nodesConnectable:r,nodesFocusable:a,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:c},g))})}ew.displayName="NodeRenderer";const aA=V.memo(ew);function sA(e){return De(V.useCallback(r=>{if(!e)return r.edges.map(o=>o.id);const a=[];if(r.width&&r.height)for(const o of r.edges){const c=r.nodeLookup.get(o.source),u=r.nodeLookup.get(o.target);c&&u&&oT({sourceNode:c,targetNode:u,width:r.width,height:r.height,transform:r.transform})&&a.push(o.id)}return a},[e]),Fe)}const oA=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e}};return S.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},lA=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e,fill:e}};return S.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},M0={[_r.Arrow]:oA,[_r.ArrowClosed]:lA};function cA(e){const n=Je();return V.useMemo(()=>Object.prototype.hasOwnProperty.call(M0,e)?M0[e]:(n.getState().onError?.("009",On.error009(e)),null),[e])}const uA=({id:e,type:n,color:r,width:a=12.5,height:o=12.5,markerUnits:c="strokeWidth",strokeWidth:u,orient:d="auto-start-reverse"})=>{const g=cA(n);return g?S.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${a}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:d,refX:"0",refY:"0",children:S.jsx(g,{color:r,strokeWidth:u})}):null},tw=({defaultColor:e,rfId:n})=>{const r=De(c=>c.edges),a=De(c=>c.defaultEdgeOptions),o=V.useMemo(()=>gT(r,{id:n,defaultColor:e,defaultMarkerStart:a?.markerStart,defaultMarkerEnd:a?.markerEnd}),[r,a,n,e]);return o.length?S.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:S.jsx("defs",{children:o.map(c=>S.jsx(uA,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};tw.displayName="MarkerDefinitions";var dA=V.memo(tw);function nw({x:e,y:n,label:r,labelStyle:a,labelShowBg:o=!0,labelBgStyle:c,labelBgPadding:u=[2,4],labelBgBorderRadius:d=2,children:g,className:h,...p}){const[v,y]=V.useState({x:1,y:0,width:0,height:0}),b=ut(["react-flow__edge-textwrapper",h]),E=V.useRef(null);return V.useEffect(()=>{if(E.current){const x=E.current.getBBox();y({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),r?S.jsxs("g",{transform:`translate(${e-v.width/2} ${n-v.height/2})`,className:b,visibility:v.width?"visible":"hidden",...p,children:[o&&S.jsx("rect",{width:v.width+2*u[0],x:-u[0],y:-u[1],height:v.height+2*u[1],className:"react-flow__edge-textbg",style:c,rx:d,ry:d}),S.jsx("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:E,style:a,children:r}),g]}):null}nw.displayName="EdgeText";const fA=V.memo(nw);function Yc({path:e,labelX:n,labelY:r,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g,interactionWidth:h=20,...p}){return S.jsxs(S.Fragment,{children:[S.jsx("path",{...p,d:e,fill:"none",className:ut(["react-flow__edge-path",p.className])}),h?S.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,a&&vn(n)&&vn(r)?S.jsx(fA,{x:n,y:r,label:a,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:g}):null]})}function j0({pos:e,x1:n,y1:r,x2:a,y2:o}){return e===he.Left||e===he.Right?[.5*(n+a),r]:[n,.5*(r+o)]}function iw({sourceX:e,sourceY:n,sourcePosition:r=he.Bottom,targetX:a,targetY:o,targetPosition:c=he.Top}){const[u,d]=j0({pos:r,x1:e,y1:n,x2:a,y2:o}),[g,h]=j0({pos:c,x1:a,y1:o,x2:e,y2:n}),[p,v,y,b]=_b({sourceX:e,sourceY:n,targetX:a,targetY:o,sourceControlX:u,sourceControlY:d,targetControlX:g,targetControlY:h});return[`M${e},${n} C${u},${d} ${g},${h} ${a},${o}`,p,v,y,b]}function rw(e){return V.memo(({id:n,sourceX:r,sourceY:a,targetX:o,targetY:c,sourcePosition:u,targetPosition:d,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:C,interactionWidth:T})=>{const[k,_,N]=iw({sourceX:r,sourceY:a,sourcePosition:u,targetX:o,targetY:c,targetPosition:d}),$=e.isInternal?void 0:n;return S.jsx(Yc,{id:$,path:k,labelX:_,labelY:N,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:C,interactionWidth:T})})}const hA=rw({isInternal:!1}),aw=rw({isInternal:!0});hA.displayName="SimpleBezierEdge";aw.displayName="SimpleBezierEdgeInternal";function sw(e){return V.memo(({id:n,sourceX:r,sourceY:a,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,sourcePosition:b=he.Bottom,targetPosition:E=he.Top,markerEnd:x,markerStart:C,pathOptions:T,interactionWidth:k})=>{const[_,N,$]=rh({sourceX:r,sourceY:a,sourcePosition:b,targetX:o,targetY:c,targetPosition:E,borderRadius:T?.borderRadius,offset:T?.offset,stepPosition:T?.stepPosition}),j=e.isInternal?void 0:n;return S.jsx(Yc,{id:j,path:_,labelX:N,labelY:$,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:C,interactionWidth:k})})}const ow=sw({isInternal:!1}),lw=sw({isInternal:!0});ow.displayName="SmoothStepEdge";lw.displayName="SmoothStepEdgeInternal";function cw(e){return V.memo(({id:n,...r})=>{const a=e.isInternal?void 0:n;return S.jsx(ow,{...r,id:a,pathOptions:V.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])})})}const gA=cw({isInternal:!1}),uw=cw({isInternal:!0});gA.displayName="StepEdge";uw.displayName="StepEdgeInternal";function dw(e){return V.memo(({id:n,sourceX:r,sourceY:a,targetX:o,targetY:c,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:E,interactionWidth:x})=>{const[C,T,k]=Cb({sourceX:r,sourceY:a,targetX:o,targetY:c}),_=e.isInternal?void 0:n;return S.jsx(Yc,{id:_,path:C,labelX:T,labelY:k,label:u,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:v,style:y,markerEnd:b,markerStart:E,interactionWidth:x})})}const mA=dw({isInternal:!1}),fw=dw({isInternal:!0});mA.displayName="StraightEdge";fw.displayName="StraightEdgeInternal";function hw(e){return V.memo(({id:n,sourceX:r,sourceY:a,targetX:o,targetY:c,sourcePosition:u=he.Bottom,targetPosition:d=he.Top,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:C,pathOptions:T,interactionWidth:k})=>{const[_,N,$]=Sb({sourceX:r,sourceY:a,sourcePosition:u,targetX:o,targetY:c,targetPosition:d,curvature:T?.curvature}),j=e.isInternal?void 0:n;return S.jsx(Yc,{id:j,path:_,labelX:N,labelY:$,label:g,labelStyle:h,labelShowBg:p,labelBgStyle:v,labelBgPadding:y,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:C,interactionWidth:k})})}const pA=hw({isInternal:!1}),gw=hw({isInternal:!0});pA.displayName="BezierEdge";gw.displayName="BezierEdgeInternal";const D0={default:gw,straight:fw,step:uw,smoothstep:lw,simplebezier:aw},z0={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},yA=(e,n,r)=>r===he.Left?e-n:r===he.Right?e+n:e,vA=(e,n,r)=>r===he.Top?e-n:r===he.Bottom?e+n:e,U0="react-flow__edgeupdater";function $0({position:e,centerX:n,centerY:r,radius:a=10,onMouseDown:o,onMouseEnter:c,onMouseOut:u,type:d}){return S.jsx("circle",{onMouseDown:o,onMouseEnter:c,onMouseOut:u,className:ut([U0,`${U0}-${d}`]),cx:yA(n,a,e),cy:vA(r,a,e),r:a,stroke:"transparent",fill:"transparent"})}function bA({isReconnectable:e,reconnectRadius:n,edge:r,sourceX:a,sourceY:o,targetX:c,targetY:u,sourcePosition:d,targetPosition:g,onReconnect:h,onReconnectStart:p,onReconnectEnd:v,setReconnecting:y,setUpdateHover:b}){const E=Je(),x=(N,$)=>{if(N.button!==0)return;const{autoPanOnConnect:j,domNode:U,isValidConnection:P,connectionMode:J,connectionRadius:oe,lib:te,onConnectStart:Z,onConnectEnd:q,cancelConnection:z,nodeLookup:G,rfId:R,panBy:H,updateConnection:B}=E.getState(),X=$.type==="target",D=(K,Q)=>{y(!1),v?.(K,r,$.type,Q)},O=K=>h?.(r,K),M=(K,Q)=>{y(!0),p?.(N,r,$.type),Z?.(K,Q)};oh.onPointerDown(N.nativeEvent,{autoPanOnConnect:j,connectionMode:J,connectionRadius:oe,domNode:U,handleId:$.id,nodeId:$.nodeId,nodeLookup:G,isTarget:X,edgeUpdaterType:$.type,lib:te,flowId:R,cancelConnection:z,panBy:H,isValidConnection:P,onConnect:O,onConnectStart:M,onConnectEnd:q,onReconnectEnd:D,updateConnection:B,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,dragThreshold:E.getState().connectionDragThreshold,handleDomNode:N.currentTarget})},C=N=>x(N,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),T=N=>x(N,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),k=()=>b(!0),_=()=>b(!1);return S.jsxs(S.Fragment,{children:[(e===!0||e==="source")&&S.jsx($0,{position:d,centerX:a,centerY:o,radius:n,onMouseDown:C,onMouseEnter:k,onMouseOut:_,type:"source"}),(e===!0||e==="target")&&S.jsx($0,{position:g,centerX:c,centerY:u,radius:n,onMouseDown:T,onMouseEnter:k,onMouseOut:_,type:"target"})]})}function wA({id:e,edgesFocusable:n,edgesReconnectable:r,elementsSelectable:a,onClick:o,onDoubleClick:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,rfId:E,edgeTypes:x,noPanClassName:C,onError:T,disableKeyboardA11y:k}){let _=De(pe=>pe.edgeLookup.get(e));const N=De(pe=>pe.defaultEdgeOptions);_=N?{...N,..._}:_;let $=_.type||"default",j=x?.[$]||D0[$];j===void 0&&(T?.("011",On.error011($)),$="default",j=x?.default||D0.default);const U=!!(_.focusable||n&&typeof _.focusable>"u"),P=typeof v<"u"&&(_.reconnectable||r&&typeof _.reconnectable>"u"),J=!!(_.selectable||a&&typeof _.selectable>"u"),oe=V.useRef(null),[te,Z]=V.useState(!1),[q,z]=V.useState(!1),G=Je(),{zIndex:R,sourceX:H,sourceY:B,targetX:X,targetY:D,sourcePosition:O,targetPosition:M}=De(V.useCallback(pe=>{const xe=pe.nodeLookup.get(_.source),Ce=pe.nodeLookup.get(_.target);if(!xe||!Ce)return{zIndex:_.zIndex,...z0};const Ie=hT({id:e,sourceNode:xe,targetNode:Ce,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:pe.connectionMode,onError:T});return{zIndex:sT({selected:_.selected,zIndex:_.zIndex,sourceNode:xe,targetNode:Ce,elevateOnSelect:pe.elevateEdgesOnSelect}),...Ie||z0}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Fe),K=V.useMemo(()=>_.markerStart?`url('#${ah(_.markerStart,E)}')`:void 0,[_.markerStart,E]),Q=V.useMemo(()=>_.markerEnd?`url('#${ah(_.markerEnd,E)}')`:void 0,[_.markerEnd,E]);if(_.hidden||H===null||B===null||X===null||D===null)return null;const se=pe=>{const{addSelectedEdges:xe,unselectNodesAndEdges:Ce,multiSelectionActive:Ie}=G.getState();J&&(G.setState({nodesSelectionActive:!1}),_.selected&&Ie?(Ce({nodes:[],edges:[_]}),oe.current?.blur()):xe([e])),o&&o(pe,_)},ue=c?pe=>{c(pe,{..._})}:void 0,ce=u?pe=>{u(pe,{..._})}:void 0,le=d?pe=>{d(pe,{..._})}:void 0,de=g?pe=>{g(pe,{..._})}:void 0,Ee=h?pe=>{h(pe,{..._})}:void 0,_e=pe=>{if(!k&&lb.includes(pe.key)&&J){const{unselectNodesAndEdges:xe,addSelectedEdges:Ce}=G.getState();pe.key==="Escape"?(oe.current?.blur(),xe({edges:[_]})):Ce([e])}};return S.jsx("svg",{style:{zIndex:R},children:S.jsxs("g",{className:ut(["react-flow__edge",`react-flow__edge-${$}`,_.className,C,{selected:_.selected,animated:_.animated,inactive:!J&&!o,updating:te,selectable:J}]),onClick:se,onDoubleClick:ue,onContextMenu:ce,onMouseEnter:le,onMouseMove:de,onMouseLeave:Ee,onKeyDown:U?_e:void 0,tabIndex:U?0:void 0,role:_.ariaRole??(U?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":U?`${Vb}-${E}`:void 0,ref:oe,..._.domAttributes,children:[!q&&S.jsx(j,{id:e,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:J,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:H,sourceY:B,targetX:X,targetY:D,sourcePosition:O,targetPosition:M,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:K,markerEnd:Q,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),P&&S.jsx(bA,{edge:_,isReconnectable:P,reconnectRadius:p,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,sourceX:H,sourceY:B,targetX:X,targetY:D,sourcePosition:O,targetPosition:M,setUpdateHover:Z,setReconnecting:z})]})})}var xA=V.memo(wA);const _A=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function mw({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:r,edgeTypes:a,noPanClassName:o,onReconnect:c,onEdgeContextMenu:u,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:v,onEdgeDoubleClick:y,onReconnectStart:b,onReconnectEnd:E,disableKeyboardA11y:x}){const{edgesFocusable:C,edgesReconnectable:T,elementsSelectable:k,onError:_}=De(_A,Fe),N=sA(n);return S.jsxs("div",{className:"react-flow__edges",children:[S.jsx(dA,{defaultColor:e,rfId:r}),N.map($=>S.jsx(xA,{id:$,edgesFocusable:C,edgesReconnectable:T,elementsSelectable:k,noPanClassName:o,onReconnect:c,onContextMenu:u,onMouseEnter:d,onMouseMove:g,onMouseLeave:h,onClick:p,reconnectRadius:v,onDoubleClick:y,onReconnectStart:b,onReconnectEnd:E,rfId:r,onError:_,edgeTypes:a,disableKeyboardA11y:x},$))]})}mw.displayName="EdgeRenderer";const SA=V.memo(mw),EA=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function TA({children:e}){const n=De(EA);return S.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function CA(e){const n=Uh(),r=V.useRef(!1);V.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const AA=e=>e.panZoom?.syncViewport;function NA(e){const n=De(AA),r=Je();return V.useEffect(()=>{e&&(n?.(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function OA(e){return e.connection.inProgress?{...e.connection,to:_o(e.connection.to,e.transform)}:{...e.connection}}function RA(e){return OA}function kA(e){const n=RA();return De(n,Fe)}const MA=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function jA({containerStyle:e,style:n,type:r,component:a}){const{nodesConnectable:o,width:c,height:u,isValid:d,inProgress:g}=De(MA,Fe);return!(c&&o&&g)?null:S.jsx("svg",{style:e,width:c,height:u,className:"react-flow__connectionline react-flow__container",children:S.jsx("g",{className:ut(["react-flow__connection",db(d)]),children:S.jsx(pw,{style:n,type:r,CustomComponent:a,isValid:d})})})}const pw=({style:e,type:n=Li.Bezier,CustomComponent:r,isValid:a})=>{const{inProgress:o,from:c,fromNode:u,fromHandle:d,fromPosition:g,to:h,toNode:p,toHandle:v,toPosition:y}=kA();if(!o)return;if(r)return S.jsx(r,{connectionLineType:n,connectionLineStyle:e,fromNode:u,fromHandle:d,fromX:c.x,fromY:c.y,toX:h.x,toY:h.y,fromPosition:g,toPosition:y,connectionStatus:db(a),toNode:p,toHandle:v});let b="";const E={sourceX:c.x,sourceY:c.y,sourcePosition:g,targetX:h.x,targetY:h.y,targetPosition:y};switch(n){case Li.Bezier:[b]=Sb(E);break;case Li.SimpleBezier:[b]=iw(E);break;case Li.Step:[b]=rh({...E,borderRadius:0});break;case Li.SmoothStep:[b]=rh(E);break;default:[b]=Cb(E)}return S.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};pw.displayName="ConnectionLine";const DA={};function L0(e=DA){V.useRef(e),Je(),V.useEffect(()=>{},[e])}function zA(){Je(),V.useRef(!1),V.useEffect(()=>{},[])}function yw({nodeTypes:e,edgeTypes:n,onInit:r,onNodeClick:a,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:b,connectionLineType:E,connectionLineStyle:x,connectionLineComponent:C,connectionLineContainerStyle:T,selectionKeyCode:k,selectionOnDrag:_,selectionMode:N,multiSelectionKeyCode:$,panActivationKeyCode:j,zoomActivationKeyCode:U,deleteKeyCode:P,onlyRenderVisibleElements:J,elementsSelectable:oe,defaultViewport:te,translateExtent:Z,minZoom:q,maxZoom:z,preventScrolling:G,defaultMarkerColor:R,zoomOnScroll:H,zoomOnPinch:B,panOnScroll:X,panOnScrollSpeed:D,panOnScrollMode:O,zoomOnDoubleClick:M,panOnDrag:K,onPaneClick:Q,onPaneMouseEnter:se,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:de,paneClickDistance:Ee,nodeClickDistance:_e,onEdgeContextMenu:pe,onEdgeMouseEnter:xe,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,noDragClassName:ri,noWheelClassName:ai,noPanClassName:qi,disableKeyboardA11y:Vi,nodeExtent:yt,rfId:Cr,viewport:kn,onViewportChange:si}){return L0(e),L0(n),zA(),CA(r),NA(kn),S.jsx(QC,{onPaneClick:Q,onPaneMouseEnter:se,onPaneMouseMove:ue,onPaneMouseLeave:ce,onPaneContextMenu:de,onPaneScroll:le,paneClickDistance:Ee,deleteKeyCode:P,selectionKeyCode:k,selectionOnDrag:_,selectionMode:N,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:$,panActivationKeyCode:j,zoomActivationKeyCode:U,elementsSelectable:oe,zoomOnScroll:H,zoomOnPinch:B,zoomOnDoubleClick:M,panOnScroll:X,panOnScrollSpeed:D,panOnScrollMode:O,panOnDrag:K,defaultViewport:te,translateExtent:Z,minZoom:q,maxZoom:z,onSelectionContextMenu:v,preventScrolling:G,noDragClassName:ri,noWheelClassName:ai,noPanClassName:qi,disableKeyboardA11y:Vi,onViewportChange:si,isControlledViewport:!!kn,children:S.jsxs(TA,{children:[S.jsx(SA,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:u,onReconnect:mt,onReconnectStart:Ft,onReconnectEnd:ln,onlyRenderVisibleElements:J,onEdgeContextMenu:pe,onEdgeMouseEnter:xe,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ie,reconnectRadius:Ge,defaultMarkerColor:R,noPanClassName:qi,disableKeyboardA11y:Vi,rfId:Cr}),S.jsx(jA,{style:x,type:E,component:C,containerStyle:T}),S.jsx("div",{className:"react-flow__edgelabel-renderer"}),S.jsx(aA,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:_e,onlyRenderVisibleElements:J,noPanClassName:qi,noDragClassName:ri,disableKeyboardA11y:Vi,nodeExtent:yt,rfId:Cr}),S.jsx("div",{className:"react-flow__viewport-portal"})]})})}yw.displayName="GraphView";const UA=V.memo(yw),H0=({nodes:e,edges:n,defaultNodes:r,defaultEdges:a,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:v}={})=>{const y=new Map,b=new Map,E=new Map,x=new Map,C=a??n??[],T=r??e??[],k=p??[0,0],_=v??to;Ob(E,x,C);const N=sh(T,y,b,{nodeOrigin:k,nodeExtent:_,elevateNodesOnSelect:!1});let $=[0,0,1];if(u&&o&&c){const j=wo(y,{filter:oe=>!!((oe.width||oe.initialWidth)&&(oe.height||oe.initialHeight))}),{x:U,y:P,zoom:J}=Rh(j,o,c,g,h,d?.padding??.1);$=[U,P,J]}return{rfId:"1",width:o??0,height:c??0,transform:$,nodes:T,nodesInitialized:N,nodeLookup:y,parentLookup:b,edges:C,edgeLookup:x,connectionLookup:E,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:a!==void 0,panZoom:null,minZoom:g,maxZoom:h,translateExtent:to,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ha.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:k,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:u??!1,fitViewOptions:d,fitViewResolver:null,connection:{...ub},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:eT,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:cb}},$A=({nodes:e,edges:n,defaultNodes:r,defaultEdges:a,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v})=>tC((y,b)=>{async function E(){const{nodeLookup:x,panZoom:C,fitViewOptions:T,fitViewResolver:k,width:_,height:N,minZoom:$,maxZoom:j}=b();C&&(await F2({nodes:x,width:_,height:N,panZoom:C,minZoom:$,maxZoom:j},T),k?.resolve(!0),y({fitViewResolver:null}))}return{...H0({nodes:e,edges:n,width:o,height:c,fitView:u,fitViewOptions:d,minZoom:g,maxZoom:h,nodeOrigin:p,nodeExtent:v,defaultNodes:r,defaultEdges:a}),setNodes:x=>{const{nodeLookup:C,parentLookup:T,nodeOrigin:k,elevateNodesOnSelect:_,fitViewQueued:N}=b(),$=sh(x,C,T,{nodeOrigin:k,nodeExtent:v,elevateNodesOnSelect:_,checkEquality:!0});N&&$?(E(),y({nodes:x,nodesInitialized:$,fitViewQueued:!1,fitViewOptions:void 0})):y({nodes:x,nodesInitialized:$})},setEdges:x=>{const{connectionLookup:C,edgeLookup:T}=b();Ob(C,T,x),y({edges:x})},setDefaultNodesAndEdges:(x,C)=>{if(x){const{setNodes:T}=b();T(x),y({hasDefaultNodes:!0})}if(C){const{setEdges:T}=b();T(C),y({hasDefaultEdges:!0})}},updateNodeInternals:x=>{const{triggerNodeChanges:C,nodeLookup:T,parentLookup:k,domNode:_,nodeOrigin:N,nodeExtent:$,debug:j,fitViewQueued:U}=b(),{changes:P,updatedInternals:J}=xT(x,T,k,_,N,$);J&&(yT(T,k,{nodeOrigin:N,nodeExtent:$}),U?(E(),y({fitViewQueued:!1,fitViewOptions:void 0})):y({}),P?.length>0&&(j&&console.log("React Flow: trigger node changes",P),C?.(P)))},updateNodePositions:(x,C=!1)=>{const T=[],k=[],{nodeLookup:_,triggerNodeChanges:N}=b();for(const[$,j]of x){const U=_.get($),P=!!(U?.expandParent&&U?.parentId&&j?.position),J={id:$,type:"position",position:P?{x:Math.max(0,j.position.x),y:Math.max(0,j.position.y)}:j.position,dragging:C};P&&U.parentId&&T.push({id:$,parentId:U.parentId,rect:{...j.internals.positionAbsolute,width:j.measured.width??0,height:j.measured.height??0}}),k.push(J)}if(T.length>0){const{parentLookup:$,nodeOrigin:j}=b(),U=zh(T,_,$,j);k.push(...U)}N(k)},triggerNodeChanges:x=>{const{onNodesChange:C,setNodes:T,nodes:k,hasDefaultNodes:_,debug:N}=b();if(x?.length){if(_){const $=Yb(x,k);T($)}N&&console.log("React Flow: trigger node changes",x),C?.(x)}},triggerEdgeChanges:x=>{const{onEdgesChange:C,setEdges:T,edges:k,hasDefaultEdges:_,debug:N}=b();if(x?.length){if(_){const $=Xb(x,k);T($)}N&&console.log("React Flow: trigger edge changes",x),C?.(x)}},addSelectedNodes:x=>{const{multiSelectionActive:C,edgeLookup:T,nodeLookup:k,triggerNodeChanges:_,triggerEdgeChanges:N}=b();if(C){const $=x.map(j=>gr(j,!0));_($);return}_(Ma(k,new Set([...x]),!0)),N(Ma(T))},addSelectedEdges:x=>{const{multiSelectionActive:C,edgeLookup:T,nodeLookup:k,triggerNodeChanges:_,triggerEdgeChanges:N}=b();if(C){const $=x.map(j=>gr(j,!0));N($);return}N(Ma(T,new Set([...x]))),_(Ma(k,new Set,!0))},unselectNodesAndEdges:({nodes:x,edges:C}={})=>{const{edges:T,nodes:k,nodeLookup:_,triggerNodeChanges:N,triggerEdgeChanges:$}=b(),j=x||k,U=C||T,P=j.map(oe=>{const te=_.get(oe.id);return te&&(te.selected=!1),gr(oe.id,!1)}),J=U.map(oe=>gr(oe.id,!1));N(P),$(J)},setMinZoom:x=>{const{panZoom:C,maxZoom:T}=b();C?.setScaleExtent([x,T]),y({minZoom:x})},setMaxZoom:x=>{const{panZoom:C,minZoom:T}=b();C?.setScaleExtent([T,x]),y({maxZoom:x})},setTranslateExtent:x=>{b().panZoom?.setTranslateExtent(x),y({translateExtent:x})},resetSelectedElements:()=>{const{edges:x,nodes:C,triggerNodeChanges:T,triggerEdgeChanges:k,elementsSelectable:_}=b();if(!_)return;const N=C.reduce((j,U)=>U.selected?[...j,gr(U.id,!1)]:j,[]),$=x.reduce((j,U)=>U.selected?[...j,gr(U.id,!1)]:j,[]);T(N),k($)},setNodeExtent:x=>{const{nodes:C,nodeLookup:T,parentLookup:k,nodeOrigin:_,elevateNodesOnSelect:N,nodeExtent:$}=b();x[0][0]===$[0][0]&&x[0][1]===$[0][1]&&x[1][0]===$[1][0]&&x[1][1]===$[1][1]||(sh(C,T,k,{nodeOrigin:_,nodeExtent:x,elevateNodesOnSelect:N,checkEquality:!1}),y({nodeExtent:x}))},panBy:x=>{const{transform:C,width:T,height:k,panZoom:_,translateExtent:N}=b();return _T({delta:x,panZoom:_,transform:C,translateExtent:N,width:T,height:k})},setCenter:async(x,C,T)=>{const{width:k,height:_,maxZoom:N,panZoom:$}=b();if(!$)return Promise.resolve(!1);const j=typeof T?.zoom<"u"?T.zoom:N;return await $.setViewport({x:k/2-x*j,y:_/2-C*j,zoom:j},{duration:T?.duration,ease:T?.ease,interpolate:T?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{y({connection:{...ub}})},updateConnection:x=>{y({connection:x})},reset:()=>y({...H0()})}},Object.is);function LA({initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:a,initialWidth:o,initialHeight:c,initialMinZoom:u,initialMaxZoom:d,initialFitViewOptions:g,fitView:h,nodeOrigin:p,nodeExtent:v,children:y}){const[b]=V.useState(()=>$A({nodes:e,edges:n,defaultNodes:r,defaultEdges:a,width:o,height:c,fitView:h,minZoom:u,maxZoom:d,fitViewOptions:g,nodeOrigin:p,nodeExtent:v}));return S.jsx(nC,{value:b,children:S.jsx(TC,{children:y})})}function HA({children:e,nodes:n,edges:r,defaultNodes:a,defaultEdges:o,width:c,height:u,fitView:d,fitViewOptions:g,minZoom:h,maxZoom:p,nodeOrigin:v,nodeExtent:y}){return V.useContext(Vc)?S.jsx(S.Fragment,{children:e}):S.jsx(LA,{initialNodes:n,initialEdges:r,defaultNodes:a,defaultEdges:o,initialWidth:c,initialHeight:u,fitView:d,initialFitViewOptions:g,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:v,nodeExtent:y,children:e})}const BA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function IA({nodes:e,edges:n,defaultNodes:r,defaultEdges:a,className:o,nodeTypes:c,edgeTypes:u,onNodeClick:d,onEdgeClick:g,onInit:h,onMove:p,onMoveStart:v,onMoveEnd:y,onConnect:b,onConnectStart:E,onConnectEnd:x,onClickConnectStart:C,onClickConnectEnd:T,onNodeMouseEnter:k,onNodeMouseMove:_,onNodeMouseLeave:N,onNodeContextMenu:$,onNodeDoubleClick:j,onNodeDragStart:U,onNodeDrag:P,onNodeDragStop:J,onNodesDelete:oe,onEdgesDelete:te,onDelete:Z,onSelectionChange:q,onSelectionDragStart:z,onSelectionDrag:G,onSelectionDragStop:R,onSelectionContextMenu:H,onSelectionStart:B,onSelectionEnd:X,onBeforeDelete:D,connectionMode:O,connectionLineType:M=Li.Bezier,connectionLineStyle:K,connectionLineComponent:Q,connectionLineContainerStyle:se,deleteKeyCode:ue="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:de=no.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:_e=ro()?"Meta":"Control",zoomActivationKeyCode:pe=ro()?"Meta":"Control",snapToGrid:xe,snapGrid:Ce,onlyRenderVisibleElements:Ie=!1,selectNodesOnDrag:Ge,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ri,nodeOrigin:ai=Pb,edgesFocusable:qi,edgesReconnectable:Vi,elementsSelectable:yt=!0,defaultViewport:Cr=mC,minZoom:kn=.5,maxZoom:si=2,translateExtent:Pi=to,preventScrolling:tu=!0,nodeExtent:Ar,defaultMarkerColor:nu="#b1b1b7",zoomOnScroll:iu=!0,zoomOnPinch:Gi=!0,panOnScroll:At=!1,panOnScrollSpeed:xn=.5,panOnScrollMode:Nt=xr.Free,zoomOnDoubleClick:ru=!0,panOnDrag:au=!0,onPaneClick:su,onPaneMouseEnter:Nr,onPaneMouseMove:Or,onPaneMouseLeave:Rr,onPaneScroll:Mn,onPaneContextMenu:kr,paneClickDistance:Yi=0,nodeClickDistance:ou=0,children:To,onReconnect:Ya,onReconnectStart:Xi,onReconnectEnd:lu,onEdgeContextMenu:Co,onEdgeDoubleClick:Ao,onEdgeMouseEnter:No,onEdgeMouseMove:Xa,onEdgeMouseLeave:Ka,reconnectRadius:Oo=10,onNodesChange:Ro,onEdgesChange:_n,noDragClassName:dt="nodrag",noWheelClassName:Et="nowheel",noPanClassName:jn="nopan",fitView:Mr,fitViewOptions:ko,connectOnClick:cu,attributionPosition:Mo,proOptions:Ki,defaultEdgeOptions:Za,elevateNodesOnSelect:oi,elevateEdgesOnSelect:li,disableKeyboardA11y:ci=!1,autoPanOnConnect:ui,autoPanOnNodeDrag:rt,autoPanSpeed:jo,connectionRadius:Do,isValidConnection:Dn,onError:di,style:uu,id:Qa,nodeDragThreshold:zo,connectionDragThreshold:du,viewport:jr,onViewportChange:Dr,width:cn,height:Rt,colorMode:Uo="light",debug:fu,onScroll:zr,ariaLabelConfig:$o,...Ur},hu){const Tt=Qa||"1",Ja=bC(Uo),Lo=V.useCallback($r=>{$r.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),zr?.($r)},[zr]);return S.jsx("div",{"data-testid":"rf__wrapper",...Ur,onScroll:Lo,style:{...uu,...BA},ref:hu,className:ut(["react-flow",o,Ja]),id:Qa,role:"application",children:S.jsxs(HA,{nodes:e,edges:n,width:cn,height:Rt,fitView:Mr,fitViewOptions:ko,minZoom:kn,maxZoom:si,nodeOrigin:ai,nodeExtent:Ar,children:[S.jsx(UA,{onInit:h,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:k,onNodeMouseMove:_,onNodeMouseLeave:N,onNodeContextMenu:$,onNodeDoubleClick:j,nodeTypes:c,edgeTypes:u,connectionLineType:M,connectionLineStyle:K,connectionLineComponent:Q,connectionLineContainerStyle:se,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:de,deleteKeyCode:ue,multiSelectionKeyCode:_e,panActivationKeyCode:Ee,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Ie,defaultViewport:Cr,translateExtent:Pi,minZoom:kn,maxZoom:si,preventScrolling:tu,zoomOnScroll:iu,zoomOnPinch:Gi,zoomOnDoubleClick:ru,panOnScroll:At,panOnScrollSpeed:xn,panOnScrollMode:Nt,panOnDrag:au,onPaneClick:su,onPaneMouseEnter:Nr,onPaneMouseMove:Or,onPaneMouseLeave:Rr,onPaneScroll:Mn,onPaneContextMenu:kr,paneClickDistance:Yi,nodeClickDistance:ou,onSelectionContextMenu:H,onSelectionStart:B,onSelectionEnd:X,onReconnect:Ya,onReconnectStart:Xi,onReconnectEnd:lu,onEdgeContextMenu:Co,onEdgeDoubleClick:Ao,onEdgeMouseEnter:No,onEdgeMouseMove:Xa,onEdgeMouseLeave:Ka,reconnectRadius:Oo,defaultMarkerColor:nu,noDragClassName:dt,noWheelClassName:Et,noPanClassName:jn,rfId:Tt,disableKeyboardA11y:ci,nodeExtent:Ar,viewport:jr,onViewportChange:Dr}),S.jsx(vC,{nodes:e,edges:n,defaultNodes:r,defaultEdges:a,onConnect:b,onConnectStart:E,onConnectEnd:x,onClickConnectStart:C,onClickConnectEnd:T,nodesDraggable:mt,autoPanOnNodeFocus:Ft,nodesConnectable:ln,nodesFocusable:ri,edgesFocusable:qi,edgesReconnectable:Vi,elementsSelectable:yt,elevateNodesOnSelect:oi,elevateEdgesOnSelect:li,minZoom:kn,maxZoom:si,nodeExtent:Ar,onNodesChange:Ro,onEdgesChange:_n,snapToGrid:xe,snapGrid:Ce,connectionMode:O,translateExtent:Pi,connectOnClick:cu,defaultEdgeOptions:Za,fitView:Mr,fitViewOptions:ko,onNodesDelete:oe,onEdgesDelete:te,onDelete:Z,onNodeDragStart:U,onNodeDrag:P,onNodeDragStop:J,onSelectionDrag:G,onSelectionDragStart:z,onSelectionDragStop:R,onMove:p,onMoveStart:v,onMoveEnd:y,noPanClassName:jn,nodeOrigin:ai,rfId:Tt,autoPanOnConnect:ui,autoPanOnNodeDrag:rt,autoPanSpeed:jo,onError:di,connectionRadius:Do,isValidConnection:Dn,selectNodesOnDrag:Ge,nodeDragThreshold:zo,connectionDragThreshold:du,onBeforeDelete:D,debug:fu,ariaLabelConfig:$o}),S.jsx(gC,{onSelectionChange:q}),To,S.jsx(cC,{proOptions:Ki,position:Mo}),S.jsx(lC,{rfId:Tt,disableKeyboardA11y:ci})]})})}var vw=Kb(IA);function qA(e){const[n,r]=V.useState(e),a=V.useCallback(o=>r(c=>Yb(o,c)),[]);return[n,r,a]}function VA(e){const[n,r]=V.useState(e),a=V.useCallback(o=>r(c=>Xb(o,c)),[]);return[n,r,a]}function PA({dimensions:e,lineWidth:n,variant:r,className:a}){return S.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ut(["react-flow__background-pattern",r,a])})}function GA({radius:e,className:n}){return S.jsx("circle",{cx:e,cy:e,r:e,className:ut(["react-flow__background-pattern","dots",n])})}var Bi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Bi||(Bi={}));const YA={[Bi.Dots]:1,[Bi.Lines]:1,[Bi.Cross]:6},XA=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function bw({id:e,variant:n=Bi.Dots,gap:r=20,size:a,lineWidth:o=1,offset:c=0,color:u,bgColor:d,style:g,className:h,patternClassName:p}){const v=V.useRef(null),{transform:y,patternId:b}=De(XA,Fe),E=a||YA[n],x=n===Bi.Dots,C=n===Bi.Cross,T=Array.isArray(r)?r:[r,r],k=[T[0]*y[2]||1,T[1]*y[2]||1],_=E*y[2],N=Array.isArray(c)?c:[c,c],$=C?[_,_]:k,j=[N[0]*y[2]||1+$[0]/2,N[1]*y[2]||1+$[1]/2],U=`${b}${e||""}`;return S.jsxs("svg",{className:ut(["react-flow__background",h]),style:{...g,...Gc,"--xy-background-color-props":d,"--xy-background-pattern-color-props":u},ref:v,"data-testid":"rf__background",children:[S.jsx("pattern",{id:U,x:y[0]%k[0],y:y[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:x?S.jsx(GA,{radius:_/2,className:p}):S.jsx(PA,{dimensions:$,lineWidth:o,variant:n,className:p})}),S.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${U})`})]})}bw.displayName="Background";const ww=V.memo(bw);function KA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:S.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ZA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:S.jsx("path",{d:"M0 0h32v4.2H0z"})})}function QA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:S.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function JA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:S.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function FA(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:S.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ic({children:e,className:n,...r}){return S.jsx("button",{type:"button",className:ut(["react-flow__controls-button",n]),...r,children:e})}const WA=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function xw({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:a=!0,fitViewOptions:o,onZoomIn:c,onZoomOut:u,onFitView:d,onInteractiveChange:g,className:h,children:p,position:v="bottom-left",orientation:y="vertical","aria-label":b}){const E=Je(),{isInteractive:x,minZoomReached:C,maxZoomReached:T,ariaLabelConfig:k}=De(WA,Fe),{zoomIn:_,zoomOut:N,fitView:$}=Uh(),j=()=>{_(),c?.()},U=()=>{N(),u?.()},P=()=>{$(o),d?.()},J=()=>{E.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),g?.(!x)},oe=y==="horizontal"?"horizontal":"vertical";return S.jsxs(Pc,{className:ut(["react-flow__controls",oe,h]),position:v,style:e,"data-testid":"rf__controls","aria-label":b??k["controls.ariaLabel"],children:[n&&S.jsxs(S.Fragment,{children:[S.jsx(ic,{onClick:j,className:"react-flow__controls-zoomin",title:k["controls.zoomIn.ariaLabel"],"aria-label":k["controls.zoomIn.ariaLabel"],disabled:T,children:S.jsx(KA,{})}),S.jsx(ic,{onClick:U,className:"react-flow__controls-zoomout",title:k["controls.zoomOut.ariaLabel"],"aria-label":k["controls.zoomOut.ariaLabel"],disabled:C,children:S.jsx(ZA,{})})]}),r&&S.jsx(ic,{className:"react-flow__controls-fitview",onClick:P,title:k["controls.fitView.ariaLabel"],"aria-label":k["controls.fitView.ariaLabel"],children:S.jsx(QA,{})}),a&&S.jsx(ic,{className:"react-flow__controls-interactive",onClick:J,title:k["controls.interactive.ariaLabel"],"aria-label":k["controls.interactive.ariaLabel"],children:x?S.jsx(FA,{}):S.jsx(JA,{})}),p]})}xw.displayName="Controls";const _w=V.memo(xw);function eN({id:e,x:n,y:r,width:a,height:o,style:c,color:u,strokeColor:d,strokeWidth:g,className:h,borderRadius:p,shapeRendering:v,selected:y,onClick:b}){const{background:E,backgroundColor:x}=c||{},C=u||E||x;return S.jsx("rect",{className:ut(["react-flow__minimap-node",{selected:y},h]),x:n,y:r,rx:p,ry:p,width:a,height:o,style:{fill:C,stroke:d,strokeWidth:g},shapeRendering:v,onClick:b?T=>b(T,e):void 0})}const tN=V.memo(eN),nN=e=>e.nodes.map(n=>n.id),$f=e=>e instanceof Function?e:()=>e;function iN({nodeStrokeColor:e,nodeColor:n,nodeClassName:r="",nodeBorderRadius:a=5,nodeStrokeWidth:o,nodeComponent:c=tN,onClick:u}){const d=De(nN,Fe),g=$f(n),h=$f(e),p=$f(r),v=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return S.jsx(S.Fragment,{children:d.map(y=>S.jsx(aN,{id:y,nodeColorFunc:g,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:a,nodeStrokeWidth:o,NodeComponent:c,onClick:u,shapeRendering:v},y))})}function rN({id:e,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:a,nodeBorderRadius:o,nodeStrokeWidth:c,shapeRendering:u,NodeComponent:d,onClick:g}){const{node:h,x:p,y:v,width:y,height:b}=De(E=>{const{internals:x}=E.nodeLookup.get(e),C=x.userNode,{x:T,y:k}=x.positionAbsolute,{width:_,height:N}=ni(C);return{node:C,x:T,y:k,width:_,height:N}},Fe);return!h||h.hidden||!yb(h)?null:S.jsx(d,{x:p,y:v,width:y,height:b,style:h.style,selected:!!h.selected,className:a(h),color:n(h),borderRadius:o,strokeColor:r(h),strokeWidth:c,shapeRendering:u,onClick:g,id:h.id})}const aN=V.memo(rN);var sN=V.memo(iN);const oN=200,lN=150,cN=e=>!e.hidden,uN=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?pb(wo(e.nodeLookup,{filter:cN}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},dN="react-flow__minimap-desc";function Sw({style:e,className:n,nodeStrokeColor:r,nodeColor:a,nodeClassName:o="",nodeBorderRadius:c=5,nodeStrokeWidth:u,nodeComponent:d,bgColor:g,maskColor:h,maskStrokeColor:p,maskStrokeWidth:v,position:y="bottom-right",onClick:b,onNodeClick:E,pannable:x=!1,zoomable:C=!1,ariaLabel:T,inversePan:k,zoomStep:_=1,offsetScale:N=5}){const $=Je(),j=V.useRef(null),{boundingRect:U,viewBB:P,rfId:J,panZoom:oe,translateExtent:te,flowWidth:Z,flowHeight:q,ariaLabelConfig:z}=De(uN,Fe),G=e?.width??oN,R=e?.height??lN,H=U.width/G,B=U.height/R,X=Math.max(H,B),D=X*G,O=X*R,M=N*X,K=U.x-(D-U.width)/2-M,Q=U.y-(O-U.height)/2-M,se=D+M*2,ue=O+M*2,ce=`${dN}-${J}`,le=V.useRef(0),de=V.useRef();le.current=X,V.useEffect(()=>{if(j.current&&oe)return de.current=kT({domNode:j.current,panZoom:oe,getTransform:()=>$.getState().transform,getViewScale:()=>le.current}),()=>{de.current?.destroy()}},[oe]),V.useEffect(()=>{de.current?.update({translateExtent:te,width:Z,height:q,inversePan:k,pannable:x,zoomStep:_,zoomable:C})},[x,C,k,_,te,Z,q]);const Ee=b?xe=>{const[Ce,Ie]=de.current?.pointer(xe)||[0,0];b(xe,{x:Ce,y:Ie})}:void 0,_e=E?V.useCallback((xe,Ce)=>{const Ie=$.getState().nodeLookup.get(Ce).internals.userNode;E(xe,Ie)},[]):void 0,pe=T??z["minimap.ariaLabel"];return S.jsx(Pc,{position:y,style:{...e,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof v=="number"?v*X:void 0,"--xy-minimap-node-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof u=="number"?u:void 0},className:ut(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:S.jsxs("svg",{width:G,height:R,viewBox:`${K} ${Q} ${se} ${ue}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:j,onClick:Ee,children:[pe&&S.jsx("title",{id:ce,children:pe}),S.jsx(sN,{onClick:_e,nodeColor:a,nodeStrokeColor:r,nodeBorderRadius:c,nodeClassName:o,nodeStrokeWidth:u,nodeComponent:d}),S.jsx("path",{className:"react-flow__minimap-mask",d:`M${K-M},${Q-M}h${se+M*2}v${ue+M*2}h${-se-M*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Sw.displayName="MiniMap";const Ew=V.memo(Sw),fN=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,hN={[Va.Line]:"right",[Va.Handle]:"bottom-right"};function gN({nodeId:e,position:n,variant:r=Va.Handle,className:a,style:o=void 0,children:c,color:u,minWidth:d=10,minHeight:g=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:v=!1,resizeDirection:y,autoScale:b=!0,shouldResize:E,onResizeStart:x,onResize:C,onResizeEnd:T}){const k=Fb(),_=typeof e=="string"?e:k,N=Je(),$=V.useRef(null),j=r===Va.Handle,U=De(V.useCallback(fN(j&&b),[j,b]),Fe),P=V.useRef(null),J=n??hN[r];V.useEffect(()=>{if(!(!$.current||!_))return P.current||(P.current=GT({domNode:$.current,nodeId:_,getStoreItems:()=>{const{nodeLookup:te,transform:Z,snapGrid:q,snapToGrid:z,nodeOrigin:G,domNode:R}=N.getState();return{nodeLookup:te,transform:Z,snapGrid:q,snapToGrid:z,nodeOrigin:G,paneDomNode:R}},onChange:(te,Z)=>{const{triggerNodeChanges:q,nodeLookup:z,parentLookup:G,nodeOrigin:R}=N.getState(),H=[],B={x:te.x,y:te.y},X=z.get(_);if(X&&X.expandParent&&X.parentId){const D=X.origin??R,O=te.width??X.measured.width??0,M=te.height??X.measured.height??0,K={id:X.id,parentId:X.parentId,rect:{width:O,height:M,...vb({x:te.x??X.position.x,y:te.y??X.position.y},{width:O,height:M},X.parentId,z,D)}},Q=zh([K],z,G,R);H.push(...Q),B.x=te.x?Math.max(D[0]*O,te.x):void 0,B.y=te.y?Math.max(D[1]*M,te.y):void 0}if(B.x!==void 0&&B.y!==void 0){const D={id:_,type:"position",position:{...B}};H.push(D)}if(te.width!==void 0&&te.height!==void 0){const O={id:_,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:te.width,height:te.height}};H.push(O)}for(const D of Z){const O={...D,type:"position"};H.push(O)}q(H)},onEnd:({width:te,height:Z})=>{const q={id:_,type:"dimensions",resizing:!1,dimensions:{width:te,height:Z}};N.getState().triggerNodeChanges([q])}})),P.current.update({controlPosition:J,boundaries:{minWidth:d,minHeight:g,maxWidth:h,maxHeight:p},keepAspectRatio:v,resizeDirection:y,onResizeStart:x,onResize:C,onResizeEnd:T,shouldResize:E}),()=>{P.current?.destroy()}},[J,d,g,h,p,v,x,C,T,E]);const oe=J.split("-");return S.jsx("div",{className:ut(["react-flow__resize-control","nodrag",...oe,r,a]),ref:$,style:{...o,scale:U,...u&&{[j?"backgroundColor":"borderColor"]:u}},children:c})}V.memo(gN);const Tw={},{useDebugValue:mN}=Rv,{useSyncExternalStoreWithSelector:pN}=Lb;let B0=!1;const yN=e=>e;function vN(e,n=yN,r){(Tw?"production":void 0)!=="production"&&r&&!B0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),B0=!0);const a=pN(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return mN(a),a}const I0=e=>{(Tw?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof e=="function"?Hb(e):e,r=(a,o)=>vN(n,a,o);return Object.assign(r,n),r},bN=e=>e?I0(e):I0,Lf=e=>({system:"systems",container:"containers",component:"components",person:"people",externalSystem:"externalSystems",shadow:"shadows"})[e]||`${e}s`,Te=bN((e,n)=>({debugMode:!1,metadata:{name:"New C4 Model",version:"1.0",author:"Solution Architect"},currentLevel:"context",viewMode:"edit",currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null,systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],warnings:[],setMetadata:r=>e({metadata:r}),setCurrentLevel:r=>e({currentLevel:r}),setViewMode:r=>e({viewMode:r}),navigateInto:r=>{const a=n();a.getElementById(r)&&e({currentParentId:r,navigationHistory:[...a.navigationHistory,a.currentParentId],selectedElement:null,selectedEdge:null})},navigateUp:()=>{const r=n();if(r.navigationHistory.length===0)return;const a=[...r.navigationHistory],o=a.pop();e({currentParentId:o,navigationHistory:a,selectedElement:null,selectedEdge:null})},navigateToRoot:()=>{e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},navigateTo:r=>{const a=n();if(r===null){e({currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null});return}const c=(u=>{const d=[];let g=a.getElementById(u);for(;g&&g.parentId;)d.unshift(g.parentId),g=a.getElementById(g.parentId);return d})(r);e({currentParentId:r,navigationHistory:[null,...c],selectedElement:null,selectedEdge:null})},getBreadcrumb:()=>{const r=n(),a=[];for(const o of r.navigationHistory)if(o!==null){const c=r.getElementById(o);c&&a.push(c)}if(r.currentParentId!==null){const o=r.getElementById(r.currentParentId);o&&a.push(o)}return a},getChildren:r=>{const o=n().getAllElements();return r===null?o.filter(c=>!c.parentId):o.filter(c=>c.parentId===r)},hasChildren:r=>n().getChildren(r).length>0,getChildCount:r=>n().getChildren(r).length,getElementPath:r=>{const a=n(),o=[];let c=a.getElementById(r);for(;c&&(o.unshift(c.name||c.id),c.parentId);)c=a.getElementById(c.parentId);return o.join(" / ")},setSelectedElement:r=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedElement called:",r?{id:r.id,type:r.type}:null),e({selectedElement:r,selectedEdge:null})},setSelectedEdge:r=>{n().debugMode&&console.log("[Diagrams Debug] setSelectedEdge called:",r?{id:r.id}:null),e({selectedEdge:r,selectedElement:null})},addElement:(r,a)=>{const o=n(),c={id:`${r}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:r,parentId:o.currentParentId,...a},u=Lf(r);return e(d=>({[u]:[...d[u],c]})),c},updateElement:(r,a,o)=>{n().debugMode&&console.log("[Diagrams Debug] updateElement called:",{type:r,id:a,updates:o});const u=Lf(r);e(d=>{const g=d[u].map(v=>v.id===a?{...v,...o}:v),h=g.find(v=>v.id===a),p=d.selectedElement?.id===a?h:d.selectedElement;return d.debugMode&&h&&console.log("[Diagrams Debug] Element updated:",h),{[u]:g,selectedElement:p}})},deleteElement:(r,a)=>{const o=n(),c=Lf(r);let u={};o.currentParentId===a?u={currentParentId:null,navigationHistory:[]}:o.navigationHistory.includes(a)&&(u={currentParentId:null,navigationHistory:[]}),e(d=>({[c]:d[c].filter(g=>g.id!==a),relationships:d.relationships.filter(g=>g.from!==a&&g.to!==a),...u}))},addRelationship:r=>{const a={id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...r};return e(o=>({relationships:[...o.relationships,a]})),a},updateRelationship:(r,a)=>{n().debugMode&&console.log("[Diagrams Debug] updateRelationship called:",{id:r,updates:a}),e(c=>{const u=c.relationships.map(h=>h.id===r?{...h,...a}:h),d=u.find(h=>h.id===r),g=c.selectedEdge?.id===r?d:c.selectedEdge;return c.debugMode&&d&&console.log("[Diagrams Debug] Relationship updated:",d),{relationships:u,selectedEdge:g}})},deleteRelationship:r=>{e(a=>({relationships:a.relationships.filter(o=>o.id!==r)}))},getAllElements:()=>{const r=n();return[...r.systems,...r.containers,...r.components,...r.people,...r.externalSystems,...r.shadows]},getElementById:r=>n().getAllElements().find(o=>o.id===r),clearAll:()=>{e({systems:[],containers:[],components:[],people:[],externalSystems:[],shadows:[],relationships:[],selectedElement:null,selectedEdge:null,warnings:[],currentParentId:null,navigationHistory:[]})},importModel:r=>{e({metadata:r.metadata||n().metadata,systems:r.systems||[],containers:r.containers||[],components:r.components||[],people:r.people||[],externalSystems:r.externalSystems||[],shadows:r.shadows||[],relationships:r.relationships||[],currentParentId:null,navigationHistory:[],selectedElement:null,selectedEdge:null})},exportModel:()=>{const r=n();return{metadata:r.metadata,systems:r.systems,containers:r.containers,components:r.components,people:r.people,externalSystems:r.externalSystems,shadows:r.shadows,relationships:r.relationships}},validateModel:()=>{const r=n(),a=[];r.containers.forEach(d=>{d.parentSystem&&!r.systems.find(g=>g.id===d.parentSystem)&&a.push({type:"warning",message:`Container "${d.name}" references non-existent parent system`,elementId:d.id})}),r.components.forEach(d=>{d.parentContainer&&!r.containers.find(g=>g.id===d.parentContainer)&&a.push({type:"warning",message:`Component "${d.name}" references non-existent parent container`,elementId:d.id})});const o=r.getAllElements(),c=new Set(o.map(d=>d.id));r.relationships.forEach(d=>{c.has(d.from)||a.push({type:"error",message:`Relationship references non-existent source element: ${d.from}`,elementId:d.id}),c.has(d.to)||a.push({type:"error",message:`Relationship references non-existent target element: ${d.to}`,elementId:d.id})});const u=n().getVisibleElements();return u.length>15&&a.push({type:"info",message:`Current view has ${u.length} elements. Consider splitting into multiple diagrams for clarity.`}),e({warnings:a}),a},getVisibleElements:()=>{const r=n(),a=r.currentParentId;return r.getAllElements().filter(c=>a===null?!c.parentId:c.parentId===a)}}));typeof window<"u"&&(window.__ZUSTAND_STORE__=Te);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cw=(...e)=>e.filter((n,r,a)=>!!n&&a.indexOf(n)===r).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=V.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:u,...d},g)=>V.createElement("svg",{ref:g,...xN,width:n,height:n,stroke:e,strokeWidth:a?Number(r)*24/Number(n):r,className:Cw("lucide",o),...d},[...u.map(([h,p])=>V.createElement(h,p)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(e,n)=>{const r=V.forwardRef(({className:a,...o},c)=>V.createElement(_N,{ref:c,iconNode:n,className:Cw(`lucide-${wN(e)}`,a),...o}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Be("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=Be("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=Be("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Be("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Be("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Be("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Be("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Be("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Be("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Be("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Be("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Be("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),LN=e=>{if(!e)return null;let n=0;for(let a=0;a<e.length;a++)n=e.charCodeAt(a)+((n<<5)-n);const r=Math.abs(n)%360;return{bg:`hsl(${r}, 70%, 90%)`,text:`hsl(${r}, 70%, 30%)`,border:`hsl(${r}, 70%, 70%)`}},X0=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},HN=({data:e,selected:n})=>{const a=Te(h=>h.getChildCount)(e.id),o=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(h=>h.name).map(h=>({...h,initials:X0(h.name),colors:LN(X0(h.name))})),c=()=>{const h="px-4 py-3 rounded-lg border-2 min-w-[200px] shadow-lg transition-all";switch(e.type){case"system":return`${h} bg-blue-100 border-blue-500 hover:bg-blue-200`;case"container":return`${h} bg-green-100 border-green-500 hover:bg-green-200`;case"component":return`${h} bg-yellow-100 border-yellow-500 hover:bg-yellow-200`;case"person":return`${h} bg-purple-100 border-purple-500 hover:bg-purple-200`;case"externalSystem":return`${h} bg-gray-100 border-gray-500 hover:bg-gray-200`;default:return`${h} bg-white border-gray-300`}},u=()=>{const h="w-5 h-5";switch(e.type){case"system":return S.jsx(Kc,{className:h});case"container":return S.jsx(Pa,{className:h});case"component":return S.jsx(Xc,{className:h});case"person":return S.jsx(Zc,{className:h});case"externalSystem":return S.jsx(oo,{className:h});default:return S.jsx(Pa,{className:h})}},d=()=>{switch(e.type){case"system":return"Software System";case"container":return"Container";case"component":return"Component";case"person":return"Person";case"externalSystem":return"External System";default:return e.type}},g="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return S.jsxs("div",{className:`${c()} ${n?"ring-4 ring-blue-400":""} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,id:"top",className:g}),S.jsxs("div",{className:"flex items-start gap-2",children:[S.jsx("div",{className:"mt-1",children:u()}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:d()}),S.jsx("div",{className:"font-bold text-gray-900 mb-1",children:e.label||e.name||"Unnamed"}),e.technology&&S.jsxs("div",{className:"text-xs text-gray-600 italic mb-1",children:["[",e.technology,"]"]}),e.description&&S.jsx("div",{className:"text-xs text-gray-700 mt-2",children:e.description})]})]}),o.length>0&&S.jsx("div",{className:"absolute bottom-2 left-2 flex items-center gap-1",children:o.map(h=>S.jsx("div",{className:"px-1.5 py-0.5 rounded text-xs font-medium border",style:{backgroundColor:h.colors.bg,color:h.colors.text,borderColor:h.colors.border},title:`${h.label}: ${h.name}`,children:h.initials},h.label))}),a>0&&S.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center gap-1 text-xs text-gray-500 bg-white/80 px-1.5 py-0.5 rounded",children:[S.jsx(zN,{className:"w-3 h-3"}),S.jsx("span",{children:a})]}),S.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:g}),S.jsx(Lt,{type:"source",position:he.Right,id:"right",className:g}),S.jsx(Lt,{type:"target",position:he.Left,id:"left",className:g})]})},BN=V.memo(HN),IN=({data:e,selected:n})=>{const a=Te(d=>d.getElementById)(e.targetId),o=()=>{const d="w-5 h-5";if(!a)return S.jsx(vc,{className:d});switch(a.type){case"system":return S.jsx(Kc,{className:d});case"container":return S.jsx(Pa,{className:d});case"component":return S.jsx(Xc,{className:d});case"person":return S.jsx(Zc,{className:d});case"externalSystem":return S.jsx(oo,{className:d});default:return S.jsx(vc,{className:d})}},c=()=>a?`Shadow  ${{system:"Software System",container:"Container",component:"Component",person:"Person",externalSystem:"External System"}[a.type]||a.type}`:"Shadow (broken link)",u="!w-4 !h-4 !bg-slate-400 hover:!bg-blue-500 !border-2 !border-white transition-colors duration-150 cursor-crosshair";return S.jsxs("div",{className:`px-4 py-3 rounded-lg border-2 border-dashed min-w-[200px] shadow-lg transition-all
        ${a?"bg-slate-50/50 border-slate-400":"bg-red-50/50 border-red-400"}
        ${n?"ring-4 ring-blue-400":""} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,id:"top",className:u}),S.jsxs("div",{className:"flex items-start gap-2 opacity-70",children:[S.jsx("div",{className:"mt-1",children:o()}),S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:c()}),S.jsx("div",{className:"font-bold text-gray-700 mb-1",children:a?.name||"Select target..."}),a?.technology&&S.jsxs("div",{className:"text-xs text-gray-500 italic mb-1",children:["[",a.technology,"]"]}),a?.description&&S.jsx("div",{className:"text-xs text-gray-600 mt-2",children:a.description})]})]}),S.jsx("div",{className:"absolute top-2 right-2",children:S.jsx(vc,{className:"w-4 h-4 text-slate-400"})}),S.jsx(Lt,{type:"source",position:he.Bottom,id:"bottom",className:u}),S.jsx(Lt,{type:"source",position:he.Right,id:"right",className:u}),S.jsx(Lt,{type:"target",position:he.Left,id:"left",className:u})]})},qN=V.memo(IN),VN=e=>{if(!e)return null;let n=0;for(let a=0;a<e.length;a++)n=e.charCodeAt(a)+((n<<5)-n);const r=Math.abs(n)%360;return{bg:`hsl(${r}, 70%, 90%)`,text:`hsl(${r}, 70%, 30%)`,border:`hsl(${r}, 70%, 70%)`}},K0=e=>{if(!e||typeof e!="string")return null;const n=e.trim().split(/\s+/);return n.length===1?n[0].substring(0,2).toUpperCase():(n[0][0]+n[1][0]).toUpperCase()},PN=({data:e})=>{const n=Te(d=>d.setViewMode),r=Te(d=>d.navigateTo),a=[{label:"PM",name:e.ownerPM},{label:"UX",name:e.ownerUX},{label:"T",name:e.ownerTech}].filter(d=>d.name).map(d=>({...d,initials:K0(d.name),colors:VN(K0(d.name))})),o=()=>{const d="w-4 h-4";switch(e.type){case"system":return S.jsx(Kc,{className:d});case"container":return S.jsx(Pa,{className:d});case"component":return S.jsx(Xc,{className:d});case"person":return S.jsx(Zc,{className:d});case"externalSystem":return S.jsx(oo,{className:d});default:return S.jsx(Pa,{className:d})}},c=()=>{const d="px-3 py-2 rounded border min-w-[150px] text-sm";switch(e.type){case"system":return`${d} bg-blue-50 border-blue-300`;case"container":return`${d} bg-green-50 border-green-300`;case"component":return`${d} bg-yellow-50 border-yellow-300`;case"person":return`${d} bg-purple-50 border-purple-300`;case"externalSystem":return`${d} bg-gray-50 border-gray-300`;default:return`${d} bg-white border-gray-200`}},u=d=>{d.stopPropagation();const g=e.parentId||null;g?r(g):Te.getState().navigateToRoot(),n("edit")};return S.jsxs("div",{className:`${c()} relative`,children:[S.jsx(Lt,{type:"target",position:he.Top,className:"!w-2 !h-2 !bg-gray-400 !border-0"}),S.jsxs("div",{className:"flex items-center gap-2",children:[o(),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("div",{className:"font-medium text-gray-900 truncate",children:e.name||"Unnamed"}),S.jsx("div",{className:"text-xs text-gray-500 capitalize",children:e.type})]}),S.jsx("button",{onClick:u,className:"p-1 hover:bg-white/50 rounded transition-colors",title:"Go to this element in edit mode",children:S.jsx(oo,{className:"w-3 h-3 text-gray-400 hover:text-blue-500"})})]}),a.length>0&&S.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:a.map(d=>S.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium border",style:{backgroundColor:d.colors?.bg||"#f3f4f6",color:d.colors?.text||"#374151",borderColor:d.colors?.border||"#d1d5db"},title:`${d.label}: ${d.name}`,children:[S.jsx("span",{className:"opacity-60",children:d.label}),S.jsx("span",{children:d.initials})]},d.label))}),S.jsx(Lt,{type:"source",position:he.Bottom,className:"!w-2 !h-2 !bg-gray-400 !border-0"})]})},GN=V.memo(PN),YN={treeNode:GN},XN=e=>{const n=new Map,r=[];e.forEach(x=>{x.parentId?(n.has(x.parentId)||n.set(x.parentId,[]),n.get(x.parentId).push(x)):r.push(x)});const a=[],o=[],c=180,u=70,d=40,g=120,h=3,p=x=>{const C=n.get(x)||[];if(C.length===0)return c;const T=Math.min(C.length,h),k=Math.ceil(C.length/T);let _=c;for(let N=0;N<k;N++){let $=0;const j=Math.min(T,C.length-N*T);for(let U=0;U<j;U++){const P=N*T+U,J=p(C[P].id);$+=J,U<j-1&&($+=d)}_=Math.max(_,$)}return _},v=x=>{const C=n.get(x)||[];if(C.length===0)return u;const T=Math.min(C.length,h),k=Math.ceil(C.length/T);let _=0;for(let N=0;N<k;N++){let $=u;for(let j=0;j<T;j++){const U=N*T+j;if(U<C.length){const P=v(C[U].id);$=Math.max($,P)}}_+=$,N<k-1&&(_+=g)}return u+g+_},y=(x,C,T)=>{let k=u;for(let _=0;_<C;_++){const N=T*C+_;if(N<x.length){const $=v(x[N].id);k=Math.max(k,$)}}return k},b=(x,C,T,k=0)=>{a.push({id:x.id,type:"treeNode",position:{x:C,y:T},data:{...x,label:x.name}});const _=n.get(x.id)||[];if(_.length===0)return;const N=Math.min(_.length,h),$=Math.ceil(_.length/N);p(x.id);const j=C+c/2;let U=T+g;for(let P=0;P<$;P++){const J=Math.min(N,_.length-P*N),oe=[];for(let q=0;q<J;q++){const z=P*N+q;oe.push(p(_[z].id))}const te=oe.reduce((q,z)=>q+z,0)+(J-1)*d;let Z=j-te/2;for(let q=0;q<J;q++){const z=P*N+q,G=_[z],R=oe[q],H=Z+(R-c)/2;o.push({id:`edge-${x.id}-${G.id}`,source:x.id,target:G.id,type:"smoothstep",style:{stroke:"#94a3b8",strokeWidth:1}}),b(G,H,U,k+1),Z+=R+d}U+=y(_,N,P)+g}};let E=50;return r.forEach(x=>{const C=p(x.id);b(x,E,50),E+=C+80}),{nodes:a,edges:o}},KN=()=>{const e=Te(g=>g.getAllElements),n=Te(g=>g.setViewMode);Te(g=>g.navigateInto);const r=Te(g=>g.navigateTo),a=Te(g=>g.navigateToRoot),o=e().filter(g=>g.type!=="shadow"),{nodes:c,edges:u}=V.useMemo(()=>XN(o),[o]),d=V.useCallback((g,h)=>{g.stopPropagation();const p=h.data;if(!p)return;const v=p.parentId||null;v?r(v):a(),n("edit")},[r,a,n]);return S.jsx("div",{className:"flex-1 h-full",children:S.jsxs(vw,{nodes:c,edges:u,nodeTypes:YN,onNodeDoubleClick:d,fitView:!0,fitViewOptions:{padding:.2},nodesDraggable:!1,nodesConnectable:!1,className:"bg-gray-50",children:[S.jsx(ww,{color:"#e2e8f0",gap:20}),S.jsx(_w,{}),S.jsx(Ew,{nodeColor:g=>{switch(g.data?.type){case"system":return"#93c5fd";case"container":return"#86efac";case"component":return"#fde047";case"person":return"#c4b5fd";default:return"#e2e8f0"}}})]})})},ZN=()=>{const{addElement:e,currentLevel:n}=Te(),r=Te(p=>p.currentParentId),a=Te(p=>p.getElementById),o=[{type:"system",icon:Kc,label:"Software System",color:"bg-blue-100 hover:bg-blue-200 text-blue-700"},{type:"container",icon:Pa,label:"Container",color:"bg-green-100 hover:bg-green-200 text-green-700"},{type:"component",icon:Xc,label:"Component",color:"bg-yellow-100 hover:bg-yellow-200 text-yellow-700"},{type:"person",icon:Zc,label:"Person",color:"bg-purple-100 hover:bg-purple-200 text-purple-700"},{type:"externalSystem",icon:oo,label:"External System",color:"bg-gray-100 hover:bg-gray-200 text-gray-700"},{type:"shadow",icon:vc,label:"Shadow (Reference)",color:"bg-slate-100 hover:bg-slate-200 text-slate-700 border-dashed"}],u=(()=>{if(r===null)return["system","person","externalSystem","shadow"];const p=a(r);if(!p)return["system","person","externalSystem","shadow"];switch(p.type){case"system":return["container","person","shadow"];case"container":return["component","shadow"];case"component":return["component","shadow"];default:return["shadow"]}})(),d=o.filter(p=>u.includes(p.type)),g=(p,v)=>{p.dataTransfer.setData("application/c4-element-type",v),p.dataTransfer.effectAllowed="move"},h=()=>({context:"Context",container:"Container",component:"Component",code:"Code"})[n]||n;return S.jsxs("aside",{className:"w-64 bg-white border-r border-gray-200 p-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-1",children:"Add Elements"}),S.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:[h()," Level"]}),S.jsx("div",{className:"space-y-2",children:d.length>0?d.map(p=>{const v=p.icon;return S.jsxs("div",{draggable:!0,onDragStart:y=>g(y,p.type),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg border-2 transition-colors cursor-grab active:cursor-grabbing ${p.color}`,children:[S.jsx(v,{className:"w-5 h-5"}),S.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.type)}):S.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No elements can be added at this level"})}),S.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[S.jsx("h3",{className:"text-xs font-semibold text-blue-900 uppercase mb-2",children:"Quick Tips"}),S.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[S.jsx("li",{children:" Drag elements to canvas to add"}),S.jsx("li",{children:" Click elements to edit properties"}),S.jsx("li",{children:" Drag between elements to create relationships"}),S.jsx("li",{children:" Use mouse wheel to zoom"})]})]})]})},QN=()=>{const{selectedElement:e,selectedEdge:n,setSelectedElement:r,setSelectedEdge:a,updateElement:o,deleteElement:c,updateRelationship:u,deleteRelationship:d,getAllElements:g,getElementPath:h}=Te(),[p,v]=V.useState({name:"",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""}),[y,b]=V.useState({description:"",technology:"",arrowDirection:"right",lineStyle:"solid"}),[E,x]=V.useState(""),[C,T]=V.useState(!1),[k,_]=V.useState("");V.useEffect(()=>{if(e&&e.id)try{v({name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags.join(", "):"",ownerPM:e.ownerPM||"",ownerUX:e.ownerUX||"",ownerTech:e.ownerTech||""})}catch(q){console.error("[Diagrams] Error setting formData for element:",q,e),v({name:"Error loading element",description:"",technology:"",tags:"",ownerPM:"",ownerUX:"",ownerTech:""})}},[e?.id]),V.useEffect(()=>{e&&e.type==="shadow"&&_(e.targetId||"")},[e?.id,e?.type]),V.useEffect(()=>{if(n&&n.id)try{b({description:n.description||"",technology:n.technology||"",arrowDirection:n.arrowDirection||"right",lineStyle:n.lineStyle||"solid"})}catch(q){console.error("[Diagrams] Error setting edgeFormData:",q,n),b({description:"Error loading relationship",technology:"",arrowDirection:"right",lineStyle:"solid"})}},[n?.id]),V.useEffect(()=>{const q=()=>T(!1);if(C){const z=setTimeout(()=>{document.addEventListener("click",q)},100);return()=>{clearTimeout(z),document.removeEventListener("click",q)}}},[C]);const N=(q,z)=>{v(G=>({...G,[q]:z}))},$=(q,z)=>{b(G=>({...G,[q]:z}))},j=()=>{if(e){const q={name:p.name,description:p.description,technology:p.technology,tags:p.tags.split(",").map(z=>z.trim()).filter(Boolean),ownerPM:p.ownerPM,ownerUX:p.ownerUX,ownerTech:p.ownerTech};o(e.type,e.id,q)}},U=()=>{n&&u(n.id,y)},P=(q,z)=>{const G={...y,[q]:z};b(G),n&&u(n.id,G)},J=()=>{e&&window.confirm("Are you sure you want to delete this element?")&&(c(e.type,e.id),r(null))},oe=()=>{n&&window.confirm("Are you sure you want to delete this relationship?")&&(d(n.id),a(null))},te=g().filter(q=>q.type!=="shadow"),Z=E?te.filter(q=>h(q.id).toLowerCase().includes(E.toLowerCase())):te;return n&&!e?S.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Relationship Properties"}),S.jsx("button",{onClick:()=>a(null),className:"p-1 hover:bg-gray-100 rounded",children:S.jsx(Y0,{className:"w-4 h-4"})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:n.id})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"edge-description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),S.jsx("input",{id:"edge-description",type:"text",value:y.description,onChange:q=>$("description",q.target.value),onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Makes API calls to"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"edge-technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology/Protocol"}),S.jsx("input",{id:"edge-technology",type:"text",value:y.technology,onChange:q=>$("technology",q.target.value),onBlur:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., REST/HTTPS, gRPC"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"arrow-direction",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Arrow Direction"}),S.jsxs("select",{id:"arrow-direction",value:y.arrowDirection,onChange:q=>P("arrowDirection",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"right",children:"Right "}),S.jsx("option",{value:"left",children:"Left "}),S.jsx("option",{value:"both",children:"Both "}),S.jsx("option",{value:"none",children:"None "})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"line-style",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Line Style"}),S.jsxs("select",{id:"line-style",value:y.lineStyle,onChange:q=>P("lineStyle",q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[S.jsx("option",{value:"solid",children:"Solid "}),S.jsx("option",{value:"dashed",children:"Dashed   "}),S.jsx("option",{value:"dotted",children:"Dotted    "})]})]}),S.jsx("div",{className:"pt-4 border-t border-gray-200",children:S.jsxs("button",{onClick:oe,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[S.jsx(ch,{className:"w-4 h-4"}),"Delete Relationship"]})})]})]}):e?!e.id||!e.type?(console.error("[Diagrams] Invalid selectedElement:",e),S.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:S.jsxs("div",{className:"text-center text-red-500 mt-8",children:[S.jsx("p",{className:"text-sm",children:"Error: Invalid element data"}),S.jsx("button",{onClick:()=>r(null),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Clear Selection"})]})})):S.jsxs("aside",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("h2",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Properties"}),S.jsx("button",{onClick:()=>r(null),className:"p-1 hover:bg-gray-100 rounded",children:S.jsx(Y0,{className:"w-4 h-4"})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Type"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:e.type||"Unknown"})]}),e.type==="shadow"&&S.jsxs("div",{className:"mb-4",children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Target Element"}),k&&S.jsxs("div",{className:"mb-2 px-3 py-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[S.jsx("div",{className:"font-medium text-blue-900",children:g().find(q=>q.id===k)?.name||"Unknown"}),S.jsx("div",{className:"text-xs text-blue-600",children:h(k)})]}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"text",value:E,onChange:q=>{x(q.target.value),T(!0)},onFocus:()=>T(!0),placeholder:"Search elements by path...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),C&&S.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-48 overflow-y-auto",children:Z.length===0?S.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No elements found"}):Z.slice(0,20).map(q=>S.jsxs("div",{onClick:()=>{_(q.id),x(""),T(!1),o("shadow",e.id,{targetId:q.id})},className:`px-3 py-2 cursor-pointer hover:bg-gray-100 ${q.id===k?"bg-blue-50":""}`,children:[S.jsx("div",{className:"text-sm font-medium",children:q.name||q.id}),S.jsx("div",{className:"text-xs text-gray-500",children:h(q.id)})]},q.id))})]}),S.jsx("div",{className:"mt-2",children:S.jsx("input",{type:"text",value:k,onChange:q=>{_(q.target.value),o("shadow",e.id,{targetId:q.target.value})},placeholder:"Or paste element ID directly...",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-xs font-mono focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"ID"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-xs text-gray-600 font-mono break-all",children:e.id})]}),e.type!=="shadow"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Name"}),S.jsx("input",{id:"name",type:"text",value:p.name,onChange:q=>N("name",q.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter element name"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"technology",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Technology"}),S.jsx("input",{id:"technology",type:"text",value:p.technology,onChange:q=>N("technology",q.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Spring Boot, React, PostgreSQL"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"description",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Description"}),S.jsx("textarea",{id:"description",value:p.description,onChange:q=>N("description",q.target.value),onBlur:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the element's purpose and responsibilities"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tags",className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Tags"}),S.jsx("input",{id:"tags",type:"text",value:p.tags,onChange:q=>N("tags",q.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"tag1, tag2, tag3"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Comma-separated values"})]}),S.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-2",children:"Owners"}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{htmlFor:"ownerPM",className:"block text-xs text-gray-500 mb-1",children:"PM"}),S.jsx("input",{id:"ownerPM",type:"text",value:p.ownerPM,onChange:q=>N("ownerPM",q.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Product Manager name"})]}),S.jsxs("div",{className:"mb-2",children:[S.jsx("label",{htmlFor:"ownerUX",className:"block text-xs text-gray-500 mb-1",children:"UX"}),S.jsx("input",{id:"ownerUX",type:"text",value:p.ownerUX,onChange:q=>N("ownerUX",q.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"UX Designer name"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"ownerTech",className:"block text-xs text-gray-500 mb-1",children:"Tech"}),S.jsx("input",{id:"ownerTech",type:"text",value:p.ownerTech,onChange:q=>N("ownerTech",q.target.value),onBlur:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tech Lead name"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-semibold text-gray-600 uppercase mb-1",children:"Position"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-xs text-gray-500",children:"X:"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.x||0)})]}),S.jsxs("div",{children:[S.jsx("span",{className:"text-xs text-gray-500",children:"Y:"}),S.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:Math.round(e.position?.y||0)})]})]})]}),S.jsx("div",{className:"pt-4 border-t border-gray-200",children:S.jsxs("button",{onClick:J,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[S.jsx(ch,{className:"w-4 h-4"}),"Delete Element"]})})]})]}):S.jsx("aside",{className:"w-80 bg-white border-l border-gray-200 p-4",children:S.jsx("div",{className:"text-center text-gray-500 mt-8",children:S.jsx("p",{className:"text-sm",children:"Select an element to view and edit its properties"})})})},JN=()=>{const e=Te(u=>u.getBreadcrumb),n=Te(u=>u.navigateToRoot),r=Te(u=>u.navigateTo),a=Te(u=>u.currentParentId),o=Te(u=>u.metadata),c=e();return S.jsxs("nav",{className:"flex items-center gap-1 text-sm",children:[S.jsxs("button",{onClick:n,className:`flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-200 transition-colors ${a===null?"text-blue-600 font-medium":"text-gray-600"}`,title:"Go to root view",children:[S.jsx(jN,{className:"w-4 h-4"}),S.jsx("span",{children:o.name||"Model"})]}),c.map((u,d)=>S.jsxs("div",{className:"flex items-center",children:[S.jsx(TN,{className:"w-4 h-4 text-gray-400"}),S.jsx("button",{onClick:()=>r(u.id),className:`px-2 py-1 rounded hover:bg-gray-200 transition-colors ${d===c.length-1?"text-blue-600 font-medium":"text-gray-600"}`,children:u.name})]},u.id))]})};function FN(e,n){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),a=r.createElement("base"),o=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(o),n&&(a.href=n),o.href=e,o.href}const WN=(()=>{let e=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${n()}${e}`)})();function Ii(e){const n=[];for(let r=0,a=e.length;r<a;r++)n.push(e[r]);return n}let va=null;function Aw(e={}){return va||(e.includeStyleProperties?(va=e.includeStyleProperties,va):(va=Ii(window.getComputedStyle(document.documentElement)),va))}function Rc(e,n){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(n);return a?parseFloat(a.replace("px","")):0}function eO(e){const n=Rc(e,"border-left-width"),r=Rc(e,"border-right-width");return e.clientWidth+n+r}function tO(e){const n=Rc(e,"border-top-width"),r=Rc(e,"border-bottom-width");return e.clientHeight+n+r}function Nw(e,n={}){const r=n.width||eO(e),a=n.height||tO(e);return{width:r,height:a}}function nO(){let e,n;try{n=process}catch{}const r=n&&n.env?n.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Xt=16384;function iO(e){(e.width>Xt||e.height>Xt)&&(e.width>Xt&&e.height>Xt?e.width>e.height?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt):e.width>Xt?(e.height*=Xt/e.width,e.width=Xt):(e.width*=Xt/e.height,e.height=Xt))}function kc(e){return new Promise((n,r)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>n(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function rO(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(n=>`data:image/svg+xml;charset=utf-8,${n}`)}async function aO(e,n,r){const a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg"),c=document.createElementNS(a,"foreignObject");return o.setAttribute("width",`${n}`),o.setAttribute("height",`${r}`),o.setAttribute("viewBox",`0 0 ${n} ${r}`),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("externalResourcesRequired","true"),o.appendChild(c),c.appendChild(e),rO(o)}const Ht=(e,n)=>{if(e instanceof n)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===n.name||Ht(r,n)};function sO(e){const n=e.getPropertyValue("content");return`${e.cssText} content: '${n.replace(/'|"/g,"")}';`}function oO(e,n){return Aw(n).map(r=>{const a=e.getPropertyValue(r),o=e.getPropertyPriority(r);return`${r}: ${a}${o?" !important":""};`}).join(" ")}function lO(e,n,r,a){const o=`.${e}:${n}`,c=r.cssText?sO(r):oO(r,a);return document.createTextNode(`${o}{${c}}`)}function Z0(e,n,r,a){const o=window.getComputedStyle(e,r),c=o.getPropertyValue("content");if(c===""||c==="none")return;const u=WN();try{n.className=`${n.className} ${u}`}catch{return}const d=document.createElement("style");d.appendChild(lO(u,r,o,a)),n.appendChild(d)}function cO(e,n,r){Z0(e,n,":before",r),Z0(e,n,":after",r)}const Q0="application/font-woff",J0="image/jpeg",uO={woff:Q0,woff2:Q0,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:J0,jpeg:J0,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function dO(e){const n=/\.([^./]*?)$/g.exec(e);return n?n[1]:""}function Lh(e){const n=dO(e).toLowerCase();return uO[n]||""}function fO(e){return e.split(/,/)[1]}function uh(e){return e.search(/^(data:)/)!==-1}function hO(e,n){return`data:${n};base64,${e}`}async function Ow(e,n,r){const a=await fetch(e,n);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const o=await a.blob();return new Promise((c,u)=>{const d=new FileReader;d.onerror=u,d.onloadend=()=>{try{c(r({res:a,result:d.result}))}catch(g){u(g)}},d.readAsDataURL(o)})}const If={};function gO(e,n,r){let a=e.replace(/\?.*/,"");return r&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),n?`[${n}]${a}`:a}async function Hh(e,n,r){const a=gO(e,n,r.includeQueryParams);if(If[a]!=null)return If[a];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let o;try{const c=await Ow(e,r.fetchRequestInit,({res:u,result:d})=>(n||(n=u.headers.get("Content-Type")||""),fO(d)));o=hO(c,n)}catch(c){o=r.imagePlaceholder||"";let u=`Failed to fetch resource: ${e}`;c&&(u=typeof c=="string"?c:c.message),u&&console.warn(u)}return If[a]=o,o}async function mO(e){const n=e.toDataURL();return n==="data:,"?e.cloneNode(!1):kc(n)}async function pO(e,n){if(e.currentSrc){const c=document.createElement("canvas"),u=c.getContext("2d");c.width=e.clientWidth,c.height=e.clientHeight,u?.drawImage(e,0,0,c.width,c.height);const d=c.toDataURL();return kc(d)}const r=e.poster,a=Lh(r),o=await Hh(r,a,n);return kc(o)}async function yO(e,n){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await Qc(e.contentDocument.body,n,!0)}catch{}return e.cloneNode(!1)}async function vO(e,n){return Ht(e,HTMLCanvasElement)?mO(e):Ht(e,HTMLVideoElement)?pO(e,n):Ht(e,HTMLIFrameElement)?yO(e,n):e.cloneNode(Rw(e))}const bO=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Rw=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function wO(e,n,r){var a,o;if(Rw(n))return n;let c=[];return bO(e)&&e.assignedNodes?c=Ii(e.assignedNodes()):Ht(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?c=Ii(e.contentDocument.body.childNodes):c=Ii(((o=e.shadowRoot)!==null&&o!==void 0?o:e).childNodes),c.length===0||Ht(e,HTMLVideoElement)||await c.reduce((u,d)=>u.then(()=>Qc(d,r)).then(g=>{g&&n.appendChild(g)}),Promise.resolve()),n}function xO(e,n,r){const a=n.style;if(!a)return;const o=window.getComputedStyle(e);o.cssText?(a.cssText=o.cssText,a.transformOrigin=o.transformOrigin):Aw(r).forEach(c=>{let u=o.getPropertyValue(c);c==="font-size"&&u.endsWith("px")&&(u=`${Math.floor(parseFloat(u.substring(0,u.length-2)))-.1}px`),Ht(e,HTMLIFrameElement)&&c==="display"&&u==="inline"&&(u="block"),c==="d"&&n.getAttribute("d")&&(u=`path(${n.getAttribute("d")})`),a.setProperty(c,u,o.getPropertyPriority(c))})}function _O(e,n){Ht(e,HTMLTextAreaElement)&&(n.innerHTML=e.value),Ht(e,HTMLInputElement)&&n.setAttribute("value",e.value)}function SO(e,n){if(Ht(e,HTMLSelectElement)){const r=n,a=Array.from(r.children).find(o=>e.value===o.getAttribute("value"));a&&a.setAttribute("selected","")}}function EO(e,n,r){return Ht(n,Element)&&(xO(e,n,r),cO(e,n,r),_O(e,n),SO(e,n)),n}async function TO(e,n){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const a={};for(let c=0;c<r.length;c++){const d=r[c].getAttribute("xlink:href");if(d){const g=e.querySelector(d),h=document.querySelector(d);!g&&h&&!a[d]&&(a[d]=await Qc(h,n,!0))}}const o=Object.values(a);if(o.length){const c="http://www.w3.org/1999/xhtml",u=document.createElementNS(c,"svg");u.setAttribute("xmlns",c),u.style.position="absolute",u.style.width="0",u.style.height="0",u.style.overflow="hidden",u.style.display="none";const d=document.createElementNS(c,"defs");u.appendChild(d);for(let g=0;g<o.length;g++)d.appendChild(o[g]);e.appendChild(u)}return e}async function Qc(e,n,r){return!r&&n.filter&&!n.filter(e)?null:Promise.resolve(e).then(a=>vO(a,n)).then(a=>wO(e,a,n)).then(a=>EO(e,a,n)).then(a=>TO(a,n))}const kw=/url\((['"]?)([^'"]+?)\1\)/g,CO=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,AO=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function NO(e){const n=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${n})(['"]?\\))`,"g")}function OO(e){const n=[];return e.replace(kw,(r,a,o)=>(n.push(o),r)),n.filter(r=>!uh(r))}async function RO(e,n,r,a,o){try{const c=r?FN(n,r):n,u=Lh(n);let d;return o||(d=await Hh(c,u,a)),e.replace(NO(n),`$1${d}$3`)}catch{}return e}function kO(e,{preferredFontFormat:n}){return n?e.replace(AO,r=>{for(;;){const[a,,o]=CO.exec(r)||[];if(!o)return"";if(o===n)return`src: ${a};`}}):e}function Mw(e){return e.search(kw)!==-1}async function jw(e,n,r){if(!Mw(e))return e;const a=kO(e,r);return OO(a).reduce((c,u)=>c.then(d=>RO(d,u,n,r)),Promise.resolve(a))}async function ba(e,n,r){var a;const o=(a=n.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(o){const c=await jw(o,null,r);return n.style.setProperty(e,c,n.style.getPropertyPriority(e)),!0}return!1}async function MO(e,n){await ba("background",e,n)||await ba("background-image",e,n),await ba("mask",e,n)||await ba("-webkit-mask",e,n)||await ba("mask-image",e,n)||await ba("-webkit-mask-image",e,n)}async function jO(e,n){const r=Ht(e,HTMLImageElement);if(!(r&&!uh(e.src))&&!(Ht(e,SVGImageElement)&&!uh(e.href.baseVal)))return;const a=r?e.src:e.href.baseVal,o=await Hh(a,Lh(a),n);await new Promise((c,u)=>{e.onload=c,e.onerror=n.onImageErrorHandler?(...g)=>{try{c(n.onImageErrorHandler(...g))}catch(h){u(h)}}:u;const d=e;d.decode&&(d.decode=c),d.loading==="lazy"&&(d.loading="eager"),r?(e.srcset="",e.src=o):e.href.baseVal=o})}async function DO(e,n){const a=Ii(e.childNodes).map(o=>Dw(o,n));await Promise.all(a).then(()=>e)}async function Dw(e,n){Ht(e,Element)&&(await MO(e,n),await jO(e,n),await DO(e,n))}function zO(e,n){const{style:r}=e;n.backgroundColor&&(r.backgroundColor=n.backgroundColor),n.width&&(r.width=`${n.width}px`),n.height&&(r.height=`${n.height}px`);const a=n.style;return a!=null&&Object.keys(a).forEach(o=>{r[o]=a[o]}),e}const F0={};async function W0(e){let n=F0[e];if(n!=null)return n;const a=await(await fetch(e)).text();return n={url:e,cssText:a},F0[e]=n,n}async function ev(e,n){let r=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,c=(r.match(/url\([^)]+\)/g)||[]).map(async u=>{let d=u.replace(a,"$1");return d.startsWith("https://")||(d=new URL(d,e.url).href),Ow(d,n.fetchRequestInit,({result:g})=>(r=r.replace(u,`url(${g})`),[u,g]))});return Promise.all(c).then(()=>r)}function tv(e){if(e==null)return[];const n=[],r=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(r,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const g=o.exec(a);if(g===null)break;n.push(g[0])}a=a.replace(o,"");const c=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,u="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",d=new RegExp(u,"gi");for(;;){let g=c.exec(a);if(g===null){if(g=d.exec(a),g===null)break;c.lastIndex=d.lastIndex}else d.lastIndex=c.lastIndex;n.push(g[0])}return n}async function UO(e,n){const r=[],a=[];return e.forEach(o=>{if("cssRules"in o)try{Ii(o.cssRules||[]).forEach((c,u)=>{if(c.type===CSSRule.IMPORT_RULE){let d=u+1;const g=c.href,h=W0(g).then(p=>ev(p,n)).then(p=>tv(p).forEach(v=>{try{o.insertRule(v,v.startsWith("@import")?d+=1:o.cssRules.length)}catch(y){console.error("Error inserting rule from remote css",{rule:v,error:y})}})).catch(p=>{console.error("Error loading remote css",p.toString())});a.push(h)}})}catch(c){const u=e.find(d=>d.href==null)||document.styleSheets[0];o.href!=null&&a.push(W0(o.href).then(d=>ev(d,n)).then(d=>tv(d).forEach(g=>{u.insertRule(g,u.cssRules.length)})).catch(d=>{console.error("Error loading remote stylesheet",d)})),console.error("Error inlining remote css file",c)}}),Promise.all(a).then(()=>(e.forEach(o=>{if("cssRules"in o)try{Ii(o.cssRules||[]).forEach(c=>{r.push(c)})}catch(c){console.error(`Error while reading CSS rules from ${o.href}`,c)}}),r))}function $O(e){return e.filter(n=>n.type===CSSRule.FONT_FACE_RULE).filter(n=>Mw(n.style.getPropertyValue("src")))}async function LO(e,n){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=Ii(e.ownerDocument.styleSheets),a=await UO(r,n);return $O(a)}function zw(e){return e.trim().replace(/["']/g,"")}function HO(e){const n=new Set;function r(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(c=>{n.add(zw(c))}),Array.from(a.children).forEach(c=>{c instanceof HTMLElement&&r(c)})}return r(e),n}async function BO(e,n){const r=await LO(e,n),a=HO(e);return(await Promise.all(r.filter(c=>a.has(zw(c.style.fontFamily))).map(c=>{const u=c.parentStyleSheet?c.parentStyleSheet.href:null;return jw(c.cssText,u,n)}))).join(`
`)}async function IO(e,n){const r=n.fontEmbedCSS!=null?n.fontEmbedCSS:n.skipFonts?null:await BO(e,n);if(r){const a=document.createElement("style"),o=document.createTextNode(r);a.appendChild(o),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function Uw(e,n={}){const{width:r,height:a}=Nw(e,n),o=await Qc(e,n,!0);return await IO(o,n),await Dw(o,n),zO(o,n),await aO(o,r,a)}async function qO(e,n={}){const{width:r,height:a}=Nw(e,n),o=await Uw(e,n),c=await kc(o),u=document.createElement("canvas"),d=u.getContext("2d"),g=n.pixelRatio||nO(),h=n.canvasWidth||r,p=n.canvasHeight||a;return u.width=h*g,u.height=p*g,n.skipAutoScale||iO(u),u.style.width=`${h}`,u.style.height=`${p}`,n.backgroundColor&&(d.fillStyle=n.backgroundColor,d.fillRect(0,0,u.width,u.height)),d.drawImage(c,0,0,u.width,u.height),u}async function VO(e,n={}){return(await qO(e,n)).toDataURL()}var bc={exports:{}},PO=bc.exports,nv;function GO(){return nv||(nv=1,(function(e,n){(function(r,a){a()})(PO,function(){function r(h,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function a(h,p,v){var y=new XMLHttpRequest;y.open("GET",h),y.responseType="blob",y.onload=function(){g(y.response,p,v)},y.onerror=function(){console.error("could not download file")},y.send()}function o(h){var p=new XMLHttpRequest;p.open("HEAD",h,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Kl=="object"&&Kl.global===Kl?Kl:void 0,d=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(h,p,v){var y=u.URL||u.webkitURL,b=document.createElement("a");p=p||h.name||"download",b.download=p,b.rel="noopener",typeof h=="string"?(b.href=h,b.origin===location.origin?c(b):o(b.href)?a(h,p,v):c(b,b.target="_blank")):(b.href=y.createObjectURL(h),setTimeout(function(){y.revokeObjectURL(b.href)},4e4),setTimeout(function(){c(b)},0))}:"msSaveOrOpenBlob"in navigator?function(h,p,v){if(p=p||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,v),p);else if(o(h))a(h,p,v);else{var y=document.createElement("a");y.href=h,y.target="_blank",setTimeout(function(){c(y)})}}:function(h,p,v,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof h=="string")return a(h,p,v);var b=h.type==="application/octet-stream",E=/constructor/i.test(u.HTMLElement)||u.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||b&&E||d)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var _=C.result;_=x?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=_:location=_,y=null},C.readAsDataURL(h)}else{var T=u.URL||u.webkitURL,k=T.createObjectURL(h);y?y.location=k:location.href=k,y=null,setTimeout(function(){T.revokeObjectURL(k)},4e4)}});u.saveAs=g.saveAs=g,e.exports=g})})(bc)),bc.exports}var So=GO();const YO=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const r=await VO(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),a=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.png`;So.saveAs(r,a)}catch(r){console.error("Error exporting PNG:",r),alert("Failed to export PNG: "+r.message)}},XO=async e=>{const n=document.querySelector(".react-flow");if(!n){alert("Canvas not found");return}try{const r=await Uw(n,{backgroundColor:"#f9fafb",filter:o=>!o.classList?.contains("react-flow__controls")&&!o.classList?.contains("react-flow__minimap")}),a=`${(e?.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.svg`;So.saveAs(r,a)}catch(r){console.error("Error exporting SVG:",r),alert("Failed to export SVG: "+r.message)}},KO=e=>{let n="C4Context";e.components?.length>0?n="C4Component":e.containers?.length>0&&(n="C4Container");let r=`${n}
`;return r+=`  title ${e.metadata.name}

`,e.people?.forEach(a=>{const o=a.description||"";r+=`  Person(${gt(a.id)}, "${a.name}", "${o}")
`}),e.people?.length>0&&(r+=`
`),e.systems?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?r+=`  System(${gt(a.id)}, "${a.name}", "${o}", "${c}")
`:r+=`  System(${gt(a.id)}, "${a.name}", "${o}")
`}),e.systems?.length>0&&(r+=`
`),e.externalSystems?.forEach(a=>{const o=a.description||"";r+=`  System_Ext(${gt(a.id)}, "${a.name}", "${o}")
`}),e.externalSystems?.length>0&&(r+=`
`),e.containers?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?r+=`  Container(${gt(a.id)}, "${a.name}", "${c}", "${o}")
`:r+=`  Container(${gt(a.id)}, "${a.name}", "${o}")
`}),e.containers?.length>0&&(r+=`
`),e.components?.forEach(a=>{const o=a.description||"",c=a.technology||"";c?r+=`  Component(${gt(a.id)}, "${a.name}", "${c}", "${o}")
`:r+=`  Component(${gt(a.id)}, "${a.name}", "${o}")
`}),e.components?.length>0&&(r+=`
`),e.relationships?.forEach(a=>{const o=a.description||"uses",c=a.technology||"",u=a.arrowDirection==="left"?"Rel_Back":"Rel";c?r+=`  ${u}(${gt(a.from)}, ${gt(a.to)}, "${o}", "${c}")
`:r+=`  ${u}(${gt(a.from)}, ${gt(a.to)}, "${o}")
`}),r},$w=e=>{let n=`@startuml
`;return n+=`!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

`,n+=`title ${e.metadata.name}

`,e.people?.forEach(r=>{n+=`Person(${gt(r.id)}, "${r.name}", "${r.description||""}")
`}),e.systems?.forEach(r=>{n+=`System(${gt(r.id)}, "${r.name}", "${r.description||""}")
`}),e.externalSystems?.forEach(r=>{n+=`System_Ext(${gt(r.id)}, "${r.name}", "${r.description||""}")
`}),e.containers?.forEach(r=>{const a=r.technology?`, "${r.technology}"`:"";n+=`Container(${gt(r.id)}, "${r.name}", "${r.description||""}"${a})
`}),e.components?.forEach(r=>{const a=r.technology?`, "${r.technology}"`:"";n+=`Component(${gt(r.id)}, "${r.name}", "${r.description||""}"${a})
`}),n+=`
`,e.relationships?.forEach(r=>{const a=r.description||"uses",o=r.technology?`, "${r.technology}"`:"";n+=`Rel(${gt(r.from)}, ${gt(r.to)}, "${a}"${o})
`}),n+=`
@enduml`,n},Lw=e=>{let n=`# ${e.metadata.name}

`;return n+=`**Version:** ${e.metadata.version}
`,n+=`**Author:** ${e.metadata.author}

`,n+=`---

`,e.systems?.length>0&&(n+=`## Software Systems

`,e.systems.forEach(r=>{n+=`### ${r.name}

`,r.description&&(n+=`${r.description}

`),r.technology&&(n+=`**Technology:** ${r.technology}

`);const a=e.containers?.filter(o=>o.parentSystem===r.id)||[];a.length>0&&(n+=`#### Containers

`,a.forEach(o=>{n+=`- **${o.name}**`,o.technology&&(n+=` (${o.technology})`),o.description&&(n+=`: ${o.description}`),n+=`
`}),n+=`
`)})),e.externalSystems?.length>0&&(n+=`## External Systems

`,e.externalSystems.forEach(r=>{n+=`### ${r.name}

`,r.description&&(n+=`${r.description}

`)})),e.people?.length>0&&(n+=`## People / Actors

`,e.people.forEach(r=>{n+=`### ${r.name}

`,r.description&&(n+=`${r.description}

`)})),e.relationships?.length>0&&(n+=`## Relationships

`,n+=`| From | To | Description | Technology |
`,n+=`|------|-----|-------------|------------|
`,e.relationships.forEach(r=>{const a=iv(e,r.from),o=iv(e,r.to),c=a?.name||r.from,u=o?.name||r.to;n+=`| ${c} | ${u} | ${r.description||"-"} | ${r.technology||"-"} |
`}),n+=`
`),n},ZO=e=>{const n=Lw(e),r=$w(e),a=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e.metadata.name} - C4 Model</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        h1, h2, h3, h4 { color: #1e293b; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: left;
        }
        th { background-color: #f1f5f9; font-weight: 600; }
        pre {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
        }
        code {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }
        .metadata {
            background-color: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="metadata">
        <h1>${e.metadata.name}</h1>
        <p><strong>Version:</strong> ${e.metadata.version}</p>
        <p><strong>Author:</strong> ${e.metadata.author}</p>
    </div>

    ${QO(n)}

    <h2>PlantUML Diagram Code</h2>
    <pre><code>${r}</code></pre>

    <h2>JSON Model</h2>
    <pre><code>${JSON.stringify(e,null,2)}</code></pre>
</body>
</html>`,o=new Blob([a],{type:"text/html"});So.saveAs(o,`${(e.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.html`)},gt=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),iv=(e,n)=>[...e.systems||[],...e.containers||[],...e.components||[],...e.people||[],...e.externalSystems||[]].find(a=>a.id===n),QO=e=>e.split(`
`).map(n=>n.startsWith("# ")?`<h1>${n.substring(2)}</h1>`:n.startsWith("## ")?`<h2>${n.substring(3)}</h2>`:n.startsWith("### ")?`<h3>${n.substring(4)}</h3>`:n.startsWith("#### ")?`<h4>${n.substring(5)}</h4>`:n.startsWith("- ")?`<li>${n.substring(2)}</li>`:n.startsWith("**")&&n.endsWith("**")?`<p><strong>${n.substring(2,n.length-2)}</strong></p>`:n.trim()==="---"?"<hr>":n.trim()===""?"<br>":`<p>${n}</p>`).join(`
`),dr=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):"",JO=e=>{const n="rounded=1;whiteSpace=wrap;html=1;verticalAlign=top;align=center;spacingTop=8;";switch(e){case"person":return`${n}fillColor=#e1d5e7;strokeColor=#9673a6;`;case"system":return`${n}fillColor=#dae8fc;strokeColor=#6c8ebf;`;case"externalSystem":return`${n}fillColor=#f5f5f5;strokeColor=#666666;dashed=1;`;case"container":return`${n}fillColor=#d5e8d4;strokeColor=#82b366;`;case"component":return`${n}fillColor=#fff2cc;strokeColor=#d6b656;`;default:return`${n}fillColor=#ffffff;strokeColor=#000000;`}},FO=e=>{let n="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;";return e.lineStyle==="dashed"?n+="dashed=1;dashPattern=8 8;":e.lineStyle==="dotted"&&(n+="dashed=1;dashPattern=2 2;"),e.arrowDirection==="left"?n+="startArrow=classic;endArrow=none;":e.arrowDirection==="both"?n+="startArrow=classic;endArrow=classic;":n+="startArrow=none;endArrow=classic;",n+="strokeColor=#666666;",n},WO=e=>{const n=new Date().toISOString(),r=`diagram-${Date.now()}`,a=[...e.people||[],...e.systems||[],...e.externalSystems||[],...e.containers||[],...e.components||[]];let o=1/0,c=1/0,u=-1/0,d=-1/0;a.forEach(C=>{const T=C.position?.x||0,k=C.position?.y||0;o=Math.min(o,T),c=Math.min(c,k),u=Math.max(u,T+220),d=Math.max(d,k+120)});const g=o<50?50-o:0,h=c<50?50-c:0,p=Math.max(1100,u+g+100),v=Math.max(850,d+h+100);let y=`<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="Diagrams" modified="${n}" agent="Diagrams C4 Modelling Tool" version="1.0" type="device">
  <diagram name="${dr(e.metadata?.name||"C4 Diagram")}" id="${r}">
    <mxGraphModel dx="0" dy="0" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="${p}" pageHeight="${v}" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
`;const b=new Map;let E=2;const x=C=>{switch(C){case"person":return"[Person]";case"system":return"[Software System]";case"externalSystem":return"[External System]";case"container":return"[Container]";case"component":return"[Component]";default:return""}};return a.forEach(C=>{const T=`cell-${E++}`;b.set(C.id,T);const k=(C.position?.x||0)+g,_=(C.position?.y||0)+h,N=220,$=120,j=JO(C.type),U=x(C.type),P=C.technology?`[${dr(C.technology)}]`:"",J=C.description?`&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;${dr(C.description)}&lt;/font&gt;`:"",oe=`&lt;b&gt;${dr(C.name)}&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px; color: #666666;&quot;&gt;${U}${P?"&lt;br&gt;"+P:""}&lt;/font&gt;${J}`;y+=`        <mxCell id="${T}" value="${oe}" style="${j}" vertex="1" parent="1">
          <mxGeometry x="${k}" y="${_}" width="${N}" height="${$}" as="geometry" />
        </mxCell>
`}),(e.relationships||[]).forEach(C=>{const T=`edge-${E++}`,k=b.get(C.from),_=b.get(C.to);if(!k||!_)return;const N=FO(C),$=C.description||"",j=C.technology?`[${dr(C.technology)}]`:"",U=j?`${dr($)}&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;${j}&lt;/font&gt;`:dr($);y+=`        <mxCell id="${T}" value="${U}" style="${N}" edge="1" parent="1" source="${k}" target="${_}">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
`}),y+=`      </root>
    </mxGraphModel>
  </diagram>
</mxfile>`,y},eR=e=>{const n=WO(e),r=new Blob([n],{type:"application/xml"}),a=`${(e.metadata?.name||"c4-diagram").replace(/\s+/g,"-").toLowerCase()}.drawio`;So.saveAs(r,a)},tR=e=>{const n=[...(e.systems||[]).map(b=>({...b,type:"system"})),...(e.containers||[]).map(b=>({...b,type:"container"})),...(e.components||[]).map(b=>({...b,type:"component"})),...(e.people||[]).map(b=>({...b,type:"person"})),...(e.externalSystems||[]).map(b=>({...b,type:"externalSystem"}))],r=new Map(n.map(b=>[b.id,b])),a=b=>{const E=[b];let x=b;for(;x.parentId&&r.has(x.parentId);)x=r.get(x.parentId),E.unshift(x);return E};let o=0;const c=n.map(b=>{const E=a(b);return o=Math.max(o,E.length),{element:b,chain:E}});c.sort((b,E)=>{const x=Math.min(b.chain.length,E.chain.length);for(let C=0;C<x;C++){const T=(b.chain[C].name||"").localeCompare(E.chain[C].name||"");if(T!==0)return T}return b.chain.length-E.chain.length});const u=[];for(let b=0;b<o;b++)b===0?u.push("Level 1 (System)"):b===1?u.push("Level 2 (Container)"):u.push(`Level ${b+1}`);const d=["ID",...u,"Type","PM","UX","Tech","Technology","Description"],g=c.map(({element:b,chain:E})=>{const x=[];for(let C=0;C<o;C++)C<E.length?x.push(E[C].name||""):x.push(b.name||"");return[b.id||"",...x,b.type||"",b.ownerPM||"",b.ownerUX||"",b.ownerTech||"",b.technology||"",b.description||""]}),h=b=>{const E=String(b||"");return E.includes(",")||E.includes('"')||E.includes(`
`)?`"${E.replace(/"/g,'""')}"`:E},p=[d.map(h).join(","),...g.map(b=>b.map(h).join(","))].join(`
`),v=new Blob([p],{type:"text/csv;charset=utf-8"}),y=`${(e.metadata?.name||"architecture").replace(/\s+/g,"-").toLowerCase()}.csv`;So.saveAs(v,y)},nR=e=>{const n=[];let r=[],a="",o=!1;for(let c=0;c<e.length;c++){const u=e[c],d=e[c+1];o?u==='"'&&d==='"'?(a+='"',c++):u==='"'?o=!1:a+=u:u==='"'?o=!0:u===","?(r.push(a),a=""):u===`
`||u==="\r"&&d===`
`?(r.push(a),n.push(r),r=[],a="",u==="\r"&&c++):u!=="\r"&&(a+=u)}return(a||r.length>0)&&(r.push(a),n.push(r)),n},iR=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)}),rR=e=>{const n=nR(e);if(n.length<2)throw new Error("CSV must have at least a header row and one data row");const r=n[0].map(_=>_.trim()),a=n.slice(1).filter(_=>_.some(N=>N.trim())),o=r.findIndex(_=>_.toLowerCase()==="id"),c=r.findIndex(_=>_.toLowerCase()==="type"),u=r.findIndex(_=>_.toLowerCase()==="pm"),d=r.findIndex(_=>_.toLowerCase()==="ux"),g=r.findIndex(_=>_.toLowerCase()==="tech"),h=r.findIndex(_=>_.toLowerCase()==="technology"),p=r.findIndex(_=>_.toLowerCase()==="description"),v=[];if(r.forEach((_,N)=>{_.toLowerCase().startsWith("level")&&v.push(N)}),v.length===0)throw new Error('No Level columns found in CSV. Expected columns like "Level 1", "Level 2", etc.');if(c===-1)throw new Error("Type column is required");const y=new Map,b={systems:[],containers:[],components:[],people:[],externalSystems:[]};a.forEach(_=>{const N=D=>D>=0&&D<_.length&&_[D]?.trim()||"",$=N(o),j=N(c).toLowerCase(),U=N(u),P=N(d),J=N(g),oe=N(h),te=N(p),Z=v.map(D=>N(D));let q=0;for(let D=0;D<Z.length;D++){const O=Z[D];if(!O)break;(D===0||O!==Z[D-1])&&(q=D)}const z=[];for(let D=0;D<=q;D++)Z[D]&&(D===0||Z[D]!==Z[D-1])&&z.push(Z[D]);const G=z.join("/"),R=z[z.length-1],H=z.slice(0,-1).join("/");if(y.has(G)){const D=y.get(G);U&&!D.ownerPM&&(D.ownerPM=U),P&&!D.ownerUX&&(D.ownerUX=P),J&&!D.ownerTech&&(D.ownerTech=J),oe&&!D.technology&&(D.technology=oe),te&&!D.description&&(D.description=te);return}let B=j;(!B||!["system","container","component","person","externalsystem"].includes(B))&&(q===0?B="system":q===1?B="container":B="component"),B==="externalsystem"&&(B="externalSystem");const X={id:$||iR(),name:R,type:B,description:te||"",technology:oe||"",ownerPM:U||"",ownerUX:P||"",ownerTech:J||"",position:{x:100,y:100}};switch(y.set(G,X),H&&y.has(H)&&(X.parentId=y.get(H).id),B){case"system":b.systems.push(X);break;case"container":b.containers.push(X);break;case"component":b.components.push(X);break;case"person":b.people.push(X);break;case"externalSystem":b.externalSystems.push(X);break}});const E=250,x=4,C=[...b.systems,...b.containers,...b.components,...b.people,...b.externalSystems],T=new Map;C.forEach(_=>{const N=_.parentId||"root";T.has(N)||T.set(N,[]),T.get(N).push(_)});const k=(_,N,$)=>{const j=T.get(_||"root")||[];let U=N,P=$,J=0;j.forEach(oe=>{oe.position={x:U,y:P},J++,J>=x?(J=0,U=N,P+=E):U+=E})};return k(null,100,100),T.forEach((_,N)=>{N!=="root"&&k(N,100,100)}),{metadata:{name:"Imported Model",version:"1.0",author:""},...b,relationships:[],shadows:[]}},aR=e=>{let n=1;const r=new Map,a=h=>(r.has(h)||r.set(h,String(n++)),r.get(h)),o=(e.people||[]).map(h=>({id:a(h.id),name:h.name||"Unnamed Person",description:h.description||"",tags:(h.tags||[]).join(",")||"Person",location:"Unspecified",relationships:[]})),c=[];(e.systems||[]).forEach(h=>{const p=a(h.id);c.push({id:p,name:h.name||"Unnamed System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System",location:"Unspecified",containers:[],relationships:[]})}),(e.externalSystems||[]).forEach(h=>{const p=a(h.id);c.push({id:p,name:h.name||"Unnamed External System",description:h.description||"",tags:(h.tags||[]).join(",")||"Software System,External",location:"External",containers:[],relationships:[]})}),(e.containers||[]).forEach(h=>{const v={id:a(h.id),name:h.name||"Unnamed Container",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Container",components:[],relationships:[]},y=c.find(b=>a(h.parentSystem)===b.id);y?y.containers.push(v):c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned containers",tags:"Software System",location:"Unspecified",containers:[v],relationships:[]}):c[0].containers.push(v)}),(e.components||[]).forEach(h=>{const v={id:a(h.id),name:h.name||"Unnamed Component",description:h.description||"",technology:h.technology||"",tags:(h.tags||[]).join(",")||"Component",relationships:[]};let y=!1;for(const b of c){const E=b.containers.find(x=>a(h.parentContainer)===x.id);if(E){E.components.push(v),y=!0;break}}if(!y){for(const b of c)if(b.containers.length>0){b.containers[0].components.push(v),y=!0;break}}y||(c.length===0?c.push({id:String(n++),name:"Default System",description:"System created to contain orphaned components",tags:"Software System",location:"Unspecified",containers:[{id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}],relationships:[]}):c[0].containers.length===0?c[0].containers.push({id:String(n++),name:"Default Container",description:"Container created to contain orphaned components",technology:"",tags:"Container",components:[v],relationships:[]}):c[0].containers[0].components.push(v))});const u=h=>{const p=a(h.from),v=a(h.to),y={sourceId:p,destinationId:v,description:h.description||"",technology:h.technology||"",tags:h.tags||""},b=o.find(E=>E.id===p);if(b){b.relationships.push(y);return}for(const E of c){if(E.id===p){E.relationships.push(y);return}for(const x of E.containers){if(x.id===p){x.relationships.push(y);return}for(const C of x.components)if(C.id===p){C.relationships.push(y);return}}}};(e.relationships||[]).forEach(h=>{u(h)});const d={systemLandscapeViews:[],systemContextViews:[],containerViews:[],componentViews:[],configuration:{styles:{elements:[{tag:"Person",shape:"Person",background:"#08427b",color:"#ffffff"},{tag:"Software System",background:"#1168bd",color:"#ffffff"},{tag:"External",background:"#999999",color:"#ffffff"},{tag:"Container",background:"#438dd5",color:"#ffffff"},{tag:"Component",background:"#85bbf0",color:"#000000"}],relationships:[]}}};if(c.length>0||o.length>0){const h=[];let p=100,v=100;o.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),c.forEach(y=>{h.push({id:y.id,x:p,y:v}),p+=300,p>1200&&(p=100,v+=300)}),d.systemLandscapeViews.push({key:"SystemLandscape",description:"System Landscape view",elements:h,relationships:[],automaticLayout:{rankDirection:"TopBottom",rankSeparation:200,nodeSeparation:200}})}return{id:1,name:e.metadata?.name||"Architecture Model",description:`Exported from Diagrams on ${new Date().toISOString()}`,version:e.metadata?.version||"1.0",model:{people:o,softwareSystems:c},views:d,documentation:{},properties:{exportedFrom:"Diagrams",author:e.metadata?.author||""}}},sR=e=>{const n={metadata:{name:e.name||"Imported Model",version:e.version||"1.0",author:e.properties?.author||e.lastModifiedUser||"Unknown"},systems:[],containers:[],components:[],people:[],externalSystems:[],relationships:[]},r=new Map;[...e.views?.systemLandscapeViews||[],...e.views?.systemContextViews||[],...e.views?.containerViews||[],...e.views?.componentViews||[]].forEach(d=>{(d.elements||[]).forEach(g=>{g.x!==void 0&&g.y!==void 0&&r.set(g.id,{x:g.x,y:g.y})})});const o=d=>r.get(d)||{x:100,y:100},c=(d,g)=>`${d}-${Date.now()}-${g}-${Math.random().toString(36).substr(2,5)}`,u=new Map;return(e.model?.people||[]).forEach(d=>{const g=c("person",d.id);u.set(d.id,g);const h=o(d.id);n.people.push({id:g,type:"person",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(p=>p.trim()).filter(p=>p!=="Person"):[],position:h})}),(e.model?.softwareSystems||[]).forEach(d=>{const g=d.location==="External"||d.tags&&d.tags.includes("External"),h=c(g?"externalSystem":"system",d.id);u.set(d.id,h);const p=o(d.id),v={id:h,type:g?"externalSystem":"system",name:d.name,description:d.description||"",technology:"",tags:d.tags?d.tags.split(",").map(y=>y.trim()).filter(y=>y!=="Software System"&&y!=="External"):[],position:p};g?n.externalSystems.push(v):n.systems.push(v),(d.containers||[]).forEach(y=>{const b=c("container",y.id);u.set(y.id,b);const E=o(y.id);n.containers.push({id:b,type:"container",name:y.name,description:y.description||"",technology:y.technology||"",tags:y.tags?y.tags.split(",").map(x=>x.trim()).filter(x=>x!=="Container"):[],position:E,parentSystem:h}),(y.components||[]).forEach(x=>{const C=c("component",x.id);u.set(x.id,C);const T=o(x.id);n.components.push({id:C,type:"component",name:x.name,description:x.description||"",technology:x.technology||"",tags:x.tags?x.tags.split(",").map(k=>k.trim()).filter(k=>k!=="Component"):[],position:T,parentContainer:b}),(x.relationships||[]).forEach(k=>{const _=u.get(k.sourceId),N=u.get(k.destinationId);_&&N&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:_,to:N,description:k.description||"",technology:k.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(y.relationships||[]).forEach(x=>{const C=u.get(x.sourceId),T=u.get(x.destinationId);C&&T&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:C,to:T,description:x.description||"",technology:x.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(d.relationships||[]).forEach(y=>{const b=u.get(y.sourceId),E=u.get(y.destinationId);b&&E&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:b,to:E,description:y.description||"",technology:y.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),(e.model?.people||[]).forEach(d=>{(d.relationships||[]).forEach(g=>{const h=u.get(g.sourceId),p=u.get(g.destinationId);h&&p&&n.relationships.push({id:`rel-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:h,to:p,description:g.description||"",technology:g.technology||"",arrowDirection:"right",lineStyle:"solid",animated:!1})})}),n},oR=8e3,lR=e=>{try{const n=JSON.stringify(e);return btoa(encodeURIComponent(n))}catch(n){return console.error("Error encoding model:",n),null}},cR=e=>{try{const n=decodeURIComponent(atob(e));return JSON.parse(n)}catch(n){return console.error("Error decoding model:",n),null}},uR=e=>{const n=lR(e);if(!n)return{url:null,error:"Failed to encode model"};const a=`${window.location.origin+window.location.pathname}#model=${n}`;return a.length>oR?{url:null,error:`Model too large for URL sharing (${Math.round(a.length/1024)}KB). Use JSON export instead.`}:{url:a,error:null}},dR=()=>{const e=window.location.hash;if(!e||!e.startsWith("#model="))return null;const n=e.substring(7);return cR(n)},fR=()=>{history.replaceState(null,"",window.location.pathname)},hR=()=>window.location.hash.startsWith("#model=");function Jc(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(r[a[o]]=e[a[o]]);return r}function gR(e,n,r,a){function o(c){return c instanceof r?c:new r(function(u){u(c)})}return new(r||(r=Promise))(function(c,u){function d(p){try{h(a.next(p))}catch(v){u(v)}}function g(p){try{h(a.throw(p))}catch(v){u(v)}}function h(p){p.done?c(p.value):o(p.value).then(d,g)}h((a=a.apply(e,n||[])).next())})}const mR=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);class Bh extends Error{constructor(n,r="FunctionsError",a){super(n),this.name=r,this.context=a}}class pR extends Bh{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class rv extends Bh{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class av extends Bh{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var dh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(dh||(dh={}));class yR{constructor(n,{headers:r={},customFetch:a,region:o=dh.Any}={}){this.url=n,this.headers=r,this.region=o,this.fetch=mR(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return gR(this,arguments,void 0,function*(r,a={}){var o;let c,u;try{const{headers:d,method:g,body:h,signal:p,timeout:v}=a;let y={},{region:b}=a;b||(b=this.region);const E=new URL(`${this.url}/${r}`);b&&b!=="any"&&(y["x-region"]=b,E.searchParams.set("forceFunctionRegion",b));let x;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",x=h):typeof h=="string"?(y["Content-Type"]="text/plain",x=h):typeof FormData<"u"&&h instanceof FormData?x=h:(y["Content-Type"]="application/json",x=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?x=JSON.stringify(h):x=h;let C=p;v&&(u=new AbortController,c=setTimeout(()=>u.abort(),v),p?(C=u.signal,p.addEventListener("abort",()=>u.abort())):C=u.signal);const T=yield this.fetch(E.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:x,signal:C}).catch($=>{throw new pR($)}),k=T.headers.get("x-relay-error");if(k&&k==="true")throw new rv(T);if(!T.ok)throw new av(T);let _=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),N;return _==="application/json"?N=yield T.json():_==="application/octet-stream"||_==="application/pdf"?N=yield T.blob():_==="text/event-stream"?N=T:_==="multipart/form-data"?N=yield T.formData():N=yield T.text(),{data:N,error:null,response:T}}catch(d){return{data:null,error:d,response:d instanceof av||d instanceof rv?d.context:void 0}}finally{c&&clearTimeout(c)}})}}var vR=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},bR=class{constructor(e){var n,r,a;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(a=e.urlLengthLimit)!==null&&a!==void 0?a:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,d=null,g=null,h=c.status,p=c.statusText;if(c.ok){var v,y;if(r.method!=="HEAD"){var b;const T=await c.text();T===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((b=r.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=T:d=JSON.parse(T))}const x=(v=r.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),C=(y=c.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");x&&C&&C.length>1&&(g=parseInt(C[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var E;const x=await c.text();try{u=JSON.parse(x),Array.isArray(u)&&c.status===404&&(d=[],u=null,h=200,p="OK")}catch{c.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&r.isMaybeSingle&&(!(u==null||(E=u.details)===null||E===void 0)&&E.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&r.shouldThrowOnError)throw new vR(u)}return{error:u,data:d,count:g,status:h,statusText:p}});return this.shouldThrowOnError||(o=o.catch(c=>{var u;let d="",g="",h="";const p=c?.cause;if(p){var v,y,b,E;const T=(v=p?.message)!==null&&v!==void 0?v:"",k=(y=p?.code)!==null&&y!==void 0?y:"";d=`${(b=c?.name)!==null&&b!==void 0?b:"FetchError"}: ${c?.message}`,d+=`

Caused by: ${(E=p?.name)!==null&&E!==void 0?E:"Error"}: ${T}`,k&&(d+=` (${k})`),p?.stack&&(d+=`
${p.stack}`)}else{var x;d=(x=c?.stack)!==null&&x!==void 0?x:""}const C=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(h="",g="Request was aborted (timeout or manual cancellation)",C>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${C} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(p?.name==="HeadersOverflowError"||p?.code==="UND_ERR_HEADERS_OVERFLOW")&&(h="",g="HTTP headers exceeded server limits (typically 16KB)",C>this.urlLengthLimit&&(g+=`. Your request URL is ${C} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:d,hint:g,code:h},data:null,count:null,status:0,statusText:""}})),o.then(e,n)}returns(){return this}overrideTypes(){return this}},wR=class extends bR{select(e){let n=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:a=r}={}){const o=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(c,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:o=!1,format:c="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),g=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const sv=new RegExp("[,()]");var Na=class extends wR{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}regexMatch(e,n){return this.url.searchParams.append(e,`match.${n}`),this}regexIMatch(e,n){return this.url.searchParams.append(e,`imatch.${n}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}isDistinct(e,n){return this.url.searchParams.append(e,`isdistinct.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&sv.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&sv.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${c}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}},xR=class{constructor(e,{headers:n={},schema:r,fetch:a,urlLengthLimit:o=8e3}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=a,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,n){const{head:r=!1,count:a}=n??{},o=r?"HEAD":"GET";let c=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join(""),{url:d,headers:g}=this.cloneRequestState();return d.searchParams.set("select",u),a&&g.append("Prefer",`count=${a}`),new Na({method:o,url:d,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:n,defaultToNull:r=!0}={}){var a;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(n&&u.append("Prefer",`count=${n}`),r||u.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((g,h)=>g.concat(Object.keys(h)),[]);if(d.length>0){const g=[...new Set(d)].map(h=>`"${h}"`);c.searchParams.set("columns",g.join(","))}}return new Na({method:o,url:c,headers:u,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:o=!0}={}){var c;const u="POST",{url:d,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&d.searchParams.set("on_conflict",n),a&&g.append("Prefer",`count=${a}`),o||g.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(h.length>0){const p=[...new Set(h)].map(v=>`"${v}"`);d.searchParams.set("columns",p.join(","))}}return new Na({method:u,url:d,headers:g,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:n}={}){var r;const a="PATCH",{url:o,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Na({method:a,url:o,headers:c,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var n;const r="DELETE",{url:a,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Na({method:r,url:a,headers:o,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function lo(e){"@babel/helpers - typeof";return lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lo(e)}function _R(e,n){if(lo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,n);if(lo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function SR(e){var n=_R(e,"string");return lo(n)=="symbol"?n:n+""}function ER(e,n,r){return(n=SR(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ov(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function rc(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ov(Object(r),!0).forEach(function(a){ER(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ov(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var TR=class Hw{constructor(n,{headers:r={},schema:a,fetch:o,timeout:c,urlLengthLimit:u=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=a,this.urlLengthLimit=u;const d=o??globalThis.fetch;c!==void 0&&c>0?this.fetch=(g,h)=>{const p=new AbortController,v=setTimeout(()=>p.abort(),c),y=h?.signal;if(y){if(y.aborted)return clearTimeout(v),d(g,h);const b=()=>{clearTimeout(v),p.abort()};return y.addEventListener("abort",b,{once:!0}),d(g,rc(rc({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(v),y.removeEventListener("abort",b)})}return d(g,rc(rc({},h),{},{signal:p.signal})).finally(()=>clearTimeout(v))}:this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new xR(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Hw(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:a=!1,get:o=!1,count:c}={}){var u;let d;const g=new URL(`${this.url}/rpc/${n}`);let h;const p=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(p)),v=a&&Object.values(r).some(p);v?(d="POST",h=r):a||o?(d=a?"HEAD":"GET",Object.entries(r).filter(([b,E])=>E!==void 0).map(([b,E])=>[b,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([b,E])=>{g.searchParams.append(b,E)})):(d="POST",h=r);const y=new Headers(this.headers);return v?y.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&y.set("Prefer",`count=${c}`),new Na({method:d,url:g,headers:y,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}};class CR{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const a=r.versions;if(a&&a.node){const o=a.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const a=this.getWebSocketConstructor();return new a(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const AR="2.97.0",NR=`realtime-js/${AR}`,OR="1.0.0",Bw="2.0.0",lv=Bw,fh=1e4,RR=1e3,kR=100;var $i;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($i||($i={}));var ht;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ht||(ht={}));var pn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pn||(pn={}));var hh;(function(e){e.websocket="websocket"})(hh||(hh={}));var pr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(pr||(pr={}));class MR{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let a=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,a;const o=(a=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(n){var r,a;const o=(a=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&a!==void 0?a:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(n,r,a){var o,c;const u=n.topic,d=(o=n.ref)!==null&&o!==void 0?o:"",g=(c=n.join_ref)!==null&&c!==void 0?c:"",h=n.payload.event,p=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},v=Object.keys(p).length===0?"":JSON.stringify(p);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+d.length+u.length+h.length+v.length,b=new ArrayBuffer(this.HEADER_LENGTH+y);let E=new DataView(b),x=0;E.setUint8(x++,this.KINDS.userBroadcastPush),E.setUint8(x++,g.length),E.setUint8(x++,d.length),E.setUint8(x++,u.length),E.setUint8(x++,h.length),E.setUint8(x++,v.length),E.setUint8(x++,r),Array.from(g,T=>E.setUint8(x++,T.charCodeAt(0))),Array.from(d,T=>E.setUint8(x++,T.charCodeAt(0))),Array.from(u,T=>E.setUint8(x++,T.charCodeAt(0))),Array.from(h,T=>E.setUint8(x++,T.charCodeAt(0))),Array.from(v,T=>E.setUint8(x++,T.charCodeAt(0)));var C=new Uint8Array(b.byteLength+a.byteLength);return C.set(new Uint8Array(b),0),C.set(new Uint8Array(a),b.byteLength),C.buffer}decode(n,r){if(this._isArrayBuffer(n)){let a=this._binaryDecode(n);return r(a)}if(typeof n=="string"){const a=JSON.parse(n),[o,c,u,d,g]=a;return r({join_ref:o,ref:c,topic:u,event:d,payload:g})}return r({})}_binaryDecode(n){const r=new DataView(n),a=r.getUint8(0),o=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,o)}}_decodeUserBroadcast(n,r,a){const o=r.getUint8(1),c=r.getUint8(2),u=r.getUint8(3),d=r.getUint8(4);let g=this.HEADER_LENGTH+4;const h=a.decode(n.slice(g,g+o));g=g+o;const p=a.decode(n.slice(g,g+c));g=g+c;const v=a.decode(n.slice(g,g+u));g=g+u;const y=n.slice(g,n.byteLength),b=d===this.JSON_ENCODING?JSON.parse(a.decode(y)):y,E={type:this.BROADCAST_EVENT,event:p,payload:b};return u>0&&(E.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([a])=>r.includes(a)))}}class Iw{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Xe||(Xe={}));const cv=(e,n,r={})=>{var a;const o=(a=r.skipTypes)!==null&&a!==void 0?a:[];return n?Object.keys(n).reduce((c,u)=>(c[u]=jR(u,e,n,o),c),{}):{}},jR=(e,n,r,a)=>{const o=n.find(d=>d.name===e),c=o?.type,u=r[e];return c&&!a.includes(c)?qw(c,u):gh(u)},qw=(e,n)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return $R(n,r)}switch(e){case Xe.bool:return DR(n);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return zR(n);case Xe.json:case Xe.jsonb:return UR(n);case Xe.timestamp:return LR(n);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return gh(n);default:return gh(n)}},gh=e=>e,DR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},zR=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},UR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},$R=(e,n)=>{if(typeof e!="string")return e;const r=e.length-1,a=e[r];if(e[0]==="{"&&a==="}"){let c;const u=e.slice(1,r);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(d=>qw(n,d))}return e},LR=e=>typeof e=="string"?e.replace(" ","T"):e,Vw=e=>{const n=new URL(e);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class qf{constructor(n,r,a={},o=fh){this.channel=n,this.event=r,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var a;return this._hasReceived(n)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var uv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(uv||(uv={}));class Zs{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zs.syncState(this.state,o,c,u),this.pendingDiffs.forEach(g=>{this.state=Zs.syncDiff(this.state,g,c,u)}),this.pendingDiffs=[],d()}),this.channel._on(a.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Zs.syncDiff(this.state,o,c,u),d())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,a,o){const c=this.cloneDeep(n),u=this.transformState(r),d={},g={};return this.map(c,(h,p)=>{u[h]||(g[h]=p)}),this.map(u,(h,p)=>{const v=c[h];if(v){const y=p.map(C=>C.presence_ref),b=v.map(C=>C.presence_ref),E=p.filter(C=>b.indexOf(C.presence_ref)<0),x=v.filter(C=>y.indexOf(C.presence_ref)<0);E.length>0&&(d[h]=E),x.length>0&&(g[h]=x)}else d[h]=p}),this.syncDiff(c,{joins:d,leaves:g},a,o)}static syncDiff(n,r,a,o){const{joins:c,leaves:u}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(c,(d,g)=>{var h;const p=(h=n[d])!==null&&h!==void 0?h:[];if(n[d]=this.cloneDeep(g),p.length>0){const v=n[d].map(b=>b.presence_ref),y=p.filter(b=>v.indexOf(b.presence_ref)<0);n[d].unshift(...y)}a(d,p,g)}),this.map(u,(d,g)=>{let h=n[d];if(!h)return;const p=g.map(v=>v.presence_ref);h=h.filter(v=>p.indexOf(v.presence_ref)<0),n[d]=h,o(d,h,g),h.length===0&&delete n[d]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(a=>r(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,a)=>{const o=n[a];return"metas"in o?r[a]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=o,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(dv||(dv={}));var Qs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Qs||(Qs={}));var Wn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wn||(Wn={}));class ja{constructor(n,r={config:{}},a){var o,c;if(this.topic=n,this.params=r,this.socket=a,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new qf(this,pn.join,this.params,this.timeout),this.rejoinTimer=new Iw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Zs(this),this.broadcastEndpointURL=Vw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var a,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:u,presence:d,private:g}}=this.params,h=(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&o!==void 0?o:[],p=!!this.bindings[Qs.PRESENCE]&&this.bindings[Qs.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,v={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:g};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(b=>n?.(Wn.CHANNEL_ERROR,b)),this._onClose(()=>n?.(Wn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){n?.(Wn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,C=(E=x?.length)!==null&&E!==void 0?E:0,T=[];for(let k=0;k<C;k++){const _=x[k],{filter:{event:N,schema:$,table:j,filter:U}}=_,P=b&&b[k];if(P&&P.event===N&&ja.isFilterValueEqual(P.schema,$)&&ja.isFilterValueEqual(P.table,j)&&ja.isFilterValueEqual(P.filter,U))T.push(Object.assign(Object.assign({},_),{id:P.id}));else{this.unsubscribe(),this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,n&&n(Wn.SUBSCRIBED);return}}).receive("error",b=>{this.state=ht.errored,n?.(Wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{n?.(Wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,a){return this.state===ht.joined&&n===Qs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,a)}async httpSend(n,r,a={}){var o;if(r==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let g=d.statusText;try{const h=await d.json();g=h.error||h.message||g}catch{}return Promise.reject(new Error(g))}async send(n,r={}){var a,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=n,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=h.body)===null||o===void 0?void 0:o.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,d,g;const h=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),h.receive("ok",()=>c("ok")),h.receive("error",()=>c("error")),h.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ht.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pn.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(o=>{a=new qf(this,pn.leave,{},n),a.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(n,r,a){const o=new AbortController,c=setTimeout(()=>o.abort(),a),u=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(c),u}_push(n,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new qf(this,n,r,a);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>kR){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,a){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,a){var o,c;const u=n.toLocaleLowerCase(),{close:d,error:g,leave:h,join:p}=pn;if(a&&[d,g,h,p].indexOf(u)>=0&&a!==this._joinRef())return;let y=this._onMessage(u,r,a);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(b=>{var E,x,C;return((E=b.filter)===null||E===void 0?void 0:E.event)==="*"||((C=(x=b.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(b=>b.callback(y,a)):(c=this.bindings[u])===null||c===void 0||c.filter(b=>{var E,x,C,T,k,_;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in b){const N=b.id,$=(E=b.filter)===null||E===void 0?void 0:E.event;return N&&((x=r.ids)===null||x===void 0?void 0:x.includes(N))&&($==="*"||$?.toLocaleLowerCase()===((C=r.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const N=(k=(T=b?.filter)===null||T===void 0?void 0:T.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return N==="*"||N===((_=r?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===u}).map(b=>{if(typeof y=="object"&&"ids"in y){const E=y.data,{schema:x,table:C,commit_timestamp:T,type:k,errors:_}=E;y=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:T,eventType:k,new:{},old:{},errors:_}),this._getPayloadRecords(E))}b.callback(y,a)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,a){const o=n.toLocaleLowerCase(),c={type:o,filter:r,callback:a};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(n,r){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&ja.isEqual(o.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const a in n)if(n[a]!==r[a])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(pn.close,{},n)}_onError(n){this._on(pn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=cv(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=cv(n.columns,n.old_record)),r}}const Vf=()=>{},ac={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},HR=[1e3,2e3,5e3,1e4],BR=1e4,IR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qR{constructor(n,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fh,this.transport=null,this.heartbeatIntervalMs=ac.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vf,this.ref=0,this.reconnectTimer=null,this.vsn=lv,this.logger=Vf,this.conn=null,this.sendBuffer=[],this.serializer=new MR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${hh.websocket}`,this.httpEndpoint=Vw(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=CR.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,a){this.logger(n,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case $i.connecting:return pr.Connecting;case $i.open:return pr.Open;case $i.closing:return pr.Closing;default:return pr.Closed}}isConnected(){return this.connectionState()===pr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const a=`realtime:${n}`,o=this.getChannels().find(c=>c.topic===a);if(o)return o;{const c=new ja(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:a,payload:o,ref:c}=n,u=()=>{this.encode(n,d=>{var g;(g=this.conn)===null||g===void 0||g.send(d)})};this.log("push",`${r} ${a} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(RR,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ac.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:o,payload:c,ref:u}=r,d=u?`(${u})`:"",g=c.status||"";this.log("receive",`${g} ${a} ${o} ${d}`.trim(),c),this.channels.filter(h=>h._isMember(a)).forEach(h=>h._trigger(o,c,u)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===$i.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$i.open||this.conn.readyState===$i.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(pn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const a=n.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${n}${a}${o}`}_workerObjectUrl(n){let r;if(n)r=n;else{const a=new Blob([IR],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,a=!1;if(n)r=n,a=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const c={access_token:r,version:NR};r&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(pn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(r)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Iw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ac.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,a,o,c,u,d,g,h,p,v,y,b;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=n?.timeout)!==null&&a!==void 0?a:fh,this.heartbeatIntervalMs=(o=n?.heartbeatIntervalMs)!==null&&o!==void 0?o:ac.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=n?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=n?.heartbeatCallback)!==null&&d!==void 0?d:Vf,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:lv,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=n?.reconnectAfterMs)!==null&&h!==void 0?h:(E=>HR[E-1]||BR),this.vsn){case OR:this.encode=(p=n?.encode)!==null&&p!==void 0?p:((E,x)=>x(JSON.stringify(E))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:((E,x)=>x(JSON.parse(E)));break;case Bw:this.encode=(y=n?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(b=n?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var co=class extends Error{constructor(e,n){super(e),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function VR(e,n,r){const a=new URL(n,e);if(r)for(const[o,c]of Object.entries(r))c!==void 0&&a.searchParams.set(o,c);return a.toString()}async function PR(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function GR(e){const n=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:a,query:o,body:c,headers:u}){const d=VR(e.baseUrl,a,o),g=await PR(e.auth),h=await n(d,{method:r,headers:{...c?{"Content-Type":"application/json"}:{},...g,...u},body:c?JSON.stringify(c):void 0}),p=await h.text(),v=(h.headers.get("content-type")||"").includes("application/json"),y=v&&p?JSON.parse(p):p;if(!h.ok){const b=v?y:void 0,E=b?.error;throw new co(E?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:E?.type,icebergCode:E?.code,details:b})}return{status:h.status,headers:h.headers,data:y}}}}function sc(e){return e.join("")}var YR=class{constructor(e,n=""){this.client=e,this.prefix=n}async listNamespaces(e){const n=e?{parent:sc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(e,n){const r={namespace:e.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sc(e.namespace)}`}),!0}catch(n){if(n instanceof co&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(e,n){try{return await this.createNamespace(e,n)}catch(r){if(r instanceof co&&r.status===409)return;throw r}}};function wa(e){return e.join("")}var XR=class{constructor(e,n="",r){this.client=e,this.prefix=n,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wa(e.namespace)}/tables`})).data.identifiers}async createTable(e,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wa(e.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(e,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wa(e.namespace)}/tables/${e.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wa(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wa(e.namespace)}/tables/${e.name}`,headers:n})).data.metadata}async tableExists(e){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wa(e.namespace)}/tables/${e.name}`,headers:n}),!0}catch(r){if(r instanceof co&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,n){try{return await this.createTable(e,n)}catch(r){if(r instanceof co&&r.status===409)return await this.loadTable({namespace:e.namespace,name:n.name});throw r}}},KR=class{constructor(e){let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=GR({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new YR(this.client,n),this.tableOps=new XR(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,n){return this.namespaceOps.createNamespace(e,n)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,n){return this.tableOps.createTable(e,n)}async updateTable(e,n){return this.tableOps.updateTable(e,n)}async dropTable(e,n){await this.tableOps.dropTable(e,n)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,n){return this.namespaceOps.createNamespaceIfNotExists(e,n)}async createTableIfNotExists(e,n){return this.tableOps.createTableIfNotExists(e,n)}},Fc=class extends Error{constructor(e,n="storage",r,a){super(e),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=a}};function Wc(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var oc=class extends Fc{constructor(e,n,r,a="storage"){super(e,a,n,r),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Pw=class extends Fc{constructor(e,n,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const ZR=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),QR=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mh=e=>{if(Array.isArray(e))return e.map(r=>mh(r));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([r,a])=>{const o=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[o]=mh(a)}),n},JR=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function uo(e){"@babel/helpers - typeof";return uo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uo(e)}function FR(e,n){if(uo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,n);if(uo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function WR(e){var n=FR(e,"string");return uo(n)=="symbol"?n:n+""}function ek(e,n,r){return(n=WR(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function fv(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function be(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?fv(Object(r),!0).forEach(function(a){ek(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fv(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const hv=e=>{var n;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(n=e.error)===null||n===void 0?void 0:n.message)||JSON.stringify(e)},tk=async(e,n,r,a)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const o=e,c=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const d=u?.statusCode||u?.code||c+"";n(new oc(hv(u),c,d,a))}).catch(()=>{if(a==="vectors"){const u=c+"";n(new oc(o.statusText||`HTTP ${c} error`,c,u,a))}else{const u=c+"";n(new oc(o.statusText||`HTTP ${c} error`,c,u,a))}});else{const u=c+"";n(new oc(o.statusText||`HTTP ${c} error`,c,u,a))}}else n(new Pw(hv(e),e,a))},nk=(e,n,r,a)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"||e==="HEAD"||!a?be(be({},o),r):(QR(a)?(o.headers=be({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(a)):o.body=a,n?.duplex&&(o.duplex=n.duplex),be(be({},o),r))};async function Vs(e,n,r,a,o,c,u){return new Promise((d,g)=>{e(r,nk(n,a,o,c)).then(h=>{if(!h.ok)throw h;if(a?.noResolveJson)return h;if(u==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>d(h)).catch(h=>tk(h,g,a,u))})}function Gw(e="storage"){return{get:async(n,r,a,o)=>Vs(n,"GET",r,a,o,void 0,e),post:async(n,r,a,o,c)=>Vs(n,"POST",r,o,c,a,e),put:async(n,r,a,o,c)=>Vs(n,"PUT",r,o,c,a,e),head:async(n,r,a,o)=>Vs(n,"HEAD",r,be(be({},a),{},{noResolveJson:!0}),o,void 0,e),remove:async(n,r,a,o,c)=>Vs(n,"DELETE",r,o,c,a,e)}}const ik=Gw("storage"),{get:fo,post:gn,put:ph,head:rk,remove:Ih}=ik,Qt=Gw("vectors");var Ga=class{constructor(e,n={},r,a="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.fetch=ZR(r),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=be(be({},this.headers),{},{[e]:n}),this}async handleOperation(e){var n=this;try{return{data:await e(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Wc(r))return{data:null,error:r};throw r}}},ak=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Wc(n))return{data:null,error:n};throw n}}};let Yw;Yw=Symbol.toStringTag;var sk=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Yw]="BlobDownloadBuilder",this.promise=null}asStream(){return new ak(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Wc(n))return{data:null,error:n};throw n}}};const ok={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var lk=class extends Ga{constructor(e,n={},r,a){super(e,n,a,"storage"),this.bucketId=r}async uploadOrUpdate(e,n,r,a){var o=this;return o.handleOperation(async()=>{let c;const u=be(be({},gv),a);let d=be(be({},o.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",o.encodeMetadata(g)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),g&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(g))):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,g&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),a?.headers&&(d=be(be({},d),a.headers));const h=o._removeEmptyFolders(n),p=o._getFinalPath(h),v=await(e=="PUT"?ph:gn)(o.fetch,`${o.url}/object/${p}`,c,be({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{path:h,id:v.Id,fullPath:v.Key}})}async upload(e,n,r){return this.uploadOrUpdate("POST",e,n,r)}async uploadToSignedUrl(e,n,r,a){var o=this;const c=o._removeEmptyFolders(e),u=o._getFinalPath(c),d=new URL(o.url+`/object/upload/sign/${u}`);return d.searchParams.set("token",n),o.handleOperation(async()=>{let g;const h=be({upsert:gv.upsert},a),p=be(be({},o.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",h.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",h.cacheControl)):(g=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:c,fullPath:(await ph(o.fetch,d.toString(),g,{headers:p})).Key}})}async createSignedUploadUrl(e,n){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(e);const o=be({},r.headers);n?.upsert&&(o["x-upsert"]="true");const c=await gn(r.fetch,`${r.url}/object/upload/sign/${a}`,{},{headers:o}),u=new URL(r.url+c.url),d=u.searchParams.get("token");if(!d)throw new Fc("No token returned by API");return{signedUrl:u.toString(),path:e,token:d}})}async update(e,n,r){return this.uploadOrUpdate("PUT",e,n,r)}async move(e,n,r){var a=this;return a.handleOperation(async()=>await gn(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:a.headers}))}async copy(e,n,r){var a=this;return a.handleOperation(async()=>({path:(await gn(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(e,n,r){var a=this;return a.handleOperation(async()=>{let o=a._getFinalPath(e),c=await gn(a.fetch,`${a.url}/object/sign/${o}`,be({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:a.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${a.url}${c.signedURL}${u}`)}})}async createSignedUrls(e,n,r){var a=this;return a.handleOperation(async()=>{const o=await gn(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:n,paths:e},{headers:a.headers}),c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o.map(u=>be(be({},u),{},{signedUrl:u.signedURL?encodeURI(`${a.url}${u.signedURL}${c}`):null}))})}download(e,n,r){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"",u=this._getFinalPath(e),d=()=>fo(this.fetch,`${this.url}/${a}/${u}${c}`,{headers:this.headers,noResolveJson:!0},r);return new sk(d,this.shouldThrowOnError)}async info(e){var n=this;const r=n._getFinalPath(e);return n.handleOperation(async()=>mh(await fo(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(e){var n=this;const r=n._getFinalPath(e);try{return await rk(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Wc(a)&&a instanceof Pw){const o=a.originalError;if([400,404].includes(o?.status))return{data:!1,error:a}}throw a}}getPublicUrl(e,n){const r=this._getFinalPath(e),a=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const c=typeof n?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(n?.transform||{});u!==""&&a.push(u);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}async remove(e){var n=this;return n.handleOperation(async()=>await Ih(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:e},{headers:n.headers}))}async list(e,n,r){var a=this;return a.handleOperation(async()=>{const o=be(be(be({},ok),n),{},{prefix:e||""});return await gn(a.fetch,`${a.url}/object/list/${a.bucketId}`,o,{headers:a.headers},r)})}async listV2(e,n){var r=this;return r.handleOperation(async()=>{const a=be({},e);return await gn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,a,{headers:r.headers},n)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}};const ck="2.97.0",Eo={"X-Client-Info":`storage-js/${ck}`};var uk=class extends Ga{constructor(e,n={},r,a){const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),u=be(be({},Eo),n);super(c,u,r,"storage")}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(e);return await fo(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(e){var n=this;return n.handleOperation(async()=>await fo(n.fetch,`${n.url}/bucket/${e}`,{headers:n.headers}))}async createBucket(e,n={public:!1}){var r=this;return r.handleOperation(async()=>await gn(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,n){var r=this;return r.handleOperation(async()=>await ph(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket/${e}/empty`,{},{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Ih(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},dk=class extends Ga{constructor(e,n={},r){const a=e.replace(/\/$/,""),o=be(be({},Eo),n);super(a,o,r,"storage")}async createBucket(e){var n=this;return n.handleOperation(async()=>await gn(n.fetch,`${n.url}/bucket`,{name:e},{headers:n.headers}))}async listBuckets(e){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const a=r.toString(),o=a?`${n.url}/bucket?${a}`:`${n.url}/bucket`;return await fo(n.fetch,o,{headers:n.headers})})}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Ih(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}))}from(e){var n=this;if(!JR(e))throw new Fc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new KR({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(r,{get(o,c){const u=o[c];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(g){if(a)throw g;return{data:null,error:g}}}}})}},fk=class extends Ga{constructor(e,n={},r){const a=e.replace(/\/$/,""),o=be(be({},Eo),{},{"Content-Type":"application/json"},n);super(a,o,r,"vectors")}async createIndex(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateIndex`,e,{headers:n.headers})||{})}async getIndex(e,n){var r=this;return r.handleOperation(async()=>await Qt.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:r.headers}))}async listIndexes(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListIndexes`,e,{headers:n.headers}))}async deleteIndex(e,n){var r=this;return r.handleOperation(async()=>await Qt.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:r.headers})||{})}},hk=class extends Ga{constructor(e,n={},r){const a=e.replace(/\/$/,""),o=be(be({},Eo),{},{"Content-Type":"application/json"},n);super(a,o,r,"vectors")}async putVectors(e){var n=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/PutVectors`,e,{headers:n.headers})||{})}async getVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectors`,e,{headers:n.headers}))}async listVectors(e){var n=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectors`,e,{headers:n.headers}))}async queryVectors(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/QueryVectors`,e,{headers:n.headers}))}async deleteVectors(e){var n=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectors`,e,{headers:n.headers})||{})}},gk=class extends Ga{constructor(e,n={},r){const a=e.replace(/\/$/,""),o=be(be({},Eo),{},{"Content-Type":"application/json"},n);super(a,o,r,"vectors")}async createBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}async getBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:e},{headers:n.headers}))}async listBuckets(e={}){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/ListVectorBuckets`,e,{headers:n.headers}))}async deleteBucket(e){var n=this;return n.handleOperation(async()=>await Qt.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{})}},mk=class extends gk{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new pk(this.url,this.headers,e,this.fetch)}async createBucket(e){var n=()=>super.createBucket,r=this;return n().call(r,e)}async getBucket(e){var n=()=>super.getBucket,r=this;return n().call(r,e)}async listBuckets(e={}){var n=()=>super.listBuckets,r=this;return n().call(r,e)}async deleteBucket(e){var n=()=>super.deleteBucket,r=this;return n().call(r,e)}},pk=class extends fk{constructor(e,n,r,a){super(e,n,a),this.vectorBucketName=r}async createIndex(e){var n=()=>super.createIndex,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var n=()=>super.listIndexes,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,e)}async deleteIndex(e){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,e)}index(e){return new yk(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},yk=class extends hk{constructor(e,n,r,a,o){super(e,n,o),this.vectorBucketName=r,this.indexName=a}async putVectors(e){var n=()=>super.putVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var n=()=>super.getVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var n=()=>super.listVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var n=()=>super.queryVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var n=()=>super.deleteVectors,r=this;return n().call(r,be(be({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},vk=class extends uk{constructor(e,n={},r,a){super(e,n,r,a)}from(e){return new lk(this.url,this.headers,e,this.fetch)}get vectors(){return new mk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new dk(this.url+"/iceberg",this.headers,this.fetch)}};const Xw="2.97.0",Oa=30*1e3,yh=3,Pf=yh*Oa,bk="http://localhost:9999",wk="supabase.auth.token",xk={"X-Client-Info":`gotrue-js/${Xw}`},vh="X-Supabase-Api-Version",Kw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_k=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sk=600*1e3;class ho extends Error{constructor(n,r,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Ek extends ho{constructor(n,r,a){super(n,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function Tk(e){return me(e)&&e.name==="AuthApiError"}class yr extends ho{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class ii extends ho{constructor(n,r,a,o){super(n,a,o),this.name=r,this.status=a}}class Kt extends ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gf(e){return me(e)&&e.name==="AuthSessionMissingError"}class xa extends ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lc extends ii{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class cc extends ii{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ck(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class mv extends ii{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ak extends ii{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bh extends ii{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Yf(e){return me(e)&&e.name==="AuthRetryableFetchError"}class pv extends ii{constructor(n,r,a){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class wh extends ii{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yv=` 	
\r=`.split(""),Nk=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<yv.length;n+=1)e[yv[n].charCodeAt(0)]=-2;for(let n=0;n<Mc.length;n+=1)e[Mc[n].charCodeAt(0)]=n;return e})();function vv(e,n,r){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;r(Mc[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;r(Mc[a]),n.queuedBits-=6}}function Zw(e,n,r){const a=Nk[e];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function bv(e){const n=[],r=u=>{n.push(String.fromCodePoint(u))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{kk(u,a,r)};for(let u=0;u<e.length;u+=1)Zw(e.charCodeAt(u),o,c);return n.join("")}function Ok(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Rk(e,n){for(let r=0;r<e.length;r+=1){let a=e.charCodeAt(r);if(a>55295&&a<=56319){const o=(a-55296)*1024&65535;a=(e.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}Ok(a,n)}}function kk(e,n,r){if(n.utf8seq===0){if(e<=127){r(e);return}for(let a=1;a<6;a+=1)if((e>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Ua(e){const n=[],r={queue:0,queuedBits:0},a=o=>{n.push(o)};for(let o=0;o<e.length;o+=1)Zw(e.charCodeAt(o),r,a);return new Uint8Array(n)}function Mk(e){const n=[];return Rk(e,r=>n.push(r)),new Uint8Array(n)}function br(e){const n=[],r={queue:0,queuedBits:0},a=o=>{n.push(o)};return e.forEach(o=>vv(o,r,a)),vv(null,r,a),n.join("")}function jk(e){return Math.round(Date.now()/1e3)+e}function Dk(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",fr={tested:!1,writable:!1},Qw=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fr.tested)return fr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fr.tested=!0,fr.writable=!0}catch{fr.tested=!0,fr.writable=!1}return fr.writable};function zk(e){const n={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,c)=>{n[c]=o})}catch{}return r.searchParams.forEach((a,o)=>{n[o]=a}),n}const Jw=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),Uk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ra=async(e,n,r)=>{await e.setItem(n,JSON.stringify(r))},hr=async(e,n)=>{const r=await e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_t=async(e,n)=>{await e.removeItem(n)};class eu{constructor(){this.promise=new eu.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}eu.promiseConstructor=Promise;function uc(e){const n=e.split(".");if(n.length!==3)throw new wh("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!_k.test(n[a]))throw new wh("JWT not in base64url format");return{header:JSON.parse(bv(n[0])),payload:JSON.parse(bv(n[1])),signature:Ua(n[2]),raw:{header:n[0],payload:n[1]}}}async function $k(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function Lk(e,n){return new Promise((a,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await e(c);if(!n(c,null,u)){a(u);return}}catch(u){if(!n(c,u)){o(u);return}}})()})}function Hk(e){return("0"+e.toString(16)).substr(-2)}function Bk(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let o="";for(let c=0;c<56;c++)o+=r.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(n),Array.from(n,Hk).join("")}async function Ik(e){const r=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(a);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function qk(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Ik(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _a(e,n,r=!1){const a=Bk();let o=a;r&&(o+="/PASSWORD_RECOVERY"),await Ra(e,`${n}-code-verifier`,o);const c=await qk(a);return[c,a===c?"plain":"s256"]}const Vk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pk(e){const n=e.headers.get(vh);if(!n||!n.match(Vk))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Gk(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function Yk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sa(e){if(!Xk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xf(){const e={};return new Proxy(e,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Kk(e,n){return new Proxy(e,{get:(r,a,o)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,a,o)}return!n.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,a,o)}})}function wv(e){return JSON.parse(JSON.stringify(e))}const mr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Zk=[502,503,504];async function xv(e){var n;if(!Uk(e))throw new bh(mr(e),0);if(Zk.includes(e.status))throw new bh(mr(e),e.status);let r;try{r=await e.json()}catch(c){throw new yr(mr(c),c)}let a;const o=Pk(e);if(o&&o.getTime()>=Kw["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new pv(mr(r),e.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new Kt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new pv(mr(r),e.status,r.weak_password.reasons);throw new Ek(mr(r),e.status||500,a)}const Qk=(e,n,r,a)=>{const o={method:e,headers:n?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),r))};async function we(e,n,r,a){var o;const c=Object.assign({},a?.headers);c[vh]||(c[vh]=Kw["2024-01-01"].name),a?.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const u=(o=a?.query)!==null&&o!==void 0?o:{};a?.redirectTo&&(u.redirect_to=a.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await Jk(e,n,r+d,{headers:c,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(g):{data:Object.assign({},g),error:null}}async function Jk(e,n,r,a,o,c){const u=Qk(n,a,o,c);let d;try{d=await e(r,Object.assign({},u))}catch(g){throw console.error(g),new bh(mr(g),0)}if(d.ok||await xv(d),a?.noResolveJson)return d;try{return await d.json()}catch(g){await xv(g)}}function hn(e){var n;let r=null;eM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=jk(e.expires_in)));const a=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:r,user:a},error:null}}function _v(e){const n=hn(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(n.data.weak_password=e.weak_password),n}function Hi(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function Fk(e){return{data:e,error:null}}function Wk(e){const{action_link:n,email_otp:r,hashed_token:a,redirect_to:o,verification_type:c}=e,u=Jc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:n,email_otp:r,hashed_token:a,redirect_to:o,verification_type:c},g=Object.assign({},u);return{data:{properties:d,user:g},error:null}}function Sv(e){return e}function eM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Kf=["global","local","others"];class tM{constructor({url:n="",headers:r={},fetch:a}){this.url=n,this.headers=r,this.fetch=Jw(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Kf[0]){if(Kf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kf.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hi})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:r}=n,a=Jc(n,["options"]),o=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(o.new_email=a?.newEmail,delete o.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Wk,redirectTo:r?.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Hi})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,a,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Sv});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(E=>{const x=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);h[`${C}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{users:[]},error:h};throw h}}async getUserById(n){Sa(n);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Hi})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Sa(n);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Hi})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,r=!1){Sa(n);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hi})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){Sa(n.userId);try{const{data:r,error:a}=await we(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:a}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Sa(n.userId),Sa(n.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,a,o,c,u,d,g;try{const h={nextPage:null,lastPage:0,total:0},p=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=n?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Sv});if(p.error)throw p.error;const v=await p.json(),y=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,b=(g=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&g!==void 0?g:[];return b.length>0&&(b.forEach(E=>{const x=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);h[`${C}Page`]=x}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(me(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(n){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(n){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}}function Ev(e={}){return{getItem:n=>e[n]||null,setItem:(n,r)=>{e[n]=r},removeItem:n=>{delete e[n]}}}const Ea={debug:!!(globalThis&&Qw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fw extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Tv extends Fw{}async function nM(e,n,r){Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const a=new globalThis.AbortController;n>0&&setTimeout(()=>{a.abort(),Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await r()}finally{Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(n===0)throw Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Tv(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ea.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(o){throw o?.name==="AbortError"?new Tv(`Acquiring an exclusive Navigator LockManager lock "${e}" timed out waiting ${n}ms`):o}}function iM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ww(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rM(e){return parseInt(e,16)}function aM(e){const n=new TextEncoder().encode(e);return"0x"+Array.from(n,a=>a.toString(16).padStart(2,"0")).join("")}function sM(e){var n;const{chainId:r,domain:a,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:d,requestId:g,resources:h,scheme:p,uri:v,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((n=e.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=Ww(e.address),E=p?`${p}://${a}`:a,x=e.statement?`${e.statement}
`:"",C=`${E} wants you to sign in with your Ethereum account:
${b}

${x}`;let T=`URI: ${v}
Version: ${y}
Chain ID: ${r}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(T+=`
Expiration Time: ${o.toISOString()}`),d&&(T+=`
Not Before: ${d.toISOString()}`),g&&(T+=`
Request ID: ${g}`),h){let k=`
Resources:`;for(const _ of h){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);k+=`
- ${_}`}T+=k}return`${C}
${T}`}class ct extends Error{constructor({message:n,code:r,cause:a,name:o}){var c;super(n,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=o??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class jc extends ct{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function oM({error:e,options:n}){var r,a,o;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(n.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const u=window.location.hostname;if(ex(u)){if(c.rp.id!==u)return new ct({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function lM({error:e,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(ex(a)){if(r.rpId!==a)return new ct({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class cM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const uM=new cM;function dM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:n,user:r,excludeCredentials:a}=e,o=Jc(e,["challenge","user","excludeCredentials"]),c=Ua(n).buffer,u=Object.assign(Object.assign({},r),{id:Ua(r.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:c,user:u});if(a&&a.length>0){d.excludeCredentials=new Array(a.length);for(let g=0;g<a.length;g++){const h=a[g];d.excludeCredentials[g]=Object.assign(Object.assign({},h),{id:Ua(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function fM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:n,allowCredentials:r}=e,a=Jc(e,["challenge","allowCredentials"]),o=Ua(n).buffer,c=Object.assign(Object.assign({},a),{challenge:o});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];c.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Ua(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function hM(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:br(new Uint8Array(e.response.attestationObject)),clientDataJSON:br(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function gM(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,a=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:br(new Uint8Array(o.authenticatorData)),clientDataJSON:br(new Uint8Array(o.clientDataJSON)),signature:br(new Uint8Array(o.signature)),userHandle:o.userHandle?br(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function ex(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Cv(){var e,n;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function mM(e){try{const n=await navigator.credentials.create(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new jc("Browser returned unexpected credential type",n)}:{data:null,error:new jc("Empty credential response",n)}}catch(n){return{data:null,error:oM({error:n,options:e})}}}async function pM(e){try{const n=await navigator.credentials.get(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new jc("Browser returned unexpected credential type",n)}:{data:null,error:new jc("Empty credential response",n)}}catch(n){return{data:null,error:lM({error:n,options:e})}}}const yM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Dc(...e){const n=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),a={};for(const o of e)if(o)for(const c in o){const u=o[c];if(u!==void 0)if(Array.isArray(u))a[c]=u;else if(r(u))a[c]=u;else if(n(u)){const d=a[c];n(d)?a[c]=Dc(d,u):a[c]=Dc(u)}else a[c]=u}return a}function bM(e,n){return Dc(yM,e,n||{})}function wM(e,n){return Dc(vM,e,n||{})}class xM{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:a,signal:o},c){var u;try{const{data:d,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!d)return{data:null,error:g};const h=o??uM.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:p}=d.webauthn.credential_options.publicKey;if(!p.name){const v=a;if(v)p.name=`${p.id}:${v}`;else{const b=(await this.client.getUser()).data.user,E=((u=b?.user_metadata)===null||u===void 0?void 0:u.name)||b?.email||b?.id||"User";p.name=`${p.id}:${E}`}}p.displayName||(p.displayName=p.name)}switch(d.webauthn.type){case"create":{const p=bM(d.webauthn.credential_options.publicKey,c?.create),{data:v,error:y}=await mM({publicKey:p,signal:h});return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const p=wM(d.webauthn.credential_options.publicKey,c?.request),{data:v,error:y}=await pM(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(d){return me(d)?{data:null,error:d}:{data:null,error:new yr("Unexpected error in challenge",d)}}}async _verify({challengeId:n,factorId:r,webauthn:a}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:a})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!r)return{data:null,error:new ho("rpId is required for WebAuthn authentication")};try{if(!Cv())return{data:null,error:new yr("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:a},signal:o},{request:c});if(!u)return{data:null,error:d};const{webauthn:g}=u;return this._verify({factorId:n,challengeId:u.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:a,credential_response:g.credential_response}})}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new yr("Unexpected error in authenticate",u)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!r)return{data:null,error:new ho("rpId is required for WebAuthn registration")};try{if(!Cv())return{data:null,error:new yr("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:n});if(!u)return await this.client.mfa.listFactors().then(p=>{var v;return(v=p.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===n&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:d};const{data:g,error:h}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:o},{create:c});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:a,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:h}}catch(u){return me(u)?{data:null,error:u}:{data:null,error:new yr("Unexpected error in register",u)}}}}iM();const _M={url:bk,storageKey:wk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Av(e,n,r){return await r()}const Ta={};class go{get jwks(){var n,r;return(r=(n=Ta[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Ta[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{cachedAt:n})}constructor(n){var r,a,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},_M),n);if(this.storageKey=c.storageKey,this.instanceID=(r=go.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,go.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&St()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new tM({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Jw(c.fetch),this.lock=c.lock||Av,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&St()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=nM:this.lock=Av,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Qw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ev(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Ev(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}c.skipAutoInitialize||this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Xw}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},a="none";if(St()&&(r=zk(window.location.href),this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce")),St()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Ck(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?this._returnResult({error:r}):this._returnResult({error:new yr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,a,o;try{const c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:hn}),{data:u,error:d}=c;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var r,a,o;try{let c;if("email"in n){const{email:p,password:v,options:y}=n;let b=null,E=null;this.flowType==="pkce"&&([b,E]=await _a(this.storage,this.storageKey)),c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:v,data:(r=y?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:E},xform:hn})}else if("phone"in n){const{phone:p,password:v,options:y}=n;c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(a=y?.data)!==null&&a!==void 0?a:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:hn})}else throw new lc("You must provide either an email or phone number and a password");const{data:u,error:d}=c;if(d||!u)return await _t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const g=u.session,h=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:u,options:d}=n;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_v})}else if("phone"in n){const{phone:c,password:u,options:d}=n;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_v})}else throw new lc("You must provide either an email or phone number and a password");const{data:a,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!a||!a.session||!a.user){const c=new xa;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,a,o,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,a,o,c,u,d,g,h,p,v,y;let b,E;if("message"in n)b=n.message,E=n.signature;else{const{chain:x,wallet:C,statement:T,options:k}=n;let _;if(St())if(typeof C=="object")_=C;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")_=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=C}const N=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href),$=await _.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Ww($[0]);let U=(a=k?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!U){const J=await _.request({method:"eth_chainId"});U=rM(J)}const P={domain:N.host,address:j,statement:T,uri:N.href,version:"1",chainId:U,nonce:(o=k?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=k?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=k?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(g=k?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(h=k?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=k?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=sM(P),E=await _.request({method:"personal_sign",params:[aM(b),j]})}try{const{data:x,error:C}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:E},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=n.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:hn});if(C)throw C;if(!x||!x.session||!x.user){const T=new xa;return this._returnResult({data:{user:null,session:null},error:T})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:C})}catch(x){if(me(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(n){var r,a,o,c,u,d,g,h,p,v,y,b;let E,x;if("message"in n)E=n.message,x=n.signature;else{const{chain:C,wallet:T,statement:k,options:_}=n;let N;if(St())if(typeof T=="object")N=T;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))N=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=T}const $=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const j=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),k?{statement:k}:null));let U;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")U=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)U=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)E=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),x=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${$.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(o=(a=_?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=_?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((u=_?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((d=_?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((g=_?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((h=_?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((v=(p=_?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",..._.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const j=await N.signMessage(new TextEncoder().encode(E),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:C,error:T}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:br(x)},!((y=n.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:hn});if(T)throw T;if(!C||!C.session||!C.user){const k=new xa;return this._returnResult({data:{user:null,session:null},error:k})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:T})}catch(C){if(me(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(n){const r=await hr(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(r??"").split("/");try{if(!a&&this.flowType==="pkce")throw new Ak;const{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:hn});if(await _t(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const d=new xa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:r,provider:a,token:o,access_token:c,nonce:u}=n,d=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:hn}),{data:g,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!g||!g.session||!g.user){const p=new xa;return this._returnResult({data:{user:null,session:null},error:p})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:h})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,a,o,c,u;try{if("email"in n){const{email:d,options:g}=n;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await _a(this.storage,this.storageKey));const{error:v}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(a=g?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in n){const{phone:d,options:g}=n,{data:h,error:p}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=g?.data)!==null&&o!==void 0?o:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new lc("You must provide either an email or phone number.")}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(n){var r,a;try{let o,c;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:u,error:d}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:hn});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,h=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:h,session:g},error:null})}catch(o){if(me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var r,a,o,c,u;try{let d=null,g=null;this.flowType==="pkce"&&([d,g]=await _a(this.storage,this.storageKey));const h=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:g}),headers:this.headers,xform:Fk});return!((c=h.data)===null||c===void 0)&&c.url&&St()&&!(!((u=n.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)throw a;if(!r)throw new Kt;const{error:o}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(me(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:a,type:o,options:c}=n,{error:u}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in n){const{phone:a,type:o,options:c}=n,{data:u,error:d}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new lc("You must provide either an email or phone number and a type")}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<Pf:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const u=await hr(this.userStorage,this.storageKey+"-user");u?.user?n.user=u.user:n.user=Xf()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};n.user=Kk(n.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Hi}):await this._useSession(async r=>{var a,o,c;const{data:u,error:d}=r;if(d)throw d;return!(!((a=u.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kt}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:Hi})})}catch(r){if(me(r))return Gf(r)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async a=>{const{data:o,error:c}=a;if(c)throw c;if(!o.session)throw new Kt;const u=o.session;let d=null,g=null;this.flowType==="pkce"&&n.email!=null&&([d,g]=await _a(this.storage,this.storageKey));const{data:h,error:p}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:d,code_challenge_method:g}),jwt:u.access_token,xform:Hi});if(p)throw p;return u.user=h.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(a){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Kt;const r=Date.now()/1e3;let a=r,o=!0,c=null;const{payload:u}=uc(n.access_token);if(u.exp&&(a=u.exp,o=a<=r),o){const{data:d,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:g}=await this._getUser(n.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});c={access_token:n.access_token,refresh_token:n.refresh_token,user:d.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(me(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var a;if(!n){const{data:u,error:d}=r;if(d)throw d;n=(a=u.session)!==null&&a!==void 0?a:void 0}if(!n?.refresh_token)throw new Kt;const{data:o,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!St())throw new cc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new cc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new mv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new mv("No code detected.");const{data:k,error:_}=await this._exchangeCodeForSession(n.code);if(_)throw _;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:d,expires_at:g,token_type:h}=n;if(!c||!d||!u||!h)throw new cc("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(d);let y=p+v;g&&(y=parseInt(g));const b=y-p;b*1e3<=Oa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const E=y-v;p-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,y,p):p-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,y,p);const{data:x,error:C}=await this._getUser(c);if(C)throw C;const T={provider_token:a,provider_refresh_token:o,access_token:c,expires_in:v,expires_at:y,refresh_token:u,token_type:h,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:n.type},error:null})}catch(a){if(me(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await hr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:o,error:c}=r;if(c&&!Gf(c))return this._returnResult({error:c});const u=(a=o.session)===null||a===void 0?void 0:a.access_token;if(u){const{error:d}=await this.admin.signOut(u,n);if(d&&!(Tk(d)&&(d.status===404||d.status===401||d.status===403)||Gf(d)))return this._returnResult({error:d})}return n!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=Dk(),a={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async r=>{var a,o;try{const{data:{session:c},error:u}=r;if(u)throw u;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await _a(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:a,error:o}=await this._useSession(async c=>{var u,d,g,h,p;const{data:v,error:y}=c;if(y)throw y;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(u=n.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=n.options)===null||d===void 0?void 0:d.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return St()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:n.provider,url:a?.url},error:null})}catch(a){if(me(a))return this._returnResult({data:{provider:n.provider,url:null},error:a});throw a}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var a;try{const{error:o,data:{session:c}}=r;if(o)throw o;const{options:u,provider:d,token:g,access_token:h,nonce:p}=n,v=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:d,id_token:g,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hn}),{data:y,error:b}=v;return b?this._returnResult({data:{user:null,session:null},error:b}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new xa}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:b}))}catch(o){if(await _t(this.storage,`${this.storageKey}-code-verifier`),me(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var a,o;const{data:c,error:u}=r;if(u)throw u;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await Lk(async o=>(o>0&&await $k(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:hn})),(o,c)=>{const u=200*Math.pow(2,o);return c&&Yf(c)&&Date.now()+u-a<Oa})}catch(a){if(this._debug(r,"error",a),me(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",a),St()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=await hr(this.storage,this.storageKey);if(o&&this.userStorage){let u=await hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Ra(this.userStorage,this.storageKey+"-user",u)),o.user=(n=u?.user)!==null&&n!==void 0?n:Xf()}else if(o&&!o.user&&!o.user){const u=await hr(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await _t(this.storage,this.storageKey+"-user"),await Ra(this.storage,this.storageKey,o)):o.user=Xf()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&await this._removeSession();return}const c=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Pf;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${Pf}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Yf(u)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(a,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o),console.error(o);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var r,a;if(!n)throw new Kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new eu;const{data:c,error:u}=await this._refreshAccessToken(n);if(u)throw u;if(!c.session)throw new Kt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(o,"error",c),me(c)){const u={data:null,error:c};return Yf(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(u),u}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,a=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(n,r)}catch(g){c.push(g)}});if(await Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await _t(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await Ra(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const c=wv(o);await Ra(this.storage,this.storageKey,c)}else{const o=wv(r);await Ra(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&St()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Oa);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-n)/Oa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Oa}ms, refresh threshold is ${yh} ticks`),o<=yh&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Fw)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,a){const o=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,u]=await _a(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(a?.queryParams){const c=new URLSearchParams(a.queryParams);o.push(c.toString())}return a?.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;return c?this._returnResult({data:null,error:c}):await we(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var a,o;const{data:c,error:u}=r;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:h}=await we(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(a=c?.session)===null||a===void 0?void 0:a.access_token});return h?this._returnResult({data:null,error:h}):(n.factorType==="totp"&&g.type==="totp"&&(!((o=g?.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?hM(n.webauthn.credential_response):gM(n.webauthn.credential_response)})}:{code:n.code}),{data:d,error:g}=await we(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:u,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:g}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var a;const{data:o,error:c}=r;if(c)return this._returnResult({data:null,error:c});const u=await we(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:dM(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:fM(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:a}=await this._challenge({factorId:n.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:a}=await this.getUser();if(a)return{data:null,error:a};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,a,o,c;if(n)try{const{payload:b}=uc(n);let E=null;b.aal&&(E=b.aal);let x=E;const{data:{user:C},error:T}=await this.getUser(n);if(T)return this._returnResult({data:null,error:T});((a=(r=C?.factors)===null||r===void 0?void 0:r.filter(N=>N.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(x="aal2");const _=b.amr||[];return{data:{currentLevel:E,nextLevel:x,currentAuthenticationMethods:_},error:null}}catch(b){if(me(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:u},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=uc(u.access_token);let h=null;g.aal&&(h=g.aal);let p=h;((c=(o=u.user.factors)===null||o===void 0?void 0:o.filter(b=>b.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(p="aal2");const y=g.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:a},error:o}=r;return o?this._returnResult({data:null,error:o}):a?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(n,r){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Kt});const u=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!r?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?await we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Kt})})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:a},error:o}=r;return o?this._returnResult({data:null,error:o}):a?(await we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kt})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let a=r.keys.find(d=>d.kid===n);if(a)return a;const o=Date.now();if(a=this.jwks.keys.find(d=>d.kid===n),a&&this.jwks_cached_at+Sk>o)return a;const{data:c,error:u}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,a=c.keys.find(d=>d.kid===n),!a)?null:a}async getClaims(n,r={}){try{let a=n;if(!a){const{data:b,error:E}=await this.getSession();if(E||!b.session)return this._returnResult({data:null,error:E});a=b.session.access_token}const{header:o,payload:c,signature:u,raw:{header:d,payload:g}}=uc(a);r?.allowExpired||Gk(c.exp);const h=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!h){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:c,header:o,signature:u},error:null}}const p=Yk(o.alg),v=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,u,Mk(`${d}.${g}`)))throw new wh("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}}go.nextInstanceID={};const SM=go,EM="2.97.0";let Ys="";typeof Deno<"u"?Ys="deno":typeof document<"u"?Ys="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ys="react-native":Ys="node";const TM={"X-Client-Info":`supabase-js-${Ys}/${EM}`},CM={headers:TM},AM={schema:"public"},NM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},OM={};function mo(e){"@babel/helpers - typeof";return mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mo(e)}function RM(e,n){if(mo(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,n);if(mo(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function kM(e){var n=RM(e,"string");return mo(n)=="symbol"?n:n+""}function MM(e,n,r){return(n=kM(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Nv(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function tt(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Nv(Object(r),!0).forEach(function(a){MM(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nv(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}const jM=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),DM=()=>Headers,zM=(e,n,r)=>{const a=jM(r),o=DM();return async(c,u)=>{var d;const g=(d=await n())!==null&&d!==void 0?d:e;let h=new o(u?.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${g}`),a(c,tt(tt({},u),{},{headers:h}))}};function UM(e){return e.endsWith("/")?e:e+"/"}function $M(e,n){var r,a;const{db:o,auth:c,realtime:u,global:d}=e,{db:g,auth:h,realtime:p,global:v}=n,y={db:tt(tt({},g),o),auth:tt(tt({},h),c),realtime:tt(tt({},p),u),storage:{},global:tt(tt(tt({},v),d),{},{headers:tt(tt({},(r=v?.headers)!==null&&r!==void 0?r:{}),(a=d?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function LM(e){const n=e?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(UM(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var HM=class extends SM{constructor(e){super(e)}},BM=class{constructor(e,n,r){var a,o;this.supabaseUrl=e,this.supabaseKey=n;const c=LM(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:AM,realtime:OM,auth:tt(tt({},NM),{},{storageKey:u}),global:CM},g=$M(r??{},d);if(this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=g.auth)!==null&&h!==void 0?h:{},this.headers,g.global.fetch)}this.fetch=zM(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(tt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new TR(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new vk(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new yR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,n,r;if(e.accessToken)return await e.accessToken();const{data:a}=await e.auth.getSession();return(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:o,storageKey:c,flowType:u,lock:d,debug:g,throwOnError:h},p,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new HM({url:this.authUrl.href,headers:tt(tt({},y),p),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:o,flowType:u,lock:d,debug:g,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new qR(this.realtimeUrl.href,tt(tt({},e),{},{params:tt(tt({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const IM=(e,n,r)=>new BM(e,n,r);function qM(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const n=e.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}qM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const VM="https://nlavjplhryynbdyubumj.supabase.co",PM="sb_publishable_RvhGSkpc-ILlK7mi_uHxcg_WGoonOjj",Ca=IM(VM,PM),GM=()=>!0,YM=()=>{const[e,n]=V.useState([]),[r,a]=V.useState(!1),[o,c]=V.useState(null),[u,d]=V.useState(null),g=V.useCallback(async()=>{a(!0),c(null);try{const{data:E,error:x}=await Ca.from("models").select("id, name, updated_at").order("updated_at",{ascending:!1});if(x)throw x;n(E||[])}catch(E){c(E.message),console.error("Error fetching models:",E)}finally{a(!1)}},[]),h=V.useCallback(async E=>{a(!0),c(null);try{const{data:x,error:C}=await Ca.from("models").select("*").eq("id",E).single();if(C)throw C;return d(E),x}catch(x){return c(x.message),console.error("Error loading model:",x),null}finally{a(!1)}},[]),p=V.useCallback(async(E,x)=>{a(!0),c(null);try{const C={name:E,data:x,updated_at:new Date().toISOString()};let T;if(u){const{data:k,error:_}=await Ca.from("models").update(C).eq("id",u).select().single();if(_)throw _;T=k}else{const{data:k,error:_}=await Ca.from("models").insert(C).select().single();if(_)throw _;T=k,d(T.id)}return await g(),T}catch(C){return c(C.message),console.error("Error saving model:",C),null}finally{a(!1)}},[u,g]),v=V.useCallback(async(E,x)=>{a(!0),c(null);try{const{data:C,error:T}=await Ca.from("models").insert({name:E,data:x,updated_at:new Date().toISOString()}).select().single();if(T)throw T;return d(C.id),await g(),C}catch(C){return c(C.message),console.error("Error saving model:",C),null}finally{a(!1)}},[g]),y=V.useCallback(async E=>{a(!0),c(null);try{const{error:x}=await Ca.from("models").delete().eq("id",E);if(x)throw x;return u===E&&d(null),await g(),!0}catch(x){return c(x.message),console.error("Error deleting model:",x),!1}finally{a(!1)}},[u,g]),b=V.useCallback(()=>{d(null)},[]);return V.useEffect(()=>{g()},[g]),{models:e,loading:r,error:o,currentModelId:u,isConfigured:GM(),fetchModels:g,loadModel:h,saveModel:p,saveAsModel:v,deleteModel:y,newModel:b}},XM=()=>{const[e,n]=V.useState(!1),[r,a]=V.useState(!1),[o,c]=V.useState(""),u=V.useRef(null),{models:d,loading:g,error:h,currentModelId:p,loadModel:v,saveModel:y,saveAsModel:b,deleteModel:E,newModel:x,fetchModels:C}=YM(),{metadata:T,exportModel:k,importModel:_,clearAll:N,setMetadata:$}=Te();V.useEffect(()=>{const Z=q=>{u.current&&!u.current.contains(q.target)&&(n(!1),a(!1))};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]);const j=async()=>{const Z=k();p?await y(T.name,Z):(a(!0),c(T.name)),n(!1)},U=async()=>{if(!o.trim())return;const Z=k();$({...T,name:o.trim()}),await b(o.trim(),{...Z,metadata:{...Z.metadata,name:o.trim()}}),a(!1),c("")},P=async Z=>{const q=await v(Z);q?.data&&_(q.data),n(!1)},J=async(Z,q)=>{Z.stopPropagation(),window.confirm("Delete this model? This cannot be undone.")&&await E(q)},oe=()=>{N(),x(),$({name:"New C4 Model",version:"1.0",author:"Solution Architect"}),n(!1)},te=d.find(Z=>Z.id===p);return S.jsxs("div",{className:"relative",ref:u,children:[S.jsxs("button",{onClick:()=>n(!e),className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm transition-colors",title:"Cloud models",children:[g?S.jsx(DN,{className:"w-4 h-4 animate-spin"}):S.jsx(AN,{className:"w-4 h-4"}),S.jsx("span",{className:"max-w-[120px] truncate",children:te?te.name:"Models"}),S.jsx(EN,{className:"w-3 h-3"})]}),e&&S.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:r?S.jsxs("div",{className:"p-3",children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Name"}),S.jsx("input",{type:"text",value:o,onChange:Z=>c(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&U(),placeholder:"Enter model name",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),S.jsxs("div",{className:"flex gap-2 mt-2",children:[S.jsx("button",{onClick:U,disabled:!o.trim(),className:"flex-1 px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"}),S.jsx("button",{onClick:()=>a(!1),className:"px-3 py-1.5 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 text-sm",children:"Cancel"})]})]}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"p-2 border-b border-gray-100",children:[S.jsxs("button",{onClick:oe,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(RN,{className:"w-4 h-4"}),"New Model"]}),S.jsxs("button",{onClick:j,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(P0,{className:"w-4 h-4"}),p?"Save":"Save As..."]}),p&&S.jsxs("button",{onClick:()=>{a(!0),c(T.name)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 rounded flex items-center gap-2",children:[S.jsx(P0,{className:"w-4 h-4"}),"Save As..."]})]}),S.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[h&&S.jsxs("div",{className:"px-3 py-2 text-sm text-red-600 bg-red-50 border-b border-red-100",children:["Error: ",h,S.jsx("button",{onClick:()=>C(),className:"ml-2 underline hover:no-underline",children:"Retry"})]}),d.length===0&&!h?S.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 text-center",children:"No saved models"}):d.map(Z=>S.jsxs("div",{onClick:()=>P(Z.id),className:`flex items-center justify-between px-3 py-2 text-sm hover:bg-gray-100 cursor-pointer ${Z.id===p?"bg-indigo-50":""}`,children:[S.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[S.jsx(kN,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),S.jsx("span",{className:"truncate",children:Z.name})]}),S.jsx("button",{onClick:q=>J(q,Z.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete model",children:S.jsx(ch,{className:"w-3 h-3"})})]},Z.id))]})]})})]})},KM=()=>{const{metadata:e,setMetadata:n,exportModel:r,importModel:a,clearAll:o}=Te(),c=Te(D=>D.viewMode),u=Te(D=>D.setViewMode),[d,g]=V.useState(!1),[h,p]=V.useState(!1),[v,y]=V.useState(!1),[b,E]=V.useState(!1),[x,C]=V.useState(e.name),[T,k]=V.useState(null),_=async()=>{const D=r(),{url:O,error:M}=uR(D);if(M){k("error"),alert(M),setTimeout(()=>k(null),2e3);return}try{await navigator.clipboard.writeText(O),k("copied"),setTimeout(()=>k(null),2e3)}catch{const Q=document.createElement("textarea");Q.value=O,document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q),k("copied"),setTimeout(()=>k(null),2e3)}},N=()=>{const D=r(),O=JSON.stringify(D,null,2),M="data:application/json;charset=utf-8,"+encodeURIComponent(O),K=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.json`,Q=document.createElement("a");Q.setAttribute("href",M),Q.setAttribute("download",K),Q.click()},$=D=>{const O=D.target.files?.[0];if(O){const M=new FileReader;M.onload=K=>{try{const Q=JSON.parse(K.target.result);if(Q.model&&(Q.views||Q.documentation)){const se=sR(Q);a(se),alert("Structurizr workspace imported successfully!")}else a(Q),alert("Model imported successfully!")}catch(Q){alert("Error importing model: "+Q.message)}},M.readAsText(O)}y(!1),D.target.value=""},j=D=>{const O=D.target.files?.[0];if(O){const M=new FileReader;M.onload=K=>{try{const Q=K.target.result,se=rR(Q);a(se),alert(`Spreadsheet imported successfully! Created ${se.systems?.length||0} systems, ${se.containers?.length||0} containers, ${se.components?.length||0} components.`)}catch(Q){alert("Error importing spreadsheet: "+Q.message)}},M.readAsText(O)}y(!1),D.target.value=""},U=()=>{const D=r(),O=aR(D),M=JSON.stringify(O,null,2),K="data:application/json;charset=utf-8,"+encodeURIComponent(M),Q=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}-structurizr.json`,se=document.createElement("a");se.setAttribute("href",K),se.setAttribute("download",Q),se.click(),p(!1)},P=()=>{window.confirm("Are you sure you want to clear all elements? This cannot be undone.")&&o()},J=()=>{const D=r(),O=$w(D),M=new Blob([O],{type:"text/plain"}),K=URL.createObjectURL(M),Q=document.createElement("a");Q.href=K,Q.download=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.puml`,Q.click(),URL.revokeObjectURL(K),p(!1)},oe=()=>{const D=r(),O=KO(D),M=new Blob([O],{type:"text/plain"}),K=URL.createObjectURL(M),Q=document.createElement("a");Q.href=K,Q.download=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.mmd`,Q.click(),URL.revokeObjectURL(K),p(!1)},te=()=>{const D=r(),O=Lw(D),M=new Blob([O],{type:"text/markdown"}),K=URL.createObjectURL(M),Q=document.createElement("a");Q.href=K,Q.download=`${(D.metadata?.name||"c4-model").replace(/\s+/g,"-").toLowerCase()}.md`,Q.click(),URL.revokeObjectURL(K),p(!1)},Z=()=>{const D=r();ZO(D),p(!1)},q=async()=>{const D=r();await YO(D),p(!1)},z=async()=>{const D=r();await XO(D),p(!1)},G=()=>{const D=r();eR(D),p(!1)},R=()=>{const D=r();tR(D),p(!1)},H=()=>{C(e.name),E(!0)},B=()=>{const D=x.trim();D?n({...e,name:D}):C(e.name),E(!1)},X=D=>{D.key==="Enter"?B():D.key==="Escape"&&(C(e.name),E(!1))};return S.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Diagrams"}),S.jsx("span",{className:"text-gray-400",children:"|"}),b?S.jsx("input",{type:"text",value:x,onChange:D=>C(D.target.value),onBlur:B,onKeyDown:X,autoFocus:!0,className:"text-sm text-gray-900 font-medium px-2 py-1 border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[200px]"}):S.jsx("button",{onClick:H,className:"text-sm text-gray-600 cursor-text hover:text-gray-900 hover:bg-gray-100 px-2 py-1 rounded transition-colors border border-transparent hover:border-gray-300",title:"Click to edit model name",children:e.name})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx(JN,{}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(XM,{}),S.jsxs("button",{onClick:_,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm transition-colors ${T==="copied"?"bg-green-600 text-white":T==="error"?"bg-red-600 text-white":"bg-gray-600 text-white hover:bg-gray-700"}`,title:"Copy shareable link to clipboard",children:[T==="copied"?S.jsx(SN,{className:"w-4 h-4"}):T==="error"?S.jsx(CN,{className:"w-4 h-4"}):S.jsx(UN,{className:"w-4 h-4"}),T==="copied"?"Copied!":"Share"]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>p(!h),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm transition-colors",title:"Export model",children:[S.jsx(NN,{className:"w-4 h-4"}),"Export"]}),h&&S.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:S.jsxs("div",{className:"py-1",children:[S.jsxs("button",{onClick:N,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Bf,{className:"w-4 h-4"}),"JSON"]}),S.jsxs("button",{onClick:U,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Bf,{className:"w-4 h-4"}),"Structurizr JSON"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:J,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Hf,{className:"w-4 h-4"}),"PlantUML"]}),S.jsxs("button",{onClick:oe,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Hf,{className:"w-4 h-4"}),"Mermaid"]}),S.jsxs("button",{onClick:te,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(V0,{className:"w-4 h-4"}),"Markdown"]}),S.jsxs("button",{onClick:Z,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(V0,{className:"w-4 h-4"}),"HTML Document"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:q,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(q0,{className:"w-4 h-4"}),"PNG Image"]}),S.jsxs("button",{onClick:z,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(q0,{className:"w-4 h-4"}),"SVG Image"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:G,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(Hf,{className:"w-4 h-4"}),"Draw.io (.drawio)"]}),S.jsx("hr",{className:"my-1"}),S.jsxs("button",{onClick:R,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2",children:[S.jsx(G0,{className:"w-4 h-4"}),"Spreadsheet (.csv)"]})]})})]}),S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>y(!v),className:"flex items-center gap-2 px-3 py-1.5 bg-green-700 text-white rounded-md hover:bg-green-800 text-sm transition-colors",title:"Import model",children:[S.jsx($N,{className:"w-4 h-4"}),"Import"]}),v&&S.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:S.jsxs("div",{className:"py-1",children:[S.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[S.jsx(Bf,{className:"w-4 h-4"}),"JSON / Structurizr",S.jsx("input",{type:"file",accept:".json",onChange:$,className:"hidden","aria-label":"Import JSON model file"})]}),S.jsxs("label",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 cursor-pointer",children:[S.jsx(G0,{className:"w-4 h-4"}),"Spreadsheet (.csv)",S.jsx("input",{type:"file",accept:".csv",onChange:j,className:"hidden","aria-label":"Import CSV spreadsheet"})]})]})})]}),S.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-md p-1",children:[S.jsxs("button",{onClick:()=>u("edit"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="edit"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Edit mode - navigate and edit elements",children:[S.jsx(ON,{className:"w-4 h-4"}),"Edit"]}),S.jsxs("button",{onClick:()=>u("tree"),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${c==="tree"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,title:"Tree view - see full hierarchy",children:[S.jsx(MN,{className:"w-4 h-4"}),"Tree"]})]}),S.jsx("button",{onClick:P,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm transition-colors",title:"Clear all elements",children:"Clear All"})]})]})]})})},dc="c4-model-autosave",ZM=3e4,Aa=e=>!e||typeof e!="object"?null:{id:e.id,type:e.type,name:e.name||"",description:e.description||"",technology:e.technology||"",tags:Array.isArray(e.tags)?e.tags:[],parentId:e.parentId||null,position:e.position&&typeof e.position=="object"?{x:Number(e.position.x)||0,y:Number(e.position.y)||0}:{x:0,y:0},width:e.width?Number(e.width):void 0,height:e.height?Number(e.height):void 0},QM=e=>!e||typeof e!="object"?null:{id:e.id,from:e.from,to:e.to,description:e.description||"",technology:e.technology||"",arrowDirection:e.arrowDirection||"right",lineStyle:e.lineStyle||"solid",animated:!!e.animated},fc=e=>{if(!e||typeof e!="object")return null;const n=(r,a)=>Array.isArray(r)?r.map(a).filter(o=>o!==null):[];return{metadata:e.metadata||{name:"New C4 Model",version:"1.0",author:"Solution Architect"},systems:n(e.systems,Aa),containers:n(e.containers,Aa),components:n(e.components,Aa),people:n(e.people,Aa),externalSystems:n(e.externalSystems,Aa),shadows:(e.shadows||[]).map(Aa),relationships:n(e.relationships,QM)}},JM=()=>{const{exportModel:e,importModel:n}=Te();V.useEffect(()=>{if(hR())try{const a=dR();if(a){const o=fc(a);if(o){n(o),console.log("Model loaded from shared URL"),fR();return}}}catch(a){console.error("Error loading shared model from URL:",a)}const r=localStorage.getItem(dc);if(r)try{const a=JSON.parse(r),o=fc(a);o&&window.confirm("Found a previously saved model. Would you like to restore it?")&&(n(o),console.log("Model restored from local storage (sanitized)"))}catch(a){console.error("Error loading saved model:",a),console.warn("Clearing corrupted localStorage data"),localStorage.removeItem(dc)}},[n]),V.useEffect(()=>{const r=setInterval(()=>{const a=e(),o=fc(a);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(dc,JSON.stringify(o)),console.log("Model auto-saved to local storage")}catch(c){console.error("Error saving model to localStorage:",c)}},ZM);return()=>clearInterval(r)},[e]),V.useEffect(()=>{const r=()=>{const a=e(),o=fc(a);if(o.systems?.length>0||o.containers?.length>0||o.components?.length>0||o.people?.length>0||o.externalSystems?.length>0)try{localStorage.setItem(dc,JSON.stringify(o))}catch(c){console.error("Error saving model on unload:",c)}};return window.addEventListener("beforeunload",r),()=>window.removeEventListener("beforeunload",r)},[e])},FM=()=>{const e=Te(d=>d.currentParentId),n=Te(d=>d.viewMode),r=Te(d=>d.navigateTo),a=Te(d=>d.navigateToRoot),o=Te(d=>d.setViewMode),c=V.useRef(!1),u=V.useRef(null);V.useEffect(()=>{if(c.current){c.current=!1;return}const d=`${e||"root"}-${n}`;if(u.current===d)return;const g={currentParentId:e,viewMode:n};u.current===null?window.history.replaceState(g,""):window.history.pushState(g,""),u.current=d},[e,n]),V.useEffect(()=>{const d=g=>{c.current=!0;const h=g.state;h?(h.currentParentId===null?a():r(h.currentParentId),h.viewMode&&o(h.viewMode),u.current=`${h.currentParentId||"root"}-${h.viewMode||"edit"}`):(a(),o("edit"),u.current="root-edit")};if(window.addEventListener("popstate",d),!window.history.state){const g={currentParentId:e,viewMode:n};window.history.replaceState(g,""),u.current=`${e||"root"}-${n}`}return()=>{window.removeEventListener("popstate",d)}},[r,a,o])},WM={c4Node:BN,shadowNode:qN},ej=(e,n)=>{if(!e?.position||!n?.position)return{sourceHandle:"bottom",targetHandle:"top"};const r=n.position.x-e.position.x,a=n.position.y-e.position.y;return Math.abs(r)>Math.abs(a)?r>0?{sourceHandle:"right",targetHandle:"left"}:{sourceHandle:"left",targetHandle:"right"}:a>0?{sourceHandle:"bottom",targetHandle:"top"}:{sourceHandle:"top",targetHandle:"bottom"}};function tj(){const[e,n,r]=qA([]),[a,o,c]=VA([]),[u,d]=V.useState(null),{getAllElements:g,relationships:h,updateElement:p,setSelectedElement:v,setSelectedEdge:y,selectedElement:b,currentParentId:E,navigateInto:x,navigateTo:C}=Te(),T=Te(D=>D.navigateUp),k=Te(D=>D.navigateToRoot),_=Te(D=>D.viewMode),N=V.useCallback(D=>{r(D)},[r]),$=Te(D=>D.systems),j=Te(D=>D.containers),U=Te(D=>D.components),P=Te(D=>D.people),J=Te(D=>D.externalSystems),oe=Te(D=>D.shadows),te=Te(D=>D.getVisibleElements);JM(),FM(),V.useEffect(()=>{const O=te().map(M=>({id:M.id,type:M.type==="shadow"?"shadowNode":"c4Node",position:M.position||{x:Math.random()*400,y:Math.random()*300},data:{...M,label:M.name}}));n(O)},[$,j,U,P,J,oe,E,te,n]),V.useEffect(()=>{const D=te(),O=h.map(M=>{const K=M.arrowDirection||"right";let Q,se;(K==="left"||K==="both")&&(Q={type:_r.ArrowClosed}),(K==="right"||K==="both")&&(se={type:_r.ArrowClosed});const ue=M.lineStyle||"solid";let ce;ue==="dashed"?ce="5,5":ue==="dotted"&&(ce="2,2");const le=D.find(pe=>pe.id===M.from),de=D.find(pe=>pe.id===M.to),{sourceHandle:Ee,targetHandle:_e}=ej(le,de);return{id:M.id,source:M.from,target:M.to,sourceHandle:Ee,targetHandle:_e,label:M.description||"",type:"smoothstep",animated:M.animated||!1,markerStart:Q,markerEnd:se,style:{stroke:"#64748b",strokeWidth:2,strokeDasharray:ce},labelStyle:{fill:"#334155",fontSize:12,fontWeight:500},labelBgStyle:{fill:"#f8fafc",fillOpacity:.9}}});o(O)},[h,o,te,$,j,U,P,J,oe,E]);const Z=V.useCallback((D,O)=>{const M=g().find(K=>K.id===O.id);M&&p(M.type,M.id,{position:{x:O.position.x,y:O.position.y}})},[g,p]),q=V.useCallback(D=>{const O={...D,type:"smoothstep",animated:!1,markerEnd:{type:_r.ArrowClosed}};o(Q=>Tb(O,Q));const{source:M,target:K}=D;Te.getState().addRelationship({from:M,to:K,description:"New relationship",technology:""})},[o]);V.useEffect(()=>(typeof window<"u"&&(window.__CREATE_CONNECTION__=q),()=>{typeof window<"u"&&delete window.__CREATE_CONNECTION__}),[q]),V.useEffect(()=>{const D=O=>{O.target.tagName==="INPUT"||O.target.tagName==="TEXTAREA"||(O.key==="Escape"&&(b?v(null):T()),O.key==="Home"&&!O.ctrlKey&&!O.metaKey&&k(),O.key==="Enter"&&b&&(b.type==="system"||b.type==="container")&&x(b.id))};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[b,v,T,k,x]);const z=V.useCallback((D,O)=>{try{const M=g().find(K=>K.id===O.id);M?(console.log("[Diagrams] Node clicked:",M.type,M.id),v(M)):(console.error("[Diagrams] Element not found for node:",O.id),v(null))}catch(M){console.error("[Diagrams] Error in onNodeClick:",M),v(null)}},[g,v]),G=V.useCallback((D,O)=>{D.stopPropagation();const M=g().find(K=>K.id===O.id);if(M){if(M.type==="shadow"&&M.targetId){const K=g().find(Q=>Q.id===M.targetId);if(K){(K.type==="system"||K.type==="container")&&x(K.id);return}}(M.type==="system"||M.type==="container")&&x(M.id)}},[g,x]),R=V.useCallback((D,O)=>{const M=h.find(K=>K.id===O.id);y(M)},[h,y]),H=V.useCallback(()=>{v(null),y(null)},[v,y]),B=V.useCallback(D=>{D.preventDefault(),D.dataTransfer.dropEffect="move"},[]),X=V.useCallback(D=>{D.preventDefault();const O=D.dataTransfer.getData("application/c4-element-type");if(!O||!u)return;const M=u.screenToFlowPosition({x:D.clientX,y:D.clientY}),K={name:`New ${O.charAt(0).toUpperCase()+O.slice(1)}`,description:"",technology:"",position:M};Te.getState().addElement(O,K)},[u]);return S.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[S.jsx(KM,{}),S.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[_==="edit"&&S.jsx(ZN,{}),S.jsx("div",{className:"flex-1 relative",children:_==="tree"?S.jsx(KN,{}):S.jsxs(vw,{nodes:e,edges:a,onNodesChange:N,onEdgesChange:c,onConnect:q,onNodeDragStop:Z,onNodeClick:z,onNodeDoubleClick:G,onEdgeClick:R,onPaneClick:H,onDrop:X,onDragOver:B,onInit:d,nodeTypes:WM,fitView:!0,className:"bg-gray-50",children:[S.jsx(ww,{color:"#cbd5e1",gap:16}),S.jsx(_w,{}),S.jsx(Ew,{nodeColor:D=>{switch(D.data.type){case"system":return"#3b82f6";case"container":return"#22c55e";case"component":return"#eab308";case"person":return"#a855f7";case"externalSystem":return"#6b7280";default:return"#94a3b8"}}})]})}),_==="edit"&&S.jsx(QN,{})]})]})}gS.createRoot(document.getElementById("root")).render(S.jsx(V.StrictMode,{children:S.jsx(tj,{})}));
</script>
    <style>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media(min-width:640px){.container{max-width:640px}}@media(min-width:768px){.container{max-width:768px}}@media(min-width:1024px){.container{max-width:1024px}}@media(min-width:1280px){.container{max-width:1280px}}@media(min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.collapse{visibility:collapse}.absolute{position:absolute}.relative{position:relative}.bottom-2{bottom:.5rem}.left-2{left:.5rem}.right-0{right:0}.right-2{right:.5rem}.top-2{top:.5rem}.z-50{z-index:50}.my-1{margin-top:.25rem;margin-bottom:.25rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.\!h-2{height:.5rem!important}.\!h-4{height:1rem!important}.h-3{height:.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-full{height:100%}.h-screen{height:100vh}.max-h-48{max-height:12rem}.max-h-64{max-height:16rem}.\!w-2{width:.5rem!important}.\!w-4{width:1rem!important}.w-3{width:.75rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-64{width:16rem}.w-80{width:20rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-\[150px\]{min-width:150px}.min-w-\[200px\]{min-width:200px}.max-w-\[120px\]{max-width:120px}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.border-collapse{border-collapse:collapse}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-crosshair{cursor:crosshair}.cursor-grab{cursor:grab}.cursor-pointer{cursor:pointer}.cursor-text{cursor:text}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.\!border-0{border-width:0px!important}.\!border-2{border-width:2px!important}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-dashed{border-style:dashed}.\!border-white{--tw-border-opacity: 1 !important;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))!important}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-300{--tw-border-opacity: 1;border-color:rgb(147 197 253 / var(--tw-border-opacity, 1))}.border-blue-500{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-gray-500{--tw-border-opacity: 1;border-color:rgb(107 114 128 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity: 1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-purple-300{--tw-border-opacity: 1;border-color:rgb(216 180 254 / var(--tw-border-opacity, 1))}.border-purple-500{--tw-border-opacity: 1;border-color:rgb(168 85 247 / var(--tw-border-opacity, 1))}.border-red-100{--tw-border-opacity: 1;border-color:rgb(254 226 226 / var(--tw-border-opacity, 1))}.border-red-400{--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.border-slate-400{--tw-border-opacity: 1;border-color:rgb(148 163 184 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-yellow-300{--tw-border-opacity: 1;border-color:rgb(253 224 71 / var(--tw-border-opacity, 1))}.border-yellow-500{--tw-border-opacity: 1;border-color:rgb(234 179 8 / var(--tw-border-opacity, 1))}.\!bg-gray-400{--tw-bg-opacity: 1 !important;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))!important}.\!bg-slate-400{--tw-bg-opacity: 1 !important;background-color:rgb(148 163 184 / var(--tw-bg-opacity, 1))!important}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity: 1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-indigo-600{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-50\/50{background-color:#fef2f280}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-slate-100{--tw-bg-opacity: 1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-slate-50\/50{background-color:#f8fafc80}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/80{background-color:#fffc}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-\[9px\]{font-size:9px}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.italic{font-style:italic}.tracking-wide{letter-spacing:.025em}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-blue-900{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.text-purple-700{--tw-text-opacity: 1;color:rgb(126 34 206 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity: 1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity: 1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.ring-4{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-blue-400{--tw-ring-opacity: 1;--tw-ring-color: rgb(96 165 250 / var(--tw-ring-opacity, 1))}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-150{transition-duration:.15s}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*{box-sizing:border-box}.react-flow__attribution a{color:#6b7280!important}.hover\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.hover\:\!bg-blue-500:hover{--tw-bg-opacity: 1 !important;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))!important}.hover\:bg-blue-200:hover{--tw-bg-opacity: 1;background-color:rgb(191 219 254 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-300:hover{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:bg-green-200:hover{--tw-bg-opacity: 1;background-color:rgb(187 247 208 / var(--tw-bg-opacity, 1))}.hover\:bg-green-800:hover{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity, 1))}.hover\:bg-indigo-700:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity, 1))}.hover\:bg-purple-200:hover{--tw-bg-opacity: 1;background-color:rgb(233 213 255 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-200:hover{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/50:hover{background-color:#ffffff80}.hover\:bg-yellow-200:hover{--tw-bg-opacity: 1;background-color:rgb(254 240 138 / var(--tw-bg-opacity, 1))}.hover\:text-blue-500:hover{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.hover\:text-gray-900:hover{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.hover\:text-red-600:hover{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.hover\:no-underline:hover{text-decoration-line:none}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\:ring-indigo-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity, 1))}.active\:cursor-grabbing:active{cursor:grabbing}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.react-flow{direction:ltr;--xy-edge-stroke-default: #b1b1b7;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #555;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(255, 255, 255, .5);--xy-minimap-background-color-default: #fff;--xy-minimap-mask-background-color-default: rgba(240, 240, 240, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #e2e2e2;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: transparent;--xy-background-pattern-dots-color-default: #91919a;--xy-background-pattern-lines-color-default: #eee;--xy-background-pattern-cross-color-default: #e2e2e2;background-color:var(--xy-background-color, var(--xy-background-color-default));--xy-node-color-default: inherit;--xy-node-border-default: 1px solid #1a192b;--xy-node-background-color-default: #fff;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #1a192b;--xy-node-border-radius-default: 3px;--xy-handle-background-color-default: #1a192b;--xy-handle-border-color-default: #fff;--xy-selection-background-color-default: rgba(0, 89, 220, .08);--xy-selection-border-default: 1px dotted rgba(0, 89, 220, .8);--xy-controls-button-background-color-default: #fefefe;--xy-controls-button-background-color-hover-default: #f4f4f4;--xy-controls-button-color-default: inherit;--xy-controls-button-color-hover-default: inherit;--xy-controls-button-border-color-default: #eee;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #ffffff;--xy-edge-label-color-default: inherit;--xy-resize-background-color-default: #3367d9}.react-flow.dark{--xy-edge-stroke-default: #3e3e3e;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #727272;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(150, 150, 150, .25);--xy-minimap-background-color-default: #141414;--xy-minimap-mask-background-color-default: rgba(60, 60, 60, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #2b2b2b;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: #141414;--xy-background-pattern-dots-color-default: #777;--xy-background-pattern-lines-color-default: #777;--xy-background-pattern-cross-color-default: #777;--xy-node-color-default: #f8f8f8;--xy-node-border-default: 1px solid #3c3c3c;--xy-node-background-color-default: #1e1e1e;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #999;--xy-handle-background-color-default: #bebebe;--xy-handle-border-color-default: #1e1e1e;--xy-selection-background-color-default: rgba(200, 200, 220, .08);--xy-selection-border-default: 1px dotted rgba(200, 200, 220, .8);--xy-controls-button-background-color-default: #2b2b2b;--xy-controls-button-background-color-hover-default: #3e3e3e;--xy-controls-button-color-default: #f8f8f8;--xy-controls-button-color-hover-default: #fff;--xy-controls-button-border-color-default: #5b5b5b;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #141414;--xy-edge-label-color-default: #f8f8f8}.react-flow__background{background-color:var(--xy-background-color-props, var(--xy-background-color, var(--xy-background-color-default)));pointer-events:none;z-index:-1}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1}.react-flow__pane.draggable{cursor:grab}.react-flow__pane.dragging{cursor:grabbing}.react-flow__pane.selection{cursor:pointer}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow__edge-path{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));fill:none}.react-flow__connection-path{stroke:var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));fill:none}.react-flow .react-flow__edges{position:absolute}.react-flow .react-flow__edges svg{overflow:visible;position:absolute;pointer-events:none}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.selectable{cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge.selectable:focus .react-flow__edge-path,.react-flow__edge.selectable:focus-visible .react-flow__edge-path{stroke:var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default))}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__arrowhead polyline{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default))}.react-flow__arrowhead polyline.arrowclosed{fill:var(--xy-edge-stroke, var(--xy-edge-stroke-default))}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.react-flow__connectionline{z-index:1001;overflow:visible;position:absolute}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:default}.react-flow__node.selectable{cursor:pointer}.react-flow__node.draggable{cursor:grab;pointer-events:all}.react-flow__node.draggable.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background-color:var(--xy-handle-background-color, var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));border-radius:100%}.react-flow__handle.connectingfrom{pointer-events:all}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:0;transform:translate(-50%,50%)}.react-flow__handle-top{top:0;left:50%;transform:translate(-50%,-50%)}.react-flow__handle-left{top:50%;left:0;transform:translate(-50%,-50%)}.react-flow__handle-right{top:50%;right:0;transform:translate(50%,-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__pane.selection .react-flow__panel{pointer-events:none}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.top.center,.react-flow__panel.bottom.center{left:50%;transform:translate(-15px) translate(-50%)}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.left.center,.react-flow__panel.right.center{top:50%;transform:translateY(-15px) translateY(-50%)}.react-flow__attribution{font-size:10px;background:var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;left:0;top:0}.react-flow__viewport-portal{position:absolute;width:100%;height:100%;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__minimap{background:var( --xy-minimap-background-color-props, var(--xy-minimap-background-color, var(--xy-minimap-background-color-default)) )}.react-flow__minimap-svg{display:block}.react-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props, var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props, var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props, var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default)) )}.react-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props, var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props, var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props, var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default)) )}.react-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default)) )}.react-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default)) )}.react-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default)) )}.react-flow__controls{display:flex;flex-direction:column;box-shadow:var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default))}.react-flow__controls.horizontal{flex-direction:row}.react-flow__controls-button{display:flex;justify-content:center;align-items:center;height:26px;width:26px;padding:4px;border:none;background:var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));border-bottom:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)) );cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px;fill:currentColor}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-input,.react-flow__node-default,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:var(--xy-node-border-radius, var(--xy-node-border-radius-default));width:150px;font-size:12px;color:var(--xy-node-color, var(--xy-node-color-default));text-align:center;border:var(--xy-node-border, var(--xy-node-border-default));background-color:var(--xy-node-background-color, var(--xy-node-background-color-default))}.react-flow__node-input.selectable:hover,.react-flow__node-default.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default))}.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default))}.react-flow__node-group{background-color:var(--xy-node-group-background-color, var(--xy-node-group-background-color-default))}.react-flow__nodesselection-rect,.react-flow__selection{background:var(--xy-selection-background-color, var(--xy-selection-background-color-default));border:var(--xy-selection-border, var(--xy-selection-border-default))}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props, var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props, var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default)) )}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__controls-button:last-child{border-bottom:none}.react-flow__controls.horizontal .react-flow__controls-button{border-bottom:none;border-right:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) )}.react-flow__controls.horizontal .react-flow__controls-button:last-child{border-right:none}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:5px;height:5px;border:1px solid #fff;border-radius:1px;background-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));translate:-50% -50%}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.react-flow__edge-textbg{fill:var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default))}.react-flow__edge-text{fill:var(--xy-edge-label-color, var(--xy-edge-label-color-default))}
</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
